var Lg=Object.defineProperty;var Dg=(i,r,n)=>r in i?Lg(i,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[r]=n;var Vn=(i,r,n)=>Dg(i,typeof r!="symbol"?r+"":r,n);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))l(w);new MutationObserver(w=>{for(const d of w)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(w){const d={};return w.integrity&&(d.integrity=w.integrity),w.referrerPolicy&&(d.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?d.credentials="include":w.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(w){if(w.ep)return;w.ep=!0;const d=n(w);fetch(w.href,d)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var i=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(l,w,d){var f=null;if(d!==void 0&&(f=""+d),w.key!==void 0&&(f=""+w.key),"key"in w){d={};for(var a in w)a!=="key"&&(d[a]=w[a])}else d=w;return w=d.ref,{$$typeof:i,type:l,key:f,ref:w!==void 0?w:null,props:d}}return reactJsxRuntime_production.Fragment=r,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var i=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),v=Symbol.iterator;function S(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,b={};function m(P,L,F){this.props=P,this.context=L,this.refs=b,this.updater=F||E}m.prototype.isReactComponent={},m.prototype.setState=function(P,L){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,L,"setState")},m.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function p(){}p.prototype=m.prototype;function _(P,L,F){this.props=P,this.context=L,this.refs=b,this.updater=F||E}var y=_.prototype=new p;y.constructor=_,h(y,m.prototype),y.isPureReactComponent=!0;var x=Array.isArray,A={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function C(P,L,F,M,U,Z){return F=Z.ref,{$$typeof:i,type:P,key:L,ref:F!==void 0?F:null,props:Z}}function k(P,L){return C(P.type,L,void 0,void 0,void 0,P.props)}function D(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function j(P){var L={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(F){return L[F]})}var V=/\/+/g;function z(P,L){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):L.toString(36)}function W(){}function ee(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(W,W):(P.status="pending",P.then(function(L){P.status==="pending"&&(P.status="fulfilled",P.value=L)},function(L){P.status==="pending"&&(P.status="rejected",P.reason=L)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ne(P,L,F,M,U){var Z=typeof P;(Z==="undefined"||Z==="boolean")&&(P=null);var K=!1;if(P===null)K=!0;else switch(Z){case"bigint":case"string":case"number":K=!0;break;case"object":switch(P.$$typeof){case i:case r:K=!0;break;case $:return K=P._init,ne(K(P._payload),L,F,M,U)}}if(K)return U=U(P),K=M===""?"."+z(P,0):M,x(U)?(F="",K!=null&&(F=K.replace(V,"$&/")+"/"),ne(U,L,F,"",function($e){return $e})):U!=null&&(D(U)&&(U=k(U,F+(U.key==null||P&&P.key===U.key?"":(""+U.key).replace(V,"$&/")+"/")+K)),L.push(U)),1;K=0;var oe=M===""?".":M+":";if(x(P))for(var ie=0;ie<P.length;ie++)M=P[ie],Z=oe+z(M,ie),K+=ne(M,L,F,Z,U);else if(ie=S(P),typeof ie=="function")for(P=ie.call(P),ie=0;!(M=P.next()).done;)M=M.value,Z=oe+z(M,ie++),K+=ne(M,L,F,Z,U);else if(Z==="object"){if(typeof P.then=="function")return ne(ee(P),L,F,M,U);throw L=String(P),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return K}function Q(P,L,F){if(P==null)return P;var M=[],U=0;return ne(P,M,"","",function(Z){return L.call(F,Z,U++)}),M}function se(P){if(P._status===-1){var L=P._result;L=L(),L.then(function(F){(P._status===0||P._status===-1)&&(P._status=1,P._result=F)},function(F){(P._status===0||P._status===-1)&&(P._status=2,P._result=F)}),P._status===-1&&(P._status=0,P._result=L)}if(P._status===1)return P._result.default;throw P._result}var be=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function H(){}return react_production.Children={map:Q,forEach:function(P,L,F){Q(P,function(){L.apply(this,arguments)},F)},count:function(P){var L=0;return Q(P,function(){L++}),L},toArray:function(P){return Q(P,function(L){return L})||[]},only:function(P){if(!D(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},react_production.Component=m,react_production.Fragment=n,react_production.Profiler=w,react_production.PureComponent=_,react_production.StrictMode=l,react_production.Suspense=u,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,react_production.act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production.cache=function(P){return function(){return P.apply(null,arguments)}},react_production.cloneElement=function(P,L,F){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var M=h({},P.props),U=P.key,Z=void 0;if(L!=null)for(K in L.ref!==void 0&&(Z=void 0),L.key!==void 0&&(U=""+L.key),L)!R.call(L,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&L.ref===void 0||(M[K]=L[K]);var K=arguments.length-2;if(K===1)M.children=F;else if(1<K){for(var oe=Array(K),ie=0;ie<K;ie++)oe[ie]=arguments[ie+2];M.children=oe}return C(P.type,U,void 0,void 0,Z,M)},react_production.createContext=function(P){return P={$$typeof:f,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:d,_context:P},P},react_production.createElement=function(P,L,F){var M,U={},Z=null;if(L!=null)for(M in L.key!==void 0&&(Z=""+L.key),L)R.call(L,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(U[M]=L[M]);var K=arguments.length-2;if(K===1)U.children=F;else if(1<K){for(var oe=Array(K),ie=0;ie<K;ie++)oe[ie]=arguments[ie+2];U.children=oe}if(P&&P.defaultProps)for(M in K=P.defaultProps,K)U[M]===void 0&&(U[M]=K[M]);return C(P,Z,void 0,void 0,null,U)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(P){return{$$typeof:a,render:P}},react_production.isValidElement=D,react_production.lazy=function(P){return{$$typeof:$,_payload:{_status:-1,_result:P},_init:se}},react_production.memo=function(P,L){return{$$typeof:g,type:P,compare:L===void 0?null:L}},react_production.startTransition=function(P){var L=A.T,F={};A.T=F;try{var M=P(),U=A.S;U!==null&&U(F,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(H,be)}catch(Z){be(Z)}finally{A.T=L}},react_production.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},react_production.use=function(P){return A.H.use(P)},react_production.useActionState=function(P,L,F){return A.H.useActionState(P,L,F)},react_production.useCallback=function(P,L){return A.H.useCallback(P,L)},react_production.useContext=function(P){return A.H.useContext(P)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(P,L){return A.H.useDeferredValue(P,L)},react_production.useEffect=function(P,L){return A.H.useEffect(P,L)},react_production.useId=function(){return A.H.useId()},react_production.useImperativeHandle=function(P,L,F){return A.H.useImperativeHandle(P,L,F)},react_production.useInsertionEffect=function(P,L){return A.H.useInsertionEffect(P,L)},react_production.useLayoutEffect=function(P,L){return A.H.useLayoutEffect(P,L)},react_production.useMemo=function(P,L){return A.H.useMemo(P,L)},react_production.useOptimistic=function(P,L){return A.H.useOptimistic(P,L)},react_production.useReducer=function(P,L,F){return A.H.useReducer(P,L,F)},react_production.useRef=function(P){return A.H.useRef(P)},react_production.useState=function(P){return A.H.useState(P)},react_production.useSyncExternalStore=function(P,L,F){return A.H.useSyncExternalStore(P,L,F)},react_production.useTransition=function(){return A.H.useTransition()},react_production.version="19.0.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(i){function r(Q,se){var be=Q.length;Q.push(se);e:for(;0<be;){var H=be-1>>>1,P=Q[H];if(0<w(P,se))Q[H]=se,Q[be]=P,be=H;else break e}}function n(Q){return Q.length===0?null:Q[0]}function l(Q){if(Q.length===0)return null;var se=Q[0],be=Q.pop();if(be!==se){Q[0]=be;e:for(var H=0,P=Q.length,L=P>>>1;H<L;){var F=2*(H+1)-1,M=Q[F],U=F+1,Z=Q[U];if(0>w(M,be))U<P&&0>w(Z,M)?(Q[H]=Z,Q[U]=be,H=U):(Q[H]=M,Q[F]=be,H=F);else if(U<P&&0>w(Z,be))Q[H]=Z,Q[U]=be,H=U;else break e}}return se}function w(Q,se){var be=Q.sortIndex-se.sortIndex;return be!==0?be:Q.id-se.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var f=Date,a=f.now();i.unstable_now=function(){return f.now()-a}}var u=[],g=[],$=1,v=null,S=3,E=!1,h=!1,b=!1,m=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function y(Q){for(var se=n(g);se!==null;){if(se.callback===null)l(g);else if(se.startTime<=Q)l(g),se.sortIndex=se.expirationTime,r(u,se);else break;se=n(g)}}function x(Q){if(b=!1,y(Q),!h)if(n(u)!==null)h=!0,ee();else{var se=n(g);se!==null&&ne(x,se.startTime-Q)}}var A=!1,R=-1,C=5,k=-1;function D(){return!(i.unstable_now()-k<C)}function j(){if(A){var Q=i.unstable_now();k=Q;var se=!0;try{e:{h=!1,b&&(b=!1,p(R),R=-1),E=!0;var be=S;try{t:{for(y(Q),v=n(u);v!==null&&!(v.expirationTime>Q&&D());){var H=v.callback;if(typeof H=="function"){v.callback=null,S=v.priorityLevel;var P=H(v.expirationTime<=Q);if(Q=i.unstable_now(),typeof P=="function"){v.callback=P,y(Q),se=!0;break t}v===n(u)&&l(u),y(Q)}else l(u);v=n(u)}if(v!==null)se=!0;else{var L=n(g);L!==null&&ne(x,L.startTime-Q),se=!1}}break e}finally{v=null,S=be,E=!1}se=void 0}}finally{se?V():A=!1}}}var V;if(typeof _=="function")V=function(){_(j)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=j,V=function(){W.postMessage(null)}}else V=function(){m(j,0)};function ee(){A||(A=!0,V())}function ne(Q,se){R=m(function(){Q(i.unstable_now())},se)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_continueExecution=function(){h||E||(h=!0,ee())},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return n(u)},i.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var se=3;break;default:se=S}var be=S;S=se;try{return Q()}finally{S=be}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Q,se){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var be=S;S=Q;try{return se()}finally{S=be}},i.unstable_scheduleCallback=function(Q,se,be){var H=i.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?H+be:H):be=H,Q){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=be+P,Q={id:$++,callback:se,priorityLevel:Q,startTime:be,expirationTime:P,sortIndex:-1},be>H?(Q.sortIndex=be,r(g,Q),n(u)===null&&Q===n(g)&&(b?(p(R),R=-1):b=!0,ne(x,be-H))):(Q.sortIndex=P,r(u,Q),h||E||(h=!0,ee())),Q},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(Q){var se=S;return function(){var be=S;S=se;try{return Q.apply(this,arguments)}finally{S=be}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var i=requireReact();function r(u){var g="https://react.dev/errors/"+u;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var $=2;$<arguments.length;$++)g+="&args[]="+encodeURIComponent(arguments[$])}return"Minified React error #"+u+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},w=Symbol.for("react.portal");function d(u,g,$){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:w,key:v==null?null:""+v,children:u,containerInfo:g,implementation:$}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(u,g){if(u==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,reactDom_production.createPortal=function(u,g){var $=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return d(u,g,null,$)},reactDom_production.flushSync=function(u){var g=f.T,$=l.p;try{if(f.T=null,l.p=2,u)return u()}finally{f.T=g,l.p=$,l.d.f()}},reactDom_production.preconnect=function(u,g){typeof u=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,l.d.C(u,g))},reactDom_production.prefetchDNS=function(u){typeof u=="string"&&l.d.D(u)},reactDom_production.preinit=function(u,g){if(typeof u=="string"&&g&&typeof g.as=="string"){var $=g.as,v=a($,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;$==="style"?l.d.S(u,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:E}):$==="script"&&l.d.X(u,{crossOrigin:v,integrity:S,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},reactDom_production.preinitModule=function(u,g){if(typeof u=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var $=a(g.as,g.crossOrigin);l.d.M(u,{crossOrigin:$,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&l.d.M(u)},reactDom_production.preload=function(u,g){if(typeof u=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var $=g.as,v=a($,g.crossOrigin);l.d.L(u,$,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},reactDom_production.preloadModule=function(u,g){if(typeof u=="string")if(g){var $=a(g.as,g.crossOrigin);l.d.m(u,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:$,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else l.d.m(u)},reactDom_production.requestFormReset=function(u){l.d.r(u)},reactDom_production.unstable_batchedUpdates=function(u,g){return u(g)},reactDom_production.useFormState=function(u,g,$){return f.H.useFormState(u,g,$)},reactDom_production.useFormStatus=function(){return f.H.useHostTransitionStatus()},reactDom_production.version="19.0.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var i=requireScheduler(),r=requireReact(),n=requireReactDom();function l(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var O=2;O<arguments.length;O++)c+="&args[]="+encodeURIComponent(arguments[O])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function w(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}var d=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),x=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function R(o){return o===null||typeof o!="object"?null:(o=A&&o[A]||o["@@iterator"],typeof o=="function"?o:null)}var C=Symbol.for("react.client.reference");function k(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===C?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case u:return"Fragment";case a:return"Portal";case $:return"Profiler";case g:return"StrictMode";case b:return"Suspense";case m:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case E:return(o.displayName||"Context")+".Provider";case S:return(o._context.displayName||"Context")+".Consumer";case h:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case p:return c=o.displayName||null,c!==null?c:k(o.type)||"Memo";case _:c=o._payload,o=o._init;try{return k(o(c))}catch{}}return null}var D=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=Object.assign,V,z;function W(o){if(V===void 0)try{throw Error()}catch(O){var c=O.stack.trim().match(/\n( *(at )?)/);V=c&&c[1]||"",z=-1<O.stack.indexOf(`
    at`)?" (<anonymous>)":-1<O.stack.indexOf("@")?"@unknown:0:0":""}return`
`+V+o+z}var ee=!1;function ne(o,c){if(!o||ee)return"";ee=!0;var O=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var I={DetermineComponentFrameRoot:function(){try{if(c){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pt,[])}catch(Ot){var dt=Ot}Reflect.construct(o,[],Pt)}else{try{Pt.call()}catch(Ot){dt=Ot}o.call(Pt.prototype)}}else{try{throw Error()}catch(Ot){dt=Ot}(Pt=o())&&typeof Pt.catch=="function"&&Pt.catch(function(){})}}catch(Ot){if(Ot&&dt&&typeof Ot.stack=="string")return[Ot.stack,dt.stack]}return[null,null]}};I.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(I.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(I.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var J=I.DetermineComponentFrameRoot(),Te=J[0],Ce=J[1];if(Te&&Ce){var ze=Te.split(`
`),et=Ce.split(`
`);for(G=I=0;I<ze.length&&!ze[I].includes("DetermineComponentFrameRoot");)I++;for(;G<et.length&&!et[G].includes("DetermineComponentFrameRoot");)G++;if(I===ze.length||G===et.length)for(I=ze.length-1,G=et.length-1;1<=I&&0<=G&&ze[I]!==et[G];)G--;for(;1<=I&&0<=G;I--,G--)if(ze[I]!==et[G]){if(I!==1||G!==1)do if(I--,G--,0>G||ze[I]!==et[G]){var Tt=`
`+ze[I].replace(" at new "," at ");return o.displayName&&Tt.includes("<anonymous>")&&(Tt=Tt.replace("<anonymous>",o.displayName)),Tt}while(1<=I&&0<=G);break}}}finally{ee=!1,Error.prepareStackTrace=O}return(O=o?o.displayName||o.name:"")?W(O):""}function Q(o){switch(o.tag){case 26:case 27:case 5:return W(o.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 15:return o=ne(o.type,!1),o;case 11:return o=ne(o.type.render,!1),o;case 1:return o=ne(o.type,!0),o;default:return""}}function se(o){try{var c="";do c+=Q(o),o=o.return;while(o);return c}catch(O){return`
Error generating stack: `+O.message+`
`+O.stack}}function be(o){var c=o,O=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(O=c.return),o=c.return;while(o)}return c.tag===3?O:null}function H(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function P(o){if(be(o)!==o)throw Error(l(188))}function L(o){var c=o.alternate;if(!c){if(c=be(o),c===null)throw Error(l(188));return c!==o?null:o}for(var O=o,I=c;;){var G=O.return;if(G===null)break;var J=G.alternate;if(J===null){if(I=G.return,I!==null){O=I;continue}break}if(G.child===J.child){for(J=G.child;J;){if(J===O)return P(G),o;if(J===I)return P(G),c;J=J.sibling}throw Error(l(188))}if(O.return!==I.return)O=G,I=J;else{for(var Te=!1,Ce=G.child;Ce;){if(Ce===O){Te=!0,O=G,I=J;break}if(Ce===I){Te=!0,I=G,O=J;break}Ce=Ce.sibling}if(!Te){for(Ce=J.child;Ce;){if(Ce===O){Te=!0,O=J,I=G;break}if(Ce===I){Te=!0,I=J,O=G;break}Ce=Ce.sibling}if(!Te)throw Error(l(189))}}if(O.alternate!==I)throw Error(l(190))}if(O.tag!==3)throw Error(l(188));return O.stateNode.current===O?o:c}function F(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=F(o),c!==null)return c;o=o.sibling}return null}var M=Array.isArray,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},K=[],oe=-1;function ie(o){return{current:o}}function $e(o){0>oe||(o.current=K[oe],K[oe]=null,oe--)}function ce(o,c){oe++,K[oe]=o.current,o.current=c}var le=ie(null),ye=ie(null),_e=ie(null),q=ie(null);function re(o,c){switch(ce(_e,c),ce(ye,o),ce(le,null),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)&&(c=c.namespaceURI)?Ii(c):0;break;default:if(o=o===8?c.parentNode:c,c=o.tagName,o=o.namespaceURI)o=Ii(o),c=Mf(o,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}$e(le),ce(le,c)}function fe(){$e(le),$e(ye),$e(_e)}function we(o){o.memoizedState!==null&&ce(q,o);var c=le.current,O=Mf(c,o.type);c!==O&&(ce(ye,o),ce(le,O))}function Re(o){ye.current===o&&($e(le),$e(ye)),q.current===o&&($e(q),zi._currentValue=Z)}var ke=Object.prototype.hasOwnProperty,ue=i.unstable_scheduleCallback,Ee=i.unstable_cancelCallback,Ae=i.unstable_shouldYield,Ne=i.unstable_requestPaint,De=i.unstable_now,he=i.unstable_getCurrentPriorityLevel,tt=i.unstable_ImmediatePriority,at=i.unstable_UserBlockingPriority,He=i.unstable_NormalPriority,ot=i.unstable_LowPriority,Ue=i.unstable_IdlePriority,Ze=i.log,ae=i.unstable_setDisableYieldValue,Oe=null,Le=null;function Pe(o){if(Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Oe,o,void 0,(o.current.flags&128)===128)}catch{}}function ft(o){if(typeof Ze=="function"&&ae(o),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Oe,o)}catch{}}var Lt=Math.clz32?Math.clz32:dn,qt=Math.log,gn=Math.LN2;function dn(o){return o>>>=0,o===0?32:31-(qt(o)/gn|0)|0}var un=128,ge=4194304;function ve(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Fe(o,c){var O=o.pendingLanes;if(O===0)return 0;var I=0,G=o.suspendedLanes,J=o.pingedLanes,Te=o.warmLanes;o=o.finishedLanes!==0;var Ce=O&134217727;return Ce!==0?(O=Ce&~G,O!==0?I=ve(O):(J&=Ce,J!==0?I=ve(J):o||(Te=Ce&~Te,Te!==0&&(I=ve(Te))))):(Ce=O&~G,Ce!==0?I=ve(Ce):J!==0?I=ve(J):o||(Te=O&~Te,Te!==0&&(I=ve(Te)))),I===0?0:c!==0&&c!==I&&(c&G)===0&&(G=I&-I,Te=c&-c,G>=Te||G===32&&(Te&4194176)!==0)?c:I}function qe(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function st(o,c){switch(o){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dt(){var o=un;return un<<=1,(un&4194176)===0&&(un=128),o}function Wt(){var o=ge;return ge<<=1,(ge&62914560)===0&&(ge=4194304),o}function pn(o){for(var c=[],O=0;31>O;O++)c.push(o);return c}function bn(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function sr(o,c,O,I,G,J){var Te=o.pendingLanes;o.pendingLanes=O,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=O,o.entangledLanes&=O,o.errorRecoveryDisabledLanes&=O,o.shellSuspendCounter=0;var Ce=o.entanglements,ze=o.expirationTimes,et=o.hiddenUpdates;for(O=Te&~O;0<O;){var Tt=31-Lt(O),Pt=1<<Tt;Ce[Tt]=0,ze[Tt]=-1;var dt=et[Tt];if(dt!==null)for(et[Tt]=null,Tt=0;Tt<dt.length;Tt++){var Ot=dt[Tt];Ot!==null&&(Ot.lane&=-536870913)}O&=~Pt}I!==0&&Pn(o,I,0),J!==0&&G===0&&o.tag!==0&&(o.suspendedLanes|=J&~(Te&~c))}function Pn(o,c,O){o.pendingLanes|=c,o.suspendedLanes&=~c;var I=31-Lt(c);o.entangledLanes|=c,o.entanglements[I]=o.entanglements[I]|1073741824|O&4194218}function Bn(o,c){var O=o.entangledLanes|=c;for(o=o.entanglements;O;){var I=31-Lt(O),G=1<<I;G&c|o[I]&c&&(o[I]|=c),O&=~G}}function ci(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function pe(){var o=U.p;return o!==0?o:(o=window.event,o===void 0?32:xu(o.type))}function Se(o,c){var O=U.p;try{return U.p=o,c()}finally{U.p=O}}var Ie=Math.random().toString(36).slice(2),Me="__reactFiber$"+Ie,Be="__reactProps$"+Ie,Ge="__reactContainer$"+Ie,Xe="__reactEvents$"+Ie,Je="__reactListeners$"+Ie,xt="__reactHandles$"+Ie,nt="__reactResources$"+Ie,ct="__reactMarker$"+Ie;function mt(o){delete o[Me],delete o[Be],delete o[Xe],delete o[Je],delete o[xt]}function yt(o){var c=o[Me];if(c)return c;for(var O=o.parentNode;O;){if(c=O[Ge]||O[Me]){if(O=c.alternate,c.child!==null||O!==null&&O.child!==null)for(o=td(o);o!==null;){if(O=o[Me])return O;o=td(o)}return c}o=O,O=o.parentNode}return null}function Et(o){if(o=o[Me]||o[Ge]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function jt(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(l(33))}function Ut(o){var c=o[nt];return c||(c=o[nt]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Ct(o){o[ct]=!0}var ln=new Set,yn={};function $n(o,c){sn(o,c),sn(o+"Capture",c)}function sn(o,c){for(yn[o]=c,o=0;o<c.length;o++)ln.add(c[o])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_n={},hr={};function ar(o){return ke.call(hr,o)?!0:ke.call(_n,o)?!1:jn.test(o)?hr[o]=!0:(_n[o]=!0,!1)}function dr(o,c,O){if(ar(c))if(O===null)o.removeAttribute(c);else{switch(typeof O){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var I=c.toLowerCase().slice(0,5);if(I!=="data-"&&I!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+O)}}function vn(o,c,O){if(O===null)o.removeAttribute(c);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+O)}}function Un(o,c,O,I){if(I===null)o.removeAttribute(O);else{switch(typeof I){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(O);return}o.setAttributeNS(c,O,""+I)}}function pt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Tn(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function nr(o){var c=Tn(o)?"checked":"value",O=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),I=""+o[c];if(!o.hasOwnProperty(c)&&typeof O<"u"&&typeof O.get=="function"&&typeof O.set=="function"){var G=O.get,J=O.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return G.call(this)},set:function(Te){I=""+Te,J.call(this,Te)}}),Object.defineProperty(o,c,{enumerable:O.enumerable}),{getValue:function(){return I},setValue:function(Te){I=""+Te},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function _t(o){o._valueTracker||(o._valueTracker=nr(o))}function wt(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var O=c.getValue(),I="";return o&&(I=Tn(o)?o.checked?"true":"false":o.value),o=I,o!==O?(c.setValue(o),!0):!1}function Ft(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var hn=/[\n"\\]/g;function Vt(o){return o.replace(hn,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Sn(o,c,O,I,G,J,Te,Ce){o.name="",Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"?o.type=Te:o.removeAttribute("type"),c!=null?Te==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+pt(c)):o.value!==""+pt(c)&&(o.value=""+pt(c)):Te!=="submit"&&Te!=="reset"||o.removeAttribute("value"),c!=null?xn(o,Te,pt(c)):O!=null?xn(o,Te,pt(O)):I!=null&&o.removeAttribute("value"),G==null&&J!=null&&(o.defaultChecked=!!J),G!=null&&(o.checked=G&&typeof G!="function"&&typeof G!="symbol"),Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?o.name=""+pt(Ce):o.removeAttribute("name")}function zn(o,c,O,I,G,J,Te,Ce){if(J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(o.type=J),c!=null||O!=null){if(!(J!=="submit"&&J!=="reset"||c!=null))return;O=O!=null?""+pt(O):"",c=c!=null?""+pt(c):O,Ce||c===o.value||(o.value=c),o.defaultValue=c}I=I??G,I=typeof I!="function"&&typeof I!="symbol"&&!!I,o.checked=Ce?o.checked:!!I,o.defaultChecked=!!I,Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"&&(o.name=Te)}function xn(o,c,O){c==="number"&&Ft(o.ownerDocument)===o||o.defaultValue===""+O||(o.defaultValue=""+O)}function Rn(o,c,O,I){if(o=o.options,c){c={};for(var G=0;G<O.length;G++)c["$"+O[G]]=!0;for(O=0;O<o.length;O++)G=c.hasOwnProperty("$"+o[O].value),o[O].selected!==G&&(o[O].selected=G),G&&I&&(o[O].defaultSelected=!0)}else{for(O=""+pt(O),c=null,G=0;G<o.length;G++){if(o[G].value===O){o[G].selected=!0,I&&(o[G].defaultSelected=!0);return}c!==null||o[G].disabled||(c=o[G])}c!==null&&(c.selected=!0)}}function lr(o,c,O){if(c!=null&&(c=""+pt(c),c!==o.value&&(o.value=c),O==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=O!=null?""+pt(O):""}function fr(o,c,O,I){if(c==null){if(I!=null){if(O!=null)throw Error(l(92));if(M(I)){if(1<I.length)throw Error(l(93));I=I[0]}O=I}O==null&&(O=""),c=O}O=pt(c),o.defaultValue=O,I=o.textContent,I===O&&I!==""&&I!==null&&(o.value=I)}function Cn(o,c){if(c){var O=o.firstChild;if(O&&O===o.lastChild&&O.nodeType===3){O.nodeValue=c;return}}o.textContent=c}var Lr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Er(o,c,O){var I=c.indexOf("--")===0;O==null||typeof O=="boolean"||O===""?I?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":I?o.setProperty(c,O):typeof O!="number"||O===0||Lr.has(c)?c==="float"?o.cssFloat=O:o[c]=(""+O).trim():o[c]=O+"px"}function Sr(o,c,O){if(c!=null&&typeof c!="object")throw Error(l(62));if(o=o.style,O!=null){for(var I in O)!O.hasOwnProperty(I)||c!=null&&c.hasOwnProperty(I)||(I.indexOf("--")===0?o.setProperty(I,""):I==="float"?o.cssFloat="":o[I]="");for(var G in c)I=c[G],c.hasOwnProperty(G)&&O[G]!==I&&Er(o,G,I)}else for(var J in c)c.hasOwnProperty(J)&&Er(o,J,c[J])}function Y(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),me=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function de(o){return me.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var je=null;function Ve(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var bt=null,$t=null;function Ye(o){var c=Et(o);if(c&&(o=c.stateNode)){var O=o[Be]||null;e:switch(o=c.stateNode,c.type){case"input":if(Sn(o,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name),c=O.name,O.type==="radio"&&c!=null){for(O=o;O.parentNode;)O=O.parentNode;for(O=O.querySelectorAll('input[name="'+Vt(""+c)+'"][type="radio"]'),c=0;c<O.length;c++){var I=O[c];if(I!==o&&I.form===o.form){var G=I[Be]||null;if(!G)throw Error(l(90));Sn(I,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(c=0;c<O.length;c++)I=O[c],I.form===o.form&&wt(I)}break e;case"textarea":lr(o,O.value,O.defaultValue);break e;case"select":c=O.value,c!=null&&Rn(o,!!O.multiple,c,!1)}}}var zt=!1;function Mt(o,c,O){if(zt)return o(c,O);zt=!0;try{var I=o(c);return I}finally{if(zt=!1,(bt!==null||$t!==null)&&(hu(),bt&&(c=bt,o=$t,$t=bt=null,Ye(c),o)))for(c=0;c<o.length;c++)Ye(o[c])}}function ut(o,c){var O=o.stateNode;if(O===null)return null;var I=O[Be]||null;if(I===null)return null;O=I[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(o=o.type,I=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!I;break e;default:o=!1}if(o)return null;if(O&&typeof O!="function")throw Error(l(231,c,typeof O));return O}var At=!1;if(wn)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){At=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{At=!1}var Jt=null,On=null,Yn=null;function Kn(){if(Yn)return Yn;var o,c=On,O=c.length,I,G="value"in Jt?Jt.value:Jt.textContent,J=G.length;for(o=0;o<O&&c[o]===G[o];o++);var Te=O-o;for(I=1;I<=Te&&c[O-I]===G[J-I];I++);return Yn=G.slice(o,1<I?1-I:void 0)}function kn(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Xn(){return!0}function Ht(){return!1}function nn(o){function c(O,I,G,J,Te){this._reactName=O,this._targetInst=G,this.type=I,this.nativeEvent=J,this.target=Te,this.currentTarget=null;for(var Ce in o)o.hasOwnProperty(Ce)&&(O=o[Ce],this[Ce]=O?O(J):J[Ce]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?Xn:Ht,this.isPropagationStopped=Ht,this}return j(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var O=this.nativeEvent;O&&(O.preventDefault?O.preventDefault():typeof O.returnValue!="unknown"&&(O.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var O=this.nativeEvent;O&&(O.stopPropagation?O.stopPropagation():typeof O.cancelBubble!="unknown"&&(O.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),c}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nn=nn(Fr),Or=j({},Fr,{view:0,detail:0}),St=nn(Or),Yt,Gt,In,Ln=j({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==In&&(In&&o.type==="mousemove"?(Yt=o.screenX-In.screenX,Gt=o.screenY-In.screenY):Gt=Yt=0,In=o),Yt)},movementY:function(o){return"movementY"in o?o.movementY:Gt}}),br=nn(Ln),Fs=j({},Ln,{dataTransfer:0}),Hs=nn(Fs),jo=j({},Or,{relatedTarget:0}),Uo=nn(jo),Lu=j({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sa=nn(Lu),Xf=j({},Fr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jf=nn(Xf),md=j({},Fr,{data:0}),gd=nn(md),dl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fl(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Zf[o])?!!c[o]:!1}function cc(){return fl}var bd=j({},Or,{key:function(o){if(o.key){var c=dl[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=kn(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Du[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(o){return o.type==="keypress"?kn(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?kn(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),yd=nn(bd),uc=j({},Ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hc=nn(uc),_d=j({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),Qf=nn(_d),$d=j({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vd=nn($d),Ed=j({},Ln,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),wd=nn(Ed),Td=j({},Fr,{newState:0,oldState:0}),Sd=nn(Td),Od=[9,13,27,32],Pu=wn&&"CompositionEvent"in window,ds=null;wn&&"documentMode"in document&&(ds=document.documentMode);var xd=wn&&"TextEvent"in window&&!ds,dc=wn&&(!Pu||ds&&8<ds&&11>=ds),fc=" ",To=!1;function Bu(o,c){switch(o){case"keyup":return Od.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ju(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Fo=!1;function Ad(o,c){switch(o){case"compositionend":return ju(c);case"keypress":return c.which!==32?null:(To=!0,fc);case"textInput":return o=c.data,o===fc&&To?null:o;default:return null}}function Rd(o,c){if(Fo)return o==="compositionend"||!Pu&&Bu(o,c)?(o=Kn(),Yn=On=Jt=null,Fo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return dc&&c.locale!=="ko"?null:c.data;default:return null}}var ep={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pc(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!ep[o.type]:c==="textarea"}function Uu(o,c,O,I){bt?$t?$t.push(I):$t=[I]:bt=I,c=ma(c,"onChange"),0<c.length&&(O=new Nn("onChange","change",null,O,I),o.push({event:O,listeners:c}))}var pl=null,ml=null;function tp(o){Xh(o,0)}function mc(o){var c=jt(o);if(wt(c))return o}function Cd(o,c){if(o==="change")return c}var Oa=!1;if(wn){var gc;if(wn){var bc="oninput"in document;if(!bc){var xa=document.createElement("div");xa.setAttribute("oninput","return;"),bc=typeof xa.oninput=="function"}gc=bc}else gc=!1;Oa=gc&&(!document.documentMode||9<document.documentMode)}function yc(){pl&&(pl.detachEvent("onpropertychange",kd),ml=pl=null)}function kd(o){if(o.propertyName==="value"&&mc(ml)){var c=[];Uu(c,ml,o,Ve(o)),Mt(tp,c)}}function np(o,c,O){o==="focusin"?(yc(),pl=c,ml=O,pl.attachEvent("onpropertychange",kd)):o==="focusout"&&yc()}function Id(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return mc(ml)}function Md(o,c){if(o==="click")return mc(c)}function fs(o,c){if(o==="input"||o==="change")return mc(c)}function Nd(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Ti=typeof Object.is=="function"?Object.is:Nd;function gl(o,c){if(Ti(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var O=Object.keys(o),I=Object.keys(c);if(O.length!==I.length)return!1;for(I=0;I<O.length;I++){var G=O[I];if(!ke.call(c,G)||!Ti(o[G],c[G]))return!1}return!0}function Ld(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Dd(o,c){var O=Ld(o);o=0;for(var I;O;){if(O.nodeType===3){if(I=o+O.textContent.length,o<=c&&I>=c)return{node:O,offset:c-o};o=I}e:{for(;O;){if(O.nextSibling){O=O.nextSibling;break e}O=O.parentNode}O=void 0}O=Ld(O)}}function Pd(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Pd(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Fu(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Ft(o.document);c instanceof o.HTMLIFrameElement;){try{var O=typeof c.contentWindow.location.href=="string"}catch{O=!1}if(O)o=c.contentWindow;else break;c=Ft(o.document)}return c}function Hu(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function Bd(o,c){var O=Fu(c);c=o.focusedElem;var I=o.selectionRange;if(O!==c&&c&&c.ownerDocument&&Pd(c.ownerDocument.documentElement,c)){if(I!==null&&Hu(c)){if(o=I.start,O=I.end,O===void 0&&(O=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(O,c.value.length);else if(O=(o=c.ownerDocument||document)&&o.defaultView||window,O.getSelection){O=O.getSelection();var G=c.textContent.length,J=Math.min(I.start,G);I=I.end===void 0?J:Math.min(I.end,G),!O.extend&&J>I&&(G=I,I=J,J=G),G=Dd(c,J);var Te=Dd(c,I);G&&Te&&(O.rangeCount!==1||O.anchorNode!==G.node||O.anchorOffset!==G.offset||O.focusNode!==Te.node||O.focusOffset!==Te.offset)&&(o=o.createRange(),o.setStart(G.node,G.offset),O.removeAllRanges(),J>I?(O.addRange(o),O.extend(Te.node,Te.offset)):(o.setEnd(Te.node,Te.offset),O.addRange(o)))}}for(o=[],O=c;O=O.parentNode;)O.nodeType===1&&o.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)O=o[c],O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}var rp=wn&&"documentMode"in document&&11>=document.documentMode,fo=null,Aa=null,Vs=null,bl=!1;function zs(o,c,O){var I=O.window===O?O.document:O.nodeType===9?O:O.ownerDocument;bl||fo==null||fo!==Ft(I)||(I=fo,"selectionStart"in I&&Hu(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Vs&&gl(Vs,I)||(Vs=I,I=ma(Aa,"onSelect"),0<I.length&&(c=new Nn("onSelect","select",null,c,O),o.push({event:c,listeners:I}),c.target=fo)))}function ps(o,c){var O={};return O[o.toLowerCase()]=c.toLowerCase(),O["Webkit"+o]="webkit"+c,O["Moz"+o]="moz"+c,O}var ms={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionrun:ps("Transition","TransitionRun"),transitionstart:ps("Transition","TransitionStart"),transitioncancel:ps("Transition","TransitionCancel"),transitionend:ps("Transition","TransitionEnd")},_c={},Dr={};wn&&(Dr=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function Gs(o){if(_c[o])return _c[o];if(!ms[o])return o;var c=ms[o],O;for(O in c)if(c.hasOwnProperty(O)&&O in Dr)return _c[o]=c[O];return o}var Ra=Gs("animationend"),Ws=Gs("animationiteration"),jd=Gs("animationstart"),Ud=Gs("transitionrun"),Vu=Gs("transitionstart"),yl=Gs("transitioncancel"),zu=Gs("transitionend"),qs=new Map,_l="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function qi(o,c){qs.set(o,c),$n(c,[o])}var Di=[],Ca=0,Gu=0;function $c(){for(var o=Ca,c=Gu=Ca=0;c<o;){var O=Di[c];Di[c++]=null;var I=Di[c];Di[c++]=null;var G=Di[c];Di[c++]=null;var J=Di[c];if(Di[c++]=null,I!==null&&G!==null){var Te=I.pending;Te===null?G.next=G:(G.next=Te.next,Te.next=G),I.pending=G}J!==0&&vl(O,G,J)}}function $l(o,c,O,I){Di[Ca++]=o,Di[Ca++]=c,Di[Ca++]=O,Di[Ca++]=I,Gu|=I,o.lanes|=I,o=o.alternate,o!==null&&(o.lanes|=I)}function Wu(o,c,O,I){return $l(o,c,O,I),vc(o)}function Ho(o,c){return $l(o,null,null,c),vc(o)}function vl(o,c,O){o.lanes|=O;var I=o.alternate;I!==null&&(I.lanes|=O);for(var G=!1,J=o.return;J!==null;)J.childLanes|=O,I=J.alternate,I!==null&&(I.childLanes|=O),J.tag===22&&(o=J.stateNode,o===null||o._visibility&1||(G=!0)),o=J,J=J.return;G&&c!==null&&o.tag===3&&(J=o.stateNode,G=31-Lt(O),J=J.hiddenUpdates,o=J[G],o===null?J[G]=[c]:o.push(c),c.lane=O|536870912)}function vc(o){if(50<ca)throw ca=0,uu=null,Error(l(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var ka={},Fd=new WeakMap;function Yi(o,c){if(typeof o=="object"&&o!==null){var O=Fd.get(o);return O!==void 0?O:(c={value:o,source:c,stack:se(c)},Fd.set(o,c),c)}return{value:o,source:c,stack:se(c)}}var Vo=[],Ys=0,El=null,Ia=0,Si=[],Ki=0,So=null,Oo=1,Xi="";function Ks(o,c){Vo[Ys++]=Ia,Vo[Ys++]=El,El=o,Ia=c}function Hd(o,c,O){Si[Ki++]=Oo,Si[Ki++]=Xi,Si[Ki++]=So,So=o;var I=Oo;o=Xi;var G=32-Lt(I)-1;I&=~(1<<G),O+=1;var J=32-Lt(c)+G;if(30<J){var Te=G-G%5;J=(I&(1<<Te)-1).toString(32),I>>=Te,G-=Te,Oo=1<<32-Lt(c)+G|O<<G|I,Xi=J+o}else Oo=1<<J|O<<G|I,Xi=o}function zo(o){o.return!==null&&(Ks(o,1),Hd(o,1,0))}function Ec(o){for(;o===El;)El=Vo[--Ys],Vo[Ys]=null,Ia=Vo[--Ys],Vo[Ys]=null;for(;o===So;)So=Si[--Ki],Si[Ki]=null,Xi=Si[--Ki],Si[Ki]=null,Oo=Si[--Ki],Si[Ki]=null}var Ir=null,si=null,cr=!1,Ji=null,xo=!1,gs=Error(l(519));function bs(o){var c=Error(l(418,""));throw Sl(Yi(c,o)),gs}function Vd(o){var c=o.stateNode,O=o.type,I=o.memoizedProps;switch(c[Me]=o,c[Be]=I,O){case"dialog":tr("cancel",c),tr("close",c);break;case"iframe":case"object":case"embed":tr("load",c);break;case"video":case"audio":for(O=0;O<pa.length;O++)tr(pa[O],c);break;case"source":tr("error",c);break;case"img":case"image":case"link":tr("error",c),tr("load",c);break;case"details":tr("toggle",c);break;case"input":tr("invalid",c),zn(c,I.value,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name,!0),_t(c);break;case"select":tr("invalid",c);break;case"textarea":tr("invalid",c),fr(c,I.value,I.defaultValue,I.children),_t(c)}O=I.children,typeof O!="string"&&typeof O!="number"&&typeof O!="bigint"||c.textContent===""+O||I.suppressHydrationWarning===!0||Ep(c.textContent,O)?(I.popover!=null&&(tr("beforetoggle",c),tr("toggle",c)),I.onScroll!=null&&tr("scroll",c),I.onScrollEnd!=null&&tr("scrollend",c),I.onClick!=null&&(c.onclick=vu),c=!0):c=!1,c||bs(o)}function zd(o){for(Ir=o.return;Ir;)switch(Ir.tag){case 3:case 27:xo=!0;return;case 5:case 13:xo=!1;return;default:Ir=Ir.return}}function wl(o){if(o!==Ir)return!1;if(!cr)return zd(o),cr=!0,!1;var c=!1,O;if((O=o.tag!==3&&o.tag!==27)&&((O=o.tag===5)&&(O=o.type,O=!(O!=="form"&&O!=="button")||Mi(o.type,o.memoizedProps)),O=!O),O&&(c=!0),c&&si&&bs(o),zd(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(l(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(O=o.data,O==="/$"){if(c===0){si=vo(o.nextSibling);break e}c--}else O!=="$"&&O!=="$!"&&O!=="$?"||c++;o=o.nextSibling}si=null}}else si=Ir?vo(o.stateNode.nextSibling):null;return!0}function Tl(){si=Ir=null,cr=!1}function Sl(o){Ji===null?Ji=[o]:Ji.push(o)}var Ma=Error(l(460)),Gd=Error(l(474)),qu={then:function(){}};function wc(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Tc(){}function Wd(o,c,O){switch(O=o[O],O===void 0?o.push(c):O!==c&&(c.then(Tc,Tc),c=O),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===Ma?Error(l(483)):o;default:if(typeof c.status=="string")c.then(Tc,Tc);else{if(o=gr,o!==null&&100<o.shellSuspendCounter)throw Error(l(482));o=c,o.status="pending",o.then(function(I){if(c.status==="pending"){var G=c;G.status="fulfilled",G.value=I}},function(I){if(c.status==="pending"){var G=c;G.status="rejected",G.reason=I}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===Ma?Error(l(483)):o}throw Na=c,Ma}}var Na=null;function Sc(){if(Na===null)throw Error(l(459));var o=Na;return Na=null,o}var Xs=null,Js=0;function Ol(o){var c=Js;return Js+=1,Xs===null&&(Xs=[]),Wd(Xs,o,c)}function La(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function ys(o,c){throw c.$$typeof===d?Error(l(525)):(o=Object.prototype.toString.call(c),Error(l(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function Zs(o){var c=o._init;return c(o._payload)}function Go(o){function c(it,Qe){if(o){var lt=it.deletions;lt===null?(it.deletions=[Qe],it.flags|=16):lt.push(Qe)}}function O(it,Qe){if(!o)return null;for(;Qe!==null;)c(it,Qe),Qe=Qe.sibling;return null}function I(it){for(var Qe=new Map;it!==null;)it.key!==null?Qe.set(it.key,it):Qe.set(it.index,it),it=it.sibling;return Qe}function G(it,Qe){return it=bo(it,Qe),it.index=0,it.sibling=null,it}function J(it,Qe,lt){return it.index=lt,o?(lt=it.alternate,lt!==null?(lt=lt.index,lt<Qe?(it.flags|=33554434,Qe):lt):(it.flags|=33554434,Qe)):(it.flags|=1048576,Qe)}function Te(it){return o&&it.alternate===null&&(it.flags|=33554434),it}function Ce(it,Qe,lt,Nt){return Qe===null||Qe.tag!==6?(Qe=di(lt,it.mode,Nt),Qe.return=it,Qe):(Qe=G(Qe,lt),Qe.return=it,Qe)}function ze(it,Qe,lt,Nt){var an=lt.type;return an===u?Tt(it,Qe,lt.props.children,Nt,lt.key):Qe!==null&&(Qe.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===_&&Zs(an)===Qe.type)?(Qe=G(Qe,lt.props),La(Qe,lt),Qe.return=it,Qe):(Qe=zl(lt.type,lt.key,lt.props,null,it.mode,Nt),La(Qe,lt),Qe.return=it,Qe)}function et(it,Qe,lt,Nt){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==lt.containerInfo||Qe.stateNode.implementation!==lt.implementation?(Qe=Sf(lt,it.mode,Nt),Qe.return=it,Qe):(Qe=G(Qe,lt.children||[]),Qe.return=it,Qe)}function Tt(it,Qe,lt,Nt,an){return Qe===null||Qe.tag!==7?(Qe=Mo(lt,it.mode,Nt,an),Qe.return=it,Qe):(Qe=G(Qe,lt),Qe.return=it,Qe)}function Pt(it,Qe,lt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Qe=di(""+Qe,it.mode,lt),Qe.return=it,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case f:return lt=zl(Qe.type,Qe.key,Qe.props,null,it.mode,lt),La(lt,Qe),lt.return=it,lt;case a:return Qe=Sf(Qe,it.mode,lt),Qe.return=it,Qe;case _:var Nt=Qe._init;return Qe=Nt(Qe._payload),Pt(it,Qe,lt)}if(M(Qe)||R(Qe))return Qe=Mo(Qe,it.mode,lt,null),Qe.return=it,Qe;if(typeof Qe.then=="function")return Pt(it,Ol(Qe),lt);if(Qe.$$typeof===E)return Pt(it,Ha(it,Qe),lt);ys(it,Qe)}return null}function dt(it,Qe,lt,Nt){var an=Qe!==null?Qe.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return an!==null?null:Ce(it,Qe,""+lt,Nt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case f:return lt.key===an?ze(it,Qe,lt,Nt):null;case a:return lt.key===an?et(it,Qe,lt,Nt):null;case _:return an=lt._init,lt=an(lt._payload),dt(it,Qe,lt,Nt)}if(M(lt)||R(lt))return an!==null?null:Tt(it,Qe,lt,Nt,null);if(typeof lt.then=="function")return dt(it,Qe,Ol(lt),Nt);if(lt.$$typeof===E)return dt(it,Qe,Ha(it,lt),Nt);ys(it,lt)}return null}function Ot(it,Qe,lt,Nt,an){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return it=it.get(lt)||null,Ce(Qe,it,""+Nt,an);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case f:return it=it.get(Nt.key===null?lt:Nt.key)||null,ze(Qe,it,Nt,an);case a:return it=it.get(Nt.key===null?lt:Nt.key)||null,et(Qe,it,Nt,an);case _:var Zn=Nt._init;return Nt=Zn(Nt._payload),Ot(it,Qe,lt,Nt,an)}if(M(Nt)||R(Nt))return it=it.get(lt)||null,Tt(Qe,it,Nt,an,null);if(typeof Nt.then=="function")return Ot(it,Qe,lt,Ol(Nt),an);if(Nt.$$typeof===E)return Ot(it,Qe,lt,Ha(Qe,Nt),an);ys(Qe,Nt)}return null}function fn(it,Qe,lt,Nt){for(var an=null,Zn=null,mn=Qe,Kt=Qe=0,ei=null;mn!==null&&Kt<lt.length;Kt++){mn.index>Kt?(ei=mn,mn=null):ei=mn.sibling;var or=dt(it,mn,lt[Kt],Nt);if(or===null){mn===null&&(mn=ei);break}o&&mn&&or.alternate===null&&c(it,mn),Qe=J(or,Qe,Kt),Zn===null?an=or:Zn.sibling=or,Zn=or,mn=ei}if(Kt===lt.length)return O(it,mn),cr&&Ks(it,Kt),an;if(mn===null){for(;Kt<lt.length;Kt++)mn=Pt(it,lt[Kt],Nt),mn!==null&&(Qe=J(mn,Qe,Kt),Zn===null?an=mn:Zn.sibling=mn,Zn=mn);return cr&&Ks(it,Kt),an}for(mn=I(mn);Kt<lt.length;Kt++)ei=Ot(mn,it,Kt,lt[Kt],Nt),ei!==null&&(o&&ei.alternate!==null&&mn.delete(ei.key===null?Kt:ei.key),Qe=J(ei,Qe,Kt),Zn===null?an=ei:Zn.sibling=ei,Zn=ei);return o&&mn.forEach(function($a){return c(it,$a)}),cr&&Ks(it,Kt),an}function An(it,Qe,lt,Nt){if(lt==null)throw Error(l(151));for(var an=null,Zn=null,mn=Qe,Kt=Qe=0,ei=null,or=lt.next();mn!==null&&!or.done;Kt++,or=lt.next()){mn.index>Kt?(ei=mn,mn=null):ei=mn.sibling;var $a=dt(it,mn,or.value,Nt);if($a===null){mn===null&&(mn=ei);break}o&&mn&&$a.alternate===null&&c(it,mn),Qe=J($a,Qe,Kt),Zn===null?an=$a:Zn.sibling=$a,Zn=$a,mn=ei}if(or.done)return O(it,mn),cr&&Ks(it,Kt),an;if(mn===null){for(;!or.done;Kt++,or=lt.next())or=Pt(it,or.value,Nt),or!==null&&(Qe=J(or,Qe,Kt),Zn===null?an=or:Zn.sibling=or,Zn=or);return cr&&Ks(it,Kt),an}for(mn=I(mn);!or.done;Kt++,or=lt.next())or=Ot(mn,it,Kt,or.value,Nt),or!==null&&(o&&or.alternate!==null&&mn.delete(or.key===null?Kt:or.key),Qe=J(or,Qe,Kt),Zn===null?an=or:Zn.sibling=or,Zn=or);return o&&mn.forEach(function(Iu){return c(it,Iu)}),cr&&Ks(it,Kt),an}function Gr(it,Qe,lt,Nt){if(typeof lt=="object"&&lt!==null&&lt.type===u&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case f:e:{for(var an=lt.key;Qe!==null;){if(Qe.key===an){if(an=lt.type,an===u){if(Qe.tag===7){O(it,Qe.sibling),Nt=G(Qe,lt.props.children),Nt.return=it,it=Nt;break e}}else if(Qe.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===_&&Zs(an)===Qe.type){O(it,Qe.sibling),Nt=G(Qe,lt.props),La(Nt,lt),Nt.return=it,it=Nt;break e}O(it,Qe);break}else c(it,Qe);Qe=Qe.sibling}lt.type===u?(Nt=Mo(lt.props.children,it.mode,Nt,lt.key),Nt.return=it,it=Nt):(Nt=zl(lt.type,lt.key,lt.props,null,it.mode,Nt),La(Nt,lt),Nt.return=it,it=Nt)}return Te(it);case a:e:{for(an=lt.key;Qe!==null;){if(Qe.key===an)if(Qe.tag===4&&Qe.stateNode.containerInfo===lt.containerInfo&&Qe.stateNode.implementation===lt.implementation){O(it,Qe.sibling),Nt=G(Qe,lt.children||[]),Nt.return=it,it=Nt;break e}else{O(it,Qe);break}else c(it,Qe);Qe=Qe.sibling}Nt=Sf(lt,it.mode,Nt),Nt.return=it,it=Nt}return Te(it);case _:return an=lt._init,lt=an(lt._payload),Gr(it,Qe,lt,Nt)}if(M(lt))return fn(it,Qe,lt,Nt);if(R(lt)){if(an=R(lt),typeof an!="function")throw Error(l(150));return lt=an.call(lt),An(it,Qe,lt,Nt)}if(typeof lt.then=="function")return Gr(it,Qe,Ol(lt),Nt);if(lt.$$typeof===E)return Gr(it,Qe,Ha(it,lt),Nt);ys(it,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Qe!==null&&Qe.tag===6?(O(it,Qe.sibling),Nt=G(Qe,lt),Nt.return=it,it=Nt):(O(it,Qe),Nt=di(lt,it.mode,Nt),Nt.return=it,it=Nt),Te(it)):O(it,Qe)}return function(it,Qe,lt,Nt){try{Js=0;var an=Gr(it,Qe,lt,Nt);return Xs=null,an}catch(mn){if(mn===Ma)throw mn;var Zn=zr(29,mn,null,it.mode);return Zn.lanes=Nt,Zn.return=it,Zn}finally{}}}var bi=Go(!0),qd=Go(!1),Da=ie(null),Oc=ie(0);function Yu(o,c){o=ss,ce(Oc,o),ce(Da,c),ss=o|c.baseLanes}function xl(){ce(Oc,ss),ce(Da,Da.current)}function Ku(){ss=Oc.current,$e(Da),$e(Oc)}var Zi=ie(null),Ao=null;function Wo(o){var c=o.alternate;ce(Zr,Zr.current&1),ce(Zi,o),Ao===null&&(c===null||Da.current!==null||c.memoizedState!==null)&&(Ao=o)}function xc(o){if(o.tag===22){if(ce(Zr,Zr.current),ce(Zi,o),Ao===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Ao=o)}}else qo()}function qo(){ce(Zr,Zr.current),ce(Zi,Zi.current)}function po(o){$e(Zi),Ao===o&&(Ao=null),$e(Zr)}var Zr=ie(0);function Ac(o){for(var c=o;c!==null;){if(c.tag===13){var O=c.memoizedState;if(O!==null&&(O=O.dehydrated,O===null||O.data==="$?"||O.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ip=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(O,I){o.push(I)}};this.abort=function(){c.aborted=!0,o.forEach(function(O){return O()})}},op=i.unstable_scheduleCallback,cn=i.unstable_NormalPriority,pr={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wr(){return{controller:new ip,data:new Map,refCount:0}}function yr(o){o.refCount--,o.refCount===0&&op(cn,function(){o.controller.abort()})}var Pi=null,Qs=0,Zt=0,xr=null;function Yd(o,c){if(Pi===null){var O=Pi=[];Qs=0,Zt=Mn(),xr={status:"pending",value:void 0,then:function(I){O.push(I)}}}return Qs++,c.then(Kd,Kd),c}function Kd(){if(--Qs===0&&Pi!==null){xr!==null&&(xr.status="fulfilled");var o=Pi;Pi=null,Zt=0,xr=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function ea(o,c){var O=[],I={status:"pending",value:null,reason:null,then:function(G){O.push(G)}};return o.then(function(){I.status="fulfilled",I.value=c;for(var G=0;G<O.length;G++)(0,O[G])(c)},function(G){for(I.status="rejected",I.reason=G,G=0;G<O.length;G++)(0,O[G])(void 0)}),I}var Rc=D.S;D.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Yd(o,c),Rc!==null&&Rc(o,c)};var Yo=ie(null);function Cc(){var o=Yo.current;return o!==null?o:gr.pooledCache}function kc(o,c){c===null?ce(Yo,Yo.current):ce(Yo,c.pool)}function Xu(){var o=Cc();return o===null?null:{parent:pr._currentValue,pool:o}}var Ro=0,Fn=null,_r=null,qr=null,Al=!1,Pa=!1,Ko=!1,Ic=0,Rl=0,Ba=null,sp=0;function Hr(){throw Error(l(321))}function Mc(o,c){if(c===null)return!1;for(var O=0;O<c.length&&O<o.length;O++)if(!Ti(o[O],c[O]))return!1;return!0}function Ju(o,c,O,I,G,J){return Ro=J,Fn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,D.H=o===null||o.memoizedState===null?ta:$s,Ko=!1,J=O(I,G),Ko=!1,Pa&&(J=kl(c,O,I,G)),Cl(o),J}function Cl(o){D.H=Co;var c=_r!==null&&_r.next!==null;if(Ro=0,qr=_r=Fn=null,Al=!1,Rl=0,Ba=null,c)throw Error(l(300));o===null||ti||(o=o.dependencies,o!==null&&eu(o)&&(ti=!0))}function kl(o,c,O,I){Fn=o;var G=0;do{if(Pa&&(Ba=null),Rl=0,Pa=!1,25<=G)throw Error(l(301));if(G+=1,qr=_r=null,o.updateQueue!=null){var J=o.updateQueue;J.lastEffect=null,J.events=null,J.stores=null,J.memoCache!=null&&(J.memoCache.index=0)}D.H=na,J=c(O,I)}while(Pa);return J}function ap(){var o=D.H,c=o.useState()[0];return c=typeof c.then=="function"?Ml(c):c,o=o.useState()[0],(_r!==null?_r.memoizedState:null)!==o&&(Fn.flags|=1024),c}function Nc(){var o=Ic!==0;return Ic=0,o}function Lc(o,c,O){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~O}function Dc(o){if(Al){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Al=!1}Ro=0,qr=_r=Fn=null,Pa=!1,Rl=Ic=0,Ba=null}function yi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?Fn.memoizedState=qr=o:qr=qr.next=o,qr}function Pr(){if(_r===null){var o=Fn.alternate;o=o!==null?o.memoizedState:null}else o=_r.next;var c=qr===null?Fn.memoizedState:qr.next;if(c!==null)qr=c,_r=o;else{if(o===null)throw Fn.alternate===null?Error(l(467)):Error(l(310));_r=o,o={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},qr===null?Fn.memoizedState=qr=o:qr=qr.next=o}return qr}var Il;Il=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Ml(o){var c=Rl;return Rl+=1,Ba===null&&(Ba=[]),o=Wd(Ba,o,c),c=Fn,(qr===null?c.memoizedState:qr.next)===null&&(c=c.alternate,D.H=c===null||c.memoizedState===null?ta:$s),o}function Pc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ml(o);if(o.$$typeof===E)return ai(o)}throw Error(l(438,String(o)))}function Zu(o){var c=null,O=Fn.updateQueue;if(O!==null&&(c=O.memoCache),c==null){var I=Fn.alternate;I!==null&&(I=I.updateQueue,I!==null&&(I=I.memoCache,I!=null&&(c={data:I.data.map(function(G){return G.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),O===null&&(O=Il(),Fn.updateQueue=O),O.memoCache=c,O=c.data[c.index],O===void 0)for(O=c.data[c.index]=Array(o),I=0;I<o;I++)O[I]=x;return c.index++,O}function Bi(o,c){return typeof c=="function"?c(o):c}function Nl(o){var c=Pr();return Qu(c,_r,o)}function Qu(o,c,O){var I=o.queue;if(I===null)throw Error(l(311));I.lastRenderedReducer=O;var G=o.baseQueue,J=I.pending;if(J!==null){if(G!==null){var Te=G.next;G.next=J.next,J.next=Te}c.baseQueue=G=J,I.pending=null}if(J=o.baseState,G===null)o.memoizedState=J;else{c=G.next;var Ce=Te=null,ze=null,et=c,Tt=!1;do{var Pt=et.lane&-536870913;if(Pt!==et.lane?(er&Pt)===Pt:(Ro&Pt)===Pt){var dt=et.revertLane;if(dt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),Pt===Zt&&(Tt=!0);else if((Ro&dt)===dt){et=et.next,dt===Zt&&(Tt=!0);continue}else Pt={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},ze===null?(Ce=ze=Pt,Te=J):ze=ze.next=Pt,Fn.lanes|=dt,ao|=dt;Pt=et.action,Ko&&O(J,Pt),J=et.hasEagerState?et.eagerState:O(J,Pt)}else dt={lane:Pt,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},ze===null?(Ce=ze=dt,Te=J):ze=ze.next=dt,Fn.lanes|=Pt,ao|=Pt;et=et.next}while(et!==null&&et!==c);if(ze===null?Te=J:ze.next=Ce,!Ti(J,o.memoizedState)&&(ti=!0,Tt&&(O=xr,O!==null)))throw O;o.memoizedState=J,o.baseState=Te,o.baseQueue=ze,I.lastRenderedState=J}return G===null&&(I.lanes=0),[o.memoizedState,I.dispatch]}function Ll(o){var c=Pr(),O=c.queue;if(O===null)throw Error(l(311));O.lastRenderedReducer=o;var I=O.dispatch,G=O.pending,J=c.memoizedState;if(G!==null){O.pending=null;var Te=G=G.next;do J=o(J,Te.action),Te=Te.next;while(Te!==G);Ti(J,c.memoizedState)||(ti=!0),c.memoizedState=J,c.baseQueue===null&&(c.baseState=J),O.lastRenderedState=J}return[J,I]}function Qi(o,c,O){var I=Fn,G=Pr(),J=cr;if(J){if(O===void 0)throw Error(l(407));O=O()}else O=c();var Te=!Ti((_r||G).memoizedState,O);if(Te&&(G.memoizedState=O,ti=!0),G=G.queue,Fc(eh.bind(null,I,G,o),[o]),G.getSnapshot!==c||Te||qr!==null&&qr.memoizedState.tag&1){if(I.flags|=2048,ja(9,_s.bind(null,I,G,O,c),{destroy:void 0},null),gr===null)throw Error(l(349));J||(Ro&60)!==0||Xd(I,c,O)}return O}function Xd(o,c,O){o.flags|=16384,o={getSnapshot:c,value:O},c=Fn.updateQueue,c===null?(c=Il(),Fn.updateQueue=c,c.stores=[o]):(O=c.stores,O===null?c.stores=[o]:O.push(o))}function _s(o,c,O,I){c.value=O,c.getSnapshot=I,Jd(c)&&Dl(o)}function eh(o,c,O){return O(function(){Jd(c)&&Dl(o)})}function Jd(o){var c=o.getSnapshot;o=o.value;try{var O=c();return!Ti(o,O)}catch{return!0}}function Dl(o){var c=Ho(o,2);c!==null&&Qr(c,o,2)}function Bc(o){var c=yi();if(typeof o=="function"){var O=o;if(o=O(),Ko){ft(!0);try{O()}finally{ft(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:o},c}function th(o,c,O,I){return o.baseState=O,Qu(o,_r,typeof I=="function"?I:Bi)}function Zd(o,c,O,I,G){if(Wc(o))throw Error(l(485));if(o=c.action,o!==null){var J={payload:G,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Te){J.listeners.push(Te)}};D.T!==null?O(!0):J.isTransition=!1,I(J),O=c.pending,O===null?(J.next=c.pending=J,nh(c,J)):(J.next=O.next,c.pending=O.next=J)}}function nh(o,c){var O=c.action,I=c.payload,G=o.state;if(c.isTransition){var J=D.T,Te={};D.T=Te;try{var Ce=O(G,I),ze=D.S;ze!==null&&ze(Te,Ce),rh(o,c,Ce)}catch(et){jc(o,c,et)}finally{D.T=J}}else try{J=O(G,I),rh(o,c,J)}catch(et){jc(o,c,et)}}function rh(o,c,O){O!==null&&typeof O=="object"&&typeof O.then=="function"?O.then(function(I){ih(o,c,I)},function(I){return jc(o,c,I)}):ih(o,c,O)}function ih(o,c,O){c.status="fulfilled",c.value=O,oh(c),o.state=O,c=o.pending,c!==null&&(O=c.next,O===c?o.pending=null:(O=O.next,c.next=O,nh(o,O)))}function jc(o,c,O){var I=o.pending;if(o.pending=null,I!==null){I=I.next;do c.status="rejected",c.reason=O,oh(c),c=c.next;while(c!==I)}o.action=null}function oh(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function sh(o,c){return c}function ah(o,c){if(cr){var O=gr.formState;if(O!==null){e:{var I=Fn;if(cr){if(si){t:{for(var G=si,J=xo;G.nodeType!==8;){if(!J){G=null;break t}if(G=vo(G.nextSibling),G===null){G=null;break t}}J=G.data,G=J==="F!"||J==="F"?G:null}if(G){si=vo(G.nextSibling),I=G.data==="F!";break e}}bs(I)}I=!1}I&&(c=O[0])}}return O=yi(),O.memoizedState=O.baseState=c,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sh,lastRenderedState:c},O.queue=I,O=yh.bind(null,Fn,I),I.dispatch=O,I=Bc(!1),J=_h.bind(null,Fn,!1,I.queue),I=yi(),G={state:c,dispatch:null,action:o,pending:null},I.queue=G,O=Zd.bind(null,Fn,G,J,O),G.dispatch=O,I.memoizedState=o,[c,O,!1]}function Qd(o){var c=Pr();return ef(c,_r,o)}function ef(o,c,O){c=Qu(o,c,sh)[0],o=Nl(Bi)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?Ml(c):c;var I=Pr(),G=I.queue,J=G.dispatch;return O!==I.memoizedState&&(Fn.flags|=2048,ja(9,lp.bind(null,G,O),{destroy:void 0},null)),[c,J,o]}function lp(o,c){o.action=c}function tf(o){var c=Pr(),O=_r;if(O!==null)return ef(c,O,o);Pr(),c=c.memoizedState,O=Pr();var I=O.queue.dispatch;return O.memoizedState=o,[c,I,!1]}function ja(o,c,O,I){return o={tag:o,create:c,inst:O,deps:I,next:null},c=Fn.updateQueue,c===null&&(c=Il(),Fn.updateQueue=c),O=c.lastEffect,O===null?c.lastEffect=o.next=o:(I=O.next,O.next=o,o.next=I,c.lastEffect=o),o}function nf(){return Pr().memoizedState}function Ua(o,c,O,I){var G=yi();Fn.flags|=o,G.memoizedState=ja(1|c,O,{destroy:void 0},I===void 0?null:I)}function Uc(o,c,O,I){var G=Pr();I=I===void 0?null:I;var J=G.memoizedState.inst;_r!==null&&I!==null&&Mc(I,_r.memoizedState.deps)?G.memoizedState=ja(c,O,J,I):(Fn.flags|=o,G.memoizedState=ja(1|c,O,J,I))}function rf(o,c){Ua(8390656,8,o,c)}function Fc(o,c){Uc(2048,8,o,c)}function lh(o,c){return Uc(4,2,o,c)}function ch(o,c){return Uc(4,4,o,c)}function uh(o,c){if(typeof c=="function"){o=o();var O=c(o);return function(){typeof O=="function"?O():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function hh(o,c,O){O=O!=null?O.concat([o]):null,Uc(4,4,uh.bind(null,c,o),O)}function Hc(){}function dh(o,c){var O=Pr();c=c===void 0?null:c;var I=O.memoizedState;return c!==null&&Mc(c,I[1])?I[0]:(O.memoizedState=[o,c],o)}function Vc(o,c){var O=Pr();c=c===void 0?null:c;var I=O.memoizedState;if(c!==null&&Mc(c,I[1]))return I[0];if(I=o(),Ko){ft(!0);try{o()}finally{ft(!1)}}return O.memoizedState=[I,c],I}function Fa(o,c,O){return O===void 0||(Ro&1073741824)!==0?o.memoizedState=c:(o.memoizedState=O,o=Xa(),Fn.lanes|=o,ao|=o,O)}function fh(o,c,O,I){return Ti(O,c)?O:Da.current!==null?(o=Fa(o,O,I),Ti(o,c)||(ti=!0),o):(Ro&42)===0?(ti=!0,o.memoizedState=O):(o=Xa(),Fn.lanes|=o,ao|=o,c)}function of(o,c,O,I,G){var J=U.p;U.p=J!==0&&8>J?J:8;var Te=D.T,Ce={};D.T=Ce,_h(o,!1,c,O);try{var ze=G(),et=D.S;if(et!==null&&et(Ce,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var Tt=ea(ze,I);Pl(o,c,Tt,oi(o))}else Pl(o,c,I,oi(o))}catch(Pt){Pl(o,c,{then:function(){},status:"rejected",reason:Pt},oi())}finally{U.p=J,D.T=Te}}function sf(){}function zc(o,c,O,I){if(o.tag!==5)throw Error(l(476));var G=ph(o).queue;of(o,G,c,Z,O===null?sf:function(){return mh(o),O(I)})}function ph(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:Z},next:null};var O={};return c.next={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:O},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function mh(o){var c=ph(o).next.queue;Pl(o,c,{},oi())}function Gc(){return ai(zi)}function gh(){return Pr().memoizedState}function bh(){return Pr().memoizedState}function af(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var O=oi();o=ws(O);var I=Ts(c,o,O);I!==null&&(Qr(I,c,O),no(I,c,O)),c={cache:Wr()},o.payload=c;return}c=c.return}}function lf(o,c,O){var I=oi();O={lane:I,revertLane:0,action:O,hasEagerState:!1,eagerState:null,next:null},Wc(o)?$h(c,O):(O=Wu(o,c,O,I),O!==null&&(Qr(O,o,I),cf(O,c,I)))}function yh(o,c,O){var I=oi();Pl(o,c,O,I)}function Pl(o,c,O,I){var G={lane:I,revertLane:0,action:O,hasEagerState:!1,eagerState:null,next:null};if(Wc(o))$h(c,G);else{var J=o.alternate;if(o.lanes===0&&(J===null||J.lanes===0)&&(J=c.lastRenderedReducer,J!==null))try{var Te=c.lastRenderedState,Ce=J(Te,O);if(G.hasEagerState=!0,G.eagerState=Ce,Ti(Ce,Te))return $l(o,c,G,0),gr===null&&$c(),!1}catch{}finally{}if(O=Wu(o,c,G,I),O!==null)return Qr(O,o,I),cf(O,c,I),!0}return!1}function _h(o,c,O,I){if(I={lane:2,revertLane:Mn(),action:I,hasEagerState:!1,eagerState:null,next:null},Wc(o)){if(c)throw Error(l(479))}else c=Wu(o,O,I,2),c!==null&&Qr(c,o,2)}function Wc(o){var c=o.alternate;return o===Fn||c!==null&&c===Fn}function $h(o,c){Pa=Al=!0;var O=o.pending;O===null?c.next=c:(c.next=O.next,O.next=c),o.pending=c}function cf(o,c,O){if((O&4194176)!==0){var I=c.lanes;I&=o.pendingLanes,O|=I,c.lanes=O,Bn(o,O)}}var Co={readContext:ai,use:Pc,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useLayoutEffect:Hr,useInsertionEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useSyncExternalStore:Hr,useId:Hr};Co.useCacheRefresh=Hr,Co.useMemoCache=Hr,Co.useHostTransitionStatus=Hr,Co.useFormState=Hr,Co.useActionState=Hr,Co.useOptimistic=Hr;var ta={readContext:ai,use:Pc,useCallback:function(o,c){return yi().memoizedState=[o,c===void 0?null:c],o},useContext:ai,useEffect:rf,useImperativeHandle:function(o,c,O){O=O!=null?O.concat([o]):null,Ua(4194308,4,uh.bind(null,c,o),O)},useLayoutEffect:function(o,c){return Ua(4194308,4,o,c)},useInsertionEffect:function(o,c){Ua(4,2,o,c)},useMemo:function(o,c){var O=yi();c=c===void 0?null:c;var I=o();if(Ko){ft(!0);try{o()}finally{ft(!1)}}return O.memoizedState=[I,c],I},useReducer:function(o,c,O){var I=yi();if(O!==void 0){var G=O(c);if(Ko){ft(!0);try{O(c)}finally{ft(!1)}}}else G=c;return I.memoizedState=I.baseState=G,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:G},I.queue=o,o=o.dispatch=lf.bind(null,Fn,o),[I.memoizedState,o]},useRef:function(o){var c=yi();return o={current:o},c.memoizedState=o},useState:function(o){o=Bc(o);var c=o.queue,O=yh.bind(null,Fn,c);return c.dispatch=O,[o.memoizedState,O]},useDebugValue:Hc,useDeferredValue:function(o,c){var O=yi();return Fa(O,o,c)},useTransition:function(){var o=Bc(!1);return o=of.bind(null,Fn,o.queue,!0,!1),yi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,O){var I=Fn,G=yi();if(cr){if(O===void 0)throw Error(l(407));O=O()}else{if(O=c(),gr===null)throw Error(l(349));(er&60)!==0||Xd(I,c,O)}G.memoizedState=O;var J={value:O,getSnapshot:c};return G.queue=J,rf(eh.bind(null,I,J,o),[o]),I.flags|=2048,ja(9,_s.bind(null,I,J,O,c),{destroy:void 0},null),O},useId:function(){var o=yi(),c=gr.identifierPrefix;if(cr){var O=Xi,I=Oo;O=(I&~(1<<32-Lt(I)-1)).toString(32)+O,c=":"+c+"R"+O,O=Ic++,0<O&&(c+="H"+O.toString(32)),c+=":"}else O=sp++,c=":"+c+"r"+O.toString(32)+":";return o.memoizedState=c},useCacheRefresh:function(){return yi().memoizedState=af.bind(null,Fn)}};ta.useMemoCache=Zu,ta.useHostTransitionStatus=Gc,ta.useFormState=ah,ta.useActionState=ah,ta.useOptimistic=function(o){var c=yi();c.memoizedState=c.baseState=o;var O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=O,c=_h.bind(null,Fn,!0,O),O.dispatch=c,[o,c]};var $s={readContext:ai,use:Pc,useCallback:dh,useContext:ai,useEffect:Fc,useImperativeHandle:hh,useInsertionEffect:lh,useLayoutEffect:ch,useMemo:Vc,useReducer:Nl,useRef:nf,useState:function(){return Nl(Bi)},useDebugValue:Hc,useDeferredValue:function(o,c){var O=Pr();return fh(O,_r.memoizedState,o,c)},useTransition:function(){var o=Nl(Bi)[0],c=Pr().memoizedState;return[typeof o=="boolean"?o:Ml(o),c]},useSyncExternalStore:Qi,useId:gh};$s.useCacheRefresh=bh,$s.useMemoCache=Zu,$s.useHostTransitionStatus=Gc,$s.useFormState=Qd,$s.useActionState=Qd,$s.useOptimistic=function(o,c){var O=Pr();return th(O,_r,o,c)};var na={readContext:ai,use:Pc,useCallback:dh,useContext:ai,useEffect:Fc,useImperativeHandle:hh,useInsertionEffect:lh,useLayoutEffect:ch,useMemo:Vc,useReducer:Ll,useRef:nf,useState:function(){return Ll(Bi)},useDebugValue:Hc,useDeferredValue:function(o,c){var O=Pr();return _r===null?Fa(O,o,c):fh(O,_r.memoizedState,o,c)},useTransition:function(){var o=Ll(Bi)[0],c=Pr().memoizedState;return[typeof o=="boolean"?o:Ml(o),c]},useSyncExternalStore:Qi,useId:gh};na.useCacheRefresh=bh,na.useMemoCache=Zu,na.useHostTransitionStatus=Gc,na.useFormState=tf,na.useActionState=tf,na.useOptimistic=function(o,c){var O=Pr();return _r!==null?th(O,_r,o,c):(O.baseState=o,[o,O.queue.dispatch])};function kt(o,c,O,I){c=o.memoizedState,O=O(I,c),O=O==null?c:j({},c,O),o.memoizedState=O,o.lanes===0&&(o.updateQueue.baseState=O)}var Xo={isMounted:function(o){return(o=o._reactInternals)?be(o)===o:!1},enqueueSetState:function(o,c,O){o=o._reactInternals;var I=oi(),G=ws(I);G.payload=c,O!=null&&(G.callback=O),c=Ts(o,G,I),c!==null&&(Qr(c,o,I),no(c,o,I))},enqueueReplaceState:function(o,c,O){o=o._reactInternals;var I=oi(),G=ws(I);G.tag=1,G.payload=c,O!=null&&(G.callback=O),c=Ts(o,G,I),c!==null&&(Qr(c,o,I),no(c,o,I))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var O=oi(),I=ws(O);I.tag=2,c!=null&&(I.callback=c),c=Ts(o,I,O),c!==null&&(Qr(c,o,O),no(c,o,O))}};function cp(o,c,O,I,G,J,Te){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(I,J,Te):c.prototype&&c.prototype.isPureReactComponent?!gl(O,I)||!gl(G,J):!0}function qc(o,c,O,I){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(O,I),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(O,I),c.state!==o&&Xo.enqueueReplaceState(c,c.state,null)}function _i(o,c){var O=c;if("ref"in c){O={};for(var I in c)I!=="ref"&&(O[I]=c[I])}if(o=o.defaultProps){O===c&&(O=j({},O));for(var G in o)O[G]===void 0&&(O[G]=o[G])}return O}var It=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Jo(o){It(o)}function Oi(o){console.error(o)}function ht(o){It(o)}function Yc(o,c){try{var O=o.onUncaughtError;O(c.value,{componentStack:c.stack})}catch(I){setTimeout(function(){throw I})}}function uf(o,c,O){try{var I=o.onCaughtError;I(O.value,{componentStack:O.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function vh(o,c,O){return O=ws(O),O.tag=3,O.payload={element:null},O.callback=function(){Yc(o,c)},O}function hf(o){return o=ws(o),o.tag=3,o}function df(o,c,O,I){var G=O.type.getDerivedStateFromError;if(typeof G=="function"){var J=I.value;o.payload=function(){return G(J)},o.callback=function(){uf(c,O,I)}}var Te=O.stateNode;Te!==null&&typeof Te.componentDidCatch=="function"&&(o.callback=function(){uf(c,O,I),typeof G!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var Ce=I.stack;this.componentDidCatch(I.value,{componentStack:Ce!==null?Ce:""})})}function Pp(o,c,O,I,G){if(O.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){if(c=O.alternate,c!==null&&Qc(c,O,G,!0),O=Zi.current,O!==null){switch(O.tag){case 13:return Ao===null?Za():O.alternate===null&&Jn===0&&(Jn=3),O.flags&=-257,O.flags|=65536,O.lanes=G,I===qu?O.flags|=16384:(c=O.updateQueue,c===null?O.updateQueue=new Set([I]):c.add(I),pu(o,I,G)),!1;case 22:return O.flags|=65536,I===qu?O.flags|=16384:(c=O.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([I])},O.updateQueue=c):(O=c.retryQueue,O===null?c.retryQueue=new Set([I]):O.add(I)),pu(o,I,G)),!1}throw Error(l(435,O.tag))}return pu(o,I,G),Za(),!1}if(cr)return c=Zi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=G,I!==gs&&(o=Error(l(422),{cause:I}),Sl(Yi(o,O)))):(I!==gs&&(c=Error(l(423),{cause:I}),Sl(Yi(c,O))),o=o.current.alternate,o.flags|=65536,G&=-G,o.lanes|=G,I=Yi(I,O),G=vh(o.stateNode,I,G),kh(o,G),Jn!==4&&(Jn=2)),!1;var J=Error(l(520),{cause:I});if(J=Yi(J,O),Wl===null?Wl=[J]:Wl.push(J),Jn!==4&&(Jn=2),c===null)return!0;I=Yi(I,O),O=c;do{switch(O.tag){case 3:return O.flags|=65536,o=G&-G,O.lanes|=o,o=vh(O.stateNode,I,o),kh(O,o),!1;case 1:if(c=O.type,J=O.stateNode,(O.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Hi===null||!Hi.has(J))))return O.flags|=65536,G&=-G,O.lanes|=G,G=hf(G),df(G,o,O,I),kh(O,G),!1}O=O.return}while(O!==null);return!1}var Eh=Error(l(461)),ti=!1;function Yr(o,c,O,I){c.child=o===null?qd(c,null,O,I):bi(c,o.child,O,I)}function wh(o,c,O,I,G){O=O.render;var J=c.ref;if("ref"in I){var Te={};for(var Ce in I)Ce!=="ref"&&(Te[Ce]=I[Ce])}else Te=I;return ia(c),I=Ju(o,c,O,Te,J,G),Ce=Nc(),o!==null&&!ti?(Lc(o,c,G),xi(o,c,G)):(cr&&Ce&&zo(c),c.flags|=1,Yr(o,c,I,G),c.child)}function Th(o,c,O,I,G){if(o===null){var J=O.type;return typeof J=="function"&&!Kr(J)&&J.defaultProps===void 0&&O.compare===null?(c.tag=15,c.type=J,Zo(o,c,J,I,G)):(o=zl(O.type,null,I,c,c.mode,G),o.ref=c.ref,o.return=c,c.child=o)}if(J=o.child,!Zc(o,G)){var Te=J.memoizedProps;if(O=O.compare,O=O!==null?O:gl,O(Te,I)&&o.ref===c.ref)return xi(o,c,G)}return c.flags|=1,o=bo(J,I),o.ref=c.ref,o.return=c,c.child=o}function Zo(o,c,O,I,G){if(o!==null){var J=o.memoizedProps;if(gl(J,I)&&o.ref===c.ref)if(ti=!1,c.pendingProps=I=J,Zc(o,G))(o.flags&131072)!==0&&(ti=!0);else return c.lanes=o.lanes,xi(o,c,G)}return vs(o,c,O,I,G)}function ff(o,c,O){var I=c.pendingProps,G=I.children,J=(c.stateNode._pendingVisibility&2)!==0,Te=o!==null?o.memoizedState:null;if(jl(o,c),I.mode==="hidden"||J){if((c.flags&128)!==0){if(I=Te!==null?Te.baseLanes|O:O,o!==null){for(G=c.child=o.child,J=0;G!==null;)J=J|G.lanes|G.childLanes,G=G.sibling;c.childLanes=J&~I}else c.childLanes=0,c.child=null;return Bl(o,c,I,O)}if((O&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&kc(c,Te!==null?Te.cachePool:null),Te!==null?Yu(c,Te):xl(),xc(c);else return c.lanes=c.childLanes=536870912,Bl(o,c,Te!==null?Te.baseLanes|O:O,O)}else Te!==null?(kc(c,Te.cachePool),Yu(c,Te),qo(),c.memoizedState=null):(o!==null&&kc(c,null),xl(),qo());return Yr(o,c,G,O),c.child}function Bl(o,c,O,I){var G=Cc();return G=G===null?null:{parent:pr._currentValue,pool:G},c.memoizedState={baseLanes:O,cachePool:G},o!==null&&kc(c,null),xl(),xc(c),o!==null&&Qc(o,c,I,!0),null}function jl(o,c){var O=c.ref;if(O===null)o!==null&&o.ref!==null&&(c.flags|=2097664);else{if(typeof O!="function"&&typeof O!="object")throw Error(l(284));(o===null||o.ref!==O)&&(c.flags|=2097664)}}function vs(o,c,O,I,G){return ia(c),O=Ju(o,c,O,I,void 0,G),I=Nc(),o!==null&&!ti?(Lc(o,c,G),xi(o,c,G)):(cr&&I&&zo(c),c.flags|=1,Yr(o,c,O,G),c.child)}function pf(o,c,O,I,G,J){return ia(c),c.updateQueue=null,O=kl(c,I,O,G),Cl(o),I=Nc(),o!==null&&!ti?(Lc(o,c,J),xi(o,c,J)):(cr&&I&&zo(c),c.flags|=1,Yr(o,c,O,J),c.child)}function Ul(o,c,O,I,G){if(ia(c),c.stateNode===null){var J=ka,Te=O.contextType;typeof Te=="object"&&Te!==null&&(J=ai(Te)),J=new O(I,J),c.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,J.updater=Xo,c.stateNode=J,J._reactInternals=c,J=c.stateNode,J.props=I,J.state=c.memoizedState,J.refs={},Ch(c),Te=O.contextType,J.context=typeof Te=="object"&&Te!==null?ai(Te):ka,J.state=c.memoizedState,Te=O.getDerivedStateFromProps,typeof Te=="function"&&(kt(c,O,Te,I),J.state=c.memoizedState),typeof O.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(Te=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),Te!==J.state&&Xo.enqueueReplaceState(J,J.state,null),Va(c,I,J,G),$r(),J.state=c.memoizedState),typeof J.componentDidMount=="function"&&(c.flags|=4194308),I=!0}else if(o===null){J=c.stateNode;var Ce=c.memoizedProps,ze=_i(O,Ce);J.props=ze;var et=J.context,Tt=O.contextType;Te=ka,typeof Tt=="object"&&Tt!==null&&(Te=ai(Tt));var Pt=O.getDerivedStateFromProps;Tt=typeof Pt=="function"||typeof J.getSnapshotBeforeUpdate=="function",Ce=c.pendingProps!==Ce,Tt||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(Ce||et!==Te)&&qc(c,J,I,Te),ns=!1;var dt=c.memoizedState;J.state=dt,Va(c,I,J,G),$r(),et=c.memoizedState,Ce||dt!==et||ns?(typeof Pt=="function"&&(kt(c,O,Pt,I),et=c.memoizedState),(ze=ns||cp(c,O,ze,I,dt,et,Te))?(Tt||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(c.flags|=4194308)):(typeof J.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=I,c.memoizedState=et),J.props=I,J.state=et,J.context=Te,I=ze):(typeof J.componentDidMount=="function"&&(c.flags|=4194308),I=!1)}else{J=c.stateNode,_f(o,c),Te=c.memoizedProps,Tt=_i(O,Te),J.props=Tt,Pt=c.pendingProps,dt=J.context,et=O.contextType,ze=ka,typeof et=="object"&&et!==null&&(ze=ai(et)),Ce=O.getDerivedStateFromProps,(et=typeof Ce=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(Te!==Pt||dt!==ze)&&qc(c,J,I,ze),ns=!1,dt=c.memoizedState,J.state=dt,Va(c,I,J,G),$r();var Ot=c.memoizedState;Te!==Pt||dt!==Ot||ns||o!==null&&o.dependencies!==null&&eu(o.dependencies)?(typeof Ce=="function"&&(kt(c,O,Ce,I),Ot=c.memoizedState),(Tt=ns||cp(c,O,Tt,I,dt,Ot,ze)||o!==null&&o.dependencies!==null&&eu(o.dependencies))?(et||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(I,Ot,ze),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(I,Ot,ze)),typeof J.componentDidUpdate=="function"&&(c.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof J.componentDidUpdate!="function"||Te===o.memoizedProps&&dt===o.memoizedState||(c.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||Te===o.memoizedProps&&dt===o.memoizedState||(c.flags|=1024),c.memoizedProps=I,c.memoizedState=Ot),J.props=I,J.state=Ot,J.context=ze,I=Tt):(typeof J.componentDidUpdate!="function"||Te===o.memoizedProps&&dt===o.memoizedState||(c.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||Te===o.memoizedProps&&dt===o.memoizedState||(c.flags|=1024),I=!1)}return J=I,jl(o,c),I=(c.flags&128)!==0,J||I?(J=c.stateNode,O=I&&typeof O.getDerivedStateFromError!="function"?null:J.render(),c.flags|=1,o!==null&&I?(c.child=bi(c,o.child,null,G),c.child=bi(c,null,O,G)):Yr(o,c,O,G),c.memoizedState=J.state,o=c.child):o=xi(o,c,G),o}function mf(o,c,O,I){return Tl(),c.flags|=256,Yr(o,c,O,I),c.child}var ni={dehydrated:null,treeContext:null,retryLane:0};function ra(o){return{baseLanes:o,cachePool:Xu()}}function eo(o,c,O){return o=o!==null?o.childLanes&~O:0,c&&(o|=lo),o}function Sh(o,c,O){var I=c.pendingProps,G=!1,J=(c.flags&128)!==0,Te;if((Te=J)||(Te=o!==null&&o.memoizedState===null?!1:(Zr.current&2)!==0),Te&&(G=!0,c.flags&=-129),Te=(c.flags&32)!==0,c.flags&=-33,o===null){if(cr){if(G?Wo(c):qo(),cr){var Ce=si,ze;if(ze=Ce){e:{for(ze=Ce,Ce=xo;ze.nodeType!==8;){if(!Ce){Ce=null;break e}if(ze=vo(ze.nextSibling),ze===null){Ce=null;break e}}Ce=ze}Ce!==null?(c.memoizedState={dehydrated:Ce,treeContext:So!==null?{id:Oo,overflow:Xi}:null,retryLane:536870912},ze=zr(18,null,null,0),ze.stateNode=Ce,ze.return=c,c.child=ze,Ir=c,si=null,ze=!0):ze=!1}ze||bs(c)}if(Ce=c.memoizedState,Ce!==null&&(Ce=Ce.dehydrated,Ce!==null))return Ce.data==="$!"?c.lanes=16:c.lanes=536870912,null;po(c)}return Ce=I.children,I=I.fallback,G?(qo(),G=c.mode,Ce=gf({mode:"hidden",children:Ce},G),I=Mo(I,G,O,null),Ce.return=c,I.return=c,Ce.sibling=I,c.child=Ce,G=c.child,G.memoizedState=ra(O),G.childLanes=eo(o,Te,O),c.memoizedState=ni,I):(Wo(c),Kc(c,Ce))}if(ze=o.memoizedState,ze!==null&&(Ce=ze.dehydrated,Ce!==null)){if(J)c.flags&256?(Wo(c),c.flags&=-257,c=Oh(o,c,O)):c.memoizedState!==null?(qo(),c.child=o.child,c.flags|=128,c=null):(qo(),G=I.fallback,Ce=c.mode,I=gf({mode:"visible",children:I.children},Ce),G=Mo(G,Ce,O,null),G.flags|=2,I.return=c,G.return=c,I.sibling=G,c.child=I,bi(c,o.child,null,O),I=c.child,I.memoizedState=ra(O),I.childLanes=eo(o,Te,O),c.memoizedState=ni,c=G);else if(Wo(c),Ce.data==="$!"){if(Te=Ce.nextSibling&&Ce.nextSibling.dataset,Te)var et=Te.dgst;Te=et,I=Error(l(419)),I.stack="",I.digest=Te,Sl({value:I,source:null,stack:null}),c=Oh(o,c,O)}else if(ti||Qc(o,c,O,!1),Te=(O&o.childLanes)!==0,ti||Te){if(Te=gr,Te!==null){if(I=O&-O,(I&42)!==0)I=1;else switch(I){case 2:I=1;break;case 8:I=4;break;case 32:I=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:I=64;break;case 268435456:I=134217728;break;default:I=0}if(I=(I&(Te.suspendedLanes|O))!==0?0:I,I!==0&&I!==ze.retryLane)throw ze.retryLane=I,Ho(o,I),Qr(Te,o,I),Eh}Ce.data==="$?"||Za(),c=Oh(o,c,O)}else Ce.data==="$?"?(c.flags|=128,c.child=o.child,c=_o.bind(null,o),Ce._reactRetry=c,c=null):(o=ze.treeContext,si=vo(Ce.nextSibling),Ir=c,cr=!0,Ji=null,xo=!1,o!==null&&(Si[Ki++]=Oo,Si[Ki++]=Xi,Si[Ki++]=So,Oo=o.id,Xi=o.overflow,So=c),c=Kc(c,I.children),c.flags|=4096);return c}return G?(qo(),G=I.fallback,Ce=c.mode,ze=o.child,et=ze.sibling,I=bo(ze,{mode:"hidden",children:I.children}),I.subtreeFlags=ze.subtreeFlags&31457280,et!==null?G=bo(et,G):(G=Mo(G,Ce,O,null),G.flags|=2),G.return=c,I.return=c,I.sibling=G,c.child=I,I=G,G=c.child,Ce=o.child.memoizedState,Ce===null?Ce=ra(O):(ze=Ce.cachePool,ze!==null?(et=pr._currentValue,ze=ze.parent!==et?{parent:et,pool:et}:ze):ze=Xu(),Ce={baseLanes:Ce.baseLanes|O,cachePool:ze}),G.memoizedState=Ce,G.childLanes=eo(o,Te,O),c.memoizedState=ni,I):(Wo(c),O=o.child,o=O.sibling,O=bo(O,{mode:"visible",children:I.children}),O.return=c,O.sibling=null,o!==null&&(Te=c.deletions,Te===null?(c.deletions=[o],c.flags|=16):Te.push(o)),c.child=O,c.memoizedState=null,O)}function Kc(o,c){return c=gf({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function gf(o,c){return au(o,c,0,null)}function Oh(o,c,O){return bi(c,o.child,null,O),o=Kc(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Xc(o,c,O){o.lanes|=c;var I=o.alternate;I!==null&&(I.lanes|=c),Ah(o.return,c,O)}function Es(o,c,O,I,G){var J=o.memoizedState;J===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:I,tail:O,tailMode:G}:(J.isBackwards=c,J.rendering=null,J.renderingStartTime=0,J.last=I,J.tail=O,J.tailMode=G)}function Jc(o,c,O){var I=c.pendingProps,G=I.revealOrder,J=I.tail;if(Yr(o,c,I.children,O),I=Zr.current,(I&2)!==0)I=I&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Xc(o,O,c);else if(o.tag===19)Xc(o,O,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}I&=1}switch(ce(Zr,I),G){case"forwards":for(O=c.child,G=null;O!==null;)o=O.alternate,o!==null&&Ac(o)===null&&(G=O),O=O.sibling;O=G,O===null?(G=c.child,c.child=null):(G=O.sibling,O.sibling=null),Es(c,!1,G,O,J);break;case"backwards":for(O=null,G=c.child,c.child=null;G!==null;){if(o=G.alternate,o!==null&&Ac(o)===null){c.child=G;break}o=G.sibling,G.sibling=O,O=G,G=o}Es(c,!0,O,null,J);break;case"together":Es(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function xi(o,c,O){if(o!==null&&(c.dependencies=o.dependencies),ao|=c.lanes,(O&c.childLanes)===0)if(o!==null){if(Qc(o,c,O,!1),(O&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(l(153));if(c.child!==null){for(o=c.child,O=bo(o,o.pendingProps),c.child=O,O.return=c;o.sibling!==null;)o=o.sibling,O=O.sibling=bo(o,o.pendingProps),O.return=c;O.sibling=null}return c.child}function Zc(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&eu(o)))}function hp(o,c,O){switch(c.tag){case 3:re(c,c.stateNode.containerInfo),es(c,pr,o.memoizedState.cache),Tl();break;case 27:case 5:we(c);break;case 4:re(c,c.stateNode.containerInfo);break;case 10:es(c,c.type,c.memoizedProps.value);break;case 13:var I=c.memoizedState;if(I!==null)return I.dehydrated!==null?(Wo(c),c.flags|=128,null):(O&c.child.childLanes)!==0?Sh(o,c,O):(Wo(c),o=xi(o,c,O),o!==null?o.sibling:null);Wo(c);break;case 19:var G=(o.flags&128)!==0;if(I=(O&c.childLanes)!==0,I||(Qc(o,c,O,!1),I=(O&c.childLanes)!==0),G){if(I)return Jc(o,c,O);c.flags|=128}if(G=c.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),ce(Zr,Zr.current),I)break;return null;case 22:case 23:return c.lanes=0,ff(o,c,O);case 24:es(c,pr,o.memoizedState.cache)}return xi(o,c,O)}function bf(o,c,O){if(o!==null)if(o.memoizedProps!==c.pendingProps)ti=!0;else{if(!Zc(o,O)&&(c.flags&128)===0)return ti=!1,hp(o,c,O);ti=(o.flags&131072)!==0}else ti=!1,cr&&(c.flags&1048576)!==0&&Hd(c,Ia,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var I=c.elementType,G=I._init;if(I=G(I._payload),c.type=I,typeof I=="function")Kr(I)?(o=_i(I,o),c.tag=1,c=Ul(null,c,I,o,O)):(c.tag=0,c=vs(null,c,I,o,O));else{if(I!=null){if(G=I.$$typeof,G===h){c.tag=11,c=wh(null,c,I,o,O);break e}else if(G===p){c.tag=14,c=Th(null,c,I,o,O);break e}}throw c=k(I)||I,Error(l(306,c,""))}}return c;case 0:return vs(o,c,c.type,c.pendingProps,O);case 1:return I=c.type,G=_i(I,c.pendingProps),Ul(o,c,I,G,O);case 3:e:{if(re(c,c.stateNode.containerInfo),o===null)throw Error(l(387));var J=c.pendingProps;G=c.memoizedState,I=G.element,_f(o,c),Va(c,J,null,O);var Te=c.memoizedState;if(J=Te.cache,es(c,pr,J),J!==G.cache&&Rh(c,[pr],O,!0),$r(),J=Te.element,G.isDehydrated)if(G={element:J,isDehydrated:!1,cache:Te.cache},c.updateQueue.baseState=G,c.memoizedState=G,c.flags&256){c=mf(o,c,J,O);break e}else if(J!==I){I=Yi(Error(l(424)),c),Sl(I),c=mf(o,c,J,O);break e}else for(si=vo(c.stateNode.containerInfo.firstChild),Ir=c,cr=!0,Ji=null,xo=!0,O=qd(c,null,J,O),c.child=O;O;)O.flags=O.flags&-3|4096,O=O.sibling;else{if(Tl(),J===I){c=xi(o,c,O);break e}Yr(o,c,J,O)}c=c.child}return c;case 26:return jl(o,c),o===null?(O=Ql(c.type,null,c.pendingProps,null))?c.memoizedState=O:cr||(O=c.type,o=c.pendingProps,I=il(_e.current).createElement(O),I[Me]=c,I[Be]=o,pi(I,O,o),Ct(I),c.stateNode=I):c.memoizedState=Ql(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return we(c),o===null&&cr&&(I=c.stateNode=nd(c.type,c.pendingProps,_e.current),Ir=c,xo=!0,si=vo(I.firstChild)),I=c.pendingProps.children,o!==null||cr?Yr(o,c,I,O):c.child=bi(c,null,I,O),jl(o,c),c.child;case 5:return o===null&&cr&&((G=I=si)&&(I=ks(I,c.type,c.pendingProps,xo),I!==null?(c.stateNode=I,Ir=c,si=vo(I.firstChild),xo=!1,G=!0):G=!1),G||bs(c)),we(c),G=c.type,J=c.pendingProps,Te=o!==null?o.memoizedProps:null,I=J.children,Mi(G,J)?I=null:Te!==null&&Mi(G,Te)&&(c.flags|=32),c.memoizedState!==null&&(G=Ju(o,c,ap,null,null,O),zi._currentValue=G),jl(o,c),Yr(o,c,I,O),c.child;case 6:return o===null&&cr&&((o=O=si)&&(O=Nr(O,c.pendingProps,xo),O!==null?(c.stateNode=O,Ir=c,si=null,o=!0):o=!1),o||bs(c)),null;case 13:return Sh(o,c,O);case 4:return re(c,c.stateNode.containerInfo),I=c.pendingProps,o===null?c.child=bi(c,null,I,O):Yr(o,c,I,O),c.child;case 11:return wh(o,c,c.type,c.pendingProps,O);case 7:return Yr(o,c,c.pendingProps,O),c.child;case 8:return Yr(o,c,c.pendingProps.children,O),c.child;case 12:return Yr(o,c,c.pendingProps.children,O),c.child;case 10:return I=c.pendingProps,es(c,c.type,I.value),Yr(o,c,I.children,O),c.child;case 9:return G=c.type._context,I=c.pendingProps.children,ia(c),G=ai(G),I=I(G),c.flags|=1,Yr(o,c,I,O),c.child;case 14:return Th(o,c,c.type,c.pendingProps,O);case 15:return Zo(o,c,c.type,c.pendingProps,O);case 19:return Jc(o,c,O);case 22:return ff(o,c,O);case 24:return ia(c),I=ai(pr),o===null?(G=Cc(),G===null&&(G=gr,J=Wr(),G.pooledCache=J,J.refCount++,J!==null&&(G.pooledCacheLanes|=O),G=J),c.memoizedState={parent:I,cache:G},Ch(c),es(c,pr,G)):((o.lanes&O)!==0&&(_f(o,c),Va(c,null,null,O),$r()),G=o.memoizedState,J=c.memoizedState,G.parent!==I?(G={parent:I,cache:I},c.memoizedState=G,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=G),es(c,pr,I)):(I=J.cache,es(c,pr,I),I!==G.cache&&Rh(c,[pr],O,!0))),Yr(o,c,c.pendingProps.children,O),c.child;case 29:throw c.pendingProps}throw Error(l(156,c.tag))}var xh=ie(null),Qo=null,mo=null;function es(o,c,O){ce(xh,c._currentValue),c._currentValue=O}function ts(o){o._currentValue=xh.current,$e(xh)}function Ah(o,c,O){for(;o!==null;){var I=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,I!==null&&(I.childLanes|=c)):I!==null&&(I.childLanes&c)!==c&&(I.childLanes|=c),o===O)break;o=o.return}}function Rh(o,c,O,I){var G=o.child;for(G!==null&&(G.return=o);G!==null;){var J=G.dependencies;if(J!==null){var Te=G.child;J=J.firstContext;e:for(;J!==null;){var Ce=J;J=G;for(var ze=0;ze<c.length;ze++)if(Ce.context===c[ze]){J.lanes|=O,Ce=J.alternate,Ce!==null&&(Ce.lanes|=O),Ah(J.return,O,o),I||(Te=null);break e}J=Ce.next}}else if(G.tag===18){if(Te=G.return,Te===null)throw Error(l(341));Te.lanes|=O,J=Te.alternate,J!==null&&(J.lanes|=O),Ah(Te,O,o),Te=null}else Te=G.child;if(Te!==null)Te.return=G;else for(Te=G;Te!==null;){if(Te===o){Te=null;break}if(G=Te.sibling,G!==null){G.return=Te.return,Te=G;break}Te=Te.return}G=Te}}function Qc(o,c,O,I){o=null;for(var G=c,J=!1;G!==null;){if(!J){if((G.flags&524288)!==0)J=!0;else if((G.flags&262144)!==0)break}if(G.tag===10){var Te=G.alternate;if(Te===null)throw Error(l(387));if(Te=Te.memoizedProps,Te!==null){var Ce=G.type;Ti(G.pendingProps.value,Te.value)||(o!==null?o.push(Ce):o=[Ce])}}else if(G===q.current){if(Te=G.alternate,Te===null)throw Error(l(387));Te.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(o!==null?o.push(zi):o=[zi])}G=G.return}o!==null&&Rh(c,o,O,I),c.flags|=262144}function eu(o){for(o=o.firstContext;o!==null;){if(!Ti(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ia(o){Qo=o,mo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function ai(o){return yf(Qo,o)}function Ha(o,c){return Qo===null&&ia(o),yf(o,c)}function yf(o,c){var O=c._currentValue;if(c={context:c,memoizedValue:O,next:null},mo===null){if(o===null)throw Error(l(308));mo=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else mo=mo.next=c;return O}var ns=!1;function Ch(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _f(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ws(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ts(o,c,O){var I=o.updateQueue;if(I===null)return null;if(I=I.shared,(Mr&2)!==0){var G=I.pending;return G===null?c.next=c:(c.next=G.next,G.next=c),I.pending=c,c=vc(o),vl(o,null,O),c}return $l(o,I,c,O),vc(o)}function no(o,c,O){if(c=c.updateQueue,c!==null&&(c=c.shared,(O&4194176)!==0)){var I=c.lanes;I&=o.pendingLanes,O|=I,c.lanes=O,Bn(o,O)}}function kh(o,c){var O=o.updateQueue,I=o.alternate;if(I!==null&&(I=I.updateQueue,O===I)){var G=null,J=null;if(O=O.firstBaseUpdate,O!==null){do{var Te={lane:O.lane,tag:O.tag,payload:O.payload,callback:null,next:null};J===null?G=J=Te:J=J.next=Te,O=O.next}while(O!==null);J===null?G=J=c:J=J.next=c}else G=J=c;O={baseState:I.baseState,firstBaseUpdate:G,lastBaseUpdate:J,shared:I.shared,callbacks:I.callbacks},o.updateQueue=O;return}o=O.lastBaseUpdate,o===null?O.firstBaseUpdate=c:o.next=c,O.lastBaseUpdate=c}var ko=!1;function $r(){if(ko){var o=xr;if(o!==null)throw o}}function Va(o,c,O,I){ko=!1;var G=o.updateQueue;ns=!1;var J=G.firstBaseUpdate,Te=G.lastBaseUpdate,Ce=G.shared.pending;if(Ce!==null){G.shared.pending=null;var ze=Ce,et=ze.next;ze.next=null,Te===null?J=et:Te.next=et,Te=ze;var Tt=o.alternate;Tt!==null&&(Tt=Tt.updateQueue,Ce=Tt.lastBaseUpdate,Ce!==Te&&(Ce===null?Tt.firstBaseUpdate=et:Ce.next=et,Tt.lastBaseUpdate=ze))}if(J!==null){var Pt=G.baseState;Te=0,Tt=et=ze=null,Ce=J;do{var dt=Ce.lane&-536870913,Ot=dt!==Ce.lane;if(Ot?(er&dt)===dt:(I&dt)===dt){dt!==0&&dt===Zt&&(ko=!0),Tt!==null&&(Tt=Tt.next={lane:0,tag:Ce.tag,payload:Ce.payload,callback:null,next:null});e:{var fn=o,An=Ce;dt=c;var Gr=O;switch(An.tag){case 1:if(fn=An.payload,typeof fn=="function"){Pt=fn.call(Gr,Pt,dt);break e}Pt=fn;break e;case 3:fn.flags=fn.flags&-65537|128;case 0:if(fn=An.payload,dt=typeof fn=="function"?fn.call(Gr,Pt,dt):fn,dt==null)break e;Pt=j({},Pt,dt);break e;case 2:ns=!0}}dt=Ce.callback,dt!==null&&(o.flags|=64,Ot&&(o.flags|=8192),Ot=G.callbacks,Ot===null?G.callbacks=[dt]:Ot.push(dt))}else Ot={lane:dt,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},Tt===null?(et=Tt=Ot,ze=Pt):Tt=Tt.next=Ot,Te|=dt;if(Ce=Ce.next,Ce===null){if(Ce=G.shared.pending,Ce===null)break;Ot=Ce,Ce=Ot.next,Ot.next=null,G.lastBaseUpdate=Ot,G.shared.pending=null}}while(!0);Tt===null&&(ze=Pt),G.baseState=ze,G.firstBaseUpdate=et,G.lastBaseUpdate=Tt,J===null&&(G.shared.lanes=0),ao|=Te,o.lanes=Te,o.memoizedState=Pt}}function Ih(o,c){if(typeof o!="function")throw Error(l(191,o));o.call(c)}function Mh(o,c){var O=o.callbacks;if(O!==null)for(o.callbacks=null,o=0;o<O.length;o++)Ih(O[o],c)}function Bt(o,c){try{var O=c.updateQueue,I=O!==null?O.lastEffect:null;if(I!==null){var G=I.next;O=G;do{if((O.tag&o)===o){I=void 0;var J=O.create,Te=O.inst;I=J(),Te.destroy=I}O=O.next}while(O!==G)}}catch(Ce){Wn(c,c.return,Ce)}}function go(o,c,O){try{var I=c.updateQueue,G=I!==null?I.lastEffect:null;if(G!==null){var J=G.next;I=J;do{if((I.tag&o)===o){var Te=I.inst,Ce=Te.destroy;if(Ce!==void 0){Te.destroy=void 0,G=c;var ze=O;try{Ce()}catch(et){Wn(G,ze,et)}}}I=I.next}while(I!==J)}}catch(et){Wn(c,c.return,et)}}function Io(o){var c=o.updateQueue;if(c!==null){var O=o.stateNode;try{Mh(c,O)}catch(I){Wn(o,o.return,I)}}}function ji(o,c,O){O.props=_i(o.type,o.memoizedProps),O.state=o.memoizedState;try{O.componentWillUnmount()}catch(I){Wn(o,c,I)}}function Ai(o,c){try{var O=o.ref;if(O!==null){var I=o.stateNode;switch(o.tag){case 26:case 27:case 5:var G=I;break;default:G=I}typeof O=="function"?o.refCleanup=O(G):O.current=G}}catch(J){Wn(o,c,J)}}function Br(o,c){var O=o.ref,I=o.refCleanup;if(O!==null)if(typeof I=="function")try{I()}catch(G){Wn(o,c,G)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof O=="function")try{O(null)}catch(G){Wn(o,c,G)}else O.current=null}function Nh(o){var c=o.type,O=o.memoizedProps,I=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":O.autoFocus&&I.focus();break e;case"img":O.src?I.src=O.src:O.srcSet&&(I.srcset=O.srcSet)}}catch(G){Wn(o,o.return,G)}}function tu(o,c,O){try{var I=o.stateNode;Zh(I,o.type,O,c),I[Be]=c}catch(G){Wn(o,o.return,G)}}function ri(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27||o.tag===4}function rt(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||ri(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==27&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function mr(o,c,O){var I=o.tag;if(I===5||I===6)o=o.stateNode,c?O.nodeType===8?O.parentNode.insertBefore(o,c):O.insertBefore(o,c):(O.nodeType===8?(c=O.parentNode,c.insertBefore(o,O)):(c=O,c.appendChild(o)),O=O._reactRootContainer,O!=null||c.onclick!==null||(c.onclick=vu));else if(I!==4&&I!==27&&(o=o.child,o!==null))for(mr(o,c,O),o=o.sibling;o!==null;)mr(o,c,O),o=o.sibling}function Hn(o,c,O){var I=o.tag;if(I===5||I===6)o=o.stateNode,c?O.insertBefore(o,c):O.appendChild(o);else if(I!==4&&I!==27&&(o=o.child,o!==null))for(Hn(o,c,O),o=o.sibling;o!==null;)Hn(o,c,O),o=o.sibling}var rs=!1,wr=!1,Lh=!1,$f=typeof WeakSet=="function"?WeakSet:Set,li=null,oa=!1;function Vr(o,c){if(o=o.containerInfo,Vi=Li,o=Fu(o),Hu(o)){if("selectionStart"in o)var O={start:o.selectionStart,end:o.selectionEnd};else e:{O=(O=o.ownerDocument)&&O.defaultView||window;var I=O.getSelection&&O.getSelection();if(I&&I.rangeCount!==0){O=I.anchorNode;var G=I.anchorOffset,J=I.focusNode;I=I.focusOffset;try{O.nodeType,J.nodeType}catch{O=null;break e}var Te=0,Ce=-1,ze=-1,et=0,Tt=0,Pt=o,dt=null;t:for(;;){for(var Ot;Pt!==O||G!==0&&Pt.nodeType!==3||(Ce=Te+G),Pt!==J||I!==0&&Pt.nodeType!==3||(ze=Te+I),Pt.nodeType===3&&(Te+=Pt.nodeValue.length),(Ot=Pt.firstChild)!==null;)dt=Pt,Pt=Ot;for(;;){if(Pt===o)break t;if(dt===O&&++et===G&&(Ce=Te),dt===J&&++Tt===I&&(ze=Te),(Ot=Pt.nextSibling)!==null)break;Pt=dt,dt=Pt.parentNode}Pt=Ot}O=Ce===-1||ze===-1?null:{start:Ce,end:ze}}else O=null}O=O||{start:0,end:0}}else O=null;for(Qh={focusedElem:o,selectionRange:O},Li=!1,li=c;li!==null;)if(c=li,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,li=o;else for(;li!==null;){switch(c=li,J=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&J!==null){o=void 0,O=c,G=J.memoizedProps,J=J.memoizedState,I=O.stateNode;try{var fn=_i(O.type,G,O.elementType===O.type);o=I.getSnapshotBeforeUpdate(fn,J),I.__reactInternalSnapshotBeforeUpdate=o}catch(An){Wn(O,O.return,An)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,O=o.nodeType,O===9)Dn(o);else if(O===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Dn(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(l(163))}if(o=c.sibling,o!==null){o.return=c.return,li=o;break}li=c.return}return fn=oa,oa=!1,fn}function nu(o,c,O){var I=O.flags;switch(O.tag){case 0:case 11:case 15:Ui(o,O),I&4&&Bt(5,O);break;case 1:if(Ui(o,O),I&4)if(o=O.stateNode,c===null)try{o.componentDidMount()}catch(Ce){Wn(O,O.return,Ce)}else{var G=_i(O.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(G,c,o.__reactInternalSnapshotBeforeUpdate)}catch(Ce){Wn(O,O.return,Ce)}}I&64&&Io(O),I&512&&Ai(O,O.return);break;case 3:if(Ui(o,O),I&64&&(I=O.updateQueue,I!==null)){if(o=null,O.child!==null)switch(O.child.tag){case 27:case 5:o=O.child.stateNode;break;case 1:o=O.child.stateNode}try{Mh(I,o)}catch(Ce){Wn(O,O.return,Ce)}}break;case 26:Ui(o,O),I&512&&Ai(O,O.return);break;case 27:case 5:Ui(o,O),c===null&&I&4&&Nh(O),I&512&&Ai(O,O.return);break;case 12:Ui(o,O);break;case 13:Ui(o,O),I&4&&dp(o,O);break;case 22:if(G=O.memoizedState!==null||rs,!G){c=c!==null&&c.memoizedState!==null||wr;var J=rs,Te=wr;rs=G,(wr=c)&&!Te?Fi(o,O,(O.subtreeFlags&8772)!==0):Ui(o,O),rs=J,wr=Te}I&512&&(O.memoizedProps.mode==="manual"?Ai(O,O.return):Br(O,O.return));break;default:Ui(o,O)}}function Dh(o){var c=o.alternate;c!==null&&(o.alternate=null,Dh(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&mt(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var jr=null,ui=!1;function ro(o,c,O){for(O=O.child;O!==null;)vf(o,c,O),O=O.sibling}function vf(o,c,O){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Oe,O)}catch{}switch(O.tag){case 26:wr||Br(O,c),ro(o,c,O),O.memoizedState?O.memoizedState.count--:O.stateNode&&(O=O.stateNode,O.parentNode.removeChild(O));break;case 27:wr||Br(O,c);var I=jr,G=ui;for(jr=O.stateNode,ro(o,c,O),O=O.stateNode,c=O.attributes;c.length;)O.removeAttributeNode(c[0]);mt(O),jr=I,ui=G;break;case 5:wr||Br(O,c);case 6:G=jr;var J=ui;if(jr=null,ro(o,c,O),jr=G,ui=J,jr!==null)if(ui)try{o=jr,I=O.stateNode,o.nodeType===8?o.parentNode.removeChild(I):o.removeChild(I)}catch(Te){Wn(O,c,Te)}else try{jr.removeChild(O.stateNode)}catch(Te){Wn(O,c,Te)}break;case 18:jr!==null&&(ui?(c=jr,O=O.stateNode,c.nodeType===8?co(c.parentNode,O):c.nodeType===1&&co(c,O),mi(c)):co(jr,O.stateNode));break;case 4:I=jr,G=ui,jr=O.stateNode.containerInfo,ui=!0,ro(o,c,O),jr=I,ui=G;break;case 0:case 11:case 14:case 15:wr||go(2,O,c),wr||go(4,O,c),ro(o,c,O);break;case 1:wr||(Br(O,c),I=O.stateNode,typeof I.componentWillUnmount=="function"&&ji(O,c,I)),ro(o,c,O);break;case 21:ro(o,c,O);break;case 22:wr||Br(O,c),wr=(I=wr)||O.memoizedState!==null,ro(o,c,O),wr=I;break;default:ro(o,c,O)}}function dp(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{mi(o)}catch(O){Wn(c,c.return,O)}}function Fl(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new $f),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new $f),c;default:throw Error(l(435,o.tag))}}function ru(o,c){var O=Fl(o);c.forEach(function(I){var G=mu.bind(null,o,I);O.has(I)||(O.add(I),I.then(G,G))})}function io(o,c){var O=c.deletions;if(O!==null)for(var I=0;I<O.length;I++){var G=O[I],J=o,Te=c,Ce=Te;e:for(;Ce!==null;){switch(Ce.tag){case 27:case 5:jr=Ce.stateNode,ui=!1;break e;case 3:jr=Ce.stateNode.containerInfo,ui=!0;break e;case 4:jr=Ce.stateNode.containerInfo,ui=!0;break e}Ce=Ce.return}if(jr===null)throw Error(l(160));vf(J,Te,G),jr=null,ui=!1,J=G.alternate,J!==null&&(J.return=null),G.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)Ef(c,o),c=c.sibling}var En=null;function Ef(o,c){var O=o.alternate,I=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:io(c,o),ii(o),I&4&&(go(3,o,o.return),Bt(3,o),go(5,o,o.return));break;case 1:io(c,o),ii(o),I&512&&(wr||O===null||Br(O,O.return)),I&64&&rs&&(o=o.updateQueue,o!==null&&(I=o.callbacks,I!==null&&(O=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=O===null?I:O.concat(I))));break;case 26:var G=En;if(io(c,o),ii(o),I&512&&(wr||O===null||Br(O,O.return)),I&4){var J=O!==null?O.memoizedState:null;if(I=o.memoizedState,O===null)if(I===null)if(o.stateNode===null){e:{I=o.type,O=o.memoizedProps,G=G.ownerDocument||G;t:switch(I){case"title":J=G.getElementsByTagName("title")[0],(!J||J[ct]||J[Me]||J.namespaceURI==="http://www.w3.org/2000/svg"||J.hasAttribute("itemprop"))&&(J=G.createElement(I),G.head.insertBefore(J,G.querySelector("head > title"))),pi(J,I,O),J[Me]=o,Ct(J),I=J;break e;case"link":var Te=Df("link","href",G).get(I+(O.href||""));if(Te){for(var Ce=0;Ce<Te.length;Ce++)if(J=Te[Ce],J.getAttribute("href")===(O.href==null?null:O.href)&&J.getAttribute("rel")===(O.rel==null?null:O.rel)&&J.getAttribute("title")===(O.title==null?null:O.title)&&J.getAttribute("crossorigin")===(O.crossOrigin==null?null:O.crossOrigin)){Te.splice(Ce,1);break t}}J=G.createElement(I),pi(J,I,O),G.head.appendChild(J);break;case"meta":if(Te=Df("meta","content",G).get(I+(O.content||""))){for(Ce=0;Ce<Te.length;Ce++)if(J=Te[Ce],J.getAttribute("content")===(O.content==null?null:""+O.content)&&J.getAttribute("name")===(O.name==null?null:O.name)&&J.getAttribute("property")===(O.property==null?null:O.property)&&J.getAttribute("http-equiv")===(O.httpEquiv==null?null:O.httpEquiv)&&J.getAttribute("charset")===(O.charSet==null?null:O.charSet)){Te.splice(Ce,1);break t}}J=G.createElement(I),pi(J,I,O),G.head.appendChild(J);break;default:throw Error(l(468,I))}J[Me]=o,Ct(J),I=J}o.stateNode=I}else Pf(G,o.type,o.stateNode);else o.stateNode=Lf(G,I,o.memoizedProps);else J!==I?(J===null?O.stateNode!==null&&(O=O.stateNode,O.parentNode.removeChild(O)):J.count--,I===null?Pf(G,o.type,o.stateNode):Lf(G,I,o.memoizedProps)):I===null&&o.stateNode!==null&&tu(o,o.memoizedProps,O.memoizedProps)}break;case 27:if(I&4&&o.alternate===null){G=o.stateNode,J=o.memoizedProps;try{for(var ze=G.firstChild;ze;){var et=ze.nextSibling,Tt=ze.nodeName;ze[ct]||Tt==="HEAD"||Tt==="BODY"||Tt==="SCRIPT"||Tt==="STYLE"||Tt==="LINK"&&ze.rel.toLowerCase()==="stylesheet"||G.removeChild(ze),ze=et}for(var Pt=o.type,dt=G.attributes;dt.length;)G.removeAttributeNode(dt[0]);pi(G,Pt,J),G[Me]=o,G[Be]=J}catch(fn){Wn(o,o.return,fn)}}case 5:if(io(c,o),ii(o),I&512&&(wr||O===null||Br(O,O.return)),o.flags&32){G=o.stateNode;try{Cn(G,"")}catch(fn){Wn(o,o.return,fn)}}I&4&&o.stateNode!=null&&(G=o.memoizedProps,tu(o,G,O!==null?O.memoizedProps:G)),I&1024&&(Lh=!0);break;case 6:if(io(c,o),ii(o),I&4){if(o.stateNode===null)throw Error(l(162));I=o.memoizedProps,O=o.stateNode;try{O.nodeValue=I}catch(fn){Wn(o,o.return,fn)}}break;case 3:if(ec=null,G=En,En=Eo(c.containerInfo),io(c,o),En=G,ii(o),I&4&&O!==null&&O.memoizedState.isDehydrated)try{mi(c.containerInfo)}catch(fn){Wn(o,o.return,fn)}Lh&&(Lh=!1,is(o));break;case 4:I=En,En=Eo(o.stateNode.containerInfo),io(c,o),ii(o),En=I;break;case 12:io(c,o),ii(o);break;case 13:io(c,o),ii(o),o.child.flags&8192&&o.memoizedState!==null!=(O!==null&&O.memoizedState!==null)&&(Ya=De()),I&4&&(I=o.updateQueue,I!==null&&(o.updateQueue=null,ru(o,I)));break;case 22:if(I&512&&(wr||O===null||Br(O,O.return)),ze=o.memoizedState!==null,et=O!==null&&O.memoizedState!==null,Tt=rs,Pt=wr,rs=Tt||ze,wr=Pt||et,io(c,o),wr=Pt,rs=Tt,ii(o),c=o.stateNode,c._current=o,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,I&8192&&(c._visibility=ze?c._visibility&-2:c._visibility|1,ze&&(c=rs||wr,O===null||et||c||oo(o)),o.memoizedProps===null||o.memoizedProps.mode!=="manual"))e:for(O=null,c=o;;){if(c.tag===5||c.tag===26||c.tag===27){if(O===null){et=O=c;try{if(G=et.stateNode,ze)J=G.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{Te=et.stateNode,Ce=et.memoizedProps.style;var Ot=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;Te.style.display=Ot==null||typeof Ot=="boolean"?"":(""+Ot).trim()}}catch(fn){Wn(et,et.return,fn)}}}else if(c.tag===6){if(O===null){et=c;try{et.stateNode.nodeValue=ze?"":et.memoizedProps}catch(fn){Wn(et,et.return,fn)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;O===c&&(O=null),c=c.return}O===c&&(O=null),c.sibling.return=c.return,c=c.sibling}I&4&&(I=o.updateQueue,I!==null&&(O=I.retryQueue,O!==null&&(I.retryQueue=null,ru(o,O))));break;case 19:io(c,o),ii(o),I&4&&(I=o.updateQueue,I!==null&&(o.updateQueue=null,ru(o,I)));break;case 21:break;default:io(c,o),ii(o)}}function ii(o){var c=o.flags;if(c&2){try{if(o.tag!==27){e:{for(var O=o.return;O!==null;){if(ri(O)){var I=O;break e}O=O.return}throw Error(l(160))}switch(I.tag){case 27:var G=I.stateNode,J=rt(o);Hn(o,J,G);break;case 5:var Te=I.stateNode;I.flags&32&&(Cn(Te,""),I.flags&=-33);var Ce=rt(o);Hn(o,Ce,Te);break;case 3:case 4:var ze=I.stateNode.containerInfo,et=rt(o);mr(o,et,ze);break;default:throw Error(l(161))}}}catch(Tt){Wn(o,o.return,Tt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function is(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;is(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Ui(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)nu(o,c.alternate,c),c=c.sibling}function oo(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:go(4,c,c.return),oo(c);break;case 1:Br(c,c.return);var O=c.stateNode;typeof O.componentWillUnmount=="function"&&ji(c,c.return,O),oo(c);break;case 26:case 27:case 5:Br(c,c.return),oo(c);break;case 22:Br(c,c.return),c.memoizedState===null&&oo(c);break;default:oo(c)}o=o.sibling}}function Fi(o,c,O){for(O=O&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var I=c.alternate,G=o,J=c,Te=J.flags;switch(J.tag){case 0:case 11:case 15:Fi(G,J,O),Bt(4,J);break;case 1:if(Fi(G,J,O),I=J,G=I.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(et){Wn(I,I.return,et)}if(I=J,G=I.updateQueue,G!==null){var Ce=I.stateNode;try{var ze=G.shared.hiddenCallbacks;if(ze!==null)for(G.shared.hiddenCallbacks=null,G=0;G<ze.length;G++)Ih(ze[G],Ce)}catch(et){Wn(I,I.return,et)}}O&&Te&64&&Io(J),Ai(J,J.return);break;case 26:case 27:case 5:Fi(G,J,O),O&&I===null&&Te&4&&Nh(J),Ai(J,J.return);break;case 12:Fi(G,J,O);break;case 13:Fi(G,J,O),O&&Te&4&&dp(G,J);break;case 22:J.memoizedState===null&&Fi(G,J,O),Ai(J,J.return);break;default:Fi(G,J,O)}c=c.sibling}}function hi(o,c){var O=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(O=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==O&&(o!=null&&o.refCount++,O!=null&&yr(O))}function Ph(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&yr(o))}function Ss(o,c,O,I){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)wf(o,c,O,I),c=c.sibling}function wf(o,c,O,I){var G=c.flags;switch(c.tag){case 0:case 11:case 15:Ss(o,c,O,I),G&2048&&Bt(9,c);break;case 3:Ss(o,c,O,I),G&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&yr(o)));break;case 12:if(G&2048){Ss(o,c,O,I),o=c.stateNode;try{var J=c.memoizedProps,Te=J.id,Ce=J.onPostCommit;typeof Ce=="function"&&Ce(Te,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ze){Wn(c,c.return,ze)}}else Ss(o,c,O,I);break;case 23:break;case 22:J=c.stateNode,c.memoizedState!==null?J._visibility&4?Ss(o,c,O,I):Hl(o,c):J._visibility&4?Ss(o,c,O,I):(J._visibility|=4,za(o,c,O,I,(c.subtreeFlags&10256)!==0)),G&2048&&hi(c.alternate,c);break;case 24:Ss(o,c,O,I),G&2048&&Ph(c.alternate,c);break;default:Ss(o,c,O,I)}}function za(o,c,O,I,G){for(G=G&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var J=o,Te=c,Ce=O,ze=I,et=Te.flags;switch(Te.tag){case 0:case 11:case 15:za(J,Te,Ce,ze,G),Bt(8,Te);break;case 23:break;case 22:var Tt=Te.stateNode;Te.memoizedState!==null?Tt._visibility&4?za(J,Te,Ce,ze,G):Hl(J,Te):(Tt._visibility|=4,za(J,Te,Ce,ze,G)),G&&et&2048&&hi(Te.alternate,Te);break;case 24:za(J,Te,Ce,ze,G),G&&et&2048&&Ph(Te.alternate,Te);break;default:za(J,Te,Ce,ze,G)}c=c.sibling}}function Hl(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var O=o,I=c,G=I.flags;switch(I.tag){case 22:Hl(O,I),G&2048&&hi(I.alternate,I);break;case 24:Hl(O,I),G&2048&&Ph(I.alternate,I);break;default:Hl(O,I)}c=c.sibling}}var iu=8192;function sa(o){if(o.subtreeFlags&iu)for(o=o.child;o!==null;)Tf(o),o=o.sibling}function Tf(o){switch(o.tag){case 26:sa(o),o.flags&iu&&o.memoizedState!==null&&Su(En,o.memoizedState,o.memoizedProps);break;case 5:sa(o);break;case 3:case 4:var c=En;En=Eo(o.stateNode.containerInfo),sa(o),En=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=iu,iu=16777216,sa(o),iu=c):sa(o));break;default:sa(o)}}function ou(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Ga(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var O=0;O<c.length;O++){var I=c[O];li=I,fp(I,o)}ou(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)su(o),o=o.sibling}function su(o){switch(o.tag){case 0:case 11:case 15:Ga(o),o.flags&2048&&go(9,o,o.return);break;case 3:Ga(o);break;case 12:Ga(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&4&&(o.return===null||o.return.tag!==13)?(c._visibility&=-5,Vl(o)):Ga(o);break;default:Ga(o)}}function Vl(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var O=0;O<c.length;O++){var I=c[O];li=I,fp(I,o)}ou(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:go(8,c,c.return),Vl(c);break;case 22:O=c.stateNode,O._visibility&4&&(O._visibility&=-5,Vl(c));break;default:Vl(c)}o=o.sibling}}function fp(o,c){for(;li!==null;){var O=li;switch(O.tag){case 0:case 11:case 15:go(8,O,c);break;case 23:case 22:if(O.memoizedState!==null&&O.memoizedState.cachePool!==null){var I=O.memoizedState.cachePool.pool;I!=null&&I.refCount++}break;case 24:yr(O.memoizedState.cache)}if(I=O.child,I!==null)I.return=O,li=I;else e:for(O=o;li!==null;){I=li;var G=I.sibling,J=I.return;if(Dh(I),I===O){li=null;break e}if(G!==null){G.return=J,li=G;break e}li=J}}}function Bp(o,c,O,I){this.tag=o,this.key=O,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(o,c,O,I){return new Bp(o,c,O,I)}function Kr(o){return o=o.prototype,!(!o||!o.isReactComponent)}function bo(o,c){var O=o.alternate;return O===null?(O=zr(o.tag,c,o.key,o.mode),O.elementType=o.elementType,O.type=o.type,O.stateNode=o.stateNode,O.alternate=o,o.alternate=O):(O.pendingProps=c,O.type=o.type,O.flags=0,O.subtreeFlags=0,O.deletions=null),O.flags=o.flags&31457280,O.childLanes=o.childLanes,O.lanes=o.lanes,O.child=o.child,O.memoizedProps=o.memoizedProps,O.memoizedState=o.memoizedState,O.updateQueue=o.updateQueue,c=o.dependencies,O.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},O.sibling=o.sibling,O.index=o.index,O.ref=o.ref,O.refCleanup=o.refCleanup,O}function Bh(o,c){o.flags&=31457282;var O=o.alternate;return O===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=O.childLanes,o.lanes=O.lanes,o.child=O.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=O.memoizedProps,o.memoizedState=O.memoizedState,o.updateQueue=O.updateQueue,o.type=O.type,c=O.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function zl(o,c,O,I,G,J){var Te=0;if(I=o,typeof o=="function")Kr(o)&&(Te=1);else if(typeof o=="string")Te=Op(o,O,le.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case u:return Mo(O.children,G,J,c);case g:Te=8,G|=24;break;case $:return o=zr(12,O,c,G|2),o.elementType=$,o.lanes=J,o;case b:return o=zr(13,O,c,G),o.elementType=b,o.lanes=J,o;case m:return o=zr(19,O,c,G),o.elementType=m,o.lanes=J,o;case y:return au(O,G,J,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case v:case E:Te=10;break e;case S:Te=9;break e;case h:Te=11;break e;case p:Te=14;break e;case _:Te=16,I=null;break e}Te=29,O=Error(l(130,o===null?"null":typeof o,"")),I=null}return c=zr(Te,O,c,G),c.elementType=o,c.type=I,c.lanes=J,c}function Mo(o,c,O,I){return o=zr(7,o,I,c),o.lanes=O,o}function au(o,c,O,I){o=zr(22,o,I,c),o.elementType=y,o.lanes=O;var G={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var J=G._current;if(J===null)throw Error(l(456));if((G._pendingVisibility&2)===0){var Te=Ho(J,2);Te!==null&&(G._pendingVisibility|=2,Qr(Te,J,2))}},attach:function(){var J=G._current;if(J===null)throw Error(l(456));if((G._pendingVisibility&2)!==0){var Te=Ho(J,2);Te!==null&&(G._pendingVisibility&=-3,Qr(Te,J,2))}}};return o.stateNode=G,o}function di(o,c,O){return o=zr(6,o,null,c),o.lanes=O,o}function Sf(o,c,O){return c=zr(4,o.children!==null?o.children:[],o.key,c),c.lanes=O,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function yo(o){o.flags|=4}function jh(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Bf(c)){if(c=Zi.current,c!==null&&((er&4194176)===er?Ao!==null:(er&62914560)!==er&&(er&536870912)===0||c!==Ao))throw Na=qu,Gd;o.flags|=8192}}function Gl(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?Wt():536870912,o.lanes|=c,qa|=c)}function os(o,c){if(!cr)switch(o.tailMode){case"hidden":c=o.tail;for(var O=null;c!==null;)c.alternate!==null&&(O=c),c=c.sibling;O===null?o.tail=null:O.sibling=null;break;case"collapsed":O=o.tail;for(var I=null;O!==null;)O.alternate!==null&&(I=O),O=O.sibling;I===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:I.sibling=null}}function Rr(o){var c=o.alternate!==null&&o.alternate.child===o.child,O=0,I=0;if(c)for(var G=o.child;G!==null;)O|=G.lanes|G.childLanes,I|=G.subtreeFlags&31457280,I|=G.flags&31457280,G.return=o,G=G.sibling;else for(G=o.child;G!==null;)O|=G.lanes|G.childLanes,I|=G.subtreeFlags,I|=G.flags,G.return=o,G=G.sibling;return o.subtreeFlags|=I,o.childLanes=O,c}function pp(o,c,O){var I=c.pendingProps;switch(Ec(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rr(c),null;case 1:return Rr(c),null;case 3:return O=c.stateNode,I=null,o!==null&&(I=o.memoizedState.cache),c.memoizedState.cache!==I&&(c.flags|=2048),ts(pr),fe(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(o===null||o.child===null)&&(wl(c)?yo(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Ji!==null&&(ua(Ji),Ji=null))),Rr(c),null;case 26:return O=c.memoizedState,o===null?(yo(c),O!==null?(Rr(c),jh(c,O)):(Rr(c),c.flags&=-16777217)):O?O!==o.memoizedState?(yo(c),Rr(c),jh(c,O)):(Rr(c),c.flags&=-16777217):(o.memoizedProps!==I&&yo(c),Rr(c),c.flags&=-16777217),null;case 27:Re(c),O=_e.current;var G=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==I&&yo(c);else{if(!I){if(c.stateNode===null)throw Error(l(166));return Rr(c),null}o=le.current,wl(c)?Vd(c):(o=nd(G,I,O),c.stateNode=o,yo(c))}return Rr(c),null;case 5:if(Re(c),O=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==I&&yo(c);else{if(!I){if(c.stateNode===null)throw Error(l(166));return Rr(c),null}if(o=le.current,wl(c))Vd(c);else{switch(G=il(_e.current),o){case 1:o=G.createElementNS("http://www.w3.org/2000/svg",O);break;case 2:o=G.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;default:switch(O){case"svg":o=G.createElementNS("http://www.w3.org/2000/svg",O);break;case"math":o=G.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;case"script":o=G.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof I.is=="string"?G.createElement("select",{is:I.is}):G.createElement("select"),I.multiple?o.multiple=!0:I.size&&(o.size=I.size);break;default:o=typeof I.is=="string"?G.createElement(O,{is:I.is}):G.createElement(O)}}o[Me]=c,o[Be]=I;e:for(G=c.child;G!==null;){if(G.tag===5||G.tag===6)o.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===c)break e;for(;G.sibling===null;){if(G.return===null||G.return===c)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}c.stateNode=o;e:switch(pi(o,O,I),O){case"button":case"input":case"select":case"textarea":o=!!I.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&yo(c)}}return Rr(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==I&&yo(c);else{if(typeof I!="string"&&c.stateNode===null)throw Error(l(166));if(o=_e.current,wl(c)){if(o=c.stateNode,O=c.memoizedProps,I=null,G=Ir,G!==null)switch(G.tag){case 27:case 5:I=G.memoizedProps}o[Me]=c,o=!!(o.nodeValue===O||I!==null&&I.suppressHydrationWarning===!0||Ep(o.nodeValue,O)),o||bs(c)}else o=il(o).createTextNode(I),o[Me]=c,c.stateNode=o}return Rr(c),null;case 13:if(I=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(G=wl(c),I!==null&&I.dehydrated!==null){if(o===null){if(!G)throw Error(l(318));if(G=c.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(l(317));G[Me]=c}else Tl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Rr(c),G=!1}else Ji!==null&&(ua(Ji),Ji=null),G=!0;if(!G)return c.flags&256?(po(c),c):(po(c),null)}if(po(c),(c.flags&128)!==0)return c.lanes=O,c;if(O=I!==null,o=o!==null&&o.memoizedState!==null,O){I=c.child,G=null,I.alternate!==null&&I.alternate.memoizedState!==null&&I.alternate.memoizedState.cachePool!==null&&(G=I.alternate.memoizedState.cachePool.pool);var J=null;I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(J=I.memoizedState.cachePool.pool),J!==G&&(I.flags|=2048)}return O!==o&&O&&(c.child.flags|=8192),Gl(c,c.updateQueue),Rr(c),null;case 4:return fe(),o===null&&Qt(c.stateNode.containerInfo),Rr(c),null;case 10:return ts(c.type),Rr(c),null;case 19:if($e(Zr),G=c.memoizedState,G===null)return Rr(c),null;if(I=(c.flags&128)!==0,J=G.rendering,J===null)if(I)os(G,!1);else{if(Jn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(J=Ac(o),J!==null){for(c.flags|=128,os(G,!1),o=J.updateQueue,c.updateQueue=o,Gl(c,o),c.subtreeFlags=0,o=O,O=c.child;O!==null;)Bh(O,o),O=O.sibling;return ce(Zr,Zr.current&1|2),c.child}o=o.sibling}G.tail!==null&&De()>Ur&&(c.flags|=128,I=!0,os(G,!1),c.lanes=4194304)}else{if(!I)if(o=Ac(J),o!==null){if(c.flags|=128,I=!0,o=o.updateQueue,c.updateQueue=o,Gl(c,o),os(G,!0),G.tail===null&&G.tailMode==="hidden"&&!J.alternate&&!cr)return Rr(c),null}else 2*De()-G.renderingStartTime>Ur&&O!==536870912&&(c.flags|=128,I=!0,os(G,!1),c.lanes=4194304);G.isBackwards?(J.sibling=c.child,c.child=J):(o=G.last,o!==null?o.sibling=J:c.child=J,G.last=J)}return G.tail!==null?(c=G.tail,G.rendering=c,G.tail=c.sibling,G.renderingStartTime=De(),c.sibling=null,o=Zr.current,ce(Zr,I?o&1|2:o&1),c):(Rr(c),null);case 22:case 23:return po(c),Ku(),I=c.memoizedState!==null,o!==null?o.memoizedState!==null!==I&&(c.flags|=8192):I&&(c.flags|=8192),I?(O&536870912)!==0&&(c.flags&128)===0&&(Rr(c),c.subtreeFlags&6&&(c.flags|=8192)):Rr(c),O=c.updateQueue,O!==null&&Gl(c,O.retryQueue),O=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(O=o.memoizedState.cachePool.pool),I=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(I=c.memoizedState.cachePool.pool),I!==O&&(c.flags|=2048),o!==null&&$e(Yo),null;case 24:return O=null,o!==null&&(O=o.memoizedState.cache),c.memoizedState.cache!==O&&(c.flags|=2048),ts(pr),Rr(c),null;case 25:return null}throw Error(l(156,c.tag))}function Uh(o,c){switch(Ec(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return ts(pr),fe(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Re(c),null;case 13:if(po(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(l(340));Tl()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return $e(Zr),null;case 4:return fe(),null;case 10:return ts(c.type),null;case 22:case 23:return po(c),Ku(),o!==null&&$e(Yo),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return ts(pr),null;case 25:return null;default:return null}}function Of(o,c){switch(Ec(c),c.tag){case 3:ts(pr),fe();break;case 26:case 27:case 5:Re(c);break;case 4:fe();break;case 13:po(c);break;case 19:$e(Zr);break;case 10:ts(c.type);break;case 22:case 23:po(c),Ku(),o!==null&&$e(Yo);break;case 24:ts(pr)}}var mp={getCacheForType:function(o){var c=ai(pr),O=c.data.get(o);return O===void 0&&(O=o(),c.data.set(o,O)),O}},gp=typeof WeakMap=="function"?WeakMap:Map,Mr=0,gr=null,Gn=null,er=0,vr=0,Ri=null,so=!1,aa=!1,lu=!1,ss=0,Jn=0,ao=0,la=0,Wa=0,lo=0,qa=0,Wl=null,$i=null,Fh=!1,Ya=0,Ur=1/0,as=null,Hi=null,Ka=!1,ls=null,ql=0,Hh=0,cu=null,ca=0,uu=null;function oi(){if((Mr&2)!==0&&er!==0)return er&-er;if(D.T!==null){var o=Zt;return o!==0?o:Mn()}return pe()}function Xa(){lo===0&&(lo=(er&536870912)===0||cr?Dt():536870912);var o=Zi.current;return o!==null&&(o.flags|=32),lo}function Qr(o,c,O){(o===gr&&vr===2||o.cancelPendingCommit!==null)&&(Xr(o,0),vi(o,er,lo,!1)),bn(o,O),((Mr&2)===0||o!==gr)&&(o===gr&&((Mr&2)===0&&(la|=O),Jn===4&&vi(o,er,lo,!1)),Ci(o))}function rr(o,c,O){if((Mr&6)!==0)throw Error(l(327));var I=!O&&(c&60)===0&&(c&o.expiredLanes)===0||qe(o,c),G=I?yp(o,c):da(o,c,!0),J=I;do{if(G===0){aa&&!I&&vi(o,c,0,!1);break}else if(G===6)vi(o,c,0,!so);else{if(O=o.current.alternate,J&&!xf(O)){G=da(o,c,!1),J=!1;continue}if(G===2){if(J=c,o.errorRecoveryDisabledLanes&J)var Te=0;else Te=o.pendingLanes&-536870913,Te=Te!==0?Te:Te&536870912?536870912:0;if(Te!==0){c=Te;e:{var Ce=o;G=Wl;var ze=Ce.current.memoizedState.isDehydrated;if(ze&&(Xr(Ce,Te).flags|=256),Te=da(Ce,Te,!1),Te!==2){if(lu&&!ze){Ce.errorRecoveryDisabledLanes|=J,la|=J,G=4;break e}J=$i,$i=G,J!==null&&ua(J)}G=Te}if(J=!1,G!==2)continue}}if(G===1){Xr(o,0),vi(o,c,0,!0);break}e:{switch(I=o,G){case 0:case 1:throw Error(l(345));case 4:if((c&4194176)===c){vi(I,c,lo,!so);break e}break;case 2:$i=null;break;case 3:case 5:break;default:throw Error(l(329))}if(I.finishedWork=O,I.finishedLanes=c,(c&62914560)===c&&(J=Ya+300-De(),10<J)){if(vi(I,c,lo,!so),Fe(I,0)!==0)break e;I.timeoutHandle=Eu(ha.bind(null,I,O,$i,as,Fh,c,lo,la,qa,so,2,-0,0),J);break e}ha(I,O,$i,as,Fh,c,lo,la,qa,so,0,-0,0)}}break}while(!0);Ci(o)}function ua(o){$i===null?$i=o:$i.push.apply($i,o)}function ha(o,c,O,I,G,J,Te,Ce,ze,et,Tt,Pt,dt){var Ot=c.subtreeFlags;if((Ot&8192||(Ot&16785408)===16785408)&&(Ms={stylesheets:null,count:0,unsuspend:jf},Tf(c),c=Uf(),c!==null)){o.cancelPendingCommit=c(Wh.bind(null,o,O,I,G,Te,Ce,ze,1,Pt,dt)),vi(o,J,Te,!et);return}Wh(o,O,I,G,Te,Ce,ze,Tt,Pt,dt)}function xf(o){for(var c=o;;){var O=c.tag;if((O===0||O===11||O===15)&&c.flags&16384&&(O=c.updateQueue,O!==null&&(O=O.stores,O!==null)))for(var I=0;I<O.length;I++){var G=O[I],J=G.getSnapshot;G=G.value;try{if(!Ti(J(),G))return!1}catch{return!1}}if(O=c.child,c.subtreeFlags&16384&&O!==null)O.return=c,c=O;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function vi(o,c,O,I){c&=~Wa,c&=~la,o.suspendedLanes|=c,o.pingedLanes&=~c,I&&(o.warmLanes|=c),I=o.expirationTimes;for(var G=c;0<G;){var J=31-Lt(G),Te=1<<J;I[J]=-1,G&=~Te}O!==0&&Pn(o,O,c)}function hu(){return(Mr&6)===0?(ki(0),!1):!0}function du(){if(Gn!==null){if(vr===0)var o=Gn.return;else o=Gn,mo=Qo=null,Dc(o),Xs=null,Js=0,o=Gn;for(;o!==null;)Of(o.alternate,o),o=o.return;Gn=null}}function Xr(o,c){o.finishedWork=null,o.finishedLanes=0;var O=o.timeoutHandle;O!==-1&&(o.timeoutHandle=-1,ed(O)),O=o.cancelPendingCommit,O!==null&&(o.cancelPendingCommit=null,O()),du(),gr=o,Gn=O=bo(o.current,null),er=c,vr=0,Ri=null,so=!1,aa=qe(o,c),lu=!1,qa=lo=Wa=la=ao=Jn=0,$i=Wl=null,Fh=!1,(c&8)!==0&&(c|=c&32);var I=o.entangledLanes;if(I!==0)for(o=o.entanglements,I&=c;0<I;){var G=31-Lt(I),J=1<<G;c|=o[G],I&=~J}return ss=c,$c(),O}function Yl(o,c){Fn=null,D.H=Co,c===Ma?(c=Sc(),vr=3):c===Gd?(c=Sc(),vr=4):vr=c===Eh?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ri=c,Gn===null&&(Jn=1,Yc(o,Yi(c,o.current)))}function Ja(){var o=D.H;return D.H=Co,o===null?Co:o}function fu(){var o=D.A;return D.A=mp,o}function Za(){Jn=4,so||(er&4194176)!==er&&Zi.current!==null||(aa=!0),(ao&134217727)===0&&(la&134217727)===0||gr===null||vi(gr,er,lo,!1)}function da(o,c,O){var I=Mr;Mr|=2;var G=Ja(),J=fu();(gr!==o||er!==c)&&(as=null,Xr(o,c)),c=!1;var Te=Jn;e:do try{if(vr!==0&&Gn!==null){var Ce=Gn,ze=Ri;switch(vr){case 8:du(),Te=6;break e;case 3:case 2:case 6:Zi.current===null&&(c=!0);var et=vr;if(vr=0,Ri=null,fi(o,Ce,ze,et),O&&aa){Te=0;break e}break;default:et=vr,vr=0,Ri=null,fi(o,Ce,ze,et)}}bp(),Te=Jn;break}catch(Tt){Yl(o,Tt)}while(!0);return c&&o.shellSuspendCounter++,mo=Qo=null,Mr=I,D.H=G,D.A=J,Gn===null&&(gr=null,er=0,$c()),Te}function bp(){for(;Gn!==null;)Vh(Gn)}function yp(o,c){var O=Mr;Mr|=2;var I=Ja(),G=fu();gr!==o||er!==c?(as=null,Ur=De()+500,Xr(o,c)):aa=qe(o,c);e:do try{if(vr!==0&&Gn!==null){c=Gn;var J=Ri;t:switch(vr){case 1:vr=0,Ri=null,fi(o,c,J,1);break;case 2:if(wc(J)){vr=0,Ri=null,zh(c);break}c=function(){vr===2&&gr===o&&(vr=7),Ci(o)},J.then(c,c);break e;case 3:vr=7;break e;case 4:vr=5;break e;case 7:wc(J)?(vr=0,Ri=null,zh(c)):(vr=0,Ri=null,fi(o,c,J,7));break;case 5:var Te=null;switch(Gn.tag){case 26:Te=Gn.memoizedState;case 5:case 27:var Ce=Gn;if(!Te||Bf(Te)){vr=0,Ri=null;var ze=Ce.sibling;if(ze!==null)Gn=ze;else{var et=Ce.return;et!==null?(Gn=et,fa(et)):Gn=null}break t}}vr=0,Ri=null,fi(o,c,J,5);break;case 6:vr=0,Ri=null,fi(o,c,J,6);break;case 8:du(),Jn=6;break e;default:throw Error(l(462))}}Qa();break}catch(Tt){Yl(o,Tt)}while(!0);return mo=Qo=null,D.H=I,D.A=G,Mr=O,Gn!==null?0:(gr=null,er=0,$c(),Jn)}function Qa(){for(;Gn!==null&&!Ae();)Vh(Gn)}function Vh(o){var c=bf(o.alternate,o,ss);o.memoizedProps=o.pendingProps,c===null?fa(o):Gn=c}function zh(o){var c=o,O=c.alternate;switch(c.tag){case 15:case 0:c=pf(O,c,c.pendingProps,c.type,void 0,er);break;case 11:c=pf(O,c,c.pendingProps,c.type.render,c.ref,er);break;case 5:Dc(c);default:Of(O,c),c=Gn=Bh(c,ss),c=bf(O,c,ss)}o.memoizedProps=o.pendingProps,c===null?fa(o):Gn=c}function fi(o,c,O,I){mo=Qo=null,Dc(c),Xs=null,Js=0;var G=c.return;try{if(Pp(o,G,c,O,er)){Jn=1,Yc(o,Yi(O,o.current)),Gn=null;return}}catch(J){if(G!==null)throw Gn=G,J;Jn=1,Yc(o,Yi(O,o.current)),Gn=null;return}c.flags&32768?(cr||I===1?o=!0:aa||(er&536870912)!==0?o=!1:(so=o=!0,(I===2||I===3||I===6)&&(I=Zi.current,I!==null&&I.tag===13&&(I.flags|=16384))),Gh(c,o)):fa(c)}function fa(o){var c=o;do{if((c.flags&32768)!==0){Gh(c,so);return}o=c.return;var O=pp(c.alternate,c,ss);if(O!==null){Gn=O;return}if(c=c.sibling,c!==null){Gn=c;return}Gn=c=o}while(c!==null);Jn===0&&(Jn=5)}function Gh(o,c){do{var O=Uh(o.alternate,o);if(O!==null){O.flags&=32767,Gn=O;return}if(O=o.return,O!==null&&(O.flags|=32768,O.subtreeFlags=0,O.deletions=null),!c&&(o=o.sibling,o!==null)){Gn=o;return}Gn=o=O}while(o!==null);Jn=6,Gn=null}function Wh(o,c,O,I,G,J,Te,Ce,ze,et){var Tt=D.T,Pt=U.p;try{U.p=2,D.T=null,_p(o,c,O,I,Pt,G,J,Te,Ce,ze,et)}finally{D.T=Tt,U.p=Pt}}function _p(o,c,O,I,G,J,Te,Ce){do Os();while(ls!==null);if((Mr&6)!==0)throw Error(l(327));var ze=o.finishedWork;if(I=o.finishedLanes,ze===null)return null;if(o.finishedWork=null,o.finishedLanes=0,ze===o.current)throw Error(l(177));o.callbackNode=null,o.callbackPriority=0,o.cancelPendingCommit=null;var et=ze.lanes|ze.childLanes;if(et|=Gu,sr(o,I,et,J,Te,Ce),o===gr&&(Gn=gr=null,er=0),(ze.subtreeFlags&10256)===0&&(ze.flags&10256)===0||Ka||(Ka=!0,Hh=et,cu=O,Tr(He,function(){return Os(),null})),O=(ze.flags&15990)!==0,(ze.subtreeFlags&15990)!==0||O?(O=D.T,D.T=null,J=U.p,U.p=2,Te=Mr,Mr|=4,Vr(o,ze),Ef(ze,o),Bd(Qh,o.containerInfo),Li=!!Vi,Qh=Vi=null,o.current=ze,nu(o,ze.alternate,ze),Ne(),Mr=Te,U.p=J,D.T=O):o.current=ze,Ka?(Ka=!1,ls=o,ql=I):Af(o,et),et=o.pendingLanes,et===0&&(Hi=null),Pe(ze.stateNode),Ci(o),c!==null)for(G=o.onRecoverableError,ze=0;ze<c.length;ze++)et=c[ze],G(et.value,{componentStack:et.stack});return(ql&3)!==0&&Os(),et=o.pendingLanes,(I&4194218)!==0&&(et&42)!==0?o===uu?ca++:(ca=0,uu=o):ca=0,ki(0),null}function Af(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,yr(c)))}function Os(){if(ls!==null){var o=ls,c=Hh;Hh=0;var O=ci(ql),I=D.T,G=U.p;try{if(U.p=32>O?32:O,D.T=null,ls===null)var J=!1;else{O=cu,cu=null;var Te=ls,Ce=ql;if(ls=null,ql=0,(Mr&6)!==0)throw Error(l(331));var ze=Mr;if(Mr|=4,su(Te.current),wf(Te,Te.current,Ce,O),Mr=ze,ki(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Oe,Te)}catch{}J=!0}return J}finally{U.p=G,D.T=I,Af(o,c)}}return!1}function Jr(o,c,O){c=Yi(O,c),c=vh(o.stateNode,c,2),o=Ts(o,c,2),o!==null&&(bn(o,2),Ci(o))}function Wn(o,c,O){if(o.tag===3)Jr(o,o,O);else for(;c!==null;){if(c.tag===3){Jr(c,o,O);break}else if(c.tag===1){var I=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Hi===null||!Hi.has(I))){o=Yi(O,o),O=hf(2),I=Ts(c,O,2),I!==null&&(df(O,I,c,o),bn(I,2),Ci(I));break}}c=c.return}}function pu(o,c,O){var I=o.pingCache;if(I===null){I=o.pingCache=new gp;var G=new Set;I.set(c,G)}else G=I.get(c),G===void 0&&(G=new Set,I.set(c,G));G.has(O)||(lu=!0,G.add(O),o=Rf.bind(null,o,c,O),c.then(o,o))}function Rf(o,c,O){var I=o.pingCache;I!==null&&I.delete(c),o.pingedLanes|=o.suspendedLanes&O,o.warmLanes&=~O,gr===o&&(er&O)===O&&(Jn===4||Jn===3&&(er&62914560)===er&&300>De()-Ya?(Mr&2)===0&&Xr(o,0):Wa|=O,qa===er&&(qa=0)),Ci(o)}function Cf(o,c){c===0&&(c=Wt()),o=Ho(o,c),o!==null&&(bn(o,c),Ci(o))}function _o(o){var c=o.memoizedState,O=0;c!==null&&(O=c.retryLane),Cf(o,O)}function mu(o,c){var O=0;switch(o.tag){case 13:var I=o.stateNode,G=o.memoizedState;G!==null&&(O=G.retryLane);break;case 19:I=o.stateNode;break;case 22:I=o.stateNode._retryCache;break;default:throw Error(l(314))}I!==null&&I.delete(c),Cf(o,O)}function Tr(o,c){return ue(o,c)}var Cr=null,No=null,gu=!1,el=!1,Kl=!1,$o=0;function Ci(o){o!==No&&o.next===null&&(No===null?Cr=No=o:No=No.next=o),el=!0,gu||(gu=!0,tl(Lo))}function ki(o,c){if(!Kl&&el){Kl=!0;do for(var O=!1,I=Cr;I!==null;){if(o!==0){var G=I.pendingLanes;if(G===0)var J=0;else{var Te=I.suspendedLanes,Ce=I.pingedLanes;J=(1<<31-Lt(42|o)+1)-1,J&=G&~(Te&~Ce),J=J&201326677?J&201326677|1:J?J|2:0}J!==0&&(O=!0,yu(I,J))}else J=er,J=Fe(I,I===gr?J:0),(J&3)===0||qe(I,J)||(O=!0,yu(I,J));I=I.next}while(O);Kl=!1}}function Lo(){el=gu=!1;var o=0;$o!==0&&(Cs()&&(o=$o),$o=0);for(var c=De(),O=null,I=Cr;I!==null;){var G=I.next,J=bu(I,c);J===0?(I.next=null,O===null?Cr=G:O.next=G,G===null&&(No=O)):(O=I,(o!==0||(J&3)!==0)&&(el=!0)),I=G}ki(o)}function bu(o,c){for(var O=o.suspendedLanes,I=o.pingedLanes,G=o.expirationTimes,J=o.pendingLanes&-62914561;0<J;){var Te=31-Lt(J),Ce=1<<Te,ze=G[Te];ze===-1?((Ce&O)===0||(Ce&I)!==0)&&(G[Te]=st(Ce,c)):ze<=c&&(o.expiredLanes|=Ce),J&=~Ce}if(c=gr,O=er,O=Fe(o,o===c?O:0),I=o.callbackNode,O===0||o===c&&vr===2||o.cancelPendingCommit!==null)return I!==null&&I!==null&&Ee(I),o.callbackNode=null,o.callbackPriority=0;if((O&3)===0||qe(o,O)){if(c=O&-O,c===o.callbackPriority)return c;switch(I!==null&&Ee(I),ci(O)){case 2:case 8:O=at;break;case 32:O=He;break;case 268435456:O=Ue;break;default:O=He}return I=kf.bind(null,o),O=ue(O,I),o.callbackPriority=c,o.callbackNode=O,c}return I!==null&&I!==null&&Ee(I),o.callbackPriority=2,o.callbackNode=null,2}function kf(o,c){var O=o.callbackNode;if(Os()&&o.callbackNode!==O)return null;var I=er;return I=Fe(o,o===gr?I:0),I===0?null:(rr(o,I,c),bu(o,De()),o.callbackNode!=null&&o.callbackNode===O?kf.bind(null,o):null)}function yu(o,c){if(Os())return null;rr(o,c,!0)}function tl(o){Zl(function(){(Mr&6)!==0?ue(tt,o):o()})}function Mn(){return $o===0&&($o=Dt()),$o}function xs(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:de(""+o)}function _u(o,c){var O=c.ownerDocument.createElement("input");return O.name=c.name,O.value=c.value,o.id&&O.setAttribute("form",o.id),c.parentNode.insertBefore(O,c),o=new FormData(o),O.parentNode.removeChild(O),o}function jp(o,c,O,I,G){if(c==="submit"&&O&&O.stateNode===G){var J=xs((G[Be]||null).action),Te=I.submitter;Te&&(c=(c=Te[Be]||null)?xs(c.formAction):Te.getAttribute("formAction"),c!==null&&(J=c,Te=null));var Ce=new Nn("action","action",null,I,G);o.push({event:Ce,listeners:[{instance:null,listener:function(){if(I.defaultPrevented){if($o!==0){var ze=Te?_u(G,Te):new FormData(G);zc(O,{pending:!0,data:ze,method:G.method,action:J},null,ze)}}else typeof J=="function"&&(Ce.preventDefault(),ze=Te?_u(G,Te):new FormData(G),zc(O,{pending:!0,data:ze,method:G.method,action:J},J,ze))},currentTarget:G}]})}}for(var qh=0;qh<_l.length;qh++){var Yh=_l[qh],$p=Yh.toLowerCase(),Kh=Yh[0].toUpperCase()+Yh.slice(1);qi($p,"on"+Kh)}qi(Ra,"onAnimationEnd"),qi(Ws,"onAnimationIteration"),qi(jd,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Ud,"onTransitionRun"),qi(Vu,"onTransitionStart"),qi(yl,"onTransitionCancel"),qi(zu,"onTransitionEnd"),sn("onMouseEnter",["mouseout","mouseover"]),sn("onMouseLeave",["mouseout","mouseover"]),sn("onPointerEnter",["pointerout","pointerover"]),sn("onPointerLeave",["pointerout","pointerover"]),$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$n("onBeforeInput",["compositionend","keypress","textInput","paste"]),$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ei=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pa));function Xh(o,c){c=(c&4)!==0;for(var O=0;O<o.length;O++){var I=o[O],G=I.event;I=I.listeners;e:{var J=void 0;if(c)for(var Te=I.length-1;0<=Te;Te--){var Ce=I[Te],ze=Ce.instance,et=Ce.currentTarget;if(Ce=Ce.listener,ze!==J&&G.isPropagationStopped())break e;J=Ce,G.currentTarget=et;try{J(G)}catch(Tt){It(Tt)}G.currentTarget=null,J=ze}else for(Te=0;Te<I.length;Te++){if(Ce=I[Te],ze=Ce.instance,et=Ce.currentTarget,Ce=Ce.listener,ze!==J&&G.isPropagationStopped())break e;J=Ce,G.currentTarget=et;try{J(G)}catch(Tt){It(Tt)}G.currentTarget=null,J=ze}}}}function tr(o,c){var O=c[Xe];O===void 0&&(O=c[Xe]=new Set);var I=o+"__bubble";O.has(I)||(nl(c,o,2,!1),O.add(I))}function $u(o,c,O){var I=0;c&&(I|=4),nl(O,o,I,c)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function Qt(o){if(!o[Xl]){o[Xl]=!0,ln.forEach(function(O){O!=="selectionchange"&&(Ei.has(O)||$u(O,!1,o),$u(O,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Xl]||(c[Xl]=!0,$u("selectionchange",!1,c))}}function nl(o,c,O,I){switch(xu(c)){case 2:var G=Rt;break;case 8:G=Hf;break;default:G=Vf}O=G.bind(null,c,O,o),G=void 0,!At||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(G=!0),I?G!==void 0?o.addEventListener(c,O,{capture:!0,passive:G}):o.addEventListener(c,O,!0):G!==void 0?o.addEventListener(c,O,{passive:G}):o.addEventListener(c,O,!1)}function Jl(o,c,O,I,G){var J=I;if((c&1)===0&&(c&2)===0&&I!==null)e:for(;;){if(I===null)return;var Te=I.tag;if(Te===3||Te===4){var Ce=I.stateNode.containerInfo;if(Ce===G||Ce.nodeType===8&&Ce.parentNode===G)break;if(Te===4)for(Te=I.return;Te!==null;){var ze=Te.tag;if((ze===3||ze===4)&&(ze=Te.stateNode.containerInfo,ze===G||ze.nodeType===8&&ze.parentNode===G))return;Te=Te.return}for(;Ce!==null;){if(Te=yt(Ce),Te===null)return;if(ze=Te.tag,ze===5||ze===6||ze===26||ze===27){I=J=Te;continue e}Ce=Ce.parentNode}}I=I.return}Mt(function(){var et=J,Tt=Ve(O),Pt=[];e:{var dt=qs.get(o);if(dt!==void 0){var Ot=Nn,fn=o;switch(o){case"keypress":if(kn(O)===0)break e;case"keydown":case"keyup":Ot=yd;break;case"focusin":fn="focus",Ot=Uo;break;case"focusout":fn="blur",Ot=Uo;break;case"beforeblur":case"afterblur":Ot=Uo;break;case"click":if(O.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ot=br;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ot=Hs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ot=Qf;break;case Ra:case Ws:case jd:Ot=Sa;break;case zu:Ot=vd;break;case"scroll":case"scrollend":Ot=St;break;case"wheel":Ot=wd;break;case"copy":case"cut":case"paste":Ot=Jf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ot=hc;break;case"toggle":case"beforetoggle":Ot=Sd}var An=(c&4)!==0,Gr=!An&&(o==="scroll"||o==="scrollend"),it=An?dt!==null?dt+"Capture":null:dt;An=[];for(var Qe=et,lt;Qe!==null;){var Nt=Qe;if(lt=Nt.stateNode,Nt=Nt.tag,Nt!==5&&Nt!==26&&Nt!==27||lt===null||it===null||(Nt=ut(Qe,it),Nt!=null&&An.push(As(Qe,Nt,lt))),Gr)break;Qe=Qe.return}0<An.length&&(dt=new Ot(dt,fn,null,O,Tt),Pt.push({event:dt,listeners:An}))}}if((c&7)===0){e:{if(dt=o==="mouseover"||o==="pointerover",Ot=o==="mouseout"||o==="pointerout",dt&&O!==je&&(fn=O.relatedTarget||O.fromElement)&&(yt(fn)||fn[Ge]))break e;if((Ot||dt)&&(dt=Tt.window===Tt?Tt:(dt=Tt.ownerDocument)?dt.defaultView||dt.parentWindow:window,Ot?(fn=O.relatedTarget||O.toElement,Ot=et,fn=fn?yt(fn):null,fn!==null&&(Gr=be(fn),An=fn.tag,fn!==Gr||An!==5&&An!==27&&An!==6)&&(fn=null)):(Ot=null,fn=et),Ot!==fn)){if(An=br,Nt="onMouseLeave",it="onMouseEnter",Qe="mouse",(o==="pointerout"||o==="pointerover")&&(An=hc,Nt="onPointerLeave",it="onPointerEnter",Qe="pointer"),Gr=Ot==null?dt:jt(Ot),lt=fn==null?dt:jt(fn),dt=new An(Nt,Qe+"leave",Ot,O,Tt),dt.target=Gr,dt.relatedTarget=lt,Nt=null,yt(Tt)===et&&(An=new An(it,Qe+"enter",fn,O,Tt),An.target=lt,An.relatedTarget=Gr,Nt=An),Gr=Nt,Ot&&fn)t:{for(An=Ot,it=fn,Qe=0,lt=An;lt;lt=rl(lt))Qe++;for(lt=0,Nt=it;Nt;Nt=rl(Nt))lt++;for(;0<Qe-lt;)An=rl(An),Qe--;for(;0<lt-Qe;)it=rl(it),lt--;for(;Qe--;){if(An===it||it!==null&&An===it.alternate)break t;An=rl(An),it=rl(it)}An=null}else An=null;Ot!==null&&vp(Pt,dt,Ot,An,!1),fn!==null&&Gr!==null&&vp(Pt,Gr,fn,An,!0)}}e:{if(dt=et?jt(et):window,Ot=dt.nodeName&&dt.nodeName.toLowerCase(),Ot==="select"||Ot==="input"&&dt.type==="file")var an=Cd;else if(pc(dt))if(Oa)an=fs;else{an=Id;var Zn=np}else Ot=dt.nodeName,!Ot||Ot.toLowerCase()!=="input"||dt.type!=="checkbox"&&dt.type!=="radio"?et&&Y(et.elementType)&&(an=Cd):an=Md;if(an&&(an=an(o,et))){Uu(Pt,an,O,Tt);break e}Zn&&Zn(o,dt,et),o==="focusout"&&et&&dt.type==="number"&&et.memoizedProps.value!=null&&xn(dt,"number",dt.value)}switch(Zn=et?jt(et):window,o){case"focusin":(pc(Zn)||Zn.contentEditable==="true")&&(fo=Zn,Aa=et,Vs=null);break;case"focusout":Vs=Aa=fo=null;break;case"mousedown":bl=!0;break;case"contextmenu":case"mouseup":case"dragend":bl=!1,zs(Pt,O,Tt);break;case"selectionchange":if(rp)break;case"keydown":case"keyup":zs(Pt,O,Tt)}var mn;if(Pu)e:{switch(o){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else Fo?Bu(o,O)&&(Kt="onCompositionEnd"):o==="keydown"&&O.keyCode===229&&(Kt="onCompositionStart");Kt&&(dc&&O.locale!=="ko"&&(Fo||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&Fo&&(mn=Kn()):(Jt=Tt,On="value"in Jt?Jt.value:Jt.textContent,Fo=!0)),Zn=ma(et,Kt),0<Zn.length&&(Kt=new gd(Kt,o,null,O,Tt),Pt.push({event:Kt,listeners:Zn}),mn?Kt.data=mn:(mn=ju(O),mn!==null&&(Kt.data=mn)))),(mn=xd?Ad(o,O):Rd(o,O))&&(Kt=ma(et,"onBeforeInput"),0<Kt.length&&(Zn=new gd("onBeforeInput","beforeinput",null,O,Tt),Pt.push({event:Zn,listeners:Kt}),Zn.data=mn)),jp(Pt,o,et,O,Tt)}Xh(Pt,c)})}function As(o,c,O){return{instance:o,listener:c,currentTarget:O}}function ma(o,c){for(var O=c+"Capture",I=[];o!==null;){var G=o,J=G.stateNode;G=G.tag,G!==5&&G!==26&&G!==27||J===null||(G=ut(o,O),G!=null&&I.unshift(As(o,G,J)),G=ut(o,c),G!=null&&I.push(As(o,G,J))),o=o.return}return I}function rl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function vp(o,c,O,I,G){for(var J=c._reactName,Te=[];O!==null&&O!==I;){var Ce=O,ze=Ce.alternate,et=Ce.stateNode;if(Ce=Ce.tag,ze!==null&&ze===I)break;Ce!==5&&Ce!==26&&Ce!==27||et===null||(ze=et,G?(et=ut(O,J),et!=null&&Te.unshift(As(O,et,ze))):G||(et=ut(O,J),et!=null&&Te.push(As(O,et,ze)))),O=O.return}Te.length!==0&&o.push({event:c,listeners:Te})}var Up=/\r\n?/g,Rs=/\u0000|\uFFFD/g;function Jh(o){return(typeof o=="string"?o:""+o).replace(Up,`
`).replace(Rs,"")}function Ep(o,c){return c=Jh(c),Jh(o)===c}function vu(){}function ir(o,c,O,I,G,J){switch(O){case"children":typeof I=="string"?c==="body"||c==="textarea"&&I===""||Cn(o,I):(typeof I=="number"||typeof I=="bigint")&&c!=="body"&&Cn(o,""+I);break;case"className":vn(o,"class",I);break;case"tabIndex":vn(o,"tabindex",I);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(o,O,I);break;case"style":Sr(o,I,J);break;case"data":if(c!=="object"){vn(o,"data",I);break}case"src":case"href":if(I===""&&(c!=="a"||O!=="href")){o.removeAttribute(O);break}if(I==null||typeof I=="function"||typeof I=="symbol"||typeof I=="boolean"){o.removeAttribute(O);break}I=de(""+I),o.setAttribute(O,I);break;case"action":case"formAction":if(typeof I=="function"){o.setAttribute(O,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof J=="function"&&(O==="formAction"?(c!=="input"&&ir(o,c,"name",G.name,G,null),ir(o,c,"formEncType",G.formEncType,G,null),ir(o,c,"formMethod",G.formMethod,G,null),ir(o,c,"formTarget",G.formTarget,G,null)):(ir(o,c,"encType",G.encType,G,null),ir(o,c,"method",G.method,G,null),ir(o,c,"target",G.target,G,null)));if(I==null||typeof I=="symbol"||typeof I=="boolean"){o.removeAttribute(O);break}I=de(""+I),o.setAttribute(O,I);break;case"onClick":I!=null&&(o.onclick=vu);break;case"onScroll":I!=null&&tr("scroll",o);break;case"onScrollEnd":I!=null&&tr("scrollend",o);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(l(61));if(O=I.__html,O!=null){if(G.children!=null)throw Error(l(60));o.innerHTML=O}}break;case"multiple":o.multiple=I&&typeof I!="function"&&typeof I!="symbol";break;case"muted":o.muted=I&&typeof I!="function"&&typeof I!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(I==null||typeof I=="function"||typeof I=="boolean"||typeof I=="symbol"){o.removeAttribute("xlink:href");break}O=de(""+I),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",O);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":I!=null&&typeof I!="function"&&typeof I!="symbol"?o.setAttribute(O,""+I):o.removeAttribute(O);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":I&&typeof I!="function"&&typeof I!="symbol"?o.setAttribute(O,""):o.removeAttribute(O);break;case"capture":case"download":I===!0?o.setAttribute(O,""):I!==!1&&I!=null&&typeof I!="function"&&typeof I!="symbol"?o.setAttribute(O,I):o.removeAttribute(O);break;case"cols":case"rows":case"size":case"span":I!=null&&typeof I!="function"&&typeof I!="symbol"&&!isNaN(I)&&1<=I?o.setAttribute(O,I):o.removeAttribute(O);break;case"rowSpan":case"start":I==null||typeof I=="function"||typeof I=="symbol"||isNaN(I)?o.removeAttribute(O):o.setAttribute(O,I);break;case"popover":tr("beforetoggle",o),tr("toggle",o),dr(o,"popover",I);break;case"xlinkActuate":Un(o,"http://www.w3.org/1999/xlink","xlink:actuate",I);break;case"xlinkArcrole":Un(o,"http://www.w3.org/1999/xlink","xlink:arcrole",I);break;case"xlinkRole":Un(o,"http://www.w3.org/1999/xlink","xlink:role",I);break;case"xlinkShow":Un(o,"http://www.w3.org/1999/xlink","xlink:show",I);break;case"xlinkTitle":Un(o,"http://www.w3.org/1999/xlink","xlink:title",I);break;case"xlinkType":Un(o,"http://www.w3.org/1999/xlink","xlink:type",I);break;case"xmlBase":Un(o,"http://www.w3.org/XML/1998/namespace","xml:base",I);break;case"xmlLang":Un(o,"http://www.w3.org/XML/1998/namespace","xml:lang",I);break;case"xmlSpace":Un(o,"http://www.w3.org/XML/1998/namespace","xml:space",I);break;case"is":dr(o,"is",I);break;case"innerText":case"textContent":break;default:(!(2<O.length)||O[0]!=="o"&&O[0]!=="O"||O[1]!=="n"&&O[1]!=="N")&&(O=B.get(O)||O,dr(o,O,I))}}function If(o,c,O,I,G,J){switch(O){case"style":Sr(o,I,J);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(l(61));if(O=I.__html,O!=null){if(G.children!=null)throw Error(l(60));o.innerHTML=O}}break;case"children":typeof I=="string"?Cn(o,I):(typeof I=="number"||typeof I=="bigint")&&Cn(o,""+I);break;case"onScroll":I!=null&&tr("scroll",o);break;case"onScrollEnd":I!=null&&tr("scrollend",o);break;case"onClick":I!=null&&(o.onclick=vu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yn.hasOwnProperty(O))e:{if(O[0]==="o"&&O[1]==="n"&&(G=O.endsWith("Capture"),c=O.slice(2,G?O.length-7:void 0),J=o[Be]||null,J=J!=null?J[O]:null,typeof J=="function"&&o.removeEventListener(c,J,G),typeof I=="function")){typeof J!="function"&&J!==null&&(O in o?o[O]=null:o.hasAttribute(O)&&o.removeAttribute(O)),o.addEventListener(c,I,G);break e}O in o?o[O]=I:I===!0?o.setAttribute(O,""):dr(o,O,I)}}}function pi(o,c,O){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tr("error",o),tr("load",o);var I=!1,G=!1,J;for(J in O)if(O.hasOwnProperty(J)){var Te=O[J];if(Te!=null)switch(J){case"src":I=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,c));default:ir(o,c,J,Te,O,null)}}G&&ir(o,c,"srcSet",O.srcSet,O,null),I&&ir(o,c,"src",O.src,O,null);return;case"input":tr("invalid",o);var Ce=J=Te=G=null,ze=null,et=null;for(I in O)if(O.hasOwnProperty(I)){var Tt=O[I];if(Tt!=null)switch(I){case"name":G=Tt;break;case"type":Te=Tt;break;case"checked":ze=Tt;break;case"defaultChecked":et=Tt;break;case"value":J=Tt;break;case"defaultValue":Ce=Tt;break;case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(l(137,c));break;default:ir(o,c,I,Tt,O,null)}}zn(o,J,Ce,ze,et,Te,G,!1),_t(o);return;case"select":tr("invalid",o),I=Te=J=null;for(G in O)if(O.hasOwnProperty(G)&&(Ce=O[G],Ce!=null))switch(G){case"value":J=Ce;break;case"defaultValue":Te=Ce;break;case"multiple":I=Ce;default:ir(o,c,G,Ce,O,null)}c=J,O=Te,o.multiple=!!I,c!=null?Rn(o,!!I,c,!1):O!=null&&Rn(o,!!I,O,!0);return;case"textarea":tr("invalid",o),J=G=I=null;for(Te in O)if(O.hasOwnProperty(Te)&&(Ce=O[Te],Ce!=null))switch(Te){case"value":I=Ce;break;case"defaultValue":G=Ce;break;case"children":J=Ce;break;case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(l(91));break;default:ir(o,c,Te,Ce,O,null)}fr(o,I,G,J),_t(o);return;case"option":for(ze in O)if(O.hasOwnProperty(ze)&&(I=O[ze],I!=null))switch(ze){case"selected":o.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:ir(o,c,ze,I,O,null)}return;case"dialog":tr("cancel",o),tr("close",o);break;case"iframe":case"object":tr("load",o);break;case"video":case"audio":for(I=0;I<pa.length;I++)tr(pa[I],o);break;case"image":tr("error",o),tr("load",o);break;case"details":tr("toggle",o);break;case"embed":case"source":case"link":tr("error",o),tr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in O)if(O.hasOwnProperty(et)&&(I=O[et],I!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,c));default:ir(o,c,et,I,O,null)}return;default:if(Y(c)){for(Tt in O)O.hasOwnProperty(Tt)&&(I=O[Tt],I!==void 0&&If(o,c,Tt,I,O,void 0));return}}for(Ce in O)O.hasOwnProperty(Ce)&&(I=O[Ce],I!=null&&ir(o,c,Ce,I,O,null))}function Zh(o,c,O,I){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,J=null,Te=null,Ce=null,ze=null,et=null,Tt=null;for(Ot in O){var Pt=O[Ot];if(O.hasOwnProperty(Ot)&&Pt!=null)switch(Ot){case"checked":break;case"value":break;case"defaultValue":ze=Pt;default:I.hasOwnProperty(Ot)||ir(o,c,Ot,null,I,Pt)}}for(var dt in I){var Ot=I[dt];if(Pt=O[dt],I.hasOwnProperty(dt)&&(Ot!=null||Pt!=null))switch(dt){case"type":J=Ot;break;case"name":G=Ot;break;case"checked":et=Ot;break;case"defaultChecked":Tt=Ot;break;case"value":Te=Ot;break;case"defaultValue":Ce=Ot;break;case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(l(137,c));break;default:Ot!==Pt&&ir(o,c,dt,Ot,I,Pt)}}Sn(o,Te,Ce,ze,et,Tt,J,G);return;case"select":Ot=Te=Ce=dt=null;for(J in O)if(ze=O[J],O.hasOwnProperty(J)&&ze!=null)switch(J){case"value":break;case"multiple":Ot=ze;default:I.hasOwnProperty(J)||ir(o,c,J,null,I,ze)}for(G in I)if(J=I[G],ze=O[G],I.hasOwnProperty(G)&&(J!=null||ze!=null))switch(G){case"value":dt=J;break;case"defaultValue":Ce=J;break;case"multiple":Te=J;default:J!==ze&&ir(o,c,G,J,I,ze)}c=Ce,O=Te,I=Ot,dt!=null?Rn(o,!!O,dt,!1):!!I!=!!O&&(c!=null?Rn(o,!!O,c,!0):Rn(o,!!O,O?[]:"",!1));return;case"textarea":Ot=dt=null;for(Ce in O)if(G=O[Ce],O.hasOwnProperty(Ce)&&G!=null&&!I.hasOwnProperty(Ce))switch(Ce){case"value":break;case"children":break;default:ir(o,c,Ce,null,I,G)}for(Te in I)if(G=I[Te],J=O[Te],I.hasOwnProperty(Te)&&(G!=null||J!=null))switch(Te){case"value":dt=G;break;case"defaultValue":Ot=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(l(91));break;default:G!==J&&ir(o,c,Te,G,I,J)}lr(o,dt,Ot);return;case"option":for(var fn in O)if(dt=O[fn],O.hasOwnProperty(fn)&&dt!=null&&!I.hasOwnProperty(fn))switch(fn){case"selected":o.selected=!1;break;default:ir(o,c,fn,null,I,dt)}for(ze in I)if(dt=I[ze],Ot=O[ze],I.hasOwnProperty(ze)&&dt!==Ot&&(dt!=null||Ot!=null))switch(ze){case"selected":o.selected=dt&&typeof dt!="function"&&typeof dt!="symbol";break;default:ir(o,c,ze,dt,I,Ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var An in O)dt=O[An],O.hasOwnProperty(An)&&dt!=null&&!I.hasOwnProperty(An)&&ir(o,c,An,null,I,dt);for(et in I)if(dt=I[et],Ot=O[et],I.hasOwnProperty(et)&&dt!==Ot&&(dt!=null||Ot!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(l(137,c));break;default:ir(o,c,et,dt,I,Ot)}return;default:if(Y(c)){for(var Gr in O)dt=O[Gr],O.hasOwnProperty(Gr)&&dt!==void 0&&!I.hasOwnProperty(Gr)&&If(o,c,Gr,void 0,I,dt);for(Tt in I)dt=I[Tt],Ot=O[Tt],!I.hasOwnProperty(Tt)||dt===Ot||dt===void 0&&Ot===void 0||If(o,c,Tt,dt,I,Ot);return}}for(var it in O)dt=O[it],O.hasOwnProperty(it)&&dt!=null&&!I.hasOwnProperty(it)&&ir(o,c,it,null,I,dt);for(Pt in I)dt=I[Pt],Ot=O[Pt],!I.hasOwnProperty(Pt)||dt===Ot||dt==null&&Ot==null||ir(o,c,Pt,dt,I,Ot)}var Vi=null,Qh=null;function il(o){return o.nodeType===9?o:o.ownerDocument}function Ii(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mf(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function Mi(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var ur=null;function Cs(){var o=window.event;return o&&o.type==="popstate"?o===ur?!1:(ur=o,!0):(ur=null,!1)}var Eu=typeof setTimeout=="function"?setTimeout:void 0,ed=typeof clearTimeout=="function"?clearTimeout:void 0,wu=typeof Promise=="function"?Promise:void 0,Zl=typeof queueMicrotask=="function"?queueMicrotask:typeof wu<"u"?function(o){return wu.resolve(null).then(o).catch(Fp)}:Eu;function Fp(o){setTimeout(function(){throw o})}function co(o,c){var O=c,I=0;do{var G=O.nextSibling;if(o.removeChild(O),G&&G.nodeType===8)if(O=G.data,O==="/$"){if(I===0){o.removeChild(G),mi(c);return}I--}else O!=="$"&&O!=="$?"&&O!=="$!"||I++;O=G}while(O);mi(c)}function Dn(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var O=c;switch(c=c.nextSibling,O.nodeName){case"HTML":case"HEAD":case"BODY":Dn(O),mt(O);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(O.rel.toLowerCase()==="stylesheet")continue}o.removeChild(O)}}function ks(o,c,O,I){for(;o.nodeType===1;){var G=O;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!I&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(I){if(!o[ct])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(J=o.getAttribute("rel"),J==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(J!==G.rel||o.getAttribute("href")!==(G.href==null?null:G.href)||o.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||o.getAttribute("title")!==(G.title==null?null:G.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(J=o.getAttribute("src"),(J!==(G.src==null?null:G.src)||o.getAttribute("type")!==(G.type==null?null:G.type)||o.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&J&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var J=G.name==null?null:""+G.name;if(G.type==="hidden"&&o.getAttribute("name")===J)return o}else return o;if(o=vo(o.nextSibling),o===null)break}return null}function Nr(o,c,O){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!O||(o=vo(o.nextSibling),o===null))return null;return o}function vo(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}function td(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var O=o.data;if(O==="$"||O==="$!"||O==="$?"){if(c===0)return o;c--}else O==="/$"&&c++}o=o.previousSibling}return null}function nd(o,c,O){switch(c=il(O),o){case"html":if(o=c.documentElement,!o)throw Error(l(452));return o;case"head":if(o=c.head,!o)throw Error(l(453));return o;case"body":if(o=c.body,!o)throw Error(l(454));return o;default:throw Error(l(451))}}var uo=new Map,Nf=new Set;function Eo(o){return typeof o.getRootNode=="function"?o.getRootNode():o.ownerDocument}var cs=U.d;U.d={f:wp,r:Tp,D:ba,C:Sp,L:rd,m:Ni,X:Ke,S:Hp,M:hs};function wp(){var o=cs.f(),c=hu();return o||c}function Tp(o){var c=Et(o);c!==null&&c.tag===5&&c.type==="form"?mh(c):cs.r(o)}var ga=typeof document>"u"?null:document;function us(o,c,O){var I=ga;if(I&&typeof c=="string"&&c){var G=Vt(c);G='link[rel="'+o+'"][href="'+G+'"]',typeof O=="string"&&(G+='[crossorigin="'+O+'"]'),Nf.has(G)||(Nf.add(G),o={rel:o,crossOrigin:O,href:c},I.querySelector(G)===null&&(c=I.createElement("link"),pi(c,"link",o),Ct(c),I.head.appendChild(c)))}}function ba(o){cs.D(o),us("dns-prefetch",o,null)}function Sp(o,c){cs.C(o,c),us("preconnect",o,c)}function rd(o,c,O){cs.L(o,c,O);var I=ga;if(I&&o&&c){var G='link[rel="preload"][as="'+Vt(c)+'"]';c==="image"&&O&&O.imageSrcSet?(G+='[imagesrcset="'+Vt(O.imageSrcSet)+'"]',typeof O.imageSizes=="string"&&(G+='[imagesizes="'+Vt(O.imageSizes)+'"]')):G+='[href="'+Vt(o)+'"]';var J=G;switch(c){case"style":J=ya(o);break;case"script":J=Do(o)}uo.has(J)||(o=j({rel:"preload",href:c==="image"&&O&&O.imageSrcSet?void 0:o,as:c},O),uo.set(J,o),I.querySelector(G)!==null||c==="style"&&I.querySelector(ho(J))||c==="script"&&I.querySelector(ol(J))||(c=I.createElement("link"),pi(c,"link",o),Ct(c),I.head.appendChild(c)))}}function Ni(o,c){cs.m(o,c);var O=ga;if(O&&o){var I=c&&typeof c.as=="string"?c.as:"script",G='link[rel="modulepreload"][as="'+Vt(I)+'"][href="'+Vt(o)+'"]',J=G;switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":J=Do(o)}if(!uo.has(J)&&(o=j({rel:"modulepreload",href:o},c),uo.set(J,o),O.querySelector(G)===null)){switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(O.querySelector(ol(J)))return}I=O.createElement("link"),pi(I,"link",o),Ct(I),O.head.appendChild(I)}}}function Hp(o,c,O){cs.S(o,c,O);var I=ga;if(I&&o){var G=Ut(I).hoistableStyles,J=ya(o);c=c||"default";var Te=G.get(J);if(!Te){var Ce={loading:0,preload:null};if(Te=I.querySelector(ho(J)))Ce.loading=5;else{o=j({rel:"stylesheet",href:o,"data-precedence":c},O),(O=uo.get(J))&&Tu(o,O);var ze=Te=I.createElement("link");Ct(ze),pi(ze,"link",o),ze._p=new Promise(function(et,Tt){ze.onload=et,ze.onerror=Tt}),ze.addEventListener("load",function(){Ce.loading|=1}),ze.addEventListener("error",function(){Ce.loading|=2}),Ce.loading|=4,wi(Te,c,I)}Te={type:"stylesheet",instance:Te,count:1,state:Ce},G.set(J,Te)}}}function Ke(o,c){cs.X(o,c);var O=ga;if(O&&o){var I=Ut(O).hoistableScripts,G=Do(o),J=I.get(G);J||(J=O.querySelector(ol(G)),J||(o=j({src:o,async:!0},c),(c=uo.get(G))&&sl(o,c),J=O.createElement("script"),Ct(J),pi(J,"link",o),O.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},I.set(G,J))}}function hs(o,c){cs.M(o,c);var O=ga;if(O&&o){var I=Ut(O).hoistableScripts,G=Do(o),J=I.get(G);J||(J=O.querySelector(ol(G)),J||(o=j({src:o,async:!0,type:"module"},c),(c=uo.get(G))&&sl(o,c),J=O.createElement("script"),Ct(J),pi(J,"link",o),O.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},I.set(G,J))}}function Ql(o,c,O,I){var G=(G=_e.current)?Eo(G):null;if(!G)throw Error(l(446));switch(o){case"meta":case"title":return null;case"style":return typeof O.precedence=="string"&&typeof O.href=="string"?(c=ya(O.href),O=Ut(G).hoistableStyles,I=O.get(c),I||(I={type:"style",instance:null,count:0,state:null},O.set(c,I)),I):{type:"void",instance:null,count:0,state:null};case"link":if(O.rel==="stylesheet"&&typeof O.href=="string"&&typeof O.precedence=="string"){o=ya(O.href);var J=Ut(G).hoistableStyles,Te=J.get(o);if(Te||(G=G.ownerDocument||G,Te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},J.set(o,Te),(J=G.querySelector(ho(o)))&&!J._p&&(Te.instance=J,Te.state.loading=5),uo.has(o)||(O={rel:"preload",as:"style",href:O.href,crossOrigin:O.crossOrigin,integrity:O.integrity,media:O.media,hrefLang:O.hrefLang,referrerPolicy:O.referrerPolicy},uo.set(o,O),J||id(G,o,O,Te.state))),c&&I===null)throw Error(l(528,""));return Te}if(c&&I!==null)throw Error(l(529,""));return null;case"script":return c=O.async,O=O.src,typeof O=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Do(O),O=Ut(G).hoistableScripts,I=O.get(c),I||(I={type:"script",instance:null,count:0,state:null},O.set(c,I)),I):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,o))}}function ya(o){return'href="'+Vt(o)+'"'}function ho(o){return'link[rel="stylesheet"]['+o+"]"}function Is(o){return j({},o,{"data-precedence":o.precedence,precedence:null})}function id(o,c,O,I){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?I.loading=1:(c=o.createElement("link"),I.preload=c,c.addEventListener("load",function(){return I.loading|=1}),c.addEventListener("error",function(){return I.loading|=2}),pi(c,"link",O),Ct(c),o.head.appendChild(c))}function Do(o){return'[src="'+Vt(o)+'"]'}function ol(o){return"script[async]"+o}function Lf(o,c,O){if(c.count++,c.instance===null)switch(c.type){case"style":var I=o.querySelector('style[data-href~="'+Vt(O.href)+'"]');if(I)return c.instance=I,Ct(I),I;var G=j({},O,{"data-href":O.href,"data-precedence":O.precedence,href:null,precedence:null});return I=(o.ownerDocument||o).createElement("style"),Ct(I),pi(I,"style",G),wi(I,O.precedence,o),c.instance=I;case"stylesheet":G=ya(O.href);var J=o.querySelector(ho(G));if(J)return c.state.loading|=4,c.instance=J,Ct(J),J;I=Is(O),(G=uo.get(G))&&Tu(I,G),J=(o.ownerDocument||o).createElement("link"),Ct(J);var Te=J;return Te._p=new Promise(function(Ce,ze){Te.onload=Ce,Te.onerror=ze}),pi(J,"link",I),c.state.loading|=4,wi(J,O.precedence,o),c.instance=J;case"script":return J=Do(O.src),(G=o.querySelector(ol(J)))?(c.instance=G,Ct(G),G):(I=O,(G=uo.get(J))&&(I=j({},O),sl(I,G)),o=o.ownerDocument||o,G=o.createElement("script"),Ct(G),pi(G,"link",I),o.head.appendChild(G),c.instance=G);case"void":return null;default:throw Error(l(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(I=c.instance,c.state.loading|=4,wi(I,O.precedence,o));return c.instance}function wi(o,c,O){for(var I=O.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=I.length?I[I.length-1]:null,J=G,Te=0;Te<I.length;Te++){var Ce=I[Te];if(Ce.dataset.precedence===c)J=Ce;else if(J!==G)break}J?J.parentNode.insertBefore(o,J.nextSibling):(c=O.nodeType===9?O.head:O,c.insertBefore(o,c.firstChild))}function Tu(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function sl(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var ec=null;function Df(o,c,O){if(ec===null){var I=new Map,G=ec=new Map;G.set(O,I)}else G=ec,I=G.get(O),I||(I=new Map,G.set(O,I));if(I.has(o))return I;for(I.set(o,null),O=O.getElementsByTagName(o),G=0;G<O.length;G++){var J=O[G];if(!(J[ct]||J[Me]||o==="link"&&J.getAttribute("rel")==="stylesheet")&&J.namespaceURI!=="http://www.w3.org/2000/svg"){var Te=J.getAttribute(c)||"";Te=o+Te;var Ce=I.get(Te);Ce?Ce.push(J):I.set(Te,[J])}}return I}function Pf(o,c,O){o=o.ownerDocument||o,o.head.insertBefore(O,c==="title"?o.querySelector("head > title"):null)}function Op(o,c,O){if(O===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Bf(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Ms=null;function jf(){}function Su(o,c,O){if(Ms===null)throw Error(l(475));var I=Ms;if(c.type==="stylesheet"&&(typeof O.media!="string"||matchMedia(O.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var G=ya(O.href),J=o.querySelector(ho(G));if(J){o=J._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(I.count++,I=al.bind(I),o.then(I,I)),c.state.loading|=4,c.instance=J,Ct(J);return}J=o.ownerDocument||o,O=Is(O),(G=uo.get(G))&&Tu(O,G),J=J.createElement("link"),Ct(J);var Te=J;Te._p=new Promise(function(Ce,ze){Te.onload=Ce,Te.onerror=ze}),pi(J,"link",O),c.instance=J}I.stylesheets===null&&(I.stylesheets=new Map),I.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(I.count++,c=al.bind(I),o.addEventListener("load",c),o.addEventListener("error",c))}}function Uf(){if(Ms===null)throw Error(l(475));var o=Ms;return o.stylesheets&&o.count===0&&Ns(o,o.stylesheets),0<o.count?function(c){var O=setTimeout(function(){if(o.stylesheets&&Ns(o,o.stylesheets),o.unsuspend){var I=o.unsuspend;o.unsuspend=null,I()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(O)}}:null}function al(){if(this.count--,this.count===0){if(this.stylesheets)Ns(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var ll=null;function Ns(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,ll=new Map,c.forEach(tc,o),ll=null,al.call(o))}function tc(o,c){if(!(c.state.loading&4)){var O=ll.get(o);if(O)var I=O.get(null);else{O=new Map,ll.set(o,O);for(var G=o.querySelectorAll("link[data-precedence],style[data-precedence]"),J=0;J<G.length;J++){var Te=G[J];(Te.nodeName==="LINK"||Te.getAttribute("media")!=="not all")&&(O.set(Te.dataset.precedence,Te),I=Te)}I&&O.set(null,I)}G=c.instance,Te=G.getAttribute("data-precedence"),J=O.get(Te)||I,J===I&&O.set(null,G),O.set(Te,G),this.count++,I=al.bind(this),G.addEventListener("load",I),G.addEventListener("error",I),J?J.parentNode.insertBefore(G,J.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(G,o.firstChild)),c.state.loading|=4}}var zi={$$typeof:E,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Ls(o,c,O,I,G,J,Te,Ce){this.tag=1,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pn(0),this.hiddenUpdates=pn(null),this.identifierPrefix=I,this.onUncaughtError=G,this.onCaughtError=J,this.onRecoverableError=Te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ce,this.incompleteTransitions=new Map}function Gi(o,c,O,I,G,J,Te,Ce,ze,et,Tt,Pt){return o=new Ls(o,c,O,Te,Ce,ze,et,Pt),c=1,J===!0&&(c|=24),J=zr(3,null,null,c),o.current=J,J.stateNode=o,c=Wr(),c.refCount++,o.pooledCache=c,c.refCount++,J.memoizedState={element:I,isDehydrated:O,cache:c},Ch(J),o}function Ff(o){return o?(o=ka,o):ka}function nc(o,c,O,I,G,J){G=Ff(G),I.context===null?I.context=G:I.pendingContext=G,I=ws(c),I.payload={element:O},J=J===void 0?null:J,J!==null&&(I.callback=J),O=Ts(o,I,c),O!==null&&(Qr(O,o,c),no(O,o,c))}function od(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var O=o.retryLane;o.retryLane=O!==0&&O<c?O:c}}function Qn(o,c){od(o,c),(o=o.alternate)&&od(o,c)}function Ds(o){if(o.tag===13){var c=Ho(o,67108864);c!==null&&Qr(c,o,67108864),Qn(o,67108864)}}var Li=!0;function Rt(o,c,O,I){var G=D.T;D.T=null;var J=U.p;try{U.p=2,Vf(o,c,O,I)}finally{U.p=J,D.T=G}}function Hf(o,c,O,I){var G=D.T;D.T=null;var J=U.p;try{U.p=8,Vf(o,c,O,I)}finally{U.p=J,D.T=G}}function Vf(o,c,O,I){if(Li){var G=zf(I);if(G===null)Jl(o,c,I,sd,O),ad(o,I);else if(xp(G,o,c,O,I))I.stopPropagation();else if(ad(o,I),c&4&&-1<ul.indexOf(o)){for(;G!==null;){var J=Et(G);if(J!==null)switch(J.tag){case 3:if(J=J.stateNode,J.current.memoizedState.isDehydrated){var Te=ve(J.pendingLanes);if(Te!==0){var Ce=J;for(Ce.pendingLanes|=2,Ce.entangledLanes|=2;Te;){var ze=1<<31-Lt(Te);Ce.entanglements[1]|=ze,Te&=~ze}Ci(J),(Mr&6)===0&&(Ur=De()+500,ki(0))}}break;case 13:Ce=Ho(J,2),Ce!==null&&Qr(Ce,J,2),hu(),Qn(J,2)}if(J=zf(I),J===null&&Jl(o,c,I,sd,O),J===G)break;G=J}G!==null&&I.stopPropagation()}else Jl(o,c,I,null,O)}}function zf(o){return o=Ve(o),Ou(o)}var sd=null;function Ou(o){if(sd=null,o=yt(o),o!==null){var c=be(o);if(c===null)o=null;else{var O=c.tag;if(O===13){if(o=H(c),o!==null)return o;o=null}else if(O===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return sd=o,null}function xu(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case tt:return 2;case at:return 8;case He:case ot:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var Wi=!1,Po=null,qn=null,Ps=null,cl=new Map,Bo=new Map,Bs=[],ul="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ad(o,c){switch(o){case"focusin":case"focusout":Po=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":cl.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bo.delete(c.pointerId)}}function hl(o,c,O,I,G,J){return o===null||o.nativeEvent!==J?(o={blockedOn:c,domEventName:O,eventSystemFlags:I,nativeEvent:J,targetContainers:[G]},c!==null&&(c=Et(c),c!==null&&Ds(c)),o):(o.eventSystemFlags|=I,c=o.targetContainers,G!==null&&c.indexOf(G)===-1&&c.push(G),o)}function xp(o,c,O,I,G){switch(c){case"focusin":return Po=hl(Po,o,c,O,I,G),!0;case"dragenter":return qn=hl(qn,o,c,O,I,G),!0;case"mouseover":return Ps=hl(Ps,o,c,O,I,G),!0;case"pointerover":var J=G.pointerId;return cl.set(J,hl(cl.get(J)||null,o,c,O,I,G)),!0;case"gotpointercapture":return J=G.pointerId,Bo.set(J,hl(Bo.get(J)||null,o,c,O,I,G)),!0}return!1}function ld(o){var c=yt(o.target);if(c!==null){var O=be(c);if(O!==null){if(c=O.tag,c===13){if(c=H(O),c!==null){o.blockedOn=c,Se(o.priority,function(){if(O.tag===13){var I=oi(),G=Ho(O,I);G!==null&&Qr(G,O,I),Qn(O,I)}});return}}else if(c===3&&O.stateNode.current.memoizedState.isDehydrated){o.blockedOn=O.tag===3?O.stateNode.containerInfo:null;return}}}o.blockedOn=null}function rc(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var O=zf(o.nativeEvent);if(O===null){O=o.nativeEvent;var I=new O.constructor(O.type,O);je=I,O.target.dispatchEvent(I),je=null}else return c=Et(O),c!==null&&Ds(c),o.blockedOn=O,!1;c.shift()}return!0}function cd(o,c,O){rc(o)&&O.delete(c)}function ic(){Wi=!1,Po!==null&&rc(Po)&&(Po=null),qn!==null&&rc(qn)&&(qn=null),Ps!==null&&rc(Ps)&&(Ps=null),cl.forEach(cd),Bo.forEach(cd)}function ud(o,c){o.blockedOn===c&&(o.blockedOn=null,Wi||(Wi=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ic)))}var Au=null;function Ap(o){Au!==o&&(Au=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Au===o&&(Au=null);for(var c=0;c<o.length;c+=3){var O=o[c],I=o[c+1],G=o[c+2];if(typeof I!="function"){if(Ou(I||O)===null)continue;break}var J=Et(O);J!==null&&(o.splice(c,3),c-=3,zc(J,{pending:!0,data:G,method:O.method,action:I},I,G))}}))}function mi(o){function c(ze){return ud(ze,o)}Po!==null&&ud(Po,o),qn!==null&&ud(qn,o),Ps!==null&&ud(Ps,o),cl.forEach(c),Bo.forEach(c);for(var O=0;O<Bs.length;O++){var I=Bs[O];I.blockedOn===o&&(I.blockedOn=null)}for(;0<Bs.length&&(O=Bs[0],O.blockedOn===null);)ld(O),O.blockedOn===null&&Bs.shift();if(O=(o.ownerDocument||o).$$reactFormReplay,O!=null)for(I=0;I<O.length;I+=3){var G=O[I],J=O[I+1],Te=G[Be]||null;if(typeof J=="function")Te||Ap(O);else if(Te){var Ce=null;if(J&&J.hasAttribute("formAction")){if(G=J,Te=J[Be]||null)Ce=Te.formAction;else if(Ou(G)!==null)continue}else Ce=Te.action;typeof Ce=="function"?O[I+1]=Ce:(O.splice(I,3),I-=3),Ap(O)}}}function Ru(o){this._internalRoot=o}_a.prototype.render=Ru.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(l(409));var O=c.current,I=oi();nc(O,I,o,c,null,null)},_a.prototype.unmount=Ru.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;o.tag===0&&Os(),nc(o.current,2,null,o,null,null),hu(),c[Ge]=null}};function _a(o){this._internalRoot=o}_a.prototype.unstable_scheduleHydration=function(o){if(o){var c=pe();o={blockedOn:null,target:o,priority:c};for(var O=0;O<Bs.length&&c!==0&&c<Bs[O].priority;O++);Bs.splice(O,0,o),O===0&&ld(o)}};var Cu=r.version;if(Cu!=="19.0.0")throw Error(l(527,Cu,"19.0.0"));U.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(l(188)):(o=Object.keys(o).join(","),Error(l(268,o)));return o=L(c),o=o!==null?F(o):null,o=o===null?null:o.stateNode,o};var Rp={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:D,findFiberByHostInstance:yt,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{Oe=ku.inject(Rp),Le=ku}catch{}}return reactDomClient_production.createRoot=function(o,c){if(!w(o))throw Error(l(299));var O=!1,I="",G=Jo,J=Oi,Te=ht,Ce=null;return c!=null&&(c.unstable_strictMode===!0&&(O=!0),c.identifierPrefix!==void 0&&(I=c.identifierPrefix),c.onUncaughtError!==void 0&&(G=c.onUncaughtError),c.onCaughtError!==void 0&&(J=c.onCaughtError),c.onRecoverableError!==void 0&&(Te=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Ce=c.unstable_transitionCallbacks)),c=Gi(o,1,!1,null,null,O,I,G,J,Te,Ce,null),o[Ge]=c.current,Qt(o.nodeType===8?o.parentNode:o),new Ru(c)},reactDomClient_production.hydrateRoot=function(o,c,O){if(!w(o))throw Error(l(299));var I=!1,G="",J=Jo,Te=Oi,Ce=ht,ze=null,et=null;return O!=null&&(O.unstable_strictMode===!0&&(I=!0),O.identifierPrefix!==void 0&&(G=O.identifierPrefix),O.onUncaughtError!==void 0&&(J=O.onUncaughtError),O.onCaughtError!==void 0&&(Te=O.onCaughtError),O.onRecoverableError!==void 0&&(Ce=O.onRecoverableError),O.unstable_transitionCallbacks!==void 0&&(ze=O.unstable_transitionCallbacks),O.formState!==void 0&&(et=O.formState)),c=Gi(o,1,!0,c,O??null,I,G,J,Te,Ce,ze,et),c.context=Ff(null),O=c.current,I=oi(),G=ws(I),G.callback=null,Ts(O,G,I),c.current.lanes=I,bn(c,I),Ci(c),o[Ge]=c.current,Qt(o),new _a(c)},reactDomClient_production.version="19.0.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var dist={},hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.parse=f,dist.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,l=/^[\u0020-\u003A\u003D-\u007E]*$/,w=Object.prototype.toString,d=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function f(S,E){const h=new d,b=S.length;if(b<2)return h;const m=(E==null?void 0:E.decode)||$;let p=0;do{const _=S.indexOf("=",p);if(_===-1)break;const y=S.indexOf(";",p),x=y===-1?b:y;if(_>x){p=S.lastIndexOf(";",_-1)+1;continue}const A=a(S,p,_),R=u(S,_,A),C=S.slice(A,R);if(h[C]===void 0){let k=a(S,_+1,x),D=u(S,x,k);const j=m(S.slice(k,D));h[C]=j}p=x+1}while(p<b);return h}function a(S,E,h){do{const b=S.charCodeAt(E);if(b!==32&&b!==9)return E}while(++E<h);return h}function u(S,E,h){for(;E>h;){const b=S.charCodeAt(--E);if(b!==32&&b!==9)return E+1}return h}function g(S,E,h){const b=(h==null?void 0:h.encode)||encodeURIComponent;if(!i.test(S))throw new TypeError(`argument name is invalid: ${S}`);const m=b(E);if(!r.test(m))throw new TypeError(`argument val is invalid: ${E}`);let p=S+"="+m;if(!h)return p;if(h.maxAge!==void 0){if(!Number.isInteger(h.maxAge))throw new TypeError(`option maxAge is invalid: ${h.maxAge}`);p+="; Max-Age="+h.maxAge}if(h.domain){if(!n.test(h.domain))throw new TypeError(`option domain is invalid: ${h.domain}`);p+="; Domain="+h.domain}if(h.path){if(!l.test(h.path))throw new TypeError(`option path is invalid: ${h.path}`);p+="; Path="+h.path}if(h.expires){if(!v(h.expires)||!Number.isFinite(h.expires.valueOf()))throw new TypeError(`option expires is invalid: ${h.expires}`);p+="; Expires="+h.expires.toUTCString()}if(h.httpOnly&&(p+="; HttpOnly"),h.secure&&(p+="; Secure"),h.partitioned&&(p+="; Partitioned"),h.priority)switch(typeof h.priority=="string"?h.priority.toLowerCase():void 0){case"low":p+="; Priority=Low";break;case"medium":p+="; Priority=Medium";break;case"high":p+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${h.priority}`)}if(h.sameSite)switch(typeof h.sameSite=="string"?h.sameSite.toLowerCase():h.sameSite){case!0:case"strict":p+="; SameSite=Strict";break;case"lax":p+="; SameSite=Lax";break;case"none":p+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${h.sameSite}`)}return p}function $(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function v(S){return w.call(S)==="[object Date]"}return dist}requireDist();var PopStateEventType="popstate";function createBrowserHistory(i={}){function r(l,w){let{pathname:d,search:f,hash:a}=l.location;return createLocation("",{pathname:d,search:f,hash:a},w.state&&w.state.usr||null,w.state&&w.state.key||"default")}function n(l,w){return typeof w=="string"?w:createPath(w)}return getUrlBasedHistory(r,n,null,i)}function invariant(i,r){if(i===!1||i===null||typeof i>"u")throw new Error(r)}function warning(i,r){if(!i){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(i,r){return{usr:i.state,key:i.key,idx:r}}function createLocation(i,r,n=null,l){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof r=="string"?parsePath(r):r,state:n,key:r&&r.key||l||createKey()}}function createPath({pathname:i="/",search:r="",hash:n=""}){return r&&r!=="?"&&(i+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function parsePath(i){let r={};if(i){let n=i.indexOf("#");n>=0&&(r.hash=i.substring(n),i=i.substring(0,n));let l=i.indexOf("?");l>=0&&(r.search=i.substring(l),i=i.substring(0,l)),i&&(r.pathname=i)}return r}function getUrlBasedHistory(i,r,n,l={}){let{window:w=document.defaultView,v5Compat:d=!1}=l,f=w.history,a="POP",u=null,g=$();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function $(){return(f.state||{idx:null}).idx}function v(){a="POP";let m=$(),p=m==null?null:m-g;g=m,u&&u({action:a,location:b.location,delta:p})}function S(m,p){a="PUSH";let _=createLocation(b.location,m,p);g=$()+1;let y=getHistoryState(_,g),x=b.createHref(_);try{f.pushState(y,"",x)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;w.location.assign(x)}d&&u&&u({action:a,location:b.location,delta:1})}function E(m,p){a="REPLACE";let _=createLocation(b.location,m,p);g=$();let y=getHistoryState(_,g),x=b.createHref(_);f.replaceState(y,"",x),d&&u&&u({action:a,location:b.location,delta:0})}function h(m){let p=w.location.origin!=="null"?w.location.origin:w.location.href,_=typeof m=="string"?m:createPath(m);return _=_.replace(/ $/,"%20"),invariant(p,`No window.location.(origin|href) available to create URL for href: ${_}`),new URL(_,p)}let b={get action(){return a},get location(){return i(w,f)},listen(m){if(u)throw new Error("A history only accepts one active listener");return w.addEventListener(PopStateEventType,v),u=m,()=>{w.removeEventListener(PopStateEventType,v),u=null}},createHref(m){return r(w,m)},createURL:h,encodeLocation(m){let p=h(m);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:S,replace:E,go(m){return f.go(m)}};return b}function matchRoutes(i,r,n="/"){return matchRoutesImpl(i,r,n,!1)}function matchRoutesImpl(i,r,n,l){let w=typeof r=="string"?parsePath(r):r,d=stripBasename(w.pathname||"/",n);if(d==null)return null;let f=flattenRoutes(i);rankRouteBranches(f);let a=null;for(let u=0;a==null&&u<f.length;++u){let g=decodePath(d);a=matchRouteBranch(f[u],g,l)}return a}function flattenRoutes(i,r=[],n=[],l=""){let w=(d,f,a)=>{let u={relativePath:a===void 0?d.path||"":a,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};u.relativePath.startsWith("/")&&(invariant(u.relativePath.startsWith(l),`Absolute route path "${u.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(l.length));let g=joinPaths([l,u.relativePath]),$=n.concat(u);d.children&&d.children.length>0&&(invariant(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),flattenRoutes(d.children,r,$,g)),!(d.path==null&&!d.index)&&r.push({path:g,score:computeScore(g,d.index),routesMeta:$})};return i.forEach((d,f)=>{var a;if(d.path===""||!((a=d.path)!=null&&a.includes("?")))w(d,f);else for(let u of explodeOptionalSegments(d.path))w(d,f,u)}),r}function explodeOptionalSegments(i){let r=i.split("/");if(r.length===0)return[];let[n,...l]=r,w=n.endsWith("?"),d=n.replace(/\?$/,"");if(l.length===0)return w?[d,""]:[d];let f=explodeOptionalSegments(l.join("/")),a=[];return a.push(...f.map(u=>u===""?d:[d,u].join("/"))),w&&a.push(...f),a.map(u=>i.startsWith("/")&&u===""?"/":u)}function rankRouteBranches(i){i.sort((r,n)=>r.score!==n.score?n.score-r.score:compareIndexes(r.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=i=>i==="*";function computeScore(i,r){let n=i.split("/"),l=n.length;return n.some(isSplat)&&(l+=splatPenalty),r&&(l+=indexRouteValue),n.filter(w=>!isSplat(w)).reduce((w,d)=>w+(paramRe.test(d)?dynamicSegmentValue:d===""?emptySegmentValue:staticSegmentValue),l)}function compareIndexes(i,r){return i.length===r.length&&i.slice(0,-1).every((l,w)=>l===r[w])?i[i.length-1]-r[r.length-1]:0}function matchRouteBranch(i,r,n=!1){let{routesMeta:l}=i,w={},d="/",f=[];for(let a=0;a<l.length;++a){let u=l[a],g=a===l.length-1,$=d==="/"?r:r.slice(d.length)||"/",v=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:g},$),S=u.route;if(!v&&g&&n&&!l[l.length-1].route.index&&(v=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},$)),!v)return null;Object.assign(w,v.params),f.push({params:w,pathname:joinPaths([d,v.pathname]),pathnameBase:normalizePathname(joinPaths([d,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(d=joinPaths([d,v.pathnameBase]))}return f}function matchPath(i,r){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,l]=compilePath(i.path,i.caseSensitive,i.end),w=r.match(n);if(!w)return null;let d=w[0],f=d.replace(/(.)\/+$/,"$1"),a=w.slice(1);return{params:l.reduce((g,{paramName:$,isOptional:v},S)=>{if($==="*"){let h=a[S]||"";f=d.slice(0,d.length-h.length).replace(/(.)\/+$/,"$1")}const E=a[S];return v&&!E?g[$]=void 0:g[$]=(E||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:f,pattern:i}}function compilePath(i,r=!1,n=!0){warning(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let l=[],w="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,a,u)=>(l.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(l.push({paramName:"*"}),w+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?w+="\\/*$":i!==""&&i!=="/"&&(w+="(?:(?=\\/|$))"),[new RegExp(w,r?void 0:"i"),l]}function decodePath(i){try{return i.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return warning(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),i}}function stripBasename(i,r){if(r==="/")return i;if(!i.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,l=i.charAt(n);return l&&l!=="/"?null:i.slice(n)||"/"}function resolvePath(i,r="/"){let{pathname:n,search:l="",hash:w=""}=typeof i=="string"?parsePath(i):i;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,r):r,search:normalizeSearch(l),hash:normalizeHash(w)}}function resolvePathname(i,r){let n=r.replace(/\/+$/,"").split("/");return i.split("/").forEach(w=>{w===".."?n.length>1&&n.pop():w!=="."&&n.push(w)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(i,r,n,l){return`Cannot include a '${i}' character in a manually specified \`to.${r}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(i){return i.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function getResolveToMatches(i){let r=getPathContributingMatches(i);return r.map((n,l)=>l===r.length-1?n.pathname:n.pathnameBase)}function resolveTo(i,r,n,l=!1){let w;typeof i=="string"?w=parsePath(i):(w={...i},invariant(!w.pathname||!w.pathname.includes("?"),getInvalidPathError("?","pathname","search",w)),invariant(!w.pathname||!w.pathname.includes("#"),getInvalidPathError("#","pathname","hash",w)),invariant(!w.search||!w.search.includes("#"),getInvalidPathError("#","search","hash",w)));let d=i===""||w.pathname==="",f=d?"/":w.pathname,a;if(f==null)a=n;else{let v=r.length-1;if(!l&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),v-=1;w.pathname=S.join("/")}a=v>=0?r[v]:"/"}let u=resolvePath(w,a),g=f&&f!=="/"&&f.endsWith("/"),$=(d||f===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(g||$)&&(u.pathname+="/"),u}var joinPaths=i=>i.join("/").replace(/\/\/+/g,"/"),normalizePathname=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,normalizeHash=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function isRouteErrorResponse(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(i,{relative:r}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:l}=reactExports.useContext(NavigationContext),{hash:w,pathname:d,search:f}=useResolvedPath(i,{relative:r}),a=d;return n!=="/"&&(a=d==="/"?n:joinPaths([n,d])),l.createHref({pathname:a,search:f,hash:w})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(i){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(i)}function useNavigate(){let{isDataRoute:i}=reactExports.useContext(RouteContext);return i?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let i=reactExports.useContext(DataRouterContext),{basename:r,navigator:n}=reactExports.useContext(NavigationContext),{matches:l}=reactExports.useContext(RouteContext),{pathname:w}=useLocation(),d=JSON.stringify(getResolveToMatches(l)),f=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{f.current=!0}),reactExports.useCallback((u,g={})=>{if(warning(f.current,navigateEffectWarning),!f.current)return;if(typeof u=="number"){n.go(u);return}let $=resolveTo(u,JSON.parse(d),w,g.relative==="path");i==null&&r!=="/"&&($.pathname=$.pathname==="/"?r:joinPaths([r,$.pathname])),(g.replace?n.replace:n.push)($,g.state,g)},[r,n,d,w,i])}reactExports.createContext(null);function useParams(){let{matches:i}=reactExports.useContext(RouteContext),r=i[i.length-1];return r?r.params:{}}function useResolvedPath(i,{relative:r}={}){let{matches:n}=reactExports.useContext(RouteContext),{pathname:l}=useLocation(),w=JSON.stringify(getResolveToMatches(n));return reactExports.useMemo(()=>resolveTo(i,JSON.parse(w),l,r==="path"),[i,w,l,r])}function useRoutes(i,r){return useRoutesImpl(i,r)}function useRoutesImpl(i,r,n,l){var _;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:w,static:d}=reactExports.useContext(NavigationContext),{matches:f}=reactExports.useContext(RouteContext),a=f[f.length-1],u=a?a.params:{},g=a?a.pathname:"/",$=a?a.pathnameBase:"/",v=a&&a.route;{let y=v&&v.path||"";warningOnce(g,!v||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let S=useLocation(),E;if(r){let y=typeof r=="string"?parsePath(r):r;invariant($==="/"||((_=y.pathname)==null?void 0:_.startsWith($)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${$}" but pathname "${y.pathname}" was given in the \`location\` prop.`),E=y}else E=S;let h=E.pathname||"/",b=h;if($!=="/"){let y=$.replace(/^\//,"").split("/");b="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=!d&&n&&n.matches&&n.matches.length>0?n.matches:matchRoutes(i,{pathname:b});warning(v||m!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),warning(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let p=_renderMatches(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},u,y.params),pathname:joinPaths([$,w.encodeLocation?w.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?$:joinPaths([$,w.encodeLocation?w.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),f,n,l);return r&&p?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},p):p}function DefaultErrorComponent(){let i=useRouteError(),r=isRouteErrorResponse(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,l="rgba(200,200,200, 0.5)",w={padding:"0.5rem",backgroundColor:l},d={padding:"2px 4px",backgroundColor:l},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:d},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:d},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},r),n?reactExports.createElement("pre",{style:w},n):null,f)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,r){return r.location!==i.location||r.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:r.error,location:r.location,revalidation:i.revalidation||r.revalidation}}componentDidCatch(i,r){console.error("React Router caught the following error during render",i,r)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:i,match:r,children:n}){let l=reactExports.useContext(DataRouterContext);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),reactExports.createElement(RouteContext.Provider,{value:i},n)}function _renderMatches(i,r=[],n=null,l=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(r.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let w=i,d=n==null?void 0:n.errors;if(d!=null){let u=w.findIndex(g=>g.route.id&&(d==null?void 0:d[g.route.id])!==void 0);invariant(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),w=w.slice(0,Math.min(w.length,u+1))}let f=!1,a=-1;if(n)for(let u=0;u<w.length;u++){let g=w[u];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(a=u),g.route.id){let{loaderData:$,errors:v}=n,S=g.route.loader&&!$.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||S){f=!0,a>=0?w=w.slice(0,a+1):w=[w[0]];break}}}return w.reduceRight((u,g,$)=>{let v,S=!1,E=null,h=null;n&&(v=d&&g.route.id?d[g.route.id]:void 0,E=g.route.errorElement||defaultErrorElement,f&&(a<0&&$===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,h=null):a===$&&(S=!0,h=g.route.hydrateFallbackElement||null)));let b=r.concat(w.slice(0,$+1)),m=()=>{let p;return v?p=E:S?p=h:g.route.Component?p=reactExports.createElement(g.route.Component,null):g.route.element?p=g.route.element:p=u,reactExports.createElement(RenderedRoute,{match:g,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:p})};return n&&(g.route.ErrorBoundary||g.route.errorElement||$===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:E,error:v,children:m(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):m()},null)}function getDataRouterConsoleError(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(i){let r=reactExports.useContext(DataRouterContext);return invariant(r,getDataRouterConsoleError(i)),r}function useDataRouterState(i){let r=reactExports.useContext(DataRouterStateContext);return invariant(r,getDataRouterConsoleError(i)),r}function useRouteContext(i){let r=reactExports.useContext(RouteContext);return invariant(r,getDataRouterConsoleError(i)),r}function useCurrentRouteId(i){let r=useRouteContext(i),n=r.matches[r.matches.length-1];return invariant(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var l;let i=reactExports.useContext(RouteErrorContext),r=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return i!==void 0?i:(l=r.errors)==null?void 0:l[n]}function useNavigateStable(){let{router:i}=useDataRouterContext("useNavigate"),r=useCurrentRouteId("useNavigate"),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{n.current=!0}),reactExports.useCallback(async(w,d={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof w=="number"?i.navigate(w):await i.navigate(w,{fromRouteId:r,...d}))},[i,r])}var alreadyWarned={};function warningOnce(i,r,n){!r&&!alreadyWarned[i]&&(alreadyWarned[i]=!0,warning(!1,n))}reactExports.memo(DataRoutes);function DataRoutes({routes:i,future:r,state:n}){return useRoutesImpl(i,void 0,n,r)}function Route(i){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:i="/",children:r=null,location:n,navigationType:l="POP",navigator:w,static:d=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),a=reactExports.useMemo(()=>({basename:f,navigator:w,static:d,future:{}}),[f,w,d]);typeof n=="string"&&(n=parsePath(n));let{pathname:u="/",search:g="",hash:$="",state:v=null,key:S="default"}=n,E=reactExports.useMemo(()=>{let h=stripBasename(u,f);return h==null?null:{location:{pathname:h,search:g,hash:$,state:v,key:S},navigationType:l}},[f,u,g,$,v,S,l]);return warning(E!=null,`<Router basename="${f}"> is not able to match the URL "${u}${g}${$}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:reactExports.createElement(NavigationContext.Provider,{value:a},reactExports.createElement(LocationContext.Provider,{children:r,value:E}))}function Routes({children:i,location:r}){return useRoutes(createRoutesFromChildren(i),r)}function createRoutesFromChildren(i,r=[]){let n=[];return reactExports.Children.forEach(i,(l,w)=>{if(!reactExports.isValidElement(l))return;let d=[...r,w];if(l.type===reactExports.Fragment){n.push.apply(n,createRoutesFromChildren(l.props.children,d));return}invariant(l.type===Route,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!l.props.index||!l.props.children,"An index route cannot have child routes.");let f={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(f.children=createRoutesFromChildren(l.props.children,d)),n.push(f)}),n}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(i){return i!=null&&typeof i.tagName=="string"}function isButtonElement(i){return isHtmlElement(i)&&i.tagName.toLowerCase()==="button"}function isFormElement(i){return isHtmlElement(i)&&i.tagName.toLowerCase()==="form"}function isInputElement(i){return isHtmlElement(i)&&i.tagName.toLowerCase()==="input"}function isModifiedEvent(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function shouldProcessLinkClick(i,r){return i.button===0&&(!r||r==="_self")&&!isModifiedEvent(i)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(i){return i!=null&&!supportedFormEncTypes.has(i)?(warning(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):i}function getFormSubmissionInfo(i,r){let n,l,w,d,f;if(isFormElement(i)){let a=i.getAttribute("action");l=a?stripBasename(a,r):null,n=i.getAttribute("method")||defaultMethod,w=getFormEncType(i.getAttribute("enctype"))||defaultEncType,d=new FormData(i)}else if(isButtonElement(i)||isInputElement(i)&&(i.type==="submit"||i.type==="image")){let a=i.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=i.getAttribute("formaction")||a.getAttribute("action");if(l=u?stripBasename(u,r):null,n=i.getAttribute("formmethod")||a.getAttribute("method")||defaultMethod,w=getFormEncType(i.getAttribute("formenctype"))||getFormEncType(a.getAttribute("enctype"))||defaultEncType,d=new FormData(a,i),!isFormDataSubmitterSupported()){let{name:g,type:$,value:v}=i;if($==="image"){let S=g?`${g}.`:"";d.append(`${S}x`,"0"),d.append(`${S}y`,"0")}else g&&d.append(g,v)}}else{if(isHtmlElement(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,l=null,w=defaultEncType,f=i}return d&&w==="text/plain"&&(f=d,d=void 0),{action:l,method:n.toLowerCase(),encType:w,formData:d,body:f}}function invariant2(i,r){if(i===!1||i===null||typeof i>"u")throw new Error(r)}async function loadRouteModule(i,r){if(i.id in r)return r[i.id];try{let n=await import(i.module);return r[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function getKeyedPrefetchLinks(i,r,n){let l=await Promise.all(i.map(async w=>{let d=r.routes[w.route.id];if(d){let f=await loadRouteModule(d,n);return f.links?f.links():[]}return[]}));return dedupeLinkDescriptors(l.flat(1).filter(isHtmlLinkDescriptor).filter(w=>w.rel==="stylesheet"||w.rel==="preload").map(w=>w.rel==="stylesheet"?{...w,rel:"prefetch",as:"style"}:{...w,rel:"prefetch"}))}function getNewMatchesForLinks(i,r,n,l,w,d){let f=(u,g)=>n[g]?u.route.id!==n[g].route.id:!0,a=(u,g)=>{var $;return n[g].pathname!==u.pathname||(($=n[g].route.path)==null?void 0:$.endsWith("*"))&&n[g].params["*"]!==u.params["*"]};return d==="assets"?r.filter((u,g)=>f(u,g)||a(u,g)):d==="data"?r.filter((u,g)=>{var v;let $=l.routes[u.route.id];if(!$||!$.hasLoader)return!1;if(f(u,g)||a(u,g))return!0;if(u.route.shouldRevalidate){let S=u.route.shouldRevalidate({currentUrl:new URL(w.pathname+w.search+w.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(i,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function getModuleLinkHrefs(i,r,{includeHydrateFallback:n}={}){return dedupeHrefs(i.map(l=>{let w=r.routes[l.route.id];if(!w)return[];let d=[w.module];return w.clientActionModule&&(d=d.concat(w.clientActionModule)),w.clientLoaderModule&&(d=d.concat(w.clientLoaderModule)),n&&w.hydrateFallbackModule&&(d=d.concat(w.hydrateFallbackModule)),w.imports&&(d=d.concat(w.imports)),d}).flat(1))}function dedupeHrefs(i){return[...new Set(i)]}function sortKeys(i){let r={},n=Object.keys(i).sort();for(let l of n)r[l]=i[l];return r}function dedupeLinkDescriptors(i,r){let n=new Set;return new Set(r),i.reduce((l,w)=>{let d=JSON.stringify(sortKeys(w));return n.has(d)||(n.add(d),l.push({key:d,link:w})),l},[])}var NO_BODY_STATUS_CODES=new Set([100,101,204,205]);function singleFetchUrl(i,r){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":r&&stripBasename(n.pathname,r)==="/"?n.pathname=`${r.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function useDataRouterContext2(){let i=reactExports.useContext(DataRouterContext);return invariant2(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function useDataRouterStateContext(){let i=reactExports.useContext(DataRouterStateContext);return invariant2(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let i=reactExports.useContext(FrameworkContext);return invariant2(i,"You must render this element inside a <HydratedRouter> element"),i}function usePrefetchBehavior(i,r){let n=reactExports.useContext(FrameworkContext),[l,w]=reactExports.useState(!1),[d,f]=reactExports.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:g,onMouseLeave:$,onTouchStart:v}=r,S=reactExports.useRef(null);reactExports.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let b=p=>{p.forEach(_=>{f(_.isIntersecting)})},m=new IntersectionObserver(b,{threshold:.5});return S.current&&m.observe(S.current),()=>{m.disconnect()}}},[i]),reactExports.useEffect(()=>{if(l){let b=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(b)}}},[l]);let E=()=>{w(!0)},h=()=>{w(!1),f(!1)};return n?i!=="intent"?[d,S,{}]:[d,S,{onFocus:composeEventHandlers(a,E),onBlur:composeEventHandlers(u,h),onMouseEnter:composeEventHandlers(g,E),onMouseLeave:composeEventHandlers($,h),onTouchStart:composeEventHandlers(v,E)}]:[!1,S,{}]}function composeEventHandlers(i,r){return n=>{i&&i(n),n.defaultPrevented||r(n)}}function PrefetchPageLinks({page:i,...r}){let{router:n}=useDataRouterContext2(),l=reactExports.useMemo(()=>matchRoutes(n.routes,i,n.basename),[n.routes,i,n.basename]);return l?reactExports.createElement(PrefetchPageLinksImpl,{page:i,matches:l,...r}):null}function useKeyedPrefetchLinks(i){let{manifest:r,routeModules:n}=useFrameworkContext(),[l,w]=reactExports.useState([]);return reactExports.useEffect(()=>{let d=!1;return getKeyedPrefetchLinks(i,r,n).then(f=>{d||w(f)}),()=>{d=!0}},[i,r,n]),l}function PrefetchPageLinksImpl({page:i,matches:r,...n}){let l=useLocation(),{manifest:w,routeModules:d}=useFrameworkContext(),{basename:f}=useDataRouterContext2(),{loaderData:a,matches:u}=useDataRouterStateContext(),g=reactExports.useMemo(()=>getNewMatchesForLinks(i,r,u,w,l,"data"),[i,r,u,w,l]),$=reactExports.useMemo(()=>getNewMatchesForLinks(i,r,u,w,l,"assets"),[i,r,u,w,l]),v=reactExports.useMemo(()=>{if(i===l.pathname+l.search+l.hash)return[];let h=new Set,b=!1;if(r.forEach(p=>{var y;let _=w.routes[p.route.id];!_||!_.hasLoader||(!g.some(x=>x.route.id===p.route.id)&&p.route.id in a&&((y=d[p.route.id])!=null&&y.shouldRevalidate)||_.hasClientLoader?b=!0:h.add(p.route.id))}),h.size===0)return[];let m=singleFetchUrl(i,f);return b&&h.size>0&&m.searchParams.set("_routes",r.filter(p=>h.has(p.route.id)).map(p=>p.route.id).join(",")),[m.pathname+m.search]},[f,a,l,w,g,r,i,d]),S=reactExports.useMemo(()=>getModuleLinkHrefs($,w),[$,w]),E=useKeyedPrefetchLinks($);return reactExports.createElement(reactExports.Fragment,null,v.map(h=>reactExports.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),S.map(h=>reactExports.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),E.map(({key:h,link:b})=>reactExports.createElement("link",{key:h,...b})))}function mergeRefs(...i){return r=>{i.forEach(n=>{typeof n=="function"?n(r):n!=null&&(n.current=r)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.5.3")}catch{}function BrowserRouter({basename:i,children:r,window:n}){let l=reactExports.useRef();l.current==null&&(l.current=createBrowserHistory({window:n,v5Compat:!0}));let w=l.current,[d,f]=reactExports.useState({action:w.action,location:w.location}),a=reactExports.useCallback(u=>{reactExports.startTransition(()=>f(u))},[f]);return reactExports.useLayoutEffect(()=>w.listen(a),[w,a]),reactExports.createElement(Router,{basename:i,children:r,location:d.location,navigationType:d.action,navigator:w})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:r,discover:n="render",prefetch:l="none",relative:w,reloadDocument:d,replace:f,state:a,target:u,to:g,preventScrollReset:$,viewTransition:v,...S},E){let{basename:h}=reactExports.useContext(NavigationContext),b=typeof g=="string"&&ABSOLUTE_URL_REGEX2.test(g),m,p=!1;if(typeof g=="string"&&b&&(m=g,isBrowser))try{let D=new URL(window.location.href),j=g.startsWith("//")?new URL(D.protocol+g):new URL(g),V=stripBasename(j.pathname,h);j.origin===D.origin&&V!=null?g=V+j.search+j.hash:p=!0}catch{warning(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=useHref(g,{relative:w}),[y,x,A]=usePrefetchBehavior(l,S),R=useLinkClickHandler(g,{replace:f,state:a,target:u,preventScrollReset:$,relative:w,viewTransition:v});function C(D){r&&r(D),D.defaultPrevented||R(D)}let k=reactExports.createElement("a",{...S,...A,href:m||_,onClick:p||d?r:C,ref:mergeRefs(E,x),target:u,"data-discover":!b&&n==="render"?"true":void 0});return y&&!b?reactExports.createElement(reactExports.Fragment,null,k,reactExports.createElement(PrefetchPageLinks,{page:_})):k});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":r="page",caseSensitive:n=!1,className:l="",end:w=!1,style:d,to:f,viewTransition:a,children:u,...g},$){let v=useResolvedPath(f,{relative:g.relative}),S=useLocation(),E=reactExports.useContext(DataRouterStateContext),{navigator:h,basename:b}=reactExports.useContext(NavigationContext),m=E!=null&&useViewTransitionState(v)&&a===!0,p=h.encodeLocation?h.encodeLocation(v).pathname:v.pathname,_=S.pathname,y=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(_=_.toLowerCase(),y=y?y.toLowerCase():null,p=p.toLowerCase()),y&&b&&(y=stripBasename(y,b)||y);const x=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let A=_===p||!w&&_.startsWith(p)&&_.charAt(x)==="/",R=y!=null&&(y===p||!w&&y.startsWith(p)&&y.charAt(p.length)==="/"),C={isActive:A,isPending:R,isTransitioning:m},k=A?r:void 0,D;typeof l=="function"?D=l(C):D=[l,A?"active":null,R?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let j=typeof d=="function"?d(C):d;return reactExports.createElement(Link,{...g,"aria-current":k,className:D,ref:$,style:j,to:f,viewTransition:a},typeof u=="function"?u(C):u)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:i="render",fetcherKey:r,navigate:n,reloadDocument:l,replace:w,state:d,method:f=defaultMethod,action:a,onSubmit:u,relative:g,preventScrollReset:$,viewTransition:v,...S},E)=>{let h=useSubmit(),b=useFormAction(a,{relative:g}),m=f.toLowerCase()==="get"?"get":"post",p=typeof a=="string"&&ABSOLUTE_URL_REGEX2.test(a),_=y=>{if(u&&u(y),y.defaultPrevented)return;y.preventDefault();let x=y.nativeEvent.submitter,A=(x==null?void 0:x.getAttribute("formmethod"))||f;h(x||y.currentTarget,{fetcherKey:r,method:A,navigate:n,replace:w,state:d,relative:g,preventScrollReset:$,viewTransition:v})};return reactExports.createElement("form",{ref:E,method:m,action:b,onSubmit:l?u:_,...S,"data-discover":!p&&i==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(i){let r=reactExports.useContext(DataRouterContext);return invariant(r,getDataRouterConsoleError2(i)),r}function useLinkClickHandler(i,{target:r,replace:n,state:l,preventScrollReset:w,relative:d,viewTransition:f}={}){let a=useNavigate(),u=useLocation(),g=useResolvedPath(i,{relative:d});return reactExports.useCallback($=>{if(shouldProcessLinkClick($,r)){$.preventDefault();let v=n!==void 0?n:createPath(u)===createPath(g);a(i,{replace:v,state:l,preventScrollReset:w,relative:d,viewTransition:f})}},[u,a,g,n,l,r,i,w,d,f])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:i}=useDataRouterContext3("useSubmit"),{basename:r}=reactExports.useContext(NavigationContext),n=useRouteId();return reactExports.useCallback(async(l,w={})=>{let{action:d,method:f,encType:a,formData:u,body:g}=getFormSubmissionInfo(l,r);if(w.navigate===!1){let $=w.fetcherKey||getUniqueFetcherId();await i.fetch($,n,w.action||d,{preventScrollReset:w.preventScrollReset,formData:u,body:g,formMethod:w.method||f,formEncType:w.encType||a,flushSync:w.flushSync})}else await i.navigate(w.action||d,{preventScrollReset:w.preventScrollReset,formData:u,body:g,formMethod:w.method||f,formEncType:w.encType||a,replace:w.replace,state:w.state,fromRouteId:n,flushSync:w.flushSync,viewTransition:w.viewTransition})},[i,r,n])}function useFormAction(i,{relative:r}={}){let{basename:n}=reactExports.useContext(NavigationContext),l=reactExports.useContext(RouteContext);invariant(l,"useFormAction must be used inside a RouteContext");let[w]=l.matches.slice(-1),d={...useResolvedPath(i||".",{relative:r})},f=useLocation();if(i==null){d.search=f.search;let a=new URLSearchParams(d.search),u=a.getAll("index");if(u.some($=>$==="")){a.delete("index"),u.filter(v=>v).forEach(v=>a.append("index",v));let $=a.toString();d.search=$?`?${$}`:""}}return(!i||i===".")&&w.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:joinPaths([n,d.pathname])),createPath(d)}function useViewTransitionState(i,r={}){let n=reactExports.useContext(ViewTransitionContext);invariant(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=useDataRouterContext3("useViewTransitionState"),w=useResolvedPath(i,{relative:r.relative});if(!n.isTransitioning)return!1;let d=stripBasename(n.currentLocation.pathname,l)||n.currentLocation.pathname,f=stripBasename(n.nextLocation.pathname,l)||n.nextLocation.pathname;return matchPath(w.pathname,f)!=null||matchPath(w.pathname,d)!=null}new TextEncoder;[...NO_BODY_STATUS_CODES];/*!
* sweetalert2 v11.21.0
* Released under the MIT License.
*/function _assertClassBrand(i,r,n){if(typeof i=="function"?i===r:i.has(r))return arguments.length<3?r:n;throw new TypeError("Private element is not present on this object")}function _checkPrivateRedeclaration(i,r){if(r.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet2(i,r){return i.get(_assertClassBrand(i,r))}function _classPrivateFieldInitSpec(i,r,n){_checkPrivateRedeclaration(i,r),r.set(i,n)}function _classPrivateFieldSet2(i,r,n){return i.set(_assertClassBrand(i,r),n),n}const RESTORE_FOCUS_TIMEOUT=100,globalState={},focusPreviousActiveElement=()=>{globalState.previousActiveElement instanceof HTMLElement?(globalState.previousActiveElement.focus(),globalState.previousActiveElement=null):document.body&&document.body.focus()},restoreActiveElement=i=>new Promise(r=>{if(!i)return r();const n=window.scrollX,l=window.scrollY;globalState.restoreFocusTimeout=setTimeout(()=>{focusPreviousActiveElement(),r()},RESTORE_FOCUS_TIMEOUT),window.scrollTo(n,l)}),swalPrefix="swal2-",classNames=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],swalClasses=classNames.reduce((i,r)=>(i[r]=swalPrefix+r,i),{}),icons$1=["success","warning","info","question","error"],iconTypes=icons$1.reduce((i,r)=>(i[r]=swalPrefix+r,i),{}),consolePrefix="SweetAlert2:",capitalizeFirstLetter=i=>i.charAt(0).toUpperCase()+i.slice(1),warn=i=>{console.warn(`${consolePrefix} ${typeof i=="object"?i.join(" "):i}`)},error=i=>{console.error(`${consolePrefix} ${i}`)},previousWarnOnceMessages=[],warnOnce=i=>{previousWarnOnceMessages.includes(i)||(previousWarnOnceMessages.push(i),warn(i))},warnAboutDeprecation=function(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;warnOnce(`"${i}" is deprecated and will be removed in the next major release.${r?` Use "${r}" instead.`:""}`)},callIfFunction=i=>typeof i=="function"?i():i,hasToPromiseFn=i=>i&&typeof i.toPromise=="function",asPromise=i=>hasToPromiseFn(i)?i.toPromise():Promise.resolve(i),isPromise=i=>i&&Promise.resolve(i)===i,getContainer=()=>document.body.querySelector(`.${swalClasses.container}`),elementBySelector=i=>{const r=getContainer();return r?r.querySelector(i):null},elementByClass=i=>elementBySelector(`.${i}`),getPopup=()=>elementByClass(swalClasses.popup),getIcon=()=>elementByClass(swalClasses.icon),getIconContent=()=>elementByClass(swalClasses["icon-content"]),getTitle=()=>elementByClass(swalClasses.title),getHtmlContainer=()=>elementByClass(swalClasses["html-container"]),getImage=()=>elementByClass(swalClasses.image),getProgressSteps=()=>elementByClass(swalClasses["progress-steps"]),getValidationMessage=()=>elementByClass(swalClasses["validation-message"]),getConfirmButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.confirm}`),getCancelButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.cancel}`),getDenyButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.deny}`),getInputLabel=()=>elementByClass(swalClasses["input-label"]),getLoader=()=>elementBySelector(`.${swalClasses.loader}`),getActions=()=>elementByClass(swalClasses.actions),getFooter=()=>elementByClass(swalClasses.footer),getTimerProgressBar=()=>elementByClass(swalClasses["timer-progress-bar"]),getCloseButton=()=>elementByClass(swalClasses.close),focusable=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,getFocusableElements=()=>{const i=getPopup();if(!i)return[];const r=i.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(r).sort((d,f)=>{const a=parseInt(d.getAttribute("tabindex")||"0"),u=parseInt(f.getAttribute("tabindex")||"0");return a>u?1:a<u?-1:0}),l=i.querySelectorAll(focusable),w=Array.from(l).filter(d=>d.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(w))].filter(d=>isVisible$1(d))},isModal=()=>hasClass(document.body,swalClasses.shown)&&!hasClass(document.body,swalClasses["toast-shown"])&&!hasClass(document.body,swalClasses["no-backdrop"]),isToast=()=>{const i=getPopup();return i?hasClass(i,swalClasses.toast):!1},isLoading=()=>{const i=getPopup();return i?i.hasAttribute("data-loading"):!1},setInnerHtml=(i,r)=>{if(i.textContent="",r){const l=new DOMParser().parseFromString(r,"text/html"),w=l.querySelector("head");w&&Array.from(w.childNodes).forEach(f=>{i.appendChild(f)});const d=l.querySelector("body");d&&Array.from(d.childNodes).forEach(f=>{f instanceof HTMLVideoElement||f instanceof HTMLAudioElement?i.appendChild(f.cloneNode(!0)):i.appendChild(f)})}},hasClass=(i,r)=>{if(!r)return!1;const n=r.split(/\s+/);for(let l=0;l<n.length;l++)if(!i.classList.contains(n[l]))return!1;return!0},removeCustomClasses=(i,r)=>{Array.from(i.classList).forEach(n=>{!Object.values(swalClasses).includes(n)&&!Object.values(iconTypes).includes(n)&&!Object.values(r.showClass||{}).includes(n)&&i.classList.remove(n)})},applyCustomClass=(i,r,n)=>{if(removeCustomClasses(i,r),!r.customClass)return;const l=r.customClass[n];if(l){if(typeof l!="string"&&!l.forEach){warn(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof l}"`);return}addClass(i,l)}},getInput$1=(i,r)=>{if(!r)return null;switch(r){case"select":case"textarea":case"file":return i.querySelector(`.${swalClasses.popup} > .${swalClasses[r]}`);case"checkbox":return i.querySelector(`.${swalClasses.popup} > .${swalClasses.checkbox} input`);case"radio":return i.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:checked`)||i.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:first-child`);case"range":return i.querySelector(`.${swalClasses.popup} > .${swalClasses.range} input`);default:return i.querySelector(`.${swalClasses.popup} > .${swalClasses.input}`)}},focusInput=i=>{if(i.focus(),i.type!=="file"){const r=i.value;i.value="",i.value=r}},toggleClass=(i,r,n)=>{!i||!r||(typeof r=="string"&&(r=r.split(/\s+/).filter(Boolean)),r.forEach(l=>{Array.isArray(i)?i.forEach(w=>{n?w.classList.add(l):w.classList.remove(l)}):n?i.classList.add(l):i.classList.remove(l)}))},addClass=(i,r)=>{toggleClass(i,r,!0)},removeClass=(i,r)=>{toggleClass(i,r,!1)},getDirectChildByClass=(i,r)=>{const n=Array.from(i.children);for(let l=0;l<n.length;l++){const w=n[l];if(w instanceof HTMLElement&&hasClass(w,r))return w}},applyNumericalStyle=(i,r,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?i.style.setProperty(r,typeof n=="number"?`${n}px`:n):i.style.removeProperty(r)},show=function(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";i&&(i.style.display=r)},hide=i=>{i&&(i.style.display="none")},showWhenInnerHtmlPresent=function(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";i&&new MutationObserver(()=>{toggle(i,i.innerHTML,r)}).observe(i,{childList:!0,subtree:!0})},setStyle$1=(i,r,n,l)=>{const w=i.querySelector(r);w&&w.style.setProperty(n,l)},toggle=function(i,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";r?show(i,n):hide(i)},isVisible$1=i=>!!(i&&(i.offsetWidth||i.offsetHeight||i.getClientRects().length)),allButtonsAreHidden=()=>!isVisible$1(getConfirmButton())&&!isVisible$1(getDenyButton())&&!isVisible$1(getCancelButton()),isScrollable=i=>i.scrollHeight>i.clientHeight,hasCssAnimation=i=>{const r=window.getComputedStyle(i),n=parseFloat(r.getPropertyValue("animation-duration")||"0"),l=parseFloat(r.getPropertyValue("transition-duration")||"0");return n>0||l>0},animateTimerProgressBar=function(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=getTimerProgressBar();n&&isVisible$1(n)&&(r&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${i/1e3}s linear`,n.style.width="0%"},10))},stopTimerProgressBar=()=>{const i=getTimerProgressBar();if(!i)return;const r=parseInt(window.getComputedStyle(i).width);i.style.removeProperty("transition"),i.style.width="100%";const n=parseInt(window.getComputedStyle(i).width),l=r/n*100;i.style.width=`${l}%`},isNodeEnv=()=>typeof window>"u"||typeof document>"u",sweetHTML=`
 <div aria-labelledby="${swalClasses.title}" aria-describedby="${swalClasses["html-container"]}" class="${swalClasses.popup}" tabindex="-1">
   <button type="button" class="${swalClasses.close}"></button>
   <ul class="${swalClasses["progress-steps"]}"></ul>
   <div class="${swalClasses.icon}"></div>
   <img class="${swalClasses.image}" />
   <h2 class="${swalClasses.title}" id="${swalClasses.title}"></h2>
   <div class="${swalClasses["html-container"]}" id="${swalClasses["html-container"]}"></div>
   <input class="${swalClasses.input}" id="${swalClasses.input}" />
   <input type="file" class="${swalClasses.file}" />
   <div class="${swalClasses.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${swalClasses.select}" id="${swalClasses.select}"></select>
   <div class="${swalClasses.radio}"></div>
   <label class="${swalClasses.checkbox}">
     <input type="checkbox" id="${swalClasses.checkbox}" />
     <span class="${swalClasses.label}"></span>
   </label>
   <textarea class="${swalClasses.textarea}" id="${swalClasses.textarea}"></textarea>
   <div class="${swalClasses["validation-message"]}" id="${swalClasses["validation-message"]}"></div>
   <div class="${swalClasses.actions}">
     <div class="${swalClasses.loader}"></div>
     <button type="button" class="${swalClasses.confirm}"></button>
     <button type="button" class="${swalClasses.deny}"></button>
     <button type="button" class="${swalClasses.cancel}"></button>
   </div>
   <div class="${swalClasses.footer}"></div>
   <div class="${swalClasses["timer-progress-bar-container"]}">
     <div class="${swalClasses["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),resetOldContainer=()=>{const i=getContainer();return i?(i.remove(),removeClass([document.documentElement,document.body],[swalClasses["no-backdrop"],swalClasses["toast-shown"],swalClasses["has-column"]]),!0):!1},resetValidationMessage$1=()=>{globalState.currentInstance.resetValidationMessage()},addInputChangeListeners=()=>{const i=getPopup(),r=getDirectChildByClass(i,swalClasses.input),n=getDirectChildByClass(i,swalClasses.file),l=i.querySelector(`.${swalClasses.range} input`),w=i.querySelector(`.${swalClasses.range} output`),d=getDirectChildByClass(i,swalClasses.select),f=i.querySelector(`.${swalClasses.checkbox} input`),a=getDirectChildByClass(i,swalClasses.textarea);r.oninput=resetValidationMessage$1,n.onchange=resetValidationMessage$1,d.onchange=resetValidationMessage$1,f.onchange=resetValidationMessage$1,a.oninput=resetValidationMessage$1,l.oninput=()=>{resetValidationMessage$1(),w.value=l.value},l.onchange=()=>{resetValidationMessage$1(),w.value=l.value}},getTarget=i=>typeof i=="string"?document.querySelector(i):i,setupAccessibility=i=>{const r=getPopup();r.setAttribute("role",i.toast?"alert":"dialog"),r.setAttribute("aria-live",i.toast?"polite":"assertive"),i.toast||r.setAttribute("aria-modal","true")},setupRTL=i=>{window.getComputedStyle(i).direction==="rtl"&&addClass(getContainer(),swalClasses.rtl)},init=i=>{const r=resetOldContainer();if(isNodeEnv()){error("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=swalClasses.container,r&&addClass(n,swalClasses["no-transition"]),setInnerHtml(n,sweetHTML),n.dataset.swal2Theme=i.theme;const l=getTarget(i.target);l.appendChild(n),i.topLayer&&(n.setAttribute("popover",""),n.showPopover()),setupAccessibility(i),setupRTL(l),addInputChangeListeners()},parseHtmlToContainer=(i,r)=>{i instanceof HTMLElement?r.appendChild(i):typeof i=="object"?handleObject(i,r):i&&setInnerHtml(r,i)},handleObject=(i,r)=>{i.jquery?handleJqueryElem(r,i):setInnerHtml(r,i.toString())},handleJqueryElem=(i,r)=>{if(i.textContent="",0 in r)for(let n=0;n in r;n++)i.appendChild(r[n].cloneNode(!0));else i.appendChild(r.cloneNode(!0))},renderActions=(i,r)=>{const n=getActions(),l=getLoader();!n||!l||(!r.showConfirmButton&&!r.showDenyButton&&!r.showCancelButton?hide(n):show(n),applyCustomClass(n,r,"actions"),renderButtons(n,l,r),setInnerHtml(l,r.loaderHtml||""),applyCustomClass(l,r,"loader"))};function renderButtons(i,r,n){const l=getConfirmButton(),w=getDenyButton(),d=getCancelButton();!l||!w||!d||(renderButton(l,"confirm",n),renderButton(w,"deny",n),renderButton(d,"cancel",n),handleButtonsStyling(l,w,d,n),n.reverseButtons&&(n.toast?(i.insertBefore(d,l),i.insertBefore(w,l)):(i.insertBefore(d,r),i.insertBefore(w,r),i.insertBefore(l,r))))}function handleButtonsStyling(i,r,n,l){if(!l.buttonsStyling){removeClass([i,r,n],swalClasses.styled);return}addClass([i,r,n],swalClasses.styled),l.confirmButtonColor&&i.style.setProperty("--swal2-confirm-button-background-color",l.confirmButtonColor),l.denyButtonColor&&r.style.setProperty("--swal2-deny-button-background-color",l.denyButtonColor),l.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",l.cancelButtonColor),applyOutlineColor(i),applyOutlineColor(r),applyOutlineColor(n)}function applyOutlineColor(i){const r=window.getComputedStyle(i),n=r.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");i.style.setProperty("--swal2-action-button-outline",r.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function renderButton(i,r,n){const l=capitalizeFirstLetter(r);toggle(i,n[`show${l}Button`],"inline-block"),setInnerHtml(i,n[`${r}ButtonText`]||""),i.setAttribute("aria-label",n[`${r}ButtonAriaLabel`]||""),i.className=swalClasses[r],applyCustomClass(i,n,`${r}Button`)}const renderCloseButton=(i,r)=>{const n=getCloseButton();n&&(setInnerHtml(n,r.closeButtonHtml||""),applyCustomClass(n,r,"closeButton"),toggle(n,r.showCloseButton),n.setAttribute("aria-label",r.closeButtonAriaLabel||""))},renderContainer=(i,r)=>{const n=getContainer();n&&(handleBackdropParam(n,r.backdrop),handlePositionParam(n,r.position),handleGrowParam(n,r.grow),applyCustomClass(n,r,"container"))};function handleBackdropParam(i,r){typeof r=="string"?i.style.background=r:r||addClass([document.documentElement,document.body],swalClasses["no-backdrop"])}function handlePositionParam(i,r){r&&(r in swalClasses?addClass(i,swalClasses[r]):(warn('The "position" parameter is not valid, defaulting to "center"'),addClass(i,swalClasses.center)))}function handleGrowParam(i,r){r&&addClass(i,swalClasses[`grow-${r}`])}var privateProps={innerParams:new WeakMap,domCache:new WeakMap};const inputClasses=["input","file","range","select","radio","checkbox","textarea"],renderInput=(i,r)=>{const n=getPopup();if(!n)return;const l=privateProps.innerParams.get(i),w=!l||r.input!==l.input;inputClasses.forEach(d=>{const f=getDirectChildByClass(n,swalClasses[d]);f&&(setAttributes(d,r.inputAttributes),f.className=swalClasses[d],w&&hide(f))}),r.input&&(w&&showInput(r),setCustomClass(r))},showInput=i=>{if(!i.input)return;if(!renderInputType[i.input]){error(`Unexpected type of input! Expected ${Object.keys(renderInputType).join(" | ")}, got "${i.input}"`);return}const r=getInputContainer(i.input);if(!r)return;const n=renderInputType[i.input](r,i);show(r),i.inputAutoFocus&&setTimeout(()=>{focusInput(n)})},removeAttributes=i=>{for(let r=0;r<i.attributes.length;r++){const n=i.attributes[r].name;["id","type","value","style"].includes(n)||i.removeAttribute(n)}},setAttributes=(i,r)=>{const n=getPopup();if(!n)return;const l=getInput$1(n,i);if(l){removeAttributes(l);for(const w in r)l.setAttribute(w,r[w])}},setCustomClass=i=>{if(!i.input)return;const r=getInputContainer(i.input);r&&applyCustomClass(r,i,"input")},setInputPlaceholder=(i,r)=>{!i.placeholder&&r.inputPlaceholder&&(i.placeholder=r.inputPlaceholder)},setInputLabel=(i,r,n)=>{if(n.inputLabel){const l=document.createElement("label"),w=swalClasses["input-label"];l.setAttribute("for",i.id),l.className=w,typeof n.customClass=="object"&&addClass(l,n.customClass.inputLabel),l.innerText=n.inputLabel,r.insertAdjacentElement("beforebegin",l)}},getInputContainer=i=>{const r=getPopup();if(r)return getDirectChildByClass(r,swalClasses[i]||swalClasses.input)},checkAndSetInputValue=(i,r)=>{["string","number"].includes(typeof r)?i.value=`${r}`:isPromise(r)||warn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof r}"`)},renderInputType={};renderInputType.text=renderInputType.email=renderInputType.password=renderInputType.number=renderInputType.tel=renderInputType.url=renderInputType.search=renderInputType.date=renderInputType["datetime-local"]=renderInputType.time=renderInputType.week=renderInputType.month=(i,r)=>(checkAndSetInputValue(i,r.inputValue),setInputLabel(i,i,r),setInputPlaceholder(i,r),i.type=r.input,i);renderInputType.file=(i,r)=>(setInputLabel(i,i,r),setInputPlaceholder(i,r),i);renderInputType.range=(i,r)=>{const n=i.querySelector("input"),l=i.querySelector("output");return checkAndSetInputValue(n,r.inputValue),n.type=r.input,checkAndSetInputValue(l,r.inputValue),setInputLabel(n,i,r),i};renderInputType.select=(i,r)=>{if(i.textContent="",r.inputPlaceholder){const n=document.createElement("option");setInnerHtml(n,r.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,i.appendChild(n)}return setInputLabel(i,i,r),i};renderInputType.radio=i=>(i.textContent="",i);renderInputType.checkbox=(i,r)=>{const n=getInput$1(getPopup(),"checkbox");n.value="1",n.checked=!!r.inputValue;const l=i.querySelector("span");return setInnerHtml(l,r.inputPlaceholder||r.inputLabel),n};renderInputType.textarea=(i,r)=>{checkAndSetInputValue(i,r.inputValue),setInputPlaceholder(i,r),setInputLabel(i,i,r);const n=l=>parseInt(window.getComputedStyle(l).marginLeft)+parseInt(window.getComputedStyle(l).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const l=parseInt(window.getComputedStyle(getPopup()).width),w=()=>{if(!document.body.contains(i))return;const d=i.offsetWidth+n(i);d>l?getPopup().style.width=`${d}px`:applyNumericalStyle(getPopup(),"width",r.width)};new MutationObserver(w).observe(i,{attributes:!0,attributeFilter:["style"]})}}),i};const renderContent=(i,r)=>{const n=getHtmlContainer();n&&(showWhenInnerHtmlPresent(n),applyCustomClass(n,r,"htmlContainer"),r.html?(parseHtmlToContainer(r.html,n),show(n,"block")):r.text?(n.textContent=r.text,show(n,"block")):hide(n),renderInput(i,r))},renderFooter=(i,r)=>{const n=getFooter();n&&(showWhenInnerHtmlPresent(n),toggle(n,r.footer,"block"),r.footer&&parseHtmlToContainer(r.footer,n),applyCustomClass(n,r,"footer"))},renderIcon=(i,r)=>{const n=privateProps.innerParams.get(i),l=getIcon();if(!l)return;if(n&&r.icon===n.icon){setContent(l,r),applyStyles(l,r);return}if(!r.icon&&!r.iconHtml){hide(l);return}if(r.icon&&Object.keys(iconTypes).indexOf(r.icon)===-1){error(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${r.icon}"`),hide(l);return}show(l),setContent(l,r),applyStyles(l,r),addClass(l,r.showClass&&r.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",adjustSuccessIconBackgroundColor)},applyStyles=(i,r)=>{for(const[n,l]of Object.entries(iconTypes))r.icon!==n&&removeClass(i,l);addClass(i,r.icon&&iconTypes[r.icon]),setColor(i,r),adjustSuccessIconBackgroundColor(),applyCustomClass(i,r,"icon")},adjustSuccessIconBackgroundColor=()=>{const i=getPopup();if(!i)return;const r=window.getComputedStyle(i).getPropertyValue("background-color"),n=i.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let l=0;l<n.length;l++)n[l].style.backgroundColor=r},successIconHtml=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,errorIconHtml=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,setContent=(i,r)=>{if(!r.icon&&!r.iconHtml)return;let n=i.innerHTML,l="";r.iconHtml?l=iconContent(r.iconHtml):r.icon==="success"?(l=successIconHtml,n=n.replace(/ style=".*?"/g,"")):r.icon==="error"?l=errorIconHtml:r.icon&&(l=iconContent({question:"?",warning:"!",info:"i"}[r.icon])),n.trim()!==l.trim()&&setInnerHtml(i,l)},setColor=(i,r)=>{if(r.iconColor){i.style.color=r.iconColor,i.style.borderColor=r.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])setStyle$1(i,n,"background-color",r.iconColor);setStyle$1(i,".swal2-success-ring","border-color",r.iconColor)}},iconContent=i=>`<div class="${swalClasses["icon-content"]}">${i}</div>`,renderImage=(i,r)=>{const n=getImage();if(n){if(!r.imageUrl){hide(n);return}show(n,""),n.setAttribute("src",r.imageUrl),n.setAttribute("alt",r.imageAlt||""),applyNumericalStyle(n,"width",r.imageWidth),applyNumericalStyle(n,"height",r.imageHeight),n.className=swalClasses.image,applyCustomClass(n,r,"image")}};let dragging$1=!1,mousedownX=0,mousedownY=0,initialX=0,initialY=0;const addDraggableListeners=i=>{i.addEventListener("mousedown",down),document.body.addEventListener("mousemove",move),i.addEventListener("mouseup",up),i.addEventListener("touchstart",down),document.body.addEventListener("touchmove",move),i.addEventListener("touchend",up)},removeDraggableListeners=i=>{i.removeEventListener("mousedown",down),document.body.removeEventListener("mousemove",move),i.removeEventListener("mouseup",up),i.removeEventListener("touchstart",down),document.body.removeEventListener("touchmove",move),i.removeEventListener("touchend",up)},down=i=>{const r=getPopup();if(i.target===r||getIcon().contains(i.target)){dragging$1=!0;const n=getClientXY(i);mousedownX=n.clientX,mousedownY=n.clientY,initialX=parseInt(r.style.insetInlineStart)||0,initialY=parseInt(r.style.insetBlockStart)||0,addClass(r,"swal2-dragging")}},move=i=>{const r=getPopup();if(dragging$1){let{clientX:n,clientY:l}=getClientXY(i);r.style.insetInlineStart=`${initialX+(n-mousedownX)}px`,r.style.insetBlockStart=`${initialY+(l-mousedownY)}px`}},up=()=>{const i=getPopup();dragging$1=!1,removeClass(i,"swal2-dragging")},getClientXY=i=>{let r=0,n=0;return i.type.startsWith("mouse")?(r=i.clientX,n=i.clientY):i.type.startsWith("touch")&&(r=i.touches[0].clientX,n=i.touches[0].clientY),{clientX:r,clientY:n}},renderPopup=(i,r)=>{const n=getContainer(),l=getPopup();if(!(!n||!l)){if(r.toast){applyNumericalStyle(n,"width",r.width),l.style.width="100%";const w=getLoader();w&&l.insertBefore(w,getIcon())}else applyNumericalStyle(l,"width",r.width);applyNumericalStyle(l,"padding",r.padding),r.color&&(l.style.color=r.color),r.background&&(l.style.background=r.background),hide(getValidationMessage()),addClasses$1(l,r),r.draggable&&!r.toast?(addClass(l,swalClasses.draggable),addDraggableListeners(l)):(removeClass(l,swalClasses.draggable),removeDraggableListeners(l))}},addClasses$1=(i,r)=>{const n=r.showClass||{};i.className=`${swalClasses.popup} ${isVisible$1(i)?n.popup:""}`,r.toast?(addClass([document.documentElement,document.body],swalClasses["toast-shown"]),addClass(i,swalClasses.toast)):addClass(i,swalClasses.modal),applyCustomClass(i,r,"popup"),typeof r.customClass=="string"&&addClass(i,r.customClass),r.icon&&addClass(i,swalClasses[`icon-${r.icon}`])},renderProgressSteps=(i,r)=>{const n=getProgressSteps();if(!n)return;const{progressSteps:l,currentProgressStep:w}=r;if(!l||l.length===0||w===void 0){hide(n);return}show(n),n.textContent="",w>=l.length&&warn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),l.forEach((d,f)=>{const a=createStepElement(d);if(n.appendChild(a),f===w&&addClass(a,swalClasses["active-progress-step"]),f!==l.length-1){const u=createLineElement(r);n.appendChild(u)}})},createStepElement=i=>{const r=document.createElement("li");return addClass(r,swalClasses["progress-step"]),setInnerHtml(r,i),r},createLineElement=i=>{const r=document.createElement("li");return addClass(r,swalClasses["progress-step-line"]),i.progressStepsDistance&&applyNumericalStyle(r,"width",i.progressStepsDistance),r},renderTitle=(i,r)=>{const n=getTitle();n&&(showWhenInnerHtmlPresent(n),toggle(n,r.title||r.titleText,"block"),r.title&&parseHtmlToContainer(r.title,n),r.titleText&&(n.innerText=r.titleText),applyCustomClass(n,r,"title"))},render=(i,r)=>{renderPopup(i,r),renderContainer(i,r),renderProgressSteps(i,r),renderIcon(i,r),renderImage(i,r),renderTitle(i,r),renderCloseButton(i,r),renderContent(i,r),renderActions(i,r),renderFooter(i,r);const n=getPopup();typeof r.didRender=="function"&&n&&r.didRender(n),globalState.eventEmitter.emit("didRender",n)},isVisible=()=>isVisible$1(getPopup()),clickConfirm=()=>{var i;return(i=getConfirmButton())===null||i===void 0?void 0:i.click()},clickDeny=()=>{var i;return(i=getDenyButton())===null||i===void 0?void 0:i.click()},clickCancel=()=>{var i;return(i=getCancelButton())===null||i===void 0?void 0:i.click()},DismissReason=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),removeKeydownHandler=i=>{i.keydownTarget&&i.keydownHandlerAdded&&(i.keydownTarget.removeEventListener("keydown",i.keydownHandler,{capture:i.keydownListenerCapture}),i.keydownHandlerAdded=!1)},addKeydownHandler=(i,r,n)=>{removeKeydownHandler(i),r.toast||(i.keydownHandler=l=>keydownHandler(r,l,n),i.keydownTarget=r.keydownListenerCapture?window:getPopup(),i.keydownListenerCapture=r.keydownListenerCapture,i.keydownTarget.addEventListener("keydown",i.keydownHandler,{capture:i.keydownListenerCapture}),i.keydownHandlerAdded=!0)},setFocus=(i,r)=>{var n;const l=getFocusableElements();if(l.length){i=i+r,i===-2&&(i=l.length-1),i===l.length?i=0:i===-1&&(i=l.length-1),l[i].focus();return}(n=getPopup())===null||n===void 0||n.focus()},arrowKeysNextButton=["ArrowRight","ArrowDown"],arrowKeysPreviousButton=["ArrowLeft","ArrowUp"],keydownHandler=(i,r,n)=>{i&&(r.isComposing||r.keyCode===229||(i.stopKeydownPropagation&&r.stopPropagation(),r.key==="Enter"?handleEnter(r,i):r.key==="Tab"?handleTab(r):[...arrowKeysNextButton,...arrowKeysPreviousButton].includes(r.key)?handleArrows(r.key):r.key==="Escape"&&handleEsc(r,i,n)))},handleEnter=(i,r)=>{if(!callIfFunction(r.allowEnterKey))return;const n=getInput$1(getPopup(),r.input);if(i.target&&n&&i.target instanceof HTMLElement&&i.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(r.input))return;clickConfirm(),i.preventDefault()}},handleTab=i=>{const r=i.target,n=getFocusableElements();let l=-1;for(let w=0;w<n.length;w++)if(r===n[w]){l=w;break}i.shiftKey?setFocus(l,-1):setFocus(l,1),i.stopPropagation(),i.preventDefault()},handleArrows=i=>{const r=getActions(),n=getConfirmButton(),l=getDenyButton(),w=getCancelButton();if(!r||!n||!l||!w)return;const d=[n,l,w];if(document.activeElement instanceof HTMLElement&&!d.includes(document.activeElement))return;const f=arrowKeysNextButton.includes(i)?"nextElementSibling":"previousElementSibling";let a=document.activeElement;if(a){for(let u=0;u<r.children.length;u++){if(a=a[f],!a)return;if(a instanceof HTMLButtonElement&&isVisible$1(a))break}a instanceof HTMLButtonElement&&a.focus()}},handleEsc=(i,r,n)=>{callIfFunction(r.allowEscapeKey)&&(i.preventDefault(),n(DismissReason.esc))};var privateMethods={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const setAriaHidden=()=>{const i=getContainer();Array.from(document.body.children).forEach(n=>{n.contains(i)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},unsetAriaHidden=()=>{Array.from(document.body.children).forEach(r=>{r.hasAttribute("data-previous-aria-hidden")?(r.setAttribute("aria-hidden",r.getAttribute("data-previous-aria-hidden")||""),r.removeAttribute("data-previous-aria-hidden")):r.removeAttribute("aria-hidden")})},isSafariOrIOS=typeof window<"u"&&!!window.GestureEvent,iOSfix=()=>{if(isSafariOrIOS&&!hasClass(document.body,swalClasses.iosfix)){const i=document.body.scrollTop;document.body.style.top=`${i*-1}px`,addClass(document.body,swalClasses.iosfix),lockBodyScroll()}},lockBodyScroll=()=>{const i=getContainer();if(!i)return;let r;i.ontouchstart=n=>{r=shouldPreventTouchMove(n)},i.ontouchmove=n=>{r&&(n.preventDefault(),n.stopPropagation())}},shouldPreventTouchMove=i=>{const r=i.target,n=getContainer(),l=getHtmlContainer();return!n||!l||isStylus(i)||isZoom(i)?!1:r===n||!isScrollable(n)&&r instanceof HTMLElement&&r.tagName!=="INPUT"&&r.tagName!=="TEXTAREA"&&!(isScrollable(l)&&l.contains(r))},isStylus=i=>i.touches&&i.touches.length&&i.touches[0].touchType==="stylus",isZoom=i=>i.touches&&i.touches.length>1,undoIOSfix=()=>{if(hasClass(document.body,swalClasses.iosfix)){const i=parseInt(document.body.style.top,10);removeClass(document.body,swalClasses.iosfix),document.body.style.top="",document.body.scrollTop=i*-1}},measureScrollbar=()=>{const i=document.createElement("div");i.className=swalClasses["scrollbar-measure"],document.body.appendChild(i);const r=i.getBoundingClientRect().width-i.clientWidth;return document.body.removeChild(i),r};let previousBodyPadding=null;const replaceScrollbarWithPadding=i=>{previousBodyPadding===null&&(document.body.scrollHeight>window.innerHeight||i==="scroll")&&(previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${previousBodyPadding+measureScrollbar()}px`)},undoReplaceScrollbarWithPadding=()=>{previousBodyPadding!==null&&(document.body.style.paddingRight=`${previousBodyPadding}px`,previousBodyPadding=null)};function removePopupAndResetState(i,r,n,l){isToast()?triggerDidCloseAndDispose(i,l):(restoreActiveElement(n).then(()=>triggerDidCloseAndDispose(i,l)),removeKeydownHandler(globalState)),isSafariOrIOS?(r.setAttribute("style","display:none !important"),r.removeAttribute("class"),r.innerHTML=""):r.remove(),isModal()&&(undoReplaceScrollbarWithPadding(),undoIOSfix(),unsetAriaHidden()),removeBodyClasses()}function removeBodyClasses(){removeClass([document.documentElement,document.body],[swalClasses.shown,swalClasses["height-auto"],swalClasses["no-backdrop"],swalClasses["toast-shown"]])}function close(i){i=prepareResolveValue(i);const r=privateMethods.swalPromiseResolve.get(this),n=triggerClosePopup(this);this.isAwaitingPromise?i.isDismissed||(handleAwaitingPromise(this),r(i)):n&&r(i)}const triggerClosePopup=i=>{const r=getPopup();if(!r)return!1;const n=privateProps.innerParams.get(i);if(!n||hasClass(r,n.hideClass.popup))return!1;removeClass(r,n.showClass.popup),addClass(r,n.hideClass.popup);const l=getContainer();return removeClass(l,n.showClass.backdrop),addClass(l,n.hideClass.backdrop),handlePopupAnimation(i,r,n),!0};function rejectPromise(i){const r=privateMethods.swalPromiseReject.get(this);handleAwaitingPromise(this),r&&r(i)}const handleAwaitingPromise=i=>{i.isAwaitingPromise&&(delete i.isAwaitingPromise,privateProps.innerParams.get(i)||i._destroy())},prepareResolveValue=i=>typeof i>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},i),handlePopupAnimation=(i,r,n)=>{var l;const w=getContainer(),d=hasCssAnimation(r);typeof n.willClose=="function"&&n.willClose(r),(l=globalState.eventEmitter)===null||l===void 0||l.emit("willClose",r),d?animatePopup(i,r,w,n.returnFocus,n.didClose):removePopupAndResetState(i,w,n.returnFocus,n.didClose)},animatePopup=(i,r,n,l,w)=>{globalState.swalCloseEventFinishedCallback=removePopupAndResetState.bind(null,i,n,l,w);const d=function(f){if(f.target===r){var a;(a=globalState.swalCloseEventFinishedCallback)===null||a===void 0||a.call(globalState),delete globalState.swalCloseEventFinishedCallback,r.removeEventListener("animationend",d),r.removeEventListener("transitionend",d)}};r.addEventListener("animationend",d),r.addEventListener("transitionend",d)},triggerDidCloseAndDispose=(i,r)=>{setTimeout(()=>{var n;typeof r=="function"&&r.bind(i.params)(),(n=globalState.eventEmitter)===null||n===void 0||n.emit("didClose"),i._destroy&&i._destroy()})},showLoading=i=>{let r=getPopup();if(r||new Swal,r=getPopup(),!r)return;const n=getLoader();isToast()?hide(getIcon()):replaceButton(r,i),show(n),r.setAttribute("data-loading","true"),r.setAttribute("aria-busy","true"),r.focus()},replaceButton=(i,r)=>{const n=getActions(),l=getLoader();!n||!l||(!r&&isVisible$1(getConfirmButton())&&(r=getConfirmButton()),show(n),r&&(hide(r),l.setAttribute("data-button-to-replace",r.className),n.insertBefore(l,r)),addClass([i,n],swalClasses.loading))},handleInputOptionsAndValue=(i,r)=>{r.input==="select"||r.input==="radio"?handleInputOptions(i,r):["text","email","number","tel","textarea"].some(n=>n===r.input)&&(hasToPromiseFn(r.inputValue)||isPromise(r.inputValue))&&(showLoading(getConfirmButton()),handleInputValue(i,r))},getInputValue=(i,r)=>{const n=i.getInput();if(!n)return null;switch(r.input){case"checkbox":return getCheckboxValue(n);case"radio":return getRadioValue(n);case"file":return getFileValue(n);default:return r.inputAutoTrim?n.value.trim():n.value}},getCheckboxValue=i=>i.checked?1:0,getRadioValue=i=>i.checked?i.value:null,getFileValue=i=>i.files&&i.files.length?i.getAttribute("multiple")!==null?i.files:i.files[0]:null,handleInputOptions=(i,r)=>{const n=getPopup();if(!n)return;const l=w=>{r.input==="select"?populateSelectOptions(n,formatInputOptions(w),r):r.input==="radio"&&populateRadioOptions(n,formatInputOptions(w),r)};hasToPromiseFn(r.inputOptions)||isPromise(r.inputOptions)?(showLoading(getConfirmButton()),asPromise(r.inputOptions).then(w=>{i.hideLoading(),l(w)})):typeof r.inputOptions=="object"?l(r.inputOptions):error(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof r.inputOptions}`)},handleInputValue=(i,r)=>{const n=i.getInput();n&&(hide(n),asPromise(r.inputValue).then(l=>{n.value=r.input==="number"?`${parseFloat(l)||0}`:`${l}`,show(n),n.focus(),i.hideLoading()}).catch(l=>{error(`Error in inputValue promise: ${l}`),n.value="",show(n),n.focus(),i.hideLoading()}))};function populateSelectOptions(i,r,n){const l=getDirectChildByClass(i,swalClasses.select);if(!l)return;const w=(d,f,a)=>{const u=document.createElement("option");u.value=a,setInnerHtml(u,f),u.selected=isSelected(a,n.inputValue),d.appendChild(u)};r.forEach(d=>{const f=d[0],a=d[1];if(Array.isArray(a)){const u=document.createElement("optgroup");u.label=f,u.disabled=!1,l.appendChild(u),a.forEach(g=>w(u,g[1],g[0]))}else w(l,a,f)}),l.focus()}function populateRadioOptions(i,r,n){const l=getDirectChildByClass(i,swalClasses.radio);if(!l)return;r.forEach(d=>{const f=d[0],a=d[1],u=document.createElement("input"),g=document.createElement("label");u.type="radio",u.name=swalClasses.radio,u.value=f,isSelected(f,n.inputValue)&&(u.checked=!0);const $=document.createElement("span");setInnerHtml($,a),$.className=swalClasses.label,g.appendChild(u),g.appendChild($),l.appendChild(g)});const w=l.querySelectorAll("input");w.length&&w[0].focus()}const formatInputOptions=i=>{const r=[];return i instanceof Map?i.forEach((n,l)=>{let w=n;typeof w=="object"&&(w=formatInputOptions(w)),r.push([l,w])}):Object.keys(i).forEach(n=>{let l=i[n];typeof l=="object"&&(l=formatInputOptions(l)),r.push([n,l])}),r},isSelected=(i,r)=>!!r&&r.toString()===i.toString(),handleConfirmButtonClick=i=>{const r=privateProps.innerParams.get(i);i.disableButtons(),r.input?handleConfirmOrDenyWithInput(i,"confirm"):confirm(i,!0)},handleDenyButtonClick=i=>{const r=privateProps.innerParams.get(i);i.disableButtons(),r.returnInputValueOnDeny?handleConfirmOrDenyWithInput(i,"deny"):deny(i,!1)},handleCancelButtonClick=(i,r)=>{i.disableButtons(),r(DismissReason.cancel)},handleConfirmOrDenyWithInput=(i,r)=>{const n=privateProps.innerParams.get(i);if(!n.input){error(`The "input" parameter is needed to be set when using returnInputValueOn${capitalizeFirstLetter(r)}`);return}const l=i.getInput(),w=getInputValue(i,n);n.inputValidator?handleInputValidator(i,w,r):l&&!l.checkValidity()?(i.enableButtons(),i.showValidationMessage(n.validationMessage||l.validationMessage)):r==="deny"?deny(i,w):confirm(i,w)},handleInputValidator=(i,r,n)=>{const l=privateProps.innerParams.get(i);i.disableInput(),Promise.resolve().then(()=>asPromise(l.inputValidator(r,l.validationMessage))).then(d=>{i.enableButtons(),i.enableInput(),d?i.showValidationMessage(d):n==="deny"?deny(i,r):confirm(i,r)})},deny=(i,r)=>{const n=privateProps.innerParams.get(i||void 0);n.showLoaderOnDeny&&showLoading(getDenyButton()),n.preDeny?(i.isAwaitingPromise=!0,Promise.resolve().then(()=>asPromise(n.preDeny(r,n.validationMessage))).then(w=>{w===!1?(i.hideLoading(),handleAwaitingPromise(i)):i.close({isDenied:!0,value:typeof w>"u"?r:w})}).catch(w=>rejectWith(i||void 0,w))):i.close({isDenied:!0,value:r})},succeedWith=(i,r)=>{i.close({isConfirmed:!0,value:r})},rejectWith=(i,r)=>{i.rejectPromise(r)},confirm=(i,r)=>{const n=privateProps.innerParams.get(i||void 0);n.showLoaderOnConfirm&&showLoading(),n.preConfirm?(i.resetValidationMessage(),i.isAwaitingPromise=!0,Promise.resolve().then(()=>asPromise(n.preConfirm(r,n.validationMessage))).then(w=>{isVisible$1(getValidationMessage())||w===!1?(i.hideLoading(),handleAwaitingPromise(i)):succeedWith(i,typeof w>"u"?r:w)}).catch(w=>rejectWith(i||void 0,w))):succeedWith(i,r)};function hideLoading(){const i=privateProps.innerParams.get(this);if(!i)return;const r=privateProps.domCache.get(this);hide(r.loader),isToast()?i.icon&&show(getIcon()):showRelatedButton(r),removeClass([r.popup,r.actions],swalClasses.loading),r.popup.removeAttribute("aria-busy"),r.popup.removeAttribute("data-loading"),r.confirmButton.disabled=!1,r.denyButton.disabled=!1,r.cancelButton.disabled=!1}const showRelatedButton=i=>{const r=i.popup.getElementsByClassName(i.loader.getAttribute("data-button-to-replace"));r.length?show(r[0],"inline-block"):allButtonsAreHidden()&&hide(i.actions)};function getInput(){const i=privateProps.innerParams.get(this),r=privateProps.domCache.get(this);return r?getInput$1(r.popup,i.input):null}function setButtonsDisabled(i,r,n){const l=privateProps.domCache.get(i);r.forEach(w=>{l[w].disabled=n})}function setInputDisabled(i,r){const n=getPopup();if(!(!n||!i))if(i.type==="radio"){const l=n.querySelectorAll(`[name="${swalClasses.radio}"]`);for(let w=0;w<l.length;w++)l[w].disabled=r}else i.disabled=r}function enableButtons(){setButtonsDisabled(this,["confirmButton","denyButton","cancelButton"],!1)}function disableButtons(){setButtonsDisabled(this,["confirmButton","denyButton","cancelButton"],!0)}function enableInput(){setInputDisabled(this.getInput(),!1)}function disableInput(){setInputDisabled(this.getInput(),!0)}function showValidationMessage(i){const r=privateProps.domCache.get(this),n=privateProps.innerParams.get(this);setInnerHtml(r.validationMessage,i),r.validationMessage.className=swalClasses["validation-message"],n.customClass&&n.customClass.validationMessage&&addClass(r.validationMessage,n.customClass.validationMessage),show(r.validationMessage);const l=this.getInput();l&&(l.setAttribute("aria-invalid","true"),l.setAttribute("aria-describedby",swalClasses["validation-message"]),focusInput(l),addClass(l,swalClasses.inputerror))}function resetValidationMessage(){const i=privateProps.domCache.get(this);i.validationMessage&&hide(i.validationMessage);const r=this.getInput();r&&(r.removeAttribute("aria-invalid"),r.removeAttribute("aria-describedby"),removeClass(r,swalClasses.inputerror))}const defaultParams={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},updatableParams=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],deprecatedParams={allowEnterKey:void 0},toastIncompatibleParams=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],isValidParameter=i=>Object.prototype.hasOwnProperty.call(defaultParams,i),isUpdatableParameter=i=>updatableParams.indexOf(i)!==-1,isDeprecatedParameter=i=>deprecatedParams[i],checkIfParamIsValid=i=>{isValidParameter(i)||warn(`Unknown parameter "${i}"`)},checkIfToastParamIsValid=i=>{toastIncompatibleParams.includes(i)&&warn(`The parameter "${i}" is incompatible with toasts`)},checkIfParamIsDeprecated=i=>{const r=isDeprecatedParameter(i);r&&warnAboutDeprecation(i,r)},showWarningsForParams=i=>{i.backdrop===!1&&i.allowOutsideClick&&warn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),i.theme&&!["light","dark","auto","minimal","borderless","embed-iframe"].includes(i.theme)&&warn(`Invalid theme "${i.theme}". Expected "light", "dark", "auto", "minimal", "borderless", or "embed-iframe"`);for(const r in i)checkIfParamIsValid(r),i.toast&&checkIfToastParamIsValid(r),checkIfParamIsDeprecated(r)};function update(i){const r=getContainer(),n=getPopup(),l=privateProps.innerParams.get(this);if(!n||hasClass(n,l.hideClass.popup)){warn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const w=filterValidParams(i),d=Object.assign({},l,w);showWarningsForParams(d),r.dataset.swal2Theme=d.theme,render(this,d),privateProps.innerParams.set(this,d),Object.defineProperties(this,{params:{value:Object.assign({},this.params,i),writable:!1,enumerable:!0}})}const filterValidParams=i=>{const r={};return Object.keys(i).forEach(n=>{isUpdatableParameter(n)?r[n]=i[n]:warn(`Invalid parameter to update: ${n}`)}),r};function _destroy(){const i=privateProps.domCache.get(this),r=privateProps.innerParams.get(this);if(!r){disposeWeakMaps(this);return}i.popup&&globalState.swalCloseEventFinishedCallback&&(globalState.swalCloseEventFinishedCallback(),delete globalState.swalCloseEventFinishedCallback),typeof r.didDestroy=="function"&&r.didDestroy(),globalState.eventEmitter.emit("didDestroy"),disposeSwal(this)}const disposeSwal=i=>{disposeWeakMaps(i),delete i.params,delete globalState.keydownHandler,delete globalState.keydownTarget,delete globalState.currentInstance},disposeWeakMaps=i=>{i.isAwaitingPromise?(unsetWeakMaps(privateProps,i),i.isAwaitingPromise=!0):(unsetWeakMaps(privateMethods,i),unsetWeakMaps(privateProps,i),delete i.isAwaitingPromise,delete i.disableButtons,delete i.enableButtons,delete i.getInput,delete i.disableInput,delete i.enableInput,delete i.hideLoading,delete i.disableLoading,delete i.showValidationMessage,delete i.resetValidationMessage,delete i.close,delete i.closePopup,delete i.closeModal,delete i.closeToast,delete i.rejectPromise,delete i.update,delete i._destroy)},unsetWeakMaps=(i,r)=>{for(const n in i)i[n].delete(r)};var instanceMethods=Object.freeze({__proto__:null,_destroy,close,closeModal:close,closePopup:close,closeToast:close,disableButtons,disableInput,disableLoading:hideLoading,enableButtons,enableInput,getInput,handleAwaitingPromise,hideLoading,rejectPromise,resetValidationMessage,showValidationMessage,update});const handlePopupClick=(i,r,n)=>{i.toast?handleToastClick(i,r,n):(handleModalMousedown(r),handleContainerMousedown(r),handleModalClick(i,r,n))},handleToastClick=(i,r,n)=>{r.popup.onclick=()=>{i&&(isAnyButtonShown(i)||i.timer||i.input)||n(DismissReason.close)}},isAnyButtonShown=i=>!!(i.showConfirmButton||i.showDenyButton||i.showCancelButton||i.showCloseButton);let ignoreOutsideClick=!1;const handleModalMousedown=i=>{i.popup.onmousedown=()=>{i.container.onmouseup=function(r){i.container.onmouseup=()=>{},r.target===i.container&&(ignoreOutsideClick=!0)}}},handleContainerMousedown=i=>{i.container.onmousedown=r=>{r.target===i.container&&r.preventDefault(),i.popup.onmouseup=function(n){i.popup.onmouseup=()=>{},(n.target===i.popup||n.target instanceof HTMLElement&&i.popup.contains(n.target))&&(ignoreOutsideClick=!0)}}},handleModalClick=(i,r,n)=>{r.container.onclick=l=>{if(ignoreOutsideClick){ignoreOutsideClick=!1;return}l.target===r.container&&callIfFunction(i.allowOutsideClick)&&n(DismissReason.backdrop)}},isJqueryElement=i=>typeof i=="object"&&i.jquery,isElement=i=>i instanceof Element||isJqueryElement(i),argsToParams=i=>{const r={};return typeof i[0]=="object"&&!isElement(i[0])?Object.assign(r,i[0]):["title","html","icon"].forEach((n,l)=>{const w=i[l];typeof w=="string"||isElement(w)?r[n]=w:w!==void 0&&error(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof w}`)}),r};function fire(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return new this(...r)}function mixin(i){class r extends this{_main(l,w){return super._main(l,Object.assign({},i,w))}}return r}const getTimerLeft=()=>globalState.timeout&&globalState.timeout.getTimerLeft(),stopTimer=()=>{if(globalState.timeout)return stopTimerProgressBar(),globalState.timeout.stop()},resumeTimer=()=>{if(globalState.timeout){const i=globalState.timeout.start();return animateTimerProgressBar(i),i}},toggleTimer=()=>{const i=globalState.timeout;return i&&(i.running?stopTimer():resumeTimer())},increaseTimer=i=>{if(globalState.timeout){const r=globalState.timeout.increase(i);return animateTimerProgressBar(r,!0),r}},isTimerRunning=()=>!!(globalState.timeout&&globalState.timeout.isRunning());let bodyClickListenerAdded=!1;const clickHandlers={};function bindClickHandler(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";clickHandlers[i]=this,bodyClickListenerAdded||(document.body.addEventListener("click",bodyClickListener),bodyClickListenerAdded=!0)}const bodyClickListener=i=>{for(let r=i.target;r&&r!==document;r=r.parentNode)for(const n in clickHandlers){const l=r.getAttribute(n);if(l){clickHandlers[n].fire({template:l});return}}};class EventEmitter{constructor(){this.events={}}_getHandlersByEventName(r){return typeof this.events[r]>"u"&&(this.events[r]=[]),this.events[r]}on(r,n){const l=this._getHandlersByEventName(r);l.includes(n)||l.push(n)}once(r,n){var l=this;const w=function(){l.removeListener(r,w);for(var d=arguments.length,f=new Array(d),a=0;a<d;a++)f[a]=arguments[a];n.apply(l,f)};this.on(r,w)}emit(r){for(var n=arguments.length,l=new Array(n>1?n-1:0),w=1;w<n;w++)l[w-1]=arguments[w];this._getHandlersByEventName(r).forEach(d=>{try{d.apply(this,l)}catch(f){console.error(f)}})}removeListener(r,n){const l=this._getHandlersByEventName(r),w=l.indexOf(n);w>-1&&l.splice(w,1)}removeAllListeners(r){this.events[r]!==void 0&&(this.events[r].length=0)}reset(){this.events={}}}globalState.eventEmitter=new EventEmitter;const on=(i,r)=>{globalState.eventEmitter.on(i,r)},once=(i,r)=>{globalState.eventEmitter.once(i,r)},off=(i,r)=>{if(!i){globalState.eventEmitter.reset();return}r?globalState.eventEmitter.removeListener(i,r):globalState.eventEmitter.removeAllListeners(i)};var staticMethods=Object.freeze({__proto__:null,argsToParams,bindClickHandler,clickCancel,clickConfirm,clickDeny,enableLoading:showLoading,fire,getActions,getCancelButton,getCloseButton,getConfirmButton,getContainer,getDenyButton,getFocusableElements,getFooter,getHtmlContainer,getIcon,getIconContent,getImage,getInputLabel,getLoader,getPopup,getProgressSteps,getTimerLeft,getTimerProgressBar,getTitle,getValidationMessage,increaseTimer,isDeprecatedParameter,isLoading,isTimerRunning,isUpdatableParameter,isValidParameter,isVisible,mixin,off,on,once,resumeTimer,showLoading,stopTimer,toggleTimer});class Timer{constructor(r,n){this.callback=r,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(r){const n=this.running;return n&&this.stop(),this.remaining+=r,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const swalStringParams=["swal-title","swal-html","swal-footer"],getTemplateParams=i=>{const r=typeof i.template=="string"?document.querySelector(i.template):i.template;if(!r)return{};const n=r.content;return showWarningsForElements(n),Object.assign(getSwalParams(n),getSwalFunctionParams(n),getSwalButtons(n),getSwalImage(n),getSwalIcon(n),getSwalInput(n),getSwalStringParams(n,swalStringParams))},getSwalParams=i=>{const r={};return Array.from(i.querySelectorAll("swal-param")).forEach(l=>{showWarningsForAttributes(l,["name","value"]);const w=l.getAttribute("name"),d=l.getAttribute("value");!w||!d||(typeof defaultParams[w]=="boolean"?r[w]=d!=="false":typeof defaultParams[w]=="object"?r[w]=JSON.parse(d):r[w]=d)}),r},getSwalFunctionParams=i=>{const r={};return Array.from(i.querySelectorAll("swal-function-param")).forEach(l=>{const w=l.getAttribute("name"),d=l.getAttribute("value");!w||!d||(r[w]=new Function(`return ${d}`)())}),r},getSwalButtons=i=>{const r={};return Array.from(i.querySelectorAll("swal-button")).forEach(l=>{showWarningsForAttributes(l,["type","color","aria-label"]);const w=l.getAttribute("type");!w||!["confirm","cancel","deny"].includes(w)||(r[`${w}ButtonText`]=l.innerHTML,r[`show${capitalizeFirstLetter(w)}Button`]=!0,l.hasAttribute("color")&&(r[`${w}ButtonColor`]=l.getAttribute("color")),l.hasAttribute("aria-label")&&(r[`${w}ButtonAriaLabel`]=l.getAttribute("aria-label")))}),r},getSwalImage=i=>{const r={},n=i.querySelector("swal-image");return n&&(showWarningsForAttributes(n,["src","width","height","alt"]),n.hasAttribute("src")&&(r.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(r.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(r.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(r.imageAlt=n.getAttribute("alt")||void 0)),r},getSwalIcon=i=>{const r={},n=i.querySelector("swal-icon");return n&&(showWarningsForAttributes(n,["type","color"]),n.hasAttribute("type")&&(r.icon=n.getAttribute("type")),n.hasAttribute("color")&&(r.iconColor=n.getAttribute("color")),r.iconHtml=n.innerHTML),r},getSwalInput=i=>{const r={},n=i.querySelector("swal-input");n&&(showWarningsForAttributes(n,["type","label","placeholder","value"]),r.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(r.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(r.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(r.inputValue=n.getAttribute("value")));const l=Array.from(i.querySelectorAll("swal-input-option"));return l.length&&(r.inputOptions={},l.forEach(w=>{showWarningsForAttributes(w,["value"]);const d=w.getAttribute("value");if(!d)return;const f=w.innerHTML;r.inputOptions[d]=f})),r},getSwalStringParams=(i,r)=>{const n={};for(const l in r){const w=r[l],d=i.querySelector(w);d&&(showWarningsForAttributes(d,[]),n[w.replace(/^swal-/,"")]=d.innerHTML.trim())}return n},showWarningsForElements=i=>{const r=swalStringParams.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(i.children).forEach(n=>{const l=n.tagName.toLowerCase();r.includes(l)||warn(`Unrecognized element <${l}>`)})},showWarningsForAttributes=(i,r)=>{Array.from(i.attributes).forEach(n=>{r.indexOf(n.name)===-1&&warn([`Unrecognized attribute "${n.name}" on <${i.tagName.toLowerCase()}>.`,`${r.length?`Allowed attributes are: ${r.join(", ")}`:"To set the value, use HTML within the element."}`])})},SHOW_CLASS_TIMEOUT=10,openPopup=i=>{const r=getContainer(),n=getPopup();typeof i.willOpen=="function"&&i.willOpen(n),globalState.eventEmitter.emit("willOpen",n);const w=window.getComputedStyle(document.body).overflowY;addClasses(r,n,i),setTimeout(()=>{setScrollingVisibility(r,n)},SHOW_CLASS_TIMEOUT),isModal()&&(fixScrollContainer(r,i.scrollbarPadding,w),setAriaHidden()),!isToast()&&!globalState.previousActiveElement&&(globalState.previousActiveElement=document.activeElement),typeof i.didOpen=="function"&&setTimeout(()=>i.didOpen(n)),globalState.eventEmitter.emit("didOpen",n),removeClass(r,swalClasses["no-transition"])},swalOpenAnimationFinished=i=>{const r=getPopup();if(i.target!==r)return;const n=getContainer();r.removeEventListener("animationend",swalOpenAnimationFinished),r.removeEventListener("transitionend",swalOpenAnimationFinished),n.style.overflowY="auto"},setScrollingVisibility=(i,r)=>{hasCssAnimation(r)?(i.style.overflowY="hidden",r.addEventListener("animationend",swalOpenAnimationFinished),r.addEventListener("transitionend",swalOpenAnimationFinished)):i.style.overflowY="auto"},fixScrollContainer=(i,r,n)=>{iOSfix(),r&&n!=="hidden"&&replaceScrollbarWithPadding(n),setTimeout(()=>{i.scrollTop=0})},addClasses=(i,r,n)=>{addClass(i,n.showClass.backdrop),n.animation?(r.style.setProperty("opacity","0","important"),show(r,"grid"),setTimeout(()=>{addClass(r,n.showClass.popup),r.style.removeProperty("opacity")},SHOW_CLASS_TIMEOUT)):show(r,"grid"),addClass([document.documentElement,document.body],swalClasses.shown),n.heightAuto&&n.backdrop&&!n.toast&&addClass([document.documentElement,document.body],swalClasses["height-auto"])};var defaultInputValidators={email:(i,r)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(i)?Promise.resolve():Promise.resolve(r||"Invalid email address"),url:(i,r)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(i)?Promise.resolve():Promise.resolve(r||"Invalid URL")};function setDefaultInputValidators(i){i.inputValidator||(i.input==="email"&&(i.inputValidator=defaultInputValidators.email),i.input==="url"&&(i.inputValidator=defaultInputValidators.url))}function validateCustomTargetElement(i){(!i.target||typeof i.target=="string"&&!document.querySelector(i.target)||typeof i.target!="string"&&!i.target.appendChild)&&(warn('Target parameter is not valid, defaulting to "body"'),i.target="body")}function setParameters(i){setDefaultInputValidators(i),i.showLoaderOnConfirm&&!i.preConfirm&&warn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),validateCustomTargetElement(i),typeof i.title=="string"&&(i.title=i.title.split(`
`).join("<br />")),init(i)}let currentInstance;var _promise=new WeakMap;class SweetAlert{constructor(){if(_classPrivateFieldInitSpec(this,_promise,void 0),typeof window>"u")return;currentInstance=this;for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];const w=Object.freeze(this.constructor.argsToParams(n));this.params=w,this.isAwaitingPromise=!1,_classPrivateFieldSet2(_promise,this,this._main(currentInstance.params))}_main(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(showWarningsForParams(Object.assign({},n,r)),globalState.currentInstance){const d=privateMethods.swalPromiseResolve.get(globalState.currentInstance),{isAwaitingPromise:f}=globalState.currentInstance;globalState.currentInstance._destroy(),f||d({isDismissed:!0}),isModal()&&unsetAriaHidden()}globalState.currentInstance=currentInstance;const l=prepareParams(r,n);setParameters(l),Object.freeze(l),globalState.timeout&&(globalState.timeout.stop(),delete globalState.timeout),clearTimeout(globalState.restoreFocusTimeout);const w=populateDomCache(currentInstance);return render(currentInstance,l),privateProps.innerParams.set(currentInstance,l),swalPromise(currentInstance,w,l)}then(r){return _classPrivateFieldGet2(_promise,this).then(r)}finally(r){return _classPrivateFieldGet2(_promise,this).finally(r)}}const swalPromise=(i,r,n)=>new Promise((l,w)=>{const d=f=>{i.close({isDismissed:!0,dismiss:f})};privateMethods.swalPromiseResolve.set(i,l),privateMethods.swalPromiseReject.set(i,w),r.confirmButton.onclick=()=>{handleConfirmButtonClick(i)},r.denyButton.onclick=()=>{handleDenyButtonClick(i)},r.cancelButton.onclick=()=>{handleCancelButtonClick(i,d)},r.closeButton.onclick=()=>{d(DismissReason.close)},handlePopupClick(n,r,d),addKeydownHandler(globalState,n,d),handleInputOptionsAndValue(i,n),openPopup(n),setupTimer(globalState,n,d),initFocus(r,n),setTimeout(()=>{r.container.scrollTop=0})}),prepareParams=(i,r)=>{const n=getTemplateParams(i),l=Object.assign({},defaultParams,r,n,i);return l.showClass=Object.assign({},defaultParams.showClass,l.showClass),l.hideClass=Object.assign({},defaultParams.hideClass,l.hideClass),l.animation===!1&&(l.showClass={backdrop:"swal2-noanimation"},l.hideClass={}),l},populateDomCache=i=>{const r={popup:getPopup(),container:getContainer(),actions:getActions(),confirmButton:getConfirmButton(),denyButton:getDenyButton(),cancelButton:getCancelButton(),loader:getLoader(),closeButton:getCloseButton(),validationMessage:getValidationMessage(),progressSteps:getProgressSteps()};return privateProps.domCache.set(i,r),r},setupTimer=(i,r,n)=>{const l=getTimerProgressBar();hide(l),r.timer&&(i.timeout=new Timer(()=>{n("timer"),delete i.timeout},r.timer),r.timerProgressBar&&(show(l),applyCustomClass(l,r,"timerProgressBar"),setTimeout(()=>{i.timeout&&i.timeout.running&&animateTimerProgressBar(r.timer)})))},initFocus=(i,r)=>{if(!r.toast){if(!callIfFunction(r.allowEnterKey)){warnAboutDeprecation("allowEnterKey"),blurActiveElement();return}focusAutofocus(i)||focusButton(i,r)||setFocus(-1,1)}},focusAutofocus=i=>{const r=Array.from(i.popup.querySelectorAll("[autofocus]"));for(const n of r)if(n instanceof HTMLElement&&isVisible$1(n))return n.focus(),!0;return!1},focusButton=(i,r)=>r.focusDeny&&isVisible$1(i.denyButton)?(i.denyButton.focus(),!0):r.focusCancel&&isVisible$1(i.cancelButton)?(i.cancelButton.focus(),!0):r.focusConfirm&&isVisible$1(i.confirmButton)?(i.confirmButton.focus(),!0):!1,blurActiveElement=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const i=new Date,r=localStorage.getItem("swal-initiation");r?(i.getTime()-Date.parse(r))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${i}`)}SweetAlert.prototype.disableButtons=disableButtons;SweetAlert.prototype.enableButtons=enableButtons;SweetAlert.prototype.getInput=getInput;SweetAlert.prototype.disableInput=disableInput;SweetAlert.prototype.enableInput=enableInput;SweetAlert.prototype.hideLoading=hideLoading;SweetAlert.prototype.disableLoading=hideLoading;SweetAlert.prototype.showValidationMessage=showValidationMessage;SweetAlert.prototype.resetValidationMessage=resetValidationMessage;SweetAlert.prototype.close=close;SweetAlert.prototype.closePopup=close;SweetAlert.prototype.closeModal=close;SweetAlert.prototype.closeToast=close;SweetAlert.prototype.rejectPromise=rejectPromise;SweetAlert.prototype.update=update;SweetAlert.prototype._destroy=_destroy;Object.assign(SweetAlert,staticMethods);Object.keys(instanceMethods).forEach(i=>{SweetAlert[i]=function(){return currentInstance&&currentInstance[i]?currentInstance[i](...arguments):null}});SweetAlert.DismissReason=DismissReason;SweetAlert.version="11.21.0";const Swal=SweetAlert;Swal.default=Swal;typeof document<"u"&&function(i,r){var n=i.createElement("style");if(i.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=r);else try{n.innerHTML=r}catch{n.innerText=r}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.1s, box-shadow 0.1s;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.1s, box-shadow 0.1s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-button-darken-hover: rgba(0, 0, 0, 0.1);--swal2-button-darken-active: rgba(0, 0, 0, 0.2);--swal2-button-transition: box-shadow 0.1s;--swal2-confirm-button-border: 0;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-deny-button-border: 0;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-cancel-button-border: 0;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(var(--swal2-button-darken-hover), var(--swal2-button-darken-hover))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(var(--swal2-button-darken-active), var(--swal2-button-darken-active))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-button-transition);box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:var(--swal2-confirm-button-border);border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:var(--swal2-deny-button-border);border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:var(--swal2-cancel-button-border);border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-outline)}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:1px solid #d9d9d9;border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const userIcon="/CodeZoo/assets/user-icon-white-1W__RJBm.png",iconUsuario="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12%202a5%205%200%201%200%205%205%205%205%200%200%200-5-5zm0%208a3%203%200%201%201%203-3%203%203%200%200%201-3%203zm9%2011v-1a7%207%200%200%200-7-7h-4a7%207%200%200%200-7%207v1h2v-1a5%205%200%200%201%205-5h4a5%205%200%200%201%205%205v1z'/%3e%3c/svg%3e",iconLogOut="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%2013v-2H7V8l-5%204%205%204v-3z'/%3e%3cpath%20d='M20%203h-9c-1.103%200-2%20.897-2%202v4h2V5h9v14h-9v-4H9v4c0%201.103.897%202%202%202h9c1.103%200%202-.897%202-2V5c0-1.103-.897-2-2-2z'/%3e%3c/svg%3e",iconForo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5%2018v3.766l1.515-.909L11.277%2018H16c1.103%200%202-.897%202-2V8c0-1.103-.897-2-2-2H4c-1.103%200-2%20.897-2%202v8c0%201.103.897%202%202%202h1zM4%208h12v8h-5.277L7%2018.234V16H4V8z'/%3e%3cpath%20d='M20%202H8c-1.103%200-2%20.897-2%202h12c1.103%200%202%20.897%202%202v8c1.103%200%202-.897%202-2V4c0-1.103-.897-2-2-2z'/%3e%3c/svg%3e",Navbar=({onLoginClick:i})=>{const r=useNavigate(),[n,l]=reactExports.useState(!1),[w,d]=reactExports.useState(!1),[f,a]=reactExports.useState("");reactExports.useEffect(()=>{const S=localStorage.getItem("token"),E=localStorage.getItem("username");S?(l(!0),a(E||"")):(l(!1),a(""))},[]);const u=S=>{S.preventDefault(),localStorage.getItem("token")?r("/home"):Swal.fire({icon:"error",title:"Acceso denegado",text:"Debes iniciar sesion para acceder a esta pagina"}).then(h=>{h.isConfirmed&&i()})},g=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),l(!1),r("/")},$=()=>{d(!w)},v=S=>{r(S),d(!1)};return jsxRuntimeExports.jsxs("header",{className:"header",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"logo",children:"CodeZoo"}),jsxRuntimeExports.jsxs("nav",{className:"navbar",children:[jsxRuntimeExports.jsx("a",{href:"/",children:"Inicio"}),jsxRuntimeExports.jsx("a",{href:"#",onClick:u,children:"Actividades"}),jsxRuntimeExports.jsx("a",{href:"/info",children:"Acerca De"}),n?jsxRuntimeExports.jsxs("div",{className:"user-menu",children:[jsxRuntimeExports.jsx("img",{src:userIcon,className:"user-icon",alt:"",onClick:$}),jsxRuntimeExports.jsx("span",{className:"username",onClick:$,children:f}),w&&jsxRuntimeExports.jsx("div",{className:`menu-dropdown ${w?"active":""}`,children:jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{onClick:()=>v("/perfil"),children:[" Ver mi perfil ",jsxRuntimeExports.jsx("img",{src:iconUsuario,className:"icono-menu"})," "]}),jsxRuntimeExports.jsxs("li",{onClick:()=>v("/foro"),children:["Foro de ayuda ",jsxRuntimeExports.jsx("img",{src:iconForo,className:"icono-menu"})]}),jsxRuntimeExports.jsxs("li",{onClick:g,children:["Cerrar sesion ",jsxRuntimeExports.jsx("img",{src:iconLogOut,className:"icono-menu"})]})]})})]}):jsxRuntimeExports.jsx("button",{className:"btnLogin",onClick:i,children:"Ingresar"})]})]})},imageWelcome="/CodeZoo/assets/animal-welcome-CqZswrsA.gif";var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(i,r){if(i==null)return{};var n=_objectWithoutPropertiesLoose(i,r),l,w;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);for(w=0;w<d.length;w++)l=d[w],!(r.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(i,l)&&(n[l]=i[l])}return n}function _objectWithoutPropertiesLoose(i,r){if(i==null)return{};var n={};for(var l in i)if(Object.prototype.hasOwnProperty.call(i,l)){if(r.indexOf(l)>=0)continue;n[l]=i[l]}return n}function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i[l]=n[l])}return i},_extends.apply(this,arguments)}function ownKeys(i,r){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);r&&(l=l.filter(function(w){return Object.getOwnPropertyDescriptor(i,w).enumerable})),n.push.apply(n,l)}return n}function _objectSpread(i){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach(function(l){_defineProperty(i,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(n,l))})}return i}function _defineProperty(i,r,n){return r=_toPropertyKey(r),r in i?Object.defineProperty(i,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[r]=n,i}function _toPropertyKey(i){var r=_toPrimitive(i,"string");return typeof r=="symbol"?r:r+""}function _toPrimitive(i,r){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var l=n.call(i,r);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function Tree2Element(i){return i&&i.map((r,n)=>React.createElement(r.tag,_objectSpread({key:n},r.attr),Tree2Element(r.child)))}function GenIcon(i){return r=>React.createElement(IconBase,_extends({attr:_objectSpread({},i.attr)},r),Tree2Element(i.child))}function IconBase(i){var r=n=>{var{attr:l,size:w,title:d}=i,f=_objectWithoutProperties(i,_excluded),a=w||n.size||"1em",u;return n.className&&(u=n.className),i.className&&(u=(u?u+" ":"")+i.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,l,f,{className:u,style:_objectSpread(_objectSpread({color:i.color||n.color},n.style),i.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),d&&React.createElement("title",null,d),i.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,n=>r(n)):r(DefaultContext)}function IoClose(i){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(i)}function IoLockClosed(i){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M368 192h-16v-80a96 96 0 1 0-192 0v80h-16a64.07 64.07 0 0 0-64 64v176a64.07 64.07 0 0 0 64 64h224a64.07 64.07 0 0 0 64-64V256a64.07 64.07 0 0 0-64-64zm-48 0H192v-80a64 64 0 1 1 128 0z"},child:[]}]})(i)}function IoMail(i){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M424 80H88a56.06 56.06 0 0 0-56 56v240a56.06 56.06 0 0 0 56 56h336a56.06 56.06 0 0 0 56-56V136a56.06 56.06 0 0 0-56-56zm-14.18 92.63-144 112a16 16 0 0 1-19.64 0l-144-112a16 16 0 1 1 19.64-25.26L256 251.73l134.18-104.36a16 16 0 0 1 19.64 25.26z"},child:[]}]})(i)}function IoPerson(i){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6zM432 480H80a31 31 0 0 1-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75 1.94 10.73-.68 21.34-7.18 29.11A31 31 0 0 1 432 480z"},child:[]}]})(i)}function bind(i,r){return function(){return i.apply(r,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(i=>r=>{const n=toString.call(r);return i[n]||(i[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=i=>(i=i.toLowerCase(),r=>kindOf(r)===i),typeOfTest=i=>r=>typeof r===i,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer(i){return i!==null&&!isUndefined(i)&&i.constructor!==null&&!isUndefined(i.constructor)&&isFunction$1(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(i){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(i):r=i&&i.buffer&&isArrayBuffer(i.buffer),r}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$1=i=>i!==null&&typeof i=="object",isBoolean=i=>i===!0||i===!1,isPlainObject=i=>{if(kindOf(i)!=="object")return!1;const r=getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=i=>isObject$1(i)&&isFunction$1(i.pipe),isFormData=i=>{let r;return i&&(typeof FormData=="function"&&i instanceof FormData||isFunction$1(i.append)&&((r=kindOf(i))==="formdata"||r==="object"&&isFunction$1(i.toString)&&i.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(i,r,{allOwnKeys:n=!1}={}){if(i===null||typeof i>"u")return;let l,w;if(typeof i!="object"&&(i=[i]),isArray$1(i))for(l=0,w=i.length;l<w;l++)r.call(null,i[l],l,i);else{const d=n?Object.getOwnPropertyNames(i):Object.keys(i),f=d.length;let a;for(l=0;l<f;l++)a=d[l],r.call(null,i[a],a,i)}}function findKey(i,r){r=r.toLowerCase();const n=Object.keys(i);let l=n.length,w;for(;l-- >0;)if(w=n[l],r===w.toLowerCase())return w;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=i=>!isUndefined(i)&&i!==_global;function merge$1(){const{caseless:i}=isContextDefined(this)&&this||{},r={},n=(l,w)=>{const d=i&&findKey(r,w)||w;isPlainObject(r[d])&&isPlainObject(l)?r[d]=merge$1(r[d],l):isPlainObject(l)?r[d]=merge$1({},l):isArray$1(l)?r[d]=l.slice():r[d]=l};for(let l=0,w=arguments.length;l<w;l++)arguments[l]&&forEach(arguments[l],n);return r}const extend=(i,r,n,{allOwnKeys:l}={})=>(forEach(r,(w,d)=>{n&&isFunction$1(w)?i[d]=bind(w,n):i[d]=w},{allOwnKeys:l}),i),stripBOM=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),inherits=(i,r,n,l)=>{i.prototype=Object.create(r.prototype,l),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:r.prototype}),n&&Object.assign(i.prototype,n)},toFlatObject=(i,r,n,l)=>{let w,d,f;const a={};if(r=r||{},i==null)return r;do{for(w=Object.getOwnPropertyNames(i),d=w.length;d-- >0;)f=w[d],(!l||l(f,i,r))&&!a[f]&&(r[f]=i[f],a[f]=!0);i=n!==!1&&getPrototypeOf(i)}while(i&&(!n||n(i,r))&&i!==Object.prototype);return r},endsWith=(i,r,n)=>{i=String(i),(n===void 0||n>i.length)&&(n=i.length),n-=r.length;const l=i.indexOf(r,n);return l!==-1&&l===n},toArray=i=>{if(!i)return null;if(isArray$1(i))return i;let r=i.length;if(!isNumber$1(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=i[r];return n},isTypedArray=(i=>r=>i&&r instanceof i)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(i,r)=>{const l=(i&&i[Symbol.iterator]).call(i);let w;for(;(w=l.next())&&!w.done;){const d=w.value;r.call(i,d[0],d[1])}},matchAll=(i,r)=>{let n;const l=[];for(;(n=i.exec(r))!==null;)l.push(n);return l},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,l,w){return l.toUpperCase()+w}),hasOwnProperty=(({hasOwnProperty:i})=>(r,n)=>i.call(r,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(i,r)=>{const n=Object.getOwnPropertyDescriptors(i),l={};forEach(n,(w,d)=>{let f;(f=r(w,d,i))!==!1&&(l[d]=f||w)}),Object.defineProperties(i,l)},freezeMethods=i=>{reduceDescriptors(i,(r,n)=>{if(isFunction$1(i)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const l=i[n];if(isFunction$1(l)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(i,r)=>{const n={},l=w=>{w.forEach(d=>{n[d]=!0})};return isArray$1(i)?l(i):l(String(i).split(r)),n},noop$2=()=>{},toFiniteNumber=(i,r)=>i!=null&&Number.isFinite(i=+i)?i:r;function isSpecCompliantForm(i){return!!(i&&isFunction$1(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const toJSONObject=i=>{const r=new Array(10),n=(l,w)=>{if(isObject$1(l)){if(r.indexOf(l)>=0)return;if(!("toJSON"in l)){r[w]=l;const d=isArray$1(l)?[]:{};return forEach(l,(f,a)=>{const u=n(f,w+1);!isUndefined(u)&&(d[a]=u)}),r[w]=void 0,d}}return l};return n(i,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=i=>i&&(isObject$1(i)||isFunction$1(i))&&isFunction$1(i.then)&&isFunction$1(i.catch),_setImmediate=((i,r)=>i?setImmediate:r?((n,l)=>(_global.addEventListener("message",({source:w,data:d})=>{w===_global&&d===n&&l.length&&l.shift()()},!1),w=>{l.push(w),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$2={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber:isNumber$1,isBoolean,isObject:isObject$1,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$1,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError$1(i,r,n,l,w){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),l&&(this.request=l),w&&(this.response=w,this.status=w.status?w.status:null)}utils$2.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors$1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{descriptors$1[i]={value:i}});Object.defineProperties(AxiosError$1,descriptors$1);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(i,r,n,l,w,d)=>{const f=Object.create(prototype$1);return utils$2.toFlatObject(i,f,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),AxiosError$1.call(f,i.message,r,n,l,w),f.cause=i,f.name=i.name,d&&Object.assign(f,d),f};const httpAdapter=null;function isVisitable(i){return utils$2.isPlainObject(i)||utils$2.isArray(i)}function removeBrackets(i){return utils$2.endsWith(i,"[]")?i.slice(0,-2):i}function renderKey(i,r,n){return i?i.concat(r).map(function(w,d){return w=removeBrackets(w),!n&&d?"["+w+"]":w}).join(n?".":""):r}function isFlatArray(i){return utils$2.isArray(i)&&!i.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function(r){return/^is[A-Z]/.test(r)});function toFormData$1(i,r,n){if(!utils$2.isObject(i))throw new TypeError("target must be an object");r=r||new FormData,n=utils$2.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,m){return!utils$2.isUndefined(m[b])});const l=n.metaTokens,w=n.visitor||$,d=n.dots,f=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(r);if(!utils$2.isFunction(w))throw new TypeError("visitor must be a function");function g(h){if(h===null)return"";if(utils$2.isDate(h))return h.toISOString();if(!u&&utils$2.isBlob(h))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(h)||utils$2.isTypedArray(h)?u&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function $(h,b,m){let p=h;if(h&&!m&&typeof h=="object"){if(utils$2.endsWith(b,"{}"))b=l?b:b.slice(0,-2),h=JSON.stringify(h);else if(utils$2.isArray(h)&&isFlatArray(h)||(utils$2.isFileList(h)||utils$2.endsWith(b,"[]"))&&(p=utils$2.toArray(h)))return b=removeBrackets(b),p.forEach(function(y,x){!(utils$2.isUndefined(y)||y===null)&&r.append(f===!0?renderKey([b],x,d):f===null?b:b+"[]",g(y))}),!1}return isVisitable(h)?!0:(r.append(renderKey(m,b,d),g(h)),!1)}const v=[],S=Object.assign(predicates,{defaultVisitor:$,convertValue:g,isVisitable});function E(h,b){if(!utils$2.isUndefined(h)){if(v.indexOf(h)!==-1)throw Error("Circular reference detected in "+b.join("."));v.push(h),utils$2.forEach(h,function(p,_){(!(utils$2.isUndefined(p)||p===null)&&w.call(r,p,utils$2.isString(_)?_.trim():_,b,S))===!0&&E(p,b?b.concat(_):[_])}),v.pop()}}if(!utils$2.isObject(i))throw new TypeError("data must be an object");return E(i),r}function encode$1(i){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(l){return r[l]})}function AxiosURLSearchParams(i,r){this._pairs=[],i&&toFormData$1(i,this,r)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(r,n){this._pairs.push([r,n])};prototype.toString=function(r){const n=r?function(l){return r.call(this,l,encode$1)}:encode$1;return this._pairs.map(function(w){return n(w[0])+"="+n(w[1])},"").join("&")};function encode(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(i,r,n){if(!r)return i;const l=n&&n.encode||encode;utils$2.isFunction(n)&&(n={serialize:n});const w=n&&n.serialize;let d;if(w?d=w(r,n):d=utils$2.isURLSearchParams(r)?r.toString():new AxiosURLSearchParams(r,n).toString(l),d){const f=i.indexOf("#");f!==-1&&(i=i.slice(0,f)),i+=(i.indexOf("?")===-1?"?":"&")+d}return i}class InterceptorManager{constructor(){this.handlers=[]}use(r,n,l){return this.handlers.push({fulfilled:r,rejected:n,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){utils$2.forEach(this.handlers,function(l){l!==null&&r(l)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils$1,...platform$1};function toURLEncodedForm(i,r){return toFormData$1(i,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,l,w,d){return platform.isNode&&utils$2.isBuffer(n)?(this.append(l,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},r))}function parsePropPath(i){return utils$2.matchAll(/\w+|\[(\w*)]/g,i).map(r=>r[0]==="[]"?"":r[1]||r[0])}function arrayToObject(i){const r={},n=Object.keys(i);let l;const w=n.length;let d;for(l=0;l<w;l++)d=n[l],r[d]=i[d];return r}function formDataToJSON(i){function r(n,l,w,d){let f=n[d++];if(f==="__proto__")return!0;const a=Number.isFinite(+f),u=d>=n.length;return f=!f&&utils$2.isArray(w)?w.length:f,u?(utils$2.hasOwnProp(w,f)?w[f]=[w[f],l]:w[f]=l,!a):((!w[f]||!utils$2.isObject(w[f]))&&(w[f]=[]),r(n,l,w[f],d)&&utils$2.isArray(w[f])&&(w[f]=arrayToObject(w[f])),!a)}if(utils$2.isFormData(i)&&utils$2.isFunction(i.entries)){const n={};return utils$2.forEachEntry(i,(l,w)=>{r(parsePropPath(l),w,n,0)}),n}return null}function stringifySafely(i,r,n){if(utils$2.isString(i))try{return(r||JSON.parse)(i),utils$2.trim(i)}catch(l){if(l.name!=="SyntaxError")throw l}return(n||JSON.stringify)(i)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const l=n.getContentType()||"",w=l.indexOf("application/json")>-1,d=utils$2.isObject(r);if(d&&utils$2.isHTMLForm(r)&&(r=new FormData(r)),utils$2.isFormData(r))return w?JSON.stringify(formDataToJSON(r)):r;if(utils$2.isArrayBuffer(r)||utils$2.isBuffer(r)||utils$2.isStream(r)||utils$2.isFile(r)||utils$2.isBlob(r)||utils$2.isReadableStream(r))return r;if(utils$2.isArrayBufferView(r))return r.buffer;if(utils$2.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let a;if(d){if(l.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(r,this.formSerializer).toString();if((a=utils$2.isFileList(r))||l.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return toFormData$1(a?{"files[]":r}:r,u&&new u,this.formSerializer)}}return d||w?(n.setContentType("application/json",!1),stringifySafely(r)):r}],transformResponse:[function(r){const n=this.transitional||defaults$1.transitional,l=n&&n.forcedJSONParsing,w=this.responseType==="json";if(utils$2.isResponse(r)||utils$2.isReadableStream(r))return r;if(r&&utils$2.isString(r)&&(l&&!this.responseType||w)){const f=!(n&&n.silentJSONParsing)&&w;try{return JSON.parse(r)}catch(a){if(f)throw a.name==="SyntaxError"?AxiosError$1.from(a,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):a}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],i=>{defaults$1.headers[i]={}});const ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=i=>{const r={};let n,l,w;return i&&i.split(`
`).forEach(function(f){w=f.indexOf(":"),n=f.substring(0,w).trim().toLowerCase(),l=f.substring(w+1).trim(),!(!n||r[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?r[n]?r[n].push(l):r[n]=[l]:r[n]=r[n]?r[n]+", "+l:l)}),r},$internals=Symbol("internals");function normalizeHeader(i){return i&&String(i).trim().toLowerCase()}function normalizeValue(i){return i===!1||i==null?i:utils$2.isArray(i)?i.map(normalizeValue):String(i)}function parseTokens(i){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=n.exec(i);)r[l[1]]=l[2];return r}const isValidHeaderName=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function matchHeaderValue(i,r,n,l,w){if(utils$2.isFunction(l))return l.call(this,r,n);if(w&&(r=n),!!utils$2.isString(r)){if(utils$2.isString(l))return r.indexOf(l)!==-1;if(utils$2.isRegExp(l))return l.test(r)}}function formatHeader(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,l)=>n.toUpperCase()+l)}function buildAccessors(i,r){const n=utils$2.toCamelCase(" "+r);["get","set","has"].forEach(l=>{Object.defineProperty(i,l+n,{value:function(w,d,f){return this[l].call(this,r,w,d,f)},configurable:!0})})}let AxiosHeaders$1=class{constructor(r){r&&this.set(r)}set(r,n,l){const w=this;function d(a,u,g){const $=normalizeHeader(u);if(!$)throw new Error("header name must be a non-empty string");const v=utils$2.findKey(w,$);(!v||w[v]===void 0||g===!0||g===void 0&&w[v]!==!1)&&(w[v||u]=normalizeValue(a))}const f=(a,u)=>utils$2.forEach(a,(g,$)=>d(g,$,u));if(utils$2.isPlainObject(r)||r instanceof this.constructor)f(r,n);else if(utils$2.isString(r)&&(r=r.trim())&&!isValidHeaderName(r))f(parseHeaders(r),n);else if(utils$2.isHeaders(r))for(const[a,u]of r.entries())d(u,a,l);else r!=null&&d(n,r,l);return this}get(r,n){if(r=normalizeHeader(r),r){const l=utils$2.findKey(this,r);if(l){const w=this[l];if(!n)return w;if(n===!0)return parseTokens(w);if(utils$2.isFunction(n))return n.call(this,w,l);if(utils$2.isRegExp(n))return n.exec(w);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=normalizeHeader(r),r){const l=utils$2.findKey(this,r);return!!(l&&this[l]!==void 0&&(!n||matchHeaderValue(this,this[l],l,n)))}return!1}delete(r,n){const l=this;let w=!1;function d(f){if(f=normalizeHeader(f),f){const a=utils$2.findKey(l,f);a&&(!n||matchHeaderValue(l,l[a],a,n))&&(delete l[a],w=!0)}}return utils$2.isArray(r)?r.forEach(d):d(r),w}clear(r){const n=Object.keys(this);let l=n.length,w=!1;for(;l--;){const d=n[l];(!r||matchHeaderValue(this,this[d],d,r,!0))&&(delete this[d],w=!0)}return w}normalize(r){const n=this,l={};return utils$2.forEach(this,(w,d)=>{const f=utils$2.findKey(l,d);if(f){n[f]=normalizeValue(w),delete n[d];return}const a=r?formatHeader(d):String(d).trim();a!==d&&delete n[d],n[a]=normalizeValue(w),l[a]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return utils$2.forEach(this,(l,w)=>{l!=null&&l!==!1&&(n[w]=r&&utils$2.isArray(l)?l.join(", "):l)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const l=new this(r);return n.forEach(w=>l.set(w)),l}static accessor(r){const l=(this[$internals]=this[$internals]={accessors:{}}).accessors,w=this.prototype;function d(f){const a=normalizeHeader(f);l[a]||(buildAccessors(w,f),l[a]=!0)}return utils$2.isArray(r)?r.forEach(d):d(r),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$2.reduceDescriptors(AxiosHeaders$1.prototype,({value:i},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>i,set(l){this[n]=l}}});utils$2.freezeMethods(AxiosHeaders$1);function transformData(i,r){const n=this||defaults$1,l=r||n,w=AxiosHeaders$1.from(l.headers);let d=l.data;return utils$2.forEach(i,function(a){d=a.call(n,d,w.normalize(),r?r.status:void 0)}),w.normalize(),d}function isCancel$1(i){return!!(i&&i.__CANCEL__)}function CanceledError$1(i,r,n){AxiosError$1.call(this,i??"canceled",AxiosError$1.ERR_CANCELED,r,n),this.name="CanceledError"}utils$2.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(i,r,n){const l=n.config.validateStatus;!n.status||!l||l(n.status)?i(n):r(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(i){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return r&&r[1]||""}function speedometer(i,r){i=i||10;const n=new Array(i),l=new Array(i);let w=0,d=0,f;return r=r!==void 0?r:1e3,function(u){const g=Date.now(),$=l[d];f||(f=g),n[w]=u,l[w]=g;let v=d,S=0;for(;v!==w;)S+=n[v++],v=v%i;if(w=(w+1)%i,w===d&&(d=(d+1)%i),g-f<r)return;const E=$&&g-$;return E?Math.round(S*1e3/E):void 0}}function throttle(i,r){let n=0,l=1e3/r,w,d;const f=(g,$=Date.now())=>{n=$,w=null,d&&(clearTimeout(d),d=null),i.apply(null,g)};return[(...g)=>{const $=Date.now(),v=$-n;v>=l?f(g,$):(w=g,d||(d=setTimeout(()=>{d=null,f(w)},l-v)))},()=>w&&f(w)]}const progressEventReducer=(i,r,n=3)=>{let l=0;const w=speedometer(50,250);return throttle(d=>{const f=d.loaded,a=d.lengthComputable?d.total:void 0,u=f-l,g=w(u),$=f<=a;l=f;const v={loaded:f,total:a,progress:a?f/a:void 0,bytes:u,rate:g||void 0,estimated:g&&a&&$?(a-f)/g:void 0,event:d,lengthComputable:a!=null,[r?"download":"upload"]:!0};i(v)},n)},progressEventDecorator=(i,r)=>{const n=i!=null;return[l=>r[0]({lengthComputable:n,total:i,loaded:l}),r[1]]},asyncDecorator=i=>(...r)=>utils$2.asap(()=>i(...r)),isURLSameOrigin=platform.hasStandardBrowserEnv?((i,r)=>n=>(n=new URL(n,platform.origin),i.protocol===n.protocol&&i.host===n.host&&(r||i.port===n.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(i,r,n,l,w,d){const f=[i+"="+encodeURIComponent(r)];utils$2.isNumber(n)&&f.push("expires="+new Date(n).toGMTString()),utils$2.isString(l)&&f.push("path="+l),utils$2.isString(w)&&f.push("domain="+w),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read(i){const r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function combineURLs(i,r){return r?i.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):i}function buildFullPath(i,r,n){let l=!isAbsoluteURL(r);return i&&(l||n==!1)?combineURLs(i,r):r}const headersToObject=i=>i instanceof AxiosHeaders$1?{...i}:i;function mergeConfig$1(i,r){r=r||{};const n={};function l(g,$,v,S){return utils$2.isPlainObject(g)&&utils$2.isPlainObject($)?utils$2.merge.call({caseless:S},g,$):utils$2.isPlainObject($)?utils$2.merge({},$):utils$2.isArray($)?$.slice():$}function w(g,$,v,S){if(utils$2.isUndefined($)){if(!utils$2.isUndefined(g))return l(void 0,g,v,S)}else return l(g,$,v,S)}function d(g,$){if(!utils$2.isUndefined($))return l(void 0,$)}function f(g,$){if(utils$2.isUndefined($)){if(!utils$2.isUndefined(g))return l(void 0,g)}else return l(void 0,$)}function a(g,$,v){if(v in r)return l(g,$);if(v in i)return l(void 0,g)}const u={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:a,headers:(g,$,v)=>w(headersToObject(g),headersToObject($),v,!0)};return utils$2.forEach(Object.keys(Object.assign({},i,r)),function($){const v=u[$]||w,S=v(i[$],r[$],$);utils$2.isUndefined(S)&&v!==a||(n[$]=S)}),n}const resolveConfig=i=>{const r=mergeConfig$1({},i);let{data:n,withXSRFToken:l,xsrfHeaderName:w,xsrfCookieName:d,headers:f,auth:a}=r;r.headers=f=AxiosHeaders$1.from(f),r.url=buildURL(buildFullPath(r.baseURL,r.url,r.allowAbsoluteUrls),i.params,i.paramsSerializer),a&&f.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(utils$2.isFormData(n)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((u=f.getContentType())!==!1){const[g,...$]=u?u.split(";").map(v=>v.trim()).filter(Boolean):[];f.setContentType([g||"multipart/form-data",...$].join("; "))}}if(platform.hasStandardBrowserEnv&&(l&&utils$2.isFunction(l)&&(l=l(r)),l||l!==!1&&isURLSameOrigin(r.url))){const g=w&&d&&cookies.read(d);g&&f.set(w,g)}return r},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(i){return new Promise(function(n,l){const w=resolveConfig(i);let d=w.data;const f=AxiosHeaders$1.from(w.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:g}=w,$,v,S,E,h;function b(){E&&E(),h&&h(),w.cancelToken&&w.cancelToken.unsubscribe($),w.signal&&w.signal.removeEventListener("abort",$)}let m=new XMLHttpRequest;m.open(w.method.toUpperCase(),w.url,!0),m.timeout=w.timeout;function p(){if(!m)return;const y=AxiosHeaders$1.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),A={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:y,config:i,request:m};settle(function(C){n(C),b()},function(C){l(C),b()},A),m=null}"onloadend"in m?m.onloadend=p:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(p)},m.onabort=function(){m&&(l(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,i,m)),m=null)},m.onerror=function(){l(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,i,m)),m=null},m.ontimeout=function(){let x=w.timeout?"timeout of "+w.timeout+"ms exceeded":"timeout exceeded";const A=w.transitional||transitionalDefaults;w.timeoutErrorMessage&&(x=w.timeoutErrorMessage),l(new AxiosError$1(x,A.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,i,m)),m=null},d===void 0&&f.setContentType(null),"setRequestHeader"in m&&utils$2.forEach(f.toJSON(),function(x,A){m.setRequestHeader(A,x)}),utils$2.isUndefined(w.withCredentials)||(m.withCredentials=!!w.withCredentials),a&&a!=="json"&&(m.responseType=w.responseType),g&&([S,h]=progressEventReducer(g,!0),m.addEventListener("progress",S)),u&&m.upload&&([v,E]=progressEventReducer(u),m.upload.addEventListener("progress",v),m.upload.addEventListener("loadend",E)),(w.cancelToken||w.signal)&&($=y=>{m&&(l(!y||y.type?new CanceledError$1(null,i,m):y),m.abort(),m=null)},w.cancelToken&&w.cancelToken.subscribe($),w.signal&&(w.signal.aborted?$():w.signal.addEventListener("abort",$)));const _=parseProtocol(w.url);if(_&&platform.protocols.indexOf(_)===-1){l(new AxiosError$1("Unsupported protocol "+_+":",AxiosError$1.ERR_BAD_REQUEST,i));return}m.send(d||null)})},composeSignals=(i,r)=>{const{length:n}=i=i?i.filter(Boolean):[];if(r||n){let l=new AbortController,w;const d=function(g){if(!w){w=!0,a();const $=g instanceof Error?g:this.reason;l.abort($ instanceof AxiosError$1?$:new CanceledError$1($ instanceof Error?$.message:$))}};let f=r&&setTimeout(()=>{f=null,d(new AxiosError$1(`timeout ${r} of ms exceeded`,AxiosError$1.ETIMEDOUT))},r);const a=()=>{i&&(f&&clearTimeout(f),f=null,i.forEach(g=>{g.unsubscribe?g.unsubscribe(d):g.removeEventListener("abort",d)}),i=null)};i.forEach(g=>g.addEventListener("abort",d));const{signal:u}=l;return u.unsubscribe=()=>utils$2.asap(a),u}},streamChunk=function*(i,r){let n=i.byteLength;if(n<r){yield i;return}let l=0,w;for(;l<n;)w=l+r,yield i.slice(l,w),l=w},readBytes=async function*(i,r){for await(const n of readStream(i))yield*streamChunk(n,r)},readStream=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const r=i.getReader();try{for(;;){const{done:n,value:l}=await r.read();if(n)break;yield l}}finally{await r.cancel()}},trackStream=(i,r,n,l)=>{const w=readBytes(i,r);let d=0,f,a=u=>{f||(f=!0,l&&l(u))};return new ReadableStream({async pull(u){try{const{done:g,value:$}=await w.next();if(g){a(),u.close();return}let v=$.byteLength;if(n){let S=d+=v;n(S)}u.enqueue(new Uint8Array($))}catch(g){throw a(g),g}},cancel(u){return a(u),w.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(i=>r=>i.encode(r))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),test=(i,...r)=>{try{return!!i(...r)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let i=!1;const r=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!r}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$2.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(i=>i.body)};isFetchSupported&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!resolvers[r]&&(resolvers[r]=utils$2.isFunction(i[r])?n=>n[r]():(n,l)=>{throw new AxiosError$1(`Response type '${r}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,l)})})})(new Response);const getBodyLength=async i=>{if(i==null)return 0;if(utils$2.isBlob(i))return i.size;if(utils$2.isSpecCompliantForm(i))return(await new Request(platform.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(utils$2.isArrayBufferView(i)||utils$2.isArrayBuffer(i))return i.byteLength;if(utils$2.isURLSearchParams(i)&&(i=i+""),utils$2.isString(i))return(await encodeText(i)).byteLength},resolveBodyLength=async(i,r)=>{const n=utils$2.toFiniteNumber(i.getContentLength());return n??getBodyLength(r)},fetchAdapter=isFetchSupported&&(async i=>{let{url:r,method:n,data:l,signal:w,cancelToken:d,timeout:f,onDownloadProgress:a,onUploadProgress:u,responseType:g,headers:$,withCredentials:v="same-origin",fetchOptions:S}=resolveConfig(i);g=g?(g+"").toLowerCase():"text";let E=composeSignals([w,d&&d.toAbortSignal()],f),h;const b=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let m;try{if(u&&supportsRequestStream&&n!=="get"&&n!=="head"&&(m=await resolveBodyLength($,l))!==0){let A=new Request(r,{method:"POST",body:l,duplex:"half"}),R;if(utils$2.isFormData(l)&&(R=A.headers.get("content-type"))&&$.setContentType(R),A.body){const[C,k]=progressEventDecorator(m,progressEventReducer(asyncDecorator(u)));l=trackStream(A.body,DEFAULT_CHUNK_SIZE,C,k)}}utils$2.isString(v)||(v=v?"include":"omit");const p="credentials"in Request.prototype;h=new Request(r,{...S,signal:E,method:n.toUpperCase(),headers:$.normalize().toJSON(),body:l,duplex:"half",credentials:p?v:void 0});let _=await fetch(h);const y=supportsResponseStream&&(g==="stream"||g==="response");if(supportsResponseStream&&(a||y&&b)){const A={};["status","statusText","headers"].forEach(D=>{A[D]=_[D]});const R=utils$2.toFiniteNumber(_.headers.get("content-length")),[C,k]=a&&progressEventDecorator(R,progressEventReducer(asyncDecorator(a),!0))||[];_=new Response(trackStream(_.body,DEFAULT_CHUNK_SIZE,C,()=>{k&&k(),b&&b()}),A)}g=g||"text";let x=await resolvers[utils$2.findKey(resolvers,g)||"text"](_,i);return!y&&b&&b(),await new Promise((A,R)=>{settle(A,R,{data:x,headers:AxiosHeaders$1.from(_.headers),status:_.status,statusText:_.statusText,config:i,request:h})})}catch(p){throw b&&b(),p&&p.name==="TypeError"&&/fetch/i.test(p.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,i,h),{cause:p.cause||p}):AxiosError$1.from(p,p&&p.code,i,h)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$2.forEach(knownAdapters,(i,r)=>{if(i){try{Object.defineProperty(i,"name",{value:r})}catch{}Object.defineProperty(i,"adapterName",{value:r})}});const renderReason=i=>`- ${i}`,isResolvedHandle=i=>utils$2.isFunction(i)||i===null||i===!1,adapters$1={getAdapter:i=>{i=utils$2.isArray(i)?i:[i];const{length:r}=i;let n,l;const w={};for(let d=0;d<r;d++){n=i[d];let f;if(l=n,!isResolvedHandle(n)&&(l=knownAdapters[(f=String(n)).toLowerCase()],l===void 0))throw new AxiosError$1(`Unknown adapter '${f}'`);if(l)break;w[f||"#"+d]=l}if(!l){const d=Object.entries(w).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let f=r?d.length>1?`since :
`+d.map(renderReason).join(`
`):" "+renderReason(d[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l},adapters:knownAdapters};function throwIfCancellationRequested(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new CanceledError$1(null,i)}function dispatchRequest(i){return throwIfCancellationRequested(i),i.headers=AxiosHeaders$1.from(i.headers),i.data=transformData.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),adapters$1.getAdapter(i.adapter||defaults$1.adapter)(i).then(function(l){return throwIfCancellationRequested(i),l.data=transformData.call(i,i.transformResponse,l),l.headers=AxiosHeaders$1.from(l.headers),l},function(l){return isCancel$1(l)||(throwIfCancellationRequested(i),l&&l.response&&(l.response.data=transformData.call(i,i.transformResponse,l.response),l.response.headers=AxiosHeaders$1.from(l.response.headers))),Promise.reject(l)})}const VERSION$2="1.8.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((i,r)=>{validators$1[i]=function(l){return typeof l===i||"a"+(r<1?"n ":" ")+i}});const deprecatedWarnings={};validators$1.transitional=function(r,n,l){function w(d,f){return"[Axios v"+VERSION$2+"] Transitional option '"+d+"'"+f+(l?". "+l:"")}return(d,f,a)=>{if(r===!1)throw new AxiosError$1(w(f," has been removed"+(n?" in "+n:"")),AxiosError$1.ERR_DEPRECATED);return n&&!deprecatedWarnings[f]&&(deprecatedWarnings[f]=!0,console.warn(w(f," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(d,f,a):!0}};validators$1.spelling=function(r){return(n,l)=>(console.warn(`${l} is likely a misspelling of ${r}`),!0)};function assertOptions(i,r,n){if(typeof i!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const l=Object.keys(i);let w=l.length;for(;w-- >0;){const d=l[w],f=r[d];if(f){const a=i[d],u=a===void 0||f(a,d,i);if(u!==!0)throw new AxiosError$1("option "+d+" must be "+u,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$1("Unknown option "+d,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(r){this.defaults=r,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(r,n){try{return await this._request(r,n)}catch(l){if(l instanceof Error){let w={};Error.captureStackTrace?Error.captureStackTrace(w):w=new Error;const d=w.stack?w.stack.replace(/^.+\n/,""):"";try{l.stack?d&&!String(l.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+d):l.stack=d}catch{}}throw l}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=mergeConfig$1(this.defaults,n);const{transitional:l,paramsSerializer:w,headers:d}=n;l!==void 0&&validator.assertOptions(l,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),w!=null&&(utils$2.isFunction(w)?n.paramsSerializer={serialize:w}:validator.assertOptions(w,{encode:validators.function,serialize:validators.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=d&&utils$2.merge(d.common,d[n.method]);d&&utils$2.forEach(["delete","get","head","post","put","patch","common"],h=>{delete d[h]}),n.headers=AxiosHeaders$1.concat(f,d);const a=[];let u=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(u=u&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const g=[];this.interceptors.response.forEach(function(b){g.push(b.fulfilled,b.rejected)});let $,v=0,S;if(!u){const h=[dispatchRequest.bind(this),void 0];for(h.unshift.apply(h,a),h.push.apply(h,g),S=h.length,$=Promise.resolve(n);v<S;)$=$.then(h[v++],h[v++]);return $}S=a.length;let E=n;for(v=0;v<S;){const h=a[v++],b=a[v++];try{E=h(E)}catch(m){b.call(this,m);break}}try{$=dispatchRequest.call(this,E)}catch(h){return Promise.reject(h)}for(v=0,S=g.length;v<S;)$=$.then(g[v++],g[v++]);return $}getUri(r){r=mergeConfig$1(this.defaults,r);const n=buildFullPath(r.baseURL,r.url,r.allowAbsoluteUrls);return buildURL(n,r.params,r.paramsSerializer)}};utils$2.forEach(["delete","get","head","options"],function(r){Axios$1.prototype[r]=function(n,l){return this.request(mergeConfig$1(l||{},{method:r,url:n,data:(l||{}).data}))}});utils$2.forEach(["post","put","patch"],function(r){function n(l){return function(d,f,a){return this.request(mergeConfig$1(a||{},{method:r,headers:l?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}Axios$1.prototype[r]=n(),Axios$1.prototype[r+"Form"]=n(!0)});let CancelToken$1=class gg{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const l=this;this.promise.then(w=>{if(!l._listeners)return;let d=l._listeners.length;for(;d-- >0;)l._listeners[d](w);l._listeners=null}),this.promise.then=w=>{let d;const f=new Promise(a=>{l.subscribe(a),d=a}).then(w);return f.cancel=function(){l.unsubscribe(d)},f},r(function(d,f,a){l.reason||(l.reason=new CanceledError$1(d,f,a),n(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=l=>{r.abort(l)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new gg(function(w){r=w}),cancel:r}}};function spread$1(i){return function(n){return i.apply(null,n)}}function isAxiosError$1(i){return utils$2.isObject(i)&&i.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([i,r])=>{HttpStatusCode$1[r]=i});function createInstance(i){const r=new Axios$1(i),n=bind(Axios$1.prototype.request,r);return utils$2.extend(n,Axios$1.prototype,r,{allOwnKeys:!0}),utils$2.extend(n,r,null,{allOwnKeys:!0}),n.create=function(w){return createInstance(mergeConfig$1(i,w))},n}const axios$1=createInstance(defaults$1);axios$1.Axios=Axios$1;axios$1.CanceledError=CanceledError$1;axios$1.CancelToken=CancelToken$1;axios$1.isCancel=isCancel$1;axios$1.VERSION=VERSION$2;axios$1.toFormData=toFormData$1;axios$1.AxiosError=AxiosError$1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function(r){return Promise.all(r)};axios$1.spread=spread$1;axios$1.isAxiosError=isAxiosError$1;axios$1.mergeConfig=mergeConfig$1;axios$1.AxiosHeaders=AxiosHeaders$1;axios$1.formToJSON=i=>formDataToJSON(utils$2.isHTMLForm(i)?new FormData(i):i);axios$1.getAdapter=adapters$1.getAdapter;axios$1.HttpStatusCode=HttpStatusCode$1;axios$1.default=axios$1;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios$1,LoginRegister=({onClose:i})=>{const r=useNavigate(),[n,l]=reactExports.useState(""),[w,d]=reactExports.useState(""),[f,a]=reactExports.useState(""),[u,g]=reactExports.useState(""),[$,v]=reactExports.useState(!1),S=async m=>{var p,_;m.preventDefault(),console.log("Email:",w),console.log("Password:",f);try{const y=await axios$1.post("http://localhost:3000/api/usuarios/login",{email:w,password:f});console.log(y.data),console.log(y.data.username),Swal.fire({icon:"success",title:"Inicio de sesion exitoso"}),localStorage.setItem("id",y.data._id),localStorage.setItem("token",y.data.token),localStorage.setItem("username",y.data.username);const A=y.data.rol==="administrador"?"/UserManagement":"/home";r(A)}catch(y){Swal.fire({icon:"error",title:"Error al iniciar sesion",text:((_=(p=y.response)==null?void 0:p.data)==null?void 0:_.message)||"Credenciales incorrectas"})}},E=async m=>{m.preventDefault();try{console.log({username:n,email:w,password:f});const p=await axios$1.post("http://localhost:3000/api/usuarios/registro",{username:n,email:w,password:f});localStorage.setItem("id",p.data._id),localStorage.setItem("token",p.data.token),r("/")}catch{Swal.fire({icon:"error",title:"No se pudo crear la cuenta",text:"Ha surgido un error al intentar crear tu cuenta, por favor intntelo mas tarde"})}},h=m=>{m.preventDefault(),v(!0)},b=m=>{m.preventDefault(),v(!1)};return jsxRuntimeExports.jsxs("div",{className:`wrapper ${$?"active":""} active-popup `,children:[jsxRuntimeExports.jsx("span",{class:"icon-close",onClick:i,children:jsxRuntimeExports.jsx(IoClose,{})}),jsxRuntimeExports.jsxs("div",{class:"form-box login",children:[jsxRuntimeExports.jsx("h2",{children:"Ingresar"}),jsxRuntimeExports.jsxs("form",{onSubmit:S,children:[jsxRuntimeExports.jsxs("div",{class:"input-box",children:[jsxRuntimeExports.jsxs("span",{class:"icon",children:[" ",jsxRuntimeExports.jsx(IoMail,{})," "]}),jsxRuntimeExports.jsx("input",{type:"email",id:"email",value:w,onChange:m=>d(m.target.value),required:!0,autocomplete:"email"}),jsxRuntimeExports.jsx("label",{for:"email",children:"Email"})]}),jsxRuntimeExports.jsxs("div",{class:"input-box",children:[jsxRuntimeExports.jsxs("span",{class:"icon",children:[" ",jsxRuntimeExports.jsx(IoLockClosed,{})," "]}),jsxRuntimeExports.jsx("input",{type:"password",id:"password",value:f,onChange:m=>a(m.target.value),required:!0,autocomplete:"current-password"}),jsxRuntimeExports.jsx("label",{for:"password",children:"Contrasea"})]}),u&&jsxRuntimeExports.jsx("div",{className:"error-message",children:u}),jsxRuntimeExports.jsx("button",{type:"submit",class:"btn",children:"INGRESAR"}),jsxRuntimeExports.jsx("div",{class:"login-register",children:jsxRuntimeExports.jsxs("p",{children:["No tienes una cuenta? ",jsxRuntimeExports.jsx("a",{href:"#",class:"register-link",onClick:h,children:"Crea una"})]})})]})]}),jsxRuntimeExports.jsxs("div",{class:"form-box register",children:[jsxRuntimeExports.jsx("h2",{children:"Registro"}),jsxRuntimeExports.jsxs("form",{onSubmit:E,action:"#",children:[jsxRuntimeExports.jsxs("div",{class:"input-box",children:[jsxRuntimeExports.jsxs("span",{class:"icon",children:[" ",jsxRuntimeExports.jsx(IoPerson,{})," "]}),jsxRuntimeExports.jsx("input",{type:"text",id:"username",value:n,onChange:m=>l(m.target.value),required:!0}),jsxRuntimeExports.jsx("label",{for:"username",children:"Usuario"})]}),jsxRuntimeExports.jsxs("div",{class:"input-box",children:[jsxRuntimeExports.jsxs("span",{class:"icon",children:[" ",jsxRuntimeExports.jsx(IoMail,{})," "]}),jsxRuntimeExports.jsx("input",{type:"email",id:"email",value:w,onChange:m=>d(m.target.value),required:!0,autocomplete:"email"}),jsxRuntimeExports.jsx("label",{for:"email",children:"Email"})]}),jsxRuntimeExports.jsxs("div",{class:"input-box",children:[jsxRuntimeExports.jsxs("span",{class:"icon",children:[" ",jsxRuntimeExports.jsx(IoLockClosed,{})," "]}),jsxRuntimeExports.jsx("input",{type:"password",id:"password",value:f,onChange:m=>a(m.target.value),required:!0,autocomplete:"current-password"}),jsxRuntimeExports.jsx("label",{for:"password",children:"Contrasea"})]}),jsxRuntimeExports.jsx("div",{class:"remember-forgot",children:jsxRuntimeExports.jsxs("label",{for:"remember",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"remember"})," Acepto los trminos y condiciones "]})}),u&&jsxRuntimeExports.jsx("div",{className:"error-message",children:u}),jsxRuntimeExports.jsx("button",{type:"submit",class:"btn",children:"REGISTRAR"}),jsxRuntimeExports.jsx("div",{class:"login-register",children:jsxRuntimeExports.jsxs("p",{children:["Tienes una cuenta? ",jsxRuntimeExports.jsx("a",{href:"#",class:"login-link",onClick:b,children:"Inicia sesin"})]})})]})]})]})},CodeZooInfo=()=>{const[i,r]=React.useState(!1);useNavigate();const n=()=>{console.log("Popup abierto"),r(!0)};return jsxRuntimeExports.jsxs("div",{className:"welcome-container",children:[jsxRuntimeExports.jsx(Navbar,{onLoginClick:n}),!i&&jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("img",{src:imageWelcome,alt:"",className:"welcome-image"}),jsxRuntimeExports.jsxs("div",{className:"welcome-box",children:[jsxRuntimeExports.jsx("h1",{children:"BIENVENIDO A CODEZOO!"}),jsxRuntimeExports.jsx("p",{children:"CodeZoo es una plataforma educativa que te ayudar a aprender a programar por medio de juegos diversos y cuentos interactivos y educativos."})]})]}),i&&jsxRuntimeExports.jsx(LoginRegister,{onClose:()=>r(!1)})]})},ave="/CodeZoo/assets/ave-BJZD3Uz8.gif",CodeZooTerms=()=>{const i=useNavigate(),[r,n]=reactExports.useState(!1),l=()=>{n(!0),setTimeout(()=>{i("/home")},2e3)},w=()=>{n(!0),setTimeout(()=>{i("/")},2e3)};return jsxRuntimeExports.jsxs("div",{className:"container-terminos",children:[r&&jsxRuntimeExports.jsxs("div",{className:"loading-screen",children:[jsxRuntimeExports.jsx("div",{className:"spinner"}),jsxRuntimeExports.jsx("img",{src:ave,alt:"Cargando",className:"loading-image"}),jsxRuntimeExports.jsx("p",{children:"Cargando..."})]}),jsxRuntimeExports.jsxs("div",{className:"notice-box",children:[jsxRuntimeExports.jsxs("div",{className:"terms-title",children:[jsxRuntimeExports.jsx("h2",{className:"title",children:"Trminos y Condiciones"}),jsxRuntimeExports.jsx("h2",{className:"bold",children:"CodeZoo"})]}),jsxRuntimeExports.jsxs("div",{className:"terms-content",children:[jsxRuntimeExports.jsx("p",{children:"Bienvenido a CodeZoo. Al acceder y utilizar nuestros servicios, aceptas cumplir con los siguientes trminos y condiciones. Si no ests de acuerdo con alguna parte, te recomendamos que no utilices la plataforma."}),jsxRuntimeExports.jsx("p",{children:"CodeZoo est diseado para ayudar a nios a aprender a programar con una temtica de animales. No est permitido utilizar el sitio con fines ilegales o que atenten contra la seguridad de los menores. Los usuarios son responsables de la veracidad de la informacin proporcionada."}),jsxRuntimeExports.jsx("p",{className:"bold",children:"Privacidad y Recopilacin de Datos"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"CodeZoo puede recopilar informacin no identificable personalmente para mejorar la experiencia del usuario."}),jsxRuntimeExports.jsx("li",{children:"No compartimos informacin personal con terceros sin el consentimiento del usuario o su tutor legal."}),jsxRuntimeExports.jsx("li",{children:"Para ms detalles, consulta nuestra Poltica de Privacidad."})]}),jsxRuntimeExports.jsx("p",{className:"bold",children:"Responsabilidad y Garantas"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"CodeZoo no garantiza que la plataforma est libre de errores o interrupciones."}),jsxRuntimeExports.jsx("li",{children:"No nos hacemos responsables por el uso inadecuado de la plataforma por parte de los usuarios."})]}),jsxRuntimeExports.jsx("p",{className:"bold",children:"Modificaciones a los Trminos"}),jsxRuntimeExports.jsx("ul",{children:jsxRuntimeExports.jsx("li",{children:"Nos reservamos el derecho de modificar estos trminos en cualquier momento. Se notificar a los usuarios sobre cambios importantes."})})]}),jsxRuntimeExports.jsxs("div",{className:"button-container",children:[jsxRuntimeExports.jsx("button",{className:"agree-button",onClick:l,children:" ACEPTAR "}),jsxRuntimeExports.jsx("button",{className:"disagree-button",onClick:w,children:"RECHAZAR"})]})]})]})},sopaDeLetrasImg="/CodeZoo/assets/cartoon%20animals%20playing%20a%20word%20search%20game-wfuMhW_x.png",memoramaImg="/CodeZoo/assets/cartoon%20animals%20playing%20memorama-CaDdI540.png",safariracing="/CodeZoo/assets/safari-racing-BkrpD86O.jpeg",LibrosImg="/CodeZoo/assets/Libros-CKcjjQKO.png",catImage1="/CodeZoo/assets/cat_one-CSh7sN_K.gif",mensajesPorContexto={general:["Recuerda siempre probar tu cdigo con diferentes casos de prueba. ","Los bucles son geniales, pero cuidado con los infinitos! ","Divide un problema grande en partes pequeas para resolverlo mejor. ","Sabas que las funciones ayudan a reutilizar cdigo? ","Si tienes dudas, imprimir variables con console.log() puede ayudar. "],memorama:"Encuentra los pares y aprende sobre los animales! "},CodeZooCat=({contexto:i="general",customMessage:r,isOpen:n})=>{const[l,w]=reactExports.useState(r||mensajesPorContexto[i]||mensajesPorContexto.general[0]),[d,f]=reactExports.useState(catImage1);return reactExports.useEffect(()=>{w(r||mensajesPorContexto[i])},[r,i]),jsxRuntimeExports.jsxs("div",{className:"codezoo-cat-container",children:[jsxRuntimeExports.jsx("img",{src:d,alt:"Asistente CodeZoo",className:"cat-image"}),n&&jsxRuntimeExports.jsx("div",{className:"cat-bubble",children:jsxRuntimeExports.jsx("p",{children:l})})]})},noti_1="/CodeZoo/assets/notification_1-CAjSVPEZ.png",noti_2="/CodeZoo/assets/notification_2-B4y0Bp5W.png",setting="/CodeZoo/assets/settings_1-Dj2uxkGs.png",setting_1="/CodeZoo/assets/settings_2-Bs_AjuEi.png",avatar$1="/CodeZoo/assets/user_1-wbq12QPH.png",avatar="/CodeZoo/assets/user_2-B6VgKBmo.png",ZoologicoNombres="/CodeZoo/assets/cuento1_img-BnHkWA38.png",freeModeIMG="/CodeZoo/assets/freemode_icon-DEh3jv6D.png";var browser_umd$1={exports:{}};/*! For license information please see browser.umd.js.LICENSE.txt */var browser_umd=browser_umd$1.exports,hasRequiredBrowser_umd;function requireBrowser_umd(){return hasRequiredBrowser_umd||(hasRequiredBrowser_umd=1,function(i,r){(function(n,l){i.exports=l()})(typeof self<"u"?self:browser_umd,()=>(()=>{var n={2:(d,f,a)=>{var u=a(5832),g=u.Buffer;function $(S,E){for(var h in S)E[h]=S[h]}function v(S,E,h){return g(S,E,h)}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?d.exports=u:($(u,f),f.Buffer=v),$(g,v),v.from=function(S,E,h){if(typeof S=="number")throw new TypeError("Argument must not be a number");return g(S,E,h)},v.alloc=function(S,E,h){if(typeof S!="number")throw new TypeError("Argument must be a number");var b=g(S);return E!==void 0?typeof h=="string"?b.fill(E,h):b.fill(E):b.fill(0),b},v.allocUnsafe=function(S){if(typeof S!="number")throw new TypeError("Argument must be a number");return g(S)},v.allocUnsafeSlow=function(S){if(typeof S!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(S)}},68:(d,f,a)=>{var u=a(1679),g=a(1485),$=a(9732).Buffer,v=[1518500249,1859775393,-1894007588,-899497514],S=new Array(80);function E(){this.init(),this._w=S,g.call(this,64,56)}function h(p){return p<<5|p>>>27}function b(p){return p<<30|p>>>2}function m(p,_,y,x){return p===0?_&y|~_&x:p===2?_&y|_&x|y&x:_^y^x}u(E,g),E.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},E.prototype._update=function(p){for(var _,y=this._w,x=0|this._a,A=0|this._b,R=0|this._c,C=0|this._d,k=0|this._e,D=0;D<16;++D)y[D]=p.readInt32BE(4*D);for(;D<80;++D)y[D]=(_=y[D-3]^y[D-8]^y[D-14]^y[D-16])<<1|_>>>31;for(var j=0;j<80;++j){var V=~~(j/20),z=h(x)+m(V,A,R,C)+k+y[j]+v[V]|0;k=C,C=R,R=b(A),A=x,x=z}this._a=x+this._a|0,this._b=A+this._b|0,this._c=R+this._c|0,this._d=C+this._d|0,this._e=k+this._e|0},E.prototype._hash=function(){var p=$.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},d.exports=E},118:d=>{d.exports=function(f){return f!=f}},136:(d,f,a)=>{var u=a(2).Buffer,g=u.isEncoding||function(y){switch((y=""+y)&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function $(y){var x;switch(this.encoding=function(A){var R=function(C){if(!C)return"utf8";for(var k;;)switch(C){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return C;default:if(k)return;C=(""+C).toLowerCase(),k=!0}}(A);if(typeof R!="string"&&(u.isEncoding===g||!g(A)))throw new Error("Unknown encoding: "+A);return R||A}(y),this.encoding){case"utf16le":this.text=E,this.end=h,x=4;break;case"utf8":this.fillLast=S,x=4;break;case"base64":this.text=b,this.end=m,x=3;break;default:return this.write=p,void(this.end=_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=u.allocUnsafe(x)}function v(y){return y<=127?0:y>>5==6?2:y>>4==14?3:y>>3==30?4:y>>6==2?-1:-2}function S(y){var x=this.lastTotal-this.lastNeed,A=function(R,C){if((192&C[0])!=128)return R.lastNeed=0,"";if(R.lastNeed>1&&C.length>1){if((192&C[1])!=128)return R.lastNeed=1,"";if(R.lastNeed>2&&C.length>2&&(192&C[2])!=128)return R.lastNeed=2,""}}(this,y);return A!==void 0?A:this.lastNeed<=y.length?(y.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(y.copy(this.lastChar,x,0,y.length),void(this.lastNeed-=y.length))}function E(y,x){if((y.length-x)%2==0){var A=y.toString("utf16le",x);if(A){var R=A.charCodeAt(A.length-1);if(R>=55296&&R<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",x,y.length-1)}function h(y){var x=y&&y.length?this.write(y):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,A)}return x}function b(y,x){var A=(y.length-x)%3;return A===0?y.toString("base64",x):(this.lastNeed=3-A,this.lastTotal=3,A===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",x,y.length-A))}function m(y){var x=y&&y.length?this.write(y):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function p(y){return y.toString(this.encoding)}function _(y){return y&&y.length?this.write(y):""}f.I=$,$.prototype.write=function(y){if(y.length===0)return"";var x,A;if(this.lastNeed){if((x=this.fillLast(y))===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<y.length?x?x+this.text(y,A):this.text(y,A):x||""},$.prototype.end=function(y){var x=y&&y.length?this.write(y):"";return this.lastNeed?x+"":x},$.prototype.text=function(y,x){var A=function(C,k,D){var j=k.length-1;if(j<D)return 0;var V=v(k[j]);return V>=0?(V>0&&(C.lastNeed=V-1),V):--j<D||V===-2?0:(V=v(k[j]))>=0?(V>0&&(C.lastNeed=V-2),V):--j<D||V===-2?0:(V=v(k[j]))>=0?(V>0&&(V===2?V=0:C.lastNeed=V-3),V):0}(this,y,x);if(!this.lastNeed)return y.toString("utf8",x);this.lastTotal=A;var R=y.length-(A-this.lastNeed);return y.copy(this.lastChar,0,R),y.toString("utf8",x,R)},$.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length}},170:(d,f,a)=>{function u(j){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},u(j)}var g=a(3609),$=a(8995),v=a(7768),S=a(7236),E=new Set(["$and","$or"]),h=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),b=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),m=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),p=new Set(["$arrayElemAt","$first","$last"]),_=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),y=new Set(["$not"]);function x(j,V,z){if(k(j)||j===null)return j;j.$cond!=null?Array.isArray(j.$cond)?j.$cond=j.$cond.map(function(se){return x(se,V,z)}):(j.$cond.if=x(j.$cond.if,V,z),j.$cond.then=x(j.$cond.then,V,z),j.$cond.else=x(j.$cond.else,V,z)):j.$ifNull!=null?j.$ifNull.map(function(se){return x(se,V,z)}):j.$switch!=null&&(Array.isArray(j.$switch.branches)&&(j.$switch.branches=j.$switch.branches.map(function(se){return x(se,V,z)})),"default"in j.$switch&&(j.$switch.default=x(j.$switch.default,V,z)));for(var W=0,ee=Object.keys(j);W<ee.length;W++){var ne=ee[W];E.has(ne)?j[ne]=j[ne].map(function(se){return x(se,V,z)}):h.has(ne)?j[ne]=C(j[ne],V,z):b.has(ne)?j[ne]=R(j[ne]):m.has(ne)?j[ne]=A(j[ne]):y.has(ne)&&(j[ne]=x(j[ne],V,z))}if(j.$in&&(j.$in=function(se,be,H){var P=se[1];if(!k(P))return se;var L=se[0],F=be.path(P.slice(1));if(F!==null){if(!F.$isMongooseArray)throw new Error("Path must be an array for $in");return[F.$isMongooseDocumentArray?F.$embeddedSchemaType.cast(L):F.caster.cast(L),P]}if(H===!1)return se;if(H==="throw")throw new $("$in")}(j.$in,V,z)),j.$size&&(j.$size=A(j.$size)),j.$round){var Q=j.$round;if(!Array.isArray(Q)||Q.length<1||Q.length>2)throw new g("Array",Q,"$round");j.$round=Q.map(function(se){return A(se)})}return S(j),j}function A(j){if(!D(j))return j;try{return v(j)}catch{throw new g("Number",j)}}function R(j){if(!Array.isArray(j)){if(!D(j))return j;try{return v(j)}catch{throw new g("Number",j)}}return j.map(function(V){if(!D(V))return V;try{return v(V)}catch{throw new g("Number",V)}})}function C(j,V,z){if(!Array.isArray(j)||j.length!==2)throw new Error("Comparison operator must be an array of length 2");j[0]=x(j[0],V,z);var W=j[0];if(D(j[1])){var ee=null,ne=null,Q=null;if(k(W))ee=W.slice(1),ne=V.path(ee);else if(u(W)==="object"&&W!=null)for(var se=0,be=Object.keys(W);se<be.length;se++){var H=be[se];_.has(H)&&k(W[H])?(ee=W[H].slice(1)+"."+H,Q=v):p.has(H)&&k(W[H])&&(ee=W[H].slice(1)+"."+H,(ne=V.path(W[H].slice(1)))!=null&&(ne.$isMongooseDocumentArray?ne=ne.$embeddedSchemaType:ne.$isMongooseArray&&(ne=ne.caster)))}var P=u(j[1])==="object"&&j[1]!=null&&j[1].$literal!=null;if(ne!=null)j[1]=P?{$literal:ne.cast(j[1].$literal)}:ne.cast(j[1]);else if(Q!=null)if(P)try{j[1]={$literal:Q(j[1].$literal)}}catch{throw new g(Q.name.replace(/^cast/,""),j[1],ee+".$literal")}else try{j[1]=Q(j[1])}catch{throw new g(Q.name.replace(/^cast/,""),j[1],ee)}else{if(ee!=null&&z===!0)return;if(ee!=null&&z==="throw")throw new $(ee)}}else j[1]=x(j[1]);return j}function k(j){return typeof j=="string"&&j[0]==="$"}function D(j){return!(typeof j=="string"&&j[0]==="$"||u(j)==="object"&&j!==null&&Object.keys(j).find(function(V){return V[0]==="$"})&&j.$literal==null)}d.exports=function(j,V,z){if(u(j)!=="object"||j===null)throw new Error("`$expr` must be an object");return x(j,V,z)}},198:d=>{function f($){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},f($)}var a={};function u($,v,S){S||(S=Error);var E=function(h){var b,m;function p(_,y,x){return h.call(this,function(A,R,C){return typeof v=="string"?v:v(A,R,C)}(_,y,x))||this}return m=h,(b=p).prototype=Object.create(m.prototype),b.prototype.constructor=b,b.__proto__=m,p}(S);E.prototype.name=S.name,E.prototype.code=$,a[$]=E}function g($,v){if(Array.isArray($)){var S=$.length;return $=$.map(function(E){return String(E)}),S>2?"one of ".concat(v," ").concat($.slice(0,S-1).join(", "),", or ")+$[S-1]:S===2?"one of ".concat(v," ").concat($[0]," or ").concat($[1]):"of ".concat(v," ").concat($[0])}return"of ".concat(v," ").concat(String($))}u("ERR_INVALID_OPT_VALUE",function($,v){return'The value "'+v+'" is invalid for option "'+$+'"'},TypeError),u("ERR_INVALID_ARG_TYPE",function($,v,S){var E,h,b,m,p;if(typeof v=="string"&&(h="not ",v.substr(0,4)===h)?(E="must not be",v=v.replace(/^not /,"")):E="must be",function(y,x,A){return(A===void 0||A>y.length)&&(A=y.length),y.substring(A-9,A)===x}($," argument"))b="The ".concat($," ").concat(E," ").concat(g(v,"type"));else{var _=(typeof p!="number"&&(p=0),p+1>(m=$).length||m.indexOf(".",p)===-1?"argument":"property");b='The "'.concat($,'" ').concat(_," ").concat(E," ").concat(g(v,"type"))}return b+". Received type ".concat(f(S))},TypeError),u("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),u("ERR_METHOD_NOT_IMPLEMENTED",function($){return"The "+$+" method is not implemented"}),u("ERR_STREAM_PREMATURE_CLOSE","Premature close"),u("ERR_STREAM_DESTROYED",function($){return"Cannot call "+$+" after a stream was destroyed"}),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),u("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),u("ERR_STREAM_WRITE_AFTER_END","write after end"),u("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),u("ERR_UNKNOWN_ENCODING",function($){return"Unknown encoding: "+$},TypeError),u("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),d.exports.F=a},208:(d,f,a)=>{var u=a(1970),g=u.assert,$=u.parseBytes,v=u.cachedProperty;function S(E,h){this.eddsa=E,this._secret=$(h.secret),E.isPoint(h.pub)?this._pub=h.pub:this._pubBytes=$(h.pub)}S.fromPublic=function(E,h){return h instanceof S?h:new S(E,{pub:h})},S.fromSecret=function(E,h){return h instanceof S?h:new S(E,{secret:h})},S.prototype.secret=function(){return this._secret},v(S,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),v(S,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),v(S,"privBytes",function(){var E=this.eddsa,h=this.hash(),b=E.encodingLength-1,m=h.slice(0,E.encodingLength);return m[0]&=248,m[b]&=127,m[b]|=64,m}),v(S,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),v(S,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),v(S,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),S.prototype.sign=function(E){return g(this._secret,"KeyPair can only verify"),this.eddsa.sign(E,this)},S.prototype.verify=function(E,h){return this.eddsa.verify(E,h,this)},S.prototype.getSecret=function(E){return g(this._secret,"KeyPair is public only"),u.encode(this.secret(),E)},S.prototype.getPublic=function(E){return u.encode(this.pubBytes(),E)},d.exports=S},209:(d,f,a)=>{function u(S){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},u(S)}var g=a(2403),$=a(5825),v=a(8964);d.exports=g?function(S){return g(S)}:$?function(S){if(!S||u(S)!=="object"&&typeof S!="function")throw new TypeError("getProto: not an object");return $(S)}:v?function(S){return v(S)}:null},241:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!h})()}function $(h){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(h)}function v(h,b){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},v(h,b)}var S=function(h){function b(){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,b),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,b,arguments)}return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),_&&v(p,_)}(b,h),m=b,Object.defineProperty(m,"prototype",{writable:!1}),m;var m}(a(8879)),E=a(5761);Object.defineProperty(S.prototype,"of",E),d.exports=S},245:(d,f,a)=>{var u=a(3989),g=a(1058),$=a(3261),v=a(9732).Buffer,S=a(9217),E=a(594),h=a(6661),b=v.alloc(128),m={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function p(_,y,x){var A=function(V){return V==="rmd160"||V==="ripemd160"?function(z){return new g().update(z).digest()}:V==="md5"?u:function(z){return $(V).update(z).digest()}}(_),R=_==="sha512"||_==="sha384"?128:64;y.length>R?y=A(y):y.length<R&&(y=v.concat([y,b],R));for(var C=v.allocUnsafe(R+m[_]),k=v.allocUnsafe(R+m[_]),D=0;D<R;D++)C[D]=54^y[D],k[D]=92^y[D];var j=v.allocUnsafe(R+x+4);C.copy(j,0,0,R),this.ipad1=j,this.ipad2=C,this.opad=k,this.alg=_,this.blocksize=R,this.hash=A,this.size=m[_]}p.prototype.run=function(_,y){return _.copy(y,this.blocksize),this.hash(y).copy(this.opad,this.blocksize),this.hash(this.opad)},d.exports=function(_,y,x,A,R){S(x,A);var C=new p(R=R||"sha1",_=h(_,E,"Password"),(y=h(y,E,"Salt")).length),k=v.allocUnsafe(A),D=v.allocUnsafe(y.length+4);y.copy(D,0,0,y.length);for(var j=0,V=m[R],z=Math.ceil(A/V),W=1;W<=z;W++){D.writeUInt32BE(W,y.length);for(var ee=C.run(D,C.ipad1),ne=ee,Q=1;Q<x;Q++){ne=C.run(ne,C.ipad2);for(var se=0;se<V;se++)ee[se]^=ne[se]}ee.copy(k,j),j+=V}return k}},354:d=>{function f(E){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},f(E)}var a=1e3,u=60*a,g=60*u,$=24*g,v=7*$;function S(E,h,b,m){var p=h>=1.5*b;return Math.round(E/b)+" "+m+(p?"s":"")}d.exports=function(E,h){h=h||{};var b,m,p=f(E);if(p==="string"&&E.length>0)return function(_){if(!((_=String(_)).length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_);if(y){var x=parseFloat(y[1]);switch((y[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*x;case"weeks":case"week":case"w":return x*v;case"days":case"day":case"d":return x*$;case"hours":case"hour":case"hrs":case"hr":case"h":return x*g;case"minutes":case"minute":case"mins":case"min":case"m":return x*u;case"seconds":case"second":case"secs":case"sec":case"s":return x*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}}(E);if(p==="number"&&isFinite(E))return h.long?(b=E,(m=Math.abs(b))>=$?S(b,m,$,"day"):m>=g?S(b,m,g,"hour"):m>=u?S(b,m,u,"minute"):m>=a?S(b,m,a,"second"):b+" ms"):function(_){var y=Math.abs(_);return y>=$?Math.round(_/$)+"d":y>=g?Math.round(_/g)+"h":y>=u?Math.round(_/u)+"m":y>=a?Math.round(_/a)+"s":_+"ms"}(E);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(E))}},365:(d,f,a)=>{var u=a(3528);function g($){this.options=$,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=$.padding!==!1}d.exports=g,g.prototype._init=function(){},g.prototype.update=function($){return $.length===0?[]:this.type==="decrypt"?this._updateDecrypt($):this._updateEncrypt($)},g.prototype._buffer=function($,v){for(var S=Math.min(this.buffer.length-this.bufferOff,$.length-v),E=0;E<S;E++)this.buffer[this.bufferOff+E]=$[v+E];return this.bufferOff+=S,S},g.prototype._flushBuffer=function($,v){return this._update(this.buffer,0,$,v),this.bufferOff=0,this.blockSize},g.prototype._updateEncrypt=function($){var v=0,S=0,E=(this.bufferOff+$.length)/this.blockSize|0,h=new Array(E*this.blockSize);this.bufferOff!==0&&(v+=this._buffer($,v),this.bufferOff===this.buffer.length&&(S+=this._flushBuffer(h,S)));for(var b=$.length-($.length-v)%this.blockSize;v<b;v+=this.blockSize)this._update($,v,h,S),S+=this.blockSize;for(;v<$.length;v++,this.bufferOff++)this.buffer[this.bufferOff]=$[v];return h},g.prototype._updateDecrypt=function($){for(var v=0,S=0,E=Math.ceil((this.bufferOff+$.length)/this.blockSize)-1,h=new Array(E*this.blockSize);E>0;E--)v+=this._buffer($,v),S+=this._flushBuffer(h,S);return v+=this._buffer($,v),h},g.prototype.final=function($){var v,S;return $&&(v=this.update($)),S=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),v?v.concat(S):S},g.prototype._pad=function($,v){if(v===0)return!1;for(;v<$.length;)$[v++]=0;return!0},g.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var $=new Array(this.blockSize);return this._update(this.buffer,0,$,0),$},g.prototype._unpad=function($){return $},g.prototype._finalDecrypt=function(){u.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var $=new Array(this.blockSize);return this._flushBuffer($,0),this._unpad($)}},425:(d,f,a)=>{var u=a(8050);f.tagClass={0:"universal",1:"application",2:"context",3:"private"},f.tagClassByName=u._reverse(f.tagClass),f.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},f.tagByName=u._reverse(f.tag)},433:(d,f,a)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(y)}function g(y,x){var A=Object.keys(y);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(y);x&&(R=R.filter(function(C){return Object.getOwnPropertyDescriptor(y,C).enumerable})),A.push.apply(A,R)}return A}function $(y){for(var x=1;x<arguments.length;x++){var A=arguments[x]!=null?arguments[x]:{};x%2?g(Object(A),!0).forEach(function(R){v(y,R,A[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(A)):g(Object(A)).forEach(function(R){Object.defineProperty(y,R,Object.getOwnPropertyDescriptor(A,R))})}return y}function v(y,x,A){return(x=function(R){var C=function(k){if(u(k)!="object"||!k)return k;var D=k[Symbol.toPrimitive];if(D!==void 0){var j=D.call(k,"string");if(u(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)}(R);return u(C)=="symbol"?C:C+""}(x))in y?Object.defineProperty(y,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[x]=A,y}var S=a(3609),E=a(6426),h=a(5413),b=a(4327),m=a(9460);function p(y,x){E.call(this,y,x,"Int32")}function _(y,x){return this.castForQuery(null,y,x)}p.schemaName="Int32",p.defaultOptions={},p.prototype=Object.create(E.prototype),p.prototype.constructor=p,p._cast=h,p.set=E.set,p.setters=[],p.get=E.get,p._defaultCaster=function(y){if(y!=null&&(typeof y!="number"||y!==(0|y)||y<-2147483648||y>2147483647))throw new Error;return y},p.cast=function(y){return arguments.length===0||(y===!1&&(y=this._defaultCaster),this._cast=y),this._cast},p._checkRequired=function(y){return y!=null},p.checkRequired=E.checkRequired,p.prototype.checkRequired=function(y){return this.constructor._checkRequired(y)},p.prototype.cast=function(y){var x;x=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():p.cast();try{return x(y)}catch(A){throw new S("Int32",y,this.path,A,this)}},p.$conditionalHandlers=$($({},E.prototype.$conditionalHandlers),{},{$gt:_,$gte:_,$lt:_,$lte:_,$bitsAllClear:m,$bitsAnyClear:m,$bitsAllSet:m,$bitsAnySet:m}),p.prototype.castForQuery=function(y,x,A){var R;if(y!=null)return(R=p.$conditionalHandlers[y])?R.call(this,x):this.applySetters(x,A);try{return this.applySetters(x,A)}catch(C){throw C instanceof S&&C.path===this.path&&this.$fullPath!=null&&(C.path=this.$fullPath),C}},p.prototype.toJSONSchema=function(y){var x=this.options.required&&typeof this.options.required!="function";return b("number","int",y==null?void 0:y.useBsonType,x)},d.exports=p},486:d=>{d.exports=function(f){var a={_id:{auto:!0}};a._id[f.options.typeKey]="ObjectId",f.add(a)}},533:(d,f,a)=>{var u=a(8213),g=a(7352);d.exports=function($,v){if(typeof $!="string"&&typeof $!="function")throw new u('Invalid ref at path "'+v+'". Got '+g.inspect($,{depth:0}))}},542:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a){return!!a&&(f(a)==="object"||typeof a=="function")&&typeof a.then=="function"}},594:(d,f,a)=>{var u;u=a.g.process&&a.g.process.browser?"utf-8":a.g.process&&a.g.process.version?parseInt({}.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",d.exports=u},601:(d,f,a)=>{var u=a(4685),g=a(7695),$=u.rotl32,v=u.sum32,S=u.sum32_3,E=u.sum32_4,h=g.BlockHash;function b(){if(!(this instanceof b))return new b;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function m(C,k,D,j){return C<=15?k^D^j:C<=31?k&D|~k&j:C<=47?(k|~D)^j:C<=63?k&j|D&~j:k^(D|~j)}function p(C){return C<=15?0:C<=31?1518500249:C<=47?1859775393:C<=63?2400959708:2840853838}function _(C){return C<=15?1352829926:C<=31?1548603684:C<=47?1836072691:C<=63?2053994217:0}u.inherits(b,h),f.ripemd160=b,b.blockSize=512,b.outSize=160,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(C,k){for(var D=this.h[0],j=this.h[1],V=this.h[2],z=this.h[3],W=this.h[4],ee=D,ne=j,Q=V,se=z,be=W,H=0;H<80;H++){var P=v($(E(D,m(H,j,V,z),C[y[H]+k],p(H)),A[H]),W);D=W,W=z,z=$(V,10),V=j,j=P,P=v($(E(ee,m(79-H,ne,Q,se),C[x[H]+k],_(H)),R[H]),be),ee=be,be=se,se=$(Q,10),Q=ne,ne=P}P=S(this.h[1],V,se),this.h[1]=S(this.h[2],z,be),this.h[2]=S(this.h[3],W,ee),this.h[3]=S(this.h[4],D,ne),this.h[4]=S(this.h[0],j,Q),this.h[0]=P},b.prototype._digest=function(C){return C==="hex"?u.toHex32(this.h,"little"):u.split32(this.h,"little")};var y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],x=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],A=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],R=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},608:(d,f,a)=>{var u=a(5832).Buffer;d.exports=function(g){return u.isBuffer(g)||Object.prototype.toString.call(g)==="[object Object]"}},622:(d,f,a)=>{function u(h,b){var m=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(!m){if(Array.isArray(h)||(m=function(R,C){if(R){if(typeof R=="string")return g(R,C);var k={}.toString.call(R).slice(8,-1);return k==="Object"&&R.constructor&&(k=R.constructor.name),k==="Map"||k==="Set"?Array.from(R):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?g(R,C):void 0}}(h))||b){m&&(h=m);var p=0,_=function(){};return{s:_,n:function(){return p>=h.length?{done:!0}:{done:!1,value:h[p++]}},e:function(R){throw R},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,x=!0,A=!1;return{s:function(){m=m.call(h)},n:function(){var R=m.next();return x=R.done,R},e:function(R){A=!0,y=R},f:function(){try{x||m.return==null||m.return()}finally{if(A)throw y}}}}function g(h,b){(b==null||b>h.length)&&(b=h.length);for(var m=0,p=Array(b);m<b;m++)p[m]=h[m];return p}var $=a(4009),v=a(8768),S=a(7930).modelSymbol;function E(h,b){this.path=b,this.getters=[],this.setters=[],this.options=Object.assign({},h)}E.prototype._applyDefaultGetters=function(){if(!(this.getters.length>0||this.setters.length>0)){var h="$"+this.path;this.getters.push(function(){return this.$locals[h]}),this.setters.push(function(b){this.$locals[h]=b})}},E.prototype.clone=function(){var h=new E(this.options,this.path);return h.getters=[].concat(this.getters),h.setters=[].concat(this.setters),h},E.prototype.get=function(h){return this.getters.push(h),this},E.prototype.set=function(h){return this.setters.push(h),this},E.prototype.applyGetters=function(h,b){v.hasUserDefinedProperty(this.options,["ref","refPath"])&&b.$$populatedVirtuals&&b.$$populatedVirtuals.hasOwnProperty(this.path)&&(h=b.$$populatedVirtuals[this.path]);var m,p=h,_=u(this.getters);try{for(_.s();!(m=_.n()).done;)p=m.value.call(b,p,this,b)}catch(y){_.e(y)}finally{_.f()}return p},E.prototype.applySetters=function(h,b){var m,p=h,_=u(this.setters);try{for(_.s();!(m=_.n()).done;)p=m.value.call(b,p,this,b)}catch(y){_.e(y)}finally{_.f()}return p},E.prototype._getModelNamesForPopulate=function(h){if(this.options.refPath)return $(this.options.refPath,h,this.path);var b;return(b=typeof this.options.ref!="function"||this.options.ref[S]?this.options.ref:this.options.ref.call(h,h))==null||Array.isArray(b)?b:[b]},d.exports=E},668:(d,f,a)=>{var u=Array.prototype.slice,g=a(6312),$=Object.keys,v=$?function(E){return $(E)}:a(6544),S=Object.keys;v.shim=function(){if(Object.keys){var E=function(){var h=Object.keys(arguments);return h&&h.length===arguments.length}(1,2);E||(Object.keys=function(h){return g(h)?S(u.call(h)):S(h)})}else Object.keys=v;return Object.keys||v},d.exports=v},674:(d,f,a)=>{var u=a(3414);d.exports=function(g){return u(g)||g===0?g:g<0?-1:1}},690:(d,f,a)=>{f.sha1=a(4042),f.sha224=a(3329),f.sha256=a(2344),f.sha384=a(3420),f.sha512=a(6749)},766:(d,f)=>{var a=d.exports={};a.DocumentNotFoundError=null,a.general={},a.general.default="Validator failed for path `{PATH}` with value `{VALUE}`",a.general.required="Path `{PATH}` is required.",a.Number={},a.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).",a.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).",a.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.",a.Date={},a.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).",a.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).",a.String={},a.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.",a.String.match="Path `{PATH}` is invalid ({VALUE}).",a.String.minlength="Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).",a.String.maxlength="Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH})."},783:d=>{d.exports=ReferenceError},791:(d,f,a)=>{function u(v,S){var E=typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(!E){if(Array.isArray(v)||(E=function(y,x){if(y){if(typeof y=="string")return g(y,x);var A={}.toString.call(y).slice(8,-1);return A==="Object"&&y.constructor&&(A=y.constructor.name),A==="Map"||A==="Set"?Array.from(y):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?g(y,x):void 0}}(v))||S){E&&(v=E);var h=0,b=function(){};return{s:b,n:function(){return h>=v.length?{done:!0}:{done:!1,value:v[h++]}},e:function(y){throw y},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m,p=!0,_=!1;return{s:function(){E=E.call(v)},n:function(){var y=E.next();return p=y.done,y},e:function(y){_=!0,m=y},f:function(){try{p||E.return==null||E.return()}finally{if(_)throw m}}}}function g(v,S){(S==null||S>v.length)&&(S=v.length);for(var E=0,h=Array(S);E<S;E++)h[E]=v[E];return h}var $=a(3703);d.exports=function(v,S,E){var h,b=E!=null?Object.keys($(v.tree,E,{})):Object.keys(v.tree),m=new Set(Object.keys(S));if(m.size>1){h=new Set;var p,_=u(b);try{for(_.s();!(p=_.n()).done;){var y=p.value;m.has(y)&&h.add(y)}}catch(C){_.e(C)}finally{_.f()}var x,A=u(m);try{for(A.s();!(x=A.n()).done;){var R=x.value;h.has(R)||h.add(R)}}catch(C){A.e(C)}finally{A.f()}h=Array.from(h)}else h=Array.from(m);return h}},863:(d,f,a)=>{var u=a(3305),g=a(5549);d.exports=function($){if($==null||u($,"ObjectId"))return $;if($._id){if(u($._id,"ObjectId"))return $._id;if($._id.toString instanceof Function)return new g($._id.toString())}return $.toString instanceof Function?new g($.toString()):new g($)}},953:(d,f,a)=>{var u=a(5484);d.exports=function(){return u()&&!!Symbol.toStringTag}},988:d=>{var f=Object.defineProperty||!1;if(f)try{f({},"a",{value:1})}catch{f=!1}d.exports=f},1005:(d,f,a)=>{var u=a(5832).Buffer,g=a(7312),$=a(7799);d.exports=function(h){return new S(h)};var v={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function S(h){this.curveType=v[h],this.curveType||(this.curveType={name:h}),this.curve=new g.ec(this.curveType.name),this.keys=void 0}function E(h,b,m){Array.isArray(h)||(h=h.toArray());var p=new u(h);if(m&&p.length<m){var _=new u(m-p.length);_.fill(0),p=u.concat([_,p])}return b?p.toString(b):p}v.p224=v.secp224r1,v.p256=v.secp256r1=v.prime256v1,v.p192=v.secp192r1=v.prime192v1,v.p384=v.secp384r1,v.p521=v.secp521r1,S.prototype.generateKeys=function(h,b){return this.keys=this.curve.genKeyPair(),this.getPublicKey(h,b)},S.prototype.computeSecret=function(h,b,m){return b=b||"utf8",u.isBuffer(h)||(h=new u(h,b)),E(this.curve.keyFromPublic(h).getPublic().mul(this.keys.getPrivate()).getX(),m,this.curveType.byteLength)},S.prototype.getPublicKey=function(h,b){var m=this.keys.getPublic(b==="compressed",!0);return b==="hybrid"&&(m[m.length-1]%2?m[0]=7:m[0]=6),E(m,h)},S.prototype.getPrivateKey=function(h){return E(this.keys.getPrivate(),h)},S.prototype.setPublicKey=function(h,b){return b=b||"utf8",u.isBuffer(h)||(h=new u(h,b)),this.keys._importPublic(h),this},S.prototype.setPrivateKey=function(h,b){b=b||"utf8",u.isBuffer(h)||(h=new u(h,b));var m=new $(h);return m=m.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(m),this}},1007:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!h})()}function $(h){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(h)}function v(h,b){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},v(h,b)}var S=function(h){function b(){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,b),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,b,arguments)}return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),_&&v(p,_)}(b,h),m=b,Object.defineProperty(m,"prototype",{writable:!1}),m;var m}(a(8879)),E=a(5761);Object.defineProperty(S.prototype,"min",E),Object.defineProperty(S.prototype,"max",E),Object.defineProperty(S.prototype,"enum",E),Object.defineProperty(S.prototype,"populate",E),d.exports=S},1026:(d,f,a)=>{d.exports=g;var u=a(8784);function g($){if(!(this instanceof g))return new g($);u.call(this,$)}a(1679)(g,u),g.prototype._transform=function($,v,S){S(null,$)}},1048:(d,f,a)=>{var u=a(3528),g=a(1679),$=a(9473),v=a(365);function S(){this.tmp=new Array(2),this.keys=null}function E(b){v.call(this,b);var m=new S;this._desState=m,this.deriveKeys(m,b.key)}g(E,v),d.exports=E,E.create=function(b){return new E(b)};var h=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];E.prototype.deriveKeys=function(b,m){b.keys=new Array(32),u.equal(m.length,this.blockSize,"Invalid key length");var p=$.readUInt32BE(m,0),_=$.readUInt32BE(m,4);$.pc1(p,_,b.tmp,0),p=b.tmp[0],_=b.tmp[1];for(var y=0;y<b.keys.length;y+=2){var x=h[y>>>1];p=$.r28shl(p,x),_=$.r28shl(_,x),$.pc2(p,_,b.keys,y)}},E.prototype._update=function(b,m,p,_){var y=this._desState,x=$.readUInt32BE(b,m),A=$.readUInt32BE(b,m+4);$.ip(x,A,y.tmp,0),x=y.tmp[0],A=y.tmp[1],this.type==="encrypt"?this._encrypt(y,x,A,y.tmp,0):this._decrypt(y,x,A,y.tmp,0),x=y.tmp[0],A=y.tmp[1],$.writeUInt32BE(p,x,_),$.writeUInt32BE(p,A,_+4)},E.prototype._pad=function(b,m){if(this.padding===!1)return!1;for(var p=b.length-m,_=m;_<b.length;_++)b[_]=p;return!0},E.prototype._unpad=function(b){if(this.padding===!1)return b;for(var m=b[b.length-1],p=b.length-m;p<b.length;p++)u.equal(b[p],m);return b.slice(0,b.length-m)},E.prototype._encrypt=function(b,m,p,_,y){for(var x=m,A=p,R=0;R<b.keys.length;R+=2){var C=b.keys[R],k=b.keys[R+1];$.expand(A,b.tmp,0),C^=b.tmp[0],k^=b.tmp[1];var D=$.substitute(C,k),j=A;A=(x^$.permute(D))>>>0,x=j}$.rip(A,x,_,y)},E.prototype._decrypt=function(b,m,p,_,y){for(var x=p,A=m,R=b.keys.length-2;R>=0;R-=2){var C=b.keys[R],k=b.keys[R+1];$.expand(x,b.tmp,0),C^=b.tmp[0],k^=b.tmp[1];var D=$.substitute(C,k),j=x;x=(A^$.permute(D))>>>0,A=j}$.rip(x,A,_,y)}},1058:(d,f,a)=>{var u=a(5832).Buffer,g=a(1679),$=a(6936),v=new Array(16),S=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],E=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],m=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0];function _(){$.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function y(D,j){return D<<j|D>>>32-j}function x(D,j,V,z,W,ee,ne,Q){return y(D+(j^V^z)+ee+ne|0,Q)+W|0}function A(D,j,V,z,W,ee,ne,Q){return y(D+(j&V|~j&z)+ee+ne|0,Q)+W|0}function R(D,j,V,z,W,ee,ne,Q){return y(D+((j|~V)^z)+ee+ne|0,Q)+W|0}function C(D,j,V,z,W,ee,ne,Q){return y(D+(j&z|V&~z)+ee+ne|0,Q)+W|0}function k(D,j,V,z,W,ee,ne,Q){return y(D+(j^(V|~z))+ee+ne|0,Q)+W|0}g(_,$),_.prototype._update=function(){for(var D=v,j=0;j<16;++j)D[j]=this._block.readInt32LE(4*j);for(var V=0|this._a,z=0|this._b,W=0|this._c,ee=0|this._d,ne=0|this._e,Q=0|this._a,se=0|this._b,be=0|this._c,H=0|this._d,P=0|this._e,L=0;L<80;L+=1){var F,M;L<16?(F=x(V,z,W,ee,ne,D[S[L]],m[0],h[L]),M=k(Q,se,be,H,P,D[E[L]],p[0],b[L])):L<32?(F=A(V,z,W,ee,ne,D[S[L]],m[1],h[L]),M=C(Q,se,be,H,P,D[E[L]],p[1],b[L])):L<48?(F=R(V,z,W,ee,ne,D[S[L]],m[2],h[L]),M=R(Q,se,be,H,P,D[E[L]],p[2],b[L])):L<64?(F=C(V,z,W,ee,ne,D[S[L]],m[3],h[L]),M=A(Q,se,be,H,P,D[E[L]],p[3],b[L])):(F=k(V,z,W,ee,ne,D[S[L]],m[4],h[L]),M=x(Q,se,be,H,P,D[E[L]],p[4],b[L])),V=ne,ne=ee,ee=y(W,10),W=z,z=F,Q=P,P=H,H=y(be,10),be=se,se=M}var U=this._b+W+H|0;this._b=this._c+ee+P|0,this._c=this._d+ne+Q|0,this._d=this._e+V+se|0,this._e=this._a+z+be|0,this._a=U},_.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var D=u.alloc?u.alloc(20):new u(20);return D.writeInt32LE(this._a,0),D.writeInt32LE(this._b,4),D.writeInt32LE(this._c,8),D.writeInt32LE(this._d,12),D.writeInt32LE(this._e,16),D},d.exports=_},1085:(d,f,a)=>{var u=a(5401),g=a(9732).Buffer,$=a(2533),v=a(1679),S=a(9363),E=a(6876),h=a(9003);function b(m,p,_,y){$.call(this);var x=g.alloc(4,0);this._cipher=new u.AES(p);var A=this._cipher.encryptBlock(x);this._ghash=new S(A),_=function(R,C,k){if(C.length===12)return R._finID=g.concat([C,g.from([0,0,0,1])]),g.concat([C,g.from([0,0,0,2])]);var D=new S(k),j=C.length,V=j%16;D.update(C),V&&(V=16-V,D.update(g.alloc(V,0))),D.update(g.alloc(8,0));var z=8*j,W=g.alloc(8);W.writeUIntBE(z,0,8),D.update(W),R._finID=D.state;var ee=g.from(R._finID);return h(ee),ee}(this,_,A),this._prev=g.from(_),this._cache=g.allocUnsafe(0),this._secCache=g.allocUnsafe(0),this._decrypt=y,this._alen=0,this._len=0,this._mode=m,this._authTag=null,this._called=!1}v(b,$),b.prototype._update=function(m){if(!this._called&&this._alen){var p=16-this._alen%16;p<16&&(p=g.alloc(p,0),this._ghash.update(p))}this._called=!0;var _=this._mode.encrypt(this,m);return this._decrypt?this._ghash.update(m):this._ghash.update(_),this._len+=m.length,_},b.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var m=E(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(p,_){var y=0;p.length!==_.length&&y++;for(var x=Math.min(p.length,_.length),A=0;A<x;++A)y+=p[A]^_[A];return y}(m,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=m,this._cipher.scrub()},b.prototype.getAuthTag=function(){if(this._decrypt||!g.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},b.prototype.setAuthTag=function(m){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=m},b.prototype.setAAD=function(m){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(m),this._alen+=m.length},d.exports=b},1091:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a){return a!=null&&f(a)==="object"&&a.$slice==null&&a.$elemMatch==null&&a.$meta==null&&a.$==null}},1095:(d,f,a)=>{var u=a(7799),g=a(4276),$=a(9732).Buffer;function v(E){var h,b=E.modulus.byteLength();do h=new u(g(b));while(h.cmp(E.modulus)>=0||!h.umod(E.prime1)||!h.umod(E.prime2));return h}function S(E,h){var b=function(j){var V=v(j);return{blinder:V.toRed(u.mont(j.modulus)).redPow(new u(j.publicExponent)).fromRed(),unblinder:V.invm(j.modulus)}}(h),m=h.modulus.byteLength(),p=new u(E).mul(b.blinder).umod(h.modulus),_=p.toRed(u.mont(h.prime1)),y=p.toRed(u.mont(h.prime2)),x=h.coefficient,A=h.prime1,R=h.prime2,C=_.redPow(h.exponent1).fromRed(),k=y.redPow(h.exponent2).fromRed(),D=C.isub(k).imul(x).umod(A).imul(R);return k.iadd(D).imul(b.unblinder).umod(h.modulus).toArrayLike($,"be",m)}S.getr=v,d.exports=S},1129:(d,f,a)=>{function u(b){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u(b)}function g(){try{var b=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!b})()}function $(b){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},$(b)}function v(b,m){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,_){return p.__proto__=_,p},v(b,m)}var S=a(8213),E=a(7352),h=function(b){function m(_,y,x,A){var R;(function(k,D){if(!(k instanceof D))throw new TypeError("Cannot call a class as a function")})(this,m);var C=S.messages;return(R=function(k,D,j){return D=$(D),function(V,z){if(z&&(u(z)=="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}(V)}(k,g()?Reflect.construct(D,j||[],$(k).constructor):D.apply(k,j))}(this,m,[C.DocumentNotFoundError!=null?typeof C.DocumentNotFoundError=="function"?C.DocumentNotFoundError(_,y):C.DocumentNotFoundError:'No document found for query "'+E.inspect(_)+'" on model "'+y+'"'])).result=A,R.numAffected=x,R.filter=_,R.query=_,R}return function(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),y&&v(_,y)}(m,b),p=m,Object.defineProperty(p,"prototype",{writable:!1}),p;var p}(S);Object.defineProperty(h.prototype,"name",{value:"DocumentNotFoundError"}),d.exports=h},1144:(d,f,a)=>{var u,g=a(198).F,$=g.ERR_MISSING_ARGS,v=g.ERR_STREAM_DESTROYED;function S(b){if(b)throw b}function E(b){b()}function h(b,m){return b.pipe(m)}d.exports=function(){for(var b=arguments.length,m=new Array(b),p=0;p<b;p++)m[p]=arguments[p];var _,y=function(A){return A.length?typeof A[A.length-1]!="function"?S:A.pop():S}(m);if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new $("streams");var x=m.map(function(A,R){var C=R<m.length-1;return function(k,D,j,V){V=function(ee){var ne=!1;return function(){ne||(ne=!0,ee.apply(void 0,arguments))}}(V);var z=!1;k.on("close",function(){z=!0}),u===void 0&&(u=a(8500)),u(k,{readable:D,writable:j},function(ee){if(ee)return V(ee);z=!0,V()});var W=!1;return function(ee){if(!z&&!W)return W=!0,function(ne){return ne.setHeader&&typeof ne.abort=="function"}(k)?k.abort():typeof k.destroy=="function"?k.destroy():void V(ee||new v("pipe"))}}(A,C,R>0,function(k){_||(_=k),k&&x.forEach(E),C||(x.forEach(E),y(_))})});return m.reduce(h)}},1190:d=>{d.exports=function(f,a){for(var u=f.length,g=-1;++g<u;)f[g]^=a[g];return f}},1191:(d,f,a)=>{d.exports=v;var u=a(1313),g=Object.create(a(7919));function $(h,b){var m=this._transformState;m.transforming=!1;var p=m.writecb;if(!p)return this.emit("error",new Error("write callback called multiple times"));m.writechunk=null,m.writecb=null,b!=null&&this.push(b),p(h);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function v(h){if(!(this instanceof v))return new v(h);u.call(this,h),this._transformState={afterTransform:$.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",S)}function S(){var h=this;typeof this._flush=="function"?this._flush(function(b,m){E(h,b,m)}):E(this,null,null)}function E(h,b,m){if(b)return h.emit("error",b);if(m!=null&&h.push(m),h._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(h._transformState.transforming)throw new Error("Calling transform done when still transforming");return h.push(null)}g.inherits=a(1679),g.inherits(v,u),v.prototype.push=function(h,b){return this._transformState.needTransform=!1,u.prototype.push.call(this,h,b)},v.prototype._transform=function(h,b,m){throw new Error("_transform() is not implemented")},v.prototype._write=function(h,b,m){var p=this._transformState;if(p.writecb=m,p.writechunk=h,p.writeencoding=b,!p.transforming){var _=this._readableState;(p.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},v.prototype._read=function(h){var b=this._transformState;b.writechunk!==null&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0},v.prototype._destroy=function(h,b){var m=this;u.prototype._destroy.call(this,h,function(p){b(p),m.emit("close")})}},1199:d=>{d.exports=function(f,a){var u=Object.keys(f),g=Object.keys(a);if(u.length!==g.length)return!1;for(var $=0;$<u.length;$++){var v=u[$];if(v!==g[$]||f[v]!==a[v])return!1}return!0}},1226:d=>{d.exports=function(f){return f==null?null:Object.keys(f)[0]}},1243:(d,f)=>{f.isMongooseArray=function(a){return Array.isArray(a)&&a.isMongooseArray}},1244:(d,f,a)=>{var u=a(3609);d.exports=function(g,$){if(g==null)return g;if(g._id&&typeof g._id=="string")return g._id;if(g.toString&&g.toString!==Object.prototype.toString&&!Array.isArray(g))return g.toString();throw new u("string",g,$)}},1257:(d,f,a)=>{var u=a(7799),g=a(8904);function $(v){this.rand=v||new g.Rand}d.exports=$,$.create=function(v){return new $(v)},$.prototype._randbelow=function(v){var S=v.bitLength(),E=Math.ceil(S/8);do var h=new u(this.rand.generate(E));while(h.cmp(v)>=0);return h},$.prototype._randrange=function(v,S){var E=S.sub(v);return v.add(this._randbelow(E))},$.prototype.test=function(v,S,E){var h=v.bitLength(),b=u.mont(v),m=new u(1).toRed(b);S||(S=Math.max(1,h/48|0));for(var p=v.subn(1),_=0;!p.testn(_);_++);for(var y=v.shrn(_),x=p.toRed(b);S>0;S--){var A=this._randrange(new u(2),p);E&&E(A);var R=A.toRed(b).redPow(y);if(R.cmp(m)!==0&&R.cmp(x)!==0){for(var C=1;C<_;C++){if((R=R.redSqr()).cmp(m)===0)return!1;if(R.cmp(x)===0)break}if(C===_)return!1}}return!0},$.prototype.getDivisor=function(v,S){var E=v.bitLength(),h=u.mont(v),b=new u(1).toRed(h);S||(S=Math.max(1,E/48|0));for(var m=v.subn(1),p=0;!m.testn(p);p++);for(var _=v.shrn(p),y=m.toRed(h);S>0;S--){var x=this._randrange(new u(2),m),A=v.gcd(x);if(A.cmpn(1)!==0)return A;var R=x.toRed(h).redPow(_);if(R.cmp(b)!==0&&R.cmp(y)!==0){for(var C=1;C<p;C++){if((R=R.redSqr()).cmp(b)===0)return R.fromRed().subn(1).gcd(v);if(R.cmp(y)===0)break}if(C===p)return(R=R.redSqr()).fromRed().subn(1).gcd(v)}}return!1}},1260:(d,f)=>{var a=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]).concat(["validate"]);f.Ut=a},1313:(d,f,a)=>{var u=a(4758),g=Object.keys||function(y){var x=[];for(var A in y)x.push(A);return x};d.exports=m;var $=Object.create(a(7919));$.inherits=a(1679);var v=a(7991),S=a(9147);$.inherits(m,v);for(var E=g(S.prototype),h=0;h<E.length;h++){var b=E[h];m.prototype[b]||(m.prototype[b]=S.prototype[b])}function m(y){if(!(this instanceof m))return new m(y);v.call(this,y),S.call(this,y),y&&y.readable===!1&&(this.readable=!1),y&&y.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,y&&y.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||u.nextTick(_,this)}function _(y){y.end()}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}}),m.prototype._destroy=function(y,x){this.push(null),this.end(),u.nextTick(x,y)}},1344:(d,f,a)=>{d.exports=a(3633).UUID},1347:(d,f)=>{f.isMongooseDocumentArray=function(a){return Array.isArray(a)&&a.isMongooseDocumentArray}},1350:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m,p,_){return function(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}(this,h),function(y,x,A){return x=$(x),function(R,C){if(C&&(u(C)=="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}(R)}(y,g()?Reflect.construct(x,A||[],$(y).constructor):x.apply(y,A))}(this,h,['Parameter "'+p+'" to '+_+'() must be an object, got "'+m.toString()+'" (type '+u(m)+")"])}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"ObjectParameterError"}),d.exports=S},1368:(d,f,a)=>{var u=a(3528),g=a(1679),$=a(365),v=a(1048);function S(h,b){u.equal(b.length,24,"Invalid key length");var m=b.slice(0,8),p=b.slice(8,16),_=b.slice(16,24);this.ciphers=h==="encrypt"?[v.create({type:"encrypt",key:m}),v.create({type:"decrypt",key:p}),v.create({type:"encrypt",key:_})]:[v.create({type:"decrypt",key:_}),v.create({type:"encrypt",key:p}),v.create({type:"decrypt",key:m})]}function E(h){$.call(this,h);var b=new S(this.type,this.options.key);this._edeState=b}g(E,$),d.exports=E,E.create=function(h){return new E(h)},E.prototype._update=function(h,b,m,p){var _=this._edeState;_.ciphers[0]._update(h,b,m,p),_.ciphers[1]._update(m,p,m,p),_.ciphers[2]._update(m,p,m,p)},E.prototype._pad=v.prototype._pad,E.prototype._unpad=v.prototype._unpad},1417:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,h),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,h,["For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+m.join(`
  `)+`
Use Model.updateOne() to update these arrays instead.`])}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"DivergentArrayError"}),d.exports=S},1419:(d,f,a)=>{var u=f;u.bignum=a(7799),u.define=a(2392).define,u.base=a(1620),u.constants=a(8050),u.decoders=a(2240),u.encoders=a(9176)},1464:(d,f,a)=>{var u=a(5807);if(u)try{u([],"length")}catch{u=null}d.exports=u},1469:(d,f,a)=>{function u(A){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},u(A)}function g(A,R){var C=Object.keys(A);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(A);R&&(k=k.filter(function(D){return Object.getOwnPropertyDescriptor(A,D).enumerable})),C.push.apply(C,k)}return C}function $(A,R,C){return(R=function(k){var D=function(j){if(u(j)!="object"||!j)return j;var V=j[Symbol.toPrimitive];if(V!==void 0){var z=V.call(j,"string");if(u(z)!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)}(k);return u(D)=="symbol"?D:D+""}(R))in A?Object.defineProperty(A,R,{value:C,enumerable:!0,configurable:!0,writable:!0}):A[R]=C,A}function v(A,R){var C=typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(!C){if(Array.isArray(A)||(C=function(W,ee){if(W){if(typeof W=="string")return S(W,ee);var ne={}.toString.call(W).slice(8,-1);return ne==="Object"&&W.constructor&&(ne=W.constructor.name),ne==="Map"||ne==="Set"?Array.from(W):ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne)?S(W,ee):void 0}}(A))||R){C&&(A=C);var k=0,D=function(){};return{s:D,n:function(){return k>=A.length?{done:!0}:{done:!1,value:A[k++]}},e:function(W){throw W},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j,V=!0,z=!1;return{s:function(){C=C.call(A)},n:function(){var W=C.next();return V=W.done,W},e:function(W){z=!0,j=W},f:function(){try{V||C.return==null||C.return()}finally{if(z)throw j}}}}function S(A,R){(R==null||R>A.length)&&(R=A.length);for(var C=0,k=Array(R);C<R;C++)k[C]=A[C];return k}var E=a(5022),h=a(8442),b=a(4450),m=a(2068).X,p=a(3703),_=a(8768),y=a(4301),x={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0};d.exports=function(A,R,C,k,D,j,V){if(!C||!C.instanceOfSchema)throw new Error("You must pass a valid discriminator Schema");if(j=j==null||j,A.schema.discriminatorMapping&&!A.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+R+'" can only be a discriminator of the root model');if(D){var z=p(A.base,"options.applyPluginsToDiscriminators",!1)||!j;A.base._applyPlugins(C,{skipTopLevel:!z})}else j||h(C);var W=A.schema.options.discriminatorKey,ee=A.schema.path(W);if(ee!=null)_.hasUserDefinedProperty(ee.options,"select")||(ee.options.select=!0),ee.options.$skipDiscriminatorCheck=!0;else{var ne={};ne[W]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},ne[W][A.schema.options.typeKey]=String,A.schema.add(ne),m({prop:W,prototype:A.prototype,options:A.schema.options})}if(C.path(W)&&C.path(W).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+R+'" cannot have field with name "'+W+'"');var Q=R;if((typeof k=="string"&&k.length||k!=null)&&(Q=k),function(se,be){se._baseSchema=be,be.paths._id&&be.paths._id.options&&!be.paths._id.options.auto&&se.remove("_id");for(var H=[],P=0,L=Object.keys(be.paths);P<L.length;P++){var F=L[P];if(se.nested[F])H.push(F);else if(F.indexOf(".")!==-1){var M,U="",Z=v(F.split(".").slice(0,-1));try{for(Z.s();!(M=Z.n()).done;){var K=M.value;U+=(U.length?".":"")+K,(se.paths[U]instanceof E||se.singleNestedPaths[U]instanceof E)&&H.push(F)}}catch(Ne){Z.e(Ne)}finally{Z.f()}}}se.obj=function(Ne){for(var De=1;De<arguments.length;De++){var he=arguments[De]!=null?arguments[De]:{};De%2?g(Object(he),!0).forEach(function(tt){$(Ne,tt,he[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ne,Object.getOwnPropertyDescriptors(he)):g(Object(he)).forEach(function(tt){Object.defineProperty(Ne,tt,Object.getOwnPropertyDescriptor(he,tt))})}return Ne}({},se.obj),y(se,be),se._gatherChildSchemas();for(var oe=0,ie=H;oe<ie.length;oe++){var $e=ie[oe];delete se.paths[$e]}se.childSchemas.forEach(function(Ne){Ne.model.prototype.$__setSchema(Ne.schema)});var ce={};ce[W]={default:Q,select:!0,set:function(Ne){if(Ne===Q||Array.isArray(Q)&&_.deepEqual(Ne,Q))return Q;throw new Error(`Can't set discriminator key "`+W+'"')},$skipDiscriminatorCheck:!0},ce[W][se.options.typeKey]=ee?ee.options[se.options.typeKey]:String,se.add(ce),se.discriminatorMapping={key:W,value:Q,isRoot:!1},be.options.collection&&(se.options.collection=be.options.collection);var le=se.options.toJSON,ye=se.options.toObject,_e=se.options._id,q=se.options.id,re=Object.keys(se.options);se.options.discriminatorKey=be.options.discriminatorKey;for(var fe=se._userProvidedOptions,we=0,Re=re;we<Re.length;we++){var ke=Re[we];if(!x[ke]&&ke in fe&&!_.deepEqual(se.options[ke],be.options[ke]))throw new Error("Can't customize discriminator option "+ke+" (can only modify "+Object.keys(x).join(", ")+")")}se.options=b(be.options);for(var ue=0,Ee=Object.keys(fe);ue<Ee.length;ue++){var Ae=Ee[ue];se.options[Ae]=fe[Ae]}le&&(se.options.toJSON=le),ye&&(se.options.toObject=ye),_e!==void 0&&(se.options._id=_e),se.options.id=q,j&&(se.s.hooks=A.schema.s.hooks.merge(se.s.hooks)),D&&(se.plugins=Array.prototype.slice.call(be.plugins)),se.callQueue=be.callQueue.concat(se.callQueue),delete se._requiredpaths}(C,A.schema),A.discriminators||(A.discriminators={}),A.schema.discriminatorMapping||(A.schema.discriminatorMapping={key:W,value:null,isRoot:!0}),A.schema.discriminators||(A.schema.discriminators={}),A.schema.discriminators[R]=C,A.discriminators[R]&&!C.options.overwriteModels&&!V)throw new Error('Discriminator with name "'+R+'" already exists');return C}},1471:(d,f,a)=>{f.utils=a(9473),f.Cipher=a(365),f.DES=a(1048),f.CBC=a(6754),f.EDE=a(1368)},1485:(d,f,a)=>{var u=a(9732).Buffer;function g($,v){this._block=u.alloc($),this._finalSize=v,this._blockSize=$,this._len=0}g.prototype.update=function($,v){typeof $=="string"&&(v=v||"utf8",$=u.from($,v));for(var S=this._block,E=this._blockSize,h=$.length,b=this._len,m=0;m<h;){for(var p=b%E,_=Math.min(h-m,E-p),y=0;y<_;y++)S[p+y]=$[m+y];m+=_,(b+=_)%E==0&&this._update(S)}return this._len+=h,this},g.prototype.digest=function($){var v=this._len%this._blockSize;this._block[v]=128,this._block.fill(0,v+1),v>=this._finalSize&&(this._update(this._block),this._block.fill(0));var S=8*this._len;if(S<=4294967295)this._block.writeUInt32BE(S,this._blockSize-4);else{var E=(4294967295&S)>>>0,h=(S-E)/4294967296;this._block.writeUInt32BE(h,this._blockSize-8),this._block.writeUInt32BE(E,this._blockSize-4)}this._update(this._block);var b=this._hash();return $?b.toString($):b},g.prototype._update=function(){throw new Error("_update must be implemented by subclass")},d.exports=g},1505:d=>{d.exports=function(f,a,u,g,$){var v=a!=null&&a.updatedAt===!1,S=a!=null&&a.createdAt===!1,E=u!=null?u():f.ownerDocument().constructor.base.now();if(!S&&(f.isNew||f.$isSubdocument)&&g&&!f.$__getValue(g)&&f.$__isSelected(g)&&f.$set(g,E,void 0,{overwriteImmutable:!0}),!v&&$&&(f.isNew||f.$isModified())){var h=E;f.isNew&&g!=null&&(h=f.$__getValue(g)),f.$set($,h)}}},1620:(d,f,a)=>{var u=f;u.Reporter=a(6555).a,u.DecoderBuffer=a(8260).t,u.EncoderBuffer=a(8260).d,u.Node=a(4258)},1635:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,h),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,h,["Can't validate() the same doc multiple times in parallel. Document: "+m._doc._id])}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"ParallelValidateError"}),d.exports=S},1636:d=>{d.exports={rE:"6.6.1"}},1673:(d,f,a)=>{var u=a(4276);d.exports=C,C.simpleSieve=A,C.fermatTest=R;var g=a(7799),$=new g(24),v=new(a(1257)),S=new g(1),E=new g(2),h=new g(5),b=(new g(16),new g(8),new g(10)),m=new g(3),p=(new g(7),new g(11)),_=new g(4),y=(new g(12),null);function x(){if(y!==null)return y;var k=[];k[0]=2;for(var D=1,j=3;j<1048576;j+=2){for(var V=Math.ceil(Math.sqrt(j)),z=0;z<D&&k[z]<=V&&j%k[z]!=0;z++);D!==z&&k[z]<=V||(k[D++]=j)}return y=k,k}function A(k){for(var D=x(),j=0;j<D.length;j++)if(k.modn(D[j])===0)return k.cmpn(D[j])===0;return!0}function R(k){var D=g.mont(k);return E.toRed(D).redPow(k.subn(1)).fromRed().cmpn(1)===0}function C(k,D){if(k<16)return new g(D===2||D===5?[140,123]:[140,39]);var j,V;for(D=new g(D);;){for(j=new g(u(Math.ceil(k/8)));j.bitLength()>k;)j.ishrn(1);if(j.isEven()&&j.iadd(S),j.testn(1)||j.iadd(E),D.cmp(E)){if(!D.cmp(h))for(;j.mod(b).cmp(m);)j.iadd(_)}else for(;j.mod($).cmp(p);)j.iadd(_);if(A(V=j.shrn(1))&&A(j)&&R(V)&&R(j)&&v.test(V)&&v.test(j))return j}}},1679:d=>{typeof Object.create=="function"?d.exports=function(f,a){a&&(f.super_=a,f.prototype=Object.create(a.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:d.exports=function(f,a){if(a){f.super_=a;var u=function(){};u.prototype=a.prototype,f.prototype=new u,f.prototype.constructor=f}}},1685:(d,f,a)=>{var u=a(9732).Buffer,g=a(2635);d.exports=function($,v,S,E){if(u.isBuffer($)||($=u.from($,"binary")),v&&(u.isBuffer(v)||(v=u.from(v,"binary")),v.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var h=S/8,b=u.alloc(h),m=u.alloc(E||0),p=u.alloc(0);h>0||E>0;){var _=new g;_.update(p),_.update($),v&&_.update(v),p=_.digest();var y=0;if(h>0){var x=b.length-h;y=Math.min(h,p.length),p.copy(b,x,0,y),h-=y}if(y<p.length&&E>0){var A=m.length-E,R=Math.min(E,p.length-y);p.copy(m,A,y,y+R),E-=R}}return p.fill(0),{key:b,iv:m}}},1697:d=>{d.exports=Math.max},1732:(d,f,a)=>{function u(_){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u(_)}function g(_,y){var x=Object.keys(_);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(_);y&&(A=A.filter(function(R){return Object.getOwnPropertyDescriptor(_,R).enumerable})),x.push.apply(x,A)}return x}function $(_){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?g(Object(x),!0).forEach(function(A){v(_,A,x[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(x)):g(Object(x)).forEach(function(A){Object.defineProperty(_,A,Object.getOwnPropertyDescriptor(x,A))})}return _}function v(_,y,x){return(y=function(A){var R=function(C){if(u(C)!="object"||!C)return C;var k=C[Symbol.toPrimitive];if(k!==void 0){var D=k.call(C,"string");if(u(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(C)}(A);return u(R)=="symbol"?R:R+""}(y))in _?Object.defineProperty(_,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):_[y]=x,_}var S=a(3609),E=a(6426),h=a(3704),b=a(4327);function m(_,y){E.call(this,_,y,"Double")}function p(_){return this.cast(_)}m.schemaName="Double",m.defaultOptions={},m.prototype=Object.create(E.prototype),m.prototype.constructor=m,m._cast=h,m.set=E.set,m.setters=[],m.get=E.get,m._defaultCaster=function(_){if(_!=null&&_._bsontype!=="Double")throw new Error;return _},m.cast=function(_){return arguments.length===0||(_===!1&&(_=this._defaultCaster),this._cast=_),this._cast},m._checkRequired=function(_){return _!=null},m.checkRequired=E.checkRequired,m.prototype.checkRequired=function(_){return this.constructor._checkRequired(_)},m.prototype.cast=function(_){var y;y=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():m.cast();try{return y(_)}catch(x){throw new S("Double",_,this.path,x,this)}},m.prototype.$conditionalHandlers=$($({},E.prototype.$conditionalHandlers),{},{$gt:p,$gte:p,$lt:p,$lte:p}),m.prototype.toJSONSchema=function(_){var y=this.options.required&&typeof this.options.required!="function";return b("number","double",_==null?void 0:_.useBsonType,y)},d.exports=m},1793:(d,f,a)=>{var u=a(7300),g=a(2789);d.exports=function $(v){if(v==null)return null;var S=Object.keys(v),E=null;if(S.length===1&&S[0]==="_id")E=!v._id;else for(var h=0;h<S.length;++h){var b,m=S[h];if(m!=="_id"&&u(v[m])&&(E=g(v[m])?(b=$(v[m]))!==null&&b!==void 0?b:E:!v[m])!=null)break}return E}},1808:(d,f,a)=>{var u=a(1085),g=a(9732).Buffer,$=a(8629),v=a(5407),S=a(2533),E=a(5401),h=a(1685);function b(_,y,x){S.call(this),this._cache=new m,this._last=void 0,this._cipher=new E.AES(y),this._prev=g.from(x),this._mode=_,this._autopadding=!0}function m(){this.cache=g.allocUnsafe(0)}function p(_,y,x){var A=$[_.toLowerCase()];if(!A)throw new TypeError("invalid suite type");if(typeof x=="string"&&(x=g.from(x)),A.mode!=="GCM"&&x.length!==A.iv)throw new TypeError("invalid iv length "+x.length);if(typeof y=="string"&&(y=g.from(y)),y.length!==A.key/8)throw new TypeError("invalid key length "+y.length);return A.type==="stream"?new v(A.module,y,x,!0):A.type==="auth"?new u(A.module,y,x,!0):new b(A.module,y,x)}a(1679)(b,S),b.prototype._update=function(_){var y,x;this._cache.add(_);for(var A=[];y=this._cache.get(this._autopadding);)x=this._mode.decrypt(this,y),A.push(x);return g.concat(A)},b.prototype._final=function(){var _=this._cache.flush();if(this._autopadding)return function(y){var x=y[15];if(x<1||x>16)throw new Error("unable to decrypt data");for(var A=-1;++A<x;)if(y[A+(16-x)]!==x)throw new Error("unable to decrypt data");if(x!==16)return y.slice(0,16-x)}(this._mode.decrypt(this,_));if(_)throw new Error("data not multiple of block length")},b.prototype.setAutoPadding=function(_){return this._autopadding=!!_,this},m.prototype.add=function(_){this.cache=g.concat([this.cache,_])},m.prototype.get=function(_){var y;if(_){if(this.cache.length>16)return y=this.cache.slice(0,16),this.cache=this.cache.slice(16),y}else if(this.cache.length>=16)return y=this.cache.slice(0,16),this.cache=this.cache.slice(16),y;return null},m.prototype.flush=function(){if(this.cache.length)return this.cache},f.createDecipher=function(_,y){var x=$[_.toLowerCase()];if(!x)throw new TypeError("invalid suite type");var A=h(y,!1,x.key,x.iv);return p(_,A.key,A.iv)},f.createDecipheriv=p},1824:(d,f,a)=>{function u($){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},u($)}var g=a(3703);d.exports=function($,v,S,E,h,b){var m=E,p=m,_=g(h,"timestamps",!0);if(!_||m==null)return E;var y,x,A,R=_!=null&&_.createdAt===!1,C=_!=null&&_.updatedAt===!1;if(b)return E&&E.$set&&(E=E.$set,m.$set={},p=m.$set),C||!S||E[S]||(p[S]=$),R||!v||E[v]||(p[v]=$),m;if(E=E||{},Array.isArray(m))return S==null||m.push({$set:(y={},x=S,A=$,(x=function(be){var H=function(P){if(u(P)!="object"||!P)return P;var L=P[Symbol.toPrimitive];if(L!==void 0){var F=L.call(P,"string");if(u(F)!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(P)}(be);return u(H)=="symbol"?H:H+""}(x))in y?Object.defineProperty(y,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[x]=A,y)}),m;if(m.$set=m.$set||{},!C&&S&&(!E.$currentDate||!E.$currentDate[S])){var k=!1;if(S.indexOf(".")!==-1)for(var D=S.split("."),j=1;j<D.length;++j){var V=D.slice(-j).join("."),z=D.slice(0,-j).join(".");if(E[z]!=null){E[z][V]=$,k=!0;break}if(E.$set&&E.$set[z]){E.$set[z][V]=$,k=!0;break}}k||(m.$set[S]=$),m.hasOwnProperty(S)&&delete m[S]}if(!R&&v){E[v]&&delete E[v],E.$set&&E.$set[v]&&delete E.$set[v];var W=!1;if(v.indexOf(".")!==-1)for(var ee=v.split("."),ne=1;ne<ee.length;++ne){var Q=ee.slice(-ne).join("."),se=ee.slice(0,-ne).join(".");if(E[se]!=null){E[se][Q]=$,W=!0;break}if(E.$set&&E.$set[se]){E.$set[se][Q]=$,W=!0;break}}W||(m.$setOnInsert=m.$setOnInsert||{},m.$setOnInsert[v]=$)}return Object.keys(m.$set).length===0&&delete m.$set,m}},1849:(d,f,a)=>{function u($,v){(v==null||v>$.length)&&(v=$.length);for(var S=0,E=Array(v);S<v;S++)E[S]=$[S];return E}var g=a(8768);d.exports=function($,v){if($._doc._id!=null&&v!=null&&v.length!==0){var S,E=String($._doc._id),h=function(R,C){var k=typeof Symbol<"u"&&R[Symbol.iterator]||R["@@iterator"];if(!k){if(Array.isArray(R)||(k=function(ee,ne){if(ee){if(typeof ee=="string")return u(ee,ne);var Q={}.toString.call(ee).slice(8,-1);return Q==="Object"&&ee.constructor&&(Q=ee.constructor.name),Q==="Map"||Q==="Set"?Array.from(ee):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?u(ee,ne):void 0}}(R))||C){k&&(R=k);var D=0,j=function(){};return{s:j,n:function(){return D>=R.length?{done:!0}:{done:!1,value:R[D++]}},e:function(ee){throw ee},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V,z=!0,W=!1;return{s:function(){k=k.call(R)},n:function(){var ee=k.next();return z=ee.done,ee},e:function(ee){W=!0,V=ee},f:function(){try{z||k.return==null||k.return()}finally{if(W)throw V}}}}(v);try{for(h.s();!(S=h.n()).done;){var b=S.value;if(!b.isVirtual)for(var m=b.path.split("."),p=0;p<m.length-1;++p){var _=m.slice(0,p+1).join("."),y=m.slice(p+1).join("."),x=$.get(_);if(x!=null&&g.isMongooseDocumentArray(x)){for(var A=0;A<x.length;++A)x[A]&&x[A].populated(y,b._docs[E]==null?void 0:b._docs[E][A],b);break}}}}catch(R){h.e(R)}finally{h.f()}}}},1875:d=>{d.exports=function(f){for(var a,u=Object.keys(f.errors||{}),g=u.length,$=[],v=0;v<g;++v)a=u[v],f!==f.errors[a]&&$.push(a+": "+f.errors[a].message);return $.join(", ")}},1898:(d,f,a)=>{f.saveSubdocs=a(4432),f.sharding=a(2824),f.trackTransaction=a(5889),f.validateBeforeSave=a(9848)},1905:(d,f,a)=>{var u,g=a(3071),$=a(2724)(/^\s*(?:function)?\*/),v=a(953)(),S=a(209),E=g("Object.prototype.toString"),h=g("Function.prototype.toString");d.exports=function(b){if(typeof b!="function")return!1;if($(h(b)))return!0;if(!v)return E(b)==="[object GeneratorFunction]";if(!S)return!1;if(u===void 0){var m=function(){if(!v)return!1;try{return Function("return function*() {}")()}catch{}}();u=!!m&&S(m)}return S(b)===u}},1970:(d,f,a)=>{var u=f,g=a(7799),$=a(3528),v=a(6706);u.assert=$,u.toArray=v.toArray,u.zero2=v.zero2,u.toHex=v.toHex,u.encode=v.encode,u.getNAF=function(S,E,h){var b,m=new Array(Math.max(S.bitLength(),h)+1);for(b=0;b<m.length;b+=1)m[b]=0;var p=1<<E+1,_=S.clone();for(b=0;b<m.length;b++){var y,x=_.andln(p-1);_.isOdd()?(y=x>(p>>1)-1?(p>>1)-x:x,_.isubn(y)):y=0,m[b]=y,_.iushrn(1)}return m},u.getJSF=function(S,E){var h=[[],[]];S=S.clone(),E=E.clone();for(var b,m=0,p=0;S.cmpn(-m)>0||E.cmpn(-p)>0;){var _,y,x=S.andln(3)+m&3,A=E.andln(3)+p&3;x===3&&(x=-1),A===3&&(A=-1),_=1&x?(b=S.andln(7)+m&7)!=3&&b!==5||A!==2?x:-x:0,h[0].push(_),y=1&A?(b=E.andln(7)+p&7)!=3&&b!==5||x!==2?A:-A:0,h[1].push(y),2*m===_+1&&(m=1-m),2*p===y+1&&(p=1-p),S.iushrn(1),E.iushrn(1)}return h},u.cachedProperty=function(S,E,h){var b="_"+E;S.prototype[E]=function(){return this[b]!==void 0?this[b]:this[b]=h.call(this)}},u.parseBytes=function(S){return typeof S=="string"?u.toArray(S,"hex"):S},u.intFromLE=function(S){return new g(S,"hex","le")}},2003:(d,f,a)=>{var u=a(3703),g=a(608),$=a(2423);d.exports=function(v){var S=[],E=new WeakMap,h=v.constructor.indexTypes,b=new Map;return function m(p,_,y){if(!E.has(p)){E.set(p,!0),_=_||"";for(var x=0,A=Object.keys(p.paths);x<A.length;x++){var R=A[x],C=p.paths[R];if(y==null||!y.paths[R]){if(C._duplicateKeyErrorMessage!=null&&(p._duplicateKeyErrorMessagesByPath=p._duplicateKeyErrorMessagesByPath||{},p._duplicateKeyErrorMessagesByPath[R]=C._duplicateKeyErrorMessage),C.$isMongooseDocumentArray||C.$isSingleNested){if(u(C,"options.excludeIndexes")!==!0&&u(C,"schemaOptions.excludeIndexes")!==!0&&u(C,"schema.options.excludeIndexes")!==!0&&m(C.schema,_+R+"."),C.schema.discriminators!=null)for(var k=C.schema.discriminators,D=0,j=Object.keys(k);D<j.length;D++)m(k[j[D]],_+R+".",C.schema);if(C.$isMongooseDocumentArray)continue}var V=C._index||C.caster&&C.caster._index;if(V!==!1&&V!=null){var z={},W=g(V),ee=W?V:{},ne=typeof V=="string"?V:!!W&&V.type;if(ne&&h.indexOf(ne)!==-1)z[_+R]=ne;else if(ee.text)z[_+R]="text",delete ee.text;else{var Q;Q=V==="descending"||V==="desc"||V!=="ascending"&&V!=="asc"&&Number(V)===-1,z[_+R]=Q?-1:1}delete ee.type,"background"in ee||(ee.background=!0),p.options.autoIndex!=null&&(ee._autoIndex=p.options.autoIndex);var se=ee&&ee.name;typeof se=="string"&&b.has(se)?Object.assign(b.get(se),z):(S.push([z,ee]),b.set(se,z))}}}E.delete(p),_?function(be,H){for(var P=be._indexes,L=P.length,F=0;F<L;++F){for(var M=P[F][0],U=P[F][1],Z=Object.keys(M),K=Z.length,oe={},ie=0;ie<K;++ie){var $e=Z[ie];oe[H+$e]=M[$e]}var ce=Object.assign({},U);if(U!=null&&U.partialFilterExpression!=null){ce.partialFilterExpression={};for(var le=U.partialFilterExpression,ye=0,_e=Object.keys(le);ye<_e.length;ye++){var q=_e[ye];ce.partialFilterExpression[H+q]=le[q]}}S.push([oe,ce])}}(p,_):(p._indexes.forEach(function(be){var H=be[1];"background"in H||(H.background=!0),$(p,H)}),S=S.concat(p._indexes))}}(v),S}},2046:(d,f,a)=>{var u=a(1679),g=a(6583),$=a(2533),v=a(9732).Buffer,S=a(3989),E=a(1058),h=a(3261),b=v.alloc(128);function m(p,_){$.call(this,"digest"),typeof _=="string"&&(_=v.from(_));var y=p==="sha512"||p==="sha384"?128:64;this._alg=p,this._key=_,_.length>y?_=(p==="rmd160"?new E:h(p)).update(_).digest():_.length<y&&(_=v.concat([_,b],y));for(var x=this._ipad=v.allocUnsafe(y),A=this._opad=v.allocUnsafe(y),R=0;R<y;R++)x[R]=54^_[R],A[R]=92^_[R];this._hash=p==="rmd160"?new E:h(p),this._hash.update(x)}u(m,$),m.prototype._update=function(p){this._hash.update(p)},m.prototype._final=function(){var p=this._hash.digest();return(this._alg==="rmd160"?new E:h(this._alg)).update(this._opad).update(p).digest()},d.exports=function(p,_){return(p=p.toLowerCase())==="rmd160"||p==="ripemd160"?new m("rmd160",_):p==="md5"?new g(S,_):new m(p,_)}},2064:(d,f,a)=>{var u=a(2273),g=a(9122),$=a(4756),v=a(2481),S=a(9247),E=g(v(),Object);u(E,{getPolyfill:v,implementation:$,shim:S}),d.exports=E},2068:(d,f,a)=>{var u,g=a(4450),$=a(7930).documentSchemaSymbol,v=a(3303)._,S=a(8768),E=a(7930).getSymbol,h=a(7930).scopeSymbol,b=S.isPOJO;f.w=_,f.X=y;var m=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),p=Object.freeze({noDottedPath:!0});function _(x,A,R,C){u=u||a(2400);for(var k=C.typeKey,D=0,j=Object.keys(x);D<j.length;D++){var V=j[D],z=x[V];y({prop:V,subprops:b(z)&&Object.keys(z).length>0&&(!z[k]||k==="type"&&b(z.type)&&z.type.type)?z:null,prototype:A,prefix:R,options:C})}}function y(x){var A=x.prop,R=x.subprops,C=x.prototype,k=x.prefix,D=x.options;u=u||a(2400);var j=(k?k+".":"")+A,V=(k=k||"")?Object.freeze({}):p;R?Object.defineProperty(C,A,{enumerable:!0,configurable:!0,get:function(){var z,W,ee=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[j]){var ne=Object.create(u.prototype,(z=this,W={},Object.getOwnPropertyNames(z).forEach(function(Q){["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(Q)===-1||(W[Q]=Object.getOwnPropertyDescriptor(z,Q),W[Q].enumerable=!1)}),W));k||(ne.$__[h]=this),ne.$__.nestedPath=j,Object.defineProperty(ne,"schema",{enumerable:!1,configurable:!0,writable:!1,value:C.schema}),Object.defineProperty(ne,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:C.schema}),Object.defineProperty(ne,$,{enumerable:!1,configurable:!0,writable:!1,value:C.schema}),Object.defineProperty(ne,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return g(ee.get(j,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(ne,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return ee.get(j,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(ne,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return ee.get(j,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(ne,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(ne,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(j,null,m)||{}).length===0}}),Object.defineProperty(ne,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),_(R,ne,j,D),this.$__.getters[j]=ne}return this.$__.getters[j]},set:function(z){z!=null&&z.$__isNested?z=z.$__get():z instanceof u&&!z.$__isNested&&(z=z.$toObject(v)),(this.$__[h]||this).$set(j,z)}}):Object.defineProperty(C,A,{enumerable:!0,configurable:!0,get:function(){return this[E].call(this.$__[h]||this,j,null,V)},set:function(z){this.$set.call(this.$__[h]||this,j,z)}})}},2069:(d,f,a)=>{function u(v,S,E){return Object.defineProperty(v,"prototype",{writable:!1}),v}var g=a(5761),$=u(function v(S){(function(E,h){if(!(E instanceof h))throw new TypeError("Cannot call a class as a function")})(this,v),Object.assign(this,S),S!=null&&S.options!=null&&(this.options=Object.assign({},S.options))});Object.defineProperty($.prototype,"ref",g),Object.defineProperty($.prototype,"refPath",g),Object.defineProperty($.prototype,"localField",g),Object.defineProperty($.prototype,"foreignField",g),Object.defineProperty($.prototype,"justOne",g),Object.defineProperty($.prototype,"count",g),Object.defineProperty($.prototype,"match",g),Object.defineProperty($.prototype,"options",g),Object.defineProperty($.prototype,"skip",g),Object.defineProperty($.prototype,"limit",g),Object.defineProperty($.prototype,"perDocumentLimit",g),d.exports=$},2073:d=>{d.exports=function f(a){if(!Array.isArray(a))return{min:0,max:0,containsNonArrayItem:!0};if(a.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(a.length===1&&!Array.isArray(a[0]))return{min:1,max:1,containsNonArrayItem:!1};for(var u=f(a[0]),g=1;g<a.length;++g){var $=f(a[g]);$.min<u.min&&(u.min=$.min),$.max>u.max&&(u.max=$.max),u.containsNonArrayItem=u.containsNonArrayItem||$.containsNonArrayItem}return u.min=u.min+1,u.max=u.max+1,u}},2081:(d,f,a)=>{function u(Q){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},u(Q)}function g(Q,se){var be=typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(!be){if(Array.isArray(Q)||(be=function(U,Z){if(U){if(typeof U=="string")return $(U,Z);var K={}.toString.call(U).slice(8,-1);return K==="Object"&&U.constructor&&(K=U.constructor.name),K==="Map"||K==="Set"?Array.from(U):K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K)?$(U,Z):void 0}}(Q))||se){be&&(Q=be);var H=0,P=function(){};return{s:P,n:function(){return H>=Q.length?{done:!0}:{done:!1,value:Q[H++]}},e:function(U){throw U},f:P}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var L,F=!0,M=!1;return{s:function(){be=be.call(Q)},n:function(){var U=be.next();return F=U.done,U},e:function(U){M=!0,L=U},f:function(){try{F||be.return==null||be.return()}finally{if(M)throw L}}}}function $(Q,se){(se==null||se>Q.length)&&(se=Q.length);for(var be=0,H=Array(se);be<se;be++)H[be]=Q[be];return H}function v(Q,se){for(var be=0;be<se.length;be++){var H=se[be];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(Q,S(H.key),H)}}function S(Q){var se=function(be){if(u(be)!="object"||!be)return be;var H=be[Symbol.toPrimitive];if(H!==void 0){var P=H.call(be,"string");if(u(P)!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(be)}(Q);return u(se)=="symbol"?se:se+""}function E(Q,se,be,H){var P=h(_(Q.prototype),se,be);return 2&H&&typeof P=="function"?function(L){return P.apply(be,L)}:P}function h(){return h=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(Q,se,be){var H=function(L,F){for(;!{}.hasOwnProperty.call(L,F)&&(L=_(L))!==null;);return L}(Q,se);if(H){var P=Object.getOwnPropertyDescriptor(H,se);return P.get?P.get.call(arguments.length<3?Q:be):P.value}},h.apply(null,arguments)}function b(Q){var se=typeof Map=="function"?new Map:void 0;return b=function(be){if(be===null||!function(P){try{return Function.toString.call(P).indexOf("[native code]")!==-1}catch{return typeof P=="function"}}(be))return be;if(typeof be!="function")throw new TypeError("Super expression must either be null or a function");if(se!==void 0){if(se.has(be))return se.get(be);se.set(be,H)}function H(){return function(P,L,F){if(m())return Reflect.construct.apply(null,arguments);var M=[null];M.push.apply(M,L);var U=new(P.bind.apply(P,M));return F&&p(U,F.prototype),U}(be,arguments,_(this).constructor)}return H.prototype=Object.create(be.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),p(H,be)},b(Q)}function m(){try{var Q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m=function(){return!!Q})()}function p(Q,se){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(be,H){return be.__proto__=H,be},p(Q,se)}function _(Q){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(se){return se.__proto__||Object.getPrototypeOf(se)},_(Q)}var y=a(5022),x=a(8213),A=a(4450),R=a(8768).deepEqual,C=a(5879),k=a(3216),D=a(7352),j=a(2793),V=a(3305),z=a(4473),W=a(7930).populateModelSymbol,ee=function(Q){function se(P,L,F,M){var U;return function(Z,K){if(!(Z instanceof K))throw new TypeError("Cannot call a class as a function")}(this,se),C(P)==="Object"&&(P=Object.keys(P).reduce(function(Z,K){return Z.concat([[K,P[K]]])},[])),(U=function(Z,K,oe){return K=_(K),function(ie,$e){if($e&&(u($e)=="object"||typeof $e=="function"))return $e;if($e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}(ie)}(Z,m()?Reflect.construct(K,oe||[],_(Z).constructor):K.apply(Z,oe))}(this,se,[P])).$__parent=F!=null&&F.$__!=null?F:null,U.$__path=L,U.$__schemaType=M??new y(L),U.$__runDeferred(),U}return function(P,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(L&&L.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),L&&p(P,L)}(se,Q),be=se,H=[{key:"$init",value:function(P,L){ne(P),E(se,"set",this,3)([P,L]),L!=null&&L.$isSingleNested&&(L.$basePath=this.$__path+"."+P)}},{key:"$__set",value:function(P,L){E(se,"set",this,3)([P,L])}},{key:"get",value:function(P,L){return V(P,"ObjectId")&&(P=P.toString()),(L=L||{}).getters===!1?E(se,"get",this,3)([P]):this.$__schemaType.applyGetters(E(se,"get",this,3)([P]),this.$__parent)}},{key:"set",value:function(P,L){if(V(P,"ObjectId")&&(P=P.toString()),ne(P),L=k(L),this.$__schemaType==null)return this.$__deferred=this.$__deferred||[],void this.$__deferred.push({key:P,value:L});var F,M=this.$__parent,U=M!=null&&M.$__&&M.$__.populated?M.$populated(ie.call(this),!0)||M.$populated(this.$__path,!0):null,Z=this.get(P);if(U!=null){if(this.$__schemaType.$isSingleNested)throw new x("Cannot manually populate single nested subdoc underneath Map "+'at path "'.concat(this.$__path,'". Try using an array instead of a Map.'));Array.isArray(L)&&this.$__schemaType.$isMongooseArray?L=L.map(function($e){return $e.$__==null&&($e=new U.options[W]($e)),$e.$__.wasPopulated={value:$e._doc._id},$e}):L!=null&&(L.$__==null&&(L=new U.options[W](L)),L.$__.wasPopulated={value:L._doc._id})}else try{var K=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested?{path:ie.call(this)}:null;L=this.$__schemaType.applySetters(L,this.$__parent,!1,this.get(P),K)}catch($e){if(this.$__parent!=null&&this.$__parent.$__!=null)return void this.$__parent.invalidate(ie.call(this),$e);throw $e}if(E(se,"set",this,3)([P,L]),M!=null&&M.$__!=null&&!R(L,Z)){var oe=ie.call(this);M.markModified(oe),(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)&&z(M,oe)}function ie(){return F||(F=this.$__path+"."+P)}}},{key:"clear",value:function(){E(se,"clear",this,3)([]);var P=this.$__parent;P!=null&&P.markModified(this.$__path)}},{key:"delete",value:function(P){return V(P,"ObjectId")&&(P=P.toString()),this.set(P,void 0),E(se,"delete",this,3)([P])}},{key:"toBSON",value:function(){return new Map(this)}},{key:"toObject",value:function(P){if(P&&P.flattenMaps){var L,F={},M=g(this.keys());try{for(M.s();!(L=M.n()).done;){var U=L.value;F[U]=A(this.get(U),P)}}catch(Z){M.e(Z)}finally{M.f()}return F}return new Map(this)}},{key:"$toObject",value:function(){return this.constructor.prototype.toObject.apply(this,arguments)}},{key:"toJSON",value:function(P){if(typeof(P&&P.flattenMaps)!="boolean"||P.flattenMaps){var L,F={},M=g(this.keys());try{for(M.s();!(L=M.n()).done;){var U=L.value;F[U]=A(this.get(U),P)}}catch(Z){M.e(Z)}finally{M.f()}return F}return new Map(this)}},{key:"inspect",value:function(){return new Map(this)}},{key:"$__runDeferred",value:function(){if(this.$__deferred){var P,L=g(this.$__deferred);try{for(L.s();!(P=L.n()).done;){var F=P.value;this.set(F.key,F.value)}}catch(M){L.e(M)}finally{L.f()}this.$__deferred=null}}}],H&&v(be.prototype,H),Object.defineProperty(be,"prototype",{writable:!1}),be;var be,H}(b(Map));function ne(Q){var se=u(Q);if(se!=="string")throw new TypeError("Mongoose maps only support string keys, got ".concat(se));if(Q.startsWith("$"))throw new Error('Mongoose maps do not support keys that start with "$", got "'.concat(Q,'"'));if(Q.includes("."))throw new Error('Mongoose maps do not support keys that contain ".", got "'.concat(Q,'"'));if(j.has(Q))throw new Error('Mongoose maps do not support reserved key name "'.concat(Q,'"'))}D.inspect.custom&&Object.defineProperty(ee.prototype,D.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:ee.prototype.inspect}),Object.defineProperty(ee.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(ee.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(ee.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(ee.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(ee.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0}),Object.defineProperty(ee.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0}),d.exports=ee},2097:(d,f,a)=>{function u(_){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u(_)}function g(_,y){(y==null||y>_.length)&&(y=_.length);for(var x=0,A=Array(y);x<y;x++)A[x]=_[x];return A}function $(_,y,x){return(y=function(A){var R=function(C){if(u(C)!="object"||!C)return C;var k=C[Symbol.toPrimitive];if(k!==void 0){var D=k.call(C,"string");if(u(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(C)}(A);return u(R)=="symbol"?R:R+""}(y))in _?Object.defineProperty(_,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):_[y]=x,_}var v=a(9166),S=a(1824),E=a(3703),h=a(3696),b=a(1505),m=a(7160),p=new Set(["replaceOne","findOneAndReplace"]);d.exports=function(_,y){var x=_.childSchemas.find(function(W){return!!W.schema.options.timestamps});if(y||x){var A=h(y,"createdAt"),R=h(y,"updatedAt"),C=y!=null&&y.hasOwnProperty("currentTime")?y.currentTime:null,k={};if(_.$timestamps={createdAt:A,updatedAt:R},A&&!_.paths[A]){var D=_.base!=null?_.base.get("timestamps.createdAt.immutable"):null,j=D==null||D;k[A]=$($({},_.options.typeKey||"type",Date),"immutable",j)}R&&!_.paths[R]&&(k[R]=Date),_.add(k),_.pre("save",function(W){var ee=E(this,"$__.saveOptions.timestamps");if(ee===!1)return W();b(this,ee,C,A,R),W()}),_.methods.initializeTimestamps=function(){var W=C!=null?C():this.constructor.base.now();if(A&&!this.get(A)&&this.$set(A,W),R&&!this.get(R)&&this.$set(R,W),this.$isSubdocument)return this;var ee,ne=function(se,be){var H=typeof Symbol<"u"&&se[Symbol.iterator]||se["@@iterator"];if(!H){if(Array.isArray(se)||(H=function(Z,K){if(Z){if(typeof Z=="string")return g(Z,K);var oe={}.toString.call(Z).slice(8,-1);return oe==="Object"&&Z.constructor&&(oe=Z.constructor.name),oe==="Map"||oe==="Set"?Array.from(Z):oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(oe)?g(Z,K):void 0}}(se))||be){H&&(se=H);var P=0,L=function(){};return{s:L,n:function(){return P>=se.length?{done:!0}:{done:!1,value:se[P++]}},e:function(Z){throw Z},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F,M=!0,U=!1;return{s:function(){H=H.call(se)},n:function(){var Z=H.next();return M=Z.done,Z},e:function(Z){U=!0,F=Z},f:function(){try{M||H.return==null||H.return()}finally{if(U)throw F}}}}(this.$getAllSubdocs());try{for(ne.s();!(ee=ne.n()).done;){var Q=ee.value;Q.initializeTimestamps&&Q.initializeTimestamps()}}catch(se){ne.e(se)}finally{ne.f()}return this},z[m.builtInMiddleware]=!0;var V={query:!0,model:!1};_.pre("findOneAndReplace",V,z),_.pre("findOneAndUpdate",V,z),_.pre("replaceOne",V,z),_.pre("update",V,z),_.pre("updateOne",V,z),_.pre("updateMany",V,z)}function z(W){var ee=C!=null?C():this.model.base.now();p.has(this.op)&&this.getUpdate()==null&&this.setUpdate({}),S(ee,A,R,this.getUpdate(),this._mongooseOptions,p.has(this.op)),v(ee,this.getUpdate(),this.model.schema),W()}}},2098:(d,f,a)=>{var u=a(3604),g=a(1808),$=a(3219);f.createCipher=f.Cipher=u.createCipher,f.createCipheriv=f.Cipheriv=u.createCipheriv,f.createDecipher=f.Decipher=g.createDecipher,f.createDecipheriv=f.Decipheriv=g.createDecipheriv,f.listCiphers=f.getCiphers=function(){return Object.keys($)}},2134:(d,f,a)=>{var u=a(5832).Buffer;function g(j){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},g(j)}function $(j,V){var z=Object.keys(j);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(j);V&&(W=W.filter(function(ee){return Object.getOwnPropertyDescriptor(j,ee).enumerable})),z.push.apply(z,W)}return z}function v(j){for(var V=1;V<arguments.length;V++){var z=arguments[V]!=null?arguments[V]:{};V%2?$(Object(z),!0).forEach(function(W){S(j,W,z[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(z)):$(Object(z)).forEach(function(W){Object.defineProperty(j,W,Object.getOwnPropertyDescriptor(z,W))})}return j}function S(j,V,z){return(V=function(W){var ee=function(ne){if(g(ne)!="object"||!ne)return ne;var Q=ne[Symbol.toPrimitive];if(Q!==void 0){var se=Q.call(ne,"string");if(g(se)!="object")return se;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(W);return g(ee)=="symbol"?ee:ee+""}(V))in j?Object.defineProperty(j,V,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[V]=z,j}var E=a(6365),h=a(6426),b=h.CastError,m=a(8250),p=a(4327),_=a(8768),y=a(9460),x=m.UUID_FORMAT,A=E.Binary;function R(j){var V;return typeof j!="string"&&j!=null?(V=j.toString("hex")).substring(0,8)+"-"+V.substring(8,12)+"-"+V.substring(12,16)+"-"+V.substring(16,20)+"-"+V.substring(20,32):j}function C(j,V){h.call(this,j,V,"UUID"),this.getters.push(function(z){return z!=null&&z.$__!=null?z:u.isBuffer(z)?R(z):z instanceof A?R(z.buffer):_.isPOJO(z)&&z.type==="Buffer"&&Array.isArray(z.data)?R(u.from(z.data)):z})}function k(j){return this.cast(j)}function D(j){var V=this;return j.map(function(z){return V.cast(z)})}C.schemaName="UUID",C.defaultOptions={},C.prototype=Object.create(h.prototype),C.prototype.constructor=C,C._cast=m,C.get=h.get,C.set=h.set,C.setters=[],C.cast=function(j){return arguments.length===0||(j===!1&&(j=this._defaultCaster),this._cast=j),this._cast},C._checkRequired=function(j){return j!=null},C.checkRequired=h.checkRequired,C.prototype.checkRequired=function(j){return u.isBuffer(j)&&(j=R(j)),j!=null&&x.test(j)},C.prototype.cast=function(j,V,z,W,ee){if(_.isNonBuiltinObject(j)&&h._isRef(this,j,V,z))return this._castRef(j,V,z,ee);var ne;ne=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():C.cast();try{return ne(j)}catch(Q){throw new b(C.schemaName,j,this.path,Q,this)}},C.prototype.$conditionalHandlers=v(v({},h.prototype.$conditionalHandlers),{},{$bitsAllClear:y,$bitsAnyClear:y,$bitsAllSet:y,$bitsAnySet:y,$all:D,$gt:k,$gte:k,$in:D,$lt:k,$lte:k,$ne:k,$nin:D}),C.prototype.castForQuery=function(j,V,z){var W;if(j!=null){if(!(W=this.$conditionalHandlers[j]))throw new Error("Can't use "+j+" with UUID.");return W.call(this,V,z)}try{return this.applySetters(V,z)}catch(ee){throw ee instanceof b&&ee.path===this.path&&this.$fullPath!=null&&(ee.path=this.$fullPath),ee}},C.prototype.toJSONSchema=function(j){var V=this.options.required&&typeof this.options.required!="function";return p("string","binData",j==null?void 0:j.useBsonType,V)},d.exports=C},2151:d=>{d.exports=Math.round},2219:(d,f,a)=>{var u=a(1679),g=a(1485),$=a(9732).Buffer,v=[1518500249,1859775393,-1894007588,-899497514],S=new Array(80);function E(){this.init(),this._w=S,g.call(this,64,56)}function h(m){return m<<30|m>>>2}function b(m,p,_,y){return m===0?p&_|~p&y:m===2?p&_|p&y|_&y:p^_^y}u(E,g),E.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},E.prototype._update=function(m){for(var p,_=this._w,y=0|this._a,x=0|this._b,A=0|this._c,R=0|this._d,C=0|this._e,k=0;k<16;++k)_[k]=m.readInt32BE(4*k);for(;k<80;++k)_[k]=_[k-3]^_[k-8]^_[k-14]^_[k-16];for(var D=0;D<80;++D){var j=~~(D/20),V=0|((p=y)<<5|p>>>27)+b(j,x,A,R)+C+_[D]+v[j];C=R,R=A,A=h(x),x=y,y=V}this._a=y+this._a|0,this._b=x+this._b|0,this._c=A+this._c|0,this._d=R+this._d|0,this._e=C+this._e|0},E.prototype._hash=function(){var m=$.allocUnsafe(20);return m.writeInt32BE(0|this._a,0),m.writeInt32BE(0|this._b,4),m.writeInt32BE(0|this._c,8),m.writeInt32BE(0|this._d,12),m.writeInt32BE(0|this._e,16),m},d.exports=E},2240:(d,f,a)=>{var u=f;u.der=a(3879),u.pem=a(8330)},2268:d=>{d.exports=TypeError},2273:(d,f,a)=>{function u(p){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(p)}var g=a(668),$=typeof Symbol=="function"&&u(Symbol("foo"))==="symbol",v=Object.prototype.toString,S=Array.prototype.concat,E=a(6750),h=a(3191)(),b=function(p,_,y,x){if(_ in p){if(x===!0){if(p[_]===y)return}else if(typeof(A=x)!="function"||v.call(A)!=="[object Function]"||!x())return}var A;h?E(p,_,y,!0):E(p,_,y)},m=function(p,_){var y=arguments.length>2?arguments[2]:{},x=g(_);$&&(x=S.call(x,Object.getOwnPropertySymbols(_)));for(var A=0;A<x.length;A+=1)b(p,x[A],_[x[A]],y[x[A]])};m.supportsDescriptors=!!h,d.exports=m},2288:d=>{d.exports=SyntaxError},2307:(d,f,a)=>{var u=a(5832).Buffer;function g(C,k){var D=Object.keys(C);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(C);k&&(j=j.filter(function(V){return Object.getOwnPropertyDescriptor(C,V).enumerable})),D.push.apply(D,j)}return D}function $(C){for(var k=1;k<arguments.length;k++){var D=arguments[k]!=null?arguments[k]:{};k%2?g(Object(D),!0).forEach(function(j){v(C,j,D[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(D)):g(Object(D)).forEach(function(j){Object.defineProperty(C,j,Object.getOwnPropertyDescriptor(D,j))})}return C}function v(C,k,D){return(k=function(j){var V=function(z){if(S(z)!="object"||!z)return z;var W=z[Symbol.toPrimitive];if(W!==void 0){var ee=W.call(z,"string");if(S(ee)!="object")return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(z)}(j);return S(V)=="symbol"?V:V+""}(k))in C?Object.defineProperty(C,k,{value:D,enumerable:!0,configurable:!0,writable:!0}):C[k]=D,C}function S(C){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},S(C)}var E=a(6365),h=a(2945),b=a(6426),m=a(4327),p=a(9460),_=a(8768),y=E.Binary,x=b.CastError;function A(C,k){b.call(this,C,k,"Buffer")}function R(C,k){return this.castForQuery(null,C,k)}A.schemaName="Buffer",A.defaultOptions={},A.prototype=Object.create(b.prototype),A.prototype.constructor=A,A.prototype.OptionsConstructor=h,A._checkRequired=function(C){return!(!C||!C.length)},A.set=b.set,A.setters=[],A.get=b.get,A.checkRequired=b.checkRequired,A.prototype.checkRequired=function(C,k){return b._isRef(this,C,k,!0)?!!C:this.constructor._checkRequired(C)},A.prototype.cast=function(C,k,D,j,V){var z;if(b._isRef(this,C,k,D)){if(C&&C.isMongooseBuffer)return C;if(u.isBuffer(C))return C&&C.isMongooseBuffer||(C=new E(C,[this.path,k]),this.options.subtype!=null&&(C._subtype=this.options.subtype)),C;if(C instanceof y){if(z=new E(C.value(!0),[this.path,k]),typeof C.sub_type!="number")throw new x("Buffer",C,this.path,null,this);return z._subtype=C.sub_type,z}if(C==null||_.isNonBuiltinObject(C))return this._castRef(C,k,D,V)}if(C&&C._id&&(C=C._id),C&&C.isMongooseBuffer)return C;if(u.isBuffer(C))return C&&C.isMongooseBuffer||(C=new E(C,[this.path,k]),this.options.subtype!=null&&(C._subtype=this.options.subtype)),C;if(C instanceof y){if(z=new E(C.value(!0),[this.path,k]),typeof C.sub_type!="number")throw new x("Buffer",C,this.path,null,this);return z._subtype=C.sub_type,z}if(C===null)return C;var W=S(C);if(W==="string"||W==="number"||Array.isArray(C)||W==="object"&&C.type==="Buffer"&&Array.isArray(C.data))return W==="number"&&(C=[C]),z=new E(C,[this.path,k]),this.options.subtype!=null&&(z._subtype=this.options.subtype),z;if(_.isPOJO(C)&&(C.$binary instanceof y||typeof C.$binary=="string")){var ee=this.cast(u.from(C.$binary,"base64"));if(C.$type!=null)return ee._subtype=C.$type,ee}throw new x("Buffer",C,this.path,null,this)},A.prototype.subtype=function(C){return this.options.subtype=C,this},A.prototype.$conditionalHandlers=$($({},b.prototype.$conditionalHandlers),{},{$bitsAllClear:p,$bitsAnyClear:p,$bitsAllSet:p,$bitsAnySet:p,$gt:R,$gte:R,$lt:R,$lte:R}),A.prototype.castForQuery=function(C,k,D){var j,V;if(C!=null){if(!(j=this.$conditionalHandlers[C]))throw new Error("Can't use "+C+" with Buffer.");return j.call(this,k)}try{V=this.applySetters(k,D)}catch(z){throw z instanceof x&&z.path===this.path&&this.$fullPath!=null&&(z.path=this.$fullPath),z}return V&&V.toObject({transform:!1,virtuals:!1})},A.prototype.toJSONSchema=function(C){var k=this.options.required&&typeof this.options.required!="function";return m("string","binData",C==null?void 0:C.useBsonType,k)},d.exports=A},2327:(d,f,a)=>{f.publicEncrypt=a(2937),f.privateDecrypt=a(5443),f.privateEncrypt=function(u,g){return f.publicEncrypt(u,g,!0)},f.publicDecrypt=function(u,g){return f.privateDecrypt(u,g,!0)}},2344:(d,f,a)=>{var u=a(4685),g=a(7695),$=a(4104),v=a(3528),S=u.sum32,E=u.sum32_4,h=u.sum32_5,b=$.ch32,m=$.maj32,p=$.s0_256,_=$.s1_256,y=$.g0_256,x=$.g1_256,A=g.BlockHash,R=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function C(){if(!(this instanceof C))return new C;A.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=R,this.W=new Array(64)}u.inherits(C,A),d.exports=C,C.blockSize=512,C.outSize=256,C.hmacStrength=192,C.padLength=64,C.prototype._update=function(k,D){for(var j=this.W,V=0;V<16;V++)j[V]=k[D+V];for(;V<j.length;V++)j[V]=E(x(j[V-2]),j[V-7],y(j[V-15]),j[V-16]);var z=this.h[0],W=this.h[1],ee=this.h[2],ne=this.h[3],Q=this.h[4],se=this.h[5],be=this.h[6],H=this.h[7];for(v(this.k.length===j.length),V=0;V<j.length;V++){var P=h(H,_(Q),b(Q,se,be),this.k[V],j[V]),L=S(p(z),m(z,W,ee));H=be,be=se,se=Q,Q=S(ne,P),ne=ee,ee=W,W=z,z=S(P,L)}this.h[0]=S(this.h[0],z),this.h[1]=S(this.h[1],W),this.h[2]=S(this.h[2],ee),this.h[3]=S(this.h[3],ne),this.h[4]=S(this.h[4],Q),this.h[5]=S(this.h[5],se),this.h[6]=S(this.h[6],be),this.h[7]=S(this.h[7],H)},C.prototype._digest=function(k){return k==="hex"?u.toHex32(this.h,"big"):u.split32(this.h,"big")}},2345:(d,f,a)=>{function u(R,C){var k=Object.keys(R);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(R);C&&(D=D.filter(function(j){return Object.getOwnPropertyDescriptor(R,j).enumerable})),k.push.apply(k,D)}return k}function g(R){for(var C=1;C<arguments.length;C++){var k=arguments[C]!=null?arguments[C]:{};C%2?u(Object(k),!0).forEach(function(D){$(R,D,k[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(k)):u(Object(k)).forEach(function(D){Object.defineProperty(R,D,Object.getOwnPropertyDescriptor(k,D))})}return R}function $(R,C,k){return(C=function(D){var j=function(V){if(v(V)!="object"||!V)return V;var z=V[Symbol.toPrimitive];if(z!==void 0){var W=z.call(V,"string");if(v(W)!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(V)}(D);return v(j)=="symbol"?j:j+""}(C))in R?Object.defineProperty(R,C,{value:k,enumerable:!0,configurable:!0,writable:!0}):R[C]=k,R}function v(R){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},v(R)}var S=a(3672),E=a(3731),h=a(6426),b=a(2477),m=a(4327),p=a(5879),_=a(8768),y=h.CastError;function x(R,C){h.call(this,R,C,"Date")}function A(R){return this.cast(R)}x.schemaName="Date",x.defaultOptions={},x.prototype=Object.create(h.prototype),x.prototype.constructor=x,x.prototype.OptionsConstructor=E,x._cast=b,x.set=h.set,x.setters=[],x.get=h.get,x.cast=function(R){return arguments.length===0||(R===!1&&(R=this._defaultCaster),this._cast=R),this._cast},x._defaultCaster=function(R){if(R!=null&&!(R instanceof Date))throw new Error;return R},x.prototype.expires=function(R){return p(this._index)!=="Object"&&(this._index={}),this._index.expires=R,_.expires(this._index),this},x._checkRequired=function(R){return R instanceof Date},x.checkRequired=h.checkRequired,x.prototype.checkRequired=function(R,C){return v(R)==="object"&&h._isRef(this,R,C,!0)?R!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():x.checkRequired())(R)},x.prototype.min=function(R,C){if(this.minValidator&&(this.validators=this.validators.filter(function(j){return j.validator!==this.minValidator},this)),R){var k=C||S.messages.Date.min;typeof k=="string"&&(k=k.replace(/{MIN}/,R===Date.now?"Date.now()":R.toString()));var D=this;this.validators.push({validator:this.minValidator=function(j){var V=R;typeof R=="function"&&R!==Date.now&&(V=V.call(this));var z=V===Date.now?V():D.cast(V);return j===null||j.valueOf()>=z.valueOf()},message:k,type:"min",min:R})}return this},x.prototype.max=function(R,C){if(this.maxValidator&&(this.validators=this.validators.filter(function(j){return j.validator!==this.maxValidator},this)),R){var k=C||S.messages.Date.max;typeof k=="string"&&(k=k.replace(/{MAX}/,R===Date.now?"Date.now()":R.toString()));var D=this;this.validators.push({validator:this.maxValidator=function(j){var V=R;typeof V=="function"&&V!==Date.now&&(V=V.call(this));var z=V===Date.now?V():D.cast(V);return j===null||j.valueOf()<=z.valueOf()},message:k,type:"max",max:R})}return this},x.prototype.cast=function(R){var C;C=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():x.cast();try{return C(R)}catch(k){throw new y("date",R,this.path,k,this)}},x.prototype.$conditionalHandlers=g(g({},h.prototype.$conditionalHandlers),{},{$gt:A,$gte:A,$lt:A,$lte:A}),x.prototype.castForQuery=function(R,C,k){if(R==null)try{return this.applySetters(C,k)}catch(j){throw j instanceof y&&j.path===this.path&&this.$fullPath!=null&&(j.path=this.$fullPath),j}var D=this.$conditionalHandlers[R];if(!D)throw new Error("Can't use "+R+" with Date.");return D.call(this,C)},x.prototype.toJSONSchema=function(R){var C=this.options.required&&typeof this.options.required!="function";return m("string","date",R==null?void 0:R.useBsonType,C)},d.exports=x},2354:(d,f,a)=>{var u=a(6730);d.exports=Function.prototype.bind||u},2367:(d,f,a)=>{var u,g,$=a(9732).Buffer,v=a(9217),S=a(594),E=a(245),h=a(6661),b=a.g.crypto&&a.g.crypto.subtle,m={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},p=[];function _(){return g||(g=a.g.process&&a.g.process.nextTick?a.g.process.nextTick:a.g.queueMicrotask?a.g.queueMicrotask:a.g.setImmediate?a.g.setImmediate:a.g.setTimeout)}function y(x,A,R,C,k){return b.importKey("raw",x,{name:"PBKDF2"},!1,["deriveBits"]).then(function(D){return b.deriveBits({name:"PBKDF2",salt:A,iterations:R,hash:{name:k}},D,C<<3)}).then(function(D){return $.from(D)})}d.exports=function(x,A,R,C,k,D){typeof k=="function"&&(D=k,k=void 0);var j=m[(k=k||"sha1").toLowerCase()];if(j&&typeof a.g.Promise=="function"){if(v(R,C),x=h(x,S,"Password"),A=h(A,S,"Salt"),typeof D!="function")throw new Error("No callback provided to pbkdf2");(function(V,z){V.then(function(W){_()(function(){z(null,W)})},function(W){_()(function(){z(W)})})})(function(V){if(a.g.process&&!a.g.process.browser||!b||!b.importKey||!b.deriveBits)return Promise.resolve(!1);if(p[V]!==void 0)return p[V];var z=y(u=u||$.alloc(8),u,10,128,V).then(function(){return!0}).catch(function(){return!1});return p[V]=z,z}(j).then(function(V){return V?y(x,A,R,C,j):E(x,A,R,C,k)}),D)}else _()(function(){var V;try{V=E(x,A,R,C,k)}catch(z){return D(z)}D(null,V)})}},2392:(d,f,a)=>{var u=a(1419),g=a(1679);function $(v,S){this.name=v,this.body=S,this.decoders={},this.encoders={}}f.define=function(v,S){return new $(v,S)},$.prototype._createNamed=function(v){var S;try{S=Object(function(){var E=new Error("Cannot find module 'vm'");throw E.code="MODULE_NOT_FOUND",E}())("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{S=function(h){this._initNamed(h)}}return g(S,v),S.prototype._initNamed=function(E){v.call(this,E)},new S(this)},$.prototype._getDecoder=function(v){return v=v||"der",this.decoders.hasOwnProperty(v)||(this.decoders[v]=this._createNamed(u.decoders[v])),this.decoders[v]},$.prototype.decode=function(v,S,E){return this._getDecoder(S).decode(v,E)},$.prototype._getEncoder=function(v){return v=v||"der",this.encoders.hasOwnProperty(v)||(this.encoders[v]=this._createNamed(u.encoders[v])),this.encoders[v]},$.prototype.encode=function(v,S,E){return this._getEncoder(S).encode(v,E)}},2400:(d,f,a)=>{var u=a(5832).Buffer;function g(pe){return function(Se){if(Array.isArray(Se))return _(Se)}(pe)||function(Se){if(typeof Symbol<"u"&&Se[Symbol.iterator]!=null||Se["@@iterator"]!=null)return Array.from(Se)}(pe)||p(pe)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(){$=function(){return Se};var pe,Se={},Ie=Object.prototype,Me=Ie.hasOwnProperty,Be=Object.defineProperty||function(_t,wt,Ft){_t[wt]=Ft.value},Ge=typeof Symbol=="function"?Symbol:{},Xe=Ge.iterator||"@@iterator",Je=Ge.asyncIterator||"@@asyncIterator",xt=Ge.toStringTag||"@@toStringTag";function nt(_t,wt,Ft){return Object.defineProperty(_t,wt,{value:Ft,enumerable:!0,configurable:!0,writable:!0}),_t[wt]}try{nt({},"")}catch{nt=function(wt,Ft,hn){return wt[Ft]=hn}}function ct(_t,wt,Ft,hn){var Vt=wt&&wt.prototype instanceof ln?wt:ln,Sn=Object.create(Vt.prototype),zn=new Tn(hn||[]);return Be(Sn,"_invoke",{value:dr(_t,Ft,zn)}),Sn}function mt(_t,wt,Ft){try{return{type:"normal",arg:_t.call(wt,Ft)}}catch(hn){return{type:"throw",arg:hn}}}Se.wrap=ct;var yt="suspendedStart",Et="suspendedYield",jt="executing",Ut="completed",Ct={};function ln(){}function yn(){}function $n(){}var sn={};nt(sn,Xe,function(){return this});var wn=Object.getPrototypeOf,jn=wn&&wn(wn(nr([])));jn&&jn!==Ie&&Me.call(jn,Xe)&&(sn=jn);var _n=$n.prototype=ln.prototype=Object.create(sn);function hr(_t){["next","throw","return"].forEach(function(wt){nt(_t,wt,function(Ft){return this._invoke(wt,Ft)})})}function ar(_t,wt){function Ft(Vt,Sn,zn,xn){var Rn=mt(_t[Vt],_t,Sn);if(Rn.type!=="throw"){var lr=Rn.arg,fr=lr.value;return fr&&y(fr)=="object"&&Me.call(fr,"__await")?wt.resolve(fr.__await).then(function(Cn){Ft("next",Cn,zn,xn)},function(Cn){Ft("throw",Cn,zn,xn)}):wt.resolve(fr).then(function(Cn){lr.value=Cn,zn(lr)},function(Cn){return Ft("throw",Cn,zn,xn)})}xn(Rn.arg)}var hn;Be(this,"_invoke",{value:function(Vt,Sn){function zn(){return new wt(function(xn,Rn){Ft(Vt,Sn,xn,Rn)})}return hn=hn?hn.then(zn,zn):zn()}})}function dr(_t,wt,Ft){var hn=yt;return function(Vt,Sn){if(hn===jt)throw Error("Generator is already running");if(hn===Ut){if(Vt==="throw")throw Sn;return{value:pe,done:!0}}for(Ft.method=Vt,Ft.arg=Sn;;){var zn=Ft.delegate;if(zn){var xn=vn(zn,Ft);if(xn){if(xn===Ct)continue;return xn}}if(Ft.method==="next")Ft.sent=Ft._sent=Ft.arg;else if(Ft.method==="throw"){if(hn===yt)throw hn=Ut,Ft.arg;Ft.dispatchException(Ft.arg)}else Ft.method==="return"&&Ft.abrupt("return",Ft.arg);hn=jt;var Rn=mt(_t,wt,Ft);if(Rn.type==="normal"){if(hn=Ft.done?Ut:Et,Rn.arg===Ct)continue;return{value:Rn.arg,done:Ft.done}}Rn.type==="throw"&&(hn=Ut,Ft.method="throw",Ft.arg=Rn.arg)}}}function vn(_t,wt){var Ft=wt.method,hn=_t.iterator[Ft];if(hn===pe)return wt.delegate=null,Ft==="throw"&&_t.iterator.return&&(wt.method="return",wt.arg=pe,vn(_t,wt),wt.method==="throw")||Ft!=="return"&&(wt.method="throw",wt.arg=new TypeError("The iterator does not provide a '"+Ft+"' method")),Ct;var Vt=mt(hn,_t.iterator,wt.arg);if(Vt.type==="throw")return wt.method="throw",wt.arg=Vt.arg,wt.delegate=null,Ct;var Sn=Vt.arg;return Sn?Sn.done?(wt[_t.resultName]=Sn.value,wt.next=_t.nextLoc,wt.method!=="return"&&(wt.method="next",wt.arg=pe),wt.delegate=null,Ct):Sn:(wt.method="throw",wt.arg=new TypeError("iterator result is not an object"),wt.delegate=null,Ct)}function Un(_t){var wt={tryLoc:_t[0]};1 in _t&&(wt.catchLoc=_t[1]),2 in _t&&(wt.finallyLoc=_t[2],wt.afterLoc=_t[3]),this.tryEntries.push(wt)}function pt(_t){var wt=_t.completion||{};wt.type="normal",delete wt.arg,_t.completion=wt}function Tn(_t){this.tryEntries=[{tryLoc:"root"}],_t.forEach(Un,this),this.reset(!0)}function nr(_t){if(_t||_t===""){var wt=_t[Xe];if(wt)return wt.call(_t);if(typeof _t.next=="function")return _t;if(!isNaN(_t.length)){var Ft=-1,hn=function Vt(){for(;++Ft<_t.length;)if(Me.call(_t,Ft))return Vt.value=_t[Ft],Vt.done=!1,Vt;return Vt.value=pe,Vt.done=!0,Vt};return hn.next=hn}}throw new TypeError(y(_t)+" is not iterable")}return yn.prototype=$n,Be(_n,"constructor",{value:$n,configurable:!0}),Be($n,"constructor",{value:yn,configurable:!0}),yn.displayName=nt($n,xt,"GeneratorFunction"),Se.isGeneratorFunction=function(_t){var wt=typeof _t=="function"&&_t.constructor;return!!wt&&(wt===yn||(wt.displayName||wt.name)==="GeneratorFunction")},Se.mark=function(_t){return Object.setPrototypeOf?Object.setPrototypeOf(_t,$n):(_t.__proto__=$n,nt(_t,xt,"GeneratorFunction")),_t.prototype=Object.create(_n),_t},Se.awrap=function(_t){return{__await:_t}},hr(ar.prototype),nt(ar.prototype,Je,function(){return this}),Se.AsyncIterator=ar,Se.async=function(_t,wt,Ft,hn,Vt){Vt===void 0&&(Vt=Promise);var Sn=new ar(ct(_t,wt,Ft,hn),Vt);return Se.isGeneratorFunction(wt)?Sn:Sn.next().then(function(zn){return zn.done?zn.value:Sn.next()})},hr(_n),nt(_n,xt,"Generator"),nt(_n,Xe,function(){return this}),nt(_n,"toString",function(){return"[object Generator]"}),Se.keys=function(_t){var wt=Object(_t),Ft=[];for(var hn in wt)Ft.push(hn);return Ft.reverse(),function Vt(){for(;Ft.length;){var Sn=Ft.pop();if(Sn in wt)return Vt.value=Sn,Vt.done=!1,Vt}return Vt.done=!0,Vt}},Se.values=nr,Tn.prototype={constructor:Tn,reset:function(_t){if(this.prev=0,this.next=0,this.sent=this._sent=pe,this.done=!1,this.delegate=null,this.method="next",this.arg=pe,this.tryEntries.forEach(pt),!_t)for(var wt in this)wt.charAt(0)==="t"&&Me.call(this,wt)&&!isNaN(+wt.slice(1))&&(this[wt]=pe)},stop:function(){this.done=!0;var _t=this.tryEntries[0].completion;if(_t.type==="throw")throw _t.arg;return this.rval},dispatchException:function(_t){if(this.done)throw _t;var wt=this;function Ft(Rn,lr){return Sn.type="throw",Sn.arg=_t,wt.next=Rn,lr&&(wt.method="next",wt.arg=pe),!!lr}for(var hn=this.tryEntries.length-1;hn>=0;--hn){var Vt=this.tryEntries[hn],Sn=Vt.completion;if(Vt.tryLoc==="root")return Ft("end");if(Vt.tryLoc<=this.prev){var zn=Me.call(Vt,"catchLoc"),xn=Me.call(Vt,"finallyLoc");if(zn&&xn){if(this.prev<Vt.catchLoc)return Ft(Vt.catchLoc,!0);if(this.prev<Vt.finallyLoc)return Ft(Vt.finallyLoc)}else if(zn){if(this.prev<Vt.catchLoc)return Ft(Vt.catchLoc,!0)}else{if(!xn)throw Error("try statement without catch or finally");if(this.prev<Vt.finallyLoc)return Ft(Vt.finallyLoc)}}}},abrupt:function(_t,wt){for(var Ft=this.tryEntries.length-1;Ft>=0;--Ft){var hn=this.tryEntries[Ft];if(hn.tryLoc<=this.prev&&Me.call(hn,"finallyLoc")&&this.prev<hn.finallyLoc){var Vt=hn;break}}Vt&&(_t==="break"||_t==="continue")&&Vt.tryLoc<=wt&&wt<=Vt.finallyLoc&&(Vt=null);var Sn=Vt?Vt.completion:{};return Sn.type=_t,Sn.arg=wt,Vt?(this.method="next",this.next=Vt.finallyLoc,Ct):this.complete(Sn)},complete:function(_t,wt){if(_t.type==="throw")throw _t.arg;return _t.type==="break"||_t.type==="continue"?this.next=_t.arg:_t.type==="return"?(this.rval=this.arg=_t.arg,this.method="return",this.next="end"):_t.type==="normal"&&wt&&(this.next=wt),Ct},finish:function(_t){for(var wt=this.tryEntries.length-1;wt>=0;--wt){var Ft=this.tryEntries[wt];if(Ft.finallyLoc===_t)return this.complete(Ft.completion,Ft.afterLoc),pt(Ft),Ct}},catch:function(_t){for(var wt=this.tryEntries.length-1;wt>=0;--wt){var Ft=this.tryEntries[wt];if(Ft.tryLoc===_t){var hn=Ft.completion;if(hn.type==="throw"){var Vt=hn.arg;pt(Ft)}return Vt}}throw Error("illegal catch attempt")},delegateYield:function(_t,wt,Ft){return this.delegate={iterator:nr(_t),resultName:wt,nextLoc:Ft},this.method==="next"&&(this.arg=pe),Ct}},Se}function v(pe,Se,Ie,Me,Be,Ge,Xe){try{var Je=pe[Ge](Xe),xt=Je.value}catch(nt){return void Ie(nt)}Je.done?Se(xt):Promise.resolve(xt).then(Me,Be)}function S(pe){return function(){var Se=this,Ie=arguments;return new Promise(function(Me,Be){var Ge=pe.apply(Se,Ie);function Xe(xt){v(Ge,Me,Be,Xe,Je,"next",xt)}function Je(xt){v(Ge,Me,Be,Xe,Je,"throw",xt)}Xe(void 0)})}}function E(pe,Se){var Ie=Object.keys(pe);if(Object.getOwnPropertySymbols){var Me=Object.getOwnPropertySymbols(pe);Se&&(Me=Me.filter(function(Be){return Object.getOwnPropertyDescriptor(pe,Be).enumerable})),Ie.push.apply(Ie,Me)}return Ie}function h(pe){for(var Se=1;Se<arguments.length;Se++){var Ie=arguments[Se]!=null?arguments[Se]:{};Se%2?E(Object(Ie),!0).forEach(function(Me){b(pe,Me,Ie[Me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Ie)):E(Object(Ie)).forEach(function(Me){Object.defineProperty(pe,Me,Object.getOwnPropertyDescriptor(Ie,Me))})}return pe}function b(pe,Se,Ie){return(Se=function(Me){var Be=function(Ge){if(y(Ge)!="object"||!Ge)return Ge;var Xe=Ge[Symbol.toPrimitive];if(Xe!==void 0){var Je=Xe.call(Ge,"string");if(y(Je)!="object")return Je;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ge)}(Me);return y(Be)=="symbol"?Be:Be+""}(Se))in pe?Object.defineProperty(pe,Se,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):pe[Se]=Ie,pe}function m(pe,Se){var Ie=typeof Symbol<"u"&&pe[Symbol.iterator]||pe["@@iterator"];if(!Ie){if(Array.isArray(pe)||(Ie=p(pe))||Se){Ie&&(pe=Ie);var Me=0,Be=function(){};return{s:Be,n:function(){return Me>=pe.length?{done:!0}:{done:!1,value:pe[Me++]}},e:function(xt){throw xt},f:Be}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ge,Xe=!0,Je=!1;return{s:function(){Ie=Ie.call(pe)},n:function(){var xt=Ie.next();return Xe=xt.done,xt},e:function(xt){Je=!0,Ge=xt},f:function(){try{Xe||Ie.return==null||Ie.return()}finally{if(Je)throw Ge}}}}function p(pe,Se){if(pe){if(typeof pe=="string")return _(pe,Se);var Ie={}.toString.call(pe).slice(8,-1);return Ie==="Object"&&pe.constructor&&(Ie=pe.constructor.name),Ie==="Map"||Ie==="Set"?Array.from(pe):Ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ie)?_(pe,Se):void 0}}function _(pe,Se){(Se==null||Se>pe.length)&&(Se=pe.length);for(var Ie=0,Me=Array(Se);Ie<Se;Ie++)Me[Ie]=pe[Ie];return Me}function y(pe){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Se){return typeof Se}:function(Se){return Se&&typeof Symbol=="function"&&Se.constructor===Symbol&&Se!==Symbol.prototype?"symbol":typeof Se},y(pe)}var x,A,R,C=a(1417),k=a(3550).EventEmitter,D=a(4224),j=a(6365),V=a(3672),z=a(5022),W=a(6140),ee=a(3441),ne=a(1350),Q=a(1635),se=a(7058),be=a(8995),H=a(6949),P=a(9538),L=a(6814),F=a(5335),M=a(4473),U=a(4450),Z=a(2068).w,K=a(2068).X,oe=a(1226),ie=a(7430).B,$e=a(5152),ce=a(791),le=a(2692),ye=a(3216),_e=a(2746),q=a(3305),re=a(7300),fe=a(1793),we=a(5188),Re=a(7352).inspect,ke=a(3303)._,ue=a(1849),Ee=a(6451),Ae=a(5678),Ne=a(6223),De=a(3892),he=a(8768),tt=a(542),at=he.deepEqual,He=he.isMongooseObject,ot=a(7930).arrayAtomicsBackupSymbol,Ue=a(7930).arrayAtomicsSymbol,Ze=a(7930).documentArrayParent,ae=a(7930).documentIsModified,Oe=a(7930).documentModifiedPaths,Le=a(7930).documentSchemaSymbol,Pe=a(7930).getSymbol,ft=a(7930).modelSymbol,Lt=a(7930).populateModelSymbol,qt=a(7930).scopeSymbol,gn=a(7160).schemaMixedSymbol,dn=a(5346),un=a(7930).sessionNewDocuments,ge=he.specialProperties;function ve(pe,Se,Ie,Me){if(y(Ie)==="object"&&Ie!=null&&(Ie=(Me=Ie).skipId),Me=Object.assign({},Me),this.$__schema==null){var Be=he.isObject(Se)&&!Se.instanceOfSchema?new se(Se):Se;this.$__setSchema(Be),Se=Ie,Ie=Me,Me=arguments[4]||{}}if(this.$__=new D,Me.isNew!=null&&Me.isNew!==!0&&(this.$isNew=Me.isNew),Me.priorDoc!=null&&(this.$__.priorDoc=Me.priorDoc),Ie&&(this.$__.skipId=Ie),pe!=null&&y(pe)!=="object")throw new ne(pe,"obj","Document");var Ge=!0;Me.defaults!==void 0&&(this.$__.defaults=Me.defaults,Ge=Me.defaults);var Xe=this.$__schema;typeof Se=="boolean"||Se==="throw"?(Se!==!0&&(this.$__.strictMode=Se),Se=void 0):Xe.options.strict!==!0&&(this.$__.strictMode=Xe.options.strict);var Je,xt=m(Xe.requiredPaths(!0));try{for(xt.s();!(Je=xt.n()).done;){var nt=Je.value;this.$__.activePaths.require(nt)}}catch(Et){xt.e(Et)}finally{xt.f()}var ct=null;he.isPOJO(Se)&&Object.keys(Se).length>0&&(ct=fe(Se),this.$__.selected=Se,this.$__.exclude=ct);var mt=ct===!1&&Se?L(Se):null;if(this._doc==null&&(this.$__buildDoc(pe,Se,Ie,ct,mt,!1),Ge&&F(this,Se,ct,mt,!0,null,{skipParentChangeTracking:!0})),pe&&(this.$__original_set?this.$__original_set(pe,void 0,!0,Me):this.$set(pe,void 0,!0,Me),pe instanceof ve&&(this.$isNew=pe.$isNew)),Me.willInit&&Ge?Me.skipDefaults&&(this.$__.skipDefaults=Me.skipDefaults):Ge&&F(this,Se,ct,mt,!1,Me.skipDefaults),!this.$__.strictMode&&pe){var yt=this;Object.keys(this._doc).forEach(function(Et){Et in Xe.tree||Et in Xe.methods||Et in Xe.virtuals||Et.startsWith("$")||K({prop:Et,subprops:null,prototype:yt})})}(function(Et){var jt=Et.$__schema&&Et.$__schema.callQueue;if(jt.length){var Ut,Ct=m(jt);try{for(Ct.s();!(Ut=Ct.n()).done;){var ln=Ut.value;ln[0]!=="pre"&&ln[0]!=="post"&&ln[0]!=="on"&&Et[ln[0]].apply(Et,ln[1])}}catch(yn){Ct.e(yn)}finally{Ct.f()}}})(this)}for(var Fe in ve.prototype.$isMongooseDocumentPrototype=!0,Object.defineProperty(ve.prototype,"isNew",{get:function(){return this.$isNew},set:function(pe){this.$isNew=pe}}),Object.defineProperty(ve.prototype,"errors",{get:function(){return this.$errors},set:function(pe){this.$errors=pe}}),ve.prototype.$isNew=!0,he.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(pe){ve.prototype[pe]=function(){if(!this.$__.emitter){if(pe==="emit")return;this.$__.emitter=new k,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[pe].apply(this.$__.emitter,arguments)},ve.prototype["$".concat(pe)]=ve.prototype[pe]}),ve.prototype.constructor=ve,k.prototype)ve[Fe]=k.prototype[Fe];function qe(pe,Se,Ie){if(pe!=null)for(var Me=Object.keys(Ie.$__schema.paths),Be=Me.length,Ge=Se.indexOf(".")===-1?[Se]:Se.split("."),Xe=0;Xe<Be;++Xe){var Je="",xt=Me[Xe];if(xt.startsWith(Se+".")){var nt=Ie.$__schema.paths[xt],ct=nt.splitPath().slice(Ge.length),mt=ct.length;if(nt.defaultValue!==void 0)for(var yt=pe,Et=0;Et<mt&&yt!=null;++Et){var jt=ct[Et];if(Et===mt-1){if(yt[jt]!==void 0)break;try{var Ut=nt.getDefault(Ie,!1);Ut!==void 0&&(yt[jt]=Ut)}catch(Ct){Ie.invalidate(Se+"."+Je,Ct);break}break}Je+=(Je.length?".":"")+jt,yt[jt]=yt[jt]||{},yt=yt[jt]}}}}function st(pe,Se,Ie,Me,Be){Be=Be||"",Se.$__!=null&&(Se=Se._doc);for(var Ge,Xe,Je,xt=Object.keys(Se),nt=xt.length,ct=pe.$__.strictMode,mt=pe.$__schema,yt=0;yt<nt;++yt)if(Je=xt[yt],!ge.has(Je)&&(Xe=Be?Be+Je:Je,Ge=mt.path(Xe),!mt.$isRootDiscriminator||pe.$__isSelected(Xe))){var Et=Se[Je];if(!Ge&&he.isPOJO(Et))Ie[Je]||(Ie[Je]={},ct||Je in mt.tree||Je in mt.methods||Je in mt.virtuals||(pe[Je]=Ie[Je])),st(pe,Et,Ie[Je],Me,Xe+".");else if(Ge){if(Ie.hasOwnProperty(Je)&&Et!==void 0&&!Me.hydratedPopulatedDocs&&delete Ie[Je],Et===null)Ie[Je]=Ge._castNullish(null);else if(Et!==void 0){var jt=Et.$__==null?null:Et.$__.wasPopulated;if(!Ge||jt||Me.hydratedPopulatedDocs)if(Ge&&Me.hydratedPopulatedDocs){var Ut;Ie[Je]=Ge.cast(Et,pe,!0,void 0,{hydratedPopulatedDocs:!0}),Ie[Je]&&Ie[Je].$__&&Ie[Je].$__.wasPopulated?pe.$populated(Xe,Ie[Je].$__.wasPopulated.value,Ie[Je].$__.wasPopulated.options):Array.isArray(Ie[Je])&&Ie[Je].length&&(Ut=Ie[Je][0])!==null&&Ut!==void 0&&(Ut=Ut.$__)!==null&&Ut!==void 0&&Ut.wasPopulated&&pe.$populated(Xe,Ie[Je].map(function(Ct){var ln;return Ct==null||(ln=Ct.$__)===null||ln===void 0||(ln=ln.wasPopulated)===null||ln===void 0?void 0:ln.value}).filter(function(Ct){return Ct!=null}),Ie[Je][0].$__.wasPopulated.options)}else Ie[Je]=Et;else try{Me&&Me.setters?Ie[Je]=Ge.applySetters(Et,pe,!1):Ie[Je]=Ge.cast(Et,pe,!0)}catch(Ct){pe.invalidate(Ct.path,new P({path:Ct.path,message:Ct.message,type:"cast",value:Ct.value,reason:Ct}))}}pe.$isModified(Xe)||pe.$__.activePaths.init(Xe)}else Ie[Je]=Et,ct||Be||(pe[Je]=Et)}}function Dt(pe){if(pe==null)return!0;if(y(pe)!=="object"||Array.isArray(pe))return!1;for(var Se=0,Ie=Object.keys(pe);Se<Ie.length;Se++)if(!Dt(pe[Ie[Se]]))return!1;return!0}function Wt(pe,Se,Ie,Me){var Be={};(function(Y){var B=Object.keys(Y.$__.activePaths.getStatePaths("require")),me=0,de=B.length;for(me=0;me<de;++me){var je=B[me],Ve=Y.$__schema.path(je);if(Ve!=null&&typeof Ve.originalRequiredValue=="function"){Y.$__.cachedRequired=Y.$__.cachedRequired||{};try{Y.$__.cachedRequired[je]=Ve.originalRequiredValue.call(Y,Y)}catch(bt){Y.invalidate(je,bt)}}}})(pe);var Ge=new Set(Object.keys(pe.$__.activePaths.getStatePaths("require")).filter(function(Y){return!(!pe.$__isSelected(Y)&&!pe.$isModified(Y))&&(pe.$__.cachedRequired==null||!(Y in pe.$__.cachedRequired)||pe.$__.cachedRequired[Y])}));function Xe(Y){Ge.add(Y)}if(Object.keys(pe.$__.activePaths.getStatePaths("init")).forEach(Xe),Object.keys(pe.$__.activePaths.getStatePaths("modify")).forEach(Xe),Object.keys(pe.$__.activePaths.getStatePaths("default")).forEach(Xe),!Me){for(var Je=[],xt=0,nt=Object.keys(pe.$__schema.paths);xt<nt.length;xt++){var ct=nt[xt],mt=pe.$__schema.path(ct);if(mt.$isSingleNested){var yt=pe.$get(ct);yt&&Je.push(yt)}else if(mt.$isMongooseDocumentArray){var Et=pe.$get(ct);if(Et&&Et.length){var jt,Ut=m(Et);try{for(Ut.s();!(jt=Ut.n()).done;){var Ct=jt.value;Ct&&Je.push(Ct)}}catch(Y){Ut.e(Y)}finally{Ut.f()}}}}for(var ln=pe.modifiedPaths(),yn=0,$n=Je;yn<$n.length;yn++){var sn=$n[yn];if(sn.$basePath){var wn,jn=sn.$__pathRelativeToParent(),_n=m(sn.modifiedPaths());try{for(_n.s();!(wn=_n.n()).done;){var hr=wn.value;Ge.delete(jn+"."+hr)}}catch(Y){_n.e(Y)}finally{_n.f()}var ar=sn.$parent();!pe.$isModified(jn,null,ln)||ar.$__.activePaths.getStatePaths("modify").hasOwnProperty(jn)||ar.$isDefault(jn)||(Ge.add(jn),pe.$__.pathsToScopes==null&&(pe.$__.pathsToScopes={}),pe.$__.pathsToScopes[jn]=sn.$isDocumentArrayElement?sn.__parentArray:sn.$parent(),Be[jn]={skipSchemaValidators:!0},sn.$isDocumentArrayElement&&sn.__index!=null&&(Be[jn].index=sn.__index))}}}var dr,vn=m(Ge);try{for(vn.s();!(dr=vn.n()).done;){var Un=dr.value,pt=pe.$__schema.path(Un);if(pt){if(pt.$isMongooseDocumentArray){var Tn,nr=m(Ge);try{for(nr.s();!(Tn=nr.n()).done;){var _t=Tn.value;(_t==null||_t.startsWith(pt.path+"."))&&Ge.delete(_t)}}catch(Y){nr.e(Y)}finally{nr.f()}}(pt.caster||pt.validators.length!==0||pt.$parentSchemaDocArray)&&(!pt.$isMongooseArray||pt.$isMongooseDocumentArray||pt.$embeddedSchemaType.$isMongooseArray||pt.validators.length!==0||pt.$embeddedSchemaType.validators.length!==0)||Ge.delete(Un)}}}catch(Y){vn.e(Y)}finally{vn.f()}Array.isArray(Se)?Ge=function(Y,B){var me,de=new Set(B),je=new Map([]),Ve=m(B);try{for(Ve.s();!(me=Ve.n()).done;){var bt=me.value;if(bt.indexOf(".")!==-1)for(var $t=bt.split("."),Ye=$t[0],zt=1;zt<$t.length;++zt)je.set(Ye,bt),Ye=Ye+"."+$t[zt]}}catch(Jt){Ve.e(Jt)}finally{Ve.f()}var Mt,ut=new Set,At=m(Y);try{for(At.s();!(Mt=At.n()).done;){var Xt=Mt.value;de.has(Xt)?ut.add(Xt):je.has(Xt)&&ut.add(je.get(Xt))}}catch(Jt){At.e(Jt)}finally{At.f()}return ut}(Ge,Se):Array.isArray(Ie)&&(Ge=function(Y,B){return B=new Set(B),Y=Array.from(Y).filter(function(me){return!B.has(me)}),new Set(Y)}(Ge,Ie)),function(Y,B){var me,de=m(B);try{for(de.s();!(me=de.n()).done;){var je=me.value,Ve=Y.$__schema.path(je);Ve&&Ve.$isMongooseArray&&(Array.isArray(Ve)||!Ve.$isMongooseDocumentArray||Ve&&Ve.schemaOptions&&Ve.schemaOptions.required)&&(!Ve.$isMongooseArray||Ve.$isMongooseDocumentArray||Ve.$embeddedSchemaType.$isMongooseArray||Ve.$embeddedSchemaType.validators.length!==0)&&pn(Y.$__getValue(je),B,je)}}catch(bt){de.e(bt)}finally{de.f()}}(pe,Ge);var wt,Ft={skipArrays:!0},hn=m(Ge);try{for(hn.s();!(wt=hn.n()).done;){var Vt=wt.value;if(pe.$__schema.nested[Vt]){var Sn=pe.$__getValue(Vt);He(Sn)&&(Sn=Sn.toObject({transform:!1}));var zn=ie(Sn,Vt,Ft,pe.$__schema);Object.keys(zn).filter(function(Y){return!pe.$__schema.singleNestedPaths.hasOwnProperty(Y)}).forEach(Xe)}}}catch(Y){hn.e(Y)}finally{hn.f()}var xn,Rn=m(Ge);try{for(Rn.s();!(xn=Rn.n()).done;){var lr=xn.value,fr=pe.$__schema.path(lr);if(fr&&(fr.$parentSchemaDocArray&&typeof fr.$parentSchemaDocArray.path=="string"&&Ge.add(fr.$parentSchemaDocArray.path),fr.$isSchemaMap)){var Cn=pe.$__getValue(lr);if(Cn!=null){var Lr,Er=m(Cn.keys());try{for(Er.s();!(Lr=Er.n()).done;){var Sr=Lr.value;Ge.add(lr+"."+Sr)}}catch(Y){Er.e(Y)}finally{Er.f()}}}}}catch(Y){Rn.e(Y)}finally{Rn.f()}return[Ge=Array.from(Ge),Be]}function pn(pe,Se,Ie){if(pe!=null)for(var Me=pe.length,Be=0;Be<Me;++Be)Array.isArray(pe[Be])?pn(pe[Be],Se,Ie+"."+Be):Se.add(Ie+"."+Be)}function bn(pe,Se,Ie,Me){var Be,Ge,Xe,Je=pe.$__schema,xt=Je.virtuals,nt=Object.keys(xt),ct=nt.length,mt=ct,yt=pe._doc,Et=typeof(Me&&Me.aliases)!="boolean"||Me.aliases;Ie=Ie||{};var jt=null;if(Array.isArray(Ie.virtuals))jt=new Set(Ie.virtuals);else if(Ie.virtuals&&Ie.virtuals.pathsToSkip){jt=new Set(nt);for(var Ut=0;Ut<Ie.virtuals.pathsToSkip.length;Ut++)jt.has(Ie.virtuals.pathsToSkip[Ut])&&jt.delete(Ie.virtuals.pathsToSkip[Ut])}if(!yt)return Se;for(ct=0;ct<mt;++ct)if(Be=nt[ct],(jt==null||jt.has(Be))&&(Et||!Je.aliases.hasOwnProperty(Be))){if(Ge=Be,Ie.path!=null){if(!Be.startsWith(Ie.path+"."))continue;Ge=Be.substring(Ie.path.length+1)}if(Ge.indexOf(".")!==-1||Ge!==Be){var Ct=Ge.split(".");if((Xe=U(pe.get(Be),Ie))!==void 0){var ln=Ct.length;yt=Se;for(var yn=0;yn<ln-1;++yn)yt[Ct[yn]]=yt[Ct[yn]]||{},yt=yt[Ct[yn]];yt[Ct[ln-1]]=Xe}}else{if((Xe=xt[Be].applyGetters(void 0,pe))===void 0)continue;Xe=U(Xe,Ie),Se[Ge]=Xe}}return Se}function sr(pe,Se){if(tt(Se))throw new Error("`transform` function must be synchronous, but the transform on path `"+pe+"` returned a promise.")}function Pn(pe,Se,Ie){var Me=pe.$populated(Se,!0);if(!Me&&pe.$__.selected){var Be=Se.split(".")[0];if(pe.$__.selected[Be+".$"])return Be}if(Me&&he.isMongooseArray(Ie)&&(Me.options.match||Me.options.options&&he.object.hasOwnProperty(Me.options.options,"limit")||Me.options.options&&Me.options.options.skip||Me.options.select&&(Me.options.select._id===0||/\s?-_id\s?/.test(Me.options.select)))){var Ge=Ie[Ue];if(Object.keys(Ge).length===0||Ge.$set||Ge.$pop)return Se}}function Bn(pe,Se,Ie,Me,Be,Ge){if(Ge||(Ge="$set"),Ie[Ge]||(Ie[Ge]={}),Ie[Ge][Me.path]=Be,pe.$__schema.options.versionKey!==!1&&!function(Xe,Je){var xt=Xe.$__schema.options.skipVersioning;return!!xt&&xt[Je=Je.replace(/\.\d+\./,".")]}(pe,Me.path)&&3&~pe.$__.version&&!pe.$__schema.options.optimisticConcurrency){switch(Ge){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}Ge==="$push"||Ge==="$addToSet"||Ge==="$pullAll"||Ge==="$pull"?/\.\d+\.|\.\d+$/.test(Me.path)?pe.$__.version=3:pe.$__.version=2:/^\$p/.test(Ge)||Array.isArray(Be)?pe.$__.version=3:/\.\d+\.|\.\d+$/.test(Me.path)&&(pe.$__.version=1)}}function ci(pe,Se,Ie,Me,Be){if(!Ie.$set||!Ie.$set[Me.path])if(typeof Be.$__getAtomics!="function"){var Ge,Xe,Je=Be[Ue],xt=Object.keys(Je),nt=xt.length;if(nt===0)return he.isMongooseObject(Be)?Be=Be.toObject({depopulate:1,_isNested:!0}):Be.valueOf&&(Be=Be.valueOf()),Bn(pe,0,Ie,Me,Be);for(;nt--;)Ge=Je[Xe=xt[nt]],he.isMongooseObject(Ge)?Ge=Ge.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(Ge)?Ge=Ge.map(ct):Ge.valueOf&&(Ge=Ge.valueOf()),Xe==="$addToSet"&&(Ge={$each:Ge}),Bn(pe,0,Ie,Me,Ge,Xe)}else Be.$__getAtomics().forEach(function(mt){var yt=mt[0],Et=mt[1];Bn(pe,0,Ie,Me,Et,yt)});function ct(mt){return he.isMongooseObject(mt)?mt.toObject({depopulate:1,_isNested:!0}):mt}}ve.prototype.$__schema,ve.prototype.schema,Object.defineProperty(ve.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){return this.$__.locals==null&&(this.$__.locals={}),this.$__.locals},set:function(pe){this.$__.locals=pe}}),ve.prototype.isNew,Object.defineProperty(ve.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0}),ve.prototype.id,ve.prototype.$errors,Object.defineProperty(ve.prototype,"$op",{get:function(){return this.$__.op||null},set:function(pe){this.$__.op=pe}}),ve.prototype.$__buildDoc=function(pe,Se,Ie,Me,Be){for(var Ge={},Xe=Object.keys(this.$__schema.paths).filter(function(yn){return!yn.includes("$*")}),Je=Xe.length,xt=0;xt<Je;++xt){var nt=Xe[xt];if(!(nt==="_id"&&(Ie||pe&&"_id"in pe)))for(var ct=this.$__schema.paths[nt].splitPath(),mt=ct.length,yt=mt-1,Et="",jt=Ge,Ut=!1,Ct=0;Ct<mt;++Ct){var ln=ct[Ct];if(Et.length?Et+="."+ln:Et=ln,Me===!0){if(Et in Se)break}else if(Me===!1&&Se&&!Ut){if(Et in Se)Ut=!0;else if(!Be[Et])break}Ct<yt&&(jt=jt[ln]||(jt[ln]={}))}}this._doc=Ge},ve.prototype.toBSON=function(){return this.toObject(ke)},ve.prototype.init=function(pe,Se,Ie){return typeof Se=="function"&&(Ie=Se,Se=null),this.$__init(pe,Se),Ie&&Ie(null,this),this},ve.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)},ve.prototype.$__init=function(pe,Se){if(this.$isNew=!1,Se=Se||{},pe._id!=null&&Se.populated&&Se.populated.length){var Ie,Me=String(pe._id),Be=m(Se.populated);try{for(Be.s();!(Ie=Be.n()).done;){var Ge=Ie.value;if(Ge.isVirtual?this.$populated(Ge.path,he.getValue(Ge.path,pe),Ge):this.$populated(Ge.path,Ge._docs[Me],Ge),Ge._childDocs!=null){var Xe,Je=m(Ge._childDocs);try{for(Je.s();!(Xe=Je.n()).done;){var xt=Xe.value;xt!=null&&xt.$__!=null&&(xt.$__.parent=this)}}catch(ct){Je.e(ct)}finally{Je.f()}Ge._childDocs=[]}}}catch(ct){Be.e(ct)}finally{Be.f()}}st(this,pe,this._doc,Se),ue(this,Se.populated),this.$emit("init",this),this.constructor.emit("init",this);var nt=this.$__.exclude===!1&&this.$__.selected?L(this.$__.selected):null;return F(this,this.$__.selected,this.$__.exclude,nt,!1,this.$__.skipDefaults),this},ve.prototype.updateOne=function(pe,Se,Ie){var Me=this.constructor.updateOne({_id:this._doc._id},pe,Se),Be=this;return Me.pre(function(Ge){Be.constructor._middleware.execPre("updateOne",Be,[Be],Ge)}),Me.post(function(Ge){Be.constructor._middleware.execPost("updateOne",Be,[Be],{},Ge)}),this.$session()!=null&&("session"in Me.options||(Me.options.session=this.$session())),Ie!=null?Me.exec(Ie):Me},ve.prototype.replaceOne=function(){var pe=Array.prototype.slice.call(arguments);return pe.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,pe)},ve.prototype.$session=function(pe){if(arguments.length===0)return this.$__.session!=null&&this.$__.session.hasEnded?(this.$__.session=null,null):this.$__.session;if(pe!=null&&pe.hasEnded)throw new V("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(pe!=null||this.$__.session!=null){if(this.$__.session=pe,!this.$isSubdocument){var Se,Ie=m(this.$getAllSubdocs());try{for(Ie.s();!(Se=Ie.n()).done;)Se.value.$session(pe)}catch(Me){Ie.e(Me)}finally{Ie.f()}}return pe}},ve.prototype.$timestamps=function(pe){return arguments.length===0?this.$__.timestamps!=null?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0:(pe!==this.$timestamps()&&(this.$__.timestamps=pe),this)},ve.prototype.overwrite=function(pe){for(var Se=0,Ie=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(pe))));Se<Ie.length;Se++){var Me=Ie[Se];Me!=="_id"&&(this.$__schema.options.versionKey&&Me===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&Me===this.$__schema.options.discriminatorKey||this.$set(Me,pe[Me]))}return this},ve.prototype.$set=function(pe,Se,Ie,Me){var Be=this;he.isPOJO(Ie)&&(Me=Ie,Ie=void 0);var Ge,Xe,Je,xt,nt=Me&&Me.merge,ct=Ie&&Ie!==!0,mt=Ie===!0,yt=0,Et=Me&&"strict"in Me,jt=Et?Me.strict:this.$__.strictMode;if(ct&&((this.$__.adhocPaths||(this.$__.adhocPaths={}))[pe]=this.$__schema.interpretAsType(pe,Ie,this.$__schema.options)),pe==null){var Ut=[Se,pe];pe=Ut[0],Se=Ut[1]}else if(typeof pe!="string"){if(pe instanceof ve&&(pe=pe.$__isNested?pe.toObject():pe.$__schema===this.$__schema?bn(pe,h({},pe._doc)):pe._doc),pe==null){var Ct=[Se,pe];pe=Ct[0],Se=Ct[1]}xt=Se?Se+".":"";var ln=(Ge=ce(this.$__schema,pe)).length,yn=Me&&Me._skipMinimizeTopLevel||!1;if(ln===0&&yn)return delete Me._skipMinimizeTopLevel,Se&&this.$set(Se,{}),this;Me=Object.assign({},Me,{_skipMinimizeTopLevel:!1});for(var $n=0;$n<ln;++$n){Je=Ge[$n];var sn=xt?xt+Je:Je;Xe=this.$__schema.pathType(sn);var wn=pe[Je];if(Ie!==!0||xt||wn==null||Xe!=="nested"||this._doc[Je]==null||delete this._doc[Je],he.isNonBuiltinObject(wn)&&Xe==="nested")this.$set(sn,wn,mt,Object.assign({},Me,{_skipMarkModified:!0})),qe(this.$get(sn),sn,this);else if(jt){if(mt&&wn===void 0&&this.$get(sn)!==void 0)continue;if(Xe==="adhocOrUndefined"&&(Xe=$e(this,sn,{typeOnly:!0})),Xe==="real"||Xe==="virtual")this.$set(sn,wn,mt,Me);else if(Xe==="nested"&&wn instanceof ve)this.$set(sn,wn.toObject({transform:!1}),mt,Me);else{if(jt==="throw")throw Xe==="nested"?new ee(Je,wn):new be(Je);Xe==="nested"&&wn==null&&this.$set(sn,wn,mt,Me)}}else this.$set(sn,wn,mt,Me)}for(var jn={},_n=Object.keys(this.$__schema.tree),hr=0,ar=_n.length;hr<ar;++hr)(Je=_n[hr])&&this._doc.hasOwnProperty(Je)&&(jn[Je]=void 0);return this._doc=Object.assign(jn,this._doc),this}var dr=this.$__schema.pathType(pe),vn=null;if(dr==="adhocOrUndefined"&&(vn=pe.indexOf(".")===-1?[pe]:pe.split("."),dr=$e(this,vn,{typeOnly:!0})),dr==="adhocOrUndefined"&&!Et){vn==null&&(vn=pe.indexOf(".")===-1?[pe]:pe.split("."));var Un=le(this.$__schema,vn);Un!==void 0&&(jt=Un)}Se=ye(Se,!0);var pt,Tn=Be.$__.priorDoc!=null?Be.$__.priorDoc.$__getValue(pe):mt?void 0:Be.$__getValue(pe);if(dr==="nested"&&Se){if(y(Se)==="object"&&Se!=null){if(Se.$__!=null&&(Se=Se.toObject(ke)),Se==null)return this.invalidate(pe,new V.CastError("Object",Se,pe)),this;var nr=this.$isModified(pe),_t=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(pe);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(pe)){var wt=this.$__getValue(pe);this.$__.savedState[pe]=wt;for(var Ft=0,hn=Object.keys(wt||{});Ft<hn.length;Ft++){var Vt=hn[Ft];this.$__.savedState[pe+"."+Vt]=wt[Vt]}}if(nt)return this.$set(Se,pe,mt,Me);this.$__setValue(pe,null),M(this,pe);var Sn=ce(this.$__schema,Se,pe);this.$__setValue(pe,{});var zn,xn=m(Sn);try{for(xn.s();!(zn=xn.n()).done;){var Rn=zn.value;this.$set(pe+"."+Rn,Se[Rn],mt,h(h({},Me),{},{_skipMarkModified:!0}))}}catch(St){xn.e(St)}finally{xn.f()}return Tn==null||nr&&!_t||!he.deepEqual(_t?this.$__.savedState[pe]:Tn,Se)?this.markModified(pe):this.unmarkModified(pe),this}return this.invalidate(pe,new V.CastError("Object",Se,pe)),this}if(vn==null&&(vn=pe.indexOf(".")===-1?[pe]:pe.split(".")),typeof this.$__schema.aliases[vn[0]]=="string"&&(vn[0]=this.$__schema.aliases[vn[0]]),dr==="adhocOrUndefined"&&jt){var lr;for(yt=0;yt<vn.length;++yt){var fr=vn.slice(0,yt+1).join(".");if(yt+1<vn.length&&this.$__schema.pathType(fr)==="virtual")return Ae.set(pe,Se,this),this;if((pt=this.$__schema.path(fr))!=null){if(pt instanceof z){lr=!0;break}if(pt.$isSchemaMap&&pt.$__schemaType instanceof z&&yt<vn.length-1){lr=!0,pt=pt.$__schemaType;break}}}if(pt==null&&(pt=$e(this,pe)),!lr&&!pt){if(jt==="throw")throw new be(pe);return this}}else{if(dr==="virtual")return(pt=this.$__schema.virtualpath(pe)).applySetters(Se,this),this;pt=this.$__path(pe)}var Cn,Lr=this._doc,Er="";for(yt=0;yt<vn.length-1;++yt)Lr=Lr[vn[yt]],Er+=(Er.length!==0?".":"")+vn[yt],Lr||(this.$set(Er,{}),this.$__isSelected(Er)||this.unmarkModified(Er),Lr=this.$__getValue(Er));if(vn.length<=1)Cn=pe;else{var Sr=vn.length;for(yt=0;yt<Sr;++yt){var Y=vn.slice(0,yt+1).join(".");if(this.$get(Y,null,{getters:!1})===null){Cn=Y;break}}Cn||(Cn=pe)}if(!pt)return this.$__set(Cn,pe,Me,mt,vn,pt,Se,Tn),dr==="nested"&&Se==null&&M(this,pe),this;if((pt.$isSingleNested||pt.$isMongooseArray)&&function(St,Yt){if(St.$__.validationError){for(var Gt=0,In=Object.keys(St.$__.validationError.errors);Gt<In.length;Gt++){var Ln=In[Gt];Ln.startsWith(Yt+".")&&delete St.$__.validationError.errors[Ln]}Object.keys(St.$__.validationError.errors).length===0&&(St.$__.validationError=null)}}(this,pe),Se!=null&&nt&&pt.$isSingleNested){Se instanceof ve&&(Se=Se.toObject({virtuals:!1,transform:!1}));for(var B=0,me=Object.keys(Se);B<me.length;B++){var de=me[B];this.$set(pe+"."+de,Se[de],mt,Me)}return this}var je=!0;try{var Ve,bt=function(){if(pt.options==null||!(Se instanceof ve))return!1;var St=Se.constructor,Yt=typeof pt.options.ref!="function"||pt.options.ref[ft]?pt.options.ref:pt.options.ref.call(Be,Be),Gt=(Yt==null?void 0:Yt.modelName)||Yt;if(Gt!=null&&(Gt===St.modelName||Gt===St.baseModelName))return!0;var In=pt.options.refPath;if(In==null)return!1;var Ln=Se.get(In);return Ln===St.modelName||Ln===St.baseModelName}(),$t=!1;if(bt&&Se instanceof ve&&(!Se.$__.wasPopulated||he.deepEqual(Se.$__.wasPopulated.value,Se._doc._id))){var Ye=pt&&pt.$isSingleNested?pt.cast(Se,this):Se._doc._id;this.$populated(pe,Ye,b({},Lt,Se.constructor)),Se.$__.wasPopulated={value:Ye},$t=!0}var zt=this.$__schema.options.typeKey;if(pt.options&&Array.isArray(pt.options[zt])&&pt.options[zt].length&&pt.options[zt][0]&&pt.options[zt][0].ref&&function(St,Yt){if(!Array.isArray(St)||St.length===0)return!1;var Gt,In=m(St);try{for(In.s();!(Gt=In.n()).done;){var Ln=Gt.value;if(!(Ln instanceof ve)||Ln.constructor.modelName==null||Ln.constructor.modelName!=Yt&&Ln.constructor.baseModelName!=Yt)return!1}}catch(br){In.e(br)}finally{In.f()}return!0}(Se,pt.options[zt][0].ref)){Ve=b({},Lt,Se[0].constructor),this.$populated(pe,Se.map(function(St){return St._doc._id}),Ve);var Mt,ut=m(Se);try{for(ut.s();!(Mt=ut.n()).done;){var At=Mt.value;At.$__.wasPopulated={value:At._doc._id}}}catch(St){ut.e(St)}finally{ut.f()}$t=!0}if(!bt||!pt.$isSingleNested||!Se.$__){var Xt=this;this.$__schema.singleNestedPaths[pe]!=null&&vn.length>1&&(Xt=dn(this,vn,this.schema)),Se=Me!=null&&Me.overwriteImmutable?pt.applySetters(Se,Xt,!1,Tn,{overwriteImmutable:!0}):pt.applySetters(Se,Xt,!1,Tn)}if(Array.isArray(Se)&&!Array.isArray(pt)&&pt.$isMongooseDocumentArray&&Se.length!==0&&Se[0]!=null&&Se[0].$__!=null&&Se[0].$__.populated!=null){for(var Jt=Object.keys(Se[0].$__.populated),On=function(){var St=Kn[Yn];Be.$populated(pe+"."+St,Se.map(function(Yt){return Yt.$populated(St)}),Se[0].$__.populated[St].options)},Yn=0,Kn=Jt;Yn<Kn.length;Yn++)On();$t=!0}if(!$t&&this.$__.populated){if(Array.isArray(Se)&&this.$__.populated[pe])for(var kn=0;kn<Se.length;++kn)Se[kn]instanceof ve&&Se.set(kn,Se[kn]._doc._id,!0);delete this.$__.populated[pe]}Se!=null&&pt.$isSingleNested&&function(St,Yt,Gt){var In=Yt.schema;if(In!=null)for(var Ln=0,br=Object.keys(In.paths);Ln<br.length;Ln++){var Fs=br[Ln],Hs=In.paths[Fs];if(Hs.$immutableSetter!=null){var jo=Gt==null?void 0:Gt.$__getValue(Fs);Hs.$immutableSetter.call(St,jo)}}}(Se,pt,Tn),this.$markValid(pe)}catch(St){St instanceof V.StrictModeError&&St.isImmutableError?this.invalidate(pe,St):St instanceof V.CastError?(this.invalidate(St.path,St),St.$originalErrorPath&&this.invalidate(pe,new V.CastError(pt.instance,Se,pe,St.$originalErrorPath))):this.invalidate(pe,new V.CastError(pt.instance,Se,pe,St)),je=!1}if(je){var Xn,Ht=null,nn=null;if(!mt){var Fr=this.$isSubdocument?this.ownerDocument():this;Ht=Fr.$__.savedState,nn=this.$isSubdocument?this.$__.fullPath+"."+pe:pe,Fr.$__saveInitialState(nn)}this.$__set(Cn,pe,Me,mt,vn,pt,Se,Tn);var Nn=!((Xn=this.$__.session)===null||Xn===void 0||!Xn.transaction),Or=this.$__.session&&this.$__.session[un]&&this.$__.session[un].has(this)&&this.$__.session[un].get(this).modifiedPaths&&!this.$__.session[un].get(this).modifiedPaths.has(nn);Ht!=null&&Ht.hasOwnProperty(nn)&&(!Nn||Or)&&he.deepEqual(Se,Ht[nn])&&this.unmarkModified(pe)}return pt.$isSingleNested&&(this.isDirectModified(pe)||Se==null)&&M(this,pe),this},ve.prototype.set=ve.prototype.$set,ve.prototype.$__shouldModify=function(pe,Se,Ie,Me,Be,Ge,Xe,Je){return!(Ie&&Ie._skipMarkModified||!this.$isNew&&!(Se in this.$__.activePaths.getStatePaths("modify"))&&(Xe!==void 0||this.$__isSelected(Se))&&(Xe===void 0&&Se in this.$__.activePaths.getStatePaths("default")||this.$populated(Se)&&Xe instanceof ve&&at(Xe._doc._id,Je)||at(Xe,Je!==void 0?Je:he.getValue(Se,this))&&(Me||Xe==null||!(Se in this.$__.activePaths.getStatePaths("default"))||!at(Xe,Ge.getDefault(this,Me)))))},ve.prototype.$__set=function(pe,Se,Ie,Me,Be,Ge,Xe,Je){R=R||a(6547);var xt=this.$__shouldModify(pe,Se,Ie,Me,Be,Ge,Xe,Je);xt?(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[Se]&&(delete this.$__.primitiveAtomics[Se],Object.keys(this.$__.primitiveAtomics).length===0&&delete this.$__.primitiveAtomics),this.markModified(pe),A||(A=a(7557)),Xe&&he.isMongooseArray(Xe)&&(Xe._registerAtomic("$set",Xe),he.isMongooseDocumentArray(Xe)&&Xe.forEach(function(Ct){Ct&&Ct.__parentArray&&(Ct.__parentArray=Xe)}))):Array.isArray(Xe)&&Array.isArray(Je)&&he.isMongooseArray(Xe)&&he.isMongooseArray(Je)&&(Xe[Ue]=Je[Ue],Xe[ot]=Je[ot],he.isMongooseDocumentArray(Xe)&&Xe.forEach(function(Ct){Ct!=null&&(Ct.$isNew=!1)}));for(var nt=this._doc,ct=0,mt=Be.length,yt="";ct<mt;ct++){var Et=ct+1===mt;if(yt+=yt?"."+Be[ct]:Be[ct],!ge.has(Be[ct]))if(Et)nt instanceof Map?nt.set(Be[ct],Xe):nt.$isSingleNested?(Be[ct]in nt||(nt[Be[ct]]=Xe),nt._doc[Be[ct]]=Xe,xt&&nt.markModified(Be[ct])):nt[Be[ct]]=Xe;else{var jt=nt instanceof Map,Ut=jt?nt.get(Be[ct]):nt[Be[ct]];he.isPOJO(Ut)||Ut&&Ut instanceof R||Ut&&!Array.isArray(Ut)&&Ut.$isSingleNested||Ut&&Array.isArray(Ut)||Ut==null&&(Ut={},jt?nt.set(Be[ct],Ut):nt[Be[ct]]=Ut),nt=Ut}}},ve.prototype.$__getValue=function(pe){if(typeof pe!="string"&&!Array.isArray(pe))throw new TypeError('Invalid `path`. Must be either string or array. Got "'.concat(pe,'" (type ').concat(y(pe),")"));return he.getValue(pe,this._doc)},ve.prototype.$inc=function(pe,Se){var Ie=this;if(Se==null&&(Se=1),Array.isArray(pe))return pe.forEach(function(xt){return Ie.$inc(xt,Se)}),this;var Me=this.$__path(pe);if(Me==null){if(this.$__.strictMode==="throw")throw new be(pe);if(this.$__.strictMode===!0)return this}else if(Me.instance!=="Number")return this.invalidate(pe,new V.CastError(Me.instance,Se,pe)),this;var Be=this.$__getValue(pe)||0,Ge=!1,Xe=null,Je=Se;try{Se=Me.cast(Se),Je=(Xe=Me.applySetters(Be+Se,this))-Be,Ge=!0}catch(xt){this.invalidate(pe,new V.CastError("number",Se,pe,xt))}return Ge&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[pe]==null?this.$__.primitiveAtomics[pe]={$inc:Je}:this.$__.primitiveAtomics[pe].$inc+=Je,this.markModified(pe),this.$__setValue(pe,Xe)),this},ve.prototype.$__setValue=function(pe,Se){return he.setValue(pe,Se,this._doc),this},ve.prototype.get=function(pe,Se,Ie){var Me;Ie==null&&(Ie={}),Se&&(Me=this.$__schema.interpretAsType(pe,Se,this.$__schema.options));var Be=Ie.noDottedPath,Ge=Be?this.$__schema.paths[pe]:this.$__path(pe);if(Ge==null&&(Ge=this.$__schema.virtualpath(pe))!=null)return Ge.applyGetters(void 0,this);if(Be){var Xe=this._doc[pe];return Me&&(Xe=Me.cast(Xe)),Ge!=null&&Ie.getters!==!1?Ge.applyGetters(Xe,this):Xe}if(Ge!=null&&Ge.instance==="Mixed"){var Je=this.$__schema.virtualpath(pe);Je!=null&&(Ge=Je)}var xt=pe.indexOf(".")!==-1,nt=this._doc,ct=xt?pe.split("."):[pe];typeof this.$__schema.aliases[ct[0]]=="string"&&(ct[0]=this.$__schema.aliases[ct[0]]);for(var mt=0,yt=ct.length;mt<yt;mt++)nt&&nt._doc&&(nt=nt._doc),nt=nt==null?void 0:nt instanceof Map?nt.get(ct[mt],{getters:!1}):mt===yt-1?he.getValue(ct[mt],nt):nt[ct[mt]];if(Me&&(nt=Me.cast(nt)),Ge!=null&&Ie.getters!==!1)nt=Ge.applyGetters(nt,this);else if(this.$__schema.nested[pe]&&Ie.virtuals)return bn(this,U(nt)||{},{path:pe});return nt},ve.prototype[Pe]=ve.prototype.get,ve.prototype.$get=ve.prototype.get,ve.prototype.$__path=function(pe){var Se=this.$__.adhocPaths;return(Se&&Se.hasOwnProperty(pe)?Se[pe]:null)||this.$__schema.path(pe)},ve.prototype.markModified=function(pe,Se){this.$__saveInitialState(pe),this.$__.activePaths.modify(pe),Se==null||this.$isSubdocument||(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[pe]=Se)},ve.prototype.$__saveInitialState=function(pe){var Se=this.$__.savedState,Ie=pe;if(Se!=null){var Me=Ie.indexOf("."),Be=Me===-1?Ie:Ie.slice(0,Me);Se.hasOwnProperty(Be)||(Se[Be]=U(this.$__getValue(Be)))}},ve.prototype.unmarkModified=function(pe){this.$__.activePaths.init(pe),this.$__.pathsToScopes!=null&&delete this.$__.pathsToScopes[pe]},ve.prototype.$ignore=function(pe){this.$__.activePaths.ignore(pe)},ve.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))},ve.prototype.$isEmpty=function(pe){var Se={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){var Ie=this.$get(pe);return Ie==null||y(Ie)==="object"&&(he.isPOJO(Ie)?Dt(Ie):Object.keys(Ie.toObject(Se)).length===0)}return Object.keys(this.toObject(Se)).length===0},ve.prototype.modifiedPaths=function(pe){pe=pe||{};var Se=Object.keys(this.$__.activePaths.getStatePaths("modify")),Ie=new Set,Me=0,Be=0,Ge=Se.length;for(Me=0;Me<Ge;++Me){var Xe=Se[Me],Je=Ne(Xe),xt=Je.length;for(Be=0;Be<xt;++Be)Ie.add(Je[Be]);if(pe.includeChildren){var nt=0,ct=this.$get(Xe);if(y(ct)==="object"&&ct!==null){ct._doc&&(ct=ct._doc);var mt=ct.length;if(Array.isArray(ct))for(nt=0;nt<mt;++nt){var yt=Xe+"."+nt;if(!Ie.has(yt)&&(Ie.add(yt),ct[nt]!=null&&ct[nt].$__)){var Et=ct[nt].modifiedPaths(),jt=0,Ut=Et.length;for(jt=0;jt<Ut;++jt)Ie.add(yt+"."+Et[jt])}}else{var Ct=Object.keys(ct),ln=0,yn=Ct.length;for(ln=0;ln<yn;++ln)Ie.add(Xe+"."+Ct[ln])}}}}return Array.from(Ie)},ve.prototype[Oe]=ve.prototype.modifiedPaths,ve.prototype.isModified=function(pe,Se,Ie){var Me=this;if(pe){var Be=Se&&Se.ignoreAtomics,Ge=this.$__.activePaths.states.modify;if(Ge==null)return!1;typeof pe=="string"&&(pe=pe.indexOf(" ")===-1?[pe]:pe.split(" "));var Xe,Je=m(pe);try{for(Je.s();!(Xe=Je.n()).done;)if(Ge[Xe.value]!=null)return!0}catch(mt){Je.e(mt)}finally{Je.f()}var xt=Ie||this[Oe](),nt=pe.some(function(mt){return!!~xt.indexOf(mt)}),ct=Object.keys(Ge);return Be&&(ct=ct.filter(function(mt){var yt=Me.$__getValue(mt);return yt==null||yt[Ue]==null||yt[Ue].$set!==void 0})),nt||pe.some(function(mt){return ct.some(function(yt){return yt===mt||mt.startsWith(yt+".")})})}return this.$__.activePaths.some("modify")},ve.prototype.$isModified=ve.prototype.isModified,ve.prototype[ae]=ve.prototype.isModified,ve.prototype.$isDefault=function(pe){var Se=this;if(pe==null)return this.$__.activePaths.some("default");if(typeof pe=="string"&&pe.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(pe);var Ie=pe;return Array.isArray(Ie)||(Ie=Ie.split(" ")),Ie.some(function(Me){return Se.$__.activePaths.getStatePaths("default").hasOwnProperty(Me)})},ve.prototype.$isDeleted=function(pe){return arguments.length===0?!!this.$__.isDeleted:(this.$__.isDeleted=!!pe,this)},ve.prototype.isDirectModified=function(pe){var Se=this;if(pe==null)return this.$__.activePaths.some("modify");if(typeof pe=="string"&&pe.indexOf(" ")===-1){var Ie=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(pe);if(Ie||pe.indexOf(".")===-1)return Ie;for(var Me=pe.split("."),Be=0;Be<Me.length-1;++Be){var Ge=Me.slice(0,Be+1).join("."),Xe=this.$get(Ge);if(Xe!=null&&Xe.$__!=null&&Xe.isDirectModified(Me.slice(Be+1).join(".")))return!0}return!1}var Je=pe;return typeof Je=="string"&&(Je=Je.split(" ")),Je.some(function(xt){return Se.isDirectModified(xt)})},ve.prototype.isInit=function(pe){var Se=this;if(pe==null)return this.$__.activePaths.some("init");if(typeof pe=="string"&&pe.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(pe);var Ie=pe;return Array.isArray(Ie)||(Ie=Ie.split(" ")),Ie.some(function(Me){return Se.$__.activePaths.getStatePaths("init").hasOwnProperty(Me)})},ve.prototype.isSelected=function(pe){var Se=this;if(this.$__.selected==null)return!0;if(!pe)return!1;if(pe==="_id")return this.$__.selected._id!==0;if(pe.indexOf(" ")!==-1&&(pe=pe.split(" ")),Array.isArray(pe))return pe.some(function(mt){return Se.$__isSelected(mt)});var Ie=Object.keys(this.$__.selected),Me=null;if(Ie.length===1&&Ie[0]==="_id")return this.$__.selected._id===0;for(var Be=0,Ge=Ie;Be<Ge.length;Be++){var Xe=Ge[Be];if(Xe!=="_id"&&re(this.$__.selected[Xe])){Me=!!this.$__.selected[Xe];break}}if(Me===null)return!0;if(pe in this.$__.selected)return Me;for(var Je=pe+".",xt=0,nt=Ie;xt<nt.length;xt++){var ct=nt[xt];if(ct!=="_id"){if(ct.startsWith(Je))return Me||ct!==Je;if(Je.startsWith(ct+"."))return Me}}return!Me},ve.prototype.$__isSelected=ve.prototype.isSelected,ve.prototype.isDirectSelected=function(pe){var Se=this;if(this.$__.selected==null)return!0;if(pe==="_id")return this.$__.selected._id!==0;if(pe.indexOf(" ")!==-1&&(pe=pe.split(" ")),Array.isArray(pe))return pe.some(function(Je){return Se.isDirectSelected(Je)});var Ie=Object.keys(this.$__.selected),Me=null;if(Ie.length===1&&Ie[0]==="_id")return this.$__.selected._id===0;for(var Be=0,Ge=Ie;Be<Ge.length;Be++){var Xe=Ge[Be];if(Xe!=="_id"&&re(this.$__.selected[Xe])){Me=!!this.$__.selected[Xe];break}}return Me===null||(this.$__.selected.hasOwnProperty(pe)?Me:!Me)},ve.prototype.validate=function(){var pe=S($().mark(function Se(Ie,Me){var Be,Ge,Xe,Je=this,xt=arguments;return $().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(typeof Ie!="function"&&typeof Me!="function"&&typeof xt[2]!="function"){nt.next=2;break}throw new V("Document.prototype.validate() no longer accepts a callback");case 2:if(this.$op="validate",xt.length===1&&(y(xt[0])!=="object"||Array.isArray(xt[0])||(Me=xt[0],Ie=null)),Me&&typeof Me.pathsToSkip=="string"&&(Ge=Me.pathsToSkip.indexOf(" ")===-1,Me.pathsToSkip=Ge?[Me.pathsToSkip]:Me.pathsToSkip.split(" ")),Xe=Me&&Me._skipParallelValidateCheck,this.$isSubdocument!=null||(this.$__.validating&&!Xe?Be=new Q(this,{parentStack:Me&&Me.parentStack,conflictStack:this.$__.validating.stack}):Xe||(this.$__.validating=new Q(this,{parentStack:Me&&Me.parentStack}))),Be==null){nt.next=9;break}throw Be;case 9:return nt.abrupt("return",new Promise(function(ct,mt){Je.$__validate(Ie,Me,function(yt){if(Je.$op=null,Je.$__.validating=null,yt!=null)return mt(yt);ct()})}));case 10:case"end":return nt.stop()}},Se,this)}));return function(Se,Ie){return pe.apply(this,arguments)}}(),ve.prototype.$validate=ve.prototype.validate,ve.prototype.$__validate=function(pe,Se,Ie){var Me,Be=this;this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!pe?pe=g(this.$__.saveOptions.pathsToSave):typeof pe=="function"?(Ie=pe,Se=null,pe=null):typeof Se=="function"&&(Ie=Se,Se=null);var Ge,Xe=Se&&y(Se)==="object"&&"validateModifiedOnly"in Se,Je=Se&&Se.pathsToSkip||null;Ge=Xe?!!Se.validateModifiedOnly:this.$__schema.options.validateModifiedOnly;var xt=Se&&Se.validateAllPaths;if(xt){if(Je)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(pe)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(Xe&&Ge)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}var nt,ct,mt=this,yt=function(){var pt=Be.$__.validationError;if(Be.$__.validationError=null,Be.$__.validating=null,Ge&&pt!=null){for(var Tn=0,nr=Object.keys(pt.errors);Tn<nr.length;Tn++){var _t=nr[Tn];Be.$isModified(_t)||delete pt.errors[_t]}Object.keys(pt.errors).length===0&&(pt=void 0)}if(Be.$__.cachedRequired={},Be.$emit("validate",mt),Be.constructor.emit("validate",mt),pt){for(var wt in pt.errors)!Be[Ze]&&pt.errors[wt]instanceof V.CastError&&Be.invalidate(wt,pt.errors[wt]);return pt}};if(xt){var Et,jt=m(nt=new Set(Object.keys(this.$__schema.paths)));try{for(jt.s();!(Et=jt.n()).done;){var Ut=Et.value,Ct=this.$__schema.path(Ut);if(Ct&&Ct.$isMongooseArray){var ln=this.$__getValue(Ut);ln&&pn(ln,nt,Ut)}}}catch(pt){jt.e(pt)}finally{jt.f()}nt=g(nt),ct={}}else{var yn=Wt(this,pe,Je,Se&&Se._nestedValidate);nt=Ge?yn[0].filter(function(pt){return Be.$isModified(pt)}):yn[0],ct=yn[1]}if(typeof pe=="string"&&(pe=pe.split(" ")),nt.length===0)return _e(function(){var pt=yt();if(pt)return mt.$__schema.s.hooks.execPost("validate:error",mt,[mt],{error:pt},function(Tn){Ie(Tn)});Ie(null,mt)});var $n={},sn=0,wn=(Me=this.$__.saveOptions)===null||Me===void 0?void 0:Me.pathsToSave;if(Array.isArray(wn)){wn=new Set(wn);var jn,_n=m(nt);try{for(_n.s();!(jn=_n.n()).done;){var hr=jn.value;wn.has(hr)&&vn(hr)}}catch(pt){_n.e(pt)}finally{_n.f()}}else{var ar,dr=m(nt);try{for(dr.s();!(ar=dr.n()).done;)vn(ar.value)}catch(pt){dr.e(pt)}finally{dr.f()}}function vn(pt){pt==null||$n[pt]||($n[pt]=!0,sn++,_e(function(){var Tn=mt.$__schema.path(pt);if(!Tn)return--sn||Un();if(mt.$isValid(pt)){if(Tn[gn]!=null&&pt!==Tn.path)return--sn||Un();var nr,_t=mt.$__getValue(pt);(nr=mt.$populated(pt))?_t=nr:_t!=null&&_t.$__!=null&&_t.$__.wasPopulated&&(_t=_t._doc._id);var wt=mt.$__.pathsToScopes!=null&&pt in mt.$__.pathsToScopes?mt.$__.pathsToScopes[pt]:mt,Ft=h(h({},ct[pt]),{},{path:pt,validateAllPaths:xt,_nestedValidate:!0});Tn.doValidate(_t,function(hn){if(hn){if((Tn.$isSingleNested||Tn.$isArraySubdocument||Tn.$isMongooseDocumentArray)&&hn instanceof H)return--sn||Un();mt.invalidate(pt,hn,void 0,!0)}--sn||Un()},wt,Ft)}else--sn||Un()}))}function Un(){var pt=yt();if(pt)return mt.$__schema.s.hooks.execPost("validate:error",mt,[mt],{error:pt},function(Tn){Ie(Tn)});Ie(null,mt)}},ve.prototype.validateSync=function(pe,Se){var Ie,Me=this,Be=this;arguments.length!==1||y(arguments[0])!=="object"||Array.isArray(arguments[0])||(Se=arguments[0],pe=null),Ie=Se&&y(Se)==="object"&&"validateModifiedOnly"in Se?!!Se.validateModifiedOnly:this.$__schema.options.validateModifiedOnly;var Ge,Xe,Je=Se&&Se.pathsToSkip,xt=Se&&Se.validateAllPaths;if(xt){if(Je)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(pe)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}if(typeof pe=="string"){var nt=pe.indexOf(" ")===-1;pe=nt?[pe]:pe.split(" ")}else typeof Je=="string"&&Je.indexOf(" ")!==-1&&(Je=Je.split(" "));if(xt){var ct,mt=m(Ge=new Set(Object.keys(this.$__schema.paths)));try{for(mt.s();!(ct=mt.n()).done;){var yt=ct.value,Et=this.$__schema.path(yt);if(Et&&Et.$isMongooseArray){var jt=this.$__getValue(yt);jt&&pn(jt,Ge,yt)}}}catch(ar){mt.e(ar)}finally{mt.f()}Ge=g(Ge),Xe={}}else{var Ut=Wt(this,pe,Je);Ge=Ie?Ut[0].filter(function(ar){return Me.$isModified(ar)}):Ut[0],Xe=Ut[1]}for(var Ct={},ln=0,yn=Ge.length;ln<yn;++ln){var $n=Ge[ln];if(!Ct[$n]){Ct[$n]=!0;var sn=Be.$__schema.path($n);if(sn&&Be.$isValid($n)){var wn=Be.$__getValue($n),jn=sn.doValidateSync(wn,Be,{skipSchemaValidators:Xe[$n],path:$n,validateModifiedOnly:Ie,validateAllPaths:xt});if(jn){if((sn.$isSingleNested||sn.$isArraySubdocument||sn.$isMongooseDocumentArray)&&jn instanceof H)continue;Be.invalidate($n,jn,void 0,!0)}}}}var _n=Be.$__.validationError;if(Be.$__.validationError=void 0,Be.$emit("validate",Be),Be.constructor.emit("validate",Be),_n)for(var hr in _n.errors)_n.errors[hr]instanceof V.CastError&&Be.invalidate(hr,_n.errors[hr]);return _n},ve.prototype.invalidate=function(pe,Se,Ie,Me){if(this.$__.validationError||(this.$__.validationError=new H(this)),!this.$__.validationError.errors[pe])return Se&&typeof Se!="string"||(Se=new P({path:pe,message:Se,type:Me||"user defined",value:Ie})),this.$__.validationError===Se||this.$__.validationError.addError(pe,Se),this.$__.validationError},ve.prototype.$markValid=function(pe){this.$__.validationError&&this.$__.validationError.errors[pe]&&(delete this.$__.validationError.errors[pe],Object.keys(this.$__.validationError.errors).length===0&&(this.$__.validationError=null))},ve.prototype.$isValid=function(pe){var Se=this;return this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0||pe!=null&&(pe.indexOf(" ")!==-1&&(pe=pe.split(" ")),Array.isArray(pe)?pe.some(function(Ie){return Se.$__.validationError.errors[Ie]==null}):this.$__.validationError.errors[pe]==null)},ve.prototype.$__reset=function(){var pe,Se=this.$isSubdocument?null:this.$getAllSubdocs({useCache:!0});if(Se&&Se.length>0){var Ie,Me=m(Se);try{for(Me.s();!(Ie=Me.n()).done;)Ie.value.$__reset()}catch(Be){Me.e(Be)}finally{Me.f()}}return this.$__dirty().forEach(function(Be){var Ge=Be.value;Ge&&Ge[Ue]&&(Ge[ot]=Ge[Ue],Ge[Ue]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,pe=this,this.$__schema.requiredPaths().forEach(function(Be){pe.$__.activePaths.require(Be)}),this},ve.prototype.$__undoReset=function(){if(this.$__.backup!=null&&this.$__.backup.activePaths!=null){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;var pe,Se=m(this.$__dirty());try{for(Se.s();!(pe=Se.n()).done;){var Ie=pe.value.value;Ie&&Ie[Ue]&&Ie[ot]&&(Ie[Ue]=Ie[ot])}}catch(Ge){Se.e(Ge)}finally{Se.f()}if(!this.$isSubdocument){var Me,Be=m(this.$getAllSubdocs());try{for(Be.s();!(Me=Be.n()).done;)Me.value.$__undoReset()}catch(Ge){Be.e(Ge)}finally{Be.f()}}}},ve.prototype.$__dirty=function(){var pe=this,Se=this.$__.activePaths.map("modify",function(Be){return{path:Be,value:pe.$__getValue(Be),schema:pe.$__path(Be)}});Se=Se.concat(this.$__.activePaths.map("default",function(Be){if(Be!=="_id"&&pe.$__getValue(Be)!=null)return{path:Be,value:pe.$__getValue(Be),schema:pe.$__path(Be)}}));var Ie=new Map(Se.filter(function(Be){return Be!=null}).map(function(Be){return[Be.path,Be.value]})),Me=[];return Se.forEach(function(Be){if(Be){for(var Ge=null,Xe=Ne(Be.path),Je=0;Je<Xe.length-1;Je++)if(Ie.has(Xe[Je])){Ge=Ie.get(Xe[Je]);break}Ge==null?Me.push(Be):Ge!=null&&Ge[Ue]!=null&&Ge.hasAtomics()&&(Ge[Ue]={},Ge[Ue].$set=Ge)}}),Me},ve.prototype.$__setSchema=function(pe){Z(pe.tree,this,void 0,pe.options);for(var Se=0,Ie=Object.keys(pe.virtuals);Se<Ie.length;Se++){var Me=Ie[Se];pe.virtuals[Me]._applyDefaultGetters()}pe.path("schema")==null&&(this.schema=pe),this.$__schema=pe,this[Le]=pe},ve.prototype.$__getArrayPathsToValidate=function(){return x||(x=a(4878)),this.$__.activePaths.map("init","modify",(function(pe){return this.$__getValue(pe)}).bind(this)).filter(function(pe){return pe&&Array.isArray(pe)&&he.isMongooseDocumentArray(pe)&&pe.length}).reduce(function(pe,Se){return pe.concat(Se)},[]).filter(function(pe){return pe})},ve.prototype.$getAllSubdocs=function(pe){var Se;if(pe!=null&&pe.useCache&&(Se=this.$__.saveOptions)!==null&&Se!==void 0&&Se.__subdocs)return this.$__.saveOptions.__subdocs;x||(x=a(4878)),R=R||a(6547);var Ie=[];return function Me(Be){var Ge,Xe=[],Je=m(Be.$__schema.childSchemas);try{for(Je.s();!(Ge=Je.n()).done;){var xt=Ge.value.model,nt=Be.$__getValue(xt.path);if(nt!=null){if(nt.$__&&Xe.push(nt),Array.isArray(nt)){var ct,mt=m(nt);try{for(mt.s();!(ct=mt.n()).done;){var yt=ct.value;yt!=null&&yt.$__&&Xe.push(yt)}}catch(yn){mt.e(yn)}finally{mt.f()}}if(nt instanceof Map){var Et,jt=m(nt.values());try{for(jt.s();!(Et=jt.n()).done;){var Ut=Et.value;Ut!=null&&Ut.$__&&Xe.push(Ut)}}catch(yn){jt.e(yn)}finally{jt.f()}}}}}catch(yn){Je.e(yn)}finally{Je.f()}for(var Ct=0,ln=Xe;Ct<ln.length;Ct++)Me(ln[Ct]);Ie.push.apply(Ie,Xe)}(this),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=Ie),Ie},ve.prototype.$__handleReject=function(pe){this.$listeners("error").length?this.$emit("error",pe):this.constructor.listeners&&this.constructor.listeners("error").length&&this.constructor.emit("error",pe)},ve.prototype.$toObject=function(pe,Se){var Ie,Me,Be,Ge,Xe,Je,xt,nt,ct,mt,yt,Et,jt,Ut,Ct=this.$__schema._defaultToObjectOptions(Se),ln=this.$__hasOnlyPrimitiveValues();(pe=he.isPOJO(pe)?h({},pe):{})._calledWithOptions=pe._calledWithOptions||h({},pe),Ut=pe._calledWithOptions.minimize!=null?pe.minimize:Ct!=null&&Ct.minimize!=null?Ct.minimize:this.$__schema.options.minimize,pe.minimize=Ut,ln||(pe._seen=pe._seen||new Map);var yn=(Ie=(Me=(Be=pe._calledWithOptions.depopulate)!==null&&Be!==void 0?Be:Ct==null?void 0:Ct.depopulate)!==null&&Me!==void 0?Me:pe.depopulate)!==null&&Ie!==void 0&&Ie;if(yn&&pe._isNested&&this.$__.wasPopulated)return U(this.$__.wasPopulated.value||this._doc._id,pe);if(yn&&(pe.depopulate=!0),Ct!=null)for(var $n=0,sn=Object.keys(Ct);$n<sn.length;$n++){var wn=sn[$n];pe[wn]==null&&(pe[wn]=Ct[wn])}pe._isNested=!0,pe.json=Se,pe.minimize=Ut;var jn=pe._parentOptions;pe._parentOptions=this.$isSubdocument?pe:null;var _n,hr=(Ge=(Xe=(Je=pe._calledWithOptions.schemaFieldsOnly)!==null&&Je!==void 0?Je:pe.schemaFieldsOnly)!==null&&Xe!==void 0?Xe:Ct.schemaFieldsOnly)!==null&&Ge!==void 0&&Ge;if(ln&&!pe.flattenObjectIds)_n=this.$__toObjectShallow(hr);else if(hr){_n={};for(var ar=0,dr=Object.keys(this.$__schema.paths);ar<dr.length;ar++){var vn=dr[ar],Un=this.$__getValue(vn);if(Un!==void 0){var pt=vn,Tn=_n;if(vn.indexOf(".")!==-1){var nr=vn.split(".");pt=nr[nr.length-1];for(var _t=0;_t<nr.length-1;++_t){var wt;Tn[nr[_t]]=(wt=Tn[nr[_t]])!==null&&wt!==void 0?wt:{},Tn=Tn[nr[_t]]}}Tn[pt]=Un!==null?U(Un,pe):null}}}else _n=U(this._doc,pe)||{};var Ft=(xt=(nt=(ct=pe._calledWithOptions.getters)!==null&&ct!==void 0?ct:pe.getters)!==null&&nt!==void 0?nt:Ct.getters)!==null&&xt!==void 0&&xt;Ft&&(function(xn,Rn){var lr,fr,Cn=xn.$__schema,Lr=Object.keys(Cn.paths),Er=Lr.length,Sr=xn._doc;if(!Sr)return Rn;for(;Er--;){var Y=(lr=Lr[Er]).split("."),B=Y.length,me=B-1,de=Rn,je=void 0;if(Sr=xn._doc,xn.$__isSelected(lr))for(var Ve=0;Ve<B&&(fr=Sr[je=Y[Ve]],de==null||y(de)==="object");++Ve){if(Ve===me){if(de[je]=Cn.paths[lr].applyGetters(de[je],xn),Array.isArray(de[je])&&Cn.paths[lr].$embeddedSchemaType)for(var bt=0;bt<de[je].length;++bt)de[je][bt]=Cn.paths[lr].$embeddedSchemaType.applyGetters(de[je][bt],xn)}else{if(fr==null){je in Sr&&(de[je]=fr);break}de=de[je]||(de[je]={})}Sr=fr}}}(this,_n),pe.minimize&&(_n=Ee(_n)||{}));var hn=(mt=(yt=(Et=pe._calledWithOptions.virtuals)!==null&&Et!==void 0?Et:Ct.virtuals)!==null&&yt!==void 0?yt:jn==null?void 0:jn.virtuals)!==null&&mt!==void 0?mt:void 0;(hn||Ft&&hn!==!1)&&bn(this,_n,pe,pe),pe.versionKey===!1&&this.$__schema.options.versionKey&&delete _n[this.$__schema.options.versionKey];var Vt=(jt=pe._calledWithOptions.transform)===null||jt===void 0||jt,Sn=void 0;if(Vt===!0?Sn=Ct.transform:typeof Vt=="function"&&(Sn=Vt),Vt&&function(xn,Rn){var lr=xn.$__schema,fr=Object.keys(lr.paths||{});if(!xn._doc)return Rn;for(var Cn=0,Lr=fr;Cn<Lr.length;Cn++){var Er,Sr,Y,B,me,de=Lr[Cn],je=lr.paths[de],Ve=(Er=je.options.transform)!==null&&Er!==void 0?Er:(Sr=je.constructor)===null||Sr===void 0||(Sr=Sr.defaultOptions)===null||Sr===void 0?void 0:Sr.transform,bt=(Y=(B=je.$embeddedSchemaType)===null||B===void 0||(B=B.options)===null||B===void 0?void 0:B.transform)!==null&&Y!==void 0?Y:(me=je.$embeddedSchemaType)===null||me===void 0||(me=me.constructor)===null||me===void 0||(me=me.defaultOptions)===null||me===void 0?void 0:me.transform;if(typeof Ve=="function"){var $t=xn.$get(de);if($t===void 0)continue;var Ye=Ve.call(xn,$t);sr(de,Ye),he.setValue(de,Ye,Rn)}else if(typeof bt=="function"){var zt=xn.$get(de);if(zt===void 0)continue;for(var Mt=[].concat(zt),ut=0;ut<Mt.length;++ut){var At=bt.call(xn,Mt[ut]);Mt[ut]=At,sr(de,At)}Rn[de]=Mt}}}(this,_n),pe.useProjection&&function(xn,Rn){var lr=xn.$__schema,fr=Object.keys(lr.paths||{});if(!xn._doc)return Rn;var Cn=xn.$__.selected;if(Cn===void 0&&(Cn={},De.applyPaths(Cn,lr)),Cn==null||Object.keys(Cn).length===0)return Rn;for(var Lr=0,Er=fr;Lr<Er.length;Lr++){var Sr=Er[Lr];Cn[Sr]==null||Cn[Sr]||delete Rn[Sr]}}(this,_n),typeof Sn=="function"){var zn=Sn(this,_n,pe);zn!==void 0&&(_n=zn)}return _n},ve.prototype.$__toObjectShallow=function(pe){var Se={};if(this._doc!=null){var Ie,Me=m(Object.keys(pe?this.$__schema.paths:this._doc));try{for(Me.s();!(Ie=Me.n()).done;){var Be=Ie.value,Ge=this._doc[Be];Ge instanceof Date?Se[Be]=new Date(Ge):Ge!==void 0&&(Se[Be]=Ge)}}catch(Xe){Me.e(Xe)}finally{Me.f()}}return Se},ve.prototype.toObject=function(pe){return this.$toObject(pe)},ve.prototype.toJSON=function(pe){return this.$toObject(pe,!0)},ve.prototype.ownerDocument=function(){return this},ve.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this},ve.prototype.$parent=ve.prototype.parent,ve.prototype.inspect=function(pe){var Se;he.isPOJO(pe)&&((Se=pe).minimize=!1);var Ie=arguments.length>0?this.toObject(Se):this.toObject();return Ie??"MongooseDocument { "+Ie+" }"},Re.custom&&(ve.prototype[Re.custom]=ve.prototype.inspect),ve.prototype.toString=function(){var pe=this.inspect();return typeof pe=="string"?pe:Re(pe)},ve.prototype.equals=function(pe){if(!pe)return!1;var Se=this.$__getValue("_id"),Ie=pe.$__!=null?pe.$__getValue("_id"):pe;return Se||Ie?Se&&Se.equals?Se.equals(Ie):Se===Ie:at(this,pe)},ve.prototype.populate=function(){var pe=S($().mark(function Se(){var Ie,Me,Be,Ge,Xe,Je,xt,nt,ct,mt,yt=arguments;return $().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:if(Ie={},typeof(Me=Array.prototype.slice.call(yt))[Me.length-1]!="function"){Et.next=4;break}throw new V("Document.prototype.populate() no longer accepts a callback");case 4:if(Me.length!==0){Be=he.populate.apply(null,Me),Ge=m(Be);try{for(Ge.s();!(Xe=Ge.n()).done;)Je=Xe.value,Ie[Je.path]=Je}catch(jt){Ge.e(jt)}finally{Ge.f()}}return xt=he.object.vals(Ie),nt=this.constructor,this.$__isNested&&(nt=this.$__[qt].constructor,ct=this.$__.nestedPath,xt.forEach(function(jt){jt.path=ct+"."+jt.path})),this.$session()!=null&&(mt=this.$session(),xt.forEach(function(jt){jt.options!=null?"session"in jt.options||(jt.options.session=mt):jt.options={session:mt}})),xt.forEach(function(jt){jt._localModel=nt}),Et.abrupt("return",nt.populate(this,xt));case 11:case"end":return Et.stop()}},Se,this)}));return function(){return pe.apply(this,arguments)}}(),ve.prototype.$getPopulatedDocs=function(){var pe=[];this.$__.populated!=null&&(pe=pe.concat(Object.keys(this.$__.populated)));var Se,Ie=[],Me=m(pe);try{for(Me.s();!(Se=Me.n()).done;){var Be=Se.value,Ge=this.$get(Be);Array.isArray(Ge)?Ie=Ie.concat(Ge):Ge instanceof ve&&Ie.push(Ge)}}catch(Xe){Me.e(Xe)}finally{Me.f()}return Ie},ve.prototype.populated=function(pe,Se,Ie){if(Se==null||Se===!0){if(!this.$__.populated||typeof pe!="string")return;var Me=pe.endsWith(".$*")?pe.replace(/\.\$\*$/,""):pe,Be=this.$__.populated[Me];return Be?Se===!0?Be:Be.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[pe]={value:Se,options:Ie};for(var Ge=pe.split("."),Xe=0;Xe<Ge.length-1;++Xe){var Je=Ge.slice(0,Xe+1).join("."),xt=this.$get(Je);if(xt!=null&&xt.$__!=null&&this.$populated(Je)){var nt=Ge.slice(Xe+1).join(".");xt.$populated(nt,Se,Ie);break}}return Se},ve.prototype.$populated=ve.prototype.populated,ve.prototype.$assertPopulated=function(pe,Se){var Ie=this;if(Array.isArray(pe))return pe.forEach(function(Me){return Ie.$assertPopulated(Me,Se)}),this;if(arguments.length>1&&this.$set(Se),!this.$populated(pe))throw new V('Expected path "'.concat(pe,'" to be populated'));return this},ve.prototype.depopulate=function(pe){var Se;typeof pe=="string"&&(pe=pe.indexOf(" ")===-1?[pe]:pe.split(" "));var Ie=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],Me=this.$__&&this.$__.populated||{};if(arguments.length===0){var Be,Ge=m(Ie);try{for(Ge.s();!(Be=Ge.n()).done;){var Xe=Be.value;delete this.$$populatedVirtuals[Xe],delete this._doc[Xe],delete Me[Xe]}}catch(wn){Ge.e(wn)}finally{Ge.f()}for(var Je=0,xt=Object.keys(Me);Je<xt.length;Je++){var nt=xt[Je];if(Se=this.$populated(nt))if(delete Me[nt],Array.isArray(Se)){var ct=he.getValue(nt,this._doc);if(ct.isMongooseArray)for(var mt=ct.__array,yt=0;yt<mt.length;++yt){var Et=mt[yt];Et!=null&&(mt[yt]=Et instanceof ve?Et._doc._id:Et._id)}else he.setValue(nt,Se,this._doc)}else he.setValue(nt,Se,this._doc)}return this}var jt,Ut=m(pe);try{for(Ut.s();!(jt=Ut.n()).done;){var Ct=jt.value;if(Se=this.$populated(Ct),delete Me[Ct],Ie.indexOf(Ct)!==-1)delete this.$$populatedVirtuals[Ct],delete this._doc[Ct];else if(Se)if(Array.isArray(Se)){var ln=he.getValue(Ct,this._doc);if(ln.isMongooseArray)for(var yn=ln.__array,$n=0;$n<yn.length;++$n){var sn=yn[$n];sn!=null&&(yn[$n]=sn instanceof ve?sn._doc._id:sn._id)}else he.setValue(Ct,Se,this._doc)}else he.setValue(Ct,Se,this._doc)}}catch(wn){Ut.e(wn)}finally{Ut.f()}return this},ve.prototype.$__fullPath=function(pe){return pe||""},ve.prototype.getChanges=function(){var pe=this.$__delta();return pe?pe[1]:{}},ve.prototype.$__delta=function(){var pe=this,Se=this.$__dirty(),Ie=this.$__schema.options.optimisticConcurrency;if(Ie)if(Array.isArray(Ie)){var Me=new Set(Ie);this.modifiedPaths().find(function(Ct){return Me.has(Ct)})&&(this.$__.version=Se.length?3:1)}else this.$__.version=Se.length?3:1;if(Se.length||this.$__.version===3){var Be={},Ge={},Xe=Se.length,Je=[],xt=0;for(Be._id=this._doc._id,(Be&&Be._id&&Be._id.$__||null)!=null&&(Be._id=Be._id.toObject({transform:!1,depopulate:!0}));xt<Xe;++xt){var nt=Se[xt],ct=nt.value,mt=Pn(this,nt.path,ct);if(mt)Je.push(mt);else{if(!this.$populated(nt.path,!0)&&this.$__.selected){var yt=nt.path.split("."),Et=yt[0];if(this.$__.selected[Et]&&this.$__.selected[Et].$elemMatch){if(!(yt.length>1&&yt[1]==0&&Be[Et]===void 0)){Je.push(nt.path);continue}Be[Et]=this.$__.selected[Et],yt[1]="$",nt.path=yt.join(".")}}if(this.$isDefault(nt.path)&&this.$__.selected&&(nt.path.indexOf(".")===-1&&we(this.$__.selected,nt.path)||Ne(nt.path).find(function(Ct){return we(pe.$__.isSelected,Ct)})))continue;if(!Je.length)if(ct===void 0)Bn(this,0,Ge,nt,1,"$unset");else if(ct===null)Bn(this,0,Ge,nt,null);else if(he.isMongooseArray(ct)&&ct.$path()&&ct[Ue])ci(this,0,Ge,nt,ct);else if(ct[j.pathSymbol]&&u.isBuffer(ct))Bn(this,0,Ge,nt,ct=ct.toObject());else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[nt.path]!=null){var jt=this.$__.primitiveAtomics[nt.path],Ut=oe(jt);Bn(this,0,Ge,nt,jt[Ut],Ut)}else Bn(this,0,Ge,nt,ct=U(ct,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}))}}return Je.length?new C(Je):(this.$__.version&&this.$__version(Be,Ge),Object.keys(Ge).length===0?[Be,null]:[Be,Ge])}},ve.prototype.$clone=function(){var pe=new this.constructor;if(pe.$isNew=this.$isNew,this._doc&&(pe._doc=U(this._doc,{retainDocuments:!0})),this.$__){var Se,Ie=new this.$__.constructor,Me=m(Object.getOwnPropertyNames(this.$__));try{for(Me.s();!(Se=Me.n()).done;){var Be=Se.value;Be!=="activePaths"&&(Ie[Be]=U(this.$__[Be]))}}catch(Ge){Me.e(Ge)}finally{Me.f()}Object.assign(Ie.activePaths,U(h({},this.$__.activePaths))),pe.$__=Ie}return pe},ve.prototype.$createModifiedPathsSnapshot=function(){var pe=new WeakMap;if(!this.$isSubdocument){var Se,Ie=m(this.$getAllSubdocs());try{for(Ie.s();!(Se=Ie.n()).done;){var Me=Se.value;pe.set(Me,Me.$__.activePaths.clone())}}catch(Be){Ie.e(Be)}finally{Ie.f()}}return new W(pe,this.$__.activePaths.clone(),this.$__.version)},ve.prototype.$restoreModifiedPathsSnapshot=function(pe){if(this.$__.activePaths=pe.activePaths.clone(),this.$__.version=pe.version,!this.$isSubdocument){var Se,Ie=m(this.$getAllSubdocs());try{for(Ie.s();!(Se=Ie.n()).done;){var Me=Se.value;pe.subdocSnapshot.has(Me)&&(Me.$__.activePaths=pe.subdocSnapshot.get(Me))}}catch(Be){Ie.e(Be)}finally{Ie.f()}}return this},ve.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){var pe,Se=m(this.$getAllSubdocs());try{for(Se.s();!(pe=Se.n()).done;)pe.value.$clearModifiedPaths()}catch(Ie){Se.e(Ie)}finally{Se.f()}}return this},ve.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every(function(pe){return pe==null||y(pe)!=="object"||he.isNativeObject(pe)&&!Array.isArray(pe)||q(pe,"ObjectId")||q(pe,"Decimal128")}))},ve.VERSION_WHERE=1,ve.VERSION_INC=2,ve.VERSION_ALL=3,ve.ValidationError=H,d.exports=ve},2401:d=>{d.exports=Math.floor},2402:(d,f,a)=>{function u(U){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},u(U)}function g(U){return g=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(Z){return u(Z)}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":u(Z)},g(U)}var $,v,S=a(3743).codes,E=S.ERR_AMBIGUOUS_ARGUMENT,h=S.ERR_INVALID_ARG_TYPE,b=S.ERR_INVALID_ARG_VALUE,m=S.ERR_INVALID_RETURN_VALUE,p=S.ERR_MISSING_ARGS,_=a(9068),y=a(7352).inspect,x=a(7352).types,A=x.isPromise,R=x.isRegExp,C=Object.assign?Object.assign:a(6182).assign,k=Object.is?Object.is:a(2064);function D(){var U=a(6193);$=U.isDeepEqual,v=U.isDeepStrictEqual}var j=!1,V=d.exports=ne,z={};function W(U){throw U.message instanceof Error?U.message:new _(U)}function ee(U,Z,K,oe){if(!K){var ie=!1;if(Z===0)ie=!0,oe="No value argument passed to `assert.ok()`";else if(oe instanceof Error)throw oe;var $e=new _({actual:K,expected:!0,message:oe,operator:"==",stackStartFn:U});throw $e.generatedMessage=ie,$e}}function ne(){for(var U=arguments.length,Z=new Array(U),K=0;K<U;K++)Z[K]=arguments[K];ee.apply(void 0,[ne,Z.length].concat(Z))}V.fail=function U(Z,K,oe,ie,$e){var ce,le=arguments.length;if(le===0?ce="Failed":le===1?(oe=Z,Z=void 0):(j===!1&&(j=!0,({}.emitWarning?{}.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),le===2&&(ie="!=")),oe instanceof Error)throw oe;var ye={actual:Z,expected:K,operator:ie===void 0?"fail":ie,stackStartFn:$e||U};oe!==void 0&&(ye.message=oe);var _e=new _(ye);throw ce&&(_e.message=ce,_e.generatedMessage=!0),_e},V.AssertionError=_,V.ok=ne,V.equal=function U(Z,K,oe){if(arguments.length<2)throw new p("actual","expected");Z!=K&&W({actual:Z,expected:K,message:oe,operator:"==",stackStartFn:U})},V.notEqual=function U(Z,K,oe){if(arguments.length<2)throw new p("actual","expected");Z==K&&W({actual:Z,expected:K,message:oe,operator:"!=",stackStartFn:U})},V.deepEqual=function U(Z,K,oe){if(arguments.length<2)throw new p("actual","expected");$===void 0&&D(),$(Z,K)||W({actual:Z,expected:K,message:oe,operator:"deepEqual",stackStartFn:U})},V.notDeepEqual=function U(Z,K,oe){if(arguments.length<2)throw new p("actual","expected");$===void 0&&D(),$(Z,K)&&W({actual:Z,expected:K,message:oe,operator:"notDeepEqual",stackStartFn:U})},V.deepStrictEqual=function U(Z,K,oe){if(arguments.length<2)throw new p("actual","expected");$===void 0&&D(),v(Z,K)||W({actual:Z,expected:K,message:oe,operator:"deepStrictEqual",stackStartFn:U})},V.notDeepStrictEqual=function U(Z,K,oe){if(arguments.length<2)throw new p("actual","expected");$===void 0&&D(),v(Z,K)&&W({actual:Z,expected:K,message:oe,operator:"notDeepStrictEqual",stackStartFn:U})},V.strictEqual=function U(Z,K,oe){if(arguments.length<2)throw new p("actual","expected");k(Z,K)||W({actual:Z,expected:K,message:oe,operator:"strictEqual",stackStartFn:U})},V.notStrictEqual=function U(Z,K,oe){if(arguments.length<2)throw new p("actual","expected");k(Z,K)&&W({actual:Z,expected:K,message:oe,operator:"notStrictEqual",stackStartFn:U})};var Q=function U(Z,K,oe){var ie=this;(function($e,ce){if(!($e instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,U),K.forEach(function($e){$e in Z&&(oe!==void 0&&typeof oe[$e]=="string"&&R(Z[$e])&&Z[$e].test(oe[$e])?ie[$e]=oe[$e]:ie[$e]=Z[$e])})};function se(U,Z,K,oe){if(typeof Z!="function"){if(R(Z))return Z.test(U);if(arguments.length===2)throw new h("expected",["Function","RegExp"],Z);if(g(U)!=="object"||U===null){var ie=new _({actual:U,expected:Z,message:K,operator:"deepStrictEqual",stackStartFn:oe});throw ie.operator=oe.name,ie}var $e=Object.keys(Z);if(Z instanceof Error)$e.push("name","message");else if($e.length===0)throw new b("error",Z,"may not be an empty object");return $===void 0&&D(),$e.forEach(function(ce){typeof U[ce]=="string"&&R(Z[ce])&&Z[ce].test(U[ce])||function(le,ye,_e,q,re,fe){if(!(_e in le)||!v(le[_e],ye[_e])){if(!q){var we=new Q(le,re),Re=new Q(ye,re,le),ke=new _({actual:we,expected:Re,operator:"deepStrictEqual",stackStartFn:fe});throw ke.actual=le,ke.expected=ye,ke.operator=fe.name,ke}W({actual:le,expected:ye,message:q,operator:fe.name,stackStartFn:fe})}}(U,Z,ce,K,$e,oe)}),!0}return Z.prototype!==void 0&&U instanceof Z||!Error.isPrototypeOf(Z)&&Z.call({},U)===!0}function be(U){if(typeof U!="function")throw new h("fn","Function",U);try{U()}catch(Z){return Z}return z}function H(U){return A(U)||U!==null&&g(U)==="object"&&typeof U.then=="function"&&typeof U.catch=="function"}function P(U){return Promise.resolve().then(function(){var Z;if(typeof U=="function"){if(!H(Z=U()))throw new m("instance of Promise","promiseFn",Z)}else{if(!H(U))throw new h("promiseFn",["Function","Promise"],U);Z=U}return Promise.resolve().then(function(){return Z}).then(function(){return z}).catch(function(K){return K})})}function L(U,Z,K,oe){if(typeof K=="string"){if(arguments.length===4)throw new h("error",["Object","Error","Function","RegExp"],K);if(g(Z)==="object"&&Z!==null){if(Z.message===K)throw new E("error/message",'The error message "'.concat(Z.message,'" is identical to the message.'))}else if(Z===K)throw new E("error/message",'The error "'.concat(Z,'" is identical to the message.'));oe=K,K=void 0}else if(K!=null&&g(K)!=="object"&&typeof K!="function")throw new h("error",["Object","Error","Function","RegExp"],K);if(Z===z){var ie="";K&&K.name&&(ie+=" (".concat(K.name,")")),ie+=oe?": ".concat(oe):".";var $e=U.name==="rejects"?"rejection":"exception";W({actual:void 0,expected:K,operator:U.name,message:"Missing expected ".concat($e).concat(ie),stackStartFn:U})}if(K&&!se(Z,K,oe,U))throw Z}function F(U,Z,K,oe){if(Z!==z){if(typeof K=="string"&&(oe=K,K=void 0),!K||se(Z,K)){var ie=oe?": ".concat(oe):".",$e=U.name==="doesNotReject"?"rejection":"exception";W({actual:Z,expected:K,operator:U.name,message:"Got unwanted ".concat($e).concat(ie,`
`)+'Actual message: "'.concat(Z&&Z.message,'"'),stackStartFn:U})}throw Z}}function M(){for(var U=arguments.length,Z=new Array(U),K=0;K<U;K++)Z[K]=arguments[K];ee.apply(void 0,[M,Z.length].concat(Z))}V.throws=function U(Z){for(var K=arguments.length,oe=new Array(K>1?K-1:0),ie=1;ie<K;ie++)oe[ie-1]=arguments[ie];L.apply(void 0,[U,be(Z)].concat(oe))},V.rejects=function U(Z){for(var K=arguments.length,oe=new Array(K>1?K-1:0),ie=1;ie<K;ie++)oe[ie-1]=arguments[ie];return P(Z).then(function($e){return L.apply(void 0,[U,$e].concat(oe))})},V.doesNotThrow=function U(Z){for(var K=arguments.length,oe=new Array(K>1?K-1:0),ie=1;ie<K;ie++)oe[ie-1]=arguments[ie];F.apply(void 0,[U,be(Z)].concat(oe))},V.doesNotReject=function U(Z){for(var K=arguments.length,oe=new Array(K>1?K-1:0),ie=1;ie<K;ie++)oe[ie-1]=arguments[ie];return P(Z).then(function($e){return F.apply(void 0,[U,$e].concat(oe))})},V.ifError=function U(Z){if(Z!=null){var K="ifError got unwanted exception: ";g(Z)==="object"&&typeof Z.message=="string"?Z.message.length===0&&Z.constructor?K+=Z.constructor.name:K+=Z.message:K+=y(Z);var oe=new _({actual:Z,expected:null,operator:"ifError",message:K,stackStartFn:U}),ie=Z.stack;if(typeof ie=="string"){var $e=ie.split(`
`);$e.shift();for(var ce=oe.stack.split(`
`),le=0;le<$e.length;le++){var ye=ce.indexOf($e[le]);if(ye!==-1){ce=ce.slice(0,ye);break}}oe.stack="".concat(ce.join(`
`),`
`).concat($e.join(`
`))}throw oe}},V.strict=C(M,V,{equal:V.strictEqual,deepEqual:V.deepStrictEqual,notEqual:V.notStrictEqual,notDeepEqual:V.notDeepStrictEqual}),V.strict.strict=V.strict},2403:d=>{d.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null},2423:d=>{d.exports=function(f,a){var u=f.discriminatorMapping&&f.discriminatorMapping.value;if(u&&!("sparse"in a)){var g=f.options.discriminatorKey;a.partialFilterExpression=a.partialFilterExpression||{},a.partialFilterExpression[g]=u}return a}},2477:(d,f,a)=>{var u=a(2402);d.exports=function(g){return g==null||g===""?null:g instanceof Date?(u.ok(!isNaN(g.valueOf())),g):(u.ok(typeof g!="boolean"),$=g instanceof Number||typeof g=="number"?new Date(g):typeof g=="string"&&!isNaN(Number(g))&&(Number(g)>=275761||Number(g)<-271820)?new Date(Number(g)):typeof g.valueOf=="function"?new Date(g.valueOf()):new Date(g),isNaN($.valueOf())?void u.ok(!1):$);var $}},2481:(d,f,a)=>{var u=a(4756);d.exports=function(){return typeof Object.is=="function"?Object.is:u}},2486:(d,f)=>{f.read=function(a,u,g,$,v){var S,E,h=8*v-$-1,b=(1<<h)-1,m=b>>1,p=-7,_=g?v-1:0,y=g?-1:1,x=a[u+_];for(_+=y,S=x&(1<<-p)-1,x>>=-p,p+=h;p>0;S=256*S+a[u+_],_+=y,p-=8);for(E=S&(1<<-p)-1,S>>=-p,p+=$;p>0;E=256*E+a[u+_],_+=y,p-=8);if(S===0)S=1-m;else{if(S===b)return E?NaN:1/0*(x?-1:1);E+=Math.pow(2,$),S-=m}return(x?-1:1)*E*Math.pow(2,S-$)},f.write=function(a,u,g,$,v,S){var E,h,b,m=8*S-v-1,p=(1<<m)-1,_=p>>1,y=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=$?0:S-1,A=$?1:-1,R=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(h=isNaN(u)?1:0,E=p):(E=Math.floor(Math.log(u)/Math.LN2),u*(b=Math.pow(2,-E))<1&&(E--,b*=2),(u+=E+_>=1?y/b:y*Math.pow(2,1-_))*b>=2&&(E++,b/=2),E+_>=p?(h=0,E=p):E+_>=1?(h=(u*b-1)*Math.pow(2,v),E+=_):(h=u*Math.pow(2,_-1)*Math.pow(2,v),E=0));v>=8;a[g+x]=255&h,x+=A,h/=256,v-=8);for(E=E<<v|h,m+=v;m>0;a[g+x]=255&E,x+=A,E/=256,m-=8);a[g+x-A]|=128*R}},2497:(d,f,a)=>{var u=a(1243).isMongooseArray;d.exports=function(g){return g!=null&&(u(g)||g.$__!=null||g.isMongooseBuffer||g.$isMongooseMap)}},2533:(d,f,a)=>{var u=a(9732).Buffer,g=a(7775).Transform,$=a(136).I;function v(h){g.call(this),this.hashMode=typeof h=="string",this.hashMode?this[h]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}a(1679)(v,g);var S=typeof Uint8Array<"u",E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(u.prototype instanceof Uint8Array||u.TYPED_ARRAY_SUPPORT);v.prototype.update=function(h,b,m){var p=function(y,x){if(y instanceof u)return y;if(typeof y=="string")return u.from(y,x);if(E&&ArrayBuffer.isView(y)){if(y.byteLength===0)return u.alloc(0);var A=u.from(y.buffer,y.byteOffset,y.byteLength);if(A.byteLength===y.byteLength)return A}if(S&&y instanceof Uint8Array||u.isBuffer(y)&&y.constructor&&typeof y.constructor.isBuffer=="function"&&y.constructor.isBuffer(y))return u.from(y);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(h,b),_=this._update(p);return this.hashMode?this:(m&&(_=this._toString(_,m)),_)},v.prototype.setAutoPadding=function(){},v.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},v.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},v.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},v.prototype._transform=function(h,b,m){var p;try{this.hashMode?this._update(h):this.push(this._update(h))}catch(_){p=_}finally{m(p)}},v.prototype._flush=function(h){var b;try{this.push(this.__final())}catch(m){b=m}h(b)},v.prototype._finalOrDigest=function(h){var b=this.__final()||u.alloc(0);return h&&(b=this._toString(b,h,!0)),b},v.prototype._toString=function(h,b,m){if(this._decoder||(this._decoder=new $(b),this._encoding=b),this._encoding!==b)throw new Error("cant switch encodings");var p=this._decoder.write(h);return m&&(p+=this._decoder.end()),p},d.exports=v},2538:(d,f,a)=>{var u=a(6876),g=a(9732).Buffer,$=a(9003);function v(S){var E=S._cipher.encryptBlockRaw(S._prev);return $(S._prev),E}f.encrypt=function(S,E){var h=Math.ceil(E.length/16),b=S._cache.length;S._cache=g.concat([S._cache,g.allocUnsafe(16*h)]);for(var m=0;m<h;m++){var p=v(S),_=b+16*m;S._cache.writeUInt32BE(p[0],_+0),S._cache.writeUInt32BE(p[1],_+4),S._cache.writeUInt32BE(p[2],_+8),S._cache.writeUInt32BE(p[3],_+12)}var y=S._cache.slice(0,E.length);return S._cache=S._cache.slice(E.length),u(E,y)}},2555:d=>{d.exports=function(f){if(Array.isArray(f)){if(!f.every(function(a){return typeof a=="number"||typeof a=="string"}))throw new Error("$type array values must be strings or numbers");return f}if(typeof f!="number"&&typeof f!="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return f}},2580:(d,f,a)=>{var u=a(2400),g=a(3550).EventEmitter,$=a(3672),v=a(7058),S=a(5549),E=$.ValidationError,h=a(4957),b=a(608);function m(p,_,y,x,A){if(!(this instanceof m))return new m(p,_,y,x,A);if(b(_)&&!_.instanceOfSchema&&(_=new v(_)),_=this.schema||_,!this.schema&&_.options._id&&(p=p||{})._id===void 0&&(p._id=new S),!_)throw new $.MissingSchemaError;for(var R in this.$__setSchema(_),u.call(this,p,y,x,A),h(this,_,{decorateDoc:!0}),_.methods)this[R]=_.methods[R];for(var C in _.statics)this[C]=_.statics[C]}m.prototype=Object.create(u.prototype),m.prototype.constructor=m,m.events=new g,m.$emitter=new g,["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(p){m[p]=function(){return m.$emitter[p].apply(m.$emitter,arguments)}}),m.ValidationError=E,d.exports=m},2635:(d,f,a)=>{var u=a(1679),g=a(6936),$=a(9732).Buffer,v=new Array(16);function S(){g.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function E(_,y){return _<<y|_>>>32-y}function h(_,y,x,A,R,C,k){return E(_+(y&x|~y&A)+R+C|0,k)+y|0}function b(_,y,x,A,R,C,k){return E(_+(y&A|x&~A)+R+C|0,k)+y|0}function m(_,y,x,A,R,C,k){return E(_+(y^x^A)+R+C|0,k)+y|0}function p(_,y,x,A,R,C,k){return E(_+(x^(y|~A))+R+C|0,k)+y|0}u(S,g),S.prototype._update=function(){for(var _=v,y=0;y<16;++y)_[y]=this._block.readInt32LE(4*y);var x=this._a,A=this._b,R=this._c,C=this._d;x=h(x,A,R,C,_[0],3614090360,7),C=h(C,x,A,R,_[1],3905402710,12),R=h(R,C,x,A,_[2],606105819,17),A=h(A,R,C,x,_[3],3250441966,22),x=h(x,A,R,C,_[4],4118548399,7),C=h(C,x,A,R,_[5],1200080426,12),R=h(R,C,x,A,_[6],2821735955,17),A=h(A,R,C,x,_[7],4249261313,22),x=h(x,A,R,C,_[8],1770035416,7),C=h(C,x,A,R,_[9],2336552879,12),R=h(R,C,x,A,_[10],4294925233,17),A=h(A,R,C,x,_[11],2304563134,22),x=h(x,A,R,C,_[12],1804603682,7),C=h(C,x,A,R,_[13],4254626195,12),R=h(R,C,x,A,_[14],2792965006,17),x=b(x,A=h(A,R,C,x,_[15],1236535329,22),R,C,_[1],4129170786,5),C=b(C,x,A,R,_[6],3225465664,9),R=b(R,C,x,A,_[11],643717713,14),A=b(A,R,C,x,_[0],3921069994,20),x=b(x,A,R,C,_[5],3593408605,5),C=b(C,x,A,R,_[10],38016083,9),R=b(R,C,x,A,_[15],3634488961,14),A=b(A,R,C,x,_[4],3889429448,20),x=b(x,A,R,C,_[9],568446438,5),C=b(C,x,A,R,_[14],3275163606,9),R=b(R,C,x,A,_[3],4107603335,14),A=b(A,R,C,x,_[8],1163531501,20),x=b(x,A,R,C,_[13],2850285829,5),C=b(C,x,A,R,_[2],4243563512,9),R=b(R,C,x,A,_[7],1735328473,14),x=m(x,A=b(A,R,C,x,_[12],2368359562,20),R,C,_[5],4294588738,4),C=m(C,x,A,R,_[8],2272392833,11),R=m(R,C,x,A,_[11],1839030562,16),A=m(A,R,C,x,_[14],4259657740,23),x=m(x,A,R,C,_[1],2763975236,4),C=m(C,x,A,R,_[4],1272893353,11),R=m(R,C,x,A,_[7],4139469664,16),A=m(A,R,C,x,_[10],3200236656,23),x=m(x,A,R,C,_[13],681279174,4),C=m(C,x,A,R,_[0],3936430074,11),R=m(R,C,x,A,_[3],3572445317,16),A=m(A,R,C,x,_[6],76029189,23),x=m(x,A,R,C,_[9],3654602809,4),C=m(C,x,A,R,_[12],3873151461,11),R=m(R,C,x,A,_[15],530742520,16),x=p(x,A=m(A,R,C,x,_[2],3299628645,23),R,C,_[0],4096336452,6),C=p(C,x,A,R,_[7],1126891415,10),R=p(R,C,x,A,_[14],2878612391,15),A=p(A,R,C,x,_[5],4237533241,21),x=p(x,A,R,C,_[12],1700485571,6),C=p(C,x,A,R,_[3],2399980690,10),R=p(R,C,x,A,_[10],4293915773,15),A=p(A,R,C,x,_[1],2240044497,21),x=p(x,A,R,C,_[8],1873313359,6),C=p(C,x,A,R,_[15],4264355552,10),R=p(R,C,x,A,_[6],2734768916,15),A=p(A,R,C,x,_[13],1309151649,21),x=p(x,A,R,C,_[4],4149444226,6),C=p(C,x,A,R,_[11],3174756917,10),R=p(R,C,x,A,_[2],718787259,15),A=p(A,R,C,x,_[9],3951481745,21),this._a=this._a+x|0,this._b=this._b+A|0,this._c=this._c+R|0,this._d=this._d+C|0},S.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var _=$.allocUnsafe(16);return _.writeInt32LE(this._a,0),_.writeInt32LE(this._b,4),_.writeInt32LE(this._c,8),_.writeInt32LE(this._d,12),_},d.exports=S},2653:d=>{d.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},2655:(d,f,a)=>{var u=a(1679),g=a(5832).Buffer,$=a(1419),v=$.base,S=$.constants.der;function E(m){this.enc="der",this.name=m.name,this.entity=m,this.tree=new h,this.tree._init(m.body)}function h(m){v.Node.call(this,"der",m)}function b(m){return m<10?"0"+m:m}d.exports=E,E.prototype.encode=function(m,p){return this.tree._encode(m,p).join()},u(h,v.Node),h.prototype._encodeComposite=function(m,p,_,y){var x,A=function(D,j,V,z){var W;if(D==="seqof"?D="seq":D==="setof"&&(D="set"),S.tagByName.hasOwnProperty(D))W=S.tagByName[D];else{if(typeof D!="number"||(0|D)!==D)return z.error("Unknown tag: "+D);W=D}return W>=31?z.error("Multi-octet tag encoding unsupported"):(j||(W|=32),W|=S.tagClassByName[V||"universal"]<<6)}(m,p,_,this.reporter);if(y.length<128)return(x=new g(2))[0]=A,x[1]=y.length,this._createEncoderBuffer([x,y]);for(var R=1,C=y.length;C>=256;C>>=8)R++;(x=new g(2+R))[0]=A,x[1]=128|R,C=1+R;for(var k=y.length;k>0;C--,k>>=8)x[C]=255&k;return this._createEncoderBuffer([x,y])},h.prototype._encodeStr=function(m,p){if(p==="bitstr")return this._createEncoderBuffer([0|m.unused,m.data]);if(p==="bmpstr"){for(var _=new g(2*m.length),y=0;y<m.length;y++)_.writeUInt16BE(m.charCodeAt(y),2*y);return this._createEncoderBuffer(_)}return p==="numstr"?this._isNumstr(m)?this._createEncoderBuffer(m):this.reporter.error("Encoding of string type: numstr supports only digits and space"):p==="printstr"?this._isPrintstr(m)?this._createEncoderBuffer(m):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(p)||p==="objDesc"?this._createEncoderBuffer(m):this.reporter.error("Encoding of string type: "+p+" unsupported")},h.prototype._encodeObjid=function(m,p,_){if(typeof m=="string"){if(!p)return this.reporter.error("string objid given, but no values map found");if(!p.hasOwnProperty(m))return this.reporter.error("objid not found in values map");m=p[m].split(/[\s\.]+/g);for(var y=0;y<m.length;y++)m[y]|=0}else if(Array.isArray(m))for(m=m.slice(),y=0;y<m.length;y++)m[y]|=0;if(!Array.isArray(m))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(m));if(!_){if(m[1]>=40)return this.reporter.error("Second objid identifier OOB");m.splice(0,2,40*m[0]+m[1])}var x=0;for(y=0;y<m.length;y++){var A=m[y];for(x++;A>=128;A>>=7)x++}var R=new g(x),C=R.length-1;for(y=m.length-1;y>=0;y--)for(A=m[y],R[C--]=127&A;(A>>=7)>0;)R[C--]=128|127&A;return this._createEncoderBuffer(R)},h.prototype._encodeTime=function(m,p){var _,y=new Date(m);return p==="gentime"?_=[b(y.getFullYear()),b(y.getUTCMonth()+1),b(y.getUTCDate()),b(y.getUTCHours()),b(y.getUTCMinutes()),b(y.getUTCSeconds()),"Z"].join(""):p==="utctime"?_=[b(y.getFullYear()%100),b(y.getUTCMonth()+1),b(y.getUTCDate()),b(y.getUTCHours()),b(y.getUTCMinutes()),b(y.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+p+" time is not supported yet"),this._encodeStr(_,"octstr")},h.prototype._encodeNull=function(){return this._createEncoderBuffer("")},h.prototype._encodeInt=function(m,p){if(typeof m=="string"){if(!p)return this.reporter.error("String int or enum given, but no values map");if(!p.hasOwnProperty(m))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(m));m=p[m]}if(typeof m!="number"&&!g.isBuffer(m)){var _=m.toArray();!m.sign&&128&_[0]&&_.unshift(0),m=new g(_)}if(g.isBuffer(m)){var y=m.length;m.length===0&&y++;var x=new g(y);return m.copy(x),m.length===0&&(x[0]=0),this._createEncoderBuffer(x)}if(m<128)return this._createEncoderBuffer(m);if(m<256)return this._createEncoderBuffer([0,m]);y=1;for(var A=m;A>=256;A>>=8)y++;for(A=(x=new Array(y)).length-1;A>=0;A--)x[A]=255&m,m>>=8;return 128&x[0]&&x.unshift(0),this._createEncoderBuffer(new g(x))},h.prototype._encodeBool=function(m){return this._createEncoderBuffer(m?255:0)},h.prototype._use=function(m,p){return typeof m=="function"&&(m=m(p)),m._getEncoder("der").tree},h.prototype._skipDefault=function(m,p,_){var y,x=this._baseState;if(x.default===null)return!1;var A=m.join();if(x.defaultBuffer===void 0&&(x.defaultBuffer=this._encodeValue(x.default,p,_).join()),A.length!==x.defaultBuffer.length)return!1;for(y=0;y<A.length;y++)if(A[y]!==x.defaultBuffer[y])return!1;return!0}},2692:d=>{d.exports=function(f,a){if(a.length!==1){for(var u=a[0],g=void 0,$=0;$<a.length-1;++$){var v=f.path(u);v&&v.schema?(g=v.schema.options.strict,f=v.schema,u=v.$isMongooseDocumentArray&&!isNaN(a[$+1])?"":a[$+1]):u+=u.length?"."+a[$+1]:a[$+1]}return g}}},2696:(d,f,a)=>{var u=a(3305);d.exports=function(g,$){return typeof g=="string"&&typeof $=="string"||typeof g=="number"&&typeof $=="number"?g===$:!(!u(g,"ObjectId")||!u($,"ObjectId"))&&g.toString()===$.toString()}},2724:(d,f,a)=>{var u=a(3071),g=a(9344),$=u("RegExp.prototype.exec"),v=a(2268);d.exports=function(S){if(!g(S))throw new v("`regex` must be a RegExp");return function(E){return $(S,E)!==null}}},2746:d=>{var f=typeof{}.nextTick=="function"?{}.nextTick.bind({env:{}}):function(a){return setTimeout(a,0)};d.exports=function(a){return f(a)}},2789:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a){if(a==null||f(a)!=="object")return!1;var u=Object.getPrototypeOf(a);return!u||u.constructor.name==="Object"}},2793:d=>{d.exports=new Set(["__proto__","constructor","prototype"])},2822:(d,f,a)=>{d.exports=a(3633).Double},2824:(d,f,a)=>{var u=a(7930).objectIdSymbol,g=a(8768);function $(){var S,E;if(this.$__.shardval){E=(S=Object.keys(this.$__.shardval)).length,this.$where=this.$where||{};for(var h=0;h<E;++h)this.$where[S[h]]=this.$__.shardval[S[h]]}}function v(){var S=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(g.isPOJO(S))for(var E,h=this.$__.shardval={},b=Object.keys(S),m=b.length,p=0;p<m;++p)(E=this.$__getValue(b[p]))==null?h[b[p]]=E:g.isMongooseObject(E)?h[b[p]]=E.toObject({depopulate:!0,_isNested:!0}):E instanceof Date||E[u]?h[b[p]]=E:typeof E.valueOf=="function"?h[b[p]]=E.valueOf():h[b[p]]=E}d.exports=function(S){S.post("init",function(){return v.call(this),this}),S.pre("save",function(E){$.call(this),E()}),S.pre("remove",function(E){$.call(this),E()}),S.post("save",function(){v.call(this)})},d.exports.storeShard=v},2859:(d,f,a)=>{var u=f;u.utils=a(4685),u.common=a(7695),u.sha=a(690),u.ripemd=a(601),u.hmac=a(9313),u.sha1=u.sha.sha1,u.sha256=u.sha.sha256,u.sha224=u.sha.sha224,u.sha384=u.sha.sha384,u.sha512=u.sha.sha512,u.ripemd160=u.ripemd.ripemd160},2900:(d,f,a)=>{var u=a(5879);d.exports=function(g){if(u(g)!=="TopologyDescription")return!1;var $=Array.from(g.servers.values());return $.length>0&&$.every(function(v){return v.type==="Unknown"})}},2914:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}var g=a(7860),$=["__proto__","constructor","prototype"];function v(E,h,b,m,p,_){for(var y,x=0;x<E.length&&x<h.length;++x)y=E[x],Array.isArray(y)&&Array.isArray(h[x])?v(y,h[x],b,m,p,_):y&&(m?m(y,b,_(h[x])):(y[p]&&(y=y[p]),y[b]=_(h[x])))}function S(E){return E}f.get=function(E,h,b,m){var p;typeof b=="function"&&(b.length<2?(m=b,b=void 0):(p=b,b=void 0)),m||(m=S);var _=typeof E=="string"?g(E):E;if(!Array.isArray(_))throw new TypeError("Invalid `path`. Must be either string or array");for(var y,x=h,A=0;A<_.length;++A){if(y=_[A],typeof _[A]!="string"&&typeof _[A]!="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+u(_[A]));if(Array.isArray(x)&&!/^\d+$/.test(y)){var R=_.slice(A);return[].concat(x).map(function(k){return k?f.get(R,k,b||p,m):m(void 0)})}if(p)x=p(x,y);else{var C=b&&x[b]?x[b]:x;x=C instanceof Map?C.get(y):C[y]}if(!x)return m(x)}return m(x)},f.has=function(E,h){var b=typeof E=="string"?g(E):E;if(!Array.isArray(b))throw new TypeError("Invalid `path`. Must be either string or array");for(var m=b.length,p=h,_=0;_<m;++_){if(typeof b[_]!="string"&&typeof b[_]!="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+u(b[_]));if(p==null||u(p)!=="object"||!(b[_]in p))return!1;p=p[b[_]]}return!0},f.unset=function(E,h){var b=typeof E=="string"?g(E):E;if(!Array.isArray(b))throw new TypeError("Invalid `path`. Must be either string or array");for(var m=b.length,p=h,_=0;_<m;++_){if(p==null||u(p)!=="object"||!(b[_]in p))return!1;if(typeof b[_]!="string"&&typeof b[_]!="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+u(b[_]));if($.indexOf(b[_])!==-1)return!1;if(_===m-1)return delete p[b[_]],!0;p=p instanceof Map?p.get(b[_]):p[b[_]]}return!0},f.set=function(E,h,b,m,p,_){var y;typeof m=="function"&&(m.length<2?(p=m,m=void 0):(y=m,m=void 0)),p||(p=S);var x=typeof E=="string"?g(E):E;if(!Array.isArray(x))throw new TypeError("Invalid `path`. Must be either string or array");if(b!=null){for(var A=0;A<x.length;++A){if(typeof x[A]!="string"&&typeof x[A]!="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+u(x[A]));if($.indexOf(x[A])!==-1)return}for(var R,C=_||/\$/.test(E)&&_!==!1,k=b,D=(A=0,x.length-1);A<D;++A)if((R=x[A])!="$"){if(Array.isArray(k)&&!/^\d+$/.test(R)){var j=x.slice(A);if(!C&&Array.isArray(h))for(var V=0;V<k.length&&V<h.length;++V)f.set(j,h[V],k[V],m||y,p,C);else for(V=0;V<k.length;++V)f.set(j,h,k[V],m||y,p,C);return}if(y)k=y(k,R);else{var z=m&&k[m]?k[m]:k;k=z instanceof Map?z.get(R):z[R]}if(!k)return}else if(A==D-1)break;if(R=x[D],m&&k[m]&&(k=k[m]),Array.isArray(k)&&!/^\d+$/.test(R))if(!C&&Array.isArray(h))v(k,h,R,y,m,p);else for(V=0;V<k.length;++V){var W=k[V];W&&(y?y(W,R,p(h)):(W[m]&&(W=W[m]),W[R]=p(h)))}else y?y(k,R,p(h)):k instanceof Map?k.set(R,p(h)):k[R]=p(h)}},f.stringToParts=g},2937:(d,f,a)=>{var u=a(5053),g=a(4276),$=a(5833),v=a(7797),S=a(1190),E=a(7799),h=a(5218),b=a(1095),m=a(9732).Buffer;d.exports=function(p,_,y){var x;x=p.padding?p.padding:y?1:4;var A,R=u(p);if(x===4)A=function(C,k){var D=C.modulus.byteLength(),j=k.length,V=$("sha1").update(m.alloc(0)).digest(),z=V.length,W=2*z;if(j>D-W-2)throw new Error("message too long");var ee=m.alloc(D-j-W-2),ne=D-z-1,Q=g(z),se=S(m.concat([V,ee,m.alloc(1,1),k],ne),v(Q,ne)),be=S(Q,v(se,z));return new E(m.concat([m.alloc(1),be,se],D))}(R,_);else if(x===1)A=function(C,k,D){var j,V=k.length,z=C.modulus.byteLength();if(V>z-11)throw new Error("message too long");return j=D?m.alloc(z-V-3,255):function(W){for(var ee,ne=m.allocUnsafe(W),Q=0,se=g(2*W),be=0;Q<W;)be===se.length&&(se=g(2*W),be=0),(ee=se[be++])&&(ne[Q++]=ee);return ne}(z-V-3),new E(m.concat([m.from([0,D?1:2]),j,m.alloc(1),k],z))}(R,_,y);else{if(x!==3)throw new Error("unknown padding");if((A=new E(_)).cmp(R.modulus)>=0)throw new Error("data too long for modulus")}return y?b(A,R):h(A,R)}},2945:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!h})()}function $(h){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(h)}function v(h,b){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},v(h,b)}var S=function(h){function b(){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,b),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,b,arguments)}return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),_&&v(p,_)}(b,h),m=b,Object.defineProperty(m,"prototype",{writable:!1}),m;var m}(a(8879)),E=a(5761);Object.defineProperty(S.prototype,"subtype",E),d.exports=S},2951:d=>{d.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},3027:(d,f,a)=>{var u=a(1679),g=a(8890),$=a(1485),v=a(9732).Buffer,S=new Array(64);function E(){this.init(),this._w=S,$.call(this,64,56)}u(E,g),E.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},E.prototype._hash=function(){var h=v.allocUnsafe(28);return h.writeInt32BE(this._a,0),h.writeInt32BE(this._b,4),h.writeInt32BE(this._c,8),h.writeInt32BE(this._d,12),h.writeInt32BE(this._e,16),h.writeInt32BE(this._f,20),h.writeInt32BE(this._g,24),h},d.exports=E},3071:(d,f,a)=>{var u=a(6400),g=a(8863),$=g([u("%String.prototype.indexOf%")]);d.exports=function(v,S){var E=u(v,!!S);return typeof E=="function"&&$(v,".prototype.")>-1?g([E]):E}},3091:(d,f,a)=>{function u(j){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},u(j)}function g(j,V){var z=Object.keys(j);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(j);V&&(W=W.filter(function(ee){return Object.getOwnPropertyDescriptor(j,ee).enumerable})),z.push.apply(z,W)}return z}function $(j){for(var V=1;V<arguments.length;V++){var z=arguments[V]!=null?arguments[V]:{};V%2?g(Object(z),!0).forEach(function(W){v(j,W,z[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(z)):g(Object(z)).forEach(function(W){Object.defineProperty(j,W,Object.getOwnPropertyDescriptor(z,W))})}return j}function v(j,V,z){return(V=function(W){var ee=function(ne){if(u(ne)!="object"||!ne)return ne;var Q=ne[Symbol.toPrimitive];if(Q!==void 0){var se=Q.call(ne,"string");if(u(se)!="object")return se;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(W);return u(ee)=="symbol"?ee:ee+""}(V))in j?Object.defineProperty(j,V,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[V]=z,j}var S,E=a(4625),h=a(6426),b=a(863),m=a(4327),p=a(5879),_=a(5549),y=a(3305),x=a(8768),A=h.CastError;function R(j,V){var z=typeof j=="string"&&j.length===24&&/^[a-f0-9]+$/i.test(j),W=V&&V.suppressWarning;!z&&j!==void 0||W||x.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),h.call(this,j,V,"ObjectId")}function C(j){return this.cast(j)}function k(){return new _}function D(j){return S||(S=a(2400)),this instanceof S&&j===void 0?new _:j}R.schemaName="ObjectId",R.defaultOptions={},R.prototype=Object.create(h.prototype),R.prototype.constructor=R,R.prototype.OptionsConstructor=E,R.get=h.get,R.set=h.set,R.setters=[],R.prototype.auto=function(j){return j&&(this.default(k),this.set(D)),this},R._checkRequired=function(j){return y(j,"ObjectId")},R._cast=b,R.cast=function(j){return arguments.length===0||(j===!1&&(j=this._defaultCaster),this._cast=j),this._cast},R._defaultCaster=function(j){if(!y(j,"ObjectId"))throw new Error(j+" is not an instance of ObjectId");return j},R.checkRequired=h.checkRequired,R.prototype.checkRequired=function(j,V){return h._isRef(this,j,V,!0)?!!j:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():R.checkRequired())(j)},R.prototype.cast=function(j,V,z,W,ee){if(!y(j,"ObjectId")&&h._isRef(this,j,V,z)){if((p(j)||"").toLowerCase()==="objectid")return new _(j.toHexString());if(j==null||x.isNonBuiltinObject(j))return this._castRef(j,V,z,ee)}var ne;ne=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():R.cast();try{return ne(j)}catch(Q){throw new A("ObjectId",j,this.path,Q,this)}},R.prototype.$conditionalHandlers=$($({},h.prototype.$conditionalHandlers),{},{$gt:C,$gte:C,$lt:C,$lte:C}),k.$runBeforeSetters=!0,R.prototype.toJSONSchema=function(j){var V=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return m("string","objectId",j==null?void 0:j.useBsonType,V)},d.exports=R},3123:d=>{d.exports=Function.prototype.call},3191:(d,f,a)=>{var u=a(988),g=function(){return!!u};g.hasArrayLengthDefineBug=function(){if(!u)return null;try{return u([],"length",{value:1}).length!==1}catch{return!0}},d.exports=g},3216:(d,f,a)=>{function u(h,b){var m=Object.keys(h);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(h);b&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(h,_).enumerable})),m.push.apply(m,p)}return m}function g(h){for(var b=1;b<arguments.length;b++){var m=arguments[b]!=null?arguments[b]:{};b%2?u(Object(m),!0).forEach(function(p){$(h,p,m[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(m)):u(Object(m)).forEach(function(p){Object.defineProperty(h,p,Object.getOwnPropertyDescriptor(m,p))})}return h}function $(h,b,m){return(b=function(p){var _=function(y){if(v(y)!="object"||!y)return y;var x=y[Symbol.toPrimitive];if(x!==void 0){var A=x.call(y,"string");if(v(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(p);return v(_)=="symbol"?_:_+""}(b))in h?Object.defineProperty(h,b,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[b]=m,h}function v(h){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},v(h)}var S=a(8768),E=new Set(["__index","__parentArray","_doc"]);d.exports=function(h,b){if(S.isPOJO(h)&&h.$__!=null&&h._doc!=null){if(b){for(var m={},p=0,_=Object.keys(h);p<_.length;p++){var y=_[p];v(y)!=="symbol"&&y[0]!=="$"&&(E.has(y)||(m[y]=h[y]))}return g(g({},h._doc),m)}return h._doc}return h}},3219:d=>{d.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},3241:d=>{d.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},3261:(d,f,a)=>{var u=d.exports=function(g){g=g.toLowerCase();var $=u[g];if(!$)throw new Error(g+" is not supported (we accept pull requests)");return new $};u.sha=a(2219),u.sha1=a(68),u.sha224=a(3027),u.sha256=a(8890),u.sha384=a(5938),u.sha512=a(6467)},3279:d=>{d.exports=Function.prototype.apply},3292:(d,f,a)=>{(f=d.exports=a(7991)).Stream=f,f.Readable=f,f.Writable=a(9147),f.Duplex=a(1313),f.Transform=a(1191),f.PassThrough=a(9125)},3303:(d,f)=>{f._={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}},3305:d=>{d.exports=function(f,a){return f!=null&&f._bsontype===a}},3318:(d,f,a)=>{function u(_){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u(_)}function g(_,y){var x=Object.keys(_);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(_);y&&(A=A.filter(function(R){return Object.getOwnPropertyDescriptor(_,R).enumerable})),x.push.apply(x,A)}return x}function $(_){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?g(Object(x),!0).forEach(function(A){v(_,A,x[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(x)):g(Object(x)).forEach(function(A){Object.defineProperty(_,A,Object.getOwnPropertyDescriptor(x,A))})}return _}function v(_,y,x){return(y=function(A){var R=function(C){if(u(C)!="object"||!C)return C;var k=C[Symbol.toPrimitive];if(k!==void 0){var D=k.call(C,"string");if(u(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(C)}(A);return u(R)=="symbol"?R:R+""}(y))in _?Object.defineProperty(_,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):_[y]=x,_}var S=a(3609),E=a(6426),h=a(4058),b=a(4327);function m(_,y){E.call(this,_,y,"BigInt")}function p(_,y){return this.castForQuery(null,_,y)}m.schemaName="BigInt",m.defaultOptions={},m.prototype=Object.create(E.prototype),m.prototype.constructor=m,m._cast=h,m.set=E.set,m.setters=[],m.get=E.get,m.cast=function(_){return arguments.length===0||(_===!1&&(_=this._defaultCaster),this._cast=_),this._cast},m._checkRequired=function(_){return _!=null},m.checkRequired=E.checkRequired,m.prototype.checkRequired=function(_){return this.constructor._checkRequired(_)},m.prototype.cast=function(_){var y;y=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():m.cast();try{return y(_)}catch(x){throw new S("BigInt",_,this.path,x,this)}},m.$conditionalHandlers=$($({},E.prototype.$conditionalHandlers),{},{$gt:p,$gte:p,$lt:p,$lte:p}),m.prototype.castForQuery=function(_,y,x){var A;if(_!=null)return(A=m.$conditionalHandlers[_])?A.call(this,y):this.applySetters(y,x);try{return this.applySetters(y,x)}catch(R){throw R instanceof S&&R.path===this.path&&this.$fullPath!=null&&(R.path=this.$fullPath),R}},m.prototype._castNullish=function(_){return _===void 0||(typeof this.constructor.cast=="function"?this.constructor.cast():m.cast()),_},m.prototype.toJSONSchema=function(_){var y=this.options.required&&typeof this.options.required!="function";return b("string","long",_==null?void 0:_.useBsonType,y)},d.exports=m},3329:(d,f,a)=>{var u=a(4685),g=a(2344);function $(){if(!(this instanceof $))return new $;g.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}u.inherits($,g),d.exports=$,$.blockSize=512,$.outSize=224,$.hmacStrength=192,$.padLength=64,$.prototype._digest=function(v){return v==="hex"?u.toHex32(this.h.slice(0,7),"big"):u.split32(this.h.slice(0,7),"big")}},3334:(d,f,a)=>{var u=a(7799),g=a(1970),$=g.getNAF,v=g.getJSF,S=g.assert;function E(b,m){this.type=b,this.p=new u(m.p,16),this.red=m.prime?u.red(m.prime):u.mont(this.p),this.zero=new u(0).toRed(this.red),this.one=new u(1).toRed(this.red),this.two=new u(2).toRed(this.red),this.n=m.n&&new u(m.n,16),this.g=m.g&&this.pointFromJSON(m.g,m.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var p=this.n&&this.p.div(this.n);!p||p.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function h(b,m){this.curve=b,this.type=m,this.precomputed=null}d.exports=E,E.prototype.point=function(){throw new Error("Not implemented")},E.prototype.validate=function(){throw new Error("Not implemented")},E.prototype._fixedNafMul=function(b,m){S(b.precomputed);var p=b._getDoubles(),_=$(m,1,this._bitLength),y=(1<<p.step+1)-(p.step%2==0?2:1);y/=3;var x,A,R=[];for(x=0;x<_.length;x+=p.step){A=0;for(var C=x+p.step-1;C>=x;C--)A=(A<<1)+_[C];R.push(A)}for(var k=this.jpoint(null,null,null),D=this.jpoint(null,null,null),j=y;j>0;j--){for(x=0;x<R.length;x++)(A=R[x])===j?D=D.mixedAdd(p.points[x]):A===-j&&(D=D.mixedAdd(p.points[x].neg()));k=k.add(D)}return k.toP()},E.prototype._wnafMul=function(b,m){var p=4,_=b._getNAFPoints(p);p=_.wnd;for(var y=_.points,x=$(m,p,this._bitLength),A=this.jpoint(null,null,null),R=x.length-1;R>=0;R--){for(var C=0;R>=0&&x[R]===0;R--)C++;if(R>=0&&C++,A=A.dblp(C),R<0)break;var k=x[R];S(k!==0),A=b.type==="affine"?k>0?A.mixedAdd(y[k-1>>1]):A.mixedAdd(y[-k-1>>1].neg()):k>0?A.add(y[k-1>>1]):A.add(y[-k-1>>1].neg())}return b.type==="affine"?A.toP():A},E.prototype._wnafMulAdd=function(b,m,p,_,y){var x,A,R,C=this._wnafT1,k=this._wnafT2,D=this._wnafT3,j=0;for(x=0;x<_;x++){var V=(R=m[x])._getNAFPoints(b);C[x]=V.wnd,k[x]=V.points}for(x=_-1;x>=1;x-=2){var z=x-1,W=x;if(C[z]===1&&C[W]===1){var ee=[m[z],null,null,m[W]];m[z].y.cmp(m[W].y)===0?(ee[1]=m[z].add(m[W]),ee[2]=m[z].toJ().mixedAdd(m[W].neg())):m[z].y.cmp(m[W].y.redNeg())===0?(ee[1]=m[z].toJ().mixedAdd(m[W]),ee[2]=m[z].add(m[W].neg())):(ee[1]=m[z].toJ().mixedAdd(m[W]),ee[2]=m[z].toJ().mixedAdd(m[W].neg()));var ne=[-3,-1,-5,-7,0,7,5,1,3],Q=v(p[z],p[W]);for(j=Math.max(Q[0].length,j),D[z]=new Array(j),D[W]=new Array(j),A=0;A<j;A++){var se=0|Q[0][A],be=0|Q[1][A];D[z][A]=ne[3*(se+1)+(be+1)],D[W][A]=0,k[z]=ee}}else D[z]=$(p[z],C[z],this._bitLength),D[W]=$(p[W],C[W],this._bitLength),j=Math.max(D[z].length,j),j=Math.max(D[W].length,j)}var H=this.jpoint(null,null,null),P=this._wnafT4;for(x=j;x>=0;x--){for(var L=0;x>=0;){var F=!0;for(A=0;A<_;A++)P[A]=0|D[A][x],P[A]!==0&&(F=!1);if(!F)break;L++,x--}if(x>=0&&L++,H=H.dblp(L),x<0)break;for(A=0;A<_;A++){var M=P[A];M!==0&&(M>0?R=k[A][M-1>>1]:M<0&&(R=k[A][-M-1>>1].neg()),H=R.type==="affine"?H.mixedAdd(R):H.add(R))}}for(x=0;x<_;x++)k[x]=null;return y?H:H.toP()},E.BasePoint=h,h.prototype.eq=function(){throw new Error("Not implemented")},h.prototype.validate=function(){return this.curve.validate(this)},E.prototype.decodePoint=function(b,m){b=g.toArray(b,m);var p=this.p.byteLength();if((b[0]===4||b[0]===6||b[0]===7)&&b.length-1==2*p)return b[0]===6?S(b[b.length-1]%2==0):b[0]===7&&S(b[b.length-1]%2==1),this.point(b.slice(1,1+p),b.slice(1+p,1+2*p));if((b[0]===2||b[0]===3)&&b.length-1===p)return this.pointFromX(b.slice(1,1+p),b[0]===3);throw new Error("Unknown point format")},h.prototype.encodeCompressed=function(b){return this.encode(b,!0)},h.prototype._encode=function(b){var m=this.curve.p.byteLength(),p=this.getX().toArray("be",m);return b?[this.getY().isEven()?2:3].concat(p):[4].concat(p,this.getY().toArray("be",m))},h.prototype.encode=function(b,m){return g.encode(this._encode(m),b)},h.prototype.precompute=function(b){if(this.precomputed)return this;var m={doubles:null,naf:null,beta:null};return m.naf=this._getNAFPoints(8),m.doubles=this._getDoubles(4,b),m.beta=this._getBeta(),this.precomputed=m,this},h.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var m=this.precomputed.doubles;return!!m&&m.points.length>=Math.ceil((b.bitLength()+1)/m.step)},h.prototype._getDoubles=function(b,m){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var p=[this],_=this,y=0;y<m;y+=b){for(var x=0;x<b;x++)_=_.dbl();p.push(_)}return{step:b,points:p}},h.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var m=[this],p=(1<<b)-1,_=p===1?null:this.dbl(),y=1;y<p;y++)m[y]=m[y-1].add(_);return{wnd:b,points:m}},h.prototype._getBeta=function(){return null},h.prototype.dblp=function(b){for(var m=this,p=0;p<b;p++)m=m.dbl();return m}},3340:(d,f,a)=>{function u(g){try{if(!a.g.localStorage)return!1}catch{return!1}var $=a.g.localStorage[g];return $!=null&&String($).toLowerCase()==="true"}d.exports=function(g,$){if(u("noDeprecation"))return g;var v=!1;return function(){if(!v){if(u("throwDeprecation"))throw new Error($);u("traceDeprecation")?console.trace($):console.warn($),v=!0}return g.apply(this,arguments)}}},3381:d=>{function f(){return this._id!=null?this._id.toString():null}d.exports=function(a){return!a.paths.id&&a.paths._id&&a.options.id&&(a.aliases&&a.aliases.id||a.virtual("id").get(f)),a}},3388:d=>{d.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply},3414:d=>{d.exports=Number.isNaN||function(f){return f!=f}},3420:(d,f,a)=>{var u=a(4685),g=a(6749);function $(){if(!(this instanceof $))return new $;g.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}u.inherits($,g),d.exports=$,$.blockSize=1024,$.outSize=384,$.hmacStrength=192,$.padLength=128,$.prototype._digest=function(v){return v==="hex"?u.toHex32(this.h.slice(0,12),"big"):u.split32(this.h.slice(0,12),"big")}},3426:(d,f,a)=>{var u=a(2653),g=typeof globalThis>"u"?a.g:globalThis;d.exports=function(){for(var $=[],v=0;v<u.length;v++)typeof g[u[v]]=="function"&&($[$.length]=u[v]);return $}},3441:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m,p){var _;(function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")})(this,h);var y=Array.isArray(p)?"array":"primitive value";return(_=function(x,A,R){return A=$(A),function(C,k){if(k&&(u(k)=="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}(C)}(x,g()?Reflect.construct(A,R||[],$(x).constructor):A.apply(x,R))}(this,h,["Tried to set nested object field `"+m+"` to ".concat(y," `")+p+"`"])).path=m,_}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"ObjectExpectedError"}),d.exports=S},3446:(d,f,a)=>{var u=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,g=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,$=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,v=a(1685),S=a(2098),E=a(9732).Buffer;d.exports=function(h,b){var m,p=h.toString(),_=p.match(u);if(_){var y="aes"+_[1],x=E.from(_[2],"hex"),A=E.from(_[3].replace(/[\r\n]/g,""),"base64"),R=v(b,x.slice(0,8),parseInt(_[1],10)).key,C=[],k=S.createDecipheriv(y,R,x);C.push(k.update(A)),C.push(k.final()),m=E.concat(C)}else{var D=p.match($);m=E.from(D[2].replace(/[\r\n]/g,""),"base64")}return{tag:p.match(g)[1],data:m}}},3453:(d,f,a)=>{var u=a(7799),g=a(1679),$=a(3334),v=a(1970);function S(h){$.call(this,"mont",h),this.a=new u(h.a,16).toRed(this.red),this.b=new u(h.b,16).toRed(this.red),this.i4=new u(4).toRed(this.red).redInvm(),this.two=new u(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function E(h,b,m){$.BasePoint.call(this,h,"projective"),b===null&&m===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new u(b,16),this.z=new u(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}g(S,$),d.exports=S,S.prototype.validate=function(h){var b=h.normalize().x,m=b.redSqr(),p=m.redMul(b).redAdd(m.redMul(this.a)).redAdd(b);return p.redSqrt().redSqr().cmp(p)===0},g(E,$.BasePoint),S.prototype.decodePoint=function(h,b){return this.point(v.toArray(h,b),1)},S.prototype.point=function(h,b){return new E(this,h,b)},S.prototype.pointFromJSON=function(h){return E.fromJSON(this,h)},E.prototype.precompute=function(){},E.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},E.fromJSON=function(h,b){return new E(h,b[0],b[1]||h.one)},E.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},E.prototype.isInfinity=function(){return this.z.cmpn(0)===0},E.prototype.dbl=function(){var h=this.x.redAdd(this.z).redSqr(),b=this.x.redSub(this.z).redSqr(),m=h.redSub(b),p=h.redMul(b),_=m.redMul(b.redAdd(this.curve.a24.redMul(m)));return this.curve.point(p,_)},E.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},E.prototype.diffAdd=function(h,b){var m=this.x.redAdd(this.z),p=this.x.redSub(this.z),_=h.x.redAdd(h.z),y=h.x.redSub(h.z).redMul(m),x=_.redMul(p),A=b.z.redMul(y.redAdd(x).redSqr()),R=b.x.redMul(y.redISub(x).redSqr());return this.curve.point(A,R)},E.prototype.mul=function(h){for(var b=h.clone(),m=this,p=this.curve.point(null,null),_=[];b.cmpn(0)!==0;b.iushrn(1))_.push(b.andln(1));for(var y=_.length-1;y>=0;y--)_[y]===0?(m=m.diffAdd(p,this),p=p.dbl()):(p=m.diffAdd(p,this),m=m.dbl());return p},E.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},E.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},E.prototype.eq=function(h){return this.getX().cmp(h.getX())===0},E.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},E.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},3528:d=>{function f(a,u){if(!a)throw new Error(u||"Assertion failed")}d.exports=f,f.equal=function(a,u,g){if(a!=u)throw new Error(g||"Assertion failed: "+a+" != "+u)}},3550:d=>{function f(R){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},f(R)}var a,u=(typeof Reflect>"u"?"undefined":f(Reflect))==="object"?Reflect:null,g=u&&typeof u.apply=="function"?u.apply:function(R,C,k){return Function.prototype.apply.call(R,C,k)};a=u&&typeof u.ownKeys=="function"?u.ownKeys:Object.getOwnPropertySymbols?function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:function(R){return Object.getOwnPropertyNames(R)};var $=Number.isNaN||function(R){return R!=R};function v(){v.init.call(this)}d.exports=v,d.exports.once=function(R,C){return new Promise(function(k,D){function j(z){R.removeListener(C,V),D(z)}function V(){typeof R.removeListener=="function"&&R.removeListener("error",j),k([].slice.call(arguments))}A(R,C,V,{once:!0}),C!=="error"&&function(z,W){typeof z.on=="function"&&A(z,"error",W,{once:!0})}(R,j)})},v.EventEmitter=v,v.prototype._events=void 0,v.prototype._eventsCount=0,v.prototype._maxListeners=void 0;var S=10;function E(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+f(R))}function h(R){return R._maxListeners===void 0?v.defaultMaxListeners:R._maxListeners}function b(R,C,k,D){var j,V,z,W;if(E(k),(V=R._events)===void 0?(V=R._events=Object.create(null),R._eventsCount=0):(V.newListener!==void 0&&(R.emit("newListener",C,k.listener?k.listener:k),V=R._events),z=V[C]),z===void 0)z=V[C]=k,++R._eventsCount;else if(typeof z=="function"?z=V[C]=D?[k,z]:[z,k]:D?z.unshift(k):z.push(k),(j=h(R))>0&&z.length>j&&!z.warned){z.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=R,ee.type=C,ee.count=z.length,W=ee,console&&console.warn&&console.warn(W)}return R}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(R,C,k){var D={fired:!1,wrapFn:void 0,target:R,type:C,listener:k},j=m.bind(D);return j.listener=k,D.wrapFn=j,j}function _(R,C,k){var D=R._events;if(D===void 0)return[];var j=D[C];return j===void 0?[]:typeof j=="function"?k?[j.listener||j]:[j]:k?function(V){for(var z=new Array(V.length),W=0;W<z.length;++W)z[W]=V[W].listener||V[W];return z}(j):x(j,j.length)}function y(R){var C=this._events;if(C!==void 0){var k=C[R];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}function x(R,C){for(var k=new Array(C),D=0;D<C;++D)k[D]=R[D];return k}function A(R,C,k,D){if(typeof R.on=="function")D.once?R.once(C,k):R.on(C,k);else{if(typeof R.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+f(R));R.addEventListener(C,function j(V){D.once&&R.removeEventListener(C,j),k(V)})}}Object.defineProperty(v,"defaultMaxListeners",{enumerable:!0,get:function(){return S},set:function(R){if(typeof R!="number"||R<0||$(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");S=R}}),v.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},v.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||$(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this},v.prototype.getMaxListeners=function(){return h(this)},v.prototype.emit=function(R){for(var C=[],k=1;k<arguments.length;k++)C.push(arguments[k]);var D=R==="error",j=this._events;if(j!==void 0)D=D&&j.error===void 0;else if(!D)return!1;if(D){var V;if(C.length>0&&(V=C[0]),V instanceof Error)throw V;var z=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw z.context=V,z}var W=j[R];if(W===void 0)return!1;if(typeof W=="function")g(W,this,C);else{var ee=W.length,ne=x(W,ee);for(k=0;k<ee;++k)g(ne[k],this,C)}return!0},v.prototype.addListener=function(R,C){return b(this,R,C,!1)},v.prototype.on=v.prototype.addListener,v.prototype.prependListener=function(R,C){return b(this,R,C,!0)},v.prototype.once=function(R,C){return E(C),this.on(R,p(this,R,C)),this},v.prototype.prependOnceListener=function(R,C){return E(C),this.prependListener(R,p(this,R,C)),this},v.prototype.removeListener=function(R,C){var k,D,j,V,z;if(E(C),(D=this._events)===void 0)return this;if((k=D[R])===void 0)return this;if(k===C||k.listener===C)--this._eventsCount==0?this._events=Object.create(null):(delete D[R],D.removeListener&&this.emit("removeListener",R,k.listener||C));else if(typeof k!="function"){for(j=-1,V=k.length-1;V>=0;V--)if(k[V]===C||k[V].listener===C){z=k[V].listener,j=V;break}if(j<0)return this;j===0?k.shift():function(W,ee){for(;ee+1<W.length;ee++)W[ee]=W[ee+1];W.pop()}(k,j),k.length===1&&(D[R]=k[0]),D.removeListener!==void 0&&this.emit("removeListener",R,z||C)}return this},v.prototype.off=v.prototype.removeListener,v.prototype.removeAllListeners=function(R){var C,k,D;if((k=this._events)===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[R]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete k[R]),this;if(arguments.length===0){var j,V=Object.keys(k);for(D=0;D<V.length;++D)(j=V[D])!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(C=k[R])=="function")this.removeListener(R,C);else if(C!==void 0)for(D=C.length-1;D>=0;D--)this.removeListener(R,C[D]);return this},v.prototype.listeners=function(R){return _(this,R,!0)},v.prototype.rawListeners=function(R){return _(this,R,!1)},v.listenerCount=function(R,C){return typeof R.listenerCount=="function"?R.listenerCount(C):y.call(R,C)},v.prototype.listenerCount=y,v.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},3604:(d,f,a)=>{var u=a(8629),g=a(1085),$=a(9732).Buffer,v=a(5407),S=a(2533),E=a(5401),h=a(1685);function b(y,x,A){S.call(this),this._cache=new p,this._cipher=new E.AES(x),this._prev=$.from(A),this._mode=y,this._autopadding=!0}a(1679)(b,S),b.prototype._update=function(y){var x,A;this._cache.add(y);for(var R=[];x=this._cache.get();)A=this._mode.encrypt(this,x),R.push(A);return $.concat(R)};var m=$.alloc(16,16);function p(){this.cache=$.allocUnsafe(0)}function _(y,x,A){var R=u[y.toLowerCase()];if(!R)throw new TypeError("invalid suite type");if(typeof x=="string"&&(x=$.from(x)),x.length!==R.key/8)throw new TypeError("invalid key length "+x.length);if(typeof A=="string"&&(A=$.from(A)),R.mode!=="GCM"&&A.length!==R.iv)throw new TypeError("invalid iv length "+A.length);return R.type==="stream"?new v(R.module,x,A):R.type==="auth"?new g(R.module,x,A):new b(R.module,x,A)}b.prototype._final=function(){var y=this._cache.flush();if(this._autopadding)return y=this._mode.encrypt(this,y),this._cipher.scrub(),y;if(!y.equals(m))throw this._cipher.scrub(),new Error("data not multiple of block length")},b.prototype.setAutoPadding=function(y){return this._autopadding=!!y,this},p.prototype.add=function(y){this.cache=$.concat([this.cache,y])},p.prototype.get=function(){if(this.cache.length>15){var y=this.cache.slice(0,16);return this.cache=this.cache.slice(16),y}return null},p.prototype.flush=function(){for(var y=16-this.cache.length,x=$.allocUnsafe(y),A=-1;++A<y;)x.writeUInt8(y,A);return $.concat([this.cache,x])},f.createCipheriv=_,f.createCipher=function(y,x){var A=u[y.toLowerCase()];if(!A)throw new TypeError("invalid suite type");var R=h(x,!1,A.key,A.iv);return _(y,R.key,R.iv)}},3609:(d,f,a)=>{function u(C){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},u(C)}function g(C,k){for(var D=0;D<k.length;D++){var j=k[D];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,$(j.key),j)}}function $(C){var k=function(D){if(u(D)!="object"||!D)return D;var j=D[Symbol.toPrimitive];if(j!==void 0){var V=j.call(D,"string");if(u(V)!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(D)}(C);return u(k)=="symbol"?k:k+""}function v(C,k,D){return k=h(k),function(j,V){if(V&&(u(V)=="object"||typeof V=="function"))return V;if(V!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S(j)}(C,E()?Reflect.construct(k,D||[],h(C).constructor):k.apply(C,D))}function S(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function E(){try{var C=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E=function(){return!!C})()}function h(C){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},h(C)}function b(C,k){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,j){return D.__proto__=j,D},b(C,k)}var m=a(8213),p=a(7352),_=function(C){function k(V,z,W,ee,ne){var Q;if(function(be,H){if(!(be instanceof H))throw new TypeError("Cannot call a class as a function")}(this,k),arguments.length>0){var se=x(z);(Q=v(this,k,[R(null,V,z,W,A(ne),se,ee)])).init(V,z,W,ee,ne)}else Q=v(this,k,[R()]);return S(Q)}return function(V,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(z&&z.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Object.defineProperty(V,"prototype",{writable:!1}),z&&b(V,z)}(k,C),D=k,(j=[{key:"toJSON",value:function(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}},{key:"init",value:function(V,z,W,ee,ne){this.stringValue=y(z),this.messageFormat=A(ne),this.kind=V,this.value=z,this.path=W,this.reason=ee,this.valueType=x(z)}},{key:"copy",value:function(V){this.messageFormat=V.messageFormat,this.stringValue=V.stringValue,this.kind=V.kind,this.value=V.value,this.path=V.path,this.reason=V.reason,this.message=V.message,this.valueType=V.valueType}},{key:"setModel",value:function(V){this.message=R(V,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}])&&g(D.prototype,j),Object.defineProperty(D,"prototype",{writable:!1}),D;var D,j}(m);function y(C){var k=p.inspect(C);return(k=k.replace(/^'|'$/g,'"')).startsWith('"')||(k='"'+k+'"'),k}function x(C){if(C==null)return""+C;var k=u(C);return k!=="object"||typeof C.constructor!="function"?k:C.constructor.name}function A(C){var k=C&&C._castErrorMessage||null;if(typeof k=="string"||typeof k=="function")return k}function R(C,k,D,j,V,z,W){if(typeof V=="string"){var ee=y(D),ne=V.replace("{KIND}",k).replace("{VALUE}",ee).replace("{PATH}",j);return C!=null&&(ne=ne.replace("{MODEL}",C.modelName)),ne}if(typeof V=="function")return V(D,j,C,k);var Q="Cast to "+k+" failed for value "+y(D)+(z?" (type "+z+")":"")+' at path "'+j+'"';return C!=null&&(Q+=' for model "'+C.modelName+'"'),W!=null&&typeof W.constructor=="function"&&W.constructor.name!=="AssertionError"&&W.constructor.name!=="Error"&&(Q+=' because of "'+W.constructor.name+'"'),Q}Object.defineProperty(_.prototype,"name",{value:"CastError"}),d.exports=_},3622:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a,u,g){return a==null?a:(a._doc!=null&&(a=a._doc),arguments.length>=3?f(a)!=="object"||g===void 0?void 0:(a instanceof Map?a.set(u,g):a[u]=g,g):u==="$*"?a instanceof Map?Array.from(a.values()):Object.keys(a).map(function($){return a[$]}):a instanceof Map?a.get(u):a[u])}},3633:(d,f,a)=>{var Sr;var u=a(5832).Buffer;const g=(()=>{const Y=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return B=>Y.call(B)})();function $(Y){return g(Y)==="Uint8Array"}function v(Y){return typeof Y=="object"&&Y!=null&&Symbol.toStringTag in Y&&(Y[Symbol.toStringTag]==="ArrayBuffer"||Y[Symbol.toStringTag]==="SharedArrayBuffer")}function S(Y){return Y instanceof RegExp||Object.prototype.toString.call(Y)==="[object RegExp]"}function E(Y){return typeof Y=="object"&&Y!=null&&Symbol.toStringTag in Y&&Y[Symbol.toStringTag]==="Map"}function h(Y){return Y instanceof Date||Object.prototype.toString.call(Y)==="[object Date]"}function b(Y,B){return JSON.stringify(Y,(me,de)=>typeof de=="bigint"?{$numberLong:`${de}`}:E(de)?Object.fromEntries(de):de)}const m=Symbol.for("@@mdb.bson.version"),p=2147483647,_=-2147483648,y=Math.pow(2,63)-1,x=-Math.pow(2,63),A=Math.pow(2,53),R=-Math.pow(2,53),C=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class k extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(B,me){super(B,me)}static isBSONError(B){return B!=null&&typeof B=="object"&&"bsonError"in B&&B.bsonError===!0&&"name"in B&&"message"in B&&"stack"in B}}class D extends k{get name(){return"BSONVersionError"}constructor(){super("Unsupported BSON version, bson types must be from bson 6.x.x")}}class j extends k{get name(){return"BSONRuntimeError"}constructor(B){super(B)}}class V extends k{get name(){return"BSONOffsetError"}constructor(B,me,de){super(`${B}. offset: ${me}`,de),this.offset=me}}let z,W;function ee(Y,B,me,de){if(de){z??(z=new TextDecoder("utf8",{fatal:!0}));try{return z.decode(Y.subarray(B,me))}catch(je){throw new k("Invalid UTF-8 string in BSON document",{cause:je})}}return W??(W=new TextDecoder("utf8",{fatal:!1})),W.decode(Y.subarray(B,me))}function ne(Y,B,me){if(Y.length===0)return"";const de=me-B;if(de===0)return"";if(de>20)return null;if(de===1&&Y[B]<128)return String.fromCharCode(Y[B]);if(de===2&&Y[B]<128&&Y[B+1]<128)return String.fromCharCode(Y[B])+String.fromCharCode(Y[B+1]);if(de===3&&Y[B]<128&&Y[B+1]<128&&Y[B+2]<128)return String.fromCharCode(Y[B])+String.fromCharCode(Y[B+1])+String.fromCharCode(Y[B+2]);const je=[];for(let Ve=B;Ve<me;Ve++){const bt=Y[Ve];if(bt>127)return null;je.push(bt)}return String.fromCharCode(...je)}function Q(Y){return be.fromNumberArray(Array.from({length:Y},()=>Math.floor(256*Math.random())))}const se=(()=>{try{return a(8872).po}catch{return Q}})(),be={toLocalBufferType(Y){if(u.isBuffer(Y))return Y;if(ArrayBuffer.isView(Y))return u.from(Y.buffer,Y.byteOffset,Y.byteLength);const B=(Y==null?void 0:Y[Symbol.toStringTag])??Object.prototype.toString.call(Y);if(B==="ArrayBuffer"||B==="SharedArrayBuffer"||B==="[object ArrayBuffer]"||B==="[object SharedArrayBuffer]")return u.from(Y);throw new k("Cannot create Buffer from the passed potentialBuffer.")},allocate:Y=>u.alloc(Y),allocateUnsafe:Y=>u.allocUnsafe(Y),equals:(Y,B)=>be.toLocalBufferType(Y).equals(B),fromNumberArray:Y=>u.from(Y),fromBase64:Y=>u.from(Y,"base64"),toBase64:Y=>be.toLocalBufferType(Y).toString("base64"),fromISO88591:Y=>u.from(Y,"binary"),toISO88591:Y=>be.toLocalBufferType(Y).toString("binary"),fromHex:Y=>u.from(Y,"hex"),toHex:Y=>be.toLocalBufferType(Y).toString("hex"),toUTF8(Y,B,me,de){const je=me-B<=20?ne(Y,B,me):null;if(je!=null)return je;const Ve=be.toLocalBufferType(Y).toString("utf8",B,me);if(de){for(let bt=0;bt<Ve.length;bt++)if(Ve.charCodeAt(bt)===65533){ee(Y,B,me,!0);break}}return Ve},utf8ByteLength:Y=>u.byteLength(Y,"utf8"),encodeUTF8Into(Y,B,me){const de=function(je,Ve,bt){if(Ve.length===0)return 0;if(Ve.length>25||je.length-bt<Ve.length)return null;for(let $t=0,Ye=bt;$t<Ve.length;$t++,Ye++){const zt=Ve.charCodeAt($t);if(zt>127)return null;je[Ye]=zt}return Ve.length}(Y,B,me);return de??be.toLocalBufferType(Y).write(B,me,void 0,"utf8")},randomBytes:se,swap32:Y=>be.toLocalBufferType(Y).swap32()};function H(Y){if(Y<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${Y}`);return F.fromNumberArray(Array.from({length:Y},()=>Math.floor(256*Math.random())))}const P=(()=>{var B;const{crypto:Y}=globalThis;if(Y!=null&&typeof Y.getRandomValues=="function")return me=>Y.getRandomValues(F.allocate(me));if(function(){const{navigator:me}=globalThis;return typeof me=="object"&&me.product==="ReactNative"}()){const{console:me}=globalThis;(B=me==null?void 0:me.warn)==null||B.call(me,"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return H})(),L=/(\d|[a-f])/i,F={toLocalBufferType(Y){const B=(Y==null?void 0:Y[Symbol.toStringTag])??Object.prototype.toString.call(Y);if(B==="Uint8Array")return Y;if(ArrayBuffer.isView(Y))return new Uint8Array(Y.buffer.slice(Y.byteOffset,Y.byteOffset+Y.byteLength));if(B==="ArrayBuffer"||B==="SharedArrayBuffer"||B==="[object ArrayBuffer]"||B==="[object SharedArrayBuffer]")return new Uint8Array(Y);throw new k("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(Y){if(typeof Y!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(Y)}`);return new Uint8Array(Y)},allocateUnsafe:Y=>F.allocate(Y),equals(Y,B){if(Y.byteLength!==B.byteLength)return!1;for(let me=0;me<Y.byteLength;me++)if(Y[me]!==B[me])return!1;return!0},fromNumberArray:Y=>Uint8Array.from(Y),fromBase64:Y=>Uint8Array.from(atob(Y),B=>B.charCodeAt(0)),toBase64:Y=>btoa(F.toISO88591(Y)),fromISO88591:Y=>Uint8Array.from(Y,B=>255&B.charCodeAt(0)),toISO88591:Y=>Array.from(Uint16Array.from(Y),B=>String.fromCharCode(B)).join(""),fromHex(Y){const B=Y.length%2==0?Y:Y.slice(0,Y.length-1),me=[];for(let de=0;de<B.length;de+=2){const je=B[de],Ve=B[de+1];if(!L.test(je)||!L.test(Ve))break;const bt=Number.parseInt(`${je}${Ve}`,16);me.push(bt)}return Uint8Array.from(me)},toHex:Y=>Array.from(Y,B=>B.toString(16).padStart(2,"0")).join(""),toUTF8(Y,B,me,de){const je=me-B<=20?ne(Y,B,me):null;return je??ee(Y,B,me,de)},utf8ByteLength:Y=>new TextEncoder().encode(Y).byteLength,encodeUTF8Into(Y,B,me){const de=new TextEncoder().encode(B);return Y.set(de,me),de.byteLength},randomBytes:P,swap32(Y){if(Y.length%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let B=0;B<Y.length;B+=4){const me=Y[B],de=Y[B+1],je=Y[B+2],Ve=Y[B+3];Y[B]=Ve,Y[B+1]=je,Y[B+2]=de,Y[B+3]=me}return Y}},M=typeof u=="function"&&((Sr=u.prototype)==null?void 0:Sr._isBuffer)!==!0?be:F;class U{get[m](){return 6}[Symbol.for("nodejs.util.inspect.custom")](B,me,de){return this.inspect(B,me,de)}}const Z=new Float64Array(1),K=new Uint8Array(Z.buffer,0,8);Z[0]=-1;const oe=K[7]===0,ie={isBigEndian:oe,getNonnegativeInt32LE(Y,B){if(Y[B+3]>127)throw new RangeError(`Size cannot be negative at offset: ${B}`);return Y[B]|Y[B+1]<<8|Y[B+2]<<16|Y[B+3]<<24},getInt32LE:(Y,B)=>Y[B]|Y[B+1]<<8|Y[B+2]<<16|Y[B+3]<<24,getUint32LE:(Y,B)=>Y[B]+256*Y[B+1]+65536*Y[B+2]+16777216*Y[B+3],getUint32BE:(Y,B)=>Y[B+3]+256*Y[B+2]+65536*Y[B+1]+16777216*Y[B],getBigInt64LE(Y,B){const me=BigInt(Y[B+4]+256*Y[B+5]+65536*Y[B+6]+(Y[B+7]<<24)),de=BigInt(Y[B]+256*Y[B+1]+65536*Y[B+2]+16777216*Y[B+3]);return(me<<BigInt(32))+de},getFloat64LE:oe?(Y,B)=>(K[7]=Y[B],K[6]=Y[B+1],K[5]=Y[B+2],K[4]=Y[B+3],K[3]=Y[B+4],K[2]=Y[B+5],K[1]=Y[B+6],K[0]=Y[B+7],Z[0]):(Y,B)=>(K[0]=Y[B],K[1]=Y[B+1],K[2]=Y[B+2],K[3]=Y[B+3],K[4]=Y[B+4],K[5]=Y[B+5],K[6]=Y[B+6],K[7]=Y[B+7],Z[0]),setInt32BE:(Y,B,me)=>(Y[B+3]=me,me>>>=8,Y[B+2]=me,me>>>=8,Y[B+1]=me,me>>>=8,Y[B]=me,4),setInt32LE:(Y,B,me)=>(Y[B]=me,me>>>=8,Y[B+1]=me,me>>>=8,Y[B+2]=me,me>>>=8,Y[B+3]=me,4),setBigInt64LE(Y,B,me){const de=BigInt(4294967295);let je=Number(me&de);Y[B]=je,je>>=8,Y[B+1]=je,je>>=8,Y[B+2]=je,je>>=8,Y[B+3]=je;let Ve=Number(me>>BigInt(32)&de);return Y[B+4]=Ve,Ve>>=8,Y[B+5]=Ve,Ve>>=8,Y[B+6]=Ve,Ve>>=8,Y[B+7]=Ve,8},setFloat64LE:oe?(Y,B,me)=>(Z[0]=me,Y[B]=K[7],Y[B+1]=K[6],Y[B+2]=K[5],Y[B+3]=K[4],Y[B+4]=K[3],Y[B+5]=K[2],Y[B+6]=K[1],Y[B+7]=K[0],8):(Y,B,me)=>(Z[0]=me,Y[B]=K[0],Y[B+1]=K[1],Y[B+2]=K[2],Y[B+3]=K[3],Y[B+4]=K[4],Y[B+5]=K[5],Y[B+6]=K[6],Y[B+7]=K[7],8)};class $e extends U{get _bsontype(){return"Binary"}constructor(B,me){if(super(),B!=null&&typeof B=="string"&&!ArrayBuffer.isView(B)&&!v(B)&&!Array.isArray(B))throw new k("Binary can only be constructed from Uint8Array or number[]");this.sub_type=me??$e.BSON_BINARY_SUBTYPE_DEFAULT,B==null?(this.buffer=M.allocate($e.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(B)?M.fromNumberArray(B):M.toLocalBufferType(B),this.position=this.buffer.byteLength)}put(B){if(typeof B=="string"&&B.length!==1)throw new k("only accepts single character String");if(typeof B!="number"&&B.length!==1)throw new k("only accepts single character Uint8Array or Array");let me;if(me=typeof B=="string"?B.charCodeAt(0):typeof B=="number"?B:B[0],me<0||me>255)throw new k("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=me;else{const de=M.allocate($e.BUFFER_SIZE+this.buffer.length);de.set(this.buffer,0),this.buffer=de,this.buffer[this.position++]=me}}write(B,me){if(me=typeof me=="number"?me:this.position,this.buffer.byteLength<me+B.length){const de=M.allocate(this.buffer.byteLength+B.length);de.set(this.buffer,0),this.buffer=de}if(ArrayBuffer.isView(B))this.buffer.set(M.toLocalBufferType(B),me),this.position=me+B.byteLength>this.position?me+B.length:this.position;else if(typeof B=="string")throw new k("input cannot be string")}read(B,me){const de=B+(me=me&&me>0?me:this.position);return this.buffer.subarray(B,de>this.position?this.position:de)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return M.toBase64(this.buffer.subarray(0,this.position))}toString(B){return B==="hex"?M.toHex(this.buffer.subarray(0,this.position)):B==="base64"?M.toBase64(this.buffer.subarray(0,this.position)):M.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(B){B=B||{},this.sub_type===$e.SUBTYPE_VECTOR&&ce(this);const me=M.toBase64(this.buffer),de=Number(this.sub_type).toString(16);return B.legacy?{$binary:me,$type:de.length===1?"0"+de:de}:{$binary:{base64:me,subType:de.length===1?"0"+de:de}}}toUUID(){if(this.sub_type===$e.SUBTYPE_UUID)return new _e(this.buffer.subarray(0,this.position));throw new k(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${$e.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(B,me){return new $e(M.fromHex(B),me)}static createFromBase64(B,me){return new $e(M.fromBase64(B),me)}static fromExtendedJSON(B,me){let de,je;if(me=me||{},"$binary"in B?me.legacy&&typeof B.$binary=="string"&&"$type"in B?(je=B.$type?parseInt(B.$type,16):0,de=M.fromBase64(B.$binary)):typeof B.$binary!="string"&&(je=B.$binary.subType?parseInt(B.$binary.subType,16):0,de=M.fromBase64(B.$binary.base64)):"$uuid"in B&&(je=4,de=_e.bytesFromString(B.$uuid)),!de)throw new k(`Unexpected Binary Extended JSON format ${JSON.stringify(B)}`);return je===4?new _e(de):new $e(de,je)}inspect(B,me,de){return de??(de=b),`Binary.createFromBase64(${de(M.toBase64(this.buffer.subarray(0,this.position)),me)}, ${de(this.sub_type,me)})`}toInt8Array(){if(this.sub_type!==$e.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==$e.VECTOR_TYPE.Int8)throw new k("Binary datatype field is not Int8");return new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==$e.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==$e.VECTOR_TYPE.Float32)throw new k("Binary datatype field is not Float32");const B=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return ie.isBigEndian&&M.swap32(B),new Float32Array(B.buffer)}toPackedBits(){if(this.sub_type!==$e.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==$e.VECTOR_TYPE.PackedBit)throw new k("Binary datatype field is not packed bit");return new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==$e.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==$e.VECTOR_TYPE.PackedBit)throw new k("Binary datatype field is not packed bit");const B=8*(this.length()-2)-this.buffer[1],me=new Int8Array(B);for(let de=0;de<me.length;de++){const je=de/8|0,Ve=this.buffer[je+2]>>7-de%8&1;me[de]=Ve}return me}static fromInt8Array(B){const me=M.allocate(B.byteLength+2);me[0]=$e.VECTOR_TYPE.Int8,me[1]=0;const de=new Uint8Array(B.buffer,B.byteOffset,B.byteLength);return me.set(de,2),new this(me,this.SUBTYPE_VECTOR)}static fromFloat32Array(B){const me=M.allocate(B.byteLength+2);me[0]=$e.VECTOR_TYPE.Float32,me[1]=0;const de=new Uint8Array(B.buffer,B.byteOffset,B.byteLength);return me.set(de,2),ie.isBigEndian&&M.swap32(new Uint8Array(me.buffer,2)),new this(me,this.SUBTYPE_VECTOR)}static fromPackedBits(B,me=0){const de=M.allocate(B.byteLength+2);return de[0]=$e.VECTOR_TYPE.PackedBit,de[1]=me,de.set(B,2),new this(de,this.SUBTYPE_VECTOR)}static fromBits(B){const me=B.length+7>>>3,de=new Uint8Array(me+2);de[0]=$e.VECTOR_TYPE.PackedBit;const je=B.length%8;de[1]=je===0?0:8-je;for(let Ve=0;Ve<B.length;Ve++){const bt=Ve>>>3,$t=B[Ve];if($t!==0&&$t!==1)throw new k(`Invalid bit value at ${Ve}: must be 0 or 1, found ${B[Ve]}`);if($t===0)continue;const Ye=7-Ve%8;de[bt+2]|=$t<<Ye}return new this(de,$e.SUBTYPE_VECTOR)}}function ce(Y){if(Y.sub_type!==$e.SUBTYPE_VECTOR)return;const B=Y.position,me=Y.buffer[0],de=Y.buffer[1];if((me===$e.VECTOR_TYPE.Float32||me===$e.VECTOR_TYPE.Int8)&&de!==0)throw new k("Invalid Vector: padding must be zero for int8 and float32 vectors");if(me===$e.VECTOR_TYPE.PackedBit&&de!==0&&B===2)throw new k("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(me===$e.VECTOR_TYPE.PackedBit&&de>7)throw new k(`Invalid Vector: padding must be a value between 0 and 7. found: ${de}`)}$e.BSON_BINARY_SUBTYPE_DEFAULT=0,$e.BUFFER_SIZE=256,$e.SUBTYPE_DEFAULT=0,$e.SUBTYPE_FUNCTION=1,$e.SUBTYPE_BYTE_ARRAY=2,$e.SUBTYPE_UUID_OLD=3,$e.SUBTYPE_UUID=4,$e.SUBTYPE_MD5=5,$e.SUBTYPE_ENCRYPTED=6,$e.SUBTYPE_COLUMN=7,$e.SUBTYPE_SENSITIVE=8,$e.SUBTYPE_VECTOR=9,$e.SUBTYPE_USER_DEFINED=128,$e.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});const le=/^[0-9A-F]{32}$/i,ye=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class _e extends $e{constructor(B){let me;if(B==null)me=_e.generate();else if(B instanceof _e)me=M.toLocalBufferType(new Uint8Array(B.buffer));else if(ArrayBuffer.isView(B)&&B.byteLength===16)me=M.toLocalBufferType(B);else{if(typeof B!="string")throw new k("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");me=_e.bytesFromString(B)}super(me,4)}get id(){return this.buffer}set id(B){this.buffer=B}toHexString(B=!0){return B?[M.toHex(this.buffer.subarray(0,4)),M.toHex(this.buffer.subarray(4,6)),M.toHex(this.buffer.subarray(6,8)),M.toHex(this.buffer.subarray(8,10)),M.toHex(this.buffer.subarray(10,16))].join("-"):M.toHex(this.buffer)}toString(B){return B==="hex"?M.toHex(this.id):B==="base64"?M.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(B){if(!B)return!1;if(B instanceof _e)return M.equals(B.id,this.id);try{return M.equals(new _e(B).id,this.id)}catch{return!1}}toBinary(){return new $e(this.id,$e.SUBTYPE_UUID)}static generate(){const B=M.randomBytes(16);return B[6]=15&B[6]|64,B[8]=63&B[8]|128,B}static isValid(B){return!!B&&(typeof B=="string"?_e.isValidUUIDString(B):$(B)?B.byteLength===16:B._bsontype==="Binary"&&B.sub_type===this.SUBTYPE_UUID&&B.buffer.byteLength===16)}static createFromHexString(B){const me=_e.bytesFromString(B);return new _e(me)}static createFromBase64(B){return new _e(M.fromBase64(B))}static bytesFromString(B){if(!_e.isValidUUIDString(B))throw new k("UUID string representation must be 32 hex digits or canonical hyphenated representation");return M.fromHex(B.replace(/-/g,""))}static isValidUUIDString(B){return le.test(B)||ye.test(B)}inspect(B,me,de){return de??(de=b),`new UUID(${de(this.toHexString(),me)})`}}class q extends U{get _bsontype(){return"Code"}constructor(B,me){super(),this.code=B.toString(),this.scope=me??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(B){return new q(B.$code,B.$scope)}inspect(B,me,de){de??(de=b);let je=de(this.code,me);const Ve=je.includes(`
`);return this.scope!=null&&(je+=`,${Ve?`
`:" "}${de(this.scope,me)}`),`new Code(${Ve?`
`:""}${je}${Ve&&this.scope===null?`
`:""})`}}function re(Y){return Y!=null&&typeof Y=="object"&&"$id"in Y&&Y.$id!=null&&"$ref"in Y&&typeof Y.$ref=="string"&&(!("$db"in Y)||"$db"in Y&&typeof Y.$db=="string")}class fe extends U{get _bsontype(){return"DBRef"}constructor(B,me,de,je){super();const Ve=B.split(".");Ve.length===2&&(de=Ve.shift(),B=Ve.shift()),this.collection=B,this.oid=me,this.db=de,this.fields=je||{}}get namespace(){return this.collection}set namespace(B){this.collection=B}toJSON(){const B=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(B.$db=this.db),B}toExtendedJSON(B){B=B||{};let me={$ref:this.collection,$id:this.oid};return B.legacy||(this.db&&(me.$db=this.db),me=Object.assign(me,this.fields)),me}static fromExtendedJSON(B){const me=Object.assign({},B);return delete me.$ref,delete me.$id,delete me.$db,new fe(B.$ref,B.$id,B.$db,me)}inspect(B,me,de){de??(de=b);const je=[de(this.namespace,me),de(this.oid,me),...this.db?[de(this.db,me)]:[],...Object.keys(this.fields).length>0?[de(this.fields,me)]:[]];return je[1]=de===b?`new ObjectId(${je[1]})`:je[1],`new DBRef(${je.join(", ")})`}}function we(Y){if(Y==="")return Y;let B=0;const me=Y[B]==="-",de=Y[B]==="+";(de||me)&&(B+=1);let je=!1;for(;B<Y.length&&Y[B]==="0";++B)je=!0;return je?`${me?"-":""}${Y.length===B?"0":Y.slice(B)}`:de?Y.slice(1):Y}let Re;try{Re=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}const ke=4294967296,ue=18446744073709552e3,Ee=ue/2,Ae={},Ne={},De=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class he extends U{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(B=0,me,de){super();const je=typeof me=="boolean"?me:!!de,Ve=typeof me=="number"?me:0,bt=typeof B=="string"?he.fromString(B,je):typeof B=="bigint"?he.fromBigInt(B,je):{low:0|B,high:0|Ve,unsigned:je};this.low=bt.low,this.high=bt.high,this.unsigned=bt.unsigned}static fromBits(B,me,de){return new he(B,me,de)}static fromInt(B,me){let de,je,Ve;return me?(Ve=0<=(B>>>=0)&&B<256)&&(je=Ne[B],je)?je:(de=he.fromBits(B,(0|B)<0?-1:0,!0),Ve&&(Ne[B]=de),de):(Ve=-128<=(B|=0)&&B<128)&&(je=Ae[B],je)?je:(de=he.fromBits(B,B<0?-1:0,!1),Ve&&(Ae[B]=de),de)}static fromNumber(B,me){if(isNaN(B))return me?he.UZERO:he.ZERO;if(me){if(B<0)return he.UZERO;if(B>=ue)return he.MAX_UNSIGNED_VALUE}else{if(B<=-9223372036854776e3)return he.MIN_VALUE;if(B+1>=Ee)return he.MAX_VALUE}return B<0?he.fromNumber(-B,me).neg():he.fromBits(B%ke|0,B/ke|0,me)}static fromBigInt(B,me){const de=BigInt(4294967295),je=BigInt(32);return new he(Number(B&de),Number(B>>je&de),me)}static _fromString(B,me,de){if(B.length===0)throw new k("empty string");if(de<2||36<de)throw new k("radix");let je;if((je=B.indexOf("-"))>0)throw new k("interior hyphen");if(je===0)return he._fromString(B.substring(1),me,de).neg();const Ve=he.fromNumber(Math.pow(de,8));let bt=he.ZERO;for(let $t=0;$t<B.length;$t+=8){const Ye=Math.min(8,B.length-$t),zt=parseInt(B.substring($t,$t+Ye),de);if(Ye<8){const Mt=he.fromNumber(Math.pow(de,Ye));bt=bt.mul(Mt).add(he.fromNumber(zt))}else bt=bt.mul(Ve),bt=bt.add(he.fromNumber(zt))}return bt.unsigned=me,bt}static fromStringStrict(B,me,de){let je=!1;if(typeof me=="number"?(de=me,me=!1):je=!!me,de??(de=10),B.trim()!==B)throw new k(`Input: '${B}' contains leading and/or trailing whitespace`);if(!function($t,Ye){const zt="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,Ye=Ye??10);return!new RegExp(`[^-+${zt}]`,"i").test($t)&&$t}(B,de))throw new k(`Input: '${B}' contains invalid characters for radix: ${de}`);const Ve=we(B),bt=he._fromString(Ve,je,de);if(bt.toString(de).toLowerCase()!==Ve.toLowerCase())throw new k(`Input: ${B} is not representable as ${bt.unsigned?"an unsigned":"a signed"} 64-bit Long ${de!=null?`with radix: ${de}`:""}`);return bt}static fromString(B,me,de){let je=!1;return typeof me=="number"?(de=me,me=!1):je=!!me,de??(de=10),B==="NaN"&&de<24||(B==="Infinity"||B==="+Infinity"||B==="-Infinity")&&de<35?he.ZERO:he._fromString(B,je,de)}static fromBytes(B,me,de){return de?he.fromBytesLE(B,me):he.fromBytesBE(B,me)}static fromBytesLE(B,me){return new he(B[0]|B[1]<<8|B[2]<<16|B[3]<<24,B[4]|B[5]<<8|B[6]<<16|B[7]<<24,me)}static fromBytesBE(B,me){return new he(B[4]<<24|B[5]<<16|B[6]<<8|B[7],B[0]<<24|B[1]<<16|B[2]<<8|B[3],me)}static isLong(B){return B!=null&&typeof B=="object"&&"__isLong__"in B&&B.__isLong__===!0}static fromValue(B,me){return typeof B=="number"?he.fromNumber(B,me):typeof B=="string"?he.fromString(B,me):he.fromBits(B.low,B.high,typeof me=="boolean"?me:B.unsigned)}add(B){he.isLong(B)||(B=he.fromValue(B));const me=this.high>>>16,de=65535&this.high,je=this.low>>>16,Ve=65535&this.low,bt=B.high>>>16,$t=65535&B.high,Ye=B.low>>>16;let zt=0,Mt=0,ut=0,At=0;return At+=Ve+(65535&B.low),ut+=At>>>16,At&=65535,ut+=je+Ye,Mt+=ut>>>16,ut&=65535,Mt+=de+$t,zt+=Mt>>>16,Mt&=65535,zt+=me+bt,zt&=65535,he.fromBits(ut<<16|At,zt<<16|Mt,this.unsigned)}and(B){return he.isLong(B)||(B=he.fromValue(B)),he.fromBits(this.low&B.low,this.high&B.high,this.unsigned)}compare(B){if(he.isLong(B)||(B=he.fromValue(B)),this.eq(B))return 0;const me=this.isNegative(),de=B.isNegative();return me&&!de?-1:!me&&de?1:this.unsigned?B.high>>>0>this.high>>>0||B.high===this.high&&B.low>>>0>this.low>>>0?-1:1:this.sub(B).isNegative()?-1:1}comp(B){return this.compare(B)}divide(B){if(he.isLong(B)||(B=he.fromValue(B)),B.isZero())throw new k("division by zero");if(Re){if(!this.unsigned&&this.high===-2147483648&&B.low===-1&&B.high===-1)return this;const Ve=(this.unsigned?Re.div_u:Re.div_s)(this.low,this.high,B.low,B.high);return he.fromBits(Ve,Re.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?he.UZERO:he.ZERO;let me,de,je;if(this.unsigned){if(B.unsigned||(B=B.toUnsigned()),B.gt(this))return he.UZERO;if(B.gt(this.shru(1)))return he.UONE;je=he.UZERO}else{if(this.eq(he.MIN_VALUE))return B.eq(he.ONE)||B.eq(he.NEG_ONE)?he.MIN_VALUE:B.eq(he.MIN_VALUE)?he.ONE:(me=this.shr(1).div(B).shl(1),me.eq(he.ZERO)?B.isNegative()?he.ONE:he.NEG_ONE:(de=this.sub(B.mul(me)),je=me.add(de.div(B)),je));if(B.eq(he.MIN_VALUE))return this.unsigned?he.UZERO:he.ZERO;if(this.isNegative())return B.isNegative()?this.neg().div(B.neg()):this.neg().div(B).neg();if(B.isNegative())return this.div(B.neg()).neg();je=he.ZERO}for(de=this;de.gte(B);){me=Math.max(1,Math.floor(de.toNumber()/B.toNumber()));const Ve=Math.ceil(Math.log(me)/Math.LN2),bt=Ve<=48?1:Math.pow(2,Ve-48);let $t=he.fromNumber(me),Ye=$t.mul(B);for(;Ye.isNegative()||Ye.gt(de);)me-=bt,$t=he.fromNumber(me,this.unsigned),Ye=$t.mul(B);$t.isZero()&&($t=he.ONE),je=je.add($t),de=de.sub(Ye)}return je}div(B){return this.divide(B)}equals(B){return he.isLong(B)||(B=he.fromValue(B)),(this.unsigned===B.unsigned||this.high>>>31!=1||B.high>>>31!=1)&&this.high===B.high&&this.low===B.low}eq(B){return this.equals(B)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(he.MIN_VALUE)?64:this.neg().getNumBitsAbs();const B=this.high!==0?this.high:this.low;let me;for(me=31;me>0&&!(B&1<<me);me--);return this.high!==0?me+33:me+1}greaterThan(B){return this.comp(B)>0}gt(B){return this.greaterThan(B)}greaterThanOrEqual(B){return this.comp(B)>=0}gte(B){return this.greaterThanOrEqual(B)}ge(B){return this.greaterThanOrEqual(B)}isEven(){return!(1&this.low)}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return!(1&~this.low)}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(B){return this.comp(B)<0}lt(B){return this.lessThan(B)}lessThanOrEqual(B){return this.comp(B)<=0}lte(B){return this.lessThanOrEqual(B)}modulo(B){if(he.isLong(B)||(B=he.fromValue(B)),Re){const me=(this.unsigned?Re.rem_u:Re.rem_s)(this.low,this.high,B.low,B.high);return he.fromBits(me,Re.get_high(),this.unsigned)}return this.sub(this.div(B).mul(B))}mod(B){return this.modulo(B)}rem(B){return this.modulo(B)}multiply(B){if(this.isZero())return he.ZERO;if(he.isLong(B)||(B=he.fromValue(B)),Re){const Jt=Re.mul(this.low,this.high,B.low,B.high);return he.fromBits(Jt,Re.get_high(),this.unsigned)}if(B.isZero())return he.ZERO;if(this.eq(he.MIN_VALUE))return B.isOdd()?he.MIN_VALUE:he.ZERO;if(B.eq(he.MIN_VALUE))return this.isOdd()?he.MIN_VALUE:he.ZERO;if(this.isNegative())return B.isNegative()?this.neg().mul(B.neg()):this.neg().mul(B).neg();if(B.isNegative())return this.mul(B.neg()).neg();if(this.lt(he.TWO_PWR_24)&&B.lt(he.TWO_PWR_24))return he.fromNumber(this.toNumber()*B.toNumber(),this.unsigned);const me=this.high>>>16,de=65535&this.high,je=this.low>>>16,Ve=65535&this.low,bt=B.high>>>16,$t=65535&B.high,Ye=B.low>>>16,zt=65535&B.low;let Mt=0,ut=0,At=0,Xt=0;return Xt+=Ve*zt,At+=Xt>>>16,Xt&=65535,At+=je*zt,ut+=At>>>16,At&=65535,At+=Ve*Ye,ut+=At>>>16,At&=65535,ut+=de*zt,Mt+=ut>>>16,ut&=65535,ut+=je*Ye,Mt+=ut>>>16,ut&=65535,ut+=Ve*$t,Mt+=ut>>>16,ut&=65535,Mt+=me*zt+de*Ye+je*$t+Ve*bt,Mt&=65535,he.fromBits(At<<16|Xt,Mt<<16|ut,this.unsigned)}mul(B){return this.multiply(B)}negate(){return!this.unsigned&&this.eq(he.MIN_VALUE)?he.MIN_VALUE:this.not().add(he.ONE)}neg(){return this.negate()}not(){return he.fromBits(~this.low,~this.high,this.unsigned)}notEquals(B){return!this.equals(B)}neq(B){return this.notEquals(B)}ne(B){return this.notEquals(B)}or(B){return he.isLong(B)||(B=he.fromValue(B)),he.fromBits(this.low|B.low,this.high|B.high,this.unsigned)}shiftLeft(B){return he.isLong(B)&&(B=B.toInt()),(B&=63)==0?this:B<32?he.fromBits(this.low<<B,this.high<<B|this.low>>>32-B,this.unsigned):he.fromBits(0,this.low<<B-32,this.unsigned)}shl(B){return this.shiftLeft(B)}shiftRight(B){return he.isLong(B)&&(B=B.toInt()),(B&=63)==0?this:B<32?he.fromBits(this.low>>>B|this.high<<32-B,this.high>>B,this.unsigned):he.fromBits(this.high>>B-32,this.high>=0?0:-1,this.unsigned)}shr(B){return this.shiftRight(B)}shiftRightUnsigned(B){if(he.isLong(B)&&(B=B.toInt()),(B&=63)==0)return this;{const me=this.high;if(B<32){const de=this.low;return he.fromBits(de>>>B|me<<32-B,me>>>B,this.unsigned)}return B===32?he.fromBits(me,0,this.unsigned):he.fromBits(me>>>B-32,0,this.unsigned)}}shr_u(B){return this.shiftRightUnsigned(B)}shru(B){return this.shiftRightUnsigned(B)}subtract(B){return he.isLong(B)||(B=he.fromValue(B)),this.add(B.neg())}sub(B){return this.subtract(B)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*ke+(this.low>>>0):this.high*ke+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(B){return B?this.toBytesLE():this.toBytesBE()}toBytesLE(){const B=this.high,me=this.low;return[255&me,me>>>8&255,me>>>16&255,me>>>24,255&B,B>>>8&255,B>>>16&255,B>>>24]}toBytesBE(){const B=this.high,me=this.low;return[B>>>24,B>>>16&255,B>>>8&255,255&B,me>>>24,me>>>16&255,me>>>8&255,255&me]}toSigned(){return this.unsigned?he.fromBits(this.low,this.high,!1):this}toString(B){if((B=B||10)<2||36<B)throw new k("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(he.MIN_VALUE)){const Ve=he.fromNumber(B),bt=this.div(Ve),$t=bt.mul(Ve).sub(this);return bt.toString(B)+$t.toInt().toString(B)}return"-"+this.neg().toString(B)}const me=he.fromNumber(Math.pow(B,6),this.unsigned);let de=this,je="";for(;;){const Ve=de.div(me);let bt=(de.sub(Ve.mul(me)).toInt()>>>0).toString(B);if(de=Ve,de.isZero())return bt+je;for(;bt.length<6;)bt="0"+bt;je=""+bt+je}}toUnsigned(){return this.unsigned?this:he.fromBits(this.low,this.high,!0)}xor(B){return he.isLong(B)||(B=he.fromValue(B)),he.fromBits(this.low^B.low,this.high^B.high,this.unsigned)}eqz(){return this.isZero()}le(B){return this.lessThanOrEqual(B)}toExtendedJSON(B){return B&&B.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(B,me){const{useBigInt64:de=!1,relaxed:je=!0}={...me};if(B.$numberLong.length>20)throw new k("$numberLong string is too long");if(!De.test(B.$numberLong))throw new k(`$numberLong string "${B.$numberLong}" is in an invalid format`);if(de){const bt=BigInt(B.$numberLong);return BigInt.asIntN(64,bt)}const Ve=he.fromString(B.$numberLong);return je?Ve.toNumber():Ve}inspect(B,me,de){return de??(de=b),`new Long(${de(this.toString(),me)}${this.unsigned?`, ${de(this.unsigned,me)}`:""})`}}he.TWO_PWR_24=he.fromInt(16777216),he.MAX_UNSIGNED_VALUE=he.fromBits(-1,-1,!0),he.ZERO=he.fromInt(0),he.UZERO=he.fromInt(0,!0),he.ONE=he.fromInt(1),he.UONE=he.fromInt(1,!0),he.NEG_ONE=he.fromInt(-1),he.MAX_VALUE=he.fromBits(-1,2147483647,!1),he.MIN_VALUE=he.fromBits(0,-2147483648,!1);const tt=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,at=/^(\+|-)?(Infinity|inf)$/i,He=/^(\+|-)?NaN$/i,ot=6111,Ue=-6176,Ze=M.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),ae=M.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Oe=M.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Le=/^([-+])?(\d+)?$/;function Pe(Y){return!isNaN(parseInt(Y,10))}function ft(Y){const B=he.fromNumber(1e9);let me=he.fromNumber(0);if(!(Y.parts[0]||Y.parts[1]||Y.parts[2]||Y.parts[3]))return{quotient:Y,rem:me};for(let de=0;de<=3;de++)me=me.shiftLeft(32),me=me.add(new he(Y.parts[de],0)),Y.parts[de]=me.div(B).low,me=me.modulo(B);return{quotient:Y,rem:me}}function Lt(Y,B){throw new k(`"${Y}" is not a valid Decimal128 string - ${B}`)}class qt extends U{get _bsontype(){return"Decimal128"}constructor(B){if(super(),typeof B=="string")this.bytes=qt.fromString(B).bytes;else{if(!(B instanceof Uint8Array||$(B)))throw new k("Decimal128 must take a Buffer or string");if(B.byteLength!==16)throw new k("Decimal128 must take a Buffer of 16 bytes");this.bytes=B}}static fromString(B){return qt._fromString(B,{allowRounding:!1})}static fromStringWithRounding(B){return qt._fromString(B,{allowRounding:!0})}static _fromString(B,me){let de=!1,je=!1,Ve=!1,bt=!1,$t=0,Ye=0,zt=0,Mt=0,ut=0;const At=[0];let Xt=0,Jt=0,On=0,Yn=0,Kn=new he(0,0),kn=new he(0,0),Xn=0,Ht=0;if(B.length>=7e3)throw new k(B+" not a valid Decimal128 string");const nn=B.match(tt),Fr=B.match(at),Nn=B.match(He);if(!nn&&!Fr&&!Nn||B.length===0)throw new k(B+" not a valid Decimal128 string");if(nn){const Gt=nn[2],In=nn[4],Ln=nn[5],br=nn[6];In&&br===void 0&&Lt(B,"missing exponent power"),In&&Gt===void 0&&Lt(B,"missing exponent base"),In===void 0&&(Ln||br)&&Lt(B,"missing e before exponent")}if(B[Ht]!=="+"&&B[Ht]!=="-"||(je=!0,de=B[Ht++]==="-"),!Pe(B[Ht])&&B[Ht]!=="."){if(B[Ht]==="i"||B[Ht]==="I")return new qt(de?ae:Oe);if(B[Ht]==="N")return new qt(Ze)}for(;Pe(B[Ht])||B[Ht]===".";)B[Ht]!=="."?(Xt<34&&(B[Ht]!=="0"||bt)&&(bt||(ut=Ye),bt=!0,At[Jt++]=parseInt(B[Ht],10),Xt+=1),bt&&(zt+=1),Ve&&(Mt+=1),Ye+=1,Ht+=1):(Ve&&Lt(B,"contains multiple periods"),Ve=!0,Ht+=1);if(Ve&&!Ye)throw new k(B+" not a valid Decimal128 string");if(B[Ht]==="e"||B[Ht]==="E"){const Gt=B.substr(++Ht).match(Le);if(!Gt||!Gt[2])return new qt(Ze);Yn=parseInt(Gt[0],10),Ht+=Gt[0].length}if(B[Ht])return new qt(Ze);if(Xt){if(On=Xt-1,$t=zt,$t!==1)for(;B[ut+$t-1+Number(je)+Number(Ve)]==="0";)$t-=1}else At[0]=0,zt=1,Xt=1,$t=0;for(Yn<=Mt&&Mt>Yn+16384?Yn=Ue:Yn-=Mt;Yn>ot;){if(On+=1,On>=34){if($t===0){Yn=ot;break}Lt(B,"overflow")}Yn-=1}if(me.allowRounding){for(;Yn<Ue||Xt<zt;){if(On===0&&$t<Xt){Yn=Ue,$t=0;break}if(Xt<zt?zt-=1:On-=1,Yn<ot)Yn+=1;else{if(At.join("").match(/^0+$/)){Yn=ot;break}Lt(B,"overflow")}}if(On+1<$t){let Gt=Ye;Ve&&(ut+=1,Gt+=1),je&&(ut+=1,Gt+=1);const In=parseInt(B[ut+On+1],10);let Ln=0;if(In>=5&&(Ln=1,In===5)){Ln=At[On]%2==1?1:0;for(let br=ut+On+2;br<Gt;br++)if(parseInt(B[br],10)){Ln=1;break}}if(Ln){let br=On;for(;br>=0&&++At[br]>9;br--)if(At[br]=0,br===0){if(!(Yn<ot))return new qt(de?ae:Oe);Yn+=1,At[br]=1}}}}else{for(;Yn<Ue||Xt<zt;){if(On===0){if($t===0){Yn=Ue;break}Lt(B,"exponent underflow")}Xt<zt?(B[zt-1+Number(je)+Number(Ve)]!=="0"&&$t!==0&&Lt(B,"inexact rounding"),zt-=1):(At[On]!==0&&Lt(B,"inexact rounding"),On-=1),Yn<ot?Yn+=1:Lt(B,"overflow")}On+1<$t&&(Ve&&(ut+=1),je&&(ut+=1),parseInt(B[ut+On+1],10)!==0&&Lt(B,"inexact rounding"))}if(Kn=he.fromNumber(0),kn=he.fromNumber(0),$t===0)Kn=he.fromNumber(0),kn=he.fromNumber(0);else if(On<17){let Gt=0;for(kn=he.fromNumber(At[Gt++]),Kn=new he(0,0);Gt<=On;Gt++)kn=kn.multiply(he.fromNumber(10)),kn=kn.add(he.fromNumber(At[Gt]))}else{let Gt=0;for(Kn=he.fromNumber(At[Gt++]);Gt<=On-17;Gt++)Kn=Kn.multiply(he.fromNumber(10)),Kn=Kn.add(he.fromNumber(At[Gt]));for(kn=he.fromNumber(At[Gt++]);Gt<=On;Gt++)kn=kn.multiply(he.fromNumber(10)),kn=kn.add(he.fromNumber(At[Gt]))}const Or=function(Gt,In){if(!Gt&&!In)return{high:he.fromNumber(0),low:he.fromNumber(0)};const Ln=Gt.shiftRightUnsigned(32),br=new he(Gt.getLowBits(),0),Fs=In.shiftRightUnsigned(32),Hs=new he(In.getLowBits(),0);let jo=Ln.multiply(Fs),Uo=Ln.multiply(Hs);const Lu=br.multiply(Fs);let Sa=br.multiply(Hs);return jo=jo.add(Uo.shiftRightUnsigned(32)),Uo=new he(Uo.getLowBits(),0).add(Lu).add(Sa.shiftRightUnsigned(32)),jo=jo.add(Uo.shiftRightUnsigned(32)),Sa=Uo.shiftLeft(32).add(new he(Sa.getLowBits(),0)),{high:jo,low:Sa}}(Kn,he.fromString("100000000000000000"));Or.low=Or.low.add(kn),function(Gt,In){const Ln=Gt.high>>>0,br=In.high>>>0;return Ln<br||Ln===br&&Gt.low>>>0<In.low>>>0}(Or.low,kn)&&(Or.high=Or.high.add(he.fromNumber(1))),Xn=Yn+6176;const St={low:he.fromNumber(0),high:he.fromNumber(0)};Or.high.shiftRightUnsigned(49).and(he.fromNumber(1)).equals(he.fromNumber(1))?(St.high=St.high.or(he.fromNumber(3).shiftLeft(61)),St.high=St.high.or(he.fromNumber(Xn).and(he.fromNumber(16383).shiftLeft(47))),St.high=St.high.or(Or.high.and(he.fromNumber(0x7fffffffffff)))):(St.high=St.high.or(he.fromNumber(16383&Xn).shiftLeft(49)),St.high=St.high.or(Or.high.and(he.fromNumber(562949953421311)))),St.low=Or.low,de&&(St.high=St.high.or(he.fromString("9223372036854775808")));const Yt=M.allocateUnsafe(16);return Ht=0,Yt[Ht++]=255&St.low.low,Yt[Ht++]=St.low.low>>8&255,Yt[Ht++]=St.low.low>>16&255,Yt[Ht++]=St.low.low>>24&255,Yt[Ht++]=255&St.low.high,Yt[Ht++]=St.low.high>>8&255,Yt[Ht++]=St.low.high>>16&255,Yt[Ht++]=St.low.high>>24&255,Yt[Ht++]=255&St.high.low,Yt[Ht++]=St.high.low>>8&255,Yt[Ht++]=St.high.low>>16&255,Yt[Ht++]=St.high.low>>24&255,Yt[Ht++]=255&St.high.high,Yt[Ht++]=St.high.high>>8&255,Yt[Ht++]=St.high.high>>16&255,Yt[Ht++]=St.high.high>>24&255,new qt(Yt)}toString(){let B,me=0;const de=new Array(36);for(let Xn=0;Xn<de.length;Xn++)de[Xn]=0;let je,Ve,bt,$t=0,Ye=!1,zt={parts:[0,0,0,0]};const Mt=[];$t=0;const ut=this.bytes,At=ut[$t++]|ut[$t++]<<8|ut[$t++]<<16|ut[$t++]<<24,Xt=ut[$t++]|ut[$t++]<<8|ut[$t++]<<16|ut[$t++]<<24,Jt=ut[$t++]|ut[$t++]<<8|ut[$t++]<<16|ut[$t++]<<24,On=ut[$t++]|ut[$t++]<<8|ut[$t++]<<16|ut[$t++]<<24;$t=0,(new he(At,Xt),new he(Jt,On)).lessThan(he.ZERO)&&Mt.push("-");const Yn=On>>26&31;if(Yn>>3==3){if(Yn===30)return Mt.join("")+"Infinity";if(Yn===31)return"NaN";B=On>>15&16383,je=8+(On>>14&1)}else je=On>>14&7,B=On>>17&16383;const Kn=B-6176;if(zt.parts[0]=(16383&On)+((15&je)<<14),zt.parts[1]=Jt,zt.parts[2]=Xt,zt.parts[3]=At,zt.parts[0]===0&&zt.parts[1]===0&&zt.parts[2]===0&&zt.parts[3]===0)Ye=!0;else for(bt=3;bt>=0;bt--){let Xn=0;const Ht=ft(zt);if(zt=Ht.quotient,Xn=Ht.rem.low,Xn)for(Ve=8;Ve>=0;Ve--)de[9*bt+Ve]=Xn%10,Xn=Math.floor(Xn/10)}if(Ye)me=1,de[$t]=0;else for(me=36;!de[$t];)me-=1,$t+=1;const kn=me-1+Kn;if(kn>=34||kn<=-7||Kn>0){if(me>34)return Mt.push("0"),Kn>0?Mt.push(`E+${Kn}`):Kn<0&&Mt.push(`E${Kn}`),Mt.join("");Mt.push(`${de[$t++]}`),me-=1,me&&Mt.push(".");for(let Xn=0;Xn<me;Xn++)Mt.push(`${de[$t++]}`);Mt.push("E"),kn>0?Mt.push(`+${kn}`):Mt.push(`${kn}`)}else if(Kn>=0)for(let Xn=0;Xn<me;Xn++)Mt.push(`${de[$t++]}`);else{let Xn=me+Kn;if(Xn>0)for(let Ht=0;Ht<Xn;Ht++)Mt.push(`${de[$t++]}`);else Mt.push("0");for(Mt.push(".");Xn++<0;)Mt.push("0");for(let Ht=0;Ht<me-Math.max(Xn-1,0);Ht++)Mt.push(`${de[$t++]}`)}return Mt.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(B){return qt.fromString(B.$numberDecimal)}inspect(B,me,de){return de??(de=b),`new Decimal128(${de(this.toString(),me)})`}}class gn extends U{get _bsontype(){return"Double"}constructor(B){super(),B instanceof Number&&(B=B.valueOf()),this.value=+B}static fromString(B){const me=Number(B);if(B==="NaN")return new gn(NaN);if(B==="Infinity")return new gn(1/0);if(B==="-Infinity")return new gn(-1/0);if(!Number.isFinite(me))throw new k(`Input: ${B} is not representable as a Double`);if(B.trim()!==B)throw new k(`Input: '${B}' contains whitespace`);if(B==="")throw new k("Input is an empty string");if(/[^-0-9.+eE]/.test(B))throw new k(`Input: '${B}' is not in decimal or exponential notation`);return new gn(me)}valueOf(){return this.value}toJSON(){return this.value}toString(B){return this.value.toString(B)}toExtendedJSON(B){return B&&(B.legacy||B.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(B,me){const de=parseFloat(B.$numberDouble);return me&&me.relaxed?de:new gn(de)}inspect(B,me,de){return de??(de=b),`new Double(${de(this.value,me)})`}}class dn extends U{get _bsontype(){return"Int32"}constructor(B){super(),B instanceof Number&&(B=B.valueOf()),this.value=0|+B}static fromString(B){const me=we(B),de=Number(B);if(p<de)throw new k(`Input: '${B}' is larger than the maximum value for Int32`);if(_>de)throw new k(`Input: '${B}' is smaller than the minimum value for Int32`);if(!Number.isSafeInteger(de))throw new k(`Input: '${B}' is not a safe integer`);if(de.toString()!==me)throw new k(`Input: '${B}' is not a valid Int32 string`);return new dn(de)}valueOf(){return this.value}toString(B){return this.value.toString(B)}toJSON(){return this.value}toExtendedJSON(B){return B&&(B.relaxed||B.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(B,me){return me&&me.relaxed?parseInt(B.$numberInt,10):new dn(B.$numberInt)}inspect(B,me,de){return de??(de=b),`new Int32(${de(this.value,me)})`}}class un extends U{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new un}inspect(){return"new MaxKey()"}}class ge extends U{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new ge}inspect(){return"new MinKey()"}}let ve=null;const Fe=new WeakMap;class qe extends U{get _bsontype(){return"ObjectId"}constructor(B){let me;if(super(),typeof B=="object"&&B&&"id"in B){if(typeof B.id!="string"&&!ArrayBuffer.isView(B.id))throw new k("Argument passed in must have an id that is of type string or Buffer");me="toHexString"in B&&typeof B.toHexString=="function"?M.fromHex(B.toHexString()):B.id}else me=B;if(me==null||typeof me=="number")this.buffer=qe.generate(typeof me=="number"?me:void 0);else if(ArrayBuffer.isView(me)&&me.byteLength===12)this.buffer=M.toLocalBufferType(me);else{if(typeof me!="string")throw new k("Argument passed in does not match the accepted types");if(!qe.validateHexString(me))throw new k("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");this.buffer=M.fromHex(me),qe.cacheHexString&&Fe.set(this,me)}}get id(){return this.buffer}set id(B){this.buffer=B,qe.cacheHexString&&Fe.set(this,M.toHex(B))}static validateHexString(B){if((B==null?void 0:B.length)!==24)return!1;for(let me=0;me<24;me++){const de=B.charCodeAt(me);if(!(de>=48&&de<=57||de>=97&&de<=102||de>=65&&de<=70))return!1}return!0}toHexString(){if(qe.cacheHexString){const me=Fe.get(this);if(me)return me}const B=M.toHex(this.id);return qe.cacheHexString&&Fe.set(this,B),B}static getInc(){return qe.index=(qe.index+1)%16777215}static generate(B){typeof B!="number"&&(B=Math.floor(Date.now()/1e3));const me=qe.getInc(),de=M.allocateUnsafe(12);return ie.setInt32BE(de,0,B),ve===null&&(ve=M.randomBytes(5)),de[4]=ve[0],de[5]=ve[1],de[6]=ve[2],de[7]=ve[3],de[8]=ve[4],de[11]=255&me,de[10]=me>>8&255,de[9]=me>>16&255,de}toString(B){return B==="base64"?M.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}static is(B){return B!=null&&typeof B=="object"&&"_bsontype"in B&&B._bsontype==="ObjectId"}equals(B){if(B==null)return!1;if(qe.is(B))return this.buffer[11]===B.buffer[11]&&M.equals(this.buffer,B.buffer);if(typeof B=="string")return B.toLowerCase()===this.toHexString();if(typeof B=="object"&&typeof B.toHexString=="function"){const me=B.toHexString(),de=this.toHexString();return typeof me=="string"&&me.toLowerCase()===de}return!1}getTimestamp(){const B=new Date,me=ie.getUint32BE(this.buffer,0);return B.setTime(1e3*Math.floor(me)),B}static createPk(){return new qe}serializeInto(B,me){return B[me]=this.buffer[0],B[me+1]=this.buffer[1],B[me+2]=this.buffer[2],B[me+3]=this.buffer[3],B[me+4]=this.buffer[4],B[me+5]=this.buffer[5],B[me+6]=this.buffer[6],B[me+7]=this.buffer[7],B[me+8]=this.buffer[8],B[me+9]=this.buffer[9],B[me+10]=this.buffer[10],B[me+11]=this.buffer[11],12}static createFromTime(B){const me=M.allocate(12);for(let de=11;de>=4;de--)me[de]=0;return ie.setInt32BE(me,0,B),new qe(me)}static createFromHexString(B){if((B==null?void 0:B.length)!==24)throw new k("hex string must be 24 characters");return new qe(M.fromHex(B))}static createFromBase64(B){if((B==null?void 0:B.length)!==16)throw new k("base64 string must be 16 characters");return new qe(M.fromBase64(B))}static isValid(B){if(B==null)return!1;if(typeof B=="string")return qe.validateHexString(B);try{return new qe(B),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(B){return new qe(B.$oid)}isCached(){return qe.cacheHexString&&Fe.has(this)}inspect(B,me,de){return de??(de=b),`new ObjectId(${de(this.toHexString(),me)})`}}function st(Y,B,me){let de=5;if(Array.isArray(Y))for(let je=0;je<Y.length;je++)de+=Dt(je.toString(),Y[je],B,!0,me);else{typeof(Y==null?void 0:Y.toBSON)=="function"&&(Y=Y.toBSON());for(const je of Object.keys(Y))de+=Dt(je,Y[je],B,!1,me)}return de}function Dt(Y,B,me=!1,de=!1,je=!1){switch(typeof(B==null?void 0:B.toBSON)=="function"&&(B=B.toBSON()),typeof B){case"string":return 1+M.utf8ByteLength(Y)+1+4+M.utf8ByteLength(B)+1;case"number":return Math.floor(B)===B&&B>=R&&B<=A&&B>=_&&B<=p?(Y!=null?M.utf8ByteLength(Y)+1:0)+5:(Y!=null?M.utf8ByteLength(Y)+1:0)+9;case"undefined":return de||!je?(Y!=null?M.utf8ByteLength(Y)+1:0)+1:0;case"boolean":return(Y!=null?M.utf8ByteLength(Y)+1:0)+2;case"object":if(B!=null&&typeof B._bsontype=="string"&&B[m]!==6)throw new D;if(B==null||B._bsontype==="MinKey"||B._bsontype==="MaxKey")return(Y!=null?M.utf8ByteLength(Y)+1:0)+1;if(B._bsontype==="ObjectId")return(Y!=null?M.utf8ByteLength(Y)+1:0)+13;if(B instanceof Date||h(B))return(Y!=null?M.utf8ByteLength(Y)+1:0)+9;if(ArrayBuffer.isView(B)||B instanceof ArrayBuffer||v(B))return(Y!=null?M.utf8ByteLength(Y)+1:0)+6+B.byteLength;if(B._bsontype==="Long"||B._bsontype==="Double"||B._bsontype==="Timestamp")return(Y!=null?M.utf8ByteLength(Y)+1:0)+9;if(B._bsontype==="Decimal128")return(Y!=null?M.utf8ByteLength(Y)+1:0)+17;if(B._bsontype==="Code")return B.scope!=null&&Object.keys(B.scope).length>0?(Y!=null?M.utf8ByteLength(Y)+1:0)+1+4+4+M.utf8ByteLength(B.code.toString())+1+st(B.scope,me,je):(Y!=null?M.utf8ByteLength(Y)+1:0)+1+4+M.utf8ByteLength(B.code.toString())+1;if(B._bsontype==="Binary"){const Ve=B;return Ve.sub_type===$e.SUBTYPE_BYTE_ARRAY?(Y!=null?M.utf8ByteLength(Y)+1:0)+(Ve.position+1+4+1+4):(Y!=null?M.utf8ByteLength(Y)+1:0)+(Ve.position+1+4+1)}if(B._bsontype==="Symbol")return(Y!=null?M.utf8ByteLength(Y)+1:0)+M.utf8ByteLength(B.value)+4+1+1;if(B._bsontype==="DBRef"){const Ve=Object.assign({$ref:B.collection,$id:B.oid},B.fields);return B.db!=null&&(Ve.$db=B.db),(Y!=null?M.utf8ByteLength(Y)+1:0)+1+st(Ve,me,je)}return B instanceof RegExp||S(B)?(Y!=null?M.utf8ByteLength(Y)+1:0)+1+M.utf8ByteLength(B.source)+1+(B.global?1:0)+(B.ignoreCase?1:0)+(B.multiline?1:0)+1:B._bsontype==="BSONRegExp"?(Y!=null?M.utf8ByteLength(Y)+1:0)+1+M.utf8ByteLength(B.pattern)+1+M.utf8ByteLength(B.options)+1:(Y!=null?M.utf8ByteLength(Y)+1:0)+st(B,me,je)+1;case"function":return me?(Y!=null?M.utf8ByteLength(Y)+1:0)+1+4+M.utf8ByteLength(B.toString())+1:0;case"bigint":return(Y!=null?M.utf8ByteLength(Y)+1:0)+9;case"symbol":return 0;default:throw new k("Unrecognized JS type: "+typeof B)}}qe.index=Math.floor(16777215*Math.random());class Wt extends U{get _bsontype(){return"BSONRegExp"}constructor(B,me){if(super(),this.pattern=B,this.options=(me??"").split("").sort().join(""),this.pattern.indexOf("\0")!==-1)throw new k(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new k(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let de=0;de<this.options.length;de++)if(this.options[de]!=="i"&&this.options[de]!=="m"&&this.options[de]!=="x"&&this.options[de]!=="l"&&this.options[de]!=="s"&&this.options[de]!=="u")throw new k(`The regular expression option [${this.options[de]}] is not supported`)}static parseOptions(B){return B?B.split("").sort().join(""):""}toExtendedJSON(B){return(B=B||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(B){if("$regex"in B){if(typeof B.$regex=="string")return new Wt(B.$regex,Wt.parseOptions(B.$options));if(B.$regex._bsontype==="BSONRegExp")return B}if("$regularExpression"in B)return new Wt(B.$regularExpression.pattern,Wt.parseOptions(B.$regularExpression.options));throw new k(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(B)}`)}inspect(B,me,de){const je=function(Ve){if(Ve!=null&&typeof Ve=="object"&&"stylize"in Ve&&typeof Ve.stylize=="function")return Ve.stylize}(me)??(Ve=>Ve);return de??(de=b),`new BSONRegExp(${je(de(this.pattern),"regexp")}, ${je(de(this.options),"regexp")})`}}class pn extends U{get _bsontype(){return"BSONSymbol"}constructor(B){super(),this.value=B}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(B){return new pn(B.$symbol)}inspect(B,me,de){return de??(de=b),`new BSONSymbol(${de(this.value,me)})`}}const bn=he;class sr extends bn{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(B){if(B==null)super(0,0,!0);else if(typeof B=="bigint")super(B,!0);else if(he.isLong(B))super(B.low,B.high,!0);else{if(typeof B!="object"||!("t"in B)||!("i"in B))throw new k("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }");{if(typeof B.t!="number"&&(typeof B.t!="object"||B.t._bsontype!=="Int32"))throw new k("Timestamp constructed from { t, i } must provide t as a number");if(typeof B.i!="number"&&(typeof B.i!="object"||B.i._bsontype!=="Int32"))throw new k("Timestamp constructed from { t, i } must provide i as a number");const me=Number(B.t),de=Number(B.i);if(me<0||Number.isNaN(me))throw new k("Timestamp constructed from { t, i } must provide a positive t");if(de<0||Number.isNaN(de))throw new k("Timestamp constructed from { t, i } must provide a positive i");if(me>4294967295)throw new k("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(de>4294967295)throw new k("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(de,me,!0)}}}toJSON(){return{$timestamp:this.toString()}}static fromInt(B){return new sr(he.fromInt(B,!0))}static fromNumber(B){return new sr(he.fromNumber(B,!0))}static fromBits(B,me){return new sr({i:B,t:me})}static fromString(B,me){return new sr(he.fromString(B,!0,me))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(B){const me=he.isLong(B.$timestamp.i)?B.$timestamp.i.getLowBitsUnsigned():B.$timestamp.i,de=he.isLong(B.$timestamp.t)?B.$timestamp.t.getLowBitsUnsigned():B.$timestamp.t;return new sr({t:de,i:me})}inspect(B,me,de){return de??(de=b),`new Timestamp({ t: ${de(this.t,me)}, i: ${de(this.i,me)} })`}}sr.MAX_VALUE=he.MAX_UNSIGNED_VALUE;const Pn=he.fromNumber(A),Bn=he.fromNumber(R);function ci(Y,B,me){const de=(B=B??{})&&B.index?B.index:0,je=ie.getInt32LE(Y,de);if(je<5)throw new k(`bson size must be >= 5, is ${je}`);if(B.allowObjectSmallerThanBufferSize&&Y.length<je)throw new k(`buffer length ${Y.length} must be >= bson size ${je}`);if(!B.allowObjectSmallerThanBufferSize&&Y.length!==je)throw new k(`buffer length ${Y.length} must === bson size ${je}`);if(je+de>Y.byteLength)throw new k(`(bson size ${je} + options.index ${de} must be <= buffer length ${Y.byteLength})`);if(Y[de+je-1]!==0)throw new k("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return Se(Y,de,B,me)}const pe=/^\$ref$|^\$id$|^\$db$/;function Se(Y,B,me,de=!1){const je=me.fieldsAsRaw==null?null:me.fieldsAsRaw,Ve=me.raw!=null&&me.raw,bt=typeof me.bsonRegExp=="boolean"&&me.bsonRegExp,$t=me.promoteBuffers??!1,Ye=me.promoteLongs??!0,zt=me.promoteValues??!0,Mt=me.useBigInt64??!1;if(Mt&&!zt)throw new k("Must either request bigint or Long for int64 deserialization");if(Mt&&!Ye)throw new k("Must either request bigint or Long for int64 deserialization");let ut,At,Xt=!0;const Jt=(me.validation==null?{utf8:!0}:me.validation).utf8;if(typeof Jt=="boolean")ut=Jt;else{Xt=!1;const Ht=Object.keys(Jt).map(function(nn){return Jt[nn]});if(Ht.length===0)throw new k("UTF-8 validation setting cannot be empty");if(typeof Ht[0]!="boolean")throw new k("Invalid UTF-8 validation option, must specify boolean values");if(ut=Ht[0],!Ht.every(nn=>nn===ut))throw new k("Invalid UTF-8 validation option - keys must be all true or all false")}if(!Xt){At=new Set;for(const Ht of Object.keys(Jt))At.add(Ht)}const On=B;if(Y.length<5)throw new k("corrupt bson message < 5 bytes long");const Yn=ie.getInt32LE(Y,B);if(B+=4,Yn<5||Yn>Y.length)throw new k("corrupt bson message");const Kn=de?[]:{};let kn=0,Xn=!de&&null;for(;;){const Ht=Y[B++];if(Ht===0)break;let nn=B;for(;Y[nn]!==0&&nn<Y.length;)nn++;if(nn>=Y.byteLength)throw new k("Bad BSON Document: illegal CString");const Fr=de?kn++:M.toUTF8(Y,B,nn,!1);let Nn,Or=!0;if(Or=Xt||At!=null&&At.has(Fr)?ut:!ut,Xn!==!1&&Fr[0]==="$"&&(Xn=pe.test(Fr)),B=nn+1,Ht===2){const St=ie.getInt32LE(Y,B);if(B+=4,St<=0||St>Y.length-B||Y[B+St-1]!==0)throw new k("bad string length in bson");Nn=M.toUTF8(Y,B,B+St-1,Or),B+=St}else if(Ht===7){const St=M.allocateUnsafe(12);for(let Yt=0;Yt<12;Yt++)St[Yt]=Y[B+Yt];Nn=new qe(St),B+=12}else if(Ht===16&&zt===!1)Nn=new dn(ie.getInt32LE(Y,B)),B+=4;else if(Ht===16)Nn=ie.getInt32LE(Y,B),B+=4;else if(Ht===1)Nn=ie.getFloat64LE(Y,B),B+=8,zt===!1&&(Nn=new gn(Nn));else if(Ht===9){const St=ie.getInt32LE(Y,B),Yt=ie.getInt32LE(Y,B+4);B+=8,Nn=new Date(new he(St,Yt).toNumber())}else if(Ht===8){if(Y[B]!==0&&Y[B]!==1)throw new k("illegal boolean type value");Nn=Y[B++]===1}else if(Ht===3){const St=B,Yt=ie.getInt32LE(Y,B);if(Yt<=0||Yt>Y.length-B)throw new k("bad embedded document length in bson");if(Ve)Nn=Y.subarray(B,B+Yt);else{let Gt=me;Xt||(Gt={...me,validation:{utf8:Or}}),Nn=Se(Y,St,Gt,!1)}B+=Yt}else if(Ht===4){const St=B,Yt=ie.getInt32LE(Y,B);let Gt=me;const In=B+Yt;if(je&&je[Fr]&&(Gt={...me,raw:!0}),Xt||(Gt={...Gt,validation:{utf8:Or}}),Nn=Se(Y,St,Gt,!0),Y[(B+=Yt)-1]!==0)throw new k("invalid array terminator byte");if(B!==In)throw new k("corrupted array bson")}else if(Ht===6)Nn=void 0;else if(Ht===10)Nn=null;else if(Ht===18)if(Mt)Nn=ie.getBigInt64LE(Y,B),B+=8;else{const St=ie.getInt32LE(Y,B),Yt=ie.getInt32LE(Y,B+4);B+=8;const Gt=new he(St,Yt);Nn=Ye&&zt===!0&&Gt.lessThanOrEqual(Pn)&&Gt.greaterThanOrEqual(Bn)?Gt.toNumber():Gt}else if(Ht===19){const St=M.allocateUnsafe(16);for(let Yt=0;Yt<16;Yt++)St[Yt]=Y[B+Yt];B+=16,Nn=new qt(St)}else if(Ht===5){let St=ie.getInt32LE(Y,B);B+=4;const Yt=St,Gt=Y[B++];if(St<0)throw new k("Negative binary type element size found");if(St>Y.byteLength)throw new k("Binary type size larger than document size");if(Gt===$e.SUBTYPE_BYTE_ARRAY){if(St=ie.getInt32LE(Y,B),B+=4,St<0)throw new k("Negative binary type element size found for subtype 0x02");if(St>Yt-4)throw new k("Binary type with subtype 0x02 contains too long binary size");if(St<Yt-4)throw new k("Binary type with subtype 0x02 contains too short binary size")}$t&&zt?Nn=M.toLocalBufferType(Y.subarray(B,B+St)):(Nn=new $e(Y.subarray(B,B+St),Gt),Gt===4&&_e.isValid(Nn)&&(Nn=Nn.toUUID())),B+=St}else if(Ht===11&&bt===!1){for(nn=B;Y[nn]!==0&&nn<Y.length;)nn++;if(nn>=Y.length)throw new k("Bad BSON Document: illegal CString");const St=M.toUTF8(Y,B,nn,!1);for(nn=B=nn+1;Y[nn]!==0&&nn<Y.length;)nn++;if(nn>=Y.length)throw new k("Bad BSON Document: illegal CString");const Yt=M.toUTF8(Y,B,nn,!1);B=nn+1;const Gt=new Array(Yt.length);for(nn=0;nn<Yt.length;nn++)switch(Yt[nn]){case"m":Gt[nn]="m";break;case"s":Gt[nn]="g";break;case"i":Gt[nn]="i"}Nn=new RegExp(St,Gt.join(""))}else if(Ht===11&&bt===!0){for(nn=B;Y[nn]!==0&&nn<Y.length;)nn++;if(nn>=Y.length)throw new k("Bad BSON Document: illegal CString");const St=M.toUTF8(Y,B,nn,!1);for(nn=B=nn+1;Y[nn]!==0&&nn<Y.length;)nn++;if(nn>=Y.length)throw new k("Bad BSON Document: illegal CString");const Yt=M.toUTF8(Y,B,nn,!1);B=nn+1,Nn=new Wt(St,Yt)}else if(Ht===14){const St=ie.getInt32LE(Y,B);if(B+=4,St<=0||St>Y.length-B||Y[B+St-1]!==0)throw new k("bad string length in bson");const Yt=M.toUTF8(Y,B,B+St-1,Or);Nn=zt?Yt:new pn(Yt),B+=St}else if(Ht===17)Nn=new sr({i:ie.getUint32LE(Y,B),t:ie.getUint32LE(Y,B+4)}),B+=8;else if(Ht===255)Nn=new ge;else if(Ht===127)Nn=new un;else if(Ht===13){const St=ie.getInt32LE(Y,B);if(B+=4,St<=0||St>Y.length-B||Y[B+St-1]!==0)throw new k("bad string length in bson");const Yt=M.toUTF8(Y,B,B+St-1,Or);Nn=new q(Yt),B+=St}else if(Ht===15){const St=ie.getInt32LE(Y,B);if(B+=4,St<13)throw new k("code_w_scope total size shorter minimum expected length");const Yt=ie.getInt32LE(Y,B);if(B+=4,Yt<=0||Yt>Y.length-B||Y[B+Yt-1]!==0)throw new k("bad string length in bson");const Gt=M.toUTF8(Y,B,B+Yt-1,Or),In=B+=Yt,Ln=ie.getInt32LE(Y,B),br=Se(Y,In,me,!1);if(B+=Ln,St<8+Ln+Yt)throw new k("code_w_scope total size is too short, truncating scope");if(St>8+Ln+Yt)throw new k("code_w_scope total size is too long, clips outer document");Nn=new q(Gt,br)}else{if(Ht!==12)throw new k(`Detected unknown BSON type ${Ht.toString(16)} for fieldname "${Fr}"`);{const St=ie.getInt32LE(Y,B);if(B+=4,St<=0||St>Y.length-B||Y[B+St-1]!==0)throw new k("bad string length in bson");const Yt=M.toUTF8(Y,B,B+St-1,Or);B+=St;const Gt=M.allocateUnsafe(12);for(let Ln=0;Ln<12;Ln++)Gt[Ln]=Y[B+Ln];const In=new qe(Gt);B+=12,Nn=new fe(Yt,In)}}Fr==="__proto__"?Object.defineProperty(Kn,Fr,{value:Nn,writable:!0,enumerable:!0,configurable:!0}):Kn[Fr]=Nn}if(Yn!==B-On)throw de?new k("corrupt array bson"):new k("corrupt object bson");if(!Xn)return Kn;if(re(Kn)){const Ht=Object.assign({},Kn);return delete Ht.$ref,delete Ht.$id,delete Ht.$db,new fe(Kn.$ref,Kn.$id,Kn.$db,Ht)}return Kn}const Ie=/\x00/,Me=new Set(["$db","$ref","$id","$clusterTime"]);function Be(Y,B,me,de){Y[de++]=2,Y[(de=de+M.encodeUTF8Into(Y,B,de)+1)-1]=0;const je=M.encodeUTF8Into(Y,me,de+4);return ie.setInt32LE(Y,de,je+1),de=de+4+je,Y[de++]=0,de}function Ge(Y,B,me,de){const je=!Object.is(me,-0)&&Number.isSafeInteger(me)&&me<=p&&me>=_?16:1;return Y[de++]=je,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,de+(je===16?ie.setInt32LE(Y,de,me):ie.setFloat64LE(Y,de,me))}function Xe(Y,B,me,de){return Y[de++]=18,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,de+ie.setBigInt64LE(Y,de,me)}function Je(Y,B,me,de){return Y[de++]=10,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,de}function xt(Y,B,me,de){return Y[de++]=8,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,Y[de++]=me?1:0,de}function nt(Y,B,me,de){Y[de++]=9,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;const je=he.fromNumber(me.getTime()),Ve=je.getLowBits(),bt=je.getHighBits();return(de+=ie.setInt32LE(Y,de,Ve))+ie.setInt32LE(Y,de,bt)}function ct(Y,B,me,de){if(Y[de++]=11,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,me.source&&me.source.match(Ie)!=null)throw new k("value "+me.source+" must not contain null bytes");return de+=M.encodeUTF8Into(Y,me.source,de),Y[de++]=0,me.ignoreCase&&(Y[de++]=105),me.global&&(Y[de++]=115),me.multiline&&(Y[de++]=109),Y[de++]=0,de}function mt(Y,B,me,de){if(Y[de++]=11,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,me.pattern.match(Ie)!=null)throw new k("pattern "+me.pattern+" must not contain null bytes");de+=M.encodeUTF8Into(Y,me.pattern,de),Y[de++]=0;const je=me.options.split("").sort().join("");return de+=M.encodeUTF8Into(Y,je,de),Y[de++]=0,de}function yt(Y,B,me,de){return me===null?Y[de++]=10:me._bsontype==="MinKey"?Y[de++]=255:Y[de++]=127,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,de}function Et(Y,B,me,de){return Y[de++]=7,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,de+me.serializeInto(Y,de)}function jt(Y,B,me,de){Y[de++]=5,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;const je=me.length;if(de+=ie.setInt32LE(Y,de,je),Y[de++]=0,je<=16)for(let Ve=0;Ve<je;Ve++)Y[de+Ve]=me[Ve];else Y.set(me,de);return de+je}function Ut(Y,B,me,de,je,Ve,bt,$t,Ye){if(Ye.has(me))throw new k("Cannot convert circular structure to BSON");Ye.add(me),Y[de++]=Array.isArray(me)?4:3,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;const zt=ar(Y,me,je,de,Ve+1,bt,$t,Ye);return Ye.delete(me),zt}function Ct(Y,B,me,de){Y[de++]=19,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;for(let je=0;je<16;je++)Y[de+je]=me.bytes[je];return de+16}function ln(Y,B,me,de){Y[de++]=me._bsontype==="Long"?18:17,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;const je=me.getLowBits(),Ve=me.getHighBits();return(de+=ie.setInt32LE(Y,de,je))+ie.setInt32LE(Y,de,Ve)}function yn(Y,B,me,de){return me=me.valueOf(),Y[de++]=16,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,de+ie.setInt32LE(Y,de,me)}function $n(Y,B,me,de){return Y[de++]=1,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0,de+ie.setFloat64LE(Y,de,me.value)}function sn(Y,B,me,de){Y[de++]=13,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;const je=me.toString(),Ve=M.encodeUTF8Into(Y,je,de+4)+1;return ie.setInt32LE(Y,de,Ve),de=de+4+Ve-1,Y[de++]=0,de}function wn(Y,B,me,de,je=!1,Ve=0,bt=!1,$t=!0,Ye){if(me.scope&&typeof me.scope=="object"){Y[de++]=15,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;let zt=de;const Mt=me.code;de+=4;const ut=M.encodeUTF8Into(Y,Mt,de+4)+1;ie.setInt32LE(Y,de,ut),Y[de+4+ut-1]=0,de=de+ut+4;const At=ar(Y,me.scope,je,de,Ve+1,bt,$t,Ye);de=At-1;const Xt=At-zt;zt+=ie.setInt32LE(Y,zt,Xt),Y[de++]=0}else{Y[de++]=13,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;const zt=me.code.toString(),Mt=M.encodeUTF8Into(Y,zt,de+4)+1;ie.setInt32LE(Y,de,Mt),de=de+4+Mt-1,Y[de++]=0}return de}function jn(Y,B,me,de){Y[de++]=5,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;const je=me.buffer;let Ve=me.position;if(me.sub_type===$e.SUBTYPE_BYTE_ARRAY&&(Ve+=4),de+=ie.setInt32LE(Y,de,Ve),Y[de++]=me.sub_type,me.sub_type===$e.SUBTYPE_BYTE_ARRAY&&(Ve-=4,de+=ie.setInt32LE(Y,de,Ve)),me.sub_type===$e.SUBTYPE_VECTOR&&ce(me),Ve<=16)for(let bt=0;bt<Ve;bt++)Y[de+bt]=je[bt];else Y.set(je,de);return de+me.position}function _n(Y,B,me,de){Y[de++]=14,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;const je=M.encodeUTF8Into(Y,me.value,de+4)+1;return ie.setInt32LE(Y,de,je),de=de+4+je-1,Y[de++]=0,de}function hr(Y,B,me,de,je,Ve,bt){Y[de++]=3,de+=M.encodeUTF8Into(Y,B,de),Y[de++]=0;let $t=de,Ye={$ref:me.collection||me.namespace,$id:me.oid};me.db!=null&&(Ye.$db=me.db),Ye=Object.assign(Ye,me.fields);const zt=ar(Y,Ye,!1,de,je+1,Ve,!0,bt),Mt=zt-$t;return $t+=ie.setInt32LE(Y,de,Mt),zt}function ar(Y,B,me,de,je,Ve,bt,$t){if($t==null){if(B==null)return Y[0]=5,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,5;if(Array.isArray(B))throw new k("serialize does not support an array as the root input");if(typeof B!="object")throw new k("serialize does not support non-object as the root input");if("_bsontype"in B&&typeof B._bsontype=="string")throw new k("BSON types cannot be serialized as a document");if(h(B)||S(B)||$(B)||v(B))throw new k("date, regexp, typedarray, and arraybuffer cannot be BSON documents");$t=new Set}$t.add(B);let Ye=de+4;if(Array.isArray(B))for(let Mt=0;Mt<B.length;Mt++){const ut=`${Mt}`;let At=B[Mt];typeof(At==null?void 0:At.toBSON)=="function"&&(At=At.toBSON());const Xt=typeof At;if(At===void 0)Ye=Je(Y,ut,0,Ye);else if(At===null)Ye=Je(Y,ut,0,Ye);else if(Xt==="string")Ye=Be(Y,ut,At,Ye);else if(Xt==="number")Ye=Ge(Y,ut,At,Ye);else if(Xt==="bigint")Ye=Xe(Y,ut,At,Ye);else if(Xt==="boolean")Ye=xt(Y,ut,At,Ye);else if(Xt==="object"&&At._bsontype==null)Ye=At instanceof Date||h(At)?nt(Y,ut,At,Ye):At instanceof Uint8Array||$(At)?jt(Y,ut,At,Ye):At instanceof RegExp||S(At)?ct(Y,ut,At,Ye):Ut(Y,ut,At,Ye,me,je,Ve,bt,$t);else if(Xt==="object"){if(At[m]!==6)throw new D;if(At._bsontype==="ObjectId")Ye=Et(Y,ut,At,Ye);else if(At._bsontype==="Decimal128")Ye=Ct(Y,ut,At,Ye);else if(At._bsontype==="Long"||At._bsontype==="Timestamp")Ye=ln(Y,ut,At,Ye);else if(At._bsontype==="Double")Ye=$n(Y,ut,At,Ye);else if(At._bsontype==="Code")Ye=wn(Y,ut,At,Ye,me,je,Ve,bt,$t);else if(At._bsontype==="Binary")Ye=jn(Y,ut,At,Ye);else if(At._bsontype==="BSONSymbol")Ye=_n(Y,ut,At,Ye);else if(At._bsontype==="DBRef")Ye=hr(Y,ut,At,Ye,je,Ve,$t);else if(At._bsontype==="BSONRegExp")Ye=mt(Y,ut,At,Ye);else if(At._bsontype==="Int32")Ye=yn(Y,ut,At,Ye);else if(At._bsontype==="MinKey"||At._bsontype==="MaxKey")Ye=yt(Y,ut,At,Ye);else if(At._bsontype!==void 0)throw new k(`Unrecognized or invalid _bsontype: ${String(At._bsontype)}`)}else Xt==="function"&&Ve&&(Ye=sn(Y,ut,At,Ye))}else if(B instanceof Map||E(B)){const Mt=B.entries();let ut=!1;for(;!ut;){const At=Mt.next();if(ut=!!At.done,ut)continue;const Xt=At.value?At.value[0]:void 0;let Jt=At.value?At.value[1]:void 0;typeof(Jt==null?void 0:Jt.toBSON)=="function"&&(Jt=Jt.toBSON());const On=typeof Jt;if(typeof Xt=="string"&&!Me.has(Xt)){if(Xt.match(Ie)!=null)throw new k("key "+Xt+" must not contain null bytes");if(me){if(Xt[0]==="$")throw new k("key "+Xt+" must not start with '$'");if(Xt.includes("."))throw new k("key "+Xt+" must not contain '.'")}}if(Jt===void 0)bt===!1&&(Ye=Je(Y,Xt,0,Ye));else if(Jt===null)Ye=Je(Y,Xt,0,Ye);else if(On==="string")Ye=Be(Y,Xt,Jt,Ye);else if(On==="number")Ye=Ge(Y,Xt,Jt,Ye);else if(On==="bigint")Ye=Xe(Y,Xt,Jt,Ye);else if(On==="boolean")Ye=xt(Y,Xt,Jt,Ye);else if(On==="object"&&Jt._bsontype==null)Ye=Jt instanceof Date||h(Jt)?nt(Y,Xt,Jt,Ye):Jt instanceof Uint8Array||$(Jt)?jt(Y,Xt,Jt,Ye):Jt instanceof RegExp||S(Jt)?ct(Y,Xt,Jt,Ye):Ut(Y,Xt,Jt,Ye,me,je,Ve,bt,$t);else if(On==="object"){if(Jt[m]!==6)throw new D;if(Jt._bsontype==="ObjectId")Ye=Et(Y,Xt,Jt,Ye);else if(Jt._bsontype==="Decimal128")Ye=Ct(Y,Xt,Jt,Ye);else if(Jt._bsontype==="Long"||Jt._bsontype==="Timestamp")Ye=ln(Y,Xt,Jt,Ye);else if(Jt._bsontype==="Double")Ye=$n(Y,Xt,Jt,Ye);else if(Jt._bsontype==="Code")Ye=wn(Y,Xt,Jt,Ye,me,je,Ve,bt,$t);else if(Jt._bsontype==="Binary")Ye=jn(Y,Xt,Jt,Ye);else if(Jt._bsontype==="BSONSymbol")Ye=_n(Y,Xt,Jt,Ye);else if(Jt._bsontype==="DBRef")Ye=hr(Y,Xt,Jt,Ye,je,Ve,$t);else if(Jt._bsontype==="BSONRegExp")Ye=mt(Y,Xt,Jt,Ye);else if(Jt._bsontype==="Int32")Ye=yn(Y,Xt,Jt,Ye);else if(Jt._bsontype==="MinKey"||Jt._bsontype==="MaxKey")Ye=yt(Y,Xt,Jt,Ye);else if(Jt._bsontype!==void 0)throw new k(`Unrecognized or invalid _bsontype: ${String(Jt._bsontype)}`)}else On==="function"&&Ve&&(Ye=sn(Y,Xt,Jt,Ye))}}else{if(typeof(B==null?void 0:B.toBSON)=="function"&&(B=B.toBSON())!=null&&typeof B!="object")throw new k("toBSON function did not return an object");for(const Mt of Object.keys(B)){let ut=B[Mt];typeof(ut==null?void 0:ut.toBSON)=="function"&&(ut=ut.toBSON());const At=typeof ut;if(typeof Mt=="string"&&!Me.has(Mt)){if(Mt.match(Ie)!=null)throw new k("key "+Mt+" must not contain null bytes");if(me){if(Mt[0]==="$")throw new k("key "+Mt+" must not start with '$'");if(Mt.includes("."))throw new k("key "+Mt+" must not contain '.'")}}if(ut===void 0)bt===!1&&(Ye=Je(Y,Mt,0,Ye));else if(ut===null)Ye=Je(Y,Mt,0,Ye);else if(At==="string")Ye=Be(Y,Mt,ut,Ye);else if(At==="number")Ye=Ge(Y,Mt,ut,Ye);else if(At==="bigint")Ye=Xe(Y,Mt,ut,Ye);else if(At==="boolean")Ye=xt(Y,Mt,ut,Ye);else if(At==="object"&&ut._bsontype==null)Ye=ut instanceof Date||h(ut)?nt(Y,Mt,ut,Ye):ut instanceof Uint8Array||$(ut)?jt(Y,Mt,ut,Ye):ut instanceof RegExp||S(ut)?ct(Y,Mt,ut,Ye):Ut(Y,Mt,ut,Ye,me,je,Ve,bt,$t);else if(At==="object"){if(ut[m]!==6)throw new D;if(ut._bsontype==="ObjectId")Ye=Et(Y,Mt,ut,Ye);else if(ut._bsontype==="Decimal128")Ye=Ct(Y,Mt,ut,Ye);else if(ut._bsontype==="Long"||ut._bsontype==="Timestamp")Ye=ln(Y,Mt,ut,Ye);else if(ut._bsontype==="Double")Ye=$n(Y,Mt,ut,Ye);else if(ut._bsontype==="Code")Ye=wn(Y,Mt,ut,Ye,me,je,Ve,bt,$t);else if(ut._bsontype==="Binary")Ye=jn(Y,Mt,ut,Ye);else if(ut._bsontype==="BSONSymbol")Ye=_n(Y,Mt,ut,Ye);else if(ut._bsontype==="DBRef")Ye=hr(Y,Mt,ut,Ye,je,Ve,$t);else if(ut._bsontype==="BSONRegExp")Ye=mt(Y,Mt,ut,Ye);else if(ut._bsontype==="Int32")Ye=yn(Y,Mt,ut,Ye);else if(ut._bsontype==="MinKey"||ut._bsontype==="MaxKey")Ye=yt(Y,Mt,ut,Ye);else if(ut._bsontype!==void 0)throw new k(`Unrecognized or invalid _bsontype: ${String(ut._bsontype)}`)}else At==="function"&&Ve&&(Ye=sn(Y,Mt,ut,Ye))}}$t.delete(B),Y[Ye++]=0;const zt=Ye-de;return de+=ie.setInt32LE(Y,de,zt),Ye}const dr={$oid:qe,$binary:$e,$uuid:$e,$symbol:pn,$numberInt:dn,$numberDecimal:qt,$numberDouble:gn,$numberLong:he,$minKey:ge,$maxKey:un,$regex:Wt,$regularExpression:Wt,$timestamp:sr};function vn(Y,B={}){if(typeof Y=="number"){const de=Y<=p&&Y>=_,je=Y<=y&&Y>=x;if(B.relaxed||B.legacy)return Y;if(Number.isInteger(Y)&&!Object.is(Y,-0)){if(de)return new dn(Y);if(je)return B.useBigInt64?BigInt(Y):he.fromNumber(Y)}return new gn(Y)}if(Y==null||typeof Y!="object")return Y;if(Y.$undefined)return null;const me=Object.keys(Y).filter(de=>de.startsWith("$")&&Y[de]!=null);for(let de=0;de<me.length;de++){const je=dr[me[de]];if(je)return je.fromExtendedJSON(Y,B)}if(Y.$date!=null){const de=Y.$date,je=new Date;if(B.legacy)if(typeof de=="number")je.setTime(de);else if(typeof de=="string")je.setTime(Date.parse(de));else{if(typeof de!="bigint")throw new j("Unrecognized type for EJSON date: "+typeof de);je.setTime(Number(de))}else if(typeof de=="string")je.setTime(Date.parse(de));else if(he.isLong(de))je.setTime(de.toNumber());else if(typeof de=="number"&&B.relaxed)je.setTime(de);else{if(typeof de!="bigint")throw new j("Unrecognized type for EJSON date: "+typeof de);je.setTime(Number(de))}return je}if(Y.$code!=null){const de=Object.assign({},Y);return Y.$scope&&(de.$scope=vn(Y.$scope)),q.fromExtendedJSON(Y)}if(re(Y)||Y.$dbPointer){const de=Y.$ref?Y:Y.$dbPointer;if(de instanceof fe)return de;const je=Object.keys(de).filter(bt=>bt.startsWith("$"));let Ve=!0;if(je.forEach(bt=>{["$ref","$id","$db"].indexOf(bt)===-1&&(Ve=!1)}),Ve)return fe.fromExtendedJSON(de)}return Y}function Un(Y){const B=Y.toISOString();return Y.getUTCMilliseconds()!==0?B:B.slice(0,-5)+"Z"}function pt(Y,B){if(Y instanceof Map||E(Y)){const me=Object.create(null);for(const[de,je]of Y){if(typeof de!="string")throw new k("Can only serialize maps with string keys");me[de]=je}return pt(me,B)}if((typeof Y=="object"||typeof Y=="function")&&Y!==null){const me=B.seenObjects.findIndex(de=>de.obj===Y);if(me!==-1){const de=B.seenObjects.map(Mt=>Mt.propertyName),je=de.slice(0,me).map(Mt=>`${Mt} -> `).join(""),Ve=de[me],bt=" -> "+de.slice(me+1,de.length-1).map(Mt=>`${Mt} -> `).join(""),$t=de[de.length-1],Ye=" ".repeat(je.length+Ve.length/2),zt="-".repeat(bt.length+(Ve.length+$t.length)/2-1);throw new k(`Converting circular structure to EJSON:
    ${je}${Ve}${bt}${$t}
    ${Ye}\\${zt}/`)}B.seenObjects[B.seenObjects.length-1].obj=Y}if(Array.isArray(Y))return function(me,de){return me.map((je,Ve)=>{de.seenObjects.push({propertyName:`index ${Ve}`,obj:null});try{return pt(je,de)}finally{de.seenObjects.pop()}})}(Y,B);if(Y===void 0)return null;if(Y instanceof Date||h(Y)){const me=Y.getTime(),de=me>-1&&me<2534023188e5;return B.legacy?B.relaxed&&de?{$date:Y.getTime()}:{$date:Un(Y)}:B.relaxed&&de?{$date:Un(Y)}:{$date:{$numberLong:Y.getTime().toString()}}}if(!(typeof Y!="number"||B.relaxed&&isFinite(Y))){if(Number.isInteger(Y)&&!Object.is(Y,-0)){if(Y>=_&&Y<=p)return{$numberInt:Y.toString()};if(Y>=x&&Y<=y)return{$numberLong:Y.toString()}}return{$numberDouble:Object.is(Y,-0)?"-0.0":Y.toString()}}if(typeof Y=="bigint")return B.relaxed?Number(BigInt.asIntN(64,Y)):{$numberLong:BigInt.asIntN(64,Y).toString()};if(Y instanceof RegExp||S(Y)){let me=Y.flags;if(me===void 0){const de=Y.toString().match(/[gimuy]*$/);de&&(me=de[0])}return new Wt(Y.source,me).toExtendedJSON(B)}return Y!=null&&typeof Y=="object"?function(me,de){if(me==null||typeof me!="object")throw new k("not an object instance");const je=me._bsontype;if(je===void 0){const Ve={};for(const bt of Object.keys(me)){de.seenObjects.push({propertyName:bt,obj:null});try{const $t=pt(me[bt],de);bt==="__proto__"?Object.defineProperty(Ve,bt,{value:$t,writable:!0,enumerable:!0,configurable:!0}):Ve[bt]=$t}finally{de.seenObjects.pop()}}return Ve}if(me!=null&&typeof me=="object"&&typeof me._bsontype=="string"&&me[m]!==6)throw new D;if(function(Ve){return Ve!=null&&typeof Ve=="object"&&"_bsontype"in Ve&&typeof Ve._bsontype=="string"}(me)){let Ve=me;if(typeof Ve.toExtendedJSON!="function"){const bt=Tn[me._bsontype];if(!bt)throw new k("Unrecognized or invalid _bsontype: "+me._bsontype);Ve=bt(Ve)}return je==="Code"&&Ve.scope?Ve=new q(Ve.code,pt(Ve.scope,de)):je==="DBRef"&&Ve.oid&&(Ve=new fe(pt(Ve.collection,de),pt(Ve.oid,de),pt(Ve.db,de),pt(Ve.fields,de))),Ve.toExtendedJSON(de)}throw new k("_bsontype must be a string, but was: "+typeof je)}(Y,B):Y}const Tn={Binary:Y=>new $e(Y.value(),Y.sub_type),Code:Y=>new q(Y.code,Y.scope),DBRef:Y=>new fe(Y.collection||Y.namespace,Y.oid,Y.db,Y.fields),Decimal128:Y=>new qt(Y.bytes),Double:Y=>new gn(Y.value),Int32:Y=>new dn(Y.value),Long:Y=>he.fromBits(Y.low!=null?Y.low:Y.low_,Y.low!=null?Y.high:Y.high_,Y.low!=null?Y.unsigned:Y.unsigned_),MaxKey:()=>new un,MinKey:()=>new ge,ObjectId:Y=>new qe(Y),BSONRegExp:Y=>new Wt(Y.pattern,Y.options),BSONSymbol:Y=>new pn(Y.value),Timestamp:Y=>sr.fromBits(Y.low,Y.high)};function nr(Y,B){const me={useBigInt64:(B==null?void 0:B.useBigInt64)??!1,relaxed:(B==null?void 0:B.relaxed)??!0,legacy:(B==null?void 0:B.legacy)??!1};return JSON.parse(Y,(de,je)=>{if(de.indexOf("\0")!==-1)throw new k(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(de)}`);return vn(je,me)})}function _t(Y,B,me,de){me!=null&&typeof me=="object"&&(de=me,me=0),B==null||typeof B!="object"||Array.isArray(B)||(de=B,B=void 0,me=0);const je=pt(Y,Object.assign({relaxed:!0,legacy:!1},de,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(je,B,me)}const wt=Object.create(null);function Ft(Y,B){try{return ie.getNonnegativeInt32LE(Y,B)}catch(me){throw new V("BSON size cannot be negative",B,{cause:me})}}function hn(Y,B){let me=B;for(;Y[me]!==0;me++);if(me===Y.length-1)throw new V("Null terminator not found",B);return me}wt.parse=nr,wt.stringify=_t,wt.serialize=function(Y,B){return B=B||{},JSON.parse(_t(Y,B))},wt.deserialize=function(Y,B){return B=B||{},nr(JSON.stringify(Y),B)},Object.freeze(wt);const Vt=Object.create(null);Vt.parseToElements=function(Y,B=0){if(B??(B=0),Y.length<5)throw new V(`Input must be at least 5 bytes, got ${Y.length} bytes`,B);const me=Ft(Y,B);if(me>Y.length-B)throw new V(`Parsed documentSize (${me} bytes) does not match input length (${Y.length} bytes)`,B);if(Y[B+me-1]!==0)throw new V("BSON documents must end in 0x00",B+me);const de=[];let je=B+4;for(;je<=me+B;){const Ve=Y[je];if(je+=1,Ve===0){if(je-B!==me)throw new V("Invalid 0x00 type byte",je);break}const bt=je,$t=hn(Y,je)-bt;let Ye;if(je+=$t+1,Ve===1||Ve===18||Ve===9||Ve===17)Ye=8;else if(Ve===16)Ye=4;else if(Ve===7)Ye=12;else if(Ve===19)Ye=16;else if(Ve===8)Ye=1;else if(Ve===10||Ve===6||Ve===127||Ve===255)Ye=0;else if(Ve===11)Ye=hn(Y,hn(Y,je)+1)+1-je;else if(Ve===3||Ve===4||Ve===15)Ye=Ft(Y,je);else{if(Ve!==2&&Ve!==5&&Ve!==12&&Ve!==13&&Ve!==14)throw new V(`Invalid 0x${Ve.toString(16).padStart(2,"0")} type byte`,je);Ye=Ft(Y,je)+4,Ve===5&&(Ye+=1),Ve===12&&(Ye+=12)}if(Ye>me)throw new V("value reports length larger than document",je);de.push([Ve,bt,$t,je,Ye]),je+=Ye}return de},Vt.ByteUtils=M,Vt.NumberUtils=ie,Object.freeze(Vt);const Sn=17825792;let zn=M.allocate(Sn);function xn(Y){zn.length<Y&&(zn=M.allocate(Y))}function Rn(Y,B={}){const me=typeof B.checkKeys=="boolean"&&B.checkKeys,de=typeof B.serializeFunctions=="boolean"&&B.serializeFunctions,je=typeof B.ignoreUndefined!="boolean"||B.ignoreUndefined,Ve=typeof B.minInternalBufferSize=="number"?B.minInternalBufferSize:Sn;zn.length<Ve&&(zn=M.allocate(Ve));const bt=ar(zn,Y,me,0,0,de,je,null),$t=M.allocateUnsafe(bt);return $t.set(zn.subarray(0,bt),0),$t}function lr(Y,B,me={}){const de=typeof me.checkKeys=="boolean"&&me.checkKeys,je=typeof me.serializeFunctions=="boolean"&&me.serializeFunctions,Ve=typeof me.ignoreUndefined!="boolean"||me.ignoreUndefined,bt=typeof me.index=="number"?me.index:0,$t=ar(zn,Y,de,0,0,je,Ve,null);return B.set(zn.subarray(0,$t),bt),bt+$t-1}function fr(Y,B={}){return ci(M.toLocalBufferType(Y),B)}function Cn(Y,B={}){return st(Y,typeof(B=B||{}).serializeFunctions=="boolean"&&B.serializeFunctions,typeof B.ignoreUndefined!="boolean"||B.ignoreUndefined)}function Lr(Y,B,me,de,je,Ve){const bt=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},Ve),$t=M.toLocalBufferType(Y);let Ye=B;for(let zt=0;zt<me;zt++){const Mt=ie.getInt32LE($t,Ye);bt.index=Ye,de[je+zt]=ci($t,bt),Ye+=Mt}return Ye}var Er=Object.freeze({__proto__:null,BSONError:k,BSONOffsetError:V,BSONRegExp:Wt,BSONRuntimeError:j,BSONSymbol:pn,BSONType:C,BSONValue:U,BSONVersionError:D,Binary:$e,Code:q,DBRef:fe,Decimal128:qt,Double:gn,EJSON:wt,Int32:dn,Long:he,MaxKey:un,MinKey:ge,ObjectId:qe,Timestamp:sr,UUID:_e,calculateObjectSize:Cn,deserialize:fr,deserializeStream:Lr,onDemand:Vt,serialize:Rn,serializeWithBufferAndIndex:lr,setInternalBufferSize:xn});f.BSON=Er,f.BSONError=k,f.BSONOffsetError=V,f.BSONRegExp=Wt,f.BSONRuntimeError=j,f.BSONSymbol=pn,f.BSONType=C,f.BSONValue=U,f.BSONVersionError=D,f.Binary=$e,f.Code=q,f.DBRef=fe,f.Decimal128=qt,f.Double=gn,f.EJSON=wt,f.Int32=dn,f.Long=he,f.MaxKey=un,f.MinKey=ge,f.ObjectId=qe,f.Timestamp=sr,f.UUID=_e,f.calculateObjectSize=Cn,f.deserialize=fr,f.deserializeStream=Lr,f.onDemand=Vt,f.serialize=Rn,f.serializeWithBufferAndIndex=lr,f.setInternalBufferSize=xn},3643:(d,f,a)=>{var u=a(7799),g=a(1970).assert;function $(v,S){this.ec=v,this.priv=null,this.pub=null,S.priv&&this._importPrivate(S.priv,S.privEnc),S.pub&&this._importPublic(S.pub,S.pubEnc)}d.exports=$,$.fromPublic=function(v,S,E){return S instanceof $?S:new $(v,{pub:S,pubEnc:E})},$.fromPrivate=function(v,S,E){return S instanceof $?S:new $(v,{priv:S,privEnc:E})},$.prototype.validate=function(){var v=this.getPublic();return v.isInfinity()?{result:!1,reason:"Invalid public key"}:v.validate()?v.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},$.prototype.getPublic=function(v,S){return typeof v=="string"&&(S=v,v=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),S?this.pub.encode(S,v):this.pub},$.prototype.getPrivate=function(v){return v==="hex"?this.priv.toString(16,2):this.priv},$.prototype._importPrivate=function(v,S){this.priv=new u(v,S||16),this.priv=this.priv.umod(this.ec.curve.n)},$.prototype._importPublic=function(v,S){if(v.x||v.y)return this.ec.curve.type==="mont"?g(v.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||g(v.x&&v.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(v.x,v.y));this.pub=this.ec.curve.decodePoint(v,S)},$.prototype.derive=function(v){return v.validate()||g(v.validate(),"public point not validated"),v.mul(this.priv).getX()},$.prototype.sign=function(v,S,E){return this.ec.sign(v,this,S,E)},$.prototype.verify=function(v,S,E){return this.ec.verify(v,S,this,void 0,E)},$.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},3644:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,h),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,h,["Cannot overwrite `"+m+"` model once compiled."])}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"OverwriteModelError"}),d.exports=S},3660:(d,f,a)=>{function u(R,C){var k=Object.keys(R);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(R);C&&(D=D.filter(function(j){return Object.getOwnPropertyDescriptor(R,j).enumerable})),k.push.apply(k,D)}return k}function g(R){for(var C=1;C<arguments.length;C++){var k=arguments[C]!=null?arguments[C]:{};C%2?u(Object(k),!0).forEach(function(D){$(R,D,k[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(k)):u(Object(k)).forEach(function(D){Object.defineProperty(R,D,Object.getOwnPropertyDescriptor(k,D))})}return R}function $(R,C,k){return(C=function(D){var j=function(V){if(v(V)!="object"||!V)return V;var z=V[Symbol.toPrimitive];if(z!==void 0){var W=z.call(V,"string");if(v(W)!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(V)}(D);return v(j)=="symbol"?j:j+""}(C))in R?Object.defineProperty(R,C,{value:k,enumerable:!0,configurable:!0,writable:!0}):R[C]=k,R}function v(R){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},v(R)}var S=a(3672),E=a(1007),h=a(6426),b=a(7768),m=a(4327),p=a(9460),_=a(8768),y=h.CastError;function x(R,C){h.call(this,R,C,"Number")}function A(R){return this.cast(R)}x.get=h.get,x.set=h.set,x.setters=[],x._cast=b,x.cast=function(R){return arguments.length===0||(R===!1&&(R=this._defaultCaster),this._cast=R),this._cast},x._defaultCaster=function(R){if(typeof R!="number")throw new Error;return R},x.schemaName="Number",x.defaultOptions={},x.prototype=Object.create(h.prototype),x.prototype.constructor=x,x.prototype.OptionsConstructor=E,x._checkRequired=function(R){return typeof R=="number"||R instanceof Number},x.checkRequired=h.checkRequired,x.prototype.checkRequired=function(R,C){return v(R)==="object"&&h._isRef(this,R,C,!0)?R!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():x.checkRequired())(R)},x.prototype.min=function(R,C){if(this.minValidator&&(this.validators=this.validators.filter(function(D){return D.validator!==this.minValidator},this)),R!=null){var k=C||S.messages.Number.min;k=k.replace(/{MIN}/,R),this.validators.push({validator:this.minValidator=function(D){return D==null||D>=R},message:k,type:"min",min:R})}return this},x.prototype.max=function(R,C){if(this.maxValidator&&(this.validators=this.validators.filter(function(D){return D.validator!==this.maxValidator},this)),R!=null){var k=C||S.messages.Number.max;k=k.replace(/{MAX}/,R),this.validators.push({validator:this.maxValidator=function(D){return D==null||D<=R},message:k,type:"max",max:R})}return this},x.prototype.enum=function(R,C){return this.enumValidator&&(this.validators=this.validators.filter(function(k){return k.validator!==this.enumValidator},this)),Array.isArray(R)||(_.isPOJO(R)&&R.values!=null?(C=R.message,R=R.values):typeof R=="number"&&(R=Array.prototype.slice.call(arguments),C=null),_.isPOJO(R)&&(R=Object.values(R)),C=C||S.messages.Number.enum),C=C??S.messages.Number.enum,this.enumValidator=function(k){return k==null||R.indexOf(k)!==-1},this.validators.push({validator:this.enumValidator,message:C,type:"enum",enumValues:R}),this},x.prototype.cast=function(R,C,k,D,j){if(typeof R!="number"&&h._isRef(this,R,C,k)&&(R==null||_.isNonBuiltinObject(R)))return this._castRef(R,C,k,j);var V,z=R&&R._id!==void 0?R._id:R;V=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():x.cast();try{return V(z)}catch(W){throw new y("Number",z,this.path,W,this)}},x.prototype.$conditionalHandlers=g(g({},h.prototype.$conditionalHandlers),{},{$bitsAllClear:p,$bitsAnyClear:p,$bitsAllSet:p,$bitsAnySet:p,$gt:A,$gte:A,$lt:A,$lte:A,$mod:function(R){var C=this;return Array.isArray(R)?R.map(function(k){return C.cast(k)}):[this.cast(R)]}}),x.prototype.castForQuery=function(R,C,k){var D;if(R!=null){if(!(D=this.$conditionalHandlers[R]))throw new y("number",C,this.path,null,this);return D.call(this,C,k)}try{C=this.applySetters(C,k)}catch(j){throw j instanceof y&&j.path===this.path&&this.$fullPath!=null&&(j.path=this.$fullPath),j}return C},x.prototype.toJSONSchema=function(R){var C=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return m("number","number",R==null?void 0:R.useBsonType,C)},d.exports=x},3672:(d,f,a)=>{var u=a(8213);d.exports=u,u.messages=a(766),u.Messages=u.messages,u.DocumentNotFoundError=a(1129),u.CastError=a(3609),u.ValidationError=a(6949),u.ValidatorError=a(9538),u.VersionError=a(6996),u.ParallelSaveError=a(3940),u.OverwriteModelError=a(3644),u.MissingSchemaError=a(8063),u.MongooseServerSelectionError=a(7219),u.DivergentArrayError=a(1417),u.StrictModeError=a(8995),u.StrictPopulateError=a(6801)},3686:(d,f,a)=>{var u=a(7799),g=a(1970),$=g.assert;function v(m,p){if(m instanceof v)return m;this._importDER(m,p)||($(m.r&&m.s,"Signature without r or s"),this.r=new u(m.r,16),this.s=new u(m.s,16),m.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=m.recoveryParam)}function S(){this.place=0}function E(m,p){var _=m[p.place++];if(!(128&_))return _;var y=15&_;if(y===0||y>4||m[p.place]===0)return!1;for(var x=0,A=0,R=p.place;A<y;A++,R++)x<<=8,x|=m[R],x>>>=0;return!(x<=127)&&(p.place=R,x)}function h(m){for(var p=0,_=m.length-1;!m[p]&&!(128&m[p+1])&&p<_;)p++;return p===0?m:m.slice(p)}function b(m,p){if(p<128)m.push(p);else{var _=1+(Math.log(p)/Math.LN2>>>3);for(m.push(128|_);--_;)m.push(p>>>(_<<3)&255);m.push(p)}}d.exports=v,v.prototype._importDER=function(m,p){m=g.toArray(m,p);var _=new S;if(m[_.place++]!==48)return!1;var y=E(m,_);if(y===!1||y+_.place!==m.length||m[_.place++]!==2)return!1;var x=E(m,_);if(x===!1||128&m[_.place])return!1;var A=m.slice(_.place,x+_.place);if(_.place+=x,m[_.place++]!==2)return!1;var R=E(m,_);if(R===!1||m.length!==R+_.place||128&m[_.place])return!1;var C=m.slice(_.place,R+_.place);if(A[0]===0){if(!(128&A[1]))return!1;A=A.slice(1)}if(C[0]===0){if(!(128&C[1]))return!1;C=C.slice(1)}return this.r=new u(A),this.s=new u(C),this.recoveryParam=null,!0},v.prototype.toDER=function(m){var p=this.r.toArray(),_=this.s.toArray();for(128&p[0]&&(p=[0].concat(p)),128&_[0]&&(_=[0].concat(_)),p=h(p),_=h(_);!(_[0]||128&_[1]);)_=_.slice(1);var y=[2];b(y,p.length),(y=y.concat(p)).push(2),b(y,_.length);var x=y.concat(_),A=[48];return b(A,x.length),A=A.concat(x),g.encode(A,m)}},3694:(d,f,a)=>{var u=a(486);d.exports=function(g,$){return $==null||$._id==null||(g=g.clone(),$._id?g.paths._id||(u(g),g.options._id=!0):(g.remove("_id"),g.options._id=!1)),g}},3696:d=>{d.exports=function(f,a){return f==null?null:typeof f=="boolean"?a:typeof f[a]=="boolean"?f[a]?a:null:a in f?f[a]:a}},3703:d=>{function f(u,g){(g==null||g>u.length)&&(g=u.length);for(var $=0,v=Array(g);$<g;$++)v[$]=u[$];return v}function a(u,g){return u==null?u:u instanceof Map?u.get(g):u[g]}d.exports=function(u,g,$){var v,S=!1;if(typeof g=="string"){if(g.indexOf(".")===-1){var E=a(u,g);return E??$}v=g.split(".")}else if(S=!0,(v=g).length===1){var h=a(u,v[0]);return h??$}var b,m=g,p=u,_=function(x,A){var R=typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(!R){if(Array.isArray(x)||(R=function(z,W){if(z){if(typeof z=="string")return f(z,W);var ee={}.toString.call(z).slice(8,-1);return ee==="Object"&&z.constructor&&(ee=z.constructor.name),ee==="Map"||ee==="Set"?Array.from(z):ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee)?f(z,W):void 0}}(x))||A){R&&(x=R);var C=0,k=function(){};return{s:k,n:function(){return C>=x.length?{done:!0}:{done:!1,value:x[C++]}},e:function(z){throw z},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D,j=!0,V=!1;return{s:function(){R=R.call(x)},n:function(){var z=R.next();return j=z.done,z},e:function(z){V=!0,D=z},f:function(){try{j||R.return==null||R.return()}finally{if(V)throw D}}}}(v);try{for(_.s();!(b=_.n()).done;){var y=b.value;if(p==null)return $;if(!S&&p[m]!=null)return p[m];p=a(p,y),S||(m=m.substr(y.length+1))}}catch(x){_.e(x)}finally{_.f()}return p??$}},3704:(d,f,a)=>{function u(S){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},u(S)}var g=a(2402),$=a(3633),v=a(3305);d.exports=function(S){if(S==null||S==="")return null;var E;if(v(S,"Long"))E=S.toNumber();else if(typeof S=="string")try{return $.Double.fromString(S)}catch{g.ok(!1)}else if(u(S)==="object"){var h,b=(h=S.valueOf())!==null&&h!==void 0?h:S.toString();if(typeof b=="string")try{return $.Double.fromString(S)}catch{g.ok(!1)}else E=Number(b)}else E=Number(S);return new $.Double(E)}},3731:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!h})()}function $(h){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(h)}function v(h,b){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},v(h,b)}var S=function(h){function b(){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,b),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,b,arguments)}return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),_&&v(p,_)}(b,h),m=b,Object.defineProperty(m,"prototype",{writable:!1}),m;var m}(a(8879)),E=a(5761);Object.defineProperty(S.prototype,"min",E),Object.defineProperty(S.prototype,"max",E),Object.defineProperty(S.prototype,"expires",E),d.exports=S},3743:(d,f,a)=>{function u(p){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(p)}function g(p){return g=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(_){return u(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":u(_)},g(p)}function $(p){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},$(p)}function v(p,_){return v=Object.setPrototypeOf||function(y,x){return y.__proto__=x,y},v(p,_)}var S,E,h={};function b(p,_,y){y||(y=Error);var x=function(A){function R(C,k,D){var j;return function(V,z){if(!(V instanceof z))throw new TypeError("Cannot call a class as a function")}(this,R),j=function(V,z){return!z||g(z)!=="object"&&typeof z!="function"?function(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}(V):z}(this,$(R).call(this,function(V,z,W){return typeof _=="string"?_:_(V,z,W)}(C,k,D))),j.code=p,j}return function(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),k&&v(C,k)}(R,A),R}(y);h[p]=x}function m(p,_){if(Array.isArray(p)){var y=p.length;return p=p.map(function(x){return String(x)}),y>2?"one of ".concat(_," ").concat(p.slice(0,y-1).join(", "),", or ")+p[y-1]:y===2?"one of ".concat(_," ").concat(p[0]," or ").concat(p[1]):"of ".concat(_," ").concat(p[0])}return"of ".concat(_," ").concat(String(p))}b("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),b("ERR_INVALID_ARG_TYPE",function(p,_,y){var x,A,R,C,k;if(S===void 0&&(S=a(2402)),S(typeof p=="string","'name' must be a string"),typeof _=="string"&&(A="not ",_.substr(0,4)===A)?(x="must not be",_=_.replace(/^not /,"")):x="must be",function(j,V,z){return(z===void 0||z>j.length)&&(z=j.length),j.substring(z-9,z)===V}(p," argument"))R="The ".concat(p," ").concat(x," ").concat(m(_,"type"));else{var D=(typeof k!="number"&&(k=0),k+1>(C=p).length||C.indexOf(".",k)===-1?"argument":"property");R='The "'.concat(p,'" ').concat(D," ").concat(x," ").concat(m(_,"type"))}return R+". Received type ".concat(g(y))},TypeError),b("ERR_INVALID_ARG_VALUE",function(p,_){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";E===void 0&&(E=a(7352));var x=E.inspect(_);return x.length>128&&(x="".concat(x.slice(0,128),"...")),"The argument '".concat(p,"' ").concat(y,". Received ").concat(x)},TypeError),b("ERR_INVALID_RETURN_VALUE",function(p,_,y){var x;return x=y&&y.constructor&&y.constructor.name?"instance of ".concat(y.constructor.name):"type ".concat(g(y)),"Expected ".concat(p,' to be returned from the "').concat(_,'"')+" function but got ".concat(x,".")},TypeError),b("ERR_MISSING_ARGS",function(){for(var p=arguments.length,_=new Array(p),y=0;y<p;y++)_[y]=arguments[y];S===void 0&&(S=a(2402)),S(_.length>0,"At least one arg needs to be specified");var x="The ",A=_.length;switch(_=_.map(function(R){return'"'.concat(R,'"')}),A){case 1:x+="".concat(_[0]," argument");break;case 2:x+="".concat(_[0]," and ").concat(_[1]," arguments");break;default:x+=_.slice(0,A-1).join(", "),x+=", and ".concat(_[A-1]," arguments")}return"".concat(x," must be specified")},TypeError),d.exports.codes=h},3776:()=>{},3777:(d,f,a)=>{var u=a(9809),g=Object.prototype.toString,$=Object.prototype.hasOwnProperty;d.exports=function(v,S,E){if(!u(S))throw new TypeError("iterator must be a function");var h,b;arguments.length>=3&&(h=E),b=v,g.call(b)==="[object Array]"?function(m,p,_){for(var y=0,x=m.length;y<x;y++)$.call(m,y)&&(_==null?p(m[y],y,m):p.call(_,m[y],y,m))}(v,S,h):typeof v=="string"?function(m,p,_){for(var y=0,x=m.length;y<x;y++)_==null?p(m.charAt(y),y,m):p.call(_,m.charAt(y),y,m)}(v,S,h):function(m,p,_){for(var y in m)$.call(m,y)&&(_==null?p(m[y],y,m):p.call(_,m[y],y,m))}(v,S,h)}},3779:()=>{},3849:(d,f)=>{f["des-ecb"]={key:8,iv:0},f["des-cbc"]=f.des={key:8,iv:8},f["des-ede3-cbc"]=f.des3={key:24,iv:8},f["des-ede3"]={key:24,iv:0},f["des-ede-cbc"]={key:16,iv:8},f["des-ede"]={key:16,iv:0}},3879:(d,f,a)=>{var u=a(1679),g=a(1419),$=g.base,v=g.bignum,S=g.constants.der;function E(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new h,this.tree._init(p.body)}function h(p){$.Node.call(this,"der",p)}function b(p,_){var y=p.readUInt8(_);if(p.isError(y))return y;var x=S.tagClass[y>>6],A=!(32&y);if(31&~y)y&=31;else{var R=y;for(y=0;!(128&~R);){if(R=p.readUInt8(_),p.isError(R))return R;y<<=7,y|=127&R}}return{cls:x,primitive:A,tag:y,tagStr:S.tag[y]}}function m(p,_,y){var x=p.readUInt8(y);if(p.isError(x))return x;if(!_&&x===128)return null;if(!(128&x))return x;var A=127&x;if(A>4)return p.error("length octect is too long");x=0;for(var R=0;R<A;R++){x<<=8;var C=p.readUInt8(y);if(p.isError(C))return C;x|=C}return x}d.exports=E,E.prototype.decode=function(p,_){return p instanceof $.DecoderBuffer||(p=new $.DecoderBuffer(p,_)),this.tree._decode(p,_)},u(h,$.Node),h.prototype._peekTag=function(p,_,y){if(p.isEmpty())return!1;var x=p.save(),A=b(p,'Failed to peek tag: "'+_+'"');return p.isError(A)?A:(p.restore(x),A.tag===_||A.tagStr===_||A.tagStr+"of"===_||y)},h.prototype._decodeTag=function(p,_,y){var x=b(p,'Failed to decode tag of "'+_+'"');if(p.isError(x))return x;var A=m(p,x.primitive,'Failed to get length of "'+_+'"');if(p.isError(A))return A;if(!y&&x.tag!==_&&x.tagStr!==_&&x.tagStr+"of"!==_)return p.error('Failed to match tag: "'+_+'"');if(x.primitive||A!==null)return p.skip(A,'Failed to match body of: "'+_+'"');var R=p.save(),C=this._skipUntilEnd(p,'Failed to skip indefinite length body: "'+this.tag+'"');return p.isError(C)?C:(A=p.offset-R.offset,p.restore(R),p.skip(A,'Failed to match body of: "'+_+'"'))},h.prototype._skipUntilEnd=function(p,_){for(;;){var y=b(p,_);if(p.isError(y))return y;var x,A=m(p,y.primitive,_);if(p.isError(A))return A;if(x=y.primitive||A!==null?p.skip(A):this._skipUntilEnd(p,_),p.isError(x))return x;if(y.tagStr==="end")break}},h.prototype._decodeList=function(p,_,y,x){for(var A=[];!p.isEmpty();){var R=this._peekTag(p,"end");if(p.isError(R))return R;var C=y.decode(p,"der",x);if(p.isError(C)&&R)break;A.push(C)}return A},h.prototype._decodeStr=function(p,_){if(_==="bitstr"){var y=p.readUInt8();return p.isError(y)?y:{unused:y,data:p.raw()}}if(_==="bmpstr"){var x=p.raw();if(x.length%2==1)return p.error("Decoding of string type: bmpstr length mismatch");for(var A="",R=0;R<x.length/2;R++)A+=String.fromCharCode(x.readUInt16BE(2*R));return A}if(_==="numstr"){var C=p.raw().toString("ascii");return this._isNumstr(C)?C:p.error("Decoding of string type: numstr unsupported characters")}if(_==="octstr"||_==="objDesc")return p.raw();if(_==="printstr"){var k=p.raw().toString("ascii");return this._isPrintstr(k)?k:p.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(_)?p.raw().toString():p.error("Decoding of string type: "+_+" unsupported")},h.prototype._decodeObjid=function(p,_,y){for(var x,A=[],R=0;!p.isEmpty();){var C=p.readUInt8();R<<=7,R|=127&C,128&C||(A.push(R),R=0)}128&C&&A.push(R);var k=A[0]/40|0,D=A[0]%40;if(x=y?A:[k,D].concat(A.slice(1)),_){var j=_[x.join(" ")];j===void 0&&(j=_[x.join(".")]),j!==void 0&&(x=j)}return x},h.prototype._decodeTime=function(p,_){var y=p.raw().toString();if(_==="gentime")var x=0|y.slice(0,4),A=0|y.slice(4,6),R=0|y.slice(6,8),C=0|y.slice(8,10),k=0|y.slice(10,12),D=0|y.slice(12,14);else{if(_!=="utctime")return p.error("Decoding "+_+" time is not supported yet");x=0|y.slice(0,2),A=0|y.slice(2,4),R=0|y.slice(4,6),C=0|y.slice(6,8),k=0|y.slice(8,10),D=0|y.slice(10,12),x=x<70?2e3+x:1900+x}return Date.UTC(x,A-1,R,C,k,D,0)},h.prototype._decodeNull=function(p){return null},h.prototype._decodeBool=function(p){var _=p.readUInt8();return p.isError(_)?_:_!==0},h.prototype._decodeInt=function(p,_){var y=p.raw(),x=new v(y);return _&&(x=_[x.toString(10)]||x),x},h.prototype._use=function(p,_){return typeof p=="function"&&(p=p(_)),p._getDecoder("der").tree}},3892:(d,f,a)=>{function u(A){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},u(A)}function g(A,R){var C=typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(!C){if(Array.isArray(A)||(C=function(W,ee){if(W){if(typeof W=="string")return $(W,ee);var ne={}.toString.call(W).slice(8,-1);return ne==="Object"&&W.constructor&&(ne=W.constructor.name),ne==="Map"||ne==="Set"?Array.from(W):ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne)?$(W,ee):void 0}}(A))||R){C&&(A=C);var k=0,D=function(){};return{s:D,n:function(){return k>=A.length?{done:!0}:{done:!1,value:A[k++]}},e:function(W){throw W},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j,V=!0,z=!1;return{s:function(){C=C.call(A)},n:function(){var W=C.next();return V=W.done,W},e:function(W){z=!0,j=W},f:function(){try{V||C.return==null||C.return()}finally{if(z)throw j}}}}function $(A,R){(R==null||R>A.length)&&(R=A.length);for(var C=0,k=Array(R);C<R;C++)k[C]=A[C];return k}function v(A,R){var C=Object.keys(A);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(A);R&&(k=k.filter(function(D){return Object.getOwnPropertyDescriptor(A,D).enumerable})),C.push.apply(C,k)}return C}function S(A){for(var R=1;R<arguments.length;R++){var C=arguments[R]!=null?arguments[R]:{};R%2?v(Object(C),!0).forEach(function(k){E(A,k,C[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(C)):v(Object(C)).forEach(function(k){Object.defineProperty(A,k,Object.getOwnPropertyDescriptor(C,k))})}return A}function E(A,R,C){return(R=function(k){var D=function(j){if(u(j)!="object"||!j)return j;var V=j[Symbol.toPrimitive];if(V!==void 0){var z=V.call(j,"string");if(u(z)!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)}(k);return u(D)=="symbol"?D:D+""}(R))in A?Object.defineProperty(A,R,{value:C,enumerable:!0,configurable:!0,writable:!0}):A[R]=C,A}var h=a(6948),b=a(3916),m=a(3703),p=a(8677),_=a(7300),y=a(4450),x=a(6665);f.preparePopulationOptionsMQ=function(A,R){var C,k=A._mongooseOptions.populate,D=Object.keys(k).reduce(function(W,ee){return W.concat([k[ee]])},[]);R.lean!=null&&D.filter(function(W){return(W&&W.options&&W.options.lean)==null}).forEach((C=R.lean,function(W){W.options||(W.options={}),C!=null&&Array.isArray(C.virtuals)&&((C=Object.assign({},C)).virtuals=C.virtuals.filter(function(ee){return typeof ee=="string"&&ee.startsWith(W.path+".")}).map(function(ee){return ee.slice(W.path.length+1)})),W.options.lean=C}));var j=A&&A.options&&A.options.session||null;j!=null&&D.forEach(function(W){W.options!=null?"session"in W.options||(W.options.session=j):W.options={session:j}});for(var V=A._fieldsForExec(),z=0;z<D.length;++z)D[z]instanceof h?D[z]=new h(S(S({},D[z]),{},{_queryProjection:V,_localModel:A.model})):(D[z]._queryProjection=V,D[z]._localModel=A.model);return D},f.createModel=function(A,R,C,k,D){A.hooks.execPreSync("createModel",R);var j=A.schema?A.schema.discriminatorMapping:null,V=j&&j.isRoot?j.key:null,z=R[V];if(V&&z&&A.discriminators){var W=A.discriminators[z]||p(A.discriminators,z);if(W){var ee=y(k);return f.applyPaths(ee,W.schema),new W(void 0,ee,!0)}}var ne={skipId:!0,isNew:!1,willInit:!0};return D!=null&&"defaults"in D&&(ne.defaults=D.defaults),new A(void 0,C,ne)},f.createModelAndInit=function(A,R,C,k,D,j,V){var z=j?{populated:j}:void 0,W=f.createModel(A,R,C,k,D);try{W.$init(R,z,V)}catch(ee){V(ee,W)}},f.applyPaths=function(A,R,C){var k,D,j=new Set;if(A){D=Object.keys(A);for(var V=[],z=0;z<D.length;++z){var W=D[z];D[z][0]==="-"&&(delete A[W],W==="-_id"?A._id=0:V.push(W.slice(1)))}D=Object.keys(A);for(var ee=0;ee<D.length;++ee)if(D[ee][0]!=="+"){var ne=A[D[ee]];if(_(ne)&&!(D[ee]==="_id"&&D.length>1)&&(!(D[ee]===R.options.discriminatorKey&&D.length>1&&ne!=null)||ne)){k=!ne;break}}for(var Q=0,se=V;Q<se.length;Q++){var be=se[Q],H=R.path(be);H&&H.selected&&k===!1?H&&H.selected&&k===!1&&j.add(be):(A[be]=0,k=!0)}}var P=[],L=[],F=[];switch(function fe(we,Re){if(Re||(Re=""),F.indexOf(we)!==-1)return[];F.push(we);var ke=[];return we.eachPath(function(ue,Ee){if(Re&&(ue=Re+"."+ue),Ee.$isSchemaMap||ue.endsWith(".$*")){var Ae=A&&"+"+ue in A;Ee.options&&Ee.options.select===!1&&!Ae&&L.push(ue)}else{var Ne=re(ue,Ee);if(Ne!=null||Array.isArray(Ee)||!Ee.$isMongooseArray||Ee.$isMongooseDocumentArray||(Ne=re(ue,Ee.caster)),Ne!=null&&ke.push(Ne),Ee.schema){var De=fe(Ee.schema,ue);k===!1&&b(A,ue,Ee.schema,P,De)}}}),F.pop(),ke}(R),k){case!0:var M,U=g(L);try{for(U.s();!(M=U.n()).done;){var Z=M.value;A[Z]=0}}catch(fe){U.e(fe)}finally{U.f()}break;case!1:R&&R.paths._id&&R.paths._id.options&&R.paths._id.options.select===!1&&(A._id=0);var K,oe=g(P);try{for(oe.s();!(K=oe.n()).done;){var ie=K.value;j.has(ie)||x(A,ie)||(A[ie]=A[ie]||1)}}catch(fe){oe.e(fe)}finally{oe.f()}break;case void 0:if(A==null)break;for(var $e=0,ce=Object.keys(A||{});$e<ce.length;$e++){var le=ce[$e];le.startsWith("+")&&delete A[le]}var ye,_e=g(L);try{for(_e.s();!(ye=_e.n()).done;){var q=ye.value;A[q]==null&&(A[q]=0)}}catch(fe){_e.e(fe)}finally{_e.f()}}function re(fe,we){if(A!=null&&typeof we.selected=="boolean")if(we.selected===!1&&A[fe])C&&(A[fe]=0);else if(k||!we.selected||fe!==R.options.discriminatorKey||A[fe]==null||A[fe]){if(k!==!1||!we.selected||A[fe]==null||A[fe]){var Re="+"+fe;if(A&&Re in A)return delete A[Re],void(k===!1&&D.length>1&&!~D.indexOf(fe)&&!C?A[fe]=1:k==null&&C&&we.selected===!1&&(A[fe]=0));for(var ke=fe.split("."),ue="",Ee=0;Ee<ke.length;++Ee)if(ue+=ue.length?"."+ke[Ee]:ke[Ee],L.indexOf(ue)!==-1)return;if(!k&&we&&we.options&&we.options.$skipDiscriminatorCheck)for(var Ae="",Ne=0;Ne<ke.length;++Ne){Ae+=(Ae.length===0?"":".")+ke[Ne];var De=m(A,Ae,!1)||m(A,Ae+".$",!1);if(De&&u(De)!=="object")return}return(we.selected?P:L).push(fe),fe}delete A[fe]}else delete A[fe]}}},3900:(d,f,a)=>{var u=a(6400),g=a(6750),$=a(3191)(),v=a(1464),S=a(2268),E=u("%Math.floor%");d.exports=function(h,b){if(typeof h!="function")throw new S("`fn` is not a function");if(typeof b!="number"||b<0||b>4294967295||E(b)!==b)throw new S("`length` must be a positive 32-bit integer");var m=arguments.length>2&&!!arguments[2],p=!0,_=!0;if("length"in h&&v){var y=v(h,"length");y&&!y.configurable&&(p=!1),y&&!y.writable&&(_=!1)}return(p||_||!m)&&($?g(h,"length",b,!0,!0):g(h,"length",b)),h}},3916:d=>{d.exports=function(f,a,u,g,$){var v=Object.keys(f).reduce(function(E,h){return E||h.startsWith(a+".")},!1),S=a+"."+u.options.discriminatorKey;v||$.length!==1||$[0]!==S||g.splice(g.indexOf(S),1)}},3940:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,h),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,h,["Can't save() the same doc multiple times in parallel. Document: "+m._doc._id])}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"ParallelSaveError"}),d.exports=S},3989:(d,f,a)=>{var u=a(2635);d.exports=function(g){return new u().update(g).digest()}},4009:(d,f,a)=>{var u=a(8213),g=a(5188),$=a(3622),v=a(5678),S=a(7352),E=a(8768),h=/(\.\d+$|\.\d+\.)/g;d.exports=function(b,m,p,_,y){if(b==null)return[];if(typeof b=="string"&&y!=null&&g(y,b))throw new u("refPath `"+b+"` must not be excluded in projection, got "+S.inspect(y));if(h.test(p)){var x=p.split(h);if(x[x.length-1]==="")throw new Error("Can't populate individual element in an array");for(var A="",R=b,C=0;C<x.length;C+=2){var k=x[C];if(!R.startsWith(k+".")){if(C===x.length-1){A+=R,R="";break}throw new Error("Could not normalize ref path, chunk "+k+" not in populated path")}A+=R.substring(0,k.length)+x[C+1],R=R.substring(k.length+1)}var D=v.get(A,m,$),j=Array.isArray(D)?D:[D];return E.array.flatten(j)}var V=v.get(b,m,$);return _!=null&&_.virtuals.hasOwnProperty(b)?[_.virtuals[b].applyGetters(void 0,m)]:Array.isArray(V)?V:[V]}},4026:(d,f)=>{f.Collection=function(){throw new Error("Cannot create a collection from browser library")},f.Connection=function(){throw new Error("Cannot create a connection from browser library")},f.BulkWriteResult=function(){}},4042:(d,f,a)=>{var u=a(4685),g=a(7695),$=a(4104),v=u.rotl32,S=u.sum32,E=u.sum32_5,h=$.ft_1,b=g.BlockHash,m=[1518500249,1859775393,2400959708,3395469782];function p(){if(!(this instanceof p))return new p;b.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}u.inherits(p,b),d.exports=p,p.blockSize=512,p.outSize=160,p.hmacStrength=80,p.padLength=64,p.prototype._update=function(_,y){for(var x=this.W,A=0;A<16;A++)x[A]=_[y+A];for(;A<x.length;A++)x[A]=v(x[A-3]^x[A-8]^x[A-14]^x[A-16],1);var R=this.h[0],C=this.h[1],k=this.h[2],D=this.h[3],j=this.h[4];for(A=0;A<x.length;A++){var V=~~(A/20),z=E(v(R,5),h(V,C,k,D),j,x[A],m[V]);j=D,D=k,k=v(C,30),C=R,R=z}this.h[0]=S(this.h[0],R),this.h[1]=S(this.h[1],C),this.h[2]=S(this.h[2],k),this.h[3]=S(this.h[3],D),this.h[4]=S(this.h[4],j)},p.prototype._digest=function(_){return _==="hex"?u.toHex32(this.h,"big"):u.split32(this.h,"big")}},4058:(d,f,a)=>{var u=a(3633).Long,g=9223372036854775807n,$=-9223372036854775808n,v="Mongoose only supports BigInts between ".concat($," and ").concat(g," because MongoDB does not support arbitrary precision integers");d.exports=function(S){if(S==null)return S;if(S==="")return null;if(typeof S=="bigint"){if(S>g||S<$)throw new Error(v);return S}if(S instanceof u)return S.toBigInt();if(typeof S=="string"||typeof S=="number"){if((S=BigInt(S))>g||S<$)throw new Error(v);return S}throw new Error('Cannot convert value to BigInt: "'.concat(S,'"'))}},4070:(d,f,a)=>{function u($,v){(v==null||v>$.length)&&(v=$.length);for(var S=0,E=Array(v);S<v;S++)E[S]=$[S];return E}var g=a(5879);d.exports=function($){if(g($)!=="TopologyDescription"||$.servers.size===0)return!1;var v,S=function(h,b){var m=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(!m){if(Array.isArray(h)||(m=function(R,C){if(R){if(typeof R=="string")return u(R,C);var k={}.toString.call(R).slice(8,-1);return k==="Object"&&R.constructor&&(k=R.constructor.name),k==="Map"||k==="Set"?Array.from(R):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?u(R,C):void 0}}(h))||b){m&&(h=m);var p=0,_=function(){};return{s:_,n:function(){return p>=h.length?{done:!0}:{done:!1,value:h[p++]}},e:function(R){throw R},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,x=!0,A=!1;return{s:function(){m=m.call(h)},n:function(){var R=m.next();return x=R.done,R},e:function(R){A=!0,y=R},f:function(){try{x||m.return==null||m.return()}finally{if(A)throw y}}}}($.servers.values());try{for(S.s();!(v=S.n()).done;){var E=v.value;if(E.host.endsWith(".mongodb.net")===!1||E.port!==27017)return!1}}catch(h){S.e(h)}finally{S.f()}return!0}},4104:(d,f,a)=>{var u=a(4685).rotr32;function g(S,E,h){return S&E^~S&h}function $(S,E,h){return S&E^S&h^E&h}function v(S,E,h){return S^E^h}f.ft_1=function(S,E,h,b){return S===0?g(E,h,b):S===1||S===3?v(E,h,b):S===2?$(E,h,b):void 0},f.ch32=g,f.maj32=$,f.p32=v,f.s0_256=function(S){return u(S,2)^u(S,13)^u(S,22)},f.s1_256=function(S){return u(S,6)^u(S,11)^u(S,25)},f.g0_256=function(S){return u(S,7)^u(S,18)^S>>>3},f.g1_256=function(S){return u(S,17)^u(S,19)^S>>>10}},4183:(d,f,a)=>{var u=a(118);d.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:u}},4186:(d,f,a)=>{function u(P){var L=this;this.next=null,this.entry=null,this.finish=function(){(function(F,M){var U=F.entry;for(F.entry=null;U;){var Z=U.callback;M.pendingcb--,Z(void 0),U=U.next}M.corkedRequestsFree.next=F})(L,P)}}var g;d.exports=W,W.WritableState=z;var $,v={deprecate:a(3340)},S=a(6871),E=a(5832).Buffer,h=(a.g!==void 0?a.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},b=a(6222),m=a(9681).getHighWaterMark,p=a(198).F,_=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,x=p.ERR_MULTIPLE_CALLBACK,A=p.ERR_STREAM_CANNOT_PIPE,R=p.ERR_STREAM_DESTROYED,C=p.ERR_STREAM_NULL_VALUES,k=p.ERR_STREAM_WRITE_AFTER_END,D=p.ERR_UNKNOWN_ENCODING,j=b.errorOrDestroy;function V(){}function z(P,L,F){g=g||a(4560),P=P||{},typeof F!="boolean"&&(F=L instanceof g),this.objectMode=!!P.objectMode,F&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=m(this,P,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var M=P.decodeStrings===!1;this.decodeStrings=!M,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(U){(function(Z,K){var oe=Z._writableState,ie=oe.sync,$e=oe.writecb;if(typeof $e!="function")throw new x;if(function(le){le.writing=!1,le.writecb=null,le.length-=le.writelen,le.writelen=0}(oe),K)(function(le,ye,_e,q,re){--ye.pendingcb,_e?({env:{}}.nextTick(re,q),{env:{}}.nextTick(H,le,ye),le._writableState.errorEmitted=!0,j(le,q)):(re(q),le._writableState.errorEmitted=!0,j(le,q),H(le,ye))})(Z,oe,ie,K,$e);else{var ce=se(oe)||Z.destroyed;ce||oe.corked||oe.bufferProcessing||!oe.bufferedRequest||Q(Z,oe),ie?{env:{}}.nextTick(ne,Z,oe,ce,$e):ne(Z,oe,ce,$e)}})(L,U)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function W(P){var L=this instanceof(g=g||a(4560));if(!L&&!$.call(W,this))return new W(P);this._writableState=new z(P,this,L),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),S.call(this)}function ee(P,L,F,M,U,Z,K){L.writelen=M,L.writecb=K,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new R("write")):F?P._writev(U,L.onwrite):P._write(U,Z,L.onwrite),L.sync=!1}function ne(P,L,F,M){F||function(U,Z){Z.length===0&&Z.needDrain&&(Z.needDrain=!1,U.emit("drain"))}(P,L),L.pendingcb--,M(),H(P,L)}function Q(P,L){L.bufferProcessing=!0;var F=L.bufferedRequest;if(P._writev&&F&&F.next){var M=L.bufferedRequestCount,U=new Array(M),Z=L.corkedRequestsFree;Z.entry=F;for(var K=0,oe=!0;F;)U[K]=F,F.isBuf||(oe=!1),F=F.next,K+=1;U.allBuffers=oe,ee(P,L,!0,L.length,U,"",Z.finish),L.pendingcb++,L.lastBufferedRequest=null,Z.next?(L.corkedRequestsFree=Z.next,Z.next=null):L.corkedRequestsFree=new u(L),L.bufferedRequestCount=0}else{for(;F;){var ie=F.chunk,$e=F.encoding,ce=F.callback;if(ee(P,L,!1,L.objectMode?1:ie.length,ie,$e,ce),F=F.next,L.bufferedRequestCount--,L.writing)break}F===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=F,L.bufferProcessing=!1}function se(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function be(P,L){P._final(function(F){L.pendingcb--,F&&j(P,F),L.prefinished=!0,P.emit("prefinish"),H(P,L)})}function H(P,L){var F=se(L);if(F&&(function(U,Z){Z.prefinished||Z.finalCalled||(typeof U._final!="function"||Z.destroyed?(Z.prefinished=!0,U.emit("prefinish")):(Z.pendingcb++,Z.finalCalled=!0,{env:{}}.nextTick(be,U,Z)))}(P,L),L.pendingcb===0&&(L.finished=!0,P.emit("finish"),L.autoDestroy))){var M=P._readableState;(!M||M.autoDestroy&&M.endEmitted)&&P.destroy()}return F}a(1679)(W,S),z.prototype.getBuffer=function(){for(var P=this.bufferedRequest,L=[];P;)L.push(P),P=P.next;return L},function(){try{Object.defineProperty(z.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?($=Function.prototype[Symbol.hasInstance],Object.defineProperty(W,Symbol.hasInstance,{value:function(P){return!!$.call(this,P)||this===W&&P&&P._writableState instanceof z}})):$=function(P){return P instanceof this},W.prototype.pipe=function(){j(this,new A)},W.prototype.write=function(P,L,F){var M,U=this._writableState,Z=!1,K=!U.objectMode&&(M=P,E.isBuffer(M)||M instanceof h);return K&&!E.isBuffer(P)&&(P=function(oe){return E.from(oe)}(P)),typeof L=="function"&&(F=L,L=null),K?L="buffer":L||(L=U.defaultEncoding),typeof F!="function"&&(F=V),U.ending?function(oe,ie){var $e=new k;j(oe,$e),{env:{}}.nextTick(ie,$e)}(this,F):(K||function(oe,ie,$e,ce){var le;return $e===null?le=new C:typeof $e=="string"||ie.objectMode||(le=new _("chunk",["string","Buffer"],$e)),!le||(j(oe,le),{env:{}}.nextTick(ce,le),!1)}(this,U,P,F))&&(U.pendingcb++,Z=function(oe,ie,$e,ce,le,ye){if(!$e){var _e=function(we,Re,ke){return we.objectMode||we.decodeStrings===!1||typeof Re!="string"||(Re=E.from(Re,ke)),Re}(ie,ce,le);ce!==_e&&($e=!0,le="buffer",ce=_e)}var q=ie.objectMode?1:ce.length;ie.length+=q;var re=ie.length<ie.highWaterMark;if(re||(ie.needDrain=!0),ie.writing||ie.corked){var fe=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:ce,encoding:le,isBuf:$e,callback:ye,next:null},fe?fe.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else ee(oe,ie,!1,q,ce,le,ye);return re}(this,U,K,P,L,F)),Z},W.prototype.cork=function(){this._writableState.corked++},W.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||Q(this,P))},W.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new D(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(W.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(W.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),W.prototype._write=function(P,L,F){F(new y("_write()"))},W.prototype._writev=null,W.prototype.end=function(P,L,F){var M=this._writableState;return typeof P=="function"?(F=P,P=null,L=null):typeof L=="function"&&(F=L,L=null),P!=null&&this.write(P,L),M.corked&&(M.corked=1,this.uncork()),M.ending||function(U,Z,K){Z.ending=!0,H(U,Z),K&&(Z.finished?{env:{}}.nextTick(K):U.once("finish",K)),Z.ended=!0,U.writable=!1}(this,M,F),this},Object.defineProperty(W.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),W.prototype.destroy=b.destroy,W.prototype._undestroy=b.undestroy,W.prototype._destroy=function(P,L){L(P)}},4224:(d,f,a)=>{var u=a(6511).ctor("require","modify","init","default","ignore");function g(){this.activePaths=new u}d.exports=g,g.prototype.strictMode=!0,g.prototype.fullPath=void 0,g.prototype.selected=void 0,g.prototype.shardval=void 0,g.prototype.saveError=void 0,g.prototype.validationError=void 0,g.prototype.adhocPaths=void 0,g.prototype.removing=void 0,g.prototype.inserting=void 0,g.prototype.saving=void 0,g.prototype.version=void 0,g.prototype._id=void 0,g.prototype.ownerDocument=void 0,g.prototype.populate=void 0,g.prototype.populated=void 0,g.prototype.primitiveAtomics=void 0,g.prototype.wasPopulated=!1,g.prototype.scope=void 0,g.prototype.session=null,g.prototype.pathsToScopes=null,g.prototype.cachedRequired=null},4252:(d,f,a)=>{var u=a(5832).Buffer,g=a(6876);function $(v){return v._prev=v._cipher.encryptBlock(v._prev),v._prev}f.encrypt=function(v,S){for(;v._cache.length<S.length;)v._cache=u.concat([v._cache,$(v)]);var E=v._cache.slice(0,S.length);return v._cache=v._cache.slice(S.length),g(S,E)}},4258:(d,f,a)=>{function u(p){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(p)}var g=a(1620).Reporter,$=a(1620).EncoderBuffer,v=a(1620).DecoderBuffer,S=a(3528),E=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],h=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(E);function b(p,_){var y={};this._baseState=y,y.enc=p,y.parent=_||null,y.children=null,y.tag=null,y.args=null,y.reverseArgs=null,y.choice=null,y.optional=!1,y.any=!1,y.obj=!1,y.use=null,y.useDecoder=null,y.key=null,y.default=null,y.explicit=null,y.implicit=null,y.contains=null,y.parent||(y.children=[],this._wrap())}d.exports=b;var m=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];b.prototype.clone=function(){var p=this._baseState,_={};m.forEach(function(x){_[x]=p[x]});var y=new this.constructor(_.parent);return y._baseState=_,y},b.prototype._wrap=function(){var p=this._baseState;h.forEach(function(_){this[_]=function(){var y=new this.constructor(this);return p.children.push(y),y[_].apply(y,arguments)}},this)},b.prototype._init=function(p){var _=this._baseState;S(_.parent===null),p.call(this),_.children=_.children.filter(function(y){return y._baseState.parent===this},this),S.equal(_.children.length,1,"Root node can have only one child")},b.prototype._useArgs=function(p){var _=this._baseState,y=p.filter(function(x){return x instanceof this.constructor},this);p=p.filter(function(x){return!(x instanceof this.constructor)},this),y.length!==0&&(S(_.children===null),_.children=y,y.forEach(function(x){x._baseState.parent=this},this)),p.length!==0&&(S(_.args===null),_.args=p,_.reverseArgs=p.map(function(x){if(u(x)!=="object"||x.constructor!==Object)return x;var A={};return Object.keys(x).forEach(function(R){R==(0|R)&&(R|=0);var C=x[R];A[C]=R}),A}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(p){b.prototype[p]=function(){var _=this._baseState;throw new Error(p+" not implemented for encoding: "+_.enc)}}),E.forEach(function(p){b.prototype[p]=function(){var _=this._baseState,y=Array.prototype.slice.call(arguments);return S(_.tag===null),_.tag=p,this._useArgs(y),this}}),b.prototype.use=function(p){S(p);var _=this._baseState;return S(_.use===null),_.use=p,this},b.prototype.optional=function(){return this._baseState.optional=!0,this},b.prototype.def=function(p){var _=this._baseState;return S(_.default===null),_.default=p,_.optional=!0,this},b.prototype.explicit=function(p){var _=this._baseState;return S(_.explicit===null&&_.implicit===null),_.explicit=p,this},b.prototype.implicit=function(p){var _=this._baseState;return S(_.explicit===null&&_.implicit===null),_.implicit=p,this},b.prototype.obj=function(){var p=this._baseState,_=Array.prototype.slice.call(arguments);return p.obj=!0,_.length!==0&&this._useArgs(_),this},b.prototype.key=function(p){var _=this._baseState;return S(_.key===null),_.key=p,this},b.prototype.any=function(){return this._baseState.any=!0,this},b.prototype.choice=function(p){var _=this._baseState;return S(_.choice===null),_.choice=p,this._useArgs(Object.keys(p).map(function(y){return p[y]})),this},b.prototype.contains=function(p){var _=this._baseState;return S(_.use===null),_.contains=p,this},b.prototype._decode=function(p,_){var y=this._baseState;if(y.parent===null)return p.wrapResult(y.children[0]._decode(p,_));var x,A=y.default,R=!0,C=null;if(y.key!==null&&(C=p.enterKey(y.key)),y.optional){var k=null;if(y.explicit!==null?k=y.explicit:y.implicit!==null?k=y.implicit:y.tag!==null&&(k=y.tag),k!==null||y.any){if(R=this._peekTag(p,k,y.any),p.isError(R))return R}else{var D=p.save();try{y.choice===null?this._decodeGeneric(y.tag,p,_):this._decodeChoice(p,_),R=!0}catch{R=!1}p.restore(D)}}if(y.obj&&R&&(x=p.enterObject()),R){if(y.explicit!==null){var j=this._decodeTag(p,y.explicit);if(p.isError(j))return j;p=j}var V=p.offset;if(y.use===null&&y.choice===null){y.any&&(D=p.save());var z=this._decodeTag(p,y.implicit!==null?y.implicit:y.tag,y.any);if(p.isError(z))return z;y.any?A=p.raw(D):p=z}if(_&&_.track&&y.tag!==null&&_.track(p.path(),V,p.length,"tagged"),_&&_.track&&y.tag!==null&&_.track(p.path(),p.offset,p.length,"content"),y.any||(A=y.choice===null?this._decodeGeneric(y.tag,p,_):this._decodeChoice(p,_)),p.isError(A))return A;if(y.any||y.choice!==null||y.children===null||y.children.forEach(function(ee){ee._decode(p,_)}),y.contains&&(y.tag==="octstr"||y.tag==="bitstr")){var W=new v(A);A=this._getUse(y.contains,p._reporterState.obj)._decode(W,_)}}return y.obj&&R&&(A=p.leaveObject(x)),y.key===null||A===null&&R!==!0?C!==null&&p.exitKey(C):p.leaveKey(C,y.key,A),A},b.prototype._decodeGeneric=function(p,_,y){var x=this._baseState;return p==="seq"||p==="set"?null:p==="seqof"||p==="setof"?this._decodeList(_,p,x.args[0],y):/str$/.test(p)?this._decodeStr(_,p,y):p==="objid"&&x.args?this._decodeObjid(_,x.args[0],x.args[1],y):p==="objid"?this._decodeObjid(_,null,null,y):p==="gentime"||p==="utctime"?this._decodeTime(_,p,y):p==="null_"?this._decodeNull(_,y):p==="bool"?this._decodeBool(_,y):p==="objDesc"?this._decodeStr(_,p,y):p==="int"||p==="enum"?this._decodeInt(_,x.args&&x.args[0],y):x.use!==null?this._getUse(x.use,_._reporterState.obj)._decode(_,y):_.error("unknown tag: "+p)},b.prototype._getUse=function(p,_){var y=this._baseState;return y.useDecoder=this._use(p,_),S(y.useDecoder._baseState.parent===null),y.useDecoder=y.useDecoder._baseState.children[0],y.implicit!==y.useDecoder._baseState.implicit&&(y.useDecoder=y.useDecoder.clone(),y.useDecoder._baseState.implicit=y.implicit),y.useDecoder},b.prototype._decodeChoice=function(p,_){var y=this._baseState,x=null,A=!1;return Object.keys(y.choice).some(function(R){var C=p.save(),k=y.choice[R];try{var D=k._decode(p,_);if(p.isError(D))return!1;x={type:R,value:D},A=!0}catch{return p.restore(C),!1}return!0},this),A?x:p.error("Choice not matched")},b.prototype._createEncoderBuffer=function(p){return new $(p,this.reporter)},b.prototype._encode=function(p,_,y){var x=this._baseState;if(x.default===null||x.default!==p){var A=this._encodeValue(p,_,y);if(A!==void 0&&!this._skipDefault(A,_,y))return A}},b.prototype._encodeValue=function(p,_,y){var x=this._baseState;if(x.parent===null)return x.children[0]._encode(p,_||new g);var A=null;if(this.reporter=_,x.optional&&p===void 0){if(x.default===null)return;p=x.default}var R=null,C=!1;if(x.any)A=this._createEncoderBuffer(p);else if(x.choice)A=this._encodeChoice(p,_);else if(x.contains)R=this._getUse(x.contains,y)._encode(p,_),C=!0;else if(x.children)R=x.children.map(function(V){if(V._baseState.tag==="null_")return V._encode(null,_,p);if(V._baseState.key===null)return _.error("Child should have a key");var z=_.enterKey(V._baseState.key);if(u(p)!=="object")return _.error("Child expected, but input is not object");var W=V._encode(p[V._baseState.key],_,p);return _.leaveKey(z),W},this).filter(function(V){return V}),R=this._createEncoderBuffer(R);else if(x.tag==="seqof"||x.tag==="setof"){if(!x.args||x.args.length!==1)return _.error("Too many args for : "+x.tag);if(!Array.isArray(p))return _.error("seqof/setof, but data is not Array");var k=this.clone();k._baseState.implicit=null,R=this._createEncoderBuffer(p.map(function(V){var z=this._baseState;return this._getUse(z.args[0],p)._encode(V,_)},k))}else x.use!==null?A=this._getUse(x.use,y)._encode(p,_):(R=this._encodePrimitive(x.tag,p),C=!0);if(!x.any&&x.choice===null){var D=x.implicit!==null?x.implicit:x.tag,j=x.implicit===null?"universal":"context";D===null?x.use===null&&_.error("Tag could be omitted only for .use()"):x.use===null&&(A=this._encodeComposite(D,C,j,R))}return x.explicit!==null&&(A=this._encodeComposite(x.explicit,!1,"context",A)),A},b.prototype._encodeChoice=function(p,_){var y=this._baseState,x=y.choice[p.type];return x||S(!1,p.type+" not found in "+JSON.stringify(Object.keys(y.choice))),x._encode(p.value,_)},b.prototype._encodePrimitive=function(p,_){var y=this._baseState;if(/str$/.test(p))return this._encodeStr(_,p);if(p==="objid"&&y.args)return this._encodeObjid(_,y.reverseArgs[0],y.args[1]);if(p==="objid")return this._encodeObjid(_,null,null);if(p==="gentime"||p==="utctime")return this._encodeTime(_,p);if(p==="null_")return this._encodeNull();if(p==="int"||p==="enum")return this._encodeInt(_,y.args&&y.reverseArgs[0]);if(p==="bool")return this._encodeBool(_);if(p==="objDesc")return this._encodeStr(_,p);throw new Error("Unsupported tag: "+p)},b.prototype._isNumstr=function(p){return/^[0-9 ]*$/.test(p)},b.prototype._isPrintstr=function(p){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(p)}},4276:(d,f,a)=>{var u=65536,g=a(9732).Buffer,$=a.g.crypto||a.g.msCrypto;$&&$.getRandomValues?d.exports=function(v,S){if(v>4294967295)throw new RangeError("requested too many random bytes");var E=g.allocUnsafe(v);if(v>0)if(v>u)for(var h=0;h<v;h+=u)$.getRandomValues(E.slice(h,h+u));else $.getRandomValues(E);return typeof S=="function"?{env:{}}.nextTick(function(){S(null,E)}):E}:d.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}},4301:(d,f,a)=>{var u=a(9539),g=a(2793),$=a(3305),v=a(5549),S=a(608);d.exports=function E(h,b,m,p){var _,y=Object.keys(b),x=0,A=y.length;if(m=m||"",!(p=p||new WeakSet).has(b)){for(p.add(b);x<A;)if(_=y[x++],(m||_!=="discriminators"&&_!=="base"&&_!=="_applyDiscriminators"&&_!=="_userProvidedOptions"&&_!=="options"&&_!=="tree")&&!(m==="tree"&&b!=null&&b.instanceOfSchema||g.has(_))){if(h[_]==null)h[_]=b[_];else if(S(b[_])){if(S(h[_])||(h[_]={}),b[_]!=null){if(b[_].$isSingleNested&&h[_].$isMongooseDocumentArray||b[_].$isMongooseDocumentArray&&h[_].$isSingleNested||b[_].$isMongooseDocumentArrayElement&&h[_].$isMongooseDocumentArrayElement)continue;if(b[_].instanceOfSchema){h[_].instanceOfSchema?u(h[_],b[_].clone(),!0):h[_]=b[_].clone();continue}if($(b[_],"ObjectId")){h[_]=new v(b[_]);continue}}E(h[_],b[_],m?m+"."+_:_,p)}}b!=null&&b.instanceOfSchema&&(h.tree=Object.assign({},b.tree,h.tree))}}},4327:d=>{d.exports=function(f,a,u,g){return u?g?{bsonType:a}:{bsonType:[a,"null"]}:g?{type:f}:{type:[f,"null"]}}},4432:(d,f,a)=>{function u(b){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u(b)}function g(){g=function(){return m};var b,m={},p=Object.prototype,_=p.hasOwnProperty,y=Object.defineProperty||function(le,ye,_e){le[ye]=_e.value},x=typeof Symbol=="function"?Symbol:{},A=x.iterator||"@@iterator",R=x.asyncIterator||"@@asyncIterator",C=x.toStringTag||"@@toStringTag";function k(le,ye,_e){return Object.defineProperty(le,ye,{value:_e,enumerable:!0,configurable:!0,writable:!0}),le[ye]}try{k({},"")}catch{k=function(ye,_e,q){return ye[_e]=q}}function D(le,ye,_e,q){var re=ye&&ye.prototype instanceof Q?ye:Q,fe=Object.create(re.prototype),we=new $e(q||[]);return y(fe,"_invoke",{value:Z(le,_e,we)}),fe}function j(le,ye,_e){try{return{type:"normal",arg:le.call(ye,_e)}}catch(q){return{type:"throw",arg:q}}}m.wrap=D;var V="suspendedStart",z="suspendedYield",W="executing",ee="completed",ne={};function Q(){}function se(){}function be(){}var H={};k(H,A,function(){return this});var P=Object.getPrototypeOf,L=P&&P(P(ce([])));L&&L!==p&&_.call(L,A)&&(H=L);var F=be.prototype=Q.prototype=Object.create(H);function M(le){["next","throw","return"].forEach(function(ye){k(le,ye,function(_e){return this._invoke(ye,_e)})})}function U(le,ye){function _e(re,fe,we,Re){var ke=j(le[re],le,fe);if(ke.type!=="throw"){var ue=ke.arg,Ee=ue.value;return Ee&&u(Ee)=="object"&&_.call(Ee,"__await")?ye.resolve(Ee.__await).then(function(Ae){_e("next",Ae,we,Re)},function(Ae){_e("throw",Ae,we,Re)}):ye.resolve(Ee).then(function(Ae){ue.value=Ae,we(ue)},function(Ae){return _e("throw",Ae,we,Re)})}Re(ke.arg)}var q;y(this,"_invoke",{value:function(re,fe){function we(){return new ye(function(Re,ke){_e(re,fe,Re,ke)})}return q=q?q.then(we,we):we()}})}function Z(le,ye,_e){var q=V;return function(re,fe){if(q===W)throw Error("Generator is already running");if(q===ee){if(re==="throw")throw fe;return{value:b,done:!0}}for(_e.method=re,_e.arg=fe;;){var we=_e.delegate;if(we){var Re=K(we,_e);if(Re){if(Re===ne)continue;return Re}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if(q===V)throw q=ee,_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);q=W;var ke=j(le,ye,_e);if(ke.type==="normal"){if(q=_e.done?ee:z,ke.arg===ne)continue;return{value:ke.arg,done:_e.done}}ke.type==="throw"&&(q=ee,_e.method="throw",_e.arg=ke.arg)}}}function K(le,ye){var _e=ye.method,q=le.iterator[_e];if(q===b)return ye.delegate=null,_e==="throw"&&le.iterator.return&&(ye.method="return",ye.arg=b,K(le,ye),ye.method==="throw")||_e!=="return"&&(ye.method="throw",ye.arg=new TypeError("The iterator does not provide a '"+_e+"' method")),ne;var re=j(q,le.iterator,ye.arg);if(re.type==="throw")return ye.method="throw",ye.arg=re.arg,ye.delegate=null,ne;var fe=re.arg;return fe?fe.done?(ye[le.resultName]=fe.value,ye.next=le.nextLoc,ye.method!=="return"&&(ye.method="next",ye.arg=b),ye.delegate=null,ne):fe:(ye.method="throw",ye.arg=new TypeError("iterator result is not an object"),ye.delegate=null,ne)}function oe(le){var ye={tryLoc:le[0]};1 in le&&(ye.catchLoc=le[1]),2 in le&&(ye.finallyLoc=le[2],ye.afterLoc=le[3]),this.tryEntries.push(ye)}function ie(le){var ye=le.completion||{};ye.type="normal",delete ye.arg,le.completion=ye}function $e(le){this.tryEntries=[{tryLoc:"root"}],le.forEach(oe,this),this.reset(!0)}function ce(le){if(le||le===""){var ye=le[A];if(ye)return ye.call(le);if(typeof le.next=="function")return le;if(!isNaN(le.length)){var _e=-1,q=function re(){for(;++_e<le.length;)if(_.call(le,_e))return re.value=le[_e],re.done=!1,re;return re.value=b,re.done=!0,re};return q.next=q}}throw new TypeError(u(le)+" is not iterable")}return se.prototype=be,y(F,"constructor",{value:be,configurable:!0}),y(be,"constructor",{value:se,configurable:!0}),se.displayName=k(be,C,"GeneratorFunction"),m.isGeneratorFunction=function(le){var ye=typeof le=="function"&&le.constructor;return!!ye&&(ye===se||(ye.displayName||ye.name)==="GeneratorFunction")},m.mark=function(le){return Object.setPrototypeOf?Object.setPrototypeOf(le,be):(le.__proto__=be,k(le,C,"GeneratorFunction")),le.prototype=Object.create(F),le},m.awrap=function(le){return{__await:le}},M(U.prototype),k(U.prototype,R,function(){return this}),m.AsyncIterator=U,m.async=function(le,ye,_e,q,re){re===void 0&&(re=Promise);var fe=new U(D(le,ye,_e,q),re);return m.isGeneratorFunction(ye)?fe:fe.next().then(function(we){return we.done?we.value:fe.next()})},M(F),k(F,C,"Generator"),k(F,A,function(){return this}),k(F,"toString",function(){return"[object Generator]"}),m.keys=function(le){var ye=Object(le),_e=[];for(var q in ye)_e.push(q);return _e.reverse(),function re(){for(;_e.length;){var fe=_e.pop();if(fe in ye)return re.value=fe,re.done=!1,re}return re.done=!0,re}},m.values=ce,$e.prototype={constructor:$e,reset:function(le){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(ie),!le)for(var ye in this)ye.charAt(0)==="t"&&_.call(this,ye)&&!isNaN(+ye.slice(1))&&(this[ye]=b)},stop:function(){this.done=!0;var le=this.tryEntries[0].completion;if(le.type==="throw")throw le.arg;return this.rval},dispatchException:function(le){if(this.done)throw le;var ye=this;function _e(ke,ue){return fe.type="throw",fe.arg=le,ye.next=ke,ue&&(ye.method="next",ye.arg=b),!!ue}for(var q=this.tryEntries.length-1;q>=0;--q){var re=this.tryEntries[q],fe=re.completion;if(re.tryLoc==="root")return _e("end");if(re.tryLoc<=this.prev){var we=_.call(re,"catchLoc"),Re=_.call(re,"finallyLoc");if(we&&Re){if(this.prev<re.catchLoc)return _e(re.catchLoc,!0);if(this.prev<re.finallyLoc)return _e(re.finallyLoc)}else if(we){if(this.prev<re.catchLoc)return _e(re.catchLoc,!0)}else{if(!Re)throw Error("try statement without catch or finally");if(this.prev<re.finallyLoc)return _e(re.finallyLoc)}}}},abrupt:function(le,ye){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var q=this.tryEntries[_e];if(q.tryLoc<=this.prev&&_.call(q,"finallyLoc")&&this.prev<q.finallyLoc){var re=q;break}}re&&(le==="break"||le==="continue")&&re.tryLoc<=ye&&ye<=re.finallyLoc&&(re=null);var fe=re?re.completion:{};return fe.type=le,fe.arg=ye,re?(this.method="next",this.next=re.finallyLoc,ne):this.complete(fe)},complete:function(le,ye){if(le.type==="throw")throw le.arg;return le.type==="break"||le.type==="continue"?this.next=le.arg:le.type==="return"?(this.rval=this.arg=le.arg,this.method="return",this.next="end"):le.type==="normal"&&ye&&(this.next=ye),ne},finish:function(le){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var _e=this.tryEntries[ye];if(_e.finallyLoc===le)return this.complete(_e.completion,_e.afterLoc),ie(_e),ne}},catch:function(le){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var _e=this.tryEntries[ye];if(_e.tryLoc===le){var q=_e.completion;if(q.type==="throw"){var re=q.arg;ie(_e)}return re}}throw Error("illegal catch attempt")},delegateYield:function(le,ye,_e){return this.delegate={iterator:ce(le),resultName:ye,nextLoc:_e},this.method==="next"&&(this.arg=b),ne}},m}function $(b,m){var p=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!p){if(Array.isArray(b)||(p=function(C,k){if(C){if(typeof C=="string")return v(C,k);var D={}.toString.call(C).slice(8,-1);return D==="Object"&&C.constructor&&(D=C.constructor.name),D==="Map"||D==="Set"?Array.from(C):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?v(C,k):void 0}}(b))||m){p&&(b=p);var _=0,y=function(){};return{s:y,n:function(){return _>=b.length?{done:!0}:{done:!1,value:b[_++]}},e:function(C){throw C},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x,A=!0,R=!1;return{s:function(){p=p.call(b)},n:function(){var C=p.next();return A=C.done,C},e:function(C){R=!0,x=C},f:function(){try{A||p.return==null||p.return()}finally{if(R)throw x}}}}function v(b,m){(m==null||m>b.length)&&(m=b.length);for(var p=0,_=Array(m);p<m;p++)_[p]=b[p];return _}function S(b,m,p,_,y,x,A){try{var R=b[x](A),C=R.value}catch(k){return void p(k)}R.done?m(C):Promise.resolve(C).then(_,y)}function E(b){return function(){var m=this,p=arguments;return new Promise(function(_,y){var x=b.apply(m,p);function A(C){S(x,_,y,A,R,"next",C)}function R(C){S(x,_,y,A,R,"throw",C)}A(void 0)})}}var h=a(5782);d.exports=function(b){var m=!0;b.s.hooks.pre("save",!1,function(p){if(this.$isSubdocument)p();else{var _=this,y=this.$getAllSubdocs({useCache:!0});y.length?h(y,function(x,A){x.$__schema.s.hooks.execPre("save",x,function(R){A(R)})},function(x){if(_.$__.saveOptions&&(_.$__.saveOptions.__subdocs=null),x)return _.$__schema.s.hooks.execPost("save:error",_,[_],{error:x},function(A){p(A)});p()}):p()}},null,m),b.s.hooks.post("save",function(){var p=E(g().mark(function _(){var y,x,A,R,C;return g().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if((y=this.$__.removedSubdocs)&&y.length){k.next=3;break}return k.abrupt("return");case 3:x=[],A=$(y),k.prev=5,C=g().mark(function D(){var j;return g().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:j=R.value,x.push(new Promise(function(z,W){j.$__schema.s.hooks.execPost("deleteOne",j,[j],function(ee){if(ee)return W(ee);z()})}));case 2:case"end":return V.stop()}},D)}),A.s();case 8:if((R=A.n()).done){k.next=12;break}return k.delegateYield(C(),"t0",10);case 10:k.next=8;break;case 12:k.next=17;break;case 14:k.prev=14,k.t1=k.catch(5),A.e(k.t1);case 17:return k.prev=17,A.f(),k.finish(17);case 20:return this.$__.removedSubdocs=null,k.next=23,Promise.all(x);case 23:case"end":return k.stop()}},_,this,[[5,14,17,20]])}));return function(){return p.apply(this,arguments)}}()),b.s.hooks.post("save",function(){var p=E(g().mark(function _(){var y,x,A,R,C,k,D=this;return g().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!this.$isSubdocument){j.next=2;break}return j.abrupt("return");case 2:if(y=this,(x=this.$getAllSubdocs({useCache:!0})).length){j.next=6;break}return j.abrupt("return");case 6:A=[],R=$(x),j.prev=8,k=g().mark(function V(){var z;return g().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:z=C.value,A.push(new Promise(function(ee,ne){z.$__schema.s.hooks.execPost("save",z,[z],function(Q){if(Q)return ne(Q);ee()})}));case 2:case"end":return W.stop()}},V)}),R.s();case 11:if((C=R.n()).done){j.next=15;break}return j.delegateYield(k(),"t0",13);case 13:j.next=11;break;case 15:j.next=20;break;case 17:j.prev=17,j.t1=j.catch(8),R.e(j.t1);case 20:return j.prev=20,R.f(),j.finish(20);case 23:return j.prev=23,j.next=26,Promise.all(A);case 26:j.next=32;break;case 28:return j.prev=28,j.t2=j.catch(23),j.next=32,new Promise(function(V,z){D.$__schema.s.hooks.execPost("save:error",y,[y],{error:j.t2},function(W){if(W)return z(W);V()})});case 32:case"end":return j.stop()}},_,this,[[8,17,20,23],[23,28]])}));return function(){return p.apply(this,arguments)}}(),null,m)}},4450:(d,f,a)=>{function u(C){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},u(C)}var g=a(9639),$=a(5549),v=a(2793),S=a(2497),E=a(9696),h=a(3305),b=a(1243).isMongooseArray,m=a(608),p=a(2789),_=a(7930),y=a(7291).trustedSymbol,x=a(3633);function A(C,k,D){if(C==null)return C;if(h(C,"Double"))return new x.Double(C.value);if(typeof C=="number"||typeof C=="string"||typeof C=="boolean"||typeof C=="bigint")return C;if(Array.isArray(C))return function(ee,ne){var Q=0,se=ee.length,be=new Array(se);for(Q=0;Q<se;++Q)be[Q]=A(ee[Q],ne,!0);return be}(b(C)?C.__array:C,k);if(S(C)){if(k&&k.retainDocuments&&C.$__!=null){var j=C.$clone();return C.__index!=null&&(j.__index=C.__index),C.__parentArray!=null&&(j.__parentArray=C.__parentArray),j.$__parent=C.$__parent,j}var V,z=C.$isSingleNested;return p(C)&&C.$__!=null&&C._doc!=null?C._doc:(V=k&&k.json&&typeof C.toJSON=="function"?C.toJSON(k):C.toObject(k),k&&k.minimize&&!C.constructor.$__required&&z&&Object.keys(V).length===0?void 0:V)}var W=C.constructor;if(W)switch(E(W)){case"Object":return R(C,k,D);case"Date":return new W(+C);case"RegExp":return function(ee){var ne=new RegExp(ee.source,ee.flags);return ne.lastIndex!==ee.lastIndex&&(ne.lastIndex=ee.lastIndex),ne}(C)}return h(C,"ObjectId")?k&&k.flattenObjectIds?C.toJSON():new $(C.id):h(C,"Decimal128")?k&&k.flattenDecimals?C.toJSON():g.fromString(C.toString()):!W&&m(C)?R(C,k,D):u(C)==="object"&&C[_.schemaTypeSymbol]?C.clone():k&&k.bson&&typeof C.toBSON=="function"?C:typeof C.valueOf=="function"?C.valueOf():R(C,k,D)}function R(C,k,D){var j,V=k&&k.minimize,z=k&&k.omitUndefined,W=k&&k._seen,ee={};if(W&&W.has(C))return W.get(C);W&&W.set(C,ee),y in C&&(k==null?void 0:k.copyTrustedSymbol)!==!1&&(ee[y]=C[y]);for(var ne=Object.keys(C),Q=ne.length,se=0;se<Q;++se){var be=ne[se];if(!v.has(be)){var H=A(C[be],k,!1);V!==!1&&!z||H!==void 0?V===!0&&H===void 0||(j||(j=!0),ee[be]=H):delete ee[be]}}return V&&!D?j&&ee:ee}d.exports=A},4473:d=>{function f(a,u){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(g.has(a))throw new Error("Infinite subdocument loop: subdoc with _id "+a._id+" is a parent of itself");var $=a.$parent(),v=a.$__pathRelativeToParent(void 0,!1)+"."+u;$.$__.activePaths.clearPath(v),$.$isSubdocument&&f($,v,g)}d.exports=function(a,u,g){var $=(g=g||{}).skipDocArrays,v=0;if(!a)return v;for(var S=0,E=Object.keys(a.$__.activePaths.getStatePaths("modify"));S<E.length;S++){var h=E[S];if($){var b=a.$__schema.path(h);if(b&&b.$isMongooseDocumentArray)continue}h.startsWith(u+".")&&(a.$__.activePaths.clearPath(h),++v,a.$isSubdocument&&f(a,h))}return v}},4488:(d,f,a)=>{var u=a(9732).Buffer,g=a(6876);function $(v,S,E){var h=S.length,b=g(S,v._cache);return v._cache=v._cache.slice(h),v._prev=u.concat([v._prev,E?S:b]),b}f.encrypt=function(v,S,E){for(var h,b=u.allocUnsafe(0);S.length;){if(v._cache.length===0&&(v._cache=v._cipher.encryptBlock(v._prev),v._prev=u.allocUnsafe(0)),!(v._cache.length<=S.length)){b=u.concat([b,$(v,S,E)]);break}h=v._cache.length,b=u.concat([b,$(v,S.slice(0,h),E)]),S=S.slice(h)}return b}},4560:(d,f,a)=>{var u=Object.keys||function(p){var _=[];for(var y in p)_.push(y);return _};d.exports=h;var g=a(8134),$=a(4186);a(1679)(h,g);for(var v=u($.prototype),S=0;S<v.length;S++){var E=v[S];h.prototype[E]||(h.prototype[E]=$.prototype[E])}function h(p){if(!(this instanceof h))return new h(p);g.call(this,p),$.call(this,p),this.allowHalfOpen=!0,p&&(p.readable===!1&&(this.readable=!1),p.writable===!1&&(this.writable=!1),p.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",b)))}function b(){this._writableState.ended||{env:{}}.nextTick(m,this)}function m(p){p.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}})},4561:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!h})()}function $(h){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(h)}function v(h,b){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},v(h,b)}var S=function(h){function b(){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,b),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,b,arguments)}return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),_&&v(p,_)}(b,h),m=b,Object.defineProperty(m,"prototype",{writable:!1}),m;var m}(a(8879)),E=a(5761);Object.defineProperty(S.prototype,"excludeIndexes",E),Object.defineProperty(S.prototype,"_id",E),d.exports=S},4589:d=>{d.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},4592:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!h})()}function $(h){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(h)}function v(h,b){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},v(h,b)}var S=function(h){function b(){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,b),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,b,arguments)}return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),_&&v(p,_)}(b,h),m=b,Object.defineProperty(m,"prototype",{writable:!1}),m;var m}(a(8879)),E=a(5761);Object.defineProperty(S.prototype,"enum",E),Object.defineProperty(S.prototype,"of",E),Object.defineProperty(S.prototype,"castNonArrays",E),d.exports=S},4606:(d,f,a)=>{d.exports=a(2951)},4625:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!h})()}function $(h){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(h)}function v(h,b){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},v(h,b)}var S=function(h){function b(){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,b),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,b,arguments)}return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),_&&v(p,_)}(b,h),m=b,Object.defineProperty(m,"prototype",{writable:!1}),m;var m}(a(8879)),E=a(5761);Object.defineProperty(S.prototype,"auto",E),Object.defineProperty(S.prototype,"populate",E),d.exports=S},4685:(d,f,a)=>{var u=a(3528),g=a(1679);function $(h,b){return(64512&h.charCodeAt(b))==55296&&!(b<0||b+1>=h.length)&&(64512&h.charCodeAt(b+1))==56320}function v(h){return(h>>>24|h>>>8&65280|h<<8&16711680|(255&h)<<24)>>>0}function S(h){return h.length===1?"0"+h:h}function E(h){return h.length===7?"0"+h:h.length===6?"00"+h:h.length===5?"000"+h:h.length===4?"0000"+h:h.length===3?"00000"+h:h.length===2?"000000"+h:h.length===1?"0000000"+h:h}f.inherits=g,f.toArray=function(h,b){if(Array.isArray(h))return h.slice();if(!h)return[];var m=[];if(typeof h=="string")if(b){if(b==="hex")for((h=h.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(h="0"+h),_=0;_<h.length;_+=2)m.push(parseInt(h[_]+h[_+1],16))}else for(var p=0,_=0;_<h.length;_++){var y=h.charCodeAt(_);y<128?m[p++]=y:y<2048?(m[p++]=y>>6|192,m[p++]=63&y|128):$(h,_)?(y=65536+((1023&y)<<10)+(1023&h.charCodeAt(++_)),m[p++]=y>>18|240,m[p++]=y>>12&63|128,m[p++]=y>>6&63|128,m[p++]=63&y|128):(m[p++]=y>>12|224,m[p++]=y>>6&63|128,m[p++]=63&y|128)}else for(_=0;_<h.length;_++)m[_]=0|h[_];return m},f.toHex=function(h){for(var b="",m=0;m<h.length;m++)b+=S(h[m].toString(16));return b},f.htonl=v,f.toHex32=function(h,b){for(var m="",p=0;p<h.length;p++){var _=h[p];b==="little"&&(_=v(_)),m+=E(_.toString(16))}return m},f.zero2=S,f.zero8=E,f.join32=function(h,b,m,p){var _=m-b;u(_%4==0);for(var y=new Array(_/4),x=0,A=b;x<y.length;x++,A+=4){var R;R=p==="big"?h[A]<<24|h[A+1]<<16|h[A+2]<<8|h[A+3]:h[A+3]<<24|h[A+2]<<16|h[A+1]<<8|h[A],y[x]=R>>>0}return y},f.split32=function(h,b){for(var m=new Array(4*h.length),p=0,_=0;p<h.length;p++,_+=4){var y=h[p];b==="big"?(m[_]=y>>>24,m[_+1]=y>>>16&255,m[_+2]=y>>>8&255,m[_+3]=255&y):(m[_+3]=y>>>24,m[_+2]=y>>>16&255,m[_+1]=y>>>8&255,m[_]=255&y)}return m},f.rotr32=function(h,b){return h>>>b|h<<32-b},f.rotl32=function(h,b){return h<<b|h>>>32-b},f.sum32=function(h,b){return h+b>>>0},f.sum32_3=function(h,b,m){return h+b+m>>>0},f.sum32_4=function(h,b,m,p){return h+b+m+p>>>0},f.sum32_5=function(h,b,m,p,_){return h+b+m+p+_>>>0},f.sum64=function(h,b,m,p){var _=h[b],y=p+h[b+1]>>>0,x=(y<p?1:0)+m+_;h[b]=x>>>0,h[b+1]=y},f.sum64_hi=function(h,b,m,p){return(b+p>>>0<b?1:0)+h+m>>>0},f.sum64_lo=function(h,b,m,p){return b+p>>>0},f.sum64_4_hi=function(h,b,m,p,_,y,x,A){var R=0,C=b;return R+=(C=C+p>>>0)<b?1:0,R+=(C=C+y>>>0)<y?1:0,h+m+_+x+(R+=(C=C+A>>>0)<A?1:0)>>>0},f.sum64_4_lo=function(h,b,m,p,_,y,x,A){return b+p+y+A>>>0},f.sum64_5_hi=function(h,b,m,p,_,y,x,A,R,C){var k=0,D=b;return k+=(D=D+p>>>0)<b?1:0,k+=(D=D+y>>>0)<y?1:0,k+=(D=D+A>>>0)<A?1:0,h+m+_+x+R+(k+=(D=D+C>>>0)<C?1:0)>>>0},f.sum64_5_lo=function(h,b,m,p,_,y,x,A,R,C){return b+p+y+A+C>>>0},f.rotr64_hi=function(h,b,m){return(b<<32-m|h>>>m)>>>0},f.rotr64_lo=function(h,b,m){return(h<<32-m|b>>>m)>>>0},f.shr64_hi=function(h,b,m){return h>>>m},f.shr64_lo=function(h,b,m){return(h<<32-m|b>>>m)>>>0}},4756:d=>{var f=function(a){return a!=a};d.exports=function(a,u){return a===0&&u===0?1/a==1/u:a===u||!(!f(a)||!f(u))}},4758:d=>{!{}.version||{}.version.indexOf("v0.")===0||{}.version.indexOf("v1.")===0&&{}.version.indexOf("v1.8.")!==0?d.exports={nextTick:function(f,a,u,g){if(typeof f!="function")throw new TypeError('"callback" argument must be a function');var $,v,S=arguments.length;switch(S){case 0:case 1:return{env:{}}.nextTick(f);case 2:return{env:{}}.nextTick(function(){f.call(null,a)});case 3:return{env:{}}.nextTick(function(){f.call(null,a,u)});case 4:return{env:{}}.nextTick(function(){f.call(null,a,u,g)});default:for($=new Array(S-1),v=0;v<$.length;)$[v++]=arguments[v];return{env:{}}.nextTick(function(){f.apply(null,$)})}}}:d.exports={env:{}}},4829:(d,f,a)=>{d.exports=a(8533)},4859:(d,f,a)=>{var u=a(5832).Buffer;function g(D,j){var V=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(!V){if(Array.isArray(D)||(V=function(se,be){if(se){if(typeof se=="string")return $(se,be);var H={}.toString.call(se).slice(8,-1);return H==="Object"&&se.constructor&&(H=se.constructor.name),H==="Map"||H==="Set"?Array.from(se):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?$(se,be):void 0}}(D))||j){V&&(D=V);var z=0,W=function(){};return{s:W,n:function(){return z>=D.length?{done:!0}:{done:!1,value:D[z++]}},e:function(se){throw se},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ee,ne=!0,Q=!1;return{s:function(){V=V.call(D)},n:function(){var se=V.next();return ne=se.done,se},e:function(se){Q=!0,ee=se},f:function(){try{ne||V.return==null||V.return()}finally{if(Q)throw ee}}}}function $(D,j){(j==null||j>D.length)&&(j=D.length);for(var V=0,z=Array(j);V<j;V++)z[V]=D[V];return z}var v=a(8920),S=a(2400),E=a(863),h=a(8677),b=a(3303)._,m=a(8768),p=a(3305),_=a(7930).arrayParentSymbol,y=a(7930).arrayPathSymbol,x=a(7930).arraySchemaSymbol,A=a(7930).documentArrayParent,R=Array.prototype.toString,C={toBSON:function(){return this.toObject(b)},toString:function(){return R.call(this.__array.map(function(D){return D!=null&&D.$__!=null?D.toString():D}))},getArrayParent:function(){return this[_]},_cast:function(D,j,V){if(this[x]==null)return D;var z=this[x].casterConstructor;if((z.$isMongooseDocumentArray?m.isMongooseDocumentArray(D):D instanceof z)||D&&D.constructor&&D.constructor.baseCasterConstructor===z)return D[A]&&D.__parentArray||(D[A]=this[_],D.__parentArray=this),D.$setIndex(j),D;if(D==null)return null;if((u.isBuffer(D)||p(D,"ObjectId")||!m.isObject(D))&&(D={_id:D}),D&&z.discriminators&&z.schema&&z.schema.options&&z.schema.options.discriminatorKey)if(typeof D[z.schema.options.discriminatorKey]=="string"&&z.discriminators[D[z.schema.options.discriminatorKey]])z=z.discriminators[D[z.schema.options.discriminatorKey]];else{var W=h(z.discriminators,D[z.schema.options.discriminatorKey]);W&&(z=W)}if(z.$isMongooseDocumentArray)return z.cast(D,this,void 0,void 0,j);var ee=new z(D,this,V,void 0,j);return ee.isNew=!0,ee},id:function(D){var j,V,z;try{j=E(D).toString()}catch{j=null}var W,ee=g(this);try{for(ee.s();!(W=ee.n()).done;){var ne=W.value;if(ne&&(z=ne.get("_id"))!=null){if(z instanceof S){if(V||(V=String(D)),V==z._id)return ne}else if(p(D,"ObjectId")||p(z,"ObjectId")){if(j==z)return ne}else if(D==z||m.deepEqual(D,z))return ne}}}catch(Q){ee.e(Q)}finally{ee.f()}return null},toObject:function(D){return[].concat(this.map(function(j){return j==null?null:typeof j.toObject!="function"?j:j.toObject(D)}))},$toObject:function(){return this.constructor.prototype.toObject.apply(this,arguments)},push:function(){var D=v.push.apply(this,arguments);return k(this),D},pull:function(){var D=v.pull.apply(this,arguments);return k(this),D},shift:function(){var D=v.shift.apply(this,arguments);return k(this),D},splice:function(){var D=v.splice.apply(this,arguments);return k(this),D},inspect:function(){return this.toObject()},create:function(D){var j=this[x].casterConstructor;if(D&&j.discriminators&&j.schema&&j.schema.options&&j.schema.options.discriminatorKey)if(typeof D[j.schema.options.discriminatorKey]=="string"&&j.discriminators[D[j.schema.options.discriminatorKey]])j=j.discriminators[D[j.schema.options.discriminatorKey]];else{var V=h(j.discriminators,D[j.schema.options.discriminatorKey]);V&&(j=V)}return new j(D,this)},notify:function(D){var j=this;return function V(z,W){for(var ee=(W=W||j).length;ee--;)W[ee]!=null&&(D==="save"&&(z=j[ee]),m.isMongooseArray(W[ee])?V(z,W[ee]):W[ee]&&W[ee].emit(D,z))}},set:function(D,j,V){var z=this.__array;if(V)return z[D]=j,this;var W=C._cast.call(this,j,D);return C._markModified.call(this,D),z[D]=W,this},_markModified:function(D,j){var V,z=this[_];if(z){if(V=this[y],arguments.length&&(V=j!=null?V+"."+D.__index+"."+j:V+"."+D),V!=null&&V.endsWith(".$"))return this;z.markModified(V,arguments.length!==0?D:z)}return this}};function k(D){var j=D[_];if(j&&j.$__.populated!=null){var V,z=g(Object.keys(j.$__.populated).filter(function(ee){return ee.startsWith(D[y]+".")}));try{var W=function(){var ee=V.value,ne=ee.slice((D[y]+".").length);if(!Array.isArray(j.$__.populated[ee].value))return 1;j.$__.populated[ee].value=D.map(function(Q){return Q.$populated(ne)})};for(z.s();!(V=z.n()).done;)W()}catch(ee){z.e(ee)}finally{z.f()}}}d.exports=C},4878:(d,f,a)=>{function u(x){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},u(x)}function g(x,A,R){return(A=function(C){var k=function(D){if(u(D)!="object"||!D)return D;var j=D[Symbol.toPrimitive];if(j!==void 0){var V=j.call(D,"string");if(u(V)!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(D)}(C);return u(k)=="symbol"?k:k+""}(A))in x?Object.defineProperty(x,A,{value:R,enumerable:!0,configurable:!0,writable:!0}):x[A]=R,x}var $=a(8920),v=a(4859),S=a(2400),E=a(7930).arrayAtomicsSymbol,h=a(7930).arrayAtomicsBackupSymbol,b=a(7930).arrayParentSymbol,m=a(7930).arrayPathSymbol,p=a(7930).arraySchemaSymbol,_=Array.prototype.push,y=/^\d+$/;d.exports=function(x,A,R,C){var k=[],D=g(g(g(g(g({},E,{}),h,void 0),m,A),p,void 0),b,void 0);if(Array.isArray(x)&&(x[m]===A&&x[b]===R&&(D[E]=Object.assign({},x[E])),x.forEach(function(V){_.call(k,V)})),D[m]=A,D.__array=k,R&&R instanceof S)for(D[b]=R,D[p]=R.$__schema.path(A);D[p]!=null&&D[p].$isMongooseArray&&!D[p].$isMongooseDocumentArray;)D[p]=D[p].casterConstructor;var j=new Proxy(k,{get:function(V,z){return z==="isMongooseArray"||z==="isMongooseArrayProxy"||z==="isMongooseDocumentArray"||z==="isMongooseDocumentArrayProxy"||(D.hasOwnProperty(z)?D[z]:v.hasOwnProperty(z)?v[z]:C&&C.virtuals&&C.virtuals.hasOwnProperty(z)?C.virtuals[z].applyGetters(void 0,V):$.hasOwnProperty(z)?$[z]:k[z])},set:function(V,z,W){return typeof z=="string"&&y.test(z)?v.set.call(j,z,W,!1):D.hasOwnProperty(z)?D[z]=W:C&&C.virtuals&&C.virtuals.hasOwnProperty(z)?C.virtuals[z].applySetters(W,V):k[z]=W,!0}});return j}},4919:(d,f,a)=>{var u=a(2859),g=a(6379),$=a(1970),v=$.assert,S=$.parseBytes,E=a(208),h=a(8433);function b(m){if(v(m==="ed25519","only tested with ed25519 so far"),!(this instanceof b))return new b(m);m=g[m].curve,this.curve=m,this.g=m.g,this.g.precompute(m.n.bitLength()+1),this.pointClass=m.point().constructor,this.encodingLength=Math.ceil(m.n.bitLength()/8),this.hash=u.sha512}d.exports=b,b.prototype.sign=function(m,p){m=S(m);var _=this.keyFromSecret(p),y=this.hashInt(_.messagePrefix(),m),x=this.g.mul(y),A=this.encodePoint(x),R=this.hashInt(A,_.pubBytes(),m).mul(_.priv()),C=y.add(R).umod(this.curve.n);return this.makeSignature({R:x,S:C,Rencoded:A})},b.prototype.verify=function(m,p,_){if(m=S(m),(p=this.makeSignature(p)).S().gte(p.eddsa.curve.n)||p.S().isNeg())return!1;var y=this.keyFromPublic(_),x=this.hashInt(p.Rencoded(),y.pubBytes(),m),A=this.g.mul(p.S());return p.R().add(y.pub().mul(x)).eq(A)},b.prototype.hashInt=function(){for(var m=this.hash(),p=0;p<arguments.length;p++)m.update(arguments[p]);return $.intFromLE(m.digest()).umod(this.curve.n)},b.prototype.keyFromPublic=function(m){return E.fromPublic(this,m)},b.prototype.keyFromSecret=function(m){return E.fromSecret(this,m)},b.prototype.makeSignature=function(m){return m instanceof h?m:new h(this,m)},b.prototype.encodePoint=function(m){var p=m.getY().toArray("le",this.encodingLength);return p[this.encodingLength-1]|=m.getX().isOdd()?128:0,p},b.prototype.decodePoint=function(m){var p=(m=$.parseBytes(m)).length-1,_=m.slice(0,p).concat(-129&m[p]),y=!!(128&m[p]),x=$.intFromLE(_);return this.curve.pointFromY(x,y)},b.prototype.encodeInt=function(m){return m.toArray("le",this.encodingLength)},b.prototype.decodeInt=function(m){return $.intFromLE(m)},b.prototype.isPoint=function(m){return m instanceof this.pointClass}},4937:(d,f,a)=>{var u=a(9732).Buffer;function g(v,S,E){for(var h,b,m=-1,p=0;++m<8;)h=S&1<<7-m?128:0,p+=(128&(b=v._cipher.encryptBlock(v._prev)[0]^h))>>m%8,v._prev=$(v._prev,E?h:b);return p}function $(v,S){var E=v.length,h=-1,b=u.allocUnsafe(v.length);for(v=u.concat([v,u.from([S])]);++h<E;)b[h]=v[h]<<1|v[h+1]>>7;return b}f.encrypt=function(v,S,E){for(var h=S.length,b=u.allocUnsafe(h),m=-1;++m<h;)b[m]=g(v,S[m],E);return b}},4957:(d,f,a)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},u(m)}function g(m,p){var _=Object.keys(m);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(m);p&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(m,x).enumerable})),_.push.apply(_,y)}return _}function $(m){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?g(Object(_),!0).forEach(function(y){v(m,y,_[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(_)):g(Object(_)).forEach(function(y){Object.defineProperty(m,y,Object.getOwnPropertyDescriptor(_,y))})}return m}function v(m,p,_){return(p=function(y){var x=function(A){if(u(A)!="object"||!A)return A;var R=A[Symbol.toPrimitive];if(R!==void 0){var C=R.call(A,"string");if(u(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}(y);return u(x)=="symbol"?x:x+""}(p))in m?Object.defineProperty(m,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):m[p]=_,m}var S=a(7160),E=a(5268);d.exports=b,b.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];var h=new Set(b.middlewareFunctions.flatMap(function(m){return[m,"$__".concat(m)]}));function b(m,p,_){var y={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},x=(_=_||{}).decorateDoc?m:m.prototype;m.$appliedHooks=!0;for(var A=0,R=Object.keys(p.paths);A<R.length;A++){var C=R[A],k=p.paths[C],D=null;if(k.$isSingleNested)D=k.caster;else{if(!k.$isMongooseDocumentArray)continue;D=k.Constructor}if(!D.$appliedHooks&&(b(D,k.schema,$($({},_),{},{isChildSchema:!0})),D.discriminators!=null))for(var j=0,V=Object.keys(D.discriminators);j<V.length;j++){var z=V[j];b(D.discriminators[z],D.discriminators[z].schema,_)}}var W=p.s.hooks.filter(function(U){return U.name==="updateOne"||U.name==="deleteOne"?!!U.document:U.name==="remove"||U.name==="init"?U.document==null||!!U.document:U.query==null&&U.document==null||U.document!==!1}).filter(function(U){return!p.methods[U.name]||!U.fn[S.builtInMiddleware]});m._middleware=W,x.$__originalValidate=x.$__originalValidate||x.$__validate;for(var ee=0,ne=_&&_.isChildSchema?["save","validate","deleteOne"]:["save","validate"];ee<ne.length;ee++){var Q=ne[ee],se=Q==="validate"?"$__originalValidate":"$__".concat(Q),be=W.createWrapper(Q,x[se],null,y);x["$__".concat(Q)]=be}x.$__init=W.createWrapperSync("init",x.$__init,null,y);for(var H=Object.keys(p.methods),P=Object.assign({},y,{checkForPromise:!0}),L=function(){var U=M[F];if(h.has(U)||!W.hasHooks(U))return 0;var Z=x[U];x[U]=function(){var K=this,oe=Array.prototype.slice.call(arguments),ie=oe.slice(-1).pop(),$e=typeof ie=="function"?oe.slice(0,oe.length-1):oe;return E(ie,function(ce){return K["$__".concat(U)].apply(K,$e.concat([ce]))},m.events)},x["$__".concat(U)]=W.createWrapper(U,Z,null,P)},F=0,M=H;F<M.length;F++)L()}},5022:(d,f,a)=>{var u=a(6426),g=a(7160),$=a(608),v=a(8768);function S(E,h){if(h&&h.default){var b=h.default;Array.isArray(b)&&b.length===0?h.default=Array:!h.shared&&$(b)&&Object.keys(b).length===0&&(h.default=function(){return{}})}u.call(this,E,h,"Mixed"),this[g.schemaMixedSymbol]=!0}S.schemaName="Mixed",S.defaultOptions={},S.prototype=Object.create(u.prototype),S.prototype.constructor=S,S.get=u.get,S.set=u.set,S.setters=[],S.prototype.cast=function(E){return E instanceof Error?v.errorToPOJO(E):E},S.prototype.castForQuery=function(E,h){return h},d.exports=S},5045:(d,f,a)=>{var u=a(1970),g=a(7799),$=a(1679),v=a(3334),S=u.assert;function E(m){v.call(this,"short",m),this.a=new g(m.a,16).toRed(this.red),this.b=new g(m.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(m),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function h(m,p,_,y){v.BasePoint.call(this,m,"affine"),p===null&&_===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new g(p,16),this.y=new g(_,16),y&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function b(m,p,_,y){v.BasePoint.call(this,m,"jacobian"),p===null&&_===null&&y===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new g(0)):(this.x=new g(p,16),this.y=new g(_,16),this.z=new g(y,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}$(E,v),d.exports=E,E.prototype._getEndomorphism=function(m){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var p,_;if(m.beta)p=new g(m.beta,16).toRed(this.red);else{var y=this._getEndoRoots(this.p);p=(p=y[0].cmp(y[1])<0?y[0]:y[1]).toRed(this.red)}if(m.lambda)_=new g(m.lambda,16);else{var x=this._getEndoRoots(this.n);this.g.mul(x[0]).x.cmp(this.g.x.redMul(p))===0?_=x[0]:(_=x[1],S(this.g.mul(_).x.cmp(this.g.x.redMul(p))===0))}return{beta:p,lambda:_,basis:m.basis?m.basis.map(function(A){return{a:new g(A.a,16),b:new g(A.b,16)}}):this._getEndoBasis(_)}}},E.prototype._getEndoRoots=function(m){var p=m===this.p?this.red:g.mont(m),_=new g(2).toRed(p).redInvm(),y=_.redNeg(),x=new g(3).toRed(p).redNeg().redSqrt().redMul(_);return[y.redAdd(x).fromRed(),y.redSub(x).fromRed()]},E.prototype._getEndoBasis=function(m){for(var p,_,y,x,A,R,C,k,D,j=this.n.ushrn(Math.floor(this.n.bitLength()/2)),V=m,z=this.n.clone(),W=new g(1),ee=new g(0),ne=new g(0),Q=new g(1),se=0;V.cmpn(0)!==0;){var be=z.div(V);k=z.sub(be.mul(V)),D=ne.sub(be.mul(W));var H=Q.sub(be.mul(ee));if(!y&&k.cmp(j)<0)p=C.neg(),_=W,y=k.neg(),x=D;else if(y&&++se==2)break;C=k,z=V,V=k,ne=W,W=D,Q=ee,ee=H}A=k.neg(),R=D;var P=y.sqr().add(x.sqr());return A.sqr().add(R.sqr()).cmp(P)>=0&&(A=p,R=_),y.negative&&(y=y.neg(),x=x.neg()),A.negative&&(A=A.neg(),R=R.neg()),[{a:y,b:x},{a:A,b:R}]},E.prototype._endoSplit=function(m){var p=this.endo.basis,_=p[0],y=p[1],x=y.b.mul(m).divRound(this.n),A=_.b.neg().mul(m).divRound(this.n),R=x.mul(_.a),C=A.mul(y.a),k=x.mul(_.b),D=A.mul(y.b);return{k1:m.sub(R).sub(C),k2:k.add(D).neg()}},E.prototype.pointFromX=function(m,p){(m=new g(m,16)).red||(m=m.toRed(this.red));var _=m.redSqr().redMul(m).redIAdd(m.redMul(this.a)).redIAdd(this.b),y=_.redSqrt();if(y.redSqr().redSub(_).cmp(this.zero)!==0)throw new Error("invalid point");var x=y.fromRed().isOdd();return(p&&!x||!p&&x)&&(y=y.redNeg()),this.point(m,y)},E.prototype.validate=function(m){if(m.inf)return!0;var p=m.x,_=m.y,y=this.a.redMul(p),x=p.redSqr().redMul(p).redIAdd(y).redIAdd(this.b);return _.redSqr().redISub(x).cmpn(0)===0},E.prototype._endoWnafMulAdd=function(m,p,_){for(var y=this._endoWnafT1,x=this._endoWnafT2,A=0;A<m.length;A++){var R=this._endoSplit(p[A]),C=m[A],k=C._getBeta();R.k1.negative&&(R.k1.ineg(),C=C.neg(!0)),R.k2.negative&&(R.k2.ineg(),k=k.neg(!0)),y[2*A]=C,y[2*A+1]=k,x[2*A]=R.k1,x[2*A+1]=R.k2}for(var D=this._wnafMulAdd(1,y,x,2*A,_),j=0;j<2*A;j++)y[j]=null,x[j]=null;return D},$(h,v.BasePoint),E.prototype.point=function(m,p,_){return new h(this,m,p,_)},E.prototype.pointFromJSON=function(m,p){return h.fromJSON(this,m,p)},h.prototype._getBeta=function(){if(this.curve.endo){var m=this.precomputed;if(m&&m.beta)return m.beta;var p=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(m){var _=this.curve,y=function(x){return _.point(x.x.redMul(_.endo.beta),x.y)};m.beta=p,p.precomputed={beta:null,naf:m.naf&&{wnd:m.naf.wnd,points:m.naf.points.map(y)},doubles:m.doubles&&{step:m.doubles.step,points:m.doubles.points.map(y)}}}return p}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(m,p,_){typeof p=="string"&&(p=JSON.parse(p));var y=m.point(p[0],p[1],_);if(!p[2])return y;function x(R){return m.point(R[0],R[1],_)}var A=p[2];return y.precomputed={beta:null,doubles:A.doubles&&{step:A.doubles.step,points:[y].concat(A.doubles.points.map(x))},naf:A.naf&&{wnd:A.naf.wnd,points:[y].concat(A.naf.points.map(x))}},y},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(m){if(this.inf)return m;if(m.inf)return this;if(this.eq(m))return this.dbl();if(this.neg().eq(m))return this.curve.point(null,null);if(this.x.cmp(m.x)===0)return this.curve.point(null,null);var p=this.y.redSub(m.y);p.cmpn(0)!==0&&(p=p.redMul(this.x.redSub(m.x).redInvm()));var _=p.redSqr().redISub(this.x).redISub(m.x),y=p.redMul(this.x.redSub(_)).redISub(this.y);return this.curve.point(_,y)},h.prototype.dbl=function(){if(this.inf)return this;var m=this.y.redAdd(this.y);if(m.cmpn(0)===0)return this.curve.point(null,null);var p=this.curve.a,_=this.x.redSqr(),y=m.redInvm(),x=_.redAdd(_).redIAdd(_).redIAdd(p).redMul(y),A=x.redSqr().redISub(this.x.redAdd(this.x)),R=x.redMul(this.x.redSub(A)).redISub(this.y);return this.curve.point(A,R)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(m){return m=new g(m,16),this.isInfinity()?this:this._hasDoubles(m)?this.curve._fixedNafMul(this,m):this.curve.endo?this.curve._endoWnafMulAdd([this],[m]):this.curve._wnafMul(this,m)},h.prototype.mulAdd=function(m,p,_){var y=[this,p],x=[m,_];return this.curve.endo?this.curve._endoWnafMulAdd(y,x):this.curve._wnafMulAdd(1,y,x,2)},h.prototype.jmulAdd=function(m,p,_){var y=[this,p],x=[m,_];return this.curve.endo?this.curve._endoWnafMulAdd(y,x,!0):this.curve._wnafMulAdd(1,y,x,2,!0)},h.prototype.eq=function(m){return this===m||this.inf===m.inf&&(this.inf||this.x.cmp(m.x)===0&&this.y.cmp(m.y)===0)},h.prototype.neg=function(m){if(this.inf)return this;var p=this.curve.point(this.x,this.y.redNeg());if(m&&this.precomputed){var _=this.precomputed,y=function(x){return x.neg()};p.precomputed={naf:_.naf&&{wnd:_.naf.wnd,points:_.naf.points.map(y)},doubles:_.doubles&&{step:_.doubles.step,points:_.doubles.points.map(y)}}}return p},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},$(b,v.BasePoint),E.prototype.jpoint=function(m,p,_){return new b(this,m,p,_)},b.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var m=this.z.redInvm(),p=m.redSqr(),_=this.x.redMul(p),y=this.y.redMul(p).redMul(m);return this.curve.point(_,y)},b.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},b.prototype.add=function(m){if(this.isInfinity())return m;if(m.isInfinity())return this;var p=m.z.redSqr(),_=this.z.redSqr(),y=this.x.redMul(p),x=m.x.redMul(_),A=this.y.redMul(p.redMul(m.z)),R=m.y.redMul(_.redMul(this.z)),C=y.redSub(x),k=A.redSub(R);if(C.cmpn(0)===0)return k.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var D=C.redSqr(),j=D.redMul(C),V=y.redMul(D),z=k.redSqr().redIAdd(j).redISub(V).redISub(V),W=k.redMul(V.redISub(z)).redISub(A.redMul(j)),ee=this.z.redMul(m.z).redMul(C);return this.curve.jpoint(z,W,ee)},b.prototype.mixedAdd=function(m){if(this.isInfinity())return m.toJ();if(m.isInfinity())return this;var p=this.z.redSqr(),_=this.x,y=m.x.redMul(p),x=this.y,A=m.y.redMul(p).redMul(this.z),R=_.redSub(y),C=x.redSub(A);if(R.cmpn(0)===0)return C.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var k=R.redSqr(),D=k.redMul(R),j=_.redMul(k),V=C.redSqr().redIAdd(D).redISub(j).redISub(j),z=C.redMul(j.redISub(V)).redISub(x.redMul(D)),W=this.z.redMul(R);return this.curve.jpoint(V,z,W)},b.prototype.dblp=function(m){if(m===0)return this;if(this.isInfinity())return this;if(!m)return this.dbl();var p;if(this.curve.zeroA||this.curve.threeA){var _=this;for(p=0;p<m;p++)_=_.dbl();return _}var y=this.curve.a,x=this.curve.tinv,A=this.x,R=this.y,C=this.z,k=C.redSqr().redSqr(),D=R.redAdd(R);for(p=0;p<m;p++){var j=A.redSqr(),V=D.redSqr(),z=V.redSqr(),W=j.redAdd(j).redIAdd(j).redIAdd(y.redMul(k)),ee=A.redMul(V),ne=W.redSqr().redISub(ee.redAdd(ee)),Q=ee.redISub(ne),se=W.redMul(Q);se=se.redIAdd(se).redISub(z);var be=D.redMul(C);p+1<m&&(k=k.redMul(z)),A=ne,C=be,D=se}return this.curve.jpoint(A,D.redMul(x),C)},b.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},b.prototype._zeroDbl=function(){var m,p,_;if(this.zOne){var y=this.x.redSqr(),x=this.y.redSqr(),A=x.redSqr(),R=this.x.redAdd(x).redSqr().redISub(y).redISub(A);R=R.redIAdd(R);var C=y.redAdd(y).redIAdd(y),k=C.redSqr().redISub(R).redISub(R),D=A.redIAdd(A);D=(D=D.redIAdd(D)).redIAdd(D),m=k,p=C.redMul(R.redISub(k)).redISub(D),_=this.y.redAdd(this.y)}else{var j=this.x.redSqr(),V=this.y.redSqr(),z=V.redSqr(),W=this.x.redAdd(V).redSqr().redISub(j).redISub(z);W=W.redIAdd(W);var ee=j.redAdd(j).redIAdd(j),ne=ee.redSqr(),Q=z.redIAdd(z);Q=(Q=Q.redIAdd(Q)).redIAdd(Q),m=ne.redISub(W).redISub(W),p=ee.redMul(W.redISub(m)).redISub(Q),_=(_=this.y.redMul(this.z)).redIAdd(_)}return this.curve.jpoint(m,p,_)},b.prototype._threeDbl=function(){var m,p,_;if(this.zOne){var y=this.x.redSqr(),x=this.y.redSqr(),A=x.redSqr(),R=this.x.redAdd(x).redSqr().redISub(y).redISub(A);R=R.redIAdd(R);var C=y.redAdd(y).redIAdd(y).redIAdd(this.curve.a),k=C.redSqr().redISub(R).redISub(R);m=k;var D=A.redIAdd(A);D=(D=D.redIAdd(D)).redIAdd(D),p=C.redMul(R.redISub(k)).redISub(D),_=this.y.redAdd(this.y)}else{var j=this.z.redSqr(),V=this.y.redSqr(),z=this.x.redMul(V),W=this.x.redSub(j).redMul(this.x.redAdd(j));W=W.redAdd(W).redIAdd(W);var ee=z.redIAdd(z),ne=(ee=ee.redIAdd(ee)).redAdd(ee);m=W.redSqr().redISub(ne),_=this.y.redAdd(this.z).redSqr().redISub(V).redISub(j);var Q=V.redSqr();Q=(Q=(Q=Q.redIAdd(Q)).redIAdd(Q)).redIAdd(Q),p=W.redMul(ee.redISub(m)).redISub(Q)}return this.curve.jpoint(m,p,_)},b.prototype._dbl=function(){var m=this.curve.a,p=this.x,_=this.y,y=this.z,x=y.redSqr().redSqr(),A=p.redSqr(),R=_.redSqr(),C=A.redAdd(A).redIAdd(A).redIAdd(m.redMul(x)),k=p.redAdd(p),D=(k=k.redIAdd(k)).redMul(R),j=C.redSqr().redISub(D.redAdd(D)),V=D.redISub(j),z=R.redSqr();z=(z=(z=z.redIAdd(z)).redIAdd(z)).redIAdd(z);var W=C.redMul(V).redISub(z),ee=_.redAdd(_).redMul(y);return this.curve.jpoint(j,W,ee)},b.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var m=this.x.redSqr(),p=this.y.redSqr(),_=this.z.redSqr(),y=p.redSqr(),x=m.redAdd(m).redIAdd(m),A=x.redSqr(),R=this.x.redAdd(p).redSqr().redISub(m).redISub(y),C=(R=(R=(R=R.redIAdd(R)).redAdd(R).redIAdd(R)).redISub(A)).redSqr(),k=y.redIAdd(y);k=(k=(k=k.redIAdd(k)).redIAdd(k)).redIAdd(k);var D=x.redIAdd(R).redSqr().redISub(A).redISub(C).redISub(k),j=p.redMul(D);j=(j=j.redIAdd(j)).redIAdd(j);var V=this.x.redMul(C).redISub(j);V=(V=V.redIAdd(V)).redIAdd(V);var z=this.y.redMul(D.redMul(k.redISub(D)).redISub(R.redMul(C)));z=(z=(z=z.redIAdd(z)).redIAdd(z)).redIAdd(z);var W=this.z.redAdd(R).redSqr().redISub(_).redISub(C);return this.curve.jpoint(V,z,W)},b.prototype.mul=function(m,p){return m=new g(m,p),this.curve._wnafMul(this,m)},b.prototype.eq=function(m){if(m.type==="affine")return this.eq(m.toJ());if(this===m)return!0;var p=this.z.redSqr(),_=m.z.redSqr();if(this.x.redMul(_).redISub(m.x.redMul(p)).cmpn(0)!==0)return!1;var y=p.redMul(this.z),x=_.redMul(m.z);return this.y.redMul(x).redISub(m.y.redMul(y)).cmpn(0)===0},b.prototype.eqXToP=function(m){var p=this.z.redSqr(),_=m.toRed(this.curve.red).redMul(p);if(this.x.cmp(_)===0)return!0;for(var y=m.clone(),x=this.curve.redN.redMul(p);;){if(y.iadd(this.curve.n),y.cmp(this.curve.p)>=0)return!1;if(_.redIAdd(x),this.x.cmp(_)===0)return!0}},b.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},b.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},5053:(d,f,a)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},u(m)}var g=a(6292),$=a(5579),v=a(3446),S=a(2098),E=a(8699),h=a(9732).Buffer;function b(m){var p;u(m)!=="object"||h.isBuffer(m)||(p=m.passphrase,m=m.key),typeof m=="string"&&(m=h.from(m));var _,y,x=v(m,p),A=x.tag,R=x.data;switch(A){case"CERTIFICATE":y=g.certificate.decode(R,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(y||(y=g.PublicKey.decode(R,"der")),_=y.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return g.RSAPublicKey.decode(y.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return y.subjectPrivateKey=y.subjectPublicKey,{type:"ec",data:y};case"1.2.840.10040.4.1":return y.algorithm.params.pub_key=g.DSAparam.decode(y.subjectPublicKey.data,"der"),{type:"dsa",data:y.algorithm.params};default:throw new Error("unknown key id "+_)}case"ENCRYPTED PRIVATE KEY":R=function(C,k){var D=C.algorithm.decrypt.kde.kdeparams.salt,j=parseInt(C.algorithm.decrypt.kde.kdeparams.iters.toString(),10),V=$[C.algorithm.decrypt.cipher.algo.join(".")],z=C.algorithm.decrypt.cipher.iv,W=C.subjectPrivateKey,ee=parseInt(V.split("-")[1],10)/8,ne=E.pbkdf2Sync(k,D,j,ee,"sha1"),Q=S.createDecipheriv(V,ne,z),se=[];return se.push(Q.update(W)),se.push(Q.final()),h.concat(se)}(R=g.EncryptedPrivateKey.decode(R,"der"),p);case"PRIVATE KEY":switch(_=(y=g.PrivateKey.decode(R,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return g.RSAPrivateKey.decode(y.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:y.algorithm.curve,privateKey:g.ECPrivateKey.decode(y.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return y.algorithm.params.priv_key=g.DSAparam.decode(y.subjectPrivateKey,"der"),{type:"dsa",params:y.algorithm.params};default:throw new Error("unknown key id "+_)}case"RSA PUBLIC KEY":return g.RSAPublicKey.decode(R,"der");case"RSA PRIVATE KEY":return g.RSAPrivateKey.decode(R,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:g.DSAPrivateKey.decode(R,"der")};case"EC PRIVATE KEY":return{curve:(R=g.ECPrivateKey.decode(R,"der")).parameters.value,privateKey:R.privateKey};default:throw new Error("unknown key type "+A)}}b.signature=g.signature,d.exports=b},5098:(d,f,a)=>{function u(Q,se){var be=Object.keys(Q);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(Q);se&&(H=H.filter(function(P){return Object.getOwnPropertyDescriptor(Q,P).enumerable})),be.push.apply(be,H)}return be}function g(Q){for(var se=1;se<arguments.length;se++){var be=arguments[se]!=null?arguments[se]:{};se%2?u(Object(be),!0).forEach(function(H){$(Q,H,be[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(be)):u(Object(be)).forEach(function(H){Object.defineProperty(Q,H,Object.getOwnPropertyDescriptor(be,H))})}return Q}function $(Q,se,be){return(se=function(H){var P=function(L){if(v(L)!="object"||!L)return L;var F=L[Symbol.toPrimitive];if(F!==void 0){var M=F.call(L,"string");if(v(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(L)}(H);return v(P)=="symbol"?P:P+""}(se))in Q?Object.defineProperty(Q,se,{value:be,enumerable:!0,configurable:!0,writable:!0}):Q[se]=be,Q}function v(Q){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},v(Q)}var S,E=a(3609),h=a(3550).EventEmitter,b=a(3441),m=a(7494),p=a(6426),_=a(5335),y=a(8499),x=a(5558).G,A=a(4327),R=a(1469),C=a(9604),k=a(7910),D=a(3694),j=a(3303)._,V=a(1793),z=a(8768),W=a(5537);function ee(Q,se,be){if(Q.options.timeseries)throw new W(se,"timeseries");var H=ee.defaultOptions&&ee.defaultOptions._id;H!=null&&((be=be||{})._id=H),Q=D(Q,be),this.caster=ne(Q,null,be),this.caster.path=se,this.caster.prototype.$basePath=se,this.schema=Q,this.$isSingleNested=!0,this.base=Q.base,p.call(this,se,be,"Embedded")}function ne(Q,se,be){S||(S=a(9380));var H=function(U,Z,K){this.$__parent=K,S.apply(this,arguments),K!=null&&this.$session(K.$session())};Q._preCompile();var P=se!=null?se.prototype:S.prototype;for(var L in(H.prototype=Object.create(P)).$__setSchema(Q),H.prototype.constructor=H,H.$__required=be==null?void 0:be.required,H.base=Q.base,H.schema=Q,H.$isSingleNested=!0,H.events=new h,H.prototype.toBSON=function(){return this.toObject(j)},Q.methods)H.prototype[L]=Q.methods[L];for(var F in Q.statics)H[F]=Q.statics[F];for(var M in h.prototype)H[M]=h.prototype[M];return H}d.exports=ee,ee.prototype=Object.create(p.prototype),ee.prototype.constructor=ee,ee.prototype.OptionsConstructor=m,ee.prototype.$conditionalHandlers.$geoWithin=function(Q,se){return{$geometry:this.castForQuery(null,Q.$geometry,se)}},ee.prototype.$conditionalHandlers.$near=ee.prototype.$conditionalHandlers.$nearSphere=C.cast$near,ee.prototype.$conditionalHandlers.$within=ee.prototype.$conditionalHandlers.$geoWithin=C.cast$within,ee.prototype.$conditionalHandlers.$geoIntersects=C.cast$geoIntersects,ee.prototype.$conditionalHandlers.$minDistance=x,ee.prototype.$conditionalHandlers.$maxDistance=x,ee.prototype.$conditionalHandlers.$exists=y,ee.prototype.cast=function(Q,se,be,H,P){if(Q&&Q.$isSingleNested&&Q.parent===se)return Q;if(Q!=null&&(v(Q)!=="object"||Array.isArray(Q)))throw new b(this.path,Q);var L,F=this.schema.path(this.schema.options.discriminatorKey),M=F==null?null:F.getDefault(se),U=k(this.caster,Q,M),Z=se&&se.$__&&se.$__.selected,K=this.path,oe=Z==null?null:Object.keys(Z).reduce(function($e,ce){return ce.startsWith(K+".")&&(($e=$e||{})[ce.substring(K.length+1)]=Z[ce]),$e},null);if(!be)return P=Object.assign({},P,{priorDoc:H}),Object.keys(Q).length===0?new U({},oe,se,void 0,P):new U(Q,oe,se,void 0,P);delete(L=new U(void 0,oe,se,!1,{defaults:!1})).$__.defaults,L.$init(Q);var ie=V(oe);return _(L,oe,ie),L},ee.prototype.castForQuery=function(Q,se,be,H){var P;if(Q!=null){if(!(P=this.$conditionalHandlers[Q]))throw new Error("Can't use "+Q);return P.call(this,se)}if(se==null)return se;var L=k(this.caster,se);if(se instanceof L)return se;this.options.runSetters&&(se=this._applySetters(se,be));var F=H!=null&&H.strict!=null?H.strict:void 0;try{se=new L(se,F)}catch(M){throw M instanceof E?M:new E("Embedded",se,this.path,M,this)}return se},ee.prototype.doValidate=function(Q,se,be,H){var P=k(this.caster,Q);if(!Q||Q instanceof P||(Q=new P(Q,null,be!=null&&be.$__!=null?be:null)),H&&H.skipSchemaValidators)return Q?Q.validate().then(function(){return se(null)},function(L){return se(L)}):se(null);p.prototype.doValidate.call(this,Q,function(L){return L?se(L):Q?void Q.validate().then(function(){return se(null)},function(F){return se(F)}):se(null)},be,H)},ee.prototype.doValidateSync=function(Q,se,be){if(!be||!be.skipSchemaValidators){var H=p.prototype.doValidateSync.call(this,Q,se);if(H)return H}if(Q)return Q.validateSync()},ee.prototype.discriminator=function(Q,se,be){be=be||{};var H=z.isPOJO(be)?be.value:be,P=typeof be.clone!="boolean"||be.clone;return se.instanceOfSchema&&P&&(se=se.clone()),se=R(this.caster,Q,se,H,null,null,be.overwriteExisting),this.caster.discriminators[Q]=ne(se,this.caster),this.caster.discriminators[Q]},ee.defaultOptions={},ee.set=p.set,ee.setters=[],ee.get=p.get,ee.prototype.toJSON=function(){return{path:this.path,options:this.options}},ee.prototype.clone=function(){var Q=new this.constructor(this.schema,this.path,g(g({},this.options),{},{_skipApplyDiscriminators:!0}));return Q.validators=this.validators.slice(),this.requiredValidator!==void 0&&(Q.requiredValidator=this.requiredValidator),Q.caster.discriminators=Object.assign({},this.caster.discriminators),Q._appliedDiscriminators=this._appliedDiscriminators,Q},ee.prototype.toJSONSchema=function(Q){var se=this.options.required&&typeof this.options.required!="function";return g(g({},this.schema.toJSONSchema(Q)),A("object","object",Q==null?void 0:Q.useBsonType,se))}},5110:d=>{var f=new Set(["$ref","$id","$db"]);d.exports=function(a){return a[0]==="$"&&!f.has(a)}},5152:(d,f,a)=>{var u=a(3703),g=a(7425);d.exports=function $(v,S,E){for(var h=(E=E||{}).typeOnly,b=Array.isArray(S)?S:S.indexOf(".")===-1?[S]:S.split("."),m=null,p="adhocOrUndefined",_=g(v.schema,v.get(v.schema.options.discriminatorKey))||v.schema,y=0;y<b.length;++y){var x=b.slice(0,y+1).join(".");if((m=_.path(x))!=null){if(m.instance==="Mixed")return h?"real":m;if(p=_.pathType(x),(m.$isSingleNested||m.$isMongooseDocumentArrayElement)&&m.schema.discriminators!=null){var A=m.schema.discriminators,R=v.get(x+"."+u(m,"schema.options.discriminatorKey"));if(R==null||A[R]==null)continue;var C=b.slice(y+1).join(".");return $(v.get(x),C,E)}}else p="adhocOrUndefined"}return h?p:m}},5188:(d,f,a)=>{var u=a(7300);d.exports=function(g,$){if(g==null)return!1;if($==="_id")return g._id===0;for(var v=null,S=0,E=Object.keys(g);S<E.length;S++){var h=E[S];if(u(g[h])){v=g[$]===1?"inclusive":"exclusive";break}}return v==="inclusive"?g[$]!==1:v==="exclusive"&&g[$]===0}},5218:(d,f,a)=>{var u=a(7799),g=a(9732).Buffer;d.exports=function($,v){return g.from($.toRed(u.mont(v.modulus)).redPow(new u(v.publicExponent)).fromRed().toArray())}},5268:(d,f,a)=>{var u=a(2746),g=Symbol("mongoose#emitted");d.exports=function($,v,S,E){if(typeof $=="function")try{return v(function(h){if(h==null)$.apply(this,arguments);else{S!=null&&S.listeners!=null&&S.listeners("error").length>0&&!h[g]&&(h[g]=!0,S.emit("error",h));try{$(h)}catch(b){return u(function(){throw b})}}})}catch(h){return S!=null&&S.listeners!=null&&S.listeners("error").length>0&&!h[g]&&(h[g]=!0,S.emit("error",h)),$(h)}return new(E=E||a.g.Promise)(function(h,b){v(function(m,p){return m!=null?(S!=null&&S.listeners!=null&&S.listeners("error").length>0&&!m[g]&&(m[g]=!0,S.emit("error",m)),b(m)):arguments.length>2?h(Array.prototype.slice.call(arguments,1)):void h(p)})})}},5289:d=>{d.exports=function(f){switch(f){case"p":f="primary";break;case"pp":f="primaryPreferred";break;case"s":f="secondary";break;case"sp":f="secondaryPreferred";break;case"n":f="nearest"}return f}},5335:(d,f,a)=>{var u=a(1091);function g($,v,S){$.$__.activePaths.default(v),!S&&$.$isSubdocument&&$.$isSingleNested&&$.$parent()!=null&&$.$parent().$__.activePaths.default($.$__pathRelativeToParent(v))}d.exports=function($,v,S,E,h,b,m){for(var p=Object.keys($.$__schema.paths),_=p.length,y=m&&m.skipParentChangeTracking,x=0;x<_;++x){var A=void 0,R="",C=p[x];if(C!=="_id"||!$.$__.skipId){var k=$.$__schema.paths[C],D=k.splitPath(),j=D.length;if(D[j-1]!=="$*")for(var V=!1,z=$._doc,W=0;W<j&&z!=null;++W){var ee=D[W];if(R+=(R.length?".":"")+ee,S===!0){if(R in v)break}else if(S===!1&&v&&!V){var ne=k.$isSingleNested||k.$isMongooseDocumentArray;if(R in v&&!u(v[R])||W===j-1&&ne&&E!=null&&E[R])V=!0;else if(E!=null&&!E[R])break}if(W===j-1){if(z[ee]!==void 0)break;if(h!=null){if(typeof k.defaultValue=="function"){if(!k.defaultValue.$runBeforeSetters&&h||k.defaultValue.$runBeforeSetters&&!h)break}else if(!h)continue}if(b&&b[R])break;if(v&&S!==null){if(S===!0){if(C in v)continue;try{A=k.getDefault($,!1)}catch(Q){$.invalidate(C,Q);break}A!==void 0&&(z[ee]=A,g($,C,y))}else if(V){try{A=k.getDefault($,!1)}catch(Q){$.invalidate(C,Q);break}A!==void 0&&(z[ee]=A,g($,C,y))}}else{try{A=k.getDefault($,!1)}catch(Q){$.invalidate(C,Q);break}A!==void 0&&(z[ee]=A,g($,C,y))}}else z=z[ee]}}}}},5340:()=>{},5346:d=>{d.exports=function(f,a,u){for(var g=a[0],$=u,v=f,S=0;S<a.length-1;++S){var E=$.path(g);if(E&&E.schema){var h=v.get(g);if($=E.schema,g=a[S+1],Array.isArray(h)&&!isNaN(g)&&(h=h[g],g=""),h==null)break;v=h}else g+=g.length?"."+a[S+1]:a[S+1]}return v}},5401:(d,f,a)=>{var u=a(9732).Buffer;function g(b){u.isBuffer(b)||(b=u.from(b));for(var m=b.length/4|0,p=new Array(m),_=0;_<m;_++)p[_]=b.readUInt32BE(4*_);return p}function $(b){for(;0<b.length;b++)b[0]=0}function v(b,m,p,_,y){for(var x,A,R,C,k=p[0],D=p[1],j=p[2],V=p[3],z=b[0]^m[0],W=b[1]^m[1],ee=b[2]^m[2],ne=b[3]^m[3],Q=4,se=1;se<y;se++)x=k[z>>>24]^D[W>>>16&255]^j[ee>>>8&255]^V[255&ne]^m[Q++],A=k[W>>>24]^D[ee>>>16&255]^j[ne>>>8&255]^V[255&z]^m[Q++],R=k[ee>>>24]^D[ne>>>16&255]^j[z>>>8&255]^V[255&W]^m[Q++],C=k[ne>>>24]^D[z>>>16&255]^j[W>>>8&255]^V[255&ee]^m[Q++],z=x,W=A,ee=R,ne=C;return x=(_[z>>>24]<<24|_[W>>>16&255]<<16|_[ee>>>8&255]<<8|_[255&ne])^m[Q++],A=(_[W>>>24]<<24|_[ee>>>16&255]<<16|_[ne>>>8&255]<<8|_[255&z])^m[Q++],R=(_[ee>>>24]<<24|_[ne>>>16&255]<<16|_[z>>>8&255]<<8|_[255&W])^m[Q++],C=(_[ne>>>24]<<24|_[z>>>16&255]<<16|_[W>>>8&255]<<8|_[255&ee])^m[Q++],[x>>>=0,A>>>=0,R>>>=0,C>>>=0]}var S=[0,1,2,4,8,16,32,64,128,27,54],E=function(){for(var b=new Array(256),m=0;m<256;m++)b[m]=m<128?m<<1:m<<1^283;for(var p=[],_=[],y=[[],[],[],[]],x=[[],[],[],[]],A=0,R=0,C=0;C<256;++C){var k=R^R<<1^R<<2^R<<3^R<<4;k=k>>>8^255&k^99,p[A]=k,_[k]=A;var D=b[A],j=b[D],V=b[j],z=257*b[k]^16843008*k;y[0][A]=z<<24|z>>>8,y[1][A]=z<<16|z>>>16,y[2][A]=z<<8|z>>>24,y[3][A]=z,z=16843009*V^65537*j^257*D^16843008*A,x[0][k]=z<<24|z>>>8,x[1][k]=z<<16|z>>>16,x[2][k]=z<<8|z>>>24,x[3][k]=z,A===0?A=R=1:(A=D^b[b[b[V^D]]],R^=b[b[R]])}return{SBOX:p,INV_SBOX:_,SUB_MIX:y,INV_SUB_MIX:x}}();function h(b){this._key=g(b),this._reset()}h.blockSize=16,h.keySize=32,h.prototype.blockSize=h.blockSize,h.prototype.keySize=h.keySize,h.prototype._reset=function(){for(var b=this._key,m=b.length,p=m+6,_=4*(p+1),y=[],x=0;x<m;x++)y[x]=b[x];for(x=m;x<_;x++){var A=y[x-1];x%m==0?(A=A<<8|A>>>24,A=E.SBOX[A>>>24]<<24|E.SBOX[A>>>16&255]<<16|E.SBOX[A>>>8&255]<<8|E.SBOX[255&A],A^=S[x/m|0]<<24):m>6&&x%m==4&&(A=E.SBOX[A>>>24]<<24|E.SBOX[A>>>16&255]<<16|E.SBOX[A>>>8&255]<<8|E.SBOX[255&A]),y[x]=y[x-m]^A}for(var R=[],C=0;C<_;C++){var k=_-C,D=y[k-(C%4?0:4)];R[C]=C<4||k<=4?D:E.INV_SUB_MIX[0][E.SBOX[D>>>24]]^E.INV_SUB_MIX[1][E.SBOX[D>>>16&255]]^E.INV_SUB_MIX[2][E.SBOX[D>>>8&255]]^E.INV_SUB_MIX[3][E.SBOX[255&D]]}this._nRounds=p,this._keySchedule=y,this._invKeySchedule=R},h.prototype.encryptBlockRaw=function(b){return v(b=g(b),this._keySchedule,E.SUB_MIX,E.SBOX,this._nRounds)},h.prototype.encryptBlock=function(b){var m=this.encryptBlockRaw(b),p=u.allocUnsafe(16);return p.writeUInt32BE(m[0],0),p.writeUInt32BE(m[1],4),p.writeUInt32BE(m[2],8),p.writeUInt32BE(m[3],12),p},h.prototype.decryptBlock=function(b){var m=(b=g(b))[1];b[1]=b[3],b[3]=m;var p=v(b,this._invKeySchedule,E.INV_SUB_MIX,E.INV_SBOX,this._nRounds),_=u.allocUnsafe(16);return _.writeUInt32BE(p[0],0),_.writeUInt32BE(p[3],4),_.writeUInt32BE(p[2],8),_.writeUInt32BE(p[1],12),_},h.prototype.scrub=function(){$(this._keySchedule),$(this._invKeySchedule),$(this._key)},d.exports.AES=h},5407:(d,f,a)=>{var u=a(5401),g=a(9732).Buffer,$=a(2533);function v(S,E,h,b){$.call(this),this._cipher=new u.AES(E),this._prev=g.from(h),this._cache=g.allocUnsafe(0),this._secCache=g.allocUnsafe(0),this._decrypt=b,this._mode=S}a(1679)(v,$),v.prototype._update=function(S){return this._mode.encrypt(this,S,this._decrypt)},v.prototype._final=function(){this._cipher.scrub()},d.exports=v},5413:(d,f,a)=>{var u=a(3305),g=a(2402);d.exports=function($){if($==null)return $;if($==="")return null;var v=u($,"Long")?$.toNumber():Number($);if(v===(0|v)&&v>=-2147483648&&v<=2147483647)return v;g.ok(!1)}},5443:(d,f,a)=>{var u=a(5053),g=a(7797),$=a(1190),v=a(7799),S=a(1095),E=a(5833),h=a(5218),b=a(9732).Buffer;d.exports=function(m,p,_){var y;y=m.padding?m.padding:_?1:4;var x,A=u(m),R=A.modulus.byteLength();if(p.length>R||new v(p).cmp(A.modulus)>=0)throw new Error("decryption error");x=_?h(new v(p),A):S(p,A);var C=b.alloc(R-x.length);if(x=b.concat([C,x],R),y===4)return function(k,D){var j=k.modulus.byteLength(),V=E("sha1").update(b.alloc(0)).digest(),z=V.length;if(D[0]!==0)throw new Error("decryption error");var W=D.slice(1,z+1),ee=D.slice(z+1),ne=$(W,g(ee,z)),Q=$(ee,g(ne,j-z-1));if(function(be,H){be=b.from(be),H=b.from(H);var P=0,L=be.length;be.length!==H.length&&(P++,L=Math.min(be.length,H.length));for(var F=-1;++F<L;)P+=be[F]^H[F];return P}(V,Q.slice(0,z)))throw new Error("decryption error");for(var se=z;Q[se]===0;)se++;if(Q[se++]!==1)throw new Error("decryption error");return Q.slice(se)}(A,x);if(y===1)return function(k,D,j){for(var V=D.slice(0,2),z=2,W=0;D[z++]!==0;)if(z>=D.length){W++;break}var ee=D.slice(2,z-1);if((V.toString("hex")!=="0002"&&!j||V.toString("hex")!=="0001"&&j)&&W++,ee.length<8&&W++,W)throw new Error("decryption error");return D.slice(z)}(0,x,_);if(y===3)return x;throw new Error("unknown padding")}},5455:d=>{var f={}.toString;d.exports=Array.isArray||function(a){return f.call(a)=="[object Array]"}},5459:(d,f,a)=>{var u=a(6876);f.encrypt=function(g,$){var v=u($,g._prev);return g._prev=g._cipher.encryptBlock(v),g._prev},f.decrypt=function(g,$){var v=g._prev;g._prev=$;var S=g._cipher.decryptBlock($);return u(S,v)}},5477:(d,f,a)=>{var u=a(2354),g=a(3279),$=a(3123),v=a(3388);d.exports=v||u.call($,g)},5484:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(f(Symbol.iterator)==="symbol")return!0;var a={},u=Symbol("test"),g=Object(u);if(typeof u=="string"||Object.prototype.toString.call(u)!=="[object Symbol]"||Object.prototype.toString.call(g)!=="[object Symbol]")return!1;for(var $ in a[u]=42,a)return!1;if(typeof Object.keys=="function"&&Object.keys(a).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(a).length!==0)return!1;var v=Object.getOwnPropertySymbols(a);if(v.length!==1||v[0]!==u||!Object.prototype.propertyIsEnumerable.call(a,u))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var S=Object.getOwnPropertyDescriptor(a,u);if(S.value!==42||S.enumerable!==!0)return!1}return!0}},5497:(d,f,a)=>{var u=a(5879);d.exports=function(g){if(u(g)!=="TopologyDescription")return!1;var $=Array.from(g.servers.values());return $.length>0&&$.every(function(v){return v.error&&v.error.message.indexOf("Client network socket disconnected before secure TLS connection was established")!==-1})}},5510:(d,f,a)=>{function u(v){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},u(v)}var g=typeof Symbol<"u"&&Symbol,$=a(5484);d.exports=function(){return typeof g=="function"&&typeof Symbol=="function"&&u(g("foo"))==="symbol"&&u(Symbol("bar"))==="symbol"&&$()}},5537:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m,p){return function(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}(this,h),function(_,y,x){return y=$(y),function(A,R){if(R&&(u(R)=="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}(A)}(_,g()?Reflect.construct(y,x||[],$(_).constructor):y.apply(_,x))}(this,h,['Cannot create use schema for property "'.concat(m,'" because the schema has the ').concat(p," option enabled.")])}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"InvalidSchemaOptionError"}),d.exports=S},5549:(d,f,a)=>{var u=a(3633).ObjectId,g=a(7930).objectIdSymbol;Object.defineProperty(u.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}),u.prototype.hasOwnProperty("valueOf")||(u.prototype.valueOf=function(){return this.toString()}),u.prototype[g]=!0,d.exports=u},5558:(d,f,a)=>{var u=a(3660);function g($){return u.cast()($)}f.G=g,f.p=function $(v,S){v.forEach(function(E,h){Array.isArray(E)?$(E,S):v[h]=g.call(S,E)})}},5579:d=>{d.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},5586:d=>{d.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},5678:(d,f,a)=>{d.exports=a(2914)},5761:d=>{d.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})},5782:d=>{function f(a,u){(u==null||u>a.length)&&(u=a.length);for(var g=0,$=Array(u);g<u;g++)$[g]=a[g];return $}d.exports=function(a,u,g){if(a.length===0)return g();var $,v=a.length,S=null,E=function(h,b){var m=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(!m){if(Array.isArray(h)||(m=function(R,C){if(R){if(typeof R=="string")return f(R,C);var k={}.toString.call(R).slice(8,-1);return k==="Object"&&R.constructor&&(k=R.constructor.name),k==="Map"||k==="Set"?Array.from(R):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?f(R,C):void 0}}(h))||b){m&&(h=m);var p=0,_=function(){};return{s:_,n:function(){return p>=h.length?{done:!0}:{done:!1,value:h[p++]}},e:function(R){throw R},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,x=!0,A=!1;return{s:function(){m=m.call(h)},n:function(){var R=m.next();return x=R.done,R},e:function(R){A=!0,y=R},f:function(){try{x||m.return==null||m.return()}finally{if(A)throw y}}}}(a);try{for(E.s();!($=E.n()).done;)u($.value,function(h){if(S==null)return h!=null?g(S=h):--v<=0?g():void 0})}catch(h){E.e(h)}finally{E.f()}}},5803:(d,f,a)=>{var u=f;u.base=a(3334),u.short=a(5045),u.mont=a(3453),u.edwards=a(9723)},5804:(d,f,a)=>{var u=a(2354),g=a(3279),$=a(5477);d.exports=function(){return $(u,g,arguments)}},5807:d=>{d.exports=Object.getOwnPropertyDescriptor},5825:(d,f,a)=>{var u=a(8093);d.exports=u.getPrototypeOf||null},5832:(d,f,a)=>{function u(q){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},u(q)}var g=a(6775),$=a(2486),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;f.Buffer=h,f.SlowBuffer=function(q){return+q!=q&&(q=0),h.alloc(+q)},f.INSPECT_MAX_BYTES=50;var S=2147483647;function E(q){if(q>S)throw new RangeError('The value "'+q+'" is invalid for option "size"');var re=new Uint8Array(q);return Object.setPrototypeOf(re,h.prototype),re}function h(q,re,fe){if(typeof q=="number"){if(typeof re=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(q)}return b(q,re,fe)}function b(q,re,fe){if(typeof q=="string")return function(ke,ue){if(typeof ue=="string"&&ue!==""||(ue="utf8"),!h.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);var Ee=0|A(ke,ue),Ae=E(Ee),Ne=Ae.write(ke,ue);return Ne!==Ee&&(Ae=Ae.slice(0,Ne)),Ae}(q,re);if(ArrayBuffer.isView(q))return function(ke){if(le(ke,Uint8Array)){var ue=new Uint8Array(ke);return y(ue.buffer,ue.byteOffset,ue.byteLength)}return _(ke)}(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(q));if(le(q,ArrayBuffer)||q&&le(q.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(le(q,SharedArrayBuffer)||q&&le(q.buffer,SharedArrayBuffer)))return y(q,re,fe);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var we=q.valueOf&&q.valueOf();if(we!=null&&we!==q)return h.from(we,re,fe);var Re=function(ke){if(h.isBuffer(ke)){var ue=0|x(ke.length),Ee=E(ue);return Ee.length===0||ke.copy(Ee,0,0,ue),Ee}return ke.length!==void 0?typeof ke.length!="number"||ye(ke.length)?E(0):_(ke):ke.type==="Buffer"&&Array.isArray(ke.data)?_(ke.data):void 0}(q);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return h.from(q[Symbol.toPrimitive]("string"),re,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(q))}function m(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function p(q){return m(q),E(q<0?0:0|x(q))}function _(q){for(var re=q.length<0?0:0|x(q.length),fe=E(re),we=0;we<re;we+=1)fe[we]=255&q[we];return fe}function y(q,re,fe){if(re<0||q.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<re+(fe||0))throw new RangeError('"length" is outside of buffer bounds');var we;return we=re===void 0&&fe===void 0?new Uint8Array(q):fe===void 0?new Uint8Array(q,re):new Uint8Array(q,re,fe),Object.setPrototypeOf(we,h.prototype),we}function x(q){if(q>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return 0|q}function A(q,re){if(h.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||le(q,ArrayBuffer))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(q));var fe=q.length,we=arguments.length>2&&arguments[2]===!0;if(!we&&fe===0)return 0;for(var Re=!1;;)switch(re){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return ie(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*fe;case"hex":return fe>>>1;case"base64":return $e(q).length;default:if(Re)return we?-1:ie(q).length;re=(""+re).toLowerCase(),Re=!0}}function R(q,re,fe){var we=!1;if((re===void 0||re<0)&&(re=0),re>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0)<=(re>>>=0))return"";for(q||(q="utf8");;)switch(q){case"hex":return P(this,re,fe);case"utf8":case"utf-8":return Q(this,re,fe);case"ascii":return be(this,re,fe);case"latin1":case"binary":return H(this,re,fe);case"base64":return ne(this,re,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,re,fe);default:if(we)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),we=!0}}function C(q,re,fe){var we=q[re];q[re]=q[fe],q[fe]=we}function k(q,re,fe,we,Re){if(q.length===0)return-1;if(typeof fe=="string"?(we=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),ye(fe=+fe)&&(fe=Re?0:q.length-1),fe<0&&(fe=q.length+fe),fe>=q.length){if(Re)return-1;fe=q.length-1}else if(fe<0){if(!Re)return-1;fe=0}if(typeof re=="string"&&(re=h.from(re,we)),h.isBuffer(re))return re.length===0?-1:D(q,re,fe,we,Re);if(typeof re=="number")return re&=255,typeof Uint8Array.prototype.indexOf=="function"?Re?Uint8Array.prototype.indexOf.call(q,re,fe):Uint8Array.prototype.lastIndexOf.call(q,re,fe):D(q,[re],fe,we,Re);throw new TypeError("val must be string, number or Buffer")}function D(q,re,fe,we,Re){var ke,ue=1,Ee=q.length,Ae=re.length;if(we!==void 0&&((we=String(we).toLowerCase())==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(q.length<2||re.length<2)return-1;ue=2,Ee/=2,Ae/=2,fe/=2}function Ne(at,He){return ue===1?at[He]:at.readUInt16BE(He*ue)}if(Re){var De=-1;for(ke=fe;ke<Ee;ke++)if(Ne(q,ke)===Ne(re,De===-1?0:ke-De)){if(De===-1&&(De=ke),ke-De+1===Ae)return De*ue}else De!==-1&&(ke-=ke-De),De=-1}else for(fe+Ae>Ee&&(fe=Ee-Ae),ke=fe;ke>=0;ke--){for(var he=!0,tt=0;tt<Ae;tt++)if(Ne(q,ke+tt)!==Ne(re,tt)){he=!1;break}if(he)return ke}return-1}function j(q,re,fe,we){fe=Number(fe)||0;var Re=q.length-fe;we?(we=Number(we))>Re&&(we=Re):we=Re;var ke=re.length;we>ke/2&&(we=ke/2);for(var ue=0;ue<we;++ue){var Ee=parseInt(re.substr(2*ue,2),16);if(ye(Ee))return ue;q[fe+ue]=Ee}return ue}function V(q,re,fe,we){return ce(ie(re,q.length-fe),q,fe,we)}function z(q,re,fe,we){return ce(function(Re){for(var ke=[],ue=0;ue<Re.length;++ue)ke.push(255&Re.charCodeAt(ue));return ke}(re),q,fe,we)}function W(q,re,fe,we){return ce($e(re),q,fe,we)}function ee(q,re,fe,we){return ce(function(Re,ke){for(var ue,Ee,Ae,Ne=[],De=0;De<Re.length&&!((ke-=2)<0);++De)Ee=(ue=Re.charCodeAt(De))>>8,Ae=ue%256,Ne.push(Ae),Ne.push(Ee);return Ne}(re,q.length-fe),q,fe,we)}function ne(q,re,fe){return re===0&&fe===q.length?g.fromByteArray(q):g.fromByteArray(q.slice(re,fe))}function Q(q,re,fe){fe=Math.min(q.length,fe);for(var we=[],Re=re;Re<fe;){var ke,ue,Ee,Ae,Ne=q[Re],De=null,he=Ne>239?4:Ne>223?3:Ne>191?2:1;if(Re+he<=fe)switch(he){case 1:Ne<128&&(De=Ne);break;case 2:(192&(ke=q[Re+1]))==128&&(Ae=(31&Ne)<<6|63&ke)>127&&(De=Ae);break;case 3:ke=q[Re+1],ue=q[Re+2],(192&ke)==128&&(192&ue)==128&&(Ae=(15&Ne)<<12|(63&ke)<<6|63&ue)>2047&&(Ae<55296||Ae>57343)&&(De=Ae);break;case 4:ke=q[Re+1],ue=q[Re+2],Ee=q[Re+3],(192&ke)==128&&(192&ue)==128&&(192&Ee)==128&&(Ae=(15&Ne)<<18|(63&ke)<<12|(63&ue)<<6|63&Ee)>65535&&Ae<1114112&&(De=Ae)}De===null?(De=65533,he=1):De>65535&&(De-=65536,we.push(De>>>10&1023|55296),De=56320|1023&De),we.push(De),Re+=he}return function(tt){var at=tt.length;if(at<=se)return String.fromCharCode.apply(String,tt);for(var He="",ot=0;ot<at;)He+=String.fromCharCode.apply(String,tt.slice(ot,ot+=se));return He}(we)}f.kMaxLength=S,h.TYPED_ARRAY_SUPPORT=function(){try{var q=new Uint8Array(1),re={foo:function(){return 42}};return Object.setPrototypeOf(re,Uint8Array.prototype),Object.setPrototypeOf(q,re),q.foo()===42}catch{return!1}}(),h.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(q,re,fe){return b(q,re,fe)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(q,re,fe){return function(we,Re,ke){return m(we),we<=0?E(we):Re!==void 0?typeof ke=="string"?E(we).fill(Re,ke):E(we).fill(Re):E(we)}(q,re,fe)},h.allocUnsafe=function(q){return p(q)},h.allocUnsafeSlow=function(q){return p(q)},h.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==h.prototype},h.compare=function(q,re){if(le(q,Uint8Array)&&(q=h.from(q,q.offset,q.byteLength)),le(re,Uint8Array)&&(re=h.from(re,re.offset,re.byteLength)),!h.isBuffer(q)||!h.isBuffer(re))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===re)return 0;for(var fe=q.length,we=re.length,Re=0,ke=Math.min(fe,we);Re<ke;++Re)if(q[Re]!==re[Re]){fe=q[Re],we=re[Re];break}return fe<we?-1:we<fe?1:0},h.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(q,re){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return h.alloc(0);var fe;if(re===void 0)for(re=0,fe=0;fe<q.length;++fe)re+=q[fe].length;var we=h.allocUnsafe(re),Re=0;for(fe=0;fe<q.length;++fe){var ke=q[fe];if(le(ke,Uint8Array))Re+ke.length>we.length?h.from(ke).copy(we,Re):Uint8Array.prototype.set.call(we,ke,Re);else{if(!h.isBuffer(ke))throw new TypeError('"list" argument must be an Array of Buffers');ke.copy(we,Re)}Re+=ke.length}return we},h.byteLength=A,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var q=this.length;if(q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var re=0;re<q;re+=2)C(this,re,re+1);return this},h.prototype.swap32=function(){var q=this.length;if(q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var re=0;re<q;re+=4)C(this,re,re+3),C(this,re+1,re+2);return this},h.prototype.swap64=function(){var q=this.length;if(q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var re=0;re<q;re+=8)C(this,re,re+7),C(this,re+1,re+6),C(this,re+2,re+5),C(this,re+3,re+4);return this},h.prototype.toString=function(){var q=this.length;return q===0?"":arguments.length===0?Q(this,0,q):R.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(q){if(!h.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q||h.compare(this,q)===0},h.prototype.inspect=function(){var q="",re=f.INSPECT_MAX_BYTES;return q=this.toString("hex",0,re).replace(/(.{2})/g,"$1 ").trim(),this.length>re&&(q+=" ... "),"<Buffer "+q+">"},v&&(h.prototype[v]=h.prototype.inspect),h.prototype.compare=function(q,re,fe,we,Re){if(le(q,Uint8Array)&&(q=h.from(q,q.offset,q.byteLength)),!h.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(q));if(re===void 0&&(re=0),fe===void 0&&(fe=q?q.length:0),we===void 0&&(we=0),Re===void 0&&(Re=this.length),re<0||fe>q.length||we<0||Re>this.length)throw new RangeError("out of range index");if(we>=Re&&re>=fe)return 0;if(we>=Re)return-1;if(re>=fe)return 1;if(this===q)return 0;for(var ke=(Re>>>=0)-(we>>>=0),ue=(fe>>>=0)-(re>>>=0),Ee=Math.min(ke,ue),Ae=this.slice(we,Re),Ne=q.slice(re,fe),De=0;De<Ee;++De)if(Ae[De]!==Ne[De]){ke=Ae[De],ue=Ne[De];break}return ke<ue?-1:ue<ke?1:0},h.prototype.includes=function(q,re,fe){return this.indexOf(q,re,fe)!==-1},h.prototype.indexOf=function(q,re,fe){return k(this,q,re,fe,!0)},h.prototype.lastIndexOf=function(q,re,fe){return k(this,q,re,fe,!1)},h.prototype.write=function(q,re,fe,we){if(re===void 0)we="utf8",fe=this.length,re=0;else if(fe===void 0&&typeof re=="string")we=re,fe=this.length,re=0;else{if(!isFinite(re))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");re>>>=0,isFinite(fe)?(fe>>>=0,we===void 0&&(we="utf8")):(we=fe,fe=void 0)}var Re=this.length-re;if((fe===void 0||fe>Re)&&(fe=Re),q.length>0&&(fe<0||re<0)||re>this.length)throw new RangeError("Attempt to write outside buffer bounds");we||(we="utf8");for(var ke=!1;;)switch(we){case"hex":return j(this,q,re,fe);case"utf8":case"utf-8":return V(this,q,re,fe);case"ascii":case"latin1":case"binary":return z(this,q,re,fe);case"base64":return W(this,q,re,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,q,re,fe);default:if(ke)throw new TypeError("Unknown encoding: "+we);we=(""+we).toLowerCase(),ke=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var se=4096;function be(q,re,fe){var we="";fe=Math.min(q.length,fe);for(var Re=re;Re<fe;++Re)we+=String.fromCharCode(127&q[Re]);return we}function H(q,re,fe){var we="";fe=Math.min(q.length,fe);for(var Re=re;Re<fe;++Re)we+=String.fromCharCode(q[Re]);return we}function P(q,re,fe){var we=q.length;(!re||re<0)&&(re=0),(!fe||fe<0||fe>we)&&(fe=we);for(var Re="",ke=re;ke<fe;++ke)Re+=_e[q[ke]];return Re}function L(q,re,fe){for(var we=q.slice(re,fe),Re="",ke=0;ke<we.length-1;ke+=2)Re+=String.fromCharCode(we[ke]+256*we[ke+1]);return Re}function F(q,re,fe){if(q%1!=0||q<0)throw new RangeError("offset is not uint");if(q+re>fe)throw new RangeError("Trying to access beyond buffer length")}function M(q,re,fe,we,Re,ke){if(!h.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(re>Re||re<ke)throw new RangeError('"value" argument is out of bounds');if(fe+we>q.length)throw new RangeError("Index out of range")}function U(q,re,fe,we,Re,ke){if(fe+we>q.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function Z(q,re,fe,we,Re){return re=+re,fe>>>=0,Re||U(q,0,fe,4),$.write(q,re,fe,we,23,4),fe+4}function K(q,re,fe,we,Re){return re=+re,fe>>>=0,Re||U(q,0,fe,8),$.write(q,re,fe,we,52,8),fe+8}h.prototype.slice=function(q,re){var fe=this.length;(q=~~q)<0?(q+=fe)<0&&(q=0):q>fe&&(q=fe),(re=re===void 0?fe:~~re)<0?(re+=fe)<0&&(re=0):re>fe&&(re=fe),re<q&&(re=q);var we=this.subarray(q,re);return Object.setPrototypeOf(we,h.prototype),we},h.prototype.readUintLE=h.prototype.readUIntLE=function(q,re,fe){q>>>=0,re>>>=0,fe||F(q,re,this.length);for(var we=this[q],Re=1,ke=0;++ke<re&&(Re*=256);)we+=this[q+ke]*Re;return we},h.prototype.readUintBE=h.prototype.readUIntBE=function(q,re,fe){q>>>=0,re>>>=0,fe||F(q,re,this.length);for(var we=this[q+--re],Re=1;re>0&&(Re*=256);)we+=this[q+--re]*Re;return we},h.prototype.readUint8=h.prototype.readUInt8=function(q,re){return q>>>=0,re||F(q,1,this.length),this[q]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(q,re){return q>>>=0,re||F(q,2,this.length),this[q]|this[q+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(q,re){return q>>>=0,re||F(q,2,this.length),this[q]<<8|this[q+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(q,re){return q>>>=0,re||F(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+16777216*this[q+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(q,re){return q>>>=0,re||F(q,4,this.length),16777216*this[q]+(this[q+1]<<16|this[q+2]<<8|this[q+3])},h.prototype.readIntLE=function(q,re,fe){q>>>=0,re>>>=0,fe||F(q,re,this.length);for(var we=this[q],Re=1,ke=0;++ke<re&&(Re*=256);)we+=this[q+ke]*Re;return we>=(Re*=128)&&(we-=Math.pow(2,8*re)),we},h.prototype.readIntBE=function(q,re,fe){q>>>=0,re>>>=0,fe||F(q,re,this.length);for(var we=re,Re=1,ke=this[q+--we];we>0&&(Re*=256);)ke+=this[q+--we]*Re;return ke>=(Re*=128)&&(ke-=Math.pow(2,8*re)),ke},h.prototype.readInt8=function(q,re){return q>>>=0,re||F(q,1,this.length),128&this[q]?-1*(255-this[q]+1):this[q]},h.prototype.readInt16LE=function(q,re){q>>>=0,re||F(q,2,this.length);var fe=this[q]|this[q+1]<<8;return 32768&fe?4294901760|fe:fe},h.prototype.readInt16BE=function(q,re){q>>>=0,re||F(q,2,this.length);var fe=this[q+1]|this[q]<<8;return 32768&fe?4294901760|fe:fe},h.prototype.readInt32LE=function(q,re){return q>>>=0,re||F(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},h.prototype.readInt32BE=function(q,re){return q>>>=0,re||F(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},h.prototype.readFloatLE=function(q,re){return q>>>=0,re||F(q,4,this.length),$.read(this,q,!0,23,4)},h.prototype.readFloatBE=function(q,re){return q>>>=0,re||F(q,4,this.length),$.read(this,q,!1,23,4)},h.prototype.readDoubleLE=function(q,re){return q>>>=0,re||F(q,8,this.length),$.read(this,q,!0,52,8)},h.prototype.readDoubleBE=function(q,re){return q>>>=0,re||F(q,8,this.length),$.read(this,q,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(q,re,fe,we){q=+q,re>>>=0,fe>>>=0,we||M(this,q,re,fe,Math.pow(2,8*fe)-1,0);var Re=1,ke=0;for(this[re]=255&q;++ke<fe&&(Re*=256);)this[re+ke]=q/Re&255;return re+fe},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(q,re,fe,we){q=+q,re>>>=0,fe>>>=0,we||M(this,q,re,fe,Math.pow(2,8*fe)-1,0);var Re=fe-1,ke=1;for(this[re+Re]=255&q;--Re>=0&&(ke*=256);)this[re+Re]=q/ke&255;return re+fe},h.prototype.writeUint8=h.prototype.writeUInt8=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,1,255,0),this[re]=255&q,re+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,2,65535,0),this[re]=255&q,this[re+1]=q>>>8,re+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,2,65535,0),this[re]=q>>>8,this[re+1]=255&q,re+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,4,4294967295,0),this[re+3]=q>>>24,this[re+2]=q>>>16,this[re+1]=q>>>8,this[re]=255&q,re+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,4,4294967295,0),this[re]=q>>>24,this[re+1]=q>>>16,this[re+2]=q>>>8,this[re+3]=255&q,re+4},h.prototype.writeIntLE=function(q,re,fe,we){if(q=+q,re>>>=0,!we){var Re=Math.pow(2,8*fe-1);M(this,q,re,fe,Re-1,-Re)}var ke=0,ue=1,Ee=0;for(this[re]=255&q;++ke<fe&&(ue*=256);)q<0&&Ee===0&&this[re+ke-1]!==0&&(Ee=1),this[re+ke]=(q/ue|0)-Ee&255;return re+fe},h.prototype.writeIntBE=function(q,re,fe,we){if(q=+q,re>>>=0,!we){var Re=Math.pow(2,8*fe-1);M(this,q,re,fe,Re-1,-Re)}var ke=fe-1,ue=1,Ee=0;for(this[re+ke]=255&q;--ke>=0&&(ue*=256);)q<0&&Ee===0&&this[re+ke+1]!==0&&(Ee=1),this[re+ke]=(q/ue|0)-Ee&255;return re+fe},h.prototype.writeInt8=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,1,127,-128),q<0&&(q=255+q+1),this[re]=255&q,re+1},h.prototype.writeInt16LE=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,2,32767,-32768),this[re]=255&q,this[re+1]=q>>>8,re+2},h.prototype.writeInt16BE=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,2,32767,-32768),this[re]=q>>>8,this[re+1]=255&q,re+2},h.prototype.writeInt32LE=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,4,2147483647,-2147483648),this[re]=255&q,this[re+1]=q>>>8,this[re+2]=q>>>16,this[re+3]=q>>>24,re+4},h.prototype.writeInt32BE=function(q,re,fe){return q=+q,re>>>=0,fe||M(this,q,re,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[re]=q>>>24,this[re+1]=q>>>16,this[re+2]=q>>>8,this[re+3]=255&q,re+4},h.prototype.writeFloatLE=function(q,re,fe){return Z(this,q,re,!0,fe)},h.prototype.writeFloatBE=function(q,re,fe){return Z(this,q,re,!1,fe)},h.prototype.writeDoubleLE=function(q,re,fe){return K(this,q,re,!0,fe)},h.prototype.writeDoubleBE=function(q,re,fe){return K(this,q,re,!1,fe)},h.prototype.copy=function(q,re,fe,we){if(!h.isBuffer(q))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),we||we===0||(we=this.length),re>=q.length&&(re=q.length),re||(re=0),we>0&&we<fe&&(we=fe),we===fe||q.length===0||this.length===0)return 0;if(re<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("sourceEnd out of bounds");we>this.length&&(we=this.length),q.length-re<we-fe&&(we=q.length-re+fe);var Re=we-fe;return this===q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(re,fe,we):Uint8Array.prototype.set.call(q,this.subarray(fe,we),re),Re},h.prototype.fill=function(q,re,fe,we){if(typeof q=="string"){if(typeof re=="string"?(we=re,re=0,fe=this.length):typeof fe=="string"&&(we=fe,fe=this.length),we!==void 0&&typeof we!="string")throw new TypeError("encoding must be a string");if(typeof we=="string"&&!h.isEncoding(we))throw new TypeError("Unknown encoding: "+we);if(q.length===1){var Re=q.charCodeAt(0);(we==="utf8"&&Re<128||we==="latin1")&&(q=Re)}}else typeof q=="number"?q&=255:typeof q=="boolean"&&(q=Number(q));if(re<0||this.length<re||this.length<fe)throw new RangeError("Out of range index");if(fe<=re)return this;var ke;if(re>>>=0,fe=fe===void 0?this.length:fe>>>0,q||(q=0),typeof q=="number")for(ke=re;ke<fe;++ke)this[ke]=q;else{var ue=h.isBuffer(q)?q:h.from(q,we),Ee=ue.length;if(Ee===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(ke=0;ke<fe-re;++ke)this[ke+re]=ue[ke%Ee]}return this};var oe=/[^+/0-9A-Za-z-_]/g;function ie(q,re){var fe;re=re||1/0;for(var we=q.length,Re=null,ke=[],ue=0;ue<we;++ue){if((fe=q.charCodeAt(ue))>55295&&fe<57344){if(!Re){if(fe>56319){(re-=3)>-1&&ke.push(239,191,189);continue}if(ue+1===we){(re-=3)>-1&&ke.push(239,191,189);continue}Re=fe;continue}if(fe<56320){(re-=3)>-1&&ke.push(239,191,189),Re=fe;continue}fe=65536+(Re-55296<<10|fe-56320)}else Re&&(re-=3)>-1&&ke.push(239,191,189);if(Re=null,fe<128){if((re-=1)<0)break;ke.push(fe)}else if(fe<2048){if((re-=2)<0)break;ke.push(fe>>6|192,63&fe|128)}else if(fe<65536){if((re-=3)<0)break;ke.push(fe>>12|224,fe>>6&63|128,63&fe|128)}else{if(!(fe<1114112))throw new Error("Invalid code point");if((re-=4)<0)break;ke.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,63&fe|128)}}return ke}function $e(q){return g.toByteArray(function(re){if((re=(re=re.split("=")[0]).trim().replace(oe,"")).length<2)return"";for(;re.length%4!=0;)re+="=";return re}(q))}function ce(q,re,fe,we){for(var Re=0;Re<we&&!(Re+fe>=re.length||Re>=q.length);++Re)re[Re+fe]=q[Re];return Re}function le(q,re){return q instanceof re||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===re.name}function ye(q){return q!=q}var _e=function(){for(var q="0123456789abcdef",re=new Array(256),fe=0;fe<16;++fe)for(var we=16*fe,Re=0;Re<16;++Re)re[we+Re]=q[fe]+q[Re];return re}()},5833:(d,f,a)=>{var u=a(1679),g=a(2635),$=a(1058),v=a(3261),S=a(2533);function E(h){S.call(this,"digest"),this._hash=h}u(E,S),E.prototype._update=function(h){this._hash.update(h)},E.prototype._final=function(){return this._hash.digest()},d.exports=function(h){return(h=h.toLowerCase())==="md5"?new g:h==="rmd160"||h==="ripemd160"?new $:new E(v(h))}},5864:(d,f,a)=>{d.exports=a(3550).EventEmitter},5879:d=>{d.exports=function(f){if(f!=null&&typeof f.constructor=="function")return f.constructor.name}},5889:(d,f,a)=>{function u(b,m){var p=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!p){if(Array.isArray(b)||(p=g(b))||m){p&&(b=p);var _=0,y=function(){};return{s:y,n:function(){return _>=b.length?{done:!0}:{done:!1,value:b[_++]}},e:function(C){throw C},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x,A=!0,R=!1;return{s:function(){p=p.call(b)},n:function(){var C=p.next();return A=C.done,C},e:function(C){R=!0,x=C},f:function(){try{A||p.return==null||p.return()}finally{if(R)throw x}}}}function g(b,m){if(b){if(typeof b=="string")return $(b,m);var p={}.toString.call(b).slice(8,-1);return p==="Object"&&b.constructor&&(p=b.constructor.name),p==="Map"||p==="Set"?Array.from(b):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?$(b,m):void 0}}function $(b,m){(m==null||m>b.length)&&(m=b.length);for(var p=0,_=Array(m);p<m;p++)_[p]=b[p];return _}var v=a(7930).arrayAtomicsSymbol,S=a(7930).sessionNewDocuments,E=a(8768);function h(b,m){return b=b||{},m.$pullAll!=null&&(b.$pullAll=(b.$pullAll||[]).concat(m.$pullAll)),m.$push!=null&&(b.$push=b.$push||{},b.$push.$each=(b.$push.$each||[]).concat(m.$push.$each)),m.$addToSet!=null&&(b.$addToSet=(b.$addToSet||[]).concat(m.$addToSet)),m.$set!=null&&(b.$set=Array.isArray(m.$set)?function(_){if(Array.isArray(_))return $(_)}(p=m.$set)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(p)||g(p)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}():Object.assign({},m.$set)),b;var p}d.exports=function(b){b.pre("save",function(){var m=this.$session();if(m!=null&&m.transaction!=null&&m[S]!=null&&!m[S].has(this)){var p={};this.isNew&&(p.isNew=!0),this.$__schema.options.versionKey&&(p.versionKey=this.get(this.$__schema.options.versionKey)),p.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),p.atomics=function(_,y){var x=new Map;y=y||new Map;var A,R=u(Object.keys(_.$__.activePaths.init).concat(Object.keys(_.$__.activePaths.modify)));try{for(R.s();!(A=R.n()).done;){var C=A.value,k=_.$__getValue(C);if(k!=null&&Array.isArray(k)&&E.isMongooseDocumentArray(k)&&k.length&&k[v]!=null&&Object.keys(k[v]).length!==0){var D=y.get(C)||{};x.set(C,h(D,k[v]))}}}catch(Q){R.e(Q)}finally{R.f()}var j,V=u(_.$__dirty());try{for(V.s();!(j=V.n()).done;){var z=j.value,W=z.path,ee=z.value;if(ee!=null&&ee[v]!=null&&Object.keys(ee[v]).length!==0){var ne=y.get(W)||{};x.set(W,h(ne,ee[v]))}}}catch(Q){V.e(Q)}finally{V.f()}return x}(this),m[S].set(this,p)}})}},5899:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}var g=a(953)(),$=a(3071)("Object.prototype.toString"),v=function(h){return!(g&&h&&u(h)==="object"&&Symbol.toStringTag in h)&&$(h)==="[object Arguments]"},S=function(h){return!!v(h)||h!==null&&u(h)==="object"&&"length"in h&&typeof h.length=="number"&&h.length>=0&&$(h)!=="[object Array]"&&"callee"in h&&$(h.callee)==="[object Function]"},E=function(){return v(arguments)}();v.isLegacyArguments=S,d.exports=E?v:S},5938:(d,f,a)=>{var u=a(1679),g=a(6467),$=a(1485),v=a(9732).Buffer,S=new Array(160);function E(){this.init(),this._w=S,$.call(this,128,112)}u(E,g),E.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},E.prototype._hash=function(){var h=v.allocUnsafe(48);function b(m,p,_){h.writeInt32BE(m,_),h.writeInt32BE(p,_+4)}return b(this._ah,this._al,0),b(this._bh,this._bl,8),b(this._ch,this._cl,16),b(this._dh,this._dl,24),b(this._eh,this._el,32),b(this._fh,this._fl,40),h},d.exports=E},5994:(d,f,a)=>{var u=Function.prototype.call,g=Object.prototype.hasOwnProperty,$=a(2354);d.exports=$.call(u,g)},6062:(d,f,a)=>{var u=a(9122),g=a(2273),$=a(118),v=a(4183),S=a(7878),E=u(v(),Number);g(E,{getPolyfill:v,implementation:$,shim:S}),d.exports=E},6140:d=>{function f(a,u,g){return Object.defineProperty(a,"prototype",{writable:!1}),a}d.exports=f(function a(u,g,$){(function(v,S){if(!(v instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),this.subdocSnapshot=u,this.activePaths=g,this.version=$})},6155:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a){for(var u=Object.keys(a),g=!0,$=0,v=u.length;$<v;++$)if(f(a[u[$]])==="object"&&a[u[$]]!==null){g=!1;break}return g}},6170:(d,f,a)=>{var u=a(1419),g=u.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),$=u.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),v=u.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),S=u.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(v),this.key("subjectPublicKey").bitstr())}),E=u.define("RelativeDistinguishedName",function(){this.setof($)}),h=u.define("RDNSequence",function(){this.seqof(E)}),b=u.define("Name",function(){this.choice({rdnSequence:this.use(h)})}),m=u.define("Validity",function(){this.seq().obj(this.key("notBefore").use(g),this.key("notAfter").use(g))}),p=u.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),_=u.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(v),this.key("issuer").use(b),this.key("validity").use(m),this.key("subject").use(b),this.key("subjectPublicKeyInfo").use(S),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(p).optional())}),y=u.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(_),this.key("signatureAlgorithm").use(v),this.key("signatureValue").bitstr())});d.exports=y},6182:d=>{function f(a,u){if(a==null)throw new TypeError("Cannot convert first argument to object");for(var g=Object(a),$=1;$<arguments.length;$++){var v=arguments[$];if(v!=null)for(var S=Object.keys(Object(v)),E=0,h=S.length;E<h;E++){var b=S[E],m=Object.getOwnPropertyDescriptor(v,b);m!==void 0&&m.enumerable&&(g[b]=v[b])}}return g}d.exports={assign:f,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:f})}}},6193:(d,f,a)=>{function u(ye){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},u(ye)}function g(ye,_e){return function(q){if(Array.isArray(q))return q}(ye)||function(q,re){var fe=[],we=!0,Re=!1,ke=void 0;try{for(var ue,Ee=q[Symbol.iterator]();!(we=(ue=Ee.next()).done)&&(fe.push(ue.value),!re||fe.length!==re);we=!0);}catch(Ae){Re=!0,ke=Ae}finally{try{we||Ee.return==null||Ee.return()}finally{if(Re)throw ke}}return fe}(ye,_e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $(ye){return $=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(_e){return u(_e)}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":u(_e)},$(ye)}var v=/a/g.flags!==void 0,S=function(ye){var _e=[];return ye.forEach(function(q){return _e.push(q)}),_e},E=function(ye){var _e=[];return ye.forEach(function(q,re){return _e.push([re,q])}),_e},h=Object.is?Object.is:a(2064),b=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},m=Number.isNaN?Number.isNaN:a(6062);function p(ye){return ye.call.bind(ye)}var _=p(Object.prototype.hasOwnProperty),y=p(Object.prototype.propertyIsEnumerable),x=p(Object.prototype.toString),A=a(7352).types,R=A.isAnyArrayBuffer,C=A.isArrayBufferView,k=A.isDate,D=A.isMap,j=A.isRegExp,V=A.isSet,z=A.isNativeError,W=A.isBoxedPrimitive,ee=A.isNumberObject,ne=A.isStringObject,Q=A.isBooleanObject,se=A.isBigIntObject,be=A.isSymbolObject,H=A.isFloat32Array,P=A.isFloat64Array;function L(ye){if(ye.length===0||ye.length>10)return!0;for(var _e=0;_e<ye.length;_e++){var q=ye.charCodeAt(_e);if(q<48||q>57)return!0}return ye.length===10&&ye>=Math.pow(2,32)}function F(ye){return Object.keys(ye).filter(L).concat(b(ye).filter(Object.prototype.propertyIsEnumerable.bind(ye)))}function M(ye,_e){if(ye===_e)return 0;for(var q=ye.length,re=_e.length,fe=0,we=Math.min(q,re);fe<we;++fe)if(ye[fe]!==_e[fe]){q=ye[fe],re=_e[fe];break}return q<re?-1:re<q?1:0}function U(ye,_e,q,re){if(ye===_e)return ye!==0||!q||h(ye,_e);if(q){if($(ye)!=="object")return typeof ye=="number"&&m(ye)&&m(_e);if($(_e)!=="object"||ye===null||_e===null||Object.getPrototypeOf(ye)!==Object.getPrototypeOf(_e))return!1}else{if(ye===null||$(ye)!=="object")return(_e===null||$(_e)!=="object")&&ye==_e;if(_e===null||$(_e)!=="object")return!1}var fe,we,Re,ke,ue=x(ye);if(ue!==x(_e))return!1;if(Array.isArray(ye)){if(ye.length!==_e.length)return!1;var Ee=F(ye),Ae=F(_e);return Ee.length===Ae.length&&K(ye,_e,q,re,1,Ee)}if(ue==="[object Object]"&&(!D(ye)&&D(_e)||!V(ye)&&V(_e)))return!1;if(k(ye)){if(!k(_e)||Date.prototype.getTime.call(ye)!==Date.prototype.getTime.call(_e))return!1}else if(j(ye)){if(!j(_e)||(Re=ye,ke=_e,!(v?Re.source===ke.source&&Re.flags===ke.flags:RegExp.prototype.toString.call(Re)===RegExp.prototype.toString.call(ke))))return!1}else if(z(ye)||ye instanceof Error){if(ye.message!==_e.message||ye.name!==_e.name)return!1}else{if(C(ye)){if(q||!H(ye)&&!P(ye)){if(!function(he,tt){return he.byteLength===tt.byteLength&&M(new Uint8Array(he.buffer,he.byteOffset,he.byteLength),new Uint8Array(tt.buffer,tt.byteOffset,tt.byteLength))===0}(ye,_e))return!1}else if(!function(he,tt){if(he.byteLength!==tt.byteLength)return!1;for(var at=0;at<he.byteLength;at++)if(he[at]!==tt[at])return!1;return!0}(ye,_e))return!1;var Ne=F(ye),De=F(_e);return Ne.length===De.length&&K(ye,_e,q,re,0,Ne)}if(V(ye))return!(!V(_e)||ye.size!==_e.size)&&K(ye,_e,q,re,2);if(D(ye))return!(!D(_e)||ye.size!==_e.size)&&K(ye,_e,q,re,3);if(R(ye)){if(we=_e,(fe=ye).byteLength!==we.byteLength||M(new Uint8Array(fe),new Uint8Array(we))!==0)return!1}else if(W(ye)&&!function(he,tt){return ee(he)?ee(tt)&&h(Number.prototype.valueOf.call(he),Number.prototype.valueOf.call(tt)):ne(he)?ne(tt)&&String.prototype.valueOf.call(he)===String.prototype.valueOf.call(tt):Q(he)?Q(tt)&&Boolean.prototype.valueOf.call(he)===Boolean.prototype.valueOf.call(tt):se(he)?se(tt)&&BigInt.prototype.valueOf.call(he)===BigInt.prototype.valueOf.call(tt):be(tt)&&Symbol.prototype.valueOf.call(he)===Symbol.prototype.valueOf.call(tt)}(ye,_e))return!1}return K(ye,_e,q,re,0)}function Z(ye,_e){return _e.filter(function(q){return y(ye,q)})}function K(ye,_e,q,re,fe,we){if(arguments.length===5){we=Object.keys(ye);var Re=Object.keys(_e);if(we.length!==Re.length)return!1}for(var ke=0;ke<we.length;ke++)if(!_(_e,we[ke]))return!1;if(q&&arguments.length===5){var ue=b(ye);if(ue.length!==0){var Ee=0;for(ke=0;ke<ue.length;ke++){var Ae=ue[ke];if(y(ye,Ae)){if(!y(_e,Ae))return!1;we.push(Ae),Ee++}else if(y(_e,Ae))return!1}var Ne=b(_e);if(ue.length!==Ne.length&&Z(_e,Ne).length!==Ee)return!1}else{var De=b(_e);if(De.length!==0&&Z(_e,De).length!==0)return!1}}if(we.length===0&&(fe===0||fe===1&&ye.length===0||ye.size===0))return!0;if(re===void 0)re={val1:new Map,val2:new Map,position:0};else{var he=re.val1.get(ye);if(he!==void 0){var tt=re.val2.get(_e);if(tt!==void 0)return he===tt}re.position++}re.val1.set(ye,re.position),re.val2.set(_e,re.position);var at=function(He,ot,Ue,Ze,ae,Oe){var Le=0;if(Oe===2){if(!function(qt,gn,dn,un){for(var ge=null,ve=S(qt),Fe=0;Fe<ve.length;Fe++){var qe=ve[Fe];if($(qe)==="object"&&qe!==null)ge===null&&(ge=new Set),ge.add(qe);else if(!gn.has(qe)){if(dn||!$e(qt,gn,qe))return!1;ge===null&&(ge=new Set),ge.add(qe)}}if(ge!==null){for(var st=S(gn),Dt=0;Dt<st.length;Dt++){var Wt=st[Dt];if($(Wt)==="object"&&Wt!==null){if(!oe(ge,Wt,dn,un))return!1}else if(!dn&&!qt.has(Wt)&&!oe(ge,Wt,dn,un))return!1}return ge.size===0}return!0}(He,ot,Ue,ae))return!1}else if(Oe===3){if(!function(qt,gn,dn,un){for(var ge=null,ve=E(qt),Fe=0;Fe<ve.length;Fe++){var qe=g(ve[Fe],2),st=qe[0],Dt=qe[1];if($(st)==="object"&&st!==null)ge===null&&(ge=new Set),ge.add(st);else{var Wt=gn.get(st);if(Wt===void 0&&!gn.has(st)||!U(Dt,Wt,dn,un)){if(dn||!ce(qt,gn,st,Dt,un))return!1;ge===null&&(ge=new Set),ge.add(st)}}}if(ge!==null){for(var pn=E(gn),bn=0;bn<pn.length;bn++){var sr=g(pn[bn],2),Pn=(st=sr[0],sr[1]);if($(st)==="object"&&st!==null){if(!le(ge,qt,st,Pn,dn,un))return!1}else if(!(dn||qt.has(st)&&U(qt.get(st),Pn,!1,un)||le(ge,qt,st,Pn,!1,un)))return!1}return ge.size===0}return!0}(He,ot,Ue,ae))return!1}else if(Oe===1)for(;Le<He.length;Le++){if(!_(He,Le)){if(_(ot,Le))return!1;for(var Pe=Object.keys(He);Le<Pe.length;Le++){var ft=Pe[Le];if(!_(ot,ft)||!U(He[ft],ot[ft],Ue,ae))return!1}return Pe.length===Object.keys(ot).length}if(!_(ot,Le)||!U(He[Le],ot[Le],Ue,ae))return!1}for(Le=0;Le<Ze.length;Le++){var Lt=Ze[Le];if(!U(He[Lt],ot[Lt],Ue,ae))return!1}return!0}(ye,_e,q,we,re,fe);return re.val1.delete(ye),re.val2.delete(_e),at}function oe(ye,_e,q,re){for(var fe=S(ye),we=0;we<fe.length;we++){var Re=fe[we];if(U(_e,Re,q,re))return ye.delete(Re),!0}return!1}function ie(ye){switch($(ye)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":ye=+ye;case"number":if(m(ye))return!1}return!0}function $e(ye,_e,q){var re=ie(q);return re??(_e.has(re)&&!ye.has(re))}function ce(ye,_e,q,re,fe){var we=ie(q);if(we!=null)return we;var Re=_e.get(we);return!(Re===void 0&&!_e.has(we)||!U(re,Re,!1,fe))&&!ye.has(we)&&U(re,Re,!1,fe)}function le(ye,_e,q,re,fe,we){for(var Re=S(ye),ke=0;ke<Re.length;ke++){var ue=Re[ke];if(U(q,ue,fe,we)&&U(re,_e.get(ue),fe,we))return ye.delete(ue),!0}return!1}d.exports={isDeepEqual:function(ye,_e){return U(ye,_e,!1)},isDeepStrictEqual:function(ye,_e){return U(ye,_e,!0)}}},6222:d=>{function f(g,$){u(g,$),a(g)}function a(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function u(g,$){g.emit("error",$)}d.exports={destroy:function(g,$){var v=this,S=this._readableState&&this._readableState.destroyed,E=this._writableState&&this._writableState.destroyed;return S||E?($?$(g):g&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,{env:{}}.nextTick(u,this,g)):{env:{}}.nextTick(u,this,g)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(g||null,function(h){!$&&h?v._writableState?v._writableState.errorEmitted?{env:{}}.nextTick(a,v):(v._writableState.errorEmitted=!0,{env:{}}.nextTick(f,v,h)):{env:{}}.nextTick(f,v,h):$?({env:{}}.nextTick(a,v),$(h)):{env:{}}.nextTick(a,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(g,$){var v=g._readableState,S=g._writableState;v&&v.autoDestroy||S&&S.autoDestroy?g.destroy($):g.emit("error",$)}}},6223:d=>{var f=/\./g;d.exports=function(a){if(a.indexOf(".")===-1)return[a];for(var u=a.split(f),g=u.length,$=new Array(g),v="",S=0;S<g;++S)v+=v.length!==0?"."+u[S]:u[S],$[S]=v;return $}},6292:(d,f,a)=>{var u=a(1419);f.certificate=a(6170);var g=u.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});f.RSAPrivateKey=g;var $=u.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});f.RSAPublicKey=$;var v=u.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),S=u.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(v),this.key("subjectPublicKey").bitstr())});f.PublicKey=S;var E=u.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(v),this.key("subjectPrivateKey").octstr())});f.PrivateKey=E;var h=u.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});f.EncryptedPrivateKey=h;var b=u.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});f.DSAPrivateKey=b,f.DSAparam=u.define("DSAparam",function(){this.int()});var m=u.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),p=u.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(m),this.key("publicKey").optional().explicit(1).bitstr())});f.ECPrivateKey=p,f.signature=u.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},6312:d=>{function f(u){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},f(u)}var a=Object.prototype.toString;d.exports=function(u){var g=a.call(u),$=g==="[object Arguments]";return $||($=g!=="[object Array]"&&u!==null&&f(u)==="object"&&typeof u.length=="number"&&u.length>=0&&a.call(u.callee)==="[object Function]"),$}},6322:(d,f,a)=>{var u=a(9732).Buffer;function g($,v,S){var E=$._cipher.encryptBlock($._prev)[0]^v;return $._prev=u.concat([$._prev.slice(1),u.from([S?v:E])]),E}f.encrypt=function($,v,S){for(var E=v.length,h=u.allocUnsafe(E),b=-1;++b<E;)h[b]=g($,v[b],S);return h}},6365:(d,f,a)=>{var u=a(5832).Buffer,g=a(3633).Binary,$=a(8768);function v(h,b,m){var p,_,y,x,A=h;return h==null&&(A=0),Array.isArray(b)?(_=b[0],y=b[1]):p=b,x=typeof A=="number"||A instanceof Number?u.alloc(A):u.from(A,p,m),$.decorate(x,v.mixin),x.isMongooseBuffer=!0,x[v.pathSymbol]=_,x[E]=y,x._subtype=0,x}var S=Symbol.for("mongoose#Buffer#_path"),E=Symbol.for("mongoose#Buffer#_parent");v.pathSymbol=S,v.mixin={_subtype:void 0,_markModified:function(){var h=this[E];return h&&h.markModified(this[v.pathSymbol]),this},write:function(){var h=u.prototype.write.apply(this,arguments);return h>0&&this._markModified(),h},copy:function(h){var b=u.prototype.copy.apply(this,arguments);return h&&h.isMongooseBuffer&&h._markModified(),b}},$.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(h){u.prototype[h]&&(v.mixin[h]=function(){var b=u.prototype[h].apply(this,arguments);return this._markModified(),b})}),v.mixin.toObject=function(h){var b=typeof h=="number"?h:this._subtype||0;return new g(u.from(this),b)},v.mixin.$toObject=v.mixin.toObject,v.mixin.toBSON=function(){return new g(this,this._subtype||0)},v.mixin.equals=function(h){if(!u.isBuffer(h)||this.length!==h.length)return!1;for(var b=0;b<this.length;++b)if(this[b]!==h[b])return!1;return!0},v.mixin.subtype=function(h){if(typeof h!="number")throw new TypeError("Invalid subtype. Expected a number");this._subtype!==h&&this._markModified(),this._subtype=h},v.Binary=g,d.exports=v},6379:(d,f,a)=>{var u,g=f,$=a(2859),v=a(5803),S=a(1970).assert;function E(b){b.type==="short"?this.curve=new v.short(b):b.type==="edwards"?this.curve=new v.edwards(b):this.curve=new v.mont(b),this.g=this.curve.g,this.n=this.curve.n,this.hash=b.hash,S(this.g.validate(),"Invalid curve"),S(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(b,m){Object.defineProperty(g,b,{configurable:!0,enumerable:!0,get:function(){var p=new E(m);return Object.defineProperty(g,b,{configurable:!0,enumerable:!0,value:p}),p}})}g.PresetCurve=E,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:$.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:$.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:$.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:$.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:$.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:$.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:$.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{u=a(5586)}catch{u=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:$.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})},6400:(d,f,a)=>{function u(we){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Re){return typeof Re}:function(Re){return Re&&typeof Symbol=="function"&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re},u(we)}var g,$=a(8093),v=a(9870),S=a(9206),E=a(9939),h=a(783),b=a(2288),m=a(2268),p=a(8188),_=a(9471),y=a(2401),x=a(1697),A=a(8435),R=a(8633),C=a(2151),k=a(674),D=Function,j=function(we){try{return D('"use strict"; return ('+we+").constructor;")()}catch{}},V=a(1464),z=a(988),W=function(){throw new m},ee=V?function(){try{return W}catch{try{return V(arguments,"callee").get}catch{return W}}}():W,ne=a(5510)(),Q=a(209),se=a(5825),be=a(2403),H=a(3279),P=a(3123),L={},F=typeof Uint8Array<"u"&&Q?Q(Uint8Array):g,M={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?g:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?g:ArrayBuffer,"%ArrayIteratorPrototype%":ne&&Q?Q([][Symbol.iterator]()):g,"%AsyncFromSyncIteratorPrototype%":g,"%AsyncFunction%":L,"%AsyncGenerator%":L,"%AsyncGeneratorFunction%":L,"%AsyncIteratorPrototype%":L,"%Atomics%":typeof Atomics>"u"?g:Atomics,"%BigInt%":typeof BigInt>"u"?g:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?g:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?g:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?g:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":v,"%eval%":eval,"%EvalError%":S,"%Float16Array%":typeof Float16Array>"u"?g:Float16Array,"%Float32Array%":typeof Float32Array>"u"?g:Float32Array,"%Float64Array%":typeof Float64Array>"u"?g:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?g:FinalizationRegistry,"%Function%":D,"%GeneratorFunction%":L,"%Int8Array%":typeof Int8Array>"u"?g:Int8Array,"%Int16Array%":typeof Int16Array>"u"?g:Int16Array,"%Int32Array%":typeof Int32Array>"u"?g:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ne&&Q?Q(Q([][Symbol.iterator]())):g,"%JSON%":(typeof JSON>"u"?"undefined":u(JSON))==="object"?JSON:g,"%Map%":typeof Map>"u"?g:Map,"%MapIteratorPrototype%":typeof Map<"u"&&ne&&Q?Q(new Map()[Symbol.iterator]()):g,"%Math%":Math,"%Number%":Number,"%Object%":$,"%Object.getOwnPropertyDescriptor%":V,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?g:Promise,"%Proxy%":typeof Proxy>"u"?g:Proxy,"%RangeError%":E,"%ReferenceError%":h,"%Reflect%":typeof Reflect>"u"?g:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?g:Set,"%SetIteratorPrototype%":typeof Set<"u"&&ne&&Q?Q(new Set()[Symbol.iterator]()):g,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?g:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ne&&Q?Q(""[Symbol.iterator]()):g,"%Symbol%":ne?Symbol:g,"%SyntaxError%":b,"%ThrowTypeError%":ee,"%TypedArray%":F,"%TypeError%":m,"%Uint8Array%":typeof Uint8Array>"u"?g:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?g:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?g:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?g:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?g:WeakMap,"%WeakRef%":typeof WeakRef>"u"?g:WeakRef,"%WeakSet%":typeof WeakSet>"u"?g:WeakSet,"%Function.prototype.call%":P,"%Function.prototype.apply%":H,"%Object.defineProperty%":z,"%Object.getPrototypeOf%":se,"%Math.abs%":_,"%Math.floor%":y,"%Math.max%":x,"%Math.min%":A,"%Math.pow%":R,"%Math.round%":C,"%Math.sign%":k,"%Reflect.getPrototypeOf%":be};if(Q)try{null.error}catch(we){var U=Q(Q(we));M["%Error.prototype%"]=U}var Z=function we(Re){var ke;if(Re==="%AsyncFunction%")ke=j("async function () {}");else if(Re==="%GeneratorFunction%")ke=j("function* () {}");else if(Re==="%AsyncGeneratorFunction%")ke=j("async function* () {}");else if(Re==="%AsyncGenerator%"){var ue=we("%AsyncGeneratorFunction%");ue&&(ke=ue.prototype)}else if(Re==="%AsyncIteratorPrototype%"){var Ee=we("%AsyncGenerator%");Ee&&Q&&(ke=Q(Ee.prototype))}return M[Re]=ke,ke},K={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},oe=a(2354),ie=a(5994),$e=oe.call(P,Array.prototype.concat),ce=oe.call(H,Array.prototype.splice),le=oe.call(P,String.prototype.replace),ye=oe.call(P,String.prototype.slice),_e=oe.call(P,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,re=/\\(\\)?/g,fe=function(we,Re){var ke,ue=we;if(ie(K,ue)&&(ue="%"+(ke=K[ue])[0]+"%"),ie(M,ue)){var Ee=M[ue];if(Ee===L&&(Ee=Z(ue)),Ee===void 0&&!Re)throw new m("intrinsic "+we+" exists, but is not available. Please file an issue!");return{alias:ke,name:ue,value:Ee}}throw new b("intrinsic "+we+" does not exist!")};d.exports=function(we,Re){if(typeof we!="string"||we.length===0)throw new m("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Re!="boolean")throw new m('"allowMissing" argument must be a boolean');if(_e(/^%?[^%]*%?$/,we)===null)throw new b("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ke=function(ae){var Oe=ye(ae,0,1),Le=ye(ae,-1);if(Oe==="%"&&Le!=="%")throw new b("invalid intrinsic syntax, expected closing `%`");if(Le==="%"&&Oe!=="%")throw new b("invalid intrinsic syntax, expected opening `%`");var Pe=[];return le(ae,q,function(ft,Lt,qt,gn){Pe[Pe.length]=qt?le(gn,re,"$1"):Lt||ft}),Pe}(we),ue=ke.length>0?ke[0]:"",Ee=fe("%"+ue+"%",Re),Ae=Ee.name,Ne=Ee.value,De=!1,he=Ee.alias;he&&(ue=he[0],ce(ke,$e([0,1],he)));for(var tt=1,at=!0;tt<ke.length;tt+=1){var He=ke[tt],ot=ye(He,0,1),Ue=ye(He,-1);if((ot==='"'||ot==="'"||ot==="`"||Ue==='"'||Ue==="'"||Ue==="`")&&ot!==Ue)throw new b("property names with quotes must have matching quotes");if(He!=="constructor"&&at||(De=!0),ie(M,Ae="%"+(ue+="."+He)+"%"))Ne=M[Ae];else if(Ne!=null){if(!(He in Ne)){if(!Re)throw new m("base intrinsic for "+we+" exists, but the property is not available.");return}if(V&&tt+1>=ke.length){var Ze=V(Ne,He);Ne=(at=!!Ze)&&"get"in Ze&&!("originalValue"in Ze.get)?Ze.get:Ne[He]}else at=ie(Ne,He),Ne=Ne[He];at&&!De&&(M[Ae]=Ne)}}return Ne}},6413:(d,f,a)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},u(m)}function g(m,p){var _=Object.keys(m);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(m);p&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(m,x).enumerable})),_.push.apply(_,y)}return _}function $(m,p,_){return(p=function(y){var x=function(A){if(u(A)!="object"||!A)return A;var R=A[Symbol.toPrimitive];if(R!==void 0){var C=R.call(A,"string");if(u(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}(y);return u(x)=="symbol"?x:x+""}(p))in m?Object.defineProperty(m,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):m[p]=_,m}var v=a(3609),S=a(6426),E=a(8953),h=a(4327);function b(m,p){S.call(this,m,p,"Boolean")}b.schemaName="Boolean",b.defaultOptions={},b.prototype=Object.create(S.prototype),b.prototype.constructor=b,b._cast=E,b.set=S.set,b.setters=[],b.get=S.get,b.cast=function(m){return arguments.length===0||(m===!1&&(m=this._defaultCaster),this._cast=m),this._cast},b._defaultCaster=function(m){if(m!=null&&typeof m!="boolean")throw new Error;return m},b._checkRequired=function(m){return m===!0||m===!1},b.checkRequired=S.checkRequired,b.prototype.checkRequired=function(m){return this.constructor._checkRequired(m)},Object.defineProperty(b,"convertToTrue",{get:function(){return E.convertToTrue},set:function(m){E.convertToTrue=m}}),Object.defineProperty(b,"convertToFalse",{get:function(){return E.convertToFalse},set:function(m){E.convertToFalse=m}}),b.prototype.cast=function(m){var p;p=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():b.cast();try{return p(m)}catch(_){throw new v("Boolean",m,this.path,_,this)}},b.$conditionalHandlers=function(m){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?g(Object(_),!0).forEach(function(y){$(m,y,_[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(_)):g(Object(_)).forEach(function(y){Object.defineProperty(m,y,Object.getOwnPropertyDescriptor(_,y))})}return m}({},S.prototype.$conditionalHandlers),b.prototype.castForQuery=function(m,p,_){var y;if(m!=null)return(y=b.$conditionalHandlers[m])?y.call(this,p):this.applySetters(p,_);try{return this.applySetters(p,_)}catch(x){throw x instanceof v&&x.path===this.path&&this.$fullPath!=null&&(x.path=this.$fullPath),x}},b.prototype._castNullish=function(m){if(m===void 0)return m;var p=typeof this.constructor.cast=="function"?this.constructor.cast():b.cast();return p==null?m:!(p.convertToFalse instanceof Set&&p.convertToFalse.has(m))&&(!!(p.convertToTrue instanceof Set&&p.convertToTrue.has(m))||m)},b.prototype.toJSONSchema=function(m){var p=this.options.required&&typeof this.options.required!="function";return h("boolean","bool",m==null?void 0:m.useBsonType,p)},d.exports=b},6426:(d,f,a)=>{var u=a(5832).Buffer;function g(ne){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},g(ne)}var $=a(3672),v=a(8879),S=a(8499),E=a(2555),h=a(4450),b=a(8133),m=a(9183),p=a(6155),_=a(2746),y=a(7930).schemaTypeSymbol,x=a(8768),A=a(7930).validatorErrorSymbol,R=a(7930).documentIsModified,C=a(7930).populateModelSymbol,k=$.CastError,D=$.ValidatorError,j={_skipMarkModified:!0};function V(ne,Q,se){this[y]=!0,this.path=ne,this.instance=se,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),Q=Q||{};for(var be=this.constructor.defaultOptions||{},H=0,P=Object.keys(be);H<P.length;H++){var L=P[H];L==="validate"?this.validate(be.validate):be.hasOwnProperty(L)&&!Object.prototype.hasOwnProperty.call(Q,L)&&(Q[L]=be[L])}Q.select==null&&delete Q.select;var F=this.OptionsConstructor||v;this.options=new F(Q),this._index=null,x.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,b(this));for(var M=0,U=Object.keys(this.options);M<U.length;M++){var Z=U[M];if(Z!=="cast"){if(x.hasUserDefinedProperty(this.options,Z)&&typeof this[Z]=="function"){if(Z==="index"&&this._index){if(Q.index===!1){var K=this._index;if(g(K)==="object"&&K!=null){if(K.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(K.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}var oe=Q[Z];if(Z==="default"){this.default(oe);continue}var ie=Array.isArray(oe)?oe:[oe];this[Z].apply(this,ie)}}else Array.isArray(this.options[Z])?this.castFunction.apply(this,this.options[Z]):this.castFunction(this.options[Z])}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}function z(ne,Q){if(ne!==void 0&&!ne){var se=new(Q.ErrorConstructor||D)(Q);return se[A]=!0,se}}function W(ne,Q){return this.castForQuery(null,ne,Q)}function ee(ne,Q){var se=this;return Array.isArray(ne)?ne.map(function(be){return Array.isArray(be)&&be.length===0?be:se.castForQuery(null,be,Q)}):[this.castForQuery(null,ne,Q)]}V.prototype.OptionsConstructor=v,V.prototype.path,V.prototype.validators,V.prototype.isRequired,V.prototype.splitPath=function(){return this._presplitPath!=null?this._presplitPath:this.path!=null?(this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath):void 0},V.cast=function(ne){return arguments.length===0||(ne===!1&&(ne=function(Q){return Q}),this._cast=ne),this._cast},V.prototype.castFunction=function(ne,Q){return arguments.length===0?this._castFunction:(ne===!1&&(ne=this.constructor._defaultCaster||function(se){return se}),typeof ne=="string"?(this._castErrorMessage=ne,this._castFunction):(ne!=null&&(this._castFunction=ne),Q!=null&&(this._castErrorMessage=Q),this._castFunction))},V.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")},V.set=function(ne,Q){this.hasOwnProperty("defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[ne]=Q},V.get=function(ne){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(ne)},V.prototype.default=function(ne){if(arguments.length===1){if(ne===void 0)return void(this.defaultValue=void 0);if(ne!=null&&ne.instanceOfSchema)throw new $("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=ne,this.defaultValue}return arguments.length>1&&(this.defaultValue=Array.prototype.slice.call(arguments)),this.defaultValue},V.prototype.index=function(ne){return this._index=ne,x.expires(this._index),this},V.prototype.unique=function(ne,Q){if(this._index===!1){if(!ne)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return this.options.hasOwnProperty("index")||ne!==!1?(this._index==null||this._index===!0?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.unique=!!ne,typeof Q=="string"&&(this._duplicateKeyErrorMessage=Q),this):this},V.prototype.text=function(ne){if(this._index===!1){if(!ne)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return this.options.hasOwnProperty("index")||ne!==!1?(this._index===null||this._index===void 0||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.text=ne,this):this},V.prototype.sparse=function(ne){if(this._index===!1){if(!ne)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return this.options.hasOwnProperty("index")||ne!==!1?(this._index==null||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.sparse=ne,this):this},V.prototype.immutable=function(ne){return this.$immutable=ne,b(this),this},V.prototype.transform=function(ne){return this.options.transform=ne,this},V.prototype.set=function(ne){if(typeof ne!="function")throw new TypeError("A setter must be a function.");return this.setters.push(ne),this},V.prototype.get=function(ne){if(typeof ne!="function")throw new TypeError("A getter must be a function.");return this.getters.push(ne),this},V.prototype.validateAll=function(ne){for(var Q=0;Q<ne.length;Q++)this.validate(ne[Q]);return this},V.prototype.validate=function(ne,Q,se){var be,H,P,L;if(typeof ne=="function"||ne&&x.getFunctionName(ne.constructor)==="RegExp")return typeof Q=="function"?(be={validator:ne,message:Q}).type=se||"user defined":Q instanceof Object&&!se?((be=p(Q)?Object.assign({},Q):h(Q)).message||(be.message=be.msg),be.validator=ne,be.type=be.type||"user defined"):(Q==null&&(Q=$.messages.general.default),se||(se="user defined"),be={message:Q,type:se,validator:ne}),this.validators.push(be),this;for(H=0,P=arguments.length;H<P;H++){if(L=arguments[H],!x.isPOJO(L)){var F="Invalid validator. Received ("+g(L)+") "+L+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(F)}this.validate(L.validator,L)}return this},V.prototype.required=function(ne,Q){var se={};if(arguments.length>0&&ne==null)return this.validators=this.validators.filter(function(P){return P.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(g(ne)==="object"&&(Q=(se=ne).message||Q,ne=ne.isRequired),ne===!1)return this.validators=this.validators.filter(function(P){return P.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;var be=this;this.isRequired=!0,this.requiredValidator=function(P){var L=this&&this.$__&&this.$__.cachedRequired;if(L!=null&&!this.$__isSelected(be.path)&&!this[R](be.path))return!0;if(L!=null&&be.path in L){var F=!L[be.path]||be.checkRequired(P,this);return delete L[be.path],F}return typeof ne=="function"&&!ne.apply(this)||be.checkRequired(P,this)},this.originalRequiredValue=ne,typeof ne=="string"&&(Q=ne,ne=void 0);var H=Q||$.messages.general.required;return this.validators.unshift(Object.assign({},se,{validator:this.requiredValidator,message:H,type:"required"})),this},V.prototype.ref=function(ne){return this.options.ref=ne,this},V.prototype.getDefault=function(ne,Q,se){var be;if((be=typeof this.defaultValue=="function"?this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid"?this.defaultValue.call(ne):this.defaultValue.call(ne,ne):this.defaultValue)!=null){if(g(be)!=="object"||this.options&&this.options.shared||(be=h(be)),se&&se.skipCast)return this._applySetters(be,ne);var H=this.applySetters(be,ne,Q,void 0,j);return H&&!Array.isArray(H)&&H.$isSingleNested&&(H.$__parent=ne),H}return be},V.prototype._applySetters=function(ne,Q,se,be,H){var P=ne;if(se)return P;for(var L=this.setters,F=L.length-1;F>=0;F--)P=L[F].call(Q,P,be,this,H);return P},V.prototype._castNullish=function(ne){return ne},V.prototype.applySetters=function(ne,Q,se,be,H){var P=this._applySetters(ne,Q,se,be,H);return P==null?this._castNullish(P):P=this.cast(P,Q,se,be,H)},V.prototype.applyGetters=function(ne,Q){var se=ne,be=this.getters,H=be.length;if(H===0)return se;for(var P=0;P<H;++P)se=be[P].call(Q,se,this);return se},V.prototype.select=function(ne){return this.selected=!!ne,this},V.prototype.doValidate=function(ne,Q,se,be){var H=this,P=!1,L=this.path;if(typeof Q!="function")throw new TypeError("Must pass callback function to doValidate(), got ".concat(g(Q)));var F=this.validators.filter(function(ie){return g(ie)==="object"&&ie!==null}),M=F.length;if(!M)return Q(null);for(var U=function(){if(P)return 0;var ie,$e=F[Z],ce=$e.validator,le=p($e)?Object.assign({},$e):h($e);if(le.path=be&&be.path?be.path:L,le.fullPath=H.$fullPath,le.value=ne,ce instanceof RegExp)return oe(ce.test(ne),le,se),1;if(typeof ce!="function")return 1;if(ne===void 0&&ce!==H.requiredValidator)return oe(!0,le,se),1;try{ie=le.propsParameter?ce.call(se,ne,le):ce.call(se,ne)}catch(ye){ie=!1,le.reason=ye,ye.message&&(le.message=ye.message)}ie!=null&&typeof ie.then=="function"?ie.then(function(ye){oe(ye,le,se)},function(ye){le.reason=ye,le.message=ye.message,oe(ie=!1,le,se)}):oe(ie,le,se)},Z=0,K=F.length;Z<K&&U()!==0;++Z);function oe(ie,$e,ce){if(!P)if(ie===void 0||ie)--M<=0&&_(function(){Q(null)});else{var le=$e.ErrorConstructor||D;(P=new le($e,ce))[A]=!0,_(function(){Q(P)})}}},V.prototype.doValidateSync=function(ne,Q,se){var be=this.path;if(!this.validators.length)return null;var H=this.validators;if(ne===void 0){if(this.validators.length===0||this.validators[0].type!=="required")return null;H=[this.validators[0]]}var P=null,L=0,F=H.length;for(L=0;L<F;++L){var M=H[L];if(M!==null&&g(M)==="object"){var U=M.validator,Z=p(M)?Object.assign({},M):h(M);Z.path=se&&se.path?se.path:be,Z.fullPath=this.$fullPath,Z.value=ne;var K=!1;if(!m(U)){if(U instanceof RegExp)P=z(U.test(ne),Z);else if(typeof U=="function"){try{K=Z.propsParameter?U.call(Q,ne,Z):U.call(Q,ne)}catch(oe){K=!1,Z.reason=oe}if((K==null||typeof K.then!="function")&&(P=z(K,Z)))break}}}}return P},V._isRef=function(ne,Q,se,be){var H=be&&ne.options&&(ne.options.ref||ne.options.refPath);if(!H&&se&&se.$__!=null){var P=se.$__fullPath(ne.path,!0),L=se.ownerDocument();H=P!=null&&L.$populated(P)||se.$populated(ne.path)}return!!H&&(Q==null||!(u.isBuffer(Q)||Q._bsontype==="Binary"||!x.isObject(Q))||be)},V.prototype._castRef=function(ne,Q,se,be){if(ne==null)return ne;if(ne.$__!=null)return ne.$__.wasPopulated=ne.$__.wasPopulated||{value:ne._doc._id},ne;if(u.isBuffer(ne)||!x.isObject(ne)){if(se)return ne;throw new k(this.instance,ne,this.path,null,this)}var H,P,L,F=Q.$__fullPath(this.path,!0),M=Q.ownerDocument().$populated(F,!0),U=ne;if(!(Q.$__.populated&&Q.$__.populated[F]&&Q.$__.populated[F].options&&Q.$__.populated[F].options.options&&Q.$__.populated[F].options.options.lean)){var Z=M?M.options[C]:Q.constructor.db.model(this.options.ref);(U=Z.hydrate(ne,null,be)).$__.wasPopulated={value:U._doc._id,options:(H={},P=C,L=Z,(P=function(K){var oe=function(ie){if(g(ie)!="object"||!ie)return ie;var $e=ie[Symbol.toPrimitive];if($e!==void 0){var ce=$e.call(ie,"string");if(g(ce)!="object")return ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ie)}(K);return g(oe)=="symbol"?oe:oe+""}(P))in H?Object.defineProperty(H,P,{value:L,enumerable:!0,configurable:!0,writable:!0}):H[P]=L,H)}}return U},V.prototype.$conditionalHandlers={$all:function(ne,Q){var se=this;return Array.isArray(ne)?ne.map(function(be){return se.castForQuery(null,be,Q)}):[this.castForQuery(null,ne,Q)]},$eq:W,$in:ee,$ne:W,$nin:ee,$exists:S,$type:E},V.prototype.castForQuery=function(ne,Q,se){var be;if(ne!=null){if(!(be=this.$conditionalHandlers[ne]))throw new Error("Can't use "+ne);return be.call(this,Q,se)}try{return this.applySetters(Q,se)}catch(H){throw H instanceof k&&H.path===this.path&&this.$fullPath!=null&&(H.path=this.$fullPath),H}},V.checkRequired=function(ne){return arguments.length!==0&&(this._checkRequired=ne),this._checkRequired},V.prototype.checkRequired=function(ne){return ne!=null},V.prototype.clone=function(){var ne=Object.assign({},this.options),Q=new this.constructor(this.path,ne,this.instance);return Q.validators=this.validators.slice(),this.requiredValidator!==void 0&&(Q.requiredValidator=this.requiredValidator),this.defaultValue!==void 0&&(Q.defaultValue=this.defaultValue),this.$immutable!==void 0&&this.options.immutable===void 0&&(Q.$immutable=this.$immutable,b(Q)),this._index!==void 0&&(Q._index=this._index),this.selected!==void 0&&(Q.selected=this.selected),this.isRequired!==void 0&&(Q.isRequired=this.isRequired),this.originalRequiredValue!==void 0&&(Q.originalRequiredValue=this.originalRequiredValue),Q.getters=this.getters.slice(),Q.setters=this.setters.slice(),Q},V.prototype.getEmbeddedSchemaType=function(){return this.$embeddedSchemaType},V.prototype._duplicateKeyErrorMessage=null,V.prototype.toJSONSchema=function(){throw new Error("Converting unsupported SchemaType to JSON Schema: "+this.instance)},d.exports=f=V,f.CastError=k,f.ValidatorError=D},6451:(d,f,a)=>{var u=a(8768).isPOJO;d.exports=function g($){for(var v,S,E,h=Object.keys($),b=h.length;b--;)E=$[S=h[b]],u(E)&&($[S]=g(E)),$[S]!==void 0?v=!0:delete $[S];return v?$:void 0}},6467:(d,f,a)=>{var u=a(1679),g=a(1485),$=a(9732).Buffer,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],S=new Array(160);function E(){this.init(),this._w=S,g.call(this,128,112)}function h(C,k,D){return D^C&(k^D)}function b(C,k,D){return C&k|D&(C|k)}function m(C,k){return(C>>>28|k<<4)^(k>>>2|C<<30)^(k>>>7|C<<25)}function p(C,k){return(C>>>14|k<<18)^(C>>>18|k<<14)^(k>>>9|C<<23)}function _(C,k){return(C>>>1|k<<31)^(C>>>8|k<<24)^C>>>7}function y(C,k){return(C>>>1|k<<31)^(C>>>8|k<<24)^(C>>>7|k<<25)}function x(C,k){return(C>>>19|k<<13)^(k>>>29|C<<3)^C>>>6}function A(C,k){return(C>>>19|k<<13)^(k>>>29|C<<3)^(C>>>6|k<<26)}function R(C,k){return C>>>0<k>>>0?1:0}u(E,g),E.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},E.prototype._update=function(C){for(var k=this._w,D=0|this._ah,j=0|this._bh,V=0|this._ch,z=0|this._dh,W=0|this._eh,ee=0|this._fh,ne=0|this._gh,Q=0|this._hh,se=0|this._al,be=0|this._bl,H=0|this._cl,P=0|this._dl,L=0|this._el,F=0|this._fl,M=0|this._gl,U=0|this._hl,Z=0;Z<32;Z+=2)k[Z]=C.readInt32BE(4*Z),k[Z+1]=C.readInt32BE(4*Z+4);for(;Z<160;Z+=2){var K=k[Z-30],oe=k[Z-30+1],ie=_(K,oe),$e=y(oe,K),ce=x(K=k[Z-4],oe=k[Z-4+1]),le=A(oe,K),ye=k[Z-14],_e=k[Z-14+1],q=k[Z-32],re=k[Z-32+1],fe=$e+_e|0,we=ie+ye+R(fe,$e)|0;we=(we=we+ce+R(fe=fe+le|0,le)|0)+q+R(fe=fe+re|0,re)|0,k[Z]=we,k[Z+1]=fe}for(var Re=0;Re<160;Re+=2){we=k[Re],fe=k[Re+1];var ke=b(D,j,V),ue=b(se,be,H),Ee=m(D,se),Ae=m(se,D),Ne=p(W,L),De=p(L,W),he=v[Re],tt=v[Re+1],at=h(W,ee,ne),He=h(L,F,M),ot=U+De|0,Ue=Q+Ne+R(ot,U)|0;Ue=(Ue=(Ue=Ue+at+R(ot=ot+He|0,He)|0)+he+R(ot=ot+tt|0,tt)|0)+we+R(ot=ot+fe|0,fe)|0;var Ze=Ae+ue|0,ae=Ee+ke+R(Ze,Ae)|0;Q=ne,U=M,ne=ee,M=F,ee=W,F=L,W=z+Ue+R(L=P+ot|0,P)|0,z=V,P=H,V=j,H=be,j=D,be=se,D=Ue+ae+R(se=ot+Ze|0,ot)|0}this._al=this._al+se|0,this._bl=this._bl+be|0,this._cl=this._cl+H|0,this._dl=this._dl+P|0,this._el=this._el+L|0,this._fl=this._fl+F|0,this._gl=this._gl+M|0,this._hl=this._hl+U|0,this._ah=this._ah+D+R(this._al,se)|0,this._bh=this._bh+j+R(this._bl,be)|0,this._ch=this._ch+V+R(this._cl,H)|0,this._dh=this._dh+z+R(this._dl,P)|0,this._eh=this._eh+W+R(this._el,L)|0,this._fh=this._fh+ee+R(this._fl,F)|0,this._gh=this._gh+ne+R(this._gl,M)|0,this._hh=this._hh+Q+R(this._hl,U)|0},E.prototype._hash=function(){var C=$.allocUnsafe(64);function k(D,j,V){C.writeInt32BE(D,V),C.writeInt32BE(j,V+4)}return k(this._ah,this._al,0),k(this._bh,this._bl,8),k(this._ch,this._cl,16),k(this._dh,this._dl,24),k(this._eh,this._el,32),k(this._fh,this._fl,40),k(this._gh,this._gl,48),k(this._hh,this._hl,56),C},d.exports=E},6511:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(h,b){(b==null||b>h.length)&&(b=h.length);for(var m=0,p=Array(b);m<b;m++)p[m]=h[m];return p}function $(h,b){var m=Object.keys(h);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(h);b&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(h,_).enumerable})),m.push.apply(m,p)}return m}function v(h){for(var b=1;b<arguments.length;b++){var m=arguments[b]!=null?arguments[b]:{};b%2?$(Object(m),!0).forEach(function(p){S(h,p,m[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(m)):$(Object(m)).forEach(function(p){Object.defineProperty(h,p,Object.getOwnPropertyDescriptor(m,p))})}return h}function S(h,b,m){return(b=function(p){var _=function(y){if(u(y)!="object"||!y)return y;var x=y[Symbol.toPrimitive];if(x!==void 0){var A=x.call(y,"string");if(u(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(p);return u(_)=="symbol"?_:_+""}(b))in h?Object.defineProperty(h,b,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[b]=m,h}a(8768);var E=d.exports=function(){};E.ctor=function(){var h=Array.prototype.slice.call(arguments),b=function(){E.apply(this,arguments),this.paths={},this.states={}};return(b.prototype=new E).constructor=b,b.prototype.stateNames=h,h.forEach(function(m){b.prototype[m]=function(p){this._changeState(p,m)}}),b},E.prototype._changeState=function(h,b){var m=this.paths[h];if(m!==b){var p=this.states[m];p&&delete p[h],this.paths[h]=b,this.states[b]=this.states[b]||{},this.states[b][h]=!0}},E.prototype.clear=function(h){if(this.states[h]!=null)for(var b,m=Object.keys(this.states[h]),p=m.length;p--;)b=m[p],delete this.states[h][b],delete this.paths[b]},E.prototype.clearPath=function(h){var b=this.paths[h];b&&(delete this.paths[h],delete this.states[b][h])},E.prototype.getStatePaths=function(h){return this.states[h]!=null?this.states[h]:{}},E.prototype.some=function(){var h=this,b=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(b,function(m){return h.states[m]!=null&&Object.keys(h.states[m]).length})},E.prototype._iter=function(h){return function(){var b=Array.prototype.slice.call(arguments),m=b.pop();b.length||(b=this.stateNames);var p=this;return b.reduce(function(_,y){return p.states[y]==null?_:_.concat(Object.keys(p.states[y]))},[])[h](function(_,y,x){return m(_,y,x)})}},E.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)},E.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)},E.prototype.clone=function(){var h=new this.constructor;h.paths=v({},this.paths);var b,m=function(_,y){var x=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(!x){if(Array.isArray(_)||(x=function(j,V){if(j){if(typeof j=="string")return g(j,V);var z={}.toString.call(j).slice(8,-1);return z==="Object"&&j.constructor&&(z=j.constructor.name),z==="Map"||z==="Set"?Array.from(j):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?g(j,V):void 0}}(_))||y){x&&(_=x);var A=0,R=function(){};return{s:R,n:function(){return A>=_.length?{done:!0}:{done:!1,value:_[A++]}},e:function(j){throw j},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C,k=!0,D=!1;return{s:function(){x=x.call(_)},n:function(){var j=x.next();return k=j.done,j},e:function(j){D=!0,C=j},f:function(){try{k||x.return==null||x.return()}finally{if(D)throw C}}}}(this.stateNames);try{for(m.s();!(b=m.n()).done;){var p=b.value;p in this.states&&(h.states[p]=this.states[p]==null?this.states[p]:v({},this.states[p]))}}catch(_){m.e(_)}finally{m.f()}return h}},6544:(d,f,a)=>{function u(x){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},u(x)}var g;if(!Object.keys){var $=Object.prototype.hasOwnProperty,v=Object.prototype.toString,S=a(6312),E=Object.prototype.propertyIsEnumerable,h=!E.call({toString:null},"toString"),b=E.call(function(){},"prototype"),m=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(x){var A=x.constructor;return A&&A.prototype===x},_={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},y=function(){if(typeof window>"u")return!1;for(var x in window)try{if(!_["$"+x]&&$.call(window,x)&&window[x]!==null&&u(window[x])==="object")try{p(window[x])}catch{return!0}}catch{return!0}return!1}();g=function(x){var A=x!==null&&u(x)==="object",R=v.call(x)==="[object Function]",C=S(x),k=A&&v.call(x)==="[object String]",D=[];if(!A&&!R&&!C)throw new TypeError("Object.keys called on a non-object");var j=b&&R;if(k&&x.length>0&&!$.call(x,0))for(var V=0;V<x.length;++V)D.push(String(V));if(C&&x.length>0)for(var z=0;z<x.length;++z)D.push(String(z));else for(var W in x)j&&W==="prototype"||!$.call(x,W)||D.push(String(W));if(h)for(var ee=function(Q){if(typeof window>"u"||!y)return p(Q);try{return p(Q)}catch{return!1}}(x),ne=0;ne<m.length;++ne)ee&&m[ne]==="constructor"||!$.call(x,m[ne])||D.push(m[ne]);return D}}d.exports=g},6547:(d,f,a)=>{function u(p,_){var y=Object.keys(p);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(p);_&&(x=x.filter(function(A){return Object.getOwnPropertyDescriptor(p,A).enumerable})),y.push.apply(y,x)}return y}function g(p,_,y){return(_=function(x){var A=function(R){if($(R)!="object"||!R)return R;var C=R[Symbol.toPrimitive];if(C!==void 0){var k=C.call(R,"string");if($(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(R)}(x);return $(A)=="symbol"?A:A+""}(_))in p?Object.defineProperty(p,_,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[_]=y,p}function $(p){return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},$(p)}var v=a(3550).EventEmitter,S=a(9380),E=a(8768),h=a(7930).documentArrayParent;function b(p,_,y,x,A){var R;E.isMongooseDocumentArray(_)?(this.__parentArray=_,this[h]=_.$parent()):(this.__parentArray=void 0,this[h]=void 0),this.$setIndex(A),this.$__parent=this[h],$(y)==="object"&&y!=null?(R=function(C){for(var k=1;k<arguments.length;k++){var D=arguments[k]!=null?arguments[k]:{};k%2?u(Object(D),!0).forEach(function(j){g(C,j,D[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(D)):u(Object(D)).forEach(function(j){Object.defineProperty(C,j,Object.getOwnPropertyDescriptor(D,j))})}return C}({isNew:!0},y),y=void 0):R={isNew:!0},S.call(this,p,x,this[h],y,R)}for(var m in b.prototype=Object.create(S.prototype),b.prototype.constructor=b,Object.defineProperty(b.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1}),Object.defineProperty(b.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0}),v.prototype)b[m]=v.prototype[m];b.prototype.$setIndex=function(p){if(this.__index=p,this.$__!=null&&this.$__.validationError!=null)for(var _=0,y=Object.keys(this.$__.validationError.errors);_<y.length;_++){var x=y[_];this.invalidate(x,this.$__.validationError.errors[x])}},b.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')},b.prototype.$__removeFromParent=function(){var p=this._doc._id;if(!p)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:p})},b.prototype.$__fullPath=function(p,_){return this.__index==null?null:(this.$__.fullPath||this.ownerDocument(),_?p?this.$__.fullPath+"."+p:this.$__.fullPath:p?this.$__.fullPath+"."+this.__index+"."+p:this.$__.fullPath+"."+this.__index)},b.prototype.$__pathRelativeToParent=function(p,_){return this.__index!=null&&this.__parentArray&&this.__parentArray.$path?_?p==null?this.__parentArray.$path():this.__parentArray.$path()+"."+p:p==null?this.__parentArray.$path()+"."+this.__index:this.__parentArray.$path()+"."+this.__index+"."+p:null},b.prototype.$parent=function(){return this[h]},b.prototype.parentArray=function(){return this.__parentArray},d.exports=b},6555:(d,f,a)=>{var u=a(1679);function g(v){this._reporterState={obj:null,path:[],options:v||{},errors:[]}}function $(v,S){this.path=v,this.rethrow(S)}f.a=g,g.prototype.isError=function(v){return v instanceof $},g.prototype.save=function(){var v=this._reporterState;return{obj:v.obj,pathLen:v.path.length}},g.prototype.restore=function(v){var S=this._reporterState;S.obj=v.obj,S.path=S.path.slice(0,v.pathLen)},g.prototype.enterKey=function(v){return this._reporterState.path.push(v)},g.prototype.exitKey=function(v){var S=this._reporterState;S.path=S.path.slice(0,v-1)},g.prototype.leaveKey=function(v,S,E){var h=this._reporterState;this.exitKey(v),h.obj!==null&&(h.obj[S]=E)},g.prototype.path=function(){return this._reporterState.path.join("/")},g.prototype.enterObject=function(){var v=this._reporterState,S=v.obj;return v.obj={},S},g.prototype.leaveObject=function(v){var S=this._reporterState,E=S.obj;return S.obj=v,E},g.prototype.error=function(v){var S,E=this._reporterState,h=v instanceof $;if(S=h?v:new $(E.path.map(function(b){return"["+JSON.stringify(b)+"]"}).join(""),v.message||v,v.stack),!E.options.partial)throw S;return h||E.errors.push(S),S},g.prototype.wrapResult=function(v){var S=this._reporterState;return S.options.partial?{result:this.isError(v)?null:v,errors:S.errors}:v},u($,Error),$.prototype.rethrow=function(v){if(this.message=v+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,$),!this.stack)try{throw new Error(this.message)}catch(S){this.stack=S.stack}return this}},6567:(d,f,a)=>{var u=a(8317).Buffer,g=a(5340);d.exports=function(){function $(){(function(v,S){if(!(v instanceof S))throw new TypeError("Cannot call a class as a function")})(this,$),this.head=null,this.tail=null,this.length=0}return $.prototype.push=function(v){var S={data:v,next:null};this.length>0?this.tail.next=S:this.head=S,this.tail=S,++this.length},$.prototype.unshift=function(v){var S={data:v,next:this.head};this.length===0&&(this.tail=S),this.head=S,++this.length},$.prototype.shift=function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}},$.prototype.clear=function(){this.head=this.tail=null,this.length=0},$.prototype.join=function(v){if(this.length===0)return"";for(var S=this.head,E=""+S.data;S=S.next;)E+=v+S.data;return E},$.prototype.concat=function(v){if(this.length===0)return u.alloc(0);for(var S,E,h=u.allocUnsafe(v>>>0),b=this.head,m=0;b;)S=h,E=m,b.data.copy(S,E),m+=b.data.length,b=b.next;return h},$}(),g&&g.inspect&&g.inspect.custom&&(d.exports.prototype[g.inspect.custom]=function(){var $=g.inspect({length:this.length});return this.constructor.name+" "+$})},6583:(d,f,a)=>{var u=a(1679),g=a(9732).Buffer,$=a(2533),v=g.alloc(128),S=64;function E(h,b){$.call(this,"digest"),typeof b=="string"&&(b=g.from(b)),this._alg=h,this._key=b,b.length>S?b=h(b):b.length<S&&(b=g.concat([b,v],S));for(var m=this._ipad=g.allocUnsafe(S),p=this._opad=g.allocUnsafe(S),_=0;_<S;_++)m[_]=54^b[_],p[_]=92^b[_];this._hash=[m]}u(E,$),E.prototype._update=function(h){this._hash.push(h)},E.prototype._final=function(){var h=this._alg(g.concat(this._hash));return this._alg(g.concat([this._opad,h]))},d.exports=E},6620:(d,f,a)=>{var u=a(9732).Buffer,g=a(2046),$=a(1095),v=a(7312).ec,S=a(7799),E=a(5053),h=a(4589);function b(y,x,A,R){if((y=u.from(y.toArray())).length<x.byteLength()){var C=u.alloc(x.byteLength()-y.length);y=u.concat([C,y])}var k=A.length,D=function(z,W){z=(z=m(z,W)).mod(W);var ee=u.from(z.toArray());if(ee.length<W.byteLength()){var ne=u.alloc(W.byteLength()-ee.length);ee=u.concat([ne,ee])}return ee}(A,x),j=u.alloc(k);j.fill(1);var V=u.alloc(k);return V=g(R,V).update(j).update(u.from([0])).update(y).update(D).digest(),j=g(R,V).update(j).digest(),{k:V=g(R,V).update(j).update(u.from([1])).update(y).update(D).digest(),v:j=g(R,V).update(j).digest()}}function m(y,x){var A=new S(y),R=(y.length<<3)-x.bitLength();return R>0&&A.ishrn(R),A}function p(y,x,A){var R,C;do{for(R=u.alloc(0);8*R.length<y.bitLength();)x.v=g(A,x.k).update(x.v).digest(),R=u.concat([R,x.v]);C=m(R,y),x.k=g(A,x.k).update(x.v).update(u.from([0])).digest(),x.v=g(A,x.k).update(x.v).digest()}while(C.cmp(y)!==-1);return C}function _(y,x,A,R){return y.toRed(S.mont(A)).redPow(x).fromRed().mod(R)}d.exports=function(y,x,A,R,C){var k=E(x);if(k.curve){if(R!=="ecdsa"&&R!=="ecdsa/rsa")throw new Error("wrong private key type");return function(z,W){var ee=h[W.curve.join(".")];if(!ee)throw new Error("unknown curve "+W.curve.join("."));var ne=new v(ee).keyFromPrivate(W.privateKey).sign(z);return u.from(ne.toDER())}(y,k)}if(k.type==="dsa"){if(R!=="dsa")throw new Error("wrong private key type");return function(z,W,ee){for(var ne,Q=W.params.priv_key,se=W.params.p,be=W.params.q,H=W.params.g,P=new S(0),L=m(z,be).mod(be),F=!1,M=b(Q,be,z,ee);F===!1;)P=_(H,ne=p(be,M,ee),se,be),(F=ne.invm(be).imul(L.add(Q.mul(P))).mod(be)).cmpn(0)===0&&(F=!1,P=new S(0));return function(U,Z){U=U.toArray(),Z=Z.toArray(),128&U[0]&&(U=[0].concat(U)),128&Z[0]&&(Z=[0].concat(Z));var K=[48,U.length+Z.length+4,2,U.length];return K=K.concat(U,[2,Z.length],Z),u.from(K)}(P,F)}(y,k,A)}if(R!=="rsa"&&R!=="ecdsa/rsa")throw new Error("wrong private key type");if(x.padding!==void 0&&x.padding!==1)throw new Error("illegal or unsupported padding mode");y=u.concat([C,y]);for(var D=k.modulus.byteLength(),j=[0,1];y.length+j.length+1<D;)j.push(255);j.push(0);for(var V=-1;++V<y.length;)j.push(y[V]);return $(j,k)},d.exports.getKey=b,d.exports.makeKey=p},6661:(d,f,a)=>{var u=a(9732).Buffer;d.exports=function(g,$,v){if(u.isBuffer(g))return g;if(typeof g=="string")return u.from(g,$);if(ArrayBuffer.isView(g))return u.from(g.buffer);throw new TypeError(v+" must be a string, a Buffer, a typed array or a DataView")}},6665:d=>{d.exports=function(f,a){for(var u,g,$,v=a.split("."),S="",E=0;E<v.length;++E)if(f[S+=S.length?".":""+v[E]]){for($=(g=Object.keys(f)).length,u=0;u<$;++u)g[E].indexOf(S+".")!==0||g[E].indexOf(a);return!0}return!1}},6706:(d,f)=>{var a=f;function u($){return $.length===1?"0"+$:$}function g($){for(var v="",S=0;S<$.length;S++)v+=u($[S].toString(16));return v}a.toArray=function($,v){if(Array.isArray($))return $.slice();if(!$)return[];var S=[];if(typeof $!="string"){for(var E=0;E<$.length;E++)S[E]=0|$[E];return S}if(v==="hex")for(($=$.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&($="0"+$),E=0;E<$.length;E+=2)S.push(parseInt($[E]+$[E+1],16));else for(E=0;E<$.length;E++){var h=$.charCodeAt(E),b=h>>8,m=255&h;b?S.push(b,m):S.push(m)}return S},a.zero2=u,a.toHex=g,a.encode=function($,v){return v==="hex"?g($):$}},6730:d=>{var f=Object.prototype.toString,a=Math.max,u=function(g,$){for(var v=[],S=0;S<g.length;S+=1)v[S]=g[S];for(var E=0;E<$.length;E+=1)v[E+g.length]=$[E];return v};d.exports=function(g){var $=this;if(typeof $!="function"||f.apply($)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+$);for(var v,S=function(p){for(var _=[],y=1,x=0;y<p.length;y+=1,x+=1)_[x]=p[y];return _}(arguments),E=a(0,$.length-S.length),h=[],b=0;b<E;b++)h[b]="$"+b;if(v=Function("binder","return function ("+function(p){for(var _="",y=0;y<p.length;y+=1)_+=p[y],y+1<p.length&&(_+=",");return _}(h)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof v){var p=$.apply(this,u(S,arguments));return Object(p)===p?p:this}return $.apply(g,u(S,arguments))}),$.prototype){var m=function(){};m.prototype=$.prototype,v.prototype=new m,m.prototype=null}return v}},6749:(d,f,a)=>{var u=a(4685),g=a(7695),$=a(3528),v=u.rotr64_hi,S=u.rotr64_lo,E=u.shr64_hi,h=u.shr64_lo,b=u.sum64,m=u.sum64_hi,p=u.sum64_lo,_=u.sum64_4_hi,y=u.sum64_4_lo,x=u.sum64_5_hi,A=u.sum64_5_lo,R=g.BlockHash,C=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function k(){if(!(this instanceof k))return new k;R.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=C,this.W=new Array(160)}function D(H,P,L,F,M){var U=H&L^~H&M;return U<0&&(U+=4294967296),U}function j(H,P,L,F,M,U){var Z=P&F^~P&U;return Z<0&&(Z+=4294967296),Z}function V(H,P,L,F,M){var U=H&L^H&M^L&M;return U<0&&(U+=4294967296),U}function z(H,P,L,F,M,U){var Z=P&F^P&U^F&U;return Z<0&&(Z+=4294967296),Z}function W(H,P){var L=v(H,P,28)^v(P,H,2)^v(P,H,7);return L<0&&(L+=4294967296),L}function ee(H,P){var L=S(H,P,28)^S(P,H,2)^S(P,H,7);return L<0&&(L+=4294967296),L}function ne(H,P){var L=S(H,P,14)^S(H,P,18)^S(P,H,9);return L<0&&(L+=4294967296),L}function Q(H,P){var L=v(H,P,1)^v(H,P,8)^E(H,P,7);return L<0&&(L+=4294967296),L}function se(H,P){var L=S(H,P,1)^S(H,P,8)^h(H,P,7);return L<0&&(L+=4294967296),L}function be(H,P){var L=S(H,P,19)^S(P,H,29)^h(H,P,6);return L<0&&(L+=4294967296),L}u.inherits(k,R),d.exports=k,k.blockSize=1024,k.outSize=512,k.hmacStrength=192,k.padLength=128,k.prototype._prepareBlock=function(H,P){for(var L=this.W,F=0;F<32;F++)L[F]=H[P+F];for(;F<L.length;F+=2){var M=(le=L[F-4],ye=L[F-3],_e=void 0,(_e=v(le,ye,19)^v(ye,le,29)^E(le,ye,6))<0&&(_e+=4294967296),_e),U=be(L[F-4],L[F-3]),Z=L[F-14],K=L[F-13],oe=Q(L[F-30],L[F-29]),ie=se(L[F-30],L[F-29]),$e=L[F-32],ce=L[F-31];L[F]=_(M,U,Z,K,oe,ie,$e,ce),L[F+1]=y(M,U,Z,K,oe,ie,$e,ce)}var le,ye,_e},k.prototype._update=function(H,P){this._prepareBlock(H,P);var L,F,M,U=this.W,Z=this.h[0],K=this.h[1],oe=this.h[2],ie=this.h[3],$e=this.h[4],ce=this.h[5],le=this.h[6],ye=this.h[7],_e=this.h[8],q=this.h[9],re=this.h[10],fe=this.h[11],we=this.h[12],Re=this.h[13],ke=this.h[14],ue=this.h[15];$(this.k.length===U.length);for(var Ee=0;Ee<U.length;Ee+=2){var Ae=ke,Ne=ue,De=(M=void 0,(M=v(L=_e,F=q,14)^v(L,F,18)^v(F,L,9))<0&&(M+=4294967296),M),he=ne(_e,q),tt=D(_e,0,re,0,we),at=j(0,q,0,fe,0,Re),He=this.k[Ee],ot=this.k[Ee+1],Ue=U[Ee],Ze=U[Ee+1],ae=x(Ae,Ne,De,he,tt,at,He,ot,Ue,Ze),Oe=A(Ae,Ne,De,he,tt,at,He,ot,Ue,Ze);Ae=W(Z,K),Ne=ee(Z,K),De=V(Z,0,oe,0,$e),he=z(0,K,0,ie,0,ce);var Le=m(Ae,Ne,De,he),Pe=p(Ae,Ne,De,he);ke=we,ue=Re,we=re,Re=fe,re=_e,fe=q,_e=m(le,ye,ae,Oe),q=p(ye,ye,ae,Oe),le=$e,ye=ce,$e=oe,ce=ie,oe=Z,ie=K,Z=m(ae,Oe,Le,Pe),K=p(ae,Oe,Le,Pe)}b(this.h,0,Z,K),b(this.h,2,oe,ie),b(this.h,4,$e,ce),b(this.h,6,le,ye),b(this.h,8,_e,q),b(this.h,10,re,fe),b(this.h,12,we,Re),b(this.h,14,ke,ue)},k.prototype._digest=function(H){return H==="hex"?u.toHex32(this.h,"big"):u.split32(this.h,"big")}},6750:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}var g=a(988),$=a(2288),v=a(2268),S=a(1464);d.exports=function(E,h,b){if(!E||u(E)!=="object"&&typeof E!="function")throw new v("`obj` must be an object or a function`");if(typeof h!="string"&&u(h)!=="symbol")throw new v("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new v("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new v("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new v("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new v("`loose`, if provided, must be a boolean");var m=arguments.length>3?arguments[3]:null,p=arguments.length>4?arguments[4]:null,_=arguments.length>5?arguments[5]:null,y=arguments.length>6&&arguments[6],x=!!S&&S(E,h);if(g)g(E,h,{configurable:_===null&&x?x.configurable:!_,enumerable:m===null&&x?x.enumerable:!m,value:b,writable:p===null&&x?x.writable:!p});else{if(!y&&(m||p||_))throw new $("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");E[h]=b}}},6754:(d,f,a)=>{var u=a(3528),g=a(1679),$={};function v(S){u.equal(S.length,8,"Invalid IV length"),this.iv=new Array(8);for(var E=0;E<this.iv.length;E++)this.iv[E]=S[E]}f.instantiate=function(S){function E(p){S.call(this,p),this._cbcInit()}g(E,S);for(var h=Object.keys($),b=0;b<h.length;b++){var m=h[b];E.prototype[m]=$[m]}return E.create=function(p){return new E(p)},E},$._cbcInit=function(){var S=new v(this.options.iv);this._cbcState=S},$._update=function(S,E,h,b){var m=this._cbcState,p=this.constructor.super_.prototype,_=m.iv;if(this.type==="encrypt"){for(var y=0;y<this.blockSize;y++)_[y]^=S[E+y];for(p._update.call(this,_,0,h,b),y=0;y<this.blockSize;y++)_[y]=h[b+y]}else{for(p._update.call(this,S,E,h,b),y=0;y<this.blockSize;y++)h[b+y]^=_[y];for(y=0;y<this.blockSize;y++)_[y]=S[E+y]}}},6775:(d,f)=>{f.byteLength=function(h){var b=S(h),m=b[0],p=b[1];return 3*(m+p)/4-p},f.toByteArray=function(h){var b,m,p=S(h),_=p[0],y=p[1],x=new g(function(C,k,D){return 3*(k+D)/4-D}(0,_,y)),A=0,R=y>0?_-4:_;for(m=0;m<R;m+=4)b=u[h.charCodeAt(m)]<<18|u[h.charCodeAt(m+1)]<<12|u[h.charCodeAt(m+2)]<<6|u[h.charCodeAt(m+3)],x[A++]=b>>16&255,x[A++]=b>>8&255,x[A++]=255&b;return y===2&&(b=u[h.charCodeAt(m)]<<2|u[h.charCodeAt(m+1)]>>4,x[A++]=255&b),y===1&&(b=u[h.charCodeAt(m)]<<10|u[h.charCodeAt(m+1)]<<4|u[h.charCodeAt(m+2)]>>2,x[A++]=b>>8&255,x[A++]=255&b),x},f.fromByteArray=function(h){for(var b,m=h.length,p=m%3,_=[],y=16383,x=0,A=m-p;x<A;x+=y)_.push(E(h,x,x+y>A?A:x+y));return p===1?(b=h[m-1],_.push(a[b>>2]+a[b<<4&63]+"==")):p===2&&(b=(h[m-2]<<8)+h[m-1],_.push(a[b>>10]+a[b>>4&63]+a[b<<2&63]+"=")),_.join("")};for(var a=[],u=[],g=typeof Uint8Array<"u"?Uint8Array:Array,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0;v<64;++v)a[v]=$[v],u[$.charCodeAt(v)]=v;function S(h){var b=h.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=h.indexOf("=");return m===-1&&(m=b),[m,m===b?0:4-m%4]}function E(h,b,m){for(var p,_,y=[],x=b;x<m;x+=3)p=(h[x]<<16&16711680)+(h[x+1]<<8&65280)+(255&h[x+2]),y.push(a[(_=p)>>18&63]+a[_>>12&63]+a[_>>6&63]+a[63&_]);return y.join("")}u[45]=62,u[95]=63},6801:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m,p){var _;return function(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}(this,h),(_=function(y,x,A){return x=$(x),function(R,C){if(C&&(u(C)=="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}(R)}(y,g()?Reflect.construct(x,A||[],$(y).constructor):x.apply(y,A))}(this,h,[p=p||"Cannot populate path `"+m+"` because it is not in your schema. Set the `strictPopulate` option to false to override."])).path=m,_}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"StrictPopulateError"}),d.exports=S},6811:(d,f,a)=>{function u(p){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(p)}function g(p,_){var y=Object.keys(p);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(p);_&&(x=x.filter(function(A){return Object.getOwnPropertyDescriptor(p,A).enumerable})),y.push.apply(y,x)}return y}function $(p){for(var _=1;_<arguments.length;_++){var y=arguments[_]!=null?arguments[_]:{};_%2?g(Object(y),!0).forEach(function(x){v(p,x,y[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):g(Object(y)).forEach(function(x){Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(y,x))})}return p}function v(p,_,y){return(_=E(_))in p?Object.defineProperty(p,_,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[_]=y,p}function S(p,_){for(var y=0;y<_.length;y++){var x=_[y];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(p,E(x.key),x)}}function E(p){var _=function(y){if(u(y)!=="object"||y===null)return y;var x=y[Symbol.toPrimitive];if(x!==void 0){var A=x.call(y,"string");if(u(A)!=="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(p);return u(_)==="symbol"?_:String(_)}var h=a(5832).Buffer,b=a(3779).inspect,m=b&&b.custom||"inspect";d.exports=function(){function p(){(function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")})(this,p),this.head=null,this.tail=null,this.length=0}var _,y;return _=p,(y=[{key:"push",value:function(x){var A={data:x,next:null};this.length>0?this.tail.next=A:this.head=A,this.tail=A,++this.length}},{key:"unshift",value:function(x){var A={data:x,next:this.head};this.length===0&&(this.tail=A),this.head=A,++this.length}},{key:"shift",value:function(){if(this.length!==0){var x=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,x}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(x){if(this.length===0)return"";for(var A=this.head,R=""+A.data;A=A.next;)R+=x+A.data;return R}},{key:"concat",value:function(x){if(this.length===0)return h.alloc(0);for(var A,R,C,k=h.allocUnsafe(x>>>0),D=this.head,j=0;D;)A=D.data,R=k,C=j,h.prototype.copy.call(A,R,C),j+=D.data.length,D=D.next;return k}},{key:"consume",value:function(x,A){var R;return x<this.head.data.length?(R=this.head.data.slice(0,x),this.head.data=this.head.data.slice(x)):R=x===this.head.data.length?this.shift():A?this._getString(x):this._getBuffer(x),R}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(x){var A=this.head,R=1,C=A.data;for(x-=C.length;A=A.next;){var k=A.data,D=x>k.length?k.length:x;if(D===k.length?C+=k:C+=k.slice(0,x),(x-=D)==0){D===k.length?(++R,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=k.slice(D));break}++R}return this.length-=R,C}},{key:"_getBuffer",value:function(x){var A=h.allocUnsafe(x),R=this.head,C=1;for(R.data.copy(A),x-=R.data.length;R=R.next;){var k=R.data,D=x>k.length?k.length:x;if(k.copy(A,A.length-x,0,D),(x-=D)==0){D===k.length?(++C,R.next?this.head=R.next:this.head=this.tail=null):(this.head=R,R.data=k.slice(D));break}++C}return this.length-=C,A}},{key:m,value:function(x,A){return b(this,$($({},A),{},{depth:0,customInspect:!1}))}}])&&S(_.prototype,y),Object.defineProperty(_,"prototype",{writable:!1}),p}()},6814:d=>{d.exports=function(f){for(var a={},u=0,g=Object.keys(f);u<g.length;u++){var $=g[u];if($.indexOf(".")!==-1)for(var v=$.split("."),S=v[0],E=0;E<v.length;++E)a[S]=1,E+1<v.length&&(S=S+"."+v[E+1]);else a[$]=1}return a}},6867:(d,f,a)=>{function u(A){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},u(A)}function g(A,R){(R==null||R>A.length)&&(R=A.length);for(var C=0,k=Array(R);C<R;C++)k[C]=A[C];return k}function $(A,R){for(var C=0;C<R.length;C++){var k=R[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,v(k.key),k)}}function v(A){var R=function(C){if(u(C)!="object"||!C)return C;var k=C[Symbol.toPrimitive];if(k!==void 0){var D=k.call(C,"string");if(u(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(C)}(A);return u(R)=="symbol"?R:R+""}function S(){try{var A=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S=function(){return!!A})()}function E(){return E=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(A,R,C){var k=function(j,V){for(;!{}.hasOwnProperty.call(j,V)&&(j=h(j))!==null;);return j}(A,R);if(k){var D=Object.getOwnPropertyDescriptor(k,R);return D.get?D.get.call(arguments.length<3?A:C):D.value}},E.apply(null,arguments)}function h(A){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(R){return R.__proto__||Object.getPrototypeOf(R)},h(A)}function b(A,R){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,k){return C.__proto__=k,C},b(A,R)}var m=a(2081),p=a(241),_=a(6426),y=a(4327),x=function(A){function R(D,j){var V;return function(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")}(this,R),(V=function(z,W,ee){return W=h(W),function(ne,Q){if(Q&&(u(Q)=="object"||typeof Q=="function"))return Q;if(Q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}(ne)}(z,S()?Reflect.construct(W,ee||[],h(z).constructor):W.apply(z,ee))}(this,R,[D,j,"Map"])).$isSchemaMap=!0,V}return function(D,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(j&&j.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),j&&b(D,j)}(R,A),C=R,k=[{key:"set",value:function(D,j){return _.set(D,j)}},{key:"cast",value:function(D,j,V){if(D instanceof m)return D;var z=this.path;if(V){var W=new m({},z,j,this.$__schemaType);if(D instanceof a.g.Map){var ee,ne=function(F,M){var U=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!U){if(Array.isArray(F)||(U=function(ce,le){if(ce){if(typeof ce=="string")return g(ce,le);var ye={}.toString.call(ce).slice(8,-1);return ye==="Object"&&ce.constructor&&(ye=ce.constructor.name),ye==="Map"||ye==="Set"?Array.from(ce):ye==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ye)?g(ce,le):void 0}}(F))||M){U&&(F=U);var Z=0,K=function(){};return{s:K,n:function(){return Z>=F.length?{done:!0}:{done:!1,value:F[Z++]}},e:function(ce){throw ce},f:K}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oe,ie=!0,$e=!1;return{s:function(){U=U.call(F)},n:function(){var ce=U.next();return ie=ce.done,ce},e:function(ce){$e=!0,oe=ce},f:function(){try{ie||U.return==null||U.return()}finally{if($e)throw oe}}}}(D.keys());try{for(ne.s();!(ee=ne.n()).done;){var Q=ee.value,se=D.get(Q);se=se==null?W.$__schemaType._castNullish(se):W.$__schemaType.cast(se,j,!0,null,{path:z+"."+Q}),W.$init(Q,se)}}catch(F){ne.e(F)}finally{ne.f()}}else for(var be=0,H=Object.keys(D);be<H.length;be++){var P=H[be],L=D[P];L=L==null?W.$__schemaType._castNullish(L):W.$__schemaType.cast(L,j,!0,null,{path:z+"."+P}),W.$init(P,L)}return W}return new m(D,z,j,this.$__schemaType)}},{key:"clone",value:function(){var D,j,V,z=(D=R,j=this,typeof(V=E(h(D.prototype),"clone",j))=="function"?function(W){return V.apply(j,W)}:V)([]);return this.$__schemaType!=null&&(z.$__schemaType=this.$__schemaType.clone()),z}},{key:"getEmbeddedSchemaType",value:function(){return this.$__schemaType}},{key:"toJSONSchema",value:function(D){var j=D==null?void 0:D.useBsonType,V=this.getEmbeddedSchemaType(),z=this.options.required&&typeof this.options.required!="function",W=y("object","object",j,z);return W.additionalProperties=V.toJSONSchema(D),W}}],k&&$(C.prototype,k),Object.defineProperty(C,"prototype",{writable:!1}),C;var C,k}(_);x.schemaName="Map",x.prototype.OptionsConstructor=p,x.defaultOptions={},d.exports=x},6871:(d,f,a)=>{d.exports=a(3550).EventEmitter},6876:(d,f,a)=>{var u=a(5832).Buffer;d.exports=function(g,$){for(var v=Math.min(g.length,$.length),S=new u(v),E=0;E<v;++E)S[E]=g[E]^$[E];return S}},6934:(d,f,a)=>{var u=a(2859),g=a(6706),$=a(3528);function v(S){if(!(this instanceof v))return new v(S);this.hash=S.hash,this.predResist=!!S.predResist,this.outLen=this.hash.outSize,this.minEntropy=S.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var E=g.toArray(S.entropy,S.entropyEnc||"hex"),h=g.toArray(S.nonce,S.nonceEnc||"hex"),b=g.toArray(S.pers,S.persEnc||"hex");$(E.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(E,h,b)}d.exports=v,v.prototype._init=function(S,E,h){var b=S.concat(E).concat(h);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var m=0;m<this.V.length;m++)this.K[m]=0,this.V[m]=1;this._update(b),this._reseed=1,this.reseedInterval=281474976710656},v.prototype._hmac=function(){return new u.hmac(this.hash,this.K)},v.prototype._update=function(S){var E=this._hmac().update(this.V).update([0]);S&&(E=E.update(S)),this.K=E.digest(),this.V=this._hmac().update(this.V).digest(),S&&(this.K=this._hmac().update(this.V).update([1]).update(S).digest(),this.V=this._hmac().update(this.V).digest())},v.prototype.reseed=function(S,E,h,b){typeof E!="string"&&(b=h,h=E,E=null),S=g.toArray(S,E),h=g.toArray(h,b),$(S.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(S.concat(h||[])),this._reseed=1},v.prototype.generate=function(S,E,h,b){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof E!="string"&&(b=h,h=E,E=null),h&&(h=g.toArray(h,b||"hex"),this._update(h));for(var m=[];m.length<S;)this.V=this._hmac().update(this.V).digest(),m=m.concat(this.V);var p=m.slice(0,S);return this._update(h),this._reseed++,g.encode(p,E)}},6936:(d,f,a)=>{var u=a(9732).Buffer,g=a(7775).Transform;function $(E){g.call(this),this._block=u.allocUnsafe(E),this._blockSize=E,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}a(1679)($,g),$.prototype._transform=function(E,h,b){var m=null;try{this.update(E,h)}catch(p){m=p}b(m)},$.prototype._flush=function(E){var h=null;try{this.push(this.digest())}catch(b){h=b}E(h)};var v=typeof Uint8Array<"u",S=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(u.prototype instanceof Uint8Array||u.TYPED_ARRAY_SUPPORT);$.prototype.update=function(E,h){if(this._finalized)throw new Error("Digest already called");E=function(x,A){if(x instanceof u)return x;if(typeof x=="string")return u.from(x,A);if(S&&ArrayBuffer.isView(x)){if(x.byteLength===0)return u.alloc(0);var R=u.from(x.buffer,x.byteOffset,x.byteLength);if(R.byteLength===x.byteLength)return R}if(v&&x instanceof Uint8Array||u.isBuffer(x)&&x.constructor&&typeof x.constructor.isBuffer=="function"&&x.constructor.isBuffer(x))return u.from(x);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(E,h);for(var b=this._block,m=0;this._blockOffset+E.length-m>=this._blockSize;){for(var p=this._blockOffset;p<this._blockSize;)b[p++]=E[m++];this._update(),this._blockOffset=0}for(;m<E.length;)b[this._blockOffset++]=E[m++];for(var _=0,y=8*E.length;y>0;++_)this._length[_]+=y,(y=this._length[_]/4294967296|0)>0&&(this._length[_]-=4294967296*y);return this},$.prototype._update=function(){throw new Error("_update is not implemented")},$.prototype.digest=function(E){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var h=this._digest();E!==void 0&&(h=h.toString(E)),this._block.fill(0),this._blockOffset=0;for(var b=0;b<4;++b)this._length[b]=0;return h},$.prototype._digest=function(){throw new Error("_digest is not implemented")},d.exports=$},6948:(d,f,a)=>{function u(S){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},u(S)}function g(S,E,h){return Object.defineProperty(S,"prototype",{writable:!1}),S}var $=a(4450),v=g(function S(E){if(function(h,b){if(!(h instanceof b))throw new TypeError("Cannot call a class as a function")}(this,S),this._docs={},this._childDocs=[],E!=null&&(E=$(E),Object.assign(this,E),u(E.subPopulate)==="object"&&(this.populate=E.subPopulate),E.perDocumentLimit!=null&&E.limit!=null))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+E.path+"`.")});d.exports=v},6949:(d,f,a)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(y)}function g(y,x){for(var A=0;A<x.length;A++){var R=x[A];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(y,$(R.key),R)}}function $(y){var x=function(A){if(u(A)!="object"||!A)return A;var R=A[Symbol.toPrimitive];if(R!==void 0){var C=R.call(A,"string");if(u(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}(y);return u(x)=="symbol"?x:x+""}function v(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v=function(){return!!y})()}function S(y){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(x){return x.__proto__||Object.getPrototypeOf(x)},S(y)}function E(y,x){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,R){return A.__proto__=R,A},E(y,x)}var h=a(8213),b=a(5879),m=a(7352),p=a(1875),_=function(y){function x(C){var k,D;return function(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")}(this,x),(k=function(j,V,z){return V=S(V),function(W,ee){if(ee&&(u(ee)=="object"||typeof ee=="function"))return ee;if(ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}(W)}(j,v()?Reflect.construct(V,z||[],S(j).constructor):V.apply(j,z))}(this,x,[D=b(C)==="model"?C.constructor.modelName+" validation failed":"Validation failed"])).errors={},k._message=D,C&&(C.$errors=k.errors),k}return function(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),k&&E(C,k)}(x,y),A=x,(R=[{key:"toString",value:function(){return this.name+": "+p(this)}},{key:"inspect",value:function(){return Object.assign(new Error(this.message),this)}},{key:"addError",value:function(C,k){if(k instanceof x)for(var D=k.errors,j=0,V=Object.keys(D);j<V.length;j++){var z=V[j];this.addError("".concat(C,".").concat(z),D[z])}else this.errors[C]=k,this.message=this._message+": "+p(this)}}])&&g(A.prototype,R),Object.defineProperty(A,"prototype",{writable:!1}),A;var A,R}(h);m.inspect.custom&&(_.prototype[m.inspect.custom]=_.prototype.inspect),Object.defineProperty(_.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}}),Object.defineProperty(_.prototype,"name",{value:"ValidationError"}),d.exports=_},6996:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m,p,_){var y;(function(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")})(this,h);var x=_.join(", ");return(y=function(A,R,C){return R=$(R),function(k,D){if(D&&(u(D)=="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k)}(A,g()?Reflect.construct(R,C||[],$(A).constructor):R.apply(A,C))}(this,h,['No matching document found for id "'+m._doc._id+'" version '+p+' modifiedPaths "'+x+'"'])).version=p,y.modifiedPaths=_,y}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"VersionError"}),d.exports=S},7032:(d,f,a)=>{var u=a(9732).Buffer,g=a(7799),$=a(7312).ec,v=a(5053),S=a(4589);function E(h,b){if(h.cmpn(0)<=0)throw new Error("invalid sig");if(h.cmp(b)>=0)throw new Error("invalid sig")}d.exports=function(h,b,m,p,_){var y=v(m);if(y.type==="ec"){if(p!=="ecdsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");return function(j,V,z){var W=S[z.data.algorithm.curve.join(".")];if(!W)throw new Error("unknown curve "+z.data.algorithm.curve.join("."));var ee=new $(W),ne=z.data.subjectPrivateKey.data;return ee.verify(V,j,ne)}(h,b,y)}if(y.type==="dsa"){if(p!=="dsa")throw new Error("wrong public key type");return function(j,V,z){var W=z.data.p,ee=z.data.q,ne=z.data.g,Q=z.data.pub_key,se=v.signature.decode(j,"der"),be=se.s,H=se.r;E(be,ee),E(H,ee);var P=g.mont(W),L=be.invm(ee);return ne.toRed(P).redPow(new g(V).mul(L).mod(ee)).fromRed().mul(Q.toRed(P).redPow(H.mul(L).mod(ee)).fromRed()).mod(W).mod(ee).cmp(H)===0}(h,b,y)}if(p!=="rsa"&&p!=="ecdsa/rsa")throw new Error("wrong public key type");b=u.concat([_,b]);for(var x=y.modulus.byteLength(),A=[1],R=0;b.length+A.length+2<x;)A.push(255),R+=1;A.push(0);for(var C=-1;++C<b.length;)A.push(b[C]);A=u.from(A);var k=g.mont(y.modulus);h=(h=new g(h).toRed(k)).redPow(new g(y.publicExponent)),h=u.from(h.fromRed().toArray());var D=R<8?1:0;for(x=Math.min(h.length,A.length),h.length!==A.length&&(D=1),C=-1;++C<x;)D|=h[C]^A[C];return D===0}},7045:(d,f,a)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(y)}function g(y,x){var A=Object.keys(y);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(y);x&&(R=R.filter(function(C){return Object.getOwnPropertyDescriptor(y,C).enumerable})),A.push.apply(A,R)}return A}function $(y){for(var x=1;x<arguments.length;x++){var A=arguments[x]!=null?arguments[x]:{};x%2?g(Object(A),!0).forEach(function(R){v(y,R,A[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(A)):g(Object(A)).forEach(function(R){Object.defineProperty(y,R,Object.getOwnPropertyDescriptor(A,R))})}return y}function v(y,x,A){return(x=function(R){var C=function(k){if(u(k)!="object"||!k)return k;var D=k[Symbol.toPrimitive];if(D!==void 0){var j=D.call(k,"string");if(u(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)}(R);return u(C)=="symbol"?C:C+""}(x))in y?Object.defineProperty(y,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[x]=A,y}var S=a(6426),E=S.CastError,h=a(9553),b=a(4327),m=a(3305);function p(y,x){S.call(this,y,x,"Decimal128")}function _(y){return this.cast(y)}p.schemaName="Decimal128",p.defaultOptions={},p.prototype=Object.create(S.prototype),p.prototype.constructor=p,p._cast=h,p.set=S.set,p.setters=[],p.get=S.get,p.cast=function(y){return arguments.length===0||(y===!1&&(y=this._defaultCaster),this._cast=y),this._cast},p._defaultCaster=function(y){if(y!=null&&!m(y,"Decimal128"))throw new Error;return y},p._checkRequired=function(y){return m(y,"Decimal128")},p.checkRequired=S.checkRequired,p.prototype.checkRequired=function(y,x){return S._isRef(this,y,x,!0)?!!y:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():p.checkRequired())(y)},p.prototype.cast=function(y,x,A,R,C){if(S._isRef(this,y,x,A))return m(y,"Decimal128")?y:this._castRef(y,x,A,C);var k;k=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():p.cast();try{return k(y)}catch(D){throw new E("Decimal128",y,this.path,D,this)}},p.prototype.$conditionalHandlers=$($({},S.prototype.$conditionalHandlers),{},{$gt:_,$gte:_,$lt:_,$lte:_}),p.prototype.toJSONSchema=function(y){var x=this.options.required&&typeof this.options.required!="function";return b("string","decimal",y==null?void 0:y.useBsonType,x)},d.exports=p},7058:(d,f,a)=>{var u=a(5832).Buffer;function g(ue,Ee){var Ae=Object.keys(ue);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(ue);Ee&&(Ne=Ne.filter(function(De){return Object.getOwnPropertyDescriptor(ue,De).enumerable})),Ae.push.apply(Ae,Ne)}return Ae}function $(ue){for(var Ee=1;Ee<arguments.length;Ee++){var Ae=arguments[Ee]!=null?arguments[Ee]:{};Ee%2?g(Object(Ae),!0).forEach(function(Ne){v(ue,Ne,Ae[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ue,Object.getOwnPropertyDescriptors(Ae)):g(Object(Ae)).forEach(function(Ne){Object.defineProperty(ue,Ne,Object.getOwnPropertyDescriptor(Ae,Ne))})}return ue}function v(ue,Ee,Ae){return(Ee=function(Ne){var De=function(he){if(S(he)!="object"||!he)return he;var tt=he[Symbol.toPrimitive];if(tt!==void 0){var at=tt.call(he,"string");if(S(at)!="object")return at;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(he)}(Ne);return S(De)=="symbol"?De:De+""}(Ee))in ue?Object.defineProperty(ue,Ee,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):ue[Ee]=Ae,ue}function S(ue){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee},S(ue)}function E(ue,Ee){return function(Ae){if(Array.isArray(Ae))return Ae}(ue)||function(Ae,Ne){var De=Ae==null?null:typeof Symbol<"u"&&Ae[Symbol.iterator]||Ae["@@iterator"];if(De!=null){var he,tt,at,He,ot=[],Ue=!0,Ze=!1;try{if(at=(De=De.call(Ae)).next,Ne===0){if(Object(De)!==De)return;Ue=!1}else for(;!(Ue=(he=at.call(De)).done)&&(ot.push(he.value),ot.length!==Ne);Ue=!0);}catch(ae){Ze=!0,tt=ae}finally{try{if(!Ue&&De.return!=null&&(He=De.return(),Object(He)!==He))return}finally{if(Ze)throw tt}}return ot}}(ue,Ee)||b(ue,Ee)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function h(ue,Ee){var Ae=typeof Symbol<"u"&&ue[Symbol.iterator]||ue["@@iterator"];if(!Ae){if(Array.isArray(ue)||(Ae=b(ue))||Ee){Ae&&(ue=Ae);var Ne=0,De=function(){};return{s:De,n:function(){return Ne>=ue.length?{done:!0}:{done:!1,value:ue[Ne++]}},e:function(He){throw He},f:De}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var he,tt=!0,at=!1;return{s:function(){Ae=Ae.call(ue)},n:function(){var He=Ae.next();return tt=He.done,He},e:function(He){at=!0,he=He},f:function(){try{tt||Ae.return==null||Ae.return()}finally{if(at)throw he}}}}function b(ue,Ee){if(ue){if(typeof ue=="string")return m(ue,Ee);var Ae={}.toString.call(ue).slice(8,-1);return Ae==="Object"&&ue.constructor&&(Ae=ue.constructor.name),Ae==="Map"||Ae==="Set"?Array.from(ue):Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae)?m(ue,Ee):void 0}}function m(ue,Ee){(Ee==null||Ee>ue.length)&&(Ee=ue.length);for(var Ae=0,Ne=Array(Ee);Ae<Ee;Ae++)Ne[Ae]=ue[Ae];return Ne}var p,_=a(3550).EventEmitter,y=a(8297),x=a(8213),A=a(6426),R=a(8879),C=a(2069),k=a(622),D=a(486),j=a(4450),V=a(3703),z=a(5879),W=a(2003),ee=a(5289),ne=a(3381),Q=a(1199),se=a(9539),be=a(5678),H=a(7834),P=a(2097),L=a(8768),F=a(533),M=/\.\d+(\.|$)/,U=a(1260).Ut,Z=a(4957).middlewareFunctions,K=U.concat(Z).reduce(function(ue,Ee){return ue.add(Ee)},new Set),oe=L.isPOJO,ie=0,$e=/^\d+$/;function ce(ue,Ee){if(!(this instanceof ce))return new ce(ue,Ee);if(this.obj=ue,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=Ee&&Ee.methods||{},this.methodOptions={},this.statics=Ee&&Ee.statics||{},this.tree={},this.query=Ee&&Ee.query||{},this.childSchemas=[],this.plugins=[],this.$id=++ie,this.mapPaths=[],this.s={hooks:new y},this.options=this.defaultOptions(Ee),Array.isArray(ue)){var Ae,Ne=h(ue);try{for(Ne.s();!(Ae=Ne.n()).done;){var De=Ae.value;this.add(De)}}catch(ae){Ne.e(ae)}finally{Ne.f()}}else ue&&this.add(ue);if(Ee&&Ee.virtuals)for(var he=Ee.virtuals,tt=0,at=Object.keys(he);tt<at.length;tt++){var He=at[tt],ot=he[He].options?he[He].options:void 0,Ue=this.virtual(He,ot);he[He].get&&Ue.get(he[He].get),he[He].set&&Ue.set(he[He].set)}var Ze=ue&&ue._id&&L.isObject(ue._id);!this.paths._id&&this.options._id&&!Ze&&D(this),this.setupTimestamp(this.options.timestamps)}function le(ue,Ee){for(var Ae=0,Ne=Object.keys(Ee);Ae<Ne.length;Ae++){var De=Ne[Ae],he=null;if(Ee[De]!=null)he=Ee[De];else{var tt=V(ue.paths[De],"options");if(tt==null)continue;he=tt.alias}if(he){var at=ue.paths[De].path;if(Array.isArray(he)){var He,ot=h(he);try{for(ot.s();!(He=ot.n()).done;){var Ue=He.value;if(typeof Ue!="string")throw new Error("Invalid value for alias option on "+at+", got "+Ue);ue.aliases[Ue]=at,ue.virtual(Ue).get(function(Ze){return function(){return typeof this.get=="function"?this.get(Ze):this[Ze]}}(at)).set(function(Ze){return function(ae){return this.$set(Ze,ae)}}(at))}}catch(Ze){ot.e(Ze)}finally{ot.f()}}else{if(typeof he!="string")throw new Error("Invalid value for alias option on "+at+", got "+he);ue.aliases[he]=at,ue.virtual(he).get(function(Ze){return function(){return typeof this.get=="function"?this.get(Ze):this[Ze]}}(at)).set(function(Ze){return function(ae){return this.$set(Ze,ae)}}(at))}}}}ce.prototype=Object.create(_.prototype),ce.prototype.constructor=ce,ce.prototype.instanceOfSchema=!0,Object.defineProperty(ce.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0}),Object.defineProperty(ce.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0}),Object.defineProperty(ce.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0}),ce.prototype.obj,ce.prototype.paths,ce.prototype.tree,ce.prototype.clone=function(){var ue=this,Ee=this._clone();return Ee.on("init",function(Ae){return ue.emit("init",Ae)}),Ee},ce.prototype._clone=function(ue){var Ee=new(ue=ue||(this.base==null?ce:this.base.Schema))({},this._userProvidedOptions);Ee.base=this.base,Ee.obj=this.obj,Ee.options=j(this.options),Ee.callQueue=this.callQueue.map(function(qt){return qt}),Ee.methods=j(this.methods),Ee.methodOptions=j(this.methodOptions),Ee.statics=j(this.statics),Ee.query=j(this.query),Ee.plugins=Array.prototype.slice.call(this.plugins),Ee._indexes=j(this._indexes),Ee._searchIndexes=j(this._searchIndexes),Ee.s.hooks=this.s.hooks.clone(),Ee.tree=j(this.tree),Ee.paths=Object.fromEntries(Object.entries(this.paths).map(function(qt){var gn=E(qt,2);return[gn[0],gn[1].clone()]})),Ee.nested=j(this.nested),Ee.subpaths=j(this.subpaths);for(var Ae=0,Ne=Object.values(Ee.paths);Ae<Ne.length;Ae++){var De=Ne[Ae];if(De.$isSingleNested){for(var he=De.path,tt=0,at=Object.keys(De.schema.paths);tt<at.length;tt++){var He=at[tt];Ee.singleNestedPaths[he+"."+He]=De.schema.paths[He]}for(var ot=0,Ue=Object.keys(De.schema.singleNestedPaths);ot<Ue.length;ot++){var Ze=Ue[ot];Ee.singleNestedPaths[he+"."+Ze]=De.schema.singleNestedPaths[Ze]}for(var ae=0,Oe=Object.keys(De.schema.subpaths);ae<Oe.length;ae++){var Le=Oe[ae];Ee.singleNestedPaths[he+"."+Le]=De.schema.subpaths[Le]}for(var Pe=0,ft=Object.keys(De.schema.nested);Pe<ft.length;Pe++){var Lt=ft[Pe];Ee.singleNestedPaths[he+"."+Lt]="nested"}}}return Ee._gatherChildSchemas(),Ee.virtuals=j(this.virtuals),Ee.$globalPluginsApplied=this.$globalPluginsApplied,Ee.$isRootDiscriminator=this.$isRootDiscriminator,Ee.$implicitlyCreated=this.$implicitlyCreated,Ee.$id=++ie,Ee.$originalSchemaId=this.$id,Ee.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null&&(Ee.discriminatorMapping=Object.assign({},this.discriminatorMapping)),this.discriminators!=null&&(Ee.discriminators=Object.assign({},this.discriminators)),this._applyDiscriminators!=null&&(Ee._applyDiscriminators=new Map(this._applyDiscriminators)),Ee.aliases=Object.assign({},this.aliases),Ee},ce.prototype.pick=function(ue,Ee){var Ae=new ce({},Ee||this.options);if(!Array.isArray(ue))throw new x('Schema#pick() only accepts an array argument, got "'+S(ue)+'"');var Ne,De=h(ue);try{for(De.s();!(Ne=De.n()).done;){var he=Ne.value;if(this.nested[he])Ae.add(v({},he,V(this.tree,he)));else{var tt=this.path(he);if(tt==null)throw new x("Path `"+he+"` is not in the schema");Ae.add(v({},he,tt))}}}catch(at){De.e(at)}finally{De.f()}return Ae},ce.prototype.omit=function(ue,Ee){var Ae=new ce(this,Ee||this.options);if(!Array.isArray(ue))throw new x('Schema#omit() only accepts an array argument, got "'+S(ue)+'"');for(var Ne in Ae.remove(ue),Ae.singleNestedPaths)ue.includes(Ne)&&delete Ae.singleNestedPaths[Ne];return Ae},ce.prototype.defaultOptions=function(ue){this._userProvidedOptions=ue==null?{}:j(ue);var Ee=this.base&&this.base.options||{};if((ue=$({strict:!("strict"in Ee)||Ee.strict,strictQuery:"strictQuery"in Ee&&Ee.strictQuery,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:!("id"in Ee)||Ee.id,typeKey:"type"},ue)).versionKey&&typeof ue.versionKey!="string")throw new x("`versionKey` must be falsy or string, got `"+S(ue.versionKey)+"`");if(typeof ue.read=="string"?ue.read=ee(ue.read):Array.isArray(ue.read)&&typeof ue.read[0]=="string"&&(ue.read={mode:ee(ue.read[0]),tags:ue.read[1]}),ue.optimisticConcurrency&&!ue.versionKey)throw new x("Must set `versionKey` if using `optimisticConcurrency`");return ue},ce.prototype.discriminator=function(ue,Ee,Ae){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(ue,{schema:Ee,options:Ae}),this},ce.prototype._defaultToObjectOptions=function(ue){var Ee=ue?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[Ee])return this._defaultToObjectOptionsMap[Ee];var Ae=this.base&&this.base.options&&this.base.options[Ee]||{},Ne=this.options[Ee]||{},De=Object.assign({},Ae,Ne);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[Ee]=De,De},ce.prototype.add=function(ue,Ee){if(ue instanceof ce||ue!=null&&ue.instanceOfSchema)return se(this,ue),this;if(ue._id===!1&&Ee==null&&(this.options._id=!1),(Ee=Ee||"")==="__proto__."||Ee==="constructor."||Ee==="prototype.")return this;for(var Ae=Object.keys(ue),Ne=this.options.typeKey,De=0,he=Ae;De<he.length;De++){var tt=he[De];if(!L.specialProperties.has(tt)){var at=Ee+tt,He=ue[tt];if(He==null)throw new TypeError("Invalid value for schema path `"+at+'`, got value "'+He+'"');if(tt!=="_id"||He!==!1){var ot=!1;if(typeof He=="string"&&(ot=(this.base!=null?this.base.Schema.Types:ce.Types)[He.charAt(0).toUpperCase()+He.substring(1)]!=null),tt!=="_id"&&(S(He)!=="object"&&typeof He!="function"&&!ot||He==null))throw new TypeError("Invalid schema configuration: `".concat(He,"` is not ")+"a valid type at path `".concat(tt,"`. See ")+"https://bit.ly/mongoose-schematypes for a list of valid schema types.");if(He instanceof k||(He.constructor&&He.constructor.name||null)==="VirtualType")this.virtual(He);else{if(Array.isArray(He)&&He.length===1&&He[0]==null)throw new TypeError("Invalid value for schema Array path `"+at+'`, got value "'+He[0]+'"');if(oe(He)||He instanceof R)if(Object.keys(He).length<1)Ee&&(this.nested[Ee.substring(0,Ee.length-1)]=!0),this.path(at,He);else if(!He[Ne]||Ne==="type"&&oe(He.type)&&He.type.type)this.nested[at]=!0,this.add(He,at+".");else{var Ue=He[Ne];if(oe(Ue)&&Object.keys(Ue).length>0){Ee&&(this.nested[Ee.substring(0,Ee.length-1)]=!0);var Ze={};this._userProvidedOptions.typeKey&&(Ze.typeKey=this._userProvidedOptions.typeKey),this._userProvidedOptions.strict!=null&&(Ze.strict=this._userProvidedOptions.strict),this._userProvidedOptions.toObject!=null&&(Ze.toObject=L.omit(this._userProvidedOptions.toObject,["transform"])),this._userProvidedOptions.toJSON!=null&&(Ze.toJSON=L.omit(this._userProvidedOptions.toJSON,["transform"]));var ae=new ce(Ue,Ze);ae.$implicitlyCreated=!0;var Oe=Object.assign({},He,v({},Ne,ae));this.path(Ee+tt,Oe)}else if(Ee&&(this.nested[Ee.substring(0,Ee.length-1)]=!0),this.path(Ee+tt,He),He!=null&&!He.instanceOfSchema&&L.isPOJO(He.discriminators)){var Le=this.path(Ee+tt);for(var Pe in He.discriminators)Le.discriminator(Pe,He.discriminators[Pe])}}else if(Ee&&(this.nested[Ee.substring(0,Ee.length-1)]=!0),this.path(Ee+tt,He),He[0]!=null&&!He[0].instanceOfSchema&&L.isPOJO(He[0].discriminators)){var ft=this.path(Ee+tt);for(var Lt in He[0].discriminators)ft.discriminator(Lt,He[0].discriminators[Lt])}}}}}var qt=Object.fromEntries(Object.entries(ue).map(function(gn){var dn=E(gn,1)[0];return[Ee+dn,null]}));return le(this,qt),this},ce.prototype.alias=function(ue,Ee){return le(this,v({},ue,Ee)),this},ce.prototype.removeIndex=function(ue){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(S(ue)!=="object"&&typeof ue!="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(S(ue)==="object")for(var Ee=this._indexes.length-1;Ee>=0;--Ee)Q(this._indexes[Ee][0],ue)&&this._indexes.splice(Ee,1);else for(var Ae=this._indexes.length-1;Ae>=0;--Ae)this._indexes[Ae][1]!=null&&this._indexes[Ae][1].name===ue&&this._indexes.splice(Ae,1);return this},ce.prototype.clearIndexes=function(){return this._indexes.length=0,this},ce.prototype.searchIndex=function(ue){return this._searchIndexes.push(ue),this},ce.reserved=Object.create(null),ce.prototype.reserved=ce.reserved;var ye=ce.reserved;function _e(ue){return/\.\d+/.test(ue)?ue.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):ue}function q(ue,Ee){if(ue.mapPaths.length===0)return null;var Ae,Ne=h(ue.mapPaths);try{for(Ne.s();!(Ae=Ne.n()).done;){var De=Ae.value.path;if(new RegExp("^"+De.replace(/\.\$\*/g,"\\.[^.]+")+"$").test(Ee))return ue.paths[De]}}catch(he){Ne.e(he)}finally{Ne.f()}return null}function re(ue,Ee,Ae){var Ne=Ee.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(Ne.length<2)return ue.paths.hasOwnProperty(Ne[0])?ue.paths[Ne[0]]:"adhocOrUndefined";var De=ue.path(Ne[0]),he=!1;if(!De)return"adhocOrUndefined";for(var tt=Ne.length-1,at=1;at<Ne.length;++at){he=!1;var He=Ne[at];if(at===tt&&De&&!/\D/.test(He)){De=De.$isMongooseDocumentArray?De.$embeddedSchemaType:De instanceof p.Array?De.caster:void 0;break}if(/\D/.test(He)){if(!De||!De.schema){De=void 0;break}he=De.schema.pathType(He)==="nested",De=De.schema.path(He)}else De instanceof p.Array&&at!==tt&&(De=De.caster)}return ue.subpaths[Ae]=De,De?"real":he?"nested":"adhocOrUndefined"}function fe(ue,Ee){var Ae,Ne=h(ue.childSchemas);try{for(Ne.s();!(Ae=Ne.n()).done;){var De=Ae.value.schema;De.$implicitlyCreated&&(Object.assign(De.options,Ee),fe(De,Ee))}}catch(he){Ne.e(he)}finally{Ne.f()}}ye.prototype=ye.emit=ye.listeners=ye.removeListener=ye.collection=ye.errors=ye.get=ye.init=ye.isModified=ye.isNew=ye.populated=ye.remove=ye.save=ye.toObject=ye.validate=1,ye.collection=1,ce.prototype.path=function(ue,Ee){if(Ee===void 0){if(this.paths[ue]!=null)return this.paths[ue];var Ae=_e(ue),Ne=function(mt,yt,Et){if(mt.paths.hasOwnProperty(yt))return mt.paths[yt];if(mt.subpaths.hasOwnProperty(Et)){var jt=mt.subpaths[Et];return jt==="nested"?void 0:jt}if(mt.singleNestedPaths.hasOwnProperty(Et)&&S(mt.singleNestedPaths[Et])==="object"){var Ut=mt.singleNestedPaths[Et];return Ut==="nested"?void 0:Ut}return null}(this,ue,Ae);if(Ne!=null)return Ne;var De=q(this,ue);return De??((Ne=this.hasMixedParent(Ae))!=null?Ne:M.test(ue)?function(mt,yt,Et){return re(mt,yt,Et),mt.subpaths[Et]}(this,ue,Ae):void 0)}var he=ue.split(".")[0];if(ye[he]&&!this.options.suppressReservedKeysWarning){var tt="`".concat(he,"` is a reserved schema pathname and may break some functionality. ")+"You are allowed to use it, but use at your own risk. To disable this warning pass `suppressReservedKeysWarning` as a schema option.";L.warn(tt)}S(Ee)==="object"&&L.hasUserDefinedProperty(Ee,"ref")&&F(Ee.ref,ue);var at,He=ue.split(/\./),ot=He.pop(),Ue=this.tree,Ze="",ae=h(He);try{for(ae.s();!(at=ae.n()).done;){var Oe=at.value;if(L.specialProperties.has(Oe))throw new Error("Cannot set special property `"+Oe+"` on a schema");if(Ze=Ze+=(Ze.length>0?".":"")+Oe,Ue[Oe]||(this.nested[Ze]=!0,Ue[Oe]={}),S(Ue[Oe])!=="object"){var Le="Cannot set nested path `"+ue+"`. Parent path `"+Ze+"` already set to type "+Ue[Oe].name+".";throw new Error(Le)}Ue=Ue[Oe]}}catch(mt){ae.e(mt)}finally{ae.f()}Ue[ot]=j(Ee),this.paths[ue]=this.interpretAsType(ue,Ee,this.options);var Pe=this.paths[ue];if(this.childSchemas=this.childSchemas.filter(function(mt){return mt.path!==ue}),Pe.$isSchemaMap){var ft=ue+".$*";this.paths[ft]=Pe.$__schemaType,this.mapPaths.push(this.paths[ft]),Pe.$__schemaType.$isSingleNested&&this.childSchemas.push({schema:Pe.$__schemaType.schema,model:Pe.$__schemaType.caster,path:ue})}if(Pe.$isSingleNested){for(var Lt=0,qt=Object.keys(Pe.schema.paths);Lt<qt.length;Lt++){var gn=qt[Lt];this.singleNestedPaths[ue+"."+gn]=Pe.schema.paths[gn]}for(var dn=0,un=Object.keys(Pe.schema.singleNestedPaths);dn<un.length;dn++){var ge=un[dn];this.singleNestedPaths[ue+"."+ge]=Pe.schema.singleNestedPaths[ge]}for(var ve=0,Fe=Object.keys(Pe.schema.subpaths);ve<Fe.length;ve++){var qe=Fe[ve];this.singleNestedPaths[ue+"."+qe]=Pe.schema.subpaths[qe]}for(var st=0,Dt=Object.keys(Pe.schema.nested);st<Dt.length;st++){var Wt=Dt[st];this.singleNestedPaths[ue+"."+Wt]="nested"}Object.defineProperty(Pe.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),Pe.caster.base=this.base,this.childSchemas.push({schema:Pe.schema,model:Pe.caster,path:ue})}else Pe.$isMongooseDocumentArray&&(Object.defineProperty(Pe.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),Pe.casterConstructor.base=this.base,this.childSchemas.push({schema:Pe.schema,model:Pe.casterConstructor,path:ue}));if(Pe.$isMongooseArray&&Pe.caster instanceof A){for(var pn=ue,bn=Pe;bn.$isMongooseArray;)pn+=".$",bn.$isMongooseDocumentArray?(bn.$embeddedSchemaType._arrayPath=pn,bn.$embeddedSchemaType._arrayParentPath=ue,bn=bn.$embeddedSchemaType):(bn.caster._arrayPath=pn,bn.caster._arrayParentPath=ue,bn=bn.caster),this.subpaths[pn]=bn;for(var sr=0,Pn=[];sr<Pn.length;sr++){var Bn=Pn[sr];this.subpaths[Bn.path]=Bn}}if(Pe.$isMongooseDocumentArray){for(var ci=0,pe=Object.keys(Pe.schema.paths);ci<pe.length;ci++){var Se=pe[ci],Ie=Pe.schema.paths[Se];this.subpaths[ue+"."+Se]=Ie,S(Ie)==="object"&&Ie!=null&&Ie.$parentSchemaDocArray==null&&(Ie.$parentSchemaDocArray=Pe)}for(var Me=0,Be=Object.keys(Pe.schema.subpaths);Me<Be.length;Me++){var Ge=Be[Me],Xe=Pe.schema.subpaths[Ge];this.subpaths[ue+"."+Ge]=Xe,S(Xe)==="object"&&Xe!=null&&Xe.$parentSchemaDocArray==null&&(Xe.$parentSchemaDocArray=Pe)}for(var Je=0,xt=Object.keys(Pe.schema.singleNestedPaths);Je<xt.length;Je++){var nt=xt[Je],ct=Pe.schema.singleNestedPaths[nt];this.subpaths[ue+"."+nt]=ct,S(ct)==="object"&&ct!=null&&ct.$parentSchemaDocArray==null&&(ct.$parentSchemaDocArray=Pe)}}return this},ce.prototype._gatherChildSchemas=function(){for(var ue=[],Ee=0,Ae=Object.keys(this.paths);Ee<Ae.length;Ee++){var Ne=Ae[Ee];if(typeof Ne=="string"){var De=this.paths[Ne];De.$isMongooseDocumentArray||De.$isSingleNested?ue.push({schema:De.schema,model:De.caster,path:Ne}):De.$isSchemaMap&&De.$__schemaType.$isSingleNested&&ue.push({schema:De.$__schemaType.schema,model:De.$__schemaType.caster,path:Ne})}}return this.childSchemas=ue,ue},Object.defineProperty(ce.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null}),ce.prototype.interpretAsType=function(ue,Ee,Ae){if(Ee instanceof A){if(Ee.path===ue)return Ee;var Ne=Ee.clone();return Ne.path=ue,Ne}var De=this.base!=null?this.base.Schema.Types:ce.Types,he=this.base!=null?this.base.Types:a(9600);if(!(L.isPOJO(Ee)||Ee instanceof R)&&L.getFunctionName(Ee.constructor)!=="Object"){var tt=Ee;(Ee={})[Ae.typeKey]=tt}var at,He=Ee[Ae.typeKey]&&(Ee[Ae.typeKey]instanceof Function||Ae.typeKey!=="type"||!Ee.type.type)?Ee[Ae.typeKey]:{};if(L.isPOJO(He)||He==="mixed")return new De.Mixed(ue,Ee);if(Array.isArray(He)||He===Array||He==="array"||He===De.Array){var ot=He===Array||He==="array"?Ee.cast||Ee.of:He[0];if(ot&&ot.instanceOfSchema){if(!(ot instanceof ce)){if(!this.options._isMerging)throw new TypeError("Schema for array path `"+ue+"` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with `npm list mongoose`. If you are still getting this error, please add `new Schema()` around the path: "+"".concat(ue,": new Schema(...)"));ot=new ce(ot)}return new De.DocumentArray(ue,ot,Ee)}if(ot&&ot[Ae.typeKey]&&ot[Ae.typeKey].instanceOfSchema){if(!(ot[Ae.typeKey]instanceof ce)){if(!this.options._isMerging)throw new TypeError("Schema for array path `"+ue+"` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with `npm list mongoose`. If you are still getting this error, please add `new Schema()` around the path: "+"".concat(ue,": new Schema(...)"));ot[Ae.typeKey]=new ce(ot[Ae.typeKey])}return new De.DocumentArray(ue,ot[Ae.typeKey],Ee,ot)}if(ot!==void 0&&(Array.isArray(ot)||ot.type===Array||ot.type=="Array"))return ot&&ot.type=="Array"&&(ot.type=Array),new De.Array(ue,this.interpretAsType(ue,ot,Ae),Ee);var Ue=ot==null||!ot[Ae.typeKey]||Ae.typeKey==="type"&&ot.type.type?ot:ot[Ae.typeKey];if(typeof ot=="string")ot=De[ot.charAt(0).toUpperCase()+ot.substring(1)];else if(L.isPOJO(Ue)){if(Object.keys(Ue).length){var Ze={minimize:Ae.minimize};Ae.typeKey&&(Ze.typeKey=Ae.typeKey),Ae.hasOwnProperty("strict")&&(Ze.strict=Ae.strict),Ae.hasOwnProperty("strictQuery")&&(Ze.strictQuery=Ae.strictQuery),Ae.hasOwnProperty("toObject")&&(Ze.toObject=L.omit(Ae.toObject,["transform"])),Ae.hasOwnProperty("toJSON")&&(Ze.toJSON=L.omit(Ae.toJSON,["transform"])),this._userProvidedOptions.hasOwnProperty("_id")?Ze._id=this._userProvidedOptions._id:ce.Types.DocumentArray.defaultOptions._id!=null&&(Ze._id=ce.Types.DocumentArray.defaultOptions._id);var ae=new ce(Ue,Ze);return ae.$implicitlyCreated=!0,new De.DocumentArray(ue,ae,Ee)}return new De.Array(ue,De.Mixed,Ee)}if(ot){if(He=!ot[Ae.typeKey]||Ae.typeKey==="type"&&ot.type.type?ot:ot[Ae.typeKey],Array.isArray(He))return new De.Array(ue,this.interpretAsType(ue,He,Ae),Ee);if((at=typeof He=="string"?He:He.schemaName||L.getFunctionName(He))==="ClockDate"&&(at="Date"),at===void 0)throw new TypeError("Invalid schema configuration: "+"Could not determine the embedded type for array `".concat(ue,"`. ")+"See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.");if(!De.hasOwnProperty(at))throw new TypeError("Invalid schema configuration: "+"`".concat(at,"` is not a valid type within the array `").concat(ue,"`.")+"See https://bit.ly/mongoose-schematypes for a list of valid schema types.")}return new De.Array(ue,ot||De.Mixed,Ee,Ae)}if(He&&He.instanceOfSchema)return new De.Subdocument(He,ue,Ee);if((at=u.isBuffer(He)?"Buffer":typeof He=="function"||S(He)==="object"?He.schemaName||L.getFunctionName(He):He===he.ObjectId?"ObjectId":He===he.Decimal128?"Decimal128":He==null?""+He:He.toString())&&(at=at.charAt(0).toUpperCase()+at.substring(1)),at==="ObjectID"&&(at="ObjectId"),at==="ClockDate"&&(at="Date"),at===void 0)throw new TypeError("Invalid schema configuration: `".concat(ue,"` schematype definition is ")+"invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.");if(De[at]==null)throw new TypeError("Invalid schema configuration: `".concat(at,"` is not ")+"a valid type at path `".concat(ue,"`. See ")+"https://bit.ly/mongoose-schematypes for a list of valid schema types.");var Oe=new De[at](ue,Ee);return Oe.$isSchemaMap&&function(Le,Pe,ft,Lt,qt){var gn=ft+".$*",dn={type:{}};L.hasUserDefinedProperty(Lt,"of")&&((dn=L.isPOJO(Lt.of)&&Object.keys(Lt.of).length>0&&!L.hasUserDefinedProperty(Lt.of,Le.options.typeKey)?v({},Le.options.typeKey,new ce(Lt.of)):L.isPOJO(Lt.of)?Object.assign({},Lt.of):v({},Le.options.typeKey,Lt.of))[Le.options.typeKey]&&dn[Le.options.typeKey].instanceOfSchema&&dn[Le.options.typeKey].eachPath(function(un,ge){if(ge.options.select===!0||ge.options.select===!1)throw new x('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+ft+"."+un+'"')}),L.hasUserDefinedProperty(Lt,"ref")&&(dn.ref=Lt.ref)),Pe.$__schemaType=Le.interpretAsType(gn,dn,qt)}(this,Oe,ue,Ee,Ae),Oe},ce.prototype.eachPath=function(ue){for(var Ee=Object.keys(this.paths),Ae=Ee.length,Ne=0;Ne<Ae;++Ne)ue(Ee[Ne],this.paths[Ee[Ne]]);return this},ce.prototype.requiredPaths=function(ue){if(this._requiredpaths&&!ue)return this._requiredpaths;for(var Ee=Object.keys(this.paths),Ae=Ee.length,Ne=[];Ae--;){var De=Ee[Ae];this.paths[De].isRequired&&Ne.push(De)}return this._requiredpaths=Ne,this._requiredpaths},ce.prototype.indexedPaths=function(){return this._indexedpaths||(this._indexedpaths=this.indexes()),this._indexedpaths},ce.prototype.pathType=function(ue){if(this.paths.hasOwnProperty(ue))return"real";if(this.virtuals.hasOwnProperty(ue))return"virtual";if(this.nested.hasOwnProperty(ue))return"nested";var Ee=_e(ue);if(this.subpaths.hasOwnProperty(Ee)||this.subpaths.hasOwnProperty(ue))return"real";var Ae=this.singleNestedPaths.hasOwnProperty(Ee)||this.singleNestedPaths.hasOwnProperty(ue);return Ae?Ae==="nested"?"nested":"real":q(this,ue)!=null?"real":/\.\d+\.|\.\d+$/.test(ue)?re(this,ue,Ee):"adhocOrUndefined"},ce.prototype.hasMixedParent=function(ue){var Ee=ue.split(/\./g);ue="";for(var Ae=0;Ae<Ee.length;++Ae)if(ue=Ae>0?ue+"."+Ee[Ae]:Ee[Ae],this.paths.hasOwnProperty(ue)&&this.paths[ue]instanceof p.Mixed)return this.paths[ue];return null},ce.prototype.setupTimestamp=function(ue){return P(this,ue)},ce.prototype.queue=function(ue,Ee){return this.callQueue.push([ue,Ee]),this},ce.prototype.pre=function(ue){if(ue instanceof RegExp){var Ee,Ae=Array.prototype.slice.call(arguments,1),Ne=h(K);try{for(Ne.s();!(Ee=Ne.n()).done;){var De=Ee.value;ue.test(De)&&this.pre.apply(this,[De].concat(Ae))}}catch(ot){Ne.e(ot)}finally{Ne.f()}return this}if(Array.isArray(ue)){var he,tt=Array.prototype.slice.call(arguments,1),at=h(ue);try{for(at.s();!(he=at.n()).done;){var He=he.value;this.pre.apply(this,[He].concat(tt))}}catch(ot){at.e(ot)}finally{at.f()}return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this},ce.prototype.post=function(ue){if(ue instanceof RegExp){var Ee,Ae=Array.prototype.slice.call(arguments,1),Ne=h(K);try{for(Ne.s();!(Ee=Ne.n()).done;){var De=Ee.value;ue.test(De)&&this.post.apply(this,[De].concat(Ae))}}catch(ot){Ne.e(ot)}finally{Ne.f()}return this}if(Array.isArray(ue)){var he,tt=Array.prototype.slice.call(arguments,1),at=h(ue);try{for(at.s();!(he=at.n()).done;){var He=he.value;this.post.apply(this,[He].concat(tt))}}catch(ot){at.e(ot)}finally{at.f()}return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this},ce.prototype.plugin=function(ue,Ee){if(typeof ue!="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+S(ue)+'"');if(Ee&&Ee.deduplicate){var Ae,Ne=h(this.plugins);try{for(Ne.s();!(Ae=Ne.n()).done;)if(Ae.value.fn===ue)return this}catch(De){Ne.e(De)}finally{Ne.f()}}return this.plugins.push({fn:ue,opts:Ee}),ue(this,Ee),this},ce.prototype.method=function(ue,Ee,Ae){if(typeof ue!="string")for(var Ne in ue)this.methods[Ne]=ue[Ne],this.methodOptions[Ne]=j(Ae);else this.methods[ue]=Ee,this.methodOptions[ue]=j(Ae);return this},ce.prototype.static=function(ue,Ee){if(typeof ue!="string")for(var Ae in ue)this.statics[Ae]=ue[Ae];else this.statics[ue]=Ee;return this},ce.prototype.index=function(ue,Ee){for(var Ae in ue||(ue={}),Ee||(Ee={}),Ee.expires&&L.expires(Ee),ue)this.aliases[Ae]&&(ue=L.renameObjKey(ue,Ae,this.aliases[Ae]));for(var Ne=0,De=Object.keys(ue);Ne<De.length;Ne++){var he=De[Ne];ue[he]==="ascending"||ue[he]==="asc"?ue[he]=1:ue[he]!=="descending"&&ue[he]!=="desc"||(ue[he]=-1)}var tt,at=h(this.indexes());try{for(at.s();!(tt=at.n()).done;){var He=tt.value;Ee.name==null&&He[1].name==null&&Q(He[0],ue)&&L.warn("Duplicate schema index on ".concat(JSON.stringify(ue),' found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.'))}}catch(ot){at.e(ot)}finally{at.f()}return this._indexes.push([ue,Ee]),this},ce.prototype.set=function(ue,Ee,Ae){if(arguments.length===1)return this.options[ue];switch(ue){case"read":typeof Ee=="string"?this.options[ue]={mode:ee(Ee),tags:Ae}:Array.isArray(Ee)&&typeof Ee[0]=="string"?this.options[ue]={mode:ee(Ee[0]),tags:Ee[1]}:this.options[ue]=Ee,this._userProvidedOptions[ue]=this.options[ue];break;case"timestamps":this.setupTimestamp(Ee),this.options[ue]=Ee,this._userProvidedOptions[ue]=this.options[ue];break;case"_id":this.options[ue]=Ee,this._userProvidedOptions[ue]=this.options[ue],Ee&&!this.paths._id?D(this):!Ee&&this.paths._id!=null&&this.paths._id.auto&&this.remove("_id");break;default:this.options[ue]=Ee,this._userProvidedOptions[ue]=this.options[ue]}return ue==="strict"&&fe(this,{strict:Ee}),ue==="strictQuery"&&fe(this,{strictQuery:Ee}),ue==="toObject"&&(delete(Ee=$({},Ee)).transform,fe(this,{toObject:Ee})),ue==="toJSON"&&(delete(Ee=$({},Ee)).transform,fe(this,{toJSON:Ee})),this},ce.prototype.get=function(ue){return this.options[ue]};var we="2d 2dsphere hashed text".split(" ");function Re(ue,Ee){var Ae,Ne=Ee.split("."),De=Ne.pop(),he=ue.tree,tt=h(Ne);try{for(tt.s();!(Ae=tt.n()).done;)he=he[Ae.value]}catch(at){tt.e(at)}finally{tt.f()}delete he[De]}function ke(ue){return ue.startsWith("$[")&&ue.endsWith("]")}Object.defineProperty(ce,"indexTypes",{get:function(){return we},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}}),ce.prototype.indexes=function(){return W(this)},ce.prototype.virtual=function(ue,Ee){if(ue instanceof k||z(ue)==="VirtualType")return this.virtual(ue.path,ue.options);if(Ee=new C(Ee),L.hasUserDefinedProperty(Ee,["ref","refPath"])){if(Ee.localField==null)throw new Error("Reference virtuals require `localField` option");if(Ee.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");var Ae=this.virtual(ue);Ae.options=Ee,this.pre("init",function(Ue,Ze){if(be.has(ue,Ue)){var ae=be.get(ue,Ue);if(this.$$populatedVirtuals||(this.$$populatedVirtuals={}),Ee.justOne||Ee.count?this.$$populatedVirtuals[ue]=Array.isArray(ae)?ae[0]:ae:this.$$populatedVirtuals[ue]=Array.isArray(ae)?ae:ae==null?[]:[ae],Ze!=null&&Ze.hydratedPopulatedDocs&&!Ee.count){var Oe=Ae._getModelNamesForPopulate(this),Le=this.$$populatedVirtuals[ue];if(Array.isArray(Le)||Le.$__||(Oe==null?void 0:Oe.length)!==1){if(Array.isArray(Le)&&(Oe==null?void 0:Oe.length)===1){for(var Pe=this.db.model(Oe[0]),ft=0;ft<Le.length;++ft)Le[ft].$__||(Le[ft]=Pe.hydrate(Le[ft],null,{hydratedPopulatedDocs:!0}));var Lt=Ee.foreignField;this.$populated(ue,Le.map(function(gn){return gn==null?gn:gn.get(typeof Lt=="function"?Lt.call(gn,gn):Lt)}),{populateModelSymbol:Pe})}}else{var qt=this.db.model(Oe[0]);this.$$populatedVirtuals[ue]=qt.hydrate(Le)}}be.unset(ue,Ue)}}),Ae.set(function(Ue){return this.$$populatedVirtuals||(this.$$populatedVirtuals={}),H(this.$$populatedVirtuals,ue,Ue,Ee)}),typeof Ee.get=="function"&&Ae.get(Ee.get);for(var Ne=ue.split("."),De=Ne[0],he=0;he<Ne.length-1;++he)if(this.paths[De]!=null){if(this.paths[De].$isMongooseDocumentArray||this.paths[De].$isSingleNested){var tt=Ne.slice(he+1).join(".");this.paths[De].schema.virtual(tt,Ee);break}De+="."+Ne[he+1]}return Ae}var at=this.virtuals,He=ue.split(".");if(this.pathType(ue)==="real")throw new Error('Virtual path "'+ue+'" conflicts with a real path in the schema');if(at[ue]=He.reduce(function(Ue,Ze,ae){return Ue[Ze]||(Ue[Ze]=ae===He.length-1?new k(Ee,ue):{}),Ue[Ze]},this.tree),Ee&&Ee.applyToArray&&He.length>1){var ot=this.path(He.slice(0,-1).join("."));if(ot&&ot.$isMongooseArray)return ot.virtual(He[He.length-1],Ee);throw new x('Path "'.concat(ot,'" is not an array'))}return at[ue]},ce.prototype.virtualpath=function(ue){return this.virtuals.hasOwnProperty(ue)?this.virtuals[ue]:null},ce.prototype.remove=function(ue){return typeof ue=="string"&&(ue=[ue]),Array.isArray(ue)&&ue.forEach(function(Ee){if(this.path(Ee)!=null||this.nested[Ee]){if(this.nested[Ee]){var Ae,Ne=h(Object.keys(this.paths).concat(Object.keys(this.nested)));try{for(Ne.s();!(Ae=Ne.n()).done;){var De=Ae.value;De.startsWith(Ee+".")&&(delete this.paths[De],delete this.nested[De],Re(this,De))}}catch(he){Ne.e(he)}finally{Ne.f()}return delete this.nested[Ee],void Re(this,Ee)}delete this.paths[Ee],Re(this,Ee)}},this),this},ce.prototype.removeVirtual=function(ue){if(typeof ue=="string"&&(ue=[ue]),Array.isArray(ue)){var Ee,Ae=h(ue);try{for(Ae.s();!(Ee=Ae.n()).done;){var Ne=Ee.value;if(this.virtuals[Ne]==null)throw new x('Attempting to remove virtual "'.concat(Ne,'" that does not exist.'))}}catch(at){Ae.e(at)}finally{Ae.f()}var De,he=h(ue);try{for(he.s();!(De=he.n()).done;){var tt=De.value;delete this.paths[tt],delete this.virtuals[tt],tt.indexOf(".")!==-1?be.unset(tt,this.tree):delete this.tree[tt]}}catch(at){he.e(at)}finally{he.f()}}return this},ce.prototype.loadClass=function(ue,Ee){return ue===Object.prototype||ue===Function.prototype||ue.prototype.hasOwnProperty("$isMongooseModelPrototype")||ue.prototype.hasOwnProperty("$isMongooseDocumentPrototype")||(this.loadClass(Object.getPrototypeOf(ue),Ee),Ee||Object.getOwnPropertyNames(ue).forEach(function(Ae){if(!Ae.match(/^(length|name|prototype|constructor|__proto__)$/)){var Ne=Object.getOwnPropertyDescriptor(ue,Ae);Ne.hasOwnProperty("value")&&this.static(Ae,Ne.value)}},this),Object.getOwnPropertyNames(ue.prototype).forEach(function(Ae){if(!Ae.match(/^(constructor)$/)){var Ne=Object.getOwnPropertyDescriptor(ue.prototype,Ae);Ee||typeof Ne.value=="function"&&this.method(Ae,Ne.value),typeof Ne.get=="function"&&(this.virtuals[Ae]&&(this.virtuals[Ae].getters=[]),this.virtual(Ae).get(Ne.get)),typeof Ne.set=="function"&&(this.virtuals[Ae]&&(this.virtuals[Ae].setters=[]),this.virtual(Ae).set(Ne.set))}},this)),this},ce.prototype._getSchema=function(ue){var Ee=this.path(ue),Ae=[];if(Ee)return Ee.$fullPath=ue,Ee;for(var Ne=ue.split("."),De=0;De<Ne.length;++De)(Ne[De]==="$"||ke(Ne[De]))&&(Ne[De]="0"),$e.test(Ne[De])&&(Ne[De]="$");return function he(tt,at){for(var He,ot,Ue=tt.length+1;Ue--;)if(ot=tt.slice(0,Ue).join("."),He=at.path(ot)){if(Ae.push(ot),He.caster){if(He.caster instanceof p.Mixed)return He.caster.$fullPath=Ae.join("."),He.caster;if(Ue!==tt.length){if(Ue+1===tt.length&&He.$embeddedSchemaType&&(tt[Ue]==="$"||ke(tt[Ue])))return He.$embeddedSchemaType;if(He.schema){var Ze=void 0;return tt[Ue]==="$"||ke(tt[Ue])?Ue+1===tt.length?He.$embeddedSchemaType:((Ze=he(tt.slice(Ue+1),He.schema))&&(Ze.$parentSchemaDocArray=Ze.$parentSchemaDocArray||(He.schema.$isSingleNested?null:He)),Ze):((Ze=he(tt.slice(Ue),He.schema))&&(Ze.$parentSchemaDocArray=Ze.$parentSchemaDocArray||(He.schema.$isSingleNested?null:He)),Ze)}}}else if(He.$isSchemaMap){if(Ue>=tt.length)return He;if(Ue+1>=tt.length||He.$__schemaType instanceof p.Mixed)return He.$__schemaType;if(He.$__schemaType.schema!=null)return he(tt.slice(Ue+1),He.$__schemaType.schema)}return He.$fullPath=Ae.join("."),He}}(Ne,this)},ce.prototype._getPathType=function(ue){return this.path(ue)?"real":function Ee(Ae,Ne){for(var De,he,tt=Ae.length+1;tt--;){if(he=Ae.slice(0,tt).join("."),De=Ne.path(he))return De.caster?De.caster instanceof p.Mixed?{schema:De,pathType:"mixed"}:tt!==Ae.length&&De.schema?Ae[tt]==="$"||ke(Ae[tt])?tt===Ae.length-1?{schema:De,pathType:"nested"}:Ee(Ae.slice(tt+1),De.schema):Ee(Ae.slice(tt),De.schema):{schema:De,pathType:De.$isSingleNested?"nested":"array"}:{schema:De,pathType:"real"};if(tt===Ae.length&&Ne.nested[he])return{schema:Ne,pathType:"nested"}}return{schema:De||Ne,pathType:"undefined"}}(ue.split("."),this)},ce.prototype._transformDuplicateKeyError=function(ue){if(!this._duplicateKeyErrorMessagesByPath||ue.code!==11e3&&ue.code!==11001)return ue;if(ue.keyPattern!=null){var Ee=ue.keyPattern,Ae=Object.keys(Ee);if(Ae.length!==1)return ue;var Ne=Ae[0];return this._duplicateKeyErrorMessagesByPath.hasOwnProperty(Ne)?new x(this._duplicateKeyErrorMessagesByPath[Ne],{cause:ue}):ue}return ue},ce.prototype._preCompile=function(){this.plugin(ne,{deduplicate:!0})},ce.prototype.toJSONSchema=function(ue){for(var Ee,Ae=(Ee=ue==null?void 0:ue.useBsonType)!==null&&Ee!==void 0&&Ee,Ne=Ae?{required:[],properties:{}}:{type:"object",required:[],properties:{}},De=0,he=Object.keys(this.paths);De<he.length;De++){var tt=he[De],at=this.paths[tt];if(at._presplitPath.indexOf("$*")===-1){var He=Ne;if(at._presplitPath.length>1)for(var ot=0;ot<at._presplitPath.length-1;++ot){var Ue=at._presplitPath[ot];He.properties[Ue]==null&&(He.properties[Ue]=Ae?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}}),He=He.properties[Ue]}var Ze=at._presplitPath[at._presplitPath.length-1],ae=!1;tt==="_id"?(He.required||(He.required=[]),He.required.push("_id"),ae=!0):at.options.required&&typeof at.options.required!="function"&&(He.required||(He.required=[]),He.required.push(Ze),ae=!0),He.properties[Ze]=at.toJSONSchema(ue),at.options.enum&&(He.properties[Ze].enum=ae?at.options.enum:[].concat(function(Le){if(Array.isArray(Le))return m(Le)}(Oe=at.options.enum)||function(Le){if(typeof Symbol<"u"&&Le[Symbol.iterator]!=null||Le["@@iterator"]!=null)return Array.from(Le)}(Oe)||b(Oe)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(),[null]))}}var Oe;return Ne.required.length===0&&delete Ne.required,Ne},d.exports=f=ce,ce.Types=p=a(7953),f.ObjectId=p.ObjectId},7160:(d,f)=>{f.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed"),f.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")},7199:()=>{},7219:(d,f,a)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(y)}function g(y,x){for(var A=0;A<x.length;A++){var R=x[A];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(y,$(R.key),R)}}function $(y){var x=function(A){if(u(A)!="object"||!A)return A;var R=A[Symbol.toPrimitive];if(R!==void 0){var C=R.call(A,"string");if(u(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}(y);return u(x)=="symbol"?x:x+""}function v(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v=function(){return!!y})()}function S(y){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(x){return x.__proto__||Object.getPrototypeOf(x)},S(y)}function E(y,x){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,R){return A.__proto__=R,A},E(y,x)}var h=a(8213),b=a(2900),m=a(4070),p=a(5497),_=function(y){function x(){return function(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}(this,x),function(C,k,D){return k=S(k),function(j,V){if(V&&(u(V)=="object"||typeof V=="function"))return V;if(V!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}(j)}(C,v()?Reflect.construct(k,D||[],S(C).constructor):k.apply(C,D))}(this,x,arguments)}return function(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),k&&E(C,k)}(x,y),A=x,(R=[{key:"assimilateError",value:function(C){var k=C.reason,D=m(k)&&b(k)&&C.message.indexOf("bad auth")===-1&&C.message.indexOf("Authentication failed")===-1;for(var j in D?this.message="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/":p(k)?this.message="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html":this.message=C.message,C)j!=="name"&&(this[j]=C[j]);return this}}])&&g(A.prototype,R),Object.defineProperty(A,"prototype",{writable:!1}),A;var A,R}(h);Object.defineProperty(_.prototype,"name",{value:"MongooseServerSelectionError"}),d.exports=_},7236:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a){if(a==null||f(a)!=="object")return a;if(Array.isArray(a))for(var u=a.length-1;u>=0;--u)a[u]===void 0&&a.splice(u,1);for(var g=0,$=Object.keys(a);g<$.length;g++){var v=$[g];a[v]===void 0&&delete a[v]}return a}},7291:(d,f)=>{function a(g){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},a(g)}var u=Symbol("mongoose#trustedSymbol");f.trustedSymbol=u,f.trusted=function(g){return g==null||a(g)!=="object"||(g[u]=!0),g}},7300:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a){return a==null||f(a)!=="object"||!("$meta"in a)&&!("$slice"in a)}},7312:(d,f,a)=>{var u=f;u.version=a(1636).rE,u.utils=a(1970),u.rand=a(8904),u.curve=a(5803),u.curves=a(6379),u.ec=a(7416),u.eddsa=a(4919)},7352:(d,f,a)=>{function u(L){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},u(L)}var g=Object.getOwnPropertyDescriptors||function(L){for(var F=Object.keys(L),M={},U=0;U<F.length;U++)M[F[U]]=Object.getOwnPropertyDescriptor(L,F[U]);return M},$=/%[sdj%]/g;f.format=function(L){if(!k(L)){for(var F=[],M=0;M<arguments.length;M++)F.push(h(arguments[M]));return F.join(" ")}M=1;for(var U=arguments,Z=U.length,K=String(L).replace($,function(ie){if(ie==="%%")return"%";if(M>=Z)return ie;switch(ie){case"%s":return String(U[M++]);case"%d":return Number(U[M++]);case"%j":try{return JSON.stringify(U[M++])}catch{return"[Circular]"}default:return ie}}),oe=U[M];M<Z;oe=U[++M])R(oe)||!V(oe)?K+=" "+oe:K+=" "+h(oe);return K},f.deprecate=function(L,F){if({}.noDeprecation===!0)return L;var M=!1;return function(){if(!M){if({}.throwDeprecation)throw new Error(F);({}).traceDeprecation?console.trace(F):console.error(F),M=!0}return L.apply(this,arguments)}};var v={},S=/^$/;if({}.NODE_DEBUG){var E={}.NODE_DEBUG;E=E.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),S=new RegExp("^"+E+"$","i")}function h(L,F){var M={seen:[],stylize:m};return arguments.length>=3&&(M.depth=arguments[2]),arguments.length>=4&&(M.colors=arguments[3]),A(F)?M.showHidden=F:F&&f._extend(M,F),D(M.showHidden)&&(M.showHidden=!1),D(M.depth)&&(M.depth=2),D(M.colors)&&(M.colors=!1),D(M.customInspect)&&(M.customInspect=!0),M.colors&&(M.stylize=b),p(M,L,M.depth)}function b(L,F){var M=h.styles[F];return M?"\x1B["+h.colors[M][0]+"m"+L+"\x1B["+h.colors[M][1]+"m":L}function m(L,F){return L}function p(L,F,M){if(L.customInspect&&F&&ee(F.inspect)&&F.inspect!==f.inspect&&(!F.constructor||F.constructor.prototype!==F)){var U=F.inspect(M,L);return k(U)||(U=p(L,U,M)),U}var Z=function(_e,q){if(D(q))return _e.stylize("undefined","undefined");if(k(q)){var re="'"+JSON.stringify(q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return _e.stylize(re,"string")}return C(q)?_e.stylize(""+q,"number"):A(q)?_e.stylize(""+q,"boolean"):R(q)?_e.stylize("null","null"):void 0}(L,F);if(Z)return Z;var K=Object.keys(F),oe=function(_e){var q={};return _e.forEach(function(re,fe){q[re]=!0}),q}(K);if(L.showHidden&&(K=Object.getOwnPropertyNames(F)),W(F)&&(K.indexOf("message")>=0||K.indexOf("description")>=0))return _(F);if(K.length===0){if(ee(F)){var ie=F.name?": "+F.name:"";return L.stylize("[Function"+ie+"]","special")}if(j(F))return L.stylize(RegExp.prototype.toString.call(F),"regexp");if(z(F))return L.stylize(Date.prototype.toString.call(F),"date");if(W(F))return _(F)}var $e,ce="",le=!1,ye=["{","}"];return x(F)&&(le=!0,ye=["[","]"]),ee(F)&&(ce=" [Function"+(F.name?": "+F.name:"")+"]"),j(F)&&(ce=" "+RegExp.prototype.toString.call(F)),z(F)&&(ce=" "+Date.prototype.toUTCString.call(F)),W(F)&&(ce=" "+_(F)),K.length!==0||le&&F.length!=0?M<0?j(F)?L.stylize(RegExp.prototype.toString.call(F),"regexp"):L.stylize("[Object]","special"):(L.seen.push(F),$e=le?function(_e,q,re,fe,we){for(var Re=[],ke=0,ue=q.length;ke<ue;++ke)be(q,String(ke))?Re.push(y(_e,q,re,fe,String(ke),!0)):Re.push("");return we.forEach(function(Ee){Ee.match(/^\d+$/)||Re.push(y(_e,q,re,fe,Ee,!0))}),Re}(L,F,M,oe,K):K.map(function(_e){return y(L,F,M,oe,_e,le)}),L.seen.pop(),function(_e,q,re){return _e.reduce(function(fe,we){return we.indexOf(`
`),fe+we.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?re[0]+(q===""?"":q+`
 `)+" "+_e.join(`,
  `)+" "+re[1]:re[0]+q+" "+_e.join(", ")+" "+re[1]}($e,ce,ye)):ye[0]+ce+ye[1]}function _(L){return"["+Error.prototype.toString.call(L)+"]"}function y(L,F,M,U,Z,K){var oe,ie,$e;if(($e=Object.getOwnPropertyDescriptor(F,Z)||{value:F[Z]}).get?ie=$e.set?L.stylize("[Getter/Setter]","special"):L.stylize("[Getter]","special"):$e.set&&(ie=L.stylize("[Setter]","special")),be(U,Z)||(oe="["+Z+"]"),ie||(L.seen.indexOf($e.value)<0?(ie=R(M)?p(L,$e.value,null):p(L,$e.value,M-1)).indexOf(`
`)>-1&&(ie=K?ie.split(`
`).map(function(ce){return"  "+ce}).join(`
`).slice(2):`
`+ie.split(`
`).map(function(ce){return"   "+ce}).join(`
`)):ie=L.stylize("[Circular]","special")),D(oe)){if(K&&Z.match(/^\d+$/))return ie;(oe=JSON.stringify(""+Z)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.slice(1,-1),oe=L.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=L.stylize(oe,"string"))}return oe+": "+ie}function x(L){return Array.isArray(L)}function A(L){return typeof L=="boolean"}function R(L){return L===null}function C(L){return typeof L=="number"}function k(L){return typeof L=="string"}function D(L){return L===void 0}function j(L){return V(L)&&ne(L)==="[object RegExp]"}function V(L){return u(L)==="object"&&L!==null}function z(L){return V(L)&&ne(L)==="[object Date]"}function W(L){return V(L)&&(ne(L)==="[object Error]"||L instanceof Error)}function ee(L){return typeof L=="function"}function ne(L){return Object.prototype.toString.call(L)}function Q(L){return L<10?"0"+L.toString(10):L.toString(10)}f.debuglog=function(L){if(L=L.toUpperCase(),!v[L])if(S.test(L)){var F={}.pid;v[L]=function(){var M=f.format.apply(f,arguments);console.error("%s %d: %s",L,F,M)}}else v[L]=function(){};return v[L]},f.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},f.types=a(7595),f.isArray=x,f.isBoolean=A,f.isNull=R,f.isNullOrUndefined=function(L){return L==null},f.isNumber=C,f.isString=k,f.isSymbol=function(L){return u(L)==="symbol"},f.isUndefined=D,f.isRegExp=j,f.types.isRegExp=j,f.isObject=V,f.isDate=z,f.types.isDate=z,f.isError=W,f.types.isNativeError=W,f.isFunction=ee,f.isPrimitive=function(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||u(L)==="symbol"||L===void 0},f.isBuffer=a(7944);var se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function be(L,F){return Object.prototype.hasOwnProperty.call(L,F)}f.log=function(){var L,F;console.log("%s - %s",(F=[Q((L=new Date).getHours()),Q(L.getMinutes()),Q(L.getSeconds())].join(":"),[L.getDate(),se[L.getMonth()],F].join(" ")),f.format.apply(f,arguments))},f.inherits=a(1679),f._extend=function(L,F){if(!F||!V(F))return L;for(var M=Object.keys(F),U=M.length;U--;)L[M[U]]=F[M[U]];return L};var H=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function P(L,F){if(!L){var M=new Error("Promise was rejected with a falsy value");M.reason=L,L=M}return F(L)}f.promisify=function(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');if(H&&L[H]){var F;if(typeof(F=L[H])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(F,H,{value:F,enumerable:!1,writable:!1,configurable:!0}),F}function F(){for(var M,U,Z=new Promise(function(ie,$e){M=ie,U=$e}),K=[],oe=0;oe<arguments.length;oe++)K.push(arguments[oe]);K.push(function(ie,$e){ie?U(ie):M($e)});try{L.apply(this,K)}catch(ie){U(ie)}return Z}return Object.setPrototypeOf(F,Object.getPrototypeOf(L)),H&&Object.defineProperty(F,H,{value:F,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(F,g(L))},f.promisify.custom=H,f.callbackify=function(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');function F(){for(var M=[],U=0;U<arguments.length;U++)M.push(arguments[U]);var Z=M.pop();if(typeof Z!="function")throw new TypeError("The last argument must be of type Function");var K=this,oe=function(){return Z.apply(K,arguments)};L.apply(this,M).then(function(ie){({env:{}}).nextTick(oe.bind(null,null,ie))},function(ie){({env:{}}).nextTick(P.bind(null,ie,oe))})}return Object.setPrototypeOf(F,Object.getPrototypeOf(L)),Object.defineProperties(F,g(L)),F}},7416:(d,f,a)=>{function u(_){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u(_)}var g=a(7799),$=a(6934),v=a(1970),S=a(6379),E=a(8904),h=v.assert,b=a(3643),m=a(3686);function p(_){if(!(this instanceof p))return new p(_);typeof _=="string"&&(h(Object.prototype.hasOwnProperty.call(S,_),"Unknown curve "+_),_=S[_]),_ instanceof S.PresetCurve&&(_={curve:_}),this.curve=_.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=_.curve.g,this.g.precompute(_.curve.n.bitLength()+1),this.hash=_.hash||_.curve.hash}d.exports=p,p.prototype.keyPair=function(_){return new b(this,_)},p.prototype.keyFromPrivate=function(_,y){return b.fromPrivate(this,_,y)},p.prototype.keyFromPublic=function(_,y){return b.fromPublic(this,_,y)},p.prototype.genKeyPair=function(_){_||(_={});for(var y=new $({hash:this.hash,pers:_.pers,persEnc:_.persEnc||"utf8",entropy:_.entropy||E(this.hash.hmacStrength),entropyEnc:_.entropy&&_.entropyEnc||"utf8",nonce:this.n.toArray()}),x=this.n.byteLength(),A=this.n.sub(new g(2));;){var R=new g(y.generate(x));if(!(R.cmp(A)>0))return R.iaddn(1),this.keyFromPrivate(R)}},p.prototype._truncateToN=function(_,y,x){var A;if(g.isBN(_)||typeof _=="number")A=(_=new g(_,16)).byteLength();else if(u(_)==="object")A=_.length,_=new g(_,16);else{var R=_.toString();A=R.length+1>>>1,_=new g(R,16)}typeof x!="number"&&(x=8*A);var C=x-this.n.bitLength();return C>0&&(_=_.ushrn(C)),!y&&_.cmp(this.n)>=0?_.sub(this.n):_},p.prototype.sign=function(_,y,x,A){if(u(x)==="object"&&(A=x,x=null),A||(A={}),typeof _!="string"&&typeof _!="number"&&!g.isBN(_)){h(u(_)==="object"&&_&&typeof _.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),h(_.length>>>0===_.length);for(var R=0;R<_.length;R++)h((255&_[R])===_[R])}y=this.keyFromPrivate(y,x),_=this._truncateToN(_,!1,A.msgBitLength),h(!_.isNeg(),"Can not sign a negative message");var C=this.n.byteLength(),k=y.getPrivate().toArray("be",C),D=_.toArray("be",C);h(new g(D).eq(_),"Can not sign message");for(var j=new $({hash:this.hash,entropy:k,nonce:D,pers:A.pers,persEnc:A.persEnc||"utf8"}),V=this.n.sub(new g(1)),z=0;;z++){var W=A.k?A.k(z):new g(j.generate(this.n.byteLength()));if(!((W=this._truncateToN(W,!0)).cmpn(1)<=0||W.cmp(V)>=0)){var ee=this.g.mul(W);if(!ee.isInfinity()){var ne=ee.getX(),Q=ne.umod(this.n);if(Q.cmpn(0)!==0){var se=W.invm(this.n).mul(Q.mul(y.getPrivate()).iadd(_));if((se=se.umod(this.n)).cmpn(0)!==0){var be=(ee.getY().isOdd()?1:0)|(ne.cmp(Q)!==0?2:0);return A.canonical&&se.cmp(this.nh)>0&&(se=this.n.sub(se),be^=1),new m({r:Q,s:se,recoveryParam:be})}}}}}},p.prototype.verify=function(_,y,x,A,R){R||(R={}),_=this._truncateToN(_,!1,R.msgBitLength),x=this.keyFromPublic(x,A);var C=(y=new m(y,"hex")).r,k=y.s;if(C.cmpn(1)<0||C.cmp(this.n)>=0||k.cmpn(1)<0||k.cmp(this.n)>=0)return!1;var D,j=k.invm(this.n),V=j.mul(_).umod(this.n),z=j.mul(C).umod(this.n);return this.curve._maxwellTrick?!(D=this.g.jmulAdd(V,x.getPublic(),z)).isInfinity()&&D.eqXToP(C):!(D=this.g.mulAdd(V,x.getPublic(),z)).isInfinity()&&D.getX().umod(this.n).cmp(C)===0},p.prototype.recoverPubKey=function(_,y,x,A){h((3&x)===x,"The recovery param is more than two bits"),y=new m(y,A);var R=this.n,C=new g(_),k=y.r,D=y.s,j=1&x,V=x>>1;if(k.cmp(this.curve.p.umod(this.curve.n))>=0&&V)throw new Error("Unable to find sencond key candinate");k=V?this.curve.pointFromX(k.add(this.curve.n),j):this.curve.pointFromX(k,j);var z=y.r.invm(R),W=R.sub(C).mul(z).umod(R),ee=D.mul(z).umod(R);return this.g.mulAdd(W,k,ee)},p.prototype.getKeyRecoveryParam=function(_,y,x,A){if((y=new m(y,A)).recoveryParam!==null)return y.recoveryParam;for(var R=0;R<4;R++){var C;try{C=this.recoverPubKey(_,y,R)}catch{continue}if(C.eq(x))return R}throw new Error("Unable to find valid recovery factor")}},7425:(d,f,a)=>{var u=a(2696);d.exports=function(g,$){if(g==null||g.discriminators==null)return null;for(var v=0,S=Object.keys(g.discriminators);v<S.length;v++){var E=S[v],h=g.discriminators[E];if(h.discriminatorMapping!=null&&u(h.discriminatorMapping.value,$))return h}return null}},7430:(d,f,a)=>{var u=a(5832).Buffer;function g(h){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},g(h)}var $=a(3633).Binary,v=a(3305),S=a(2497);a(3672),a(7352);function E(h){return h&&g(h)==="object"&&!(h instanceof Date)&&!v(h,"ObjectId")&&(!Array.isArray(h)||h.length!==0)&&!(h instanceof u)&&!v(h,"Decimal128")&&!(h instanceof $)}f.B=function h(b,m,p,_){var y,x=(y=b&&S(b)&&!u.isBuffer(b)?Object.keys(b.toObject({transform:!1,virtuals:!1})||{}):Object.keys(b||{})).length,A={};m=m?m+".":"";for(var R=0;R<x;++R){var C=y[R],k=b[C];A[m+C]=k;var D=_&&_.path&&_.path(m+C),j=_&&_.nested&&_.nested[m+C];if(!D||D.instance!=="Mixed"){if(E(k)){if(p&&p.skipArrays&&Array.isArray(k))continue;var V=h(k,m+C,p,_);for(var z in V)A[z]=V[z];Array.isArray(k)&&(A[m+C]=k)}if(j)for(var W=0,ee=Object.keys(_.paths);W<ee.length;W++){var ne=ee[W];ne.startsWith(m+C+".")&&!A.hasOwnProperty(ne)&&(A[ne]=void 0)}}}return A}},7494:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!h})()}function $(h){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(h)}function v(h,b){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},v(h,b)}var S=function(h){function b(){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,b),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,b,arguments)}return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),_&&v(p,_)}(b,h),m=b,Object.defineProperty(m,"prototype",{writable:!1}),m;var m}(a(8879)),E=a(5761);Object.defineProperty(S.prototype,"_id",E),d.exports=S},7557:(d,f,a)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(y)}function g(y,x,A){return(x=function(R){var C=function(k){if(u(k)!="object"||!k)return k;var D=k[Symbol.toPrimitive];if(D!==void 0){var j=D.call(k,"string");if(u(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)}(R);return u(C)=="symbol"?C:C+""}(x))in y?Object.defineProperty(y,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[x]=A,y}var $=a(2400),v=a(8920),S=a(7930).arrayAtomicsSymbol,E=a(7930).arrayAtomicsBackupSymbol,h=a(7930).arrayParentSymbol,b=a(7930).arrayPathSymbol,m=a(7930).arraySchemaSymbol,p=Array.prototype.push,_=/^\d+$/;d.exports=function(y,x,A,R){var C;if(Array.isArray(y)){var k=y.length;if(k===0)C=new Array;else if(k===1)(C=new Array(1))[0]=y[0];else if(k<1e4)C=new Array,p.apply(C,y);else{C=new Array;for(var D=0;D<k;++D)p.call(C,y[D])}}else C=[];var j=g(g(g(g(g(g(g(g({},S,{}),E,void 0),b,x),m,R),h,void 0),"isMongooseArray",!0),"isMongooseArrayProxy",!0),"__array",C);y&&y[S]!=null&&(j[S]=y[S]),A!=null&&A instanceof $&&(j[h]=A,j[m]=R||A.schema.path(x));var V=new Proxy(C,{get:function(z,W){return j.hasOwnProperty(W)?j[W]:v.hasOwnProperty(W)?v[W]:R&&R.virtuals&&R.virtuals.hasOwnProperty(W)?R.virtuals[W].applyGetters(void 0,z):typeof W=="string"&&_.test(W)&&(R==null?void 0:R.$embeddedSchemaType)!=null?R.$embeddedSchemaType.applyGetters(C[W],A):C[W]},set:function(z,W,ee){return typeof W=="string"&&_.test(W)?v.set.call(V,W,ee,!1):j.hasOwnProperty(W)?j[W]=ee:R&&R.virtuals&&R.virtuals.hasOwnProperty(W)?R.virtuals[W].applySetters(ee,z):C[W]=ee,!0}});return V}},7591:d=>{var f=null;d.exports.get=function(){return f},d.exports.set=function(a){f=a}},7595:(d,f,a)=>{function u(M){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},u(M)}var g=a(5899),$=a(1905),v=a(9834),S=a(7911);function E(M){return M.call.bind(M)}var h=typeof BigInt<"u",b=typeof Symbol<"u",m=E(Object.prototype.toString),p=E(Number.prototype.valueOf),_=E(String.prototype.valueOf),y=E(Boolean.prototype.valueOf);if(h)var x=E(BigInt.prototype.valueOf);if(b)var A=E(Symbol.prototype.valueOf);function R(M,U){if(u(M)!=="object")return!1;try{return U(M),!0}catch{return!1}}function C(M){return m(M)==="[object Map]"}function k(M){return m(M)==="[object Set]"}function D(M){return m(M)==="[object WeakMap]"}function j(M){return m(M)==="[object WeakSet]"}function V(M){return m(M)==="[object ArrayBuffer]"}function z(M){return typeof ArrayBuffer<"u"&&(V.working?V(M):M instanceof ArrayBuffer)}function W(M){return m(M)==="[object DataView]"}function ee(M){return typeof DataView<"u"&&(W.working?W(M):M instanceof DataView)}f.isArgumentsObject=g,f.isGeneratorFunction=$,f.isTypedArray=S,f.isPromise=function(M){return typeof Promise<"u"&&M instanceof Promise||M!==null&&u(M)==="object"&&typeof M.then=="function"&&typeof M.catch=="function"},f.isArrayBufferView=function(M){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(M):S(M)||ee(M)},f.isUint8Array=function(M){return v(M)==="Uint8Array"},f.isUint8ClampedArray=function(M){return v(M)==="Uint8ClampedArray"},f.isUint16Array=function(M){return v(M)==="Uint16Array"},f.isUint32Array=function(M){return v(M)==="Uint32Array"},f.isInt8Array=function(M){return v(M)==="Int8Array"},f.isInt16Array=function(M){return v(M)==="Int16Array"},f.isInt32Array=function(M){return v(M)==="Int32Array"},f.isFloat32Array=function(M){return v(M)==="Float32Array"},f.isFloat64Array=function(M){return v(M)==="Float64Array"},f.isBigInt64Array=function(M){return v(M)==="BigInt64Array"},f.isBigUint64Array=function(M){return v(M)==="BigUint64Array"},C.working=typeof Map<"u"&&C(new Map),f.isMap=function(M){return typeof Map<"u"&&(C.working?C(M):M instanceof Map)},k.working=typeof Set<"u"&&k(new Set),f.isSet=function(M){return typeof Set<"u"&&(k.working?k(M):M instanceof Set)},D.working=typeof WeakMap<"u"&&D(new WeakMap),f.isWeakMap=function(M){return typeof WeakMap<"u"&&(D.working?D(M):M instanceof WeakMap)},j.working=typeof WeakSet<"u"&&j(new WeakSet),f.isWeakSet=function(M){return j(M)},V.working=typeof ArrayBuffer<"u"&&V(new ArrayBuffer),f.isArrayBuffer=z,W.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&W(new DataView(new ArrayBuffer(1),0,1)),f.isDataView=ee;var ne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Q(M){return m(M)==="[object SharedArrayBuffer]"}function se(M){return ne!==void 0&&(Q.working===void 0&&(Q.working=Q(new ne)),Q.working?Q(M):M instanceof ne)}function be(M){return R(M,p)}function H(M){return R(M,_)}function P(M){return R(M,y)}function L(M){return h&&R(M,x)}function F(M){return b&&R(M,A)}f.isSharedArrayBuffer=se,f.isAsyncFunction=function(M){return m(M)==="[object AsyncFunction]"},f.isMapIterator=function(M){return m(M)==="[object Map Iterator]"},f.isSetIterator=function(M){return m(M)==="[object Set Iterator]"},f.isGeneratorObject=function(M){return m(M)==="[object Generator]"},f.isWebAssemblyCompiledModule=function(M){return m(M)==="[object WebAssembly.Module]"},f.isNumberObject=be,f.isStringObject=H,f.isBooleanObject=P,f.isBigIntObject=L,f.isSymbolObject=F,f.isBoxedPrimitive=function(M){return be(M)||H(M)||P(M)||L(M)||F(M)},f.isAnyArrayBuffer=function(M){return typeof Uint8Array<"u"&&(z(M)||se(M))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(M){Object.defineProperty(f,M,{enumerable:!1,value:function(){throw new Error(M+" is not supported in userland")}})})},7695:(d,f,a)=>{var u=a(4685),g=a(3528);function $(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}f.BlockHash=$,$.prototype.update=function(v,S){if(v=u.toArray(v,S),this.pending?this.pending=this.pending.concat(v):this.pending=v,this.pendingTotal+=v.length,this.pending.length>=this._delta8){var E=(v=this.pending).length%this._delta8;this.pending=v.slice(v.length-E,v.length),this.pending.length===0&&(this.pending=null),v=u.join32(v,0,v.length-E,this.endian);for(var h=0;h<v.length;h+=this._delta32)this._update(v,h,h+this._delta32)}return this},$.prototype.digest=function(v){return this.update(this._pad()),g(this.pending===null),this._digest(v)},$.prototype._pad=function(){var v=this.pendingTotal,S=this._delta8,E=S-(v+this.padLength)%S,h=new Array(E+this.padLength);h[0]=128;for(var b=1;b<E;b++)h[b]=0;if(v<<=3,this.endian==="big"){for(var m=8;m<this.padLength;m++)h[b++]=0;h[b++]=0,h[b++]=0,h[b++]=0,h[b++]=0,h[b++]=v>>>24&255,h[b++]=v>>>16&255,h[b++]=v>>>8&255,h[b++]=255&v}else for(h[b++]=255&v,h[b++]=v>>>8&255,h[b++]=v>>>16&255,h[b++]=v>>>24&255,h[b++]=0,h[b++]=0,h[b++]=0,h[b++]=0,m=8;m<this.padLength;m++)h[b++]=0;return h}},7760:(d,f,a)=>{function u(U,Z){var K=Object.keys(U);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(U);Z&&(oe=oe.filter(function(ie){return Object.getOwnPropertyDescriptor(U,ie).enumerable})),K.push.apply(K,oe)}return K}function g(U){for(var Z=1;Z<arguments.length;Z++){var K=arguments[Z]!=null?arguments[Z]:{};Z%2?u(Object(K),!0).forEach(function(oe){$(U,oe,K[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(K)):u(Object(K)).forEach(function(oe){Object.defineProperty(U,oe,Object.getOwnPropertyDescriptor(K,oe))})}return U}function $(U,Z,K){return(Z=function(oe){var ie=function($e){if(S($e)!="object"||!$e)return $e;var ce=$e[Symbol.toPrimitive];if(ce!==void 0){var le=ce.call($e,"string");if(S(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($e)}(oe);return S(ie)=="symbol"?ie:ie+""}(Z))in U?Object.defineProperty(U,Z,{value:K,enumerable:!0,configurable:!0,writable:!0}):U[Z]=K,U}function v(U,Z){(Z==null||Z>U.length)&&(Z=U.length);for(var K=0,oe=Array(Z);K<Z;K++)oe[K]=U[K];return oe}function S(U){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},S(U)}var E,h,b=a(8499),m=a(2555),p=a(8213),_=a(4592),y=a(6426),x=y.CastError,A=a(5022),R=a(2069),C=a(622),k=a(2073),D=a(7982),j=a(4450),V=a(5879),z=a(5110),W=a(7352),ee=a(8768),ne=a(5558).G,Q=a(4327),se=a(9604),be=a(8677),H=Symbol("mongoose#isNestedArray"),P=Object.freeze({});function L(U,Z,K,oe){h||(h=a(9600).Embedded);var ie,$e,ce="type";if(oe&&oe.typeKey&&(ce=oe.typeKey),this.schemaOptions=oe,Z){var le={};ee.isPOJO(Z)&&(Z[ce]?(delete(le=j(Z))[ce],Z=Z[ce]):Z=A),K!=null&&K.ref!=null&&le.ref==null&&(le.ref=K.ref),Z===Object&&(Z=A);var ye=typeof Z=="string"?Z:ee.getFunctionName(Z),_e=a(7953),q=_e.hasOwnProperty(ye)?_e[ye]:Z;if(this.casterConstructor=q,this.casterConstructor instanceof L&&(this.casterConstructor[H]=!0),typeof q!="function"||q.$isArraySubdocument||q.$isSchemaMap)this.caster=q,this.caster instanceof h||(this.caster.path=U);else{var re=this.caster instanceof h?null:U;this.caster=new q(re,le)}this.$embeddedSchemaType=this.caster}if(this.$isMongooseArray=!0,y.call(this,U,K,"Array"),this.defaultValue!=null&&(ie=this.defaultValue,$e=typeof ie=="function"),!("defaultValue"in this)||this.defaultValue!=null){var fe=function(){return $e?ie.call(this):ie!=null?[].concat(ie):[]};fe.$runBeforeSetters=!$e,this.default(fe)}}L.schemaName="Array",L.options={castNonArrays:!0},L.defaultOptions={},L.set=y.set,L.setters=[],L.get=y.get,L.prototype=Object.create(y.prototype),L.prototype.constructor=L,L.prototype.OptionsConstructor=_,L._checkRequired=y.prototype.checkRequired,L.checkRequired=y.checkRequired,L.prototype.virtuals=null,L.prototype.checkRequired=function(U,Z){return S(U)==="object"&&y._isRef(this,U,Z,!0)?!!U:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():L.checkRequired())(U)},L.prototype.enum=function(){for(var U=this;;){var Z=U&&U.caster&&U.caster.instance;if(Z!=="Array"){if(Z!=="String"&&Z!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+Z);break}U=U.caster}var K=arguments;return!Array.isArray(arguments)&&ee.isObject(arguments)&&(K=ee.object.vals(K)),U.caster.enum.apply(U.caster,K),this},L.prototype.applyGetters=function(U,Z){return Z!=null&&Z.$__!=null&&Z.$populated(this.path)?U:y.prototype.applyGetters.call(this,U,Z)},L.prototype._applySetters=function(U,Z,K,oe){if(this.casterConstructor.$isMongooseArray&&L.options.castNonArrays&&!this[H]){for(var ie=0,$e=this;$e!=null&&$e.$isMongooseArray&&!$e.$isMongooseDocumentArray;)++ie,$e=$e.casterConstructor;if(U!=null&&U.length!==0){var ce=k(U);if(ce.min===ce.max&&ce.max<ie&&ce.containsNonArrayItem)for(var le=ce.max;le<ie;++le)U=[U]}}return y.prototype._applySetters.call(this,U,Z,K,oe)},L.prototype.cast=function(U,Z,K,oe,ie){var $e,ce;if(E||(E=a(9600).Array),Array.isArray(U)){if(!U.length&&Z){var le=Z.schema.indexedPaths(),ye=this.path;for($e=0,ce=le.length;$e<ce;++$e){var _e=le[$e][0][ye];if(_e==="2dsphere"||_e==="2d")return}var q=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(q!=null){for($e=0,ce=le.length;$e<ce;++$e)if(le[$e][0][q]==="2dsphere")return}}ie=ie||P;var re=ee.isMongooseArray(U)?U.__array:U,fe=ie.path||this.path;if(ie.arrayPathIndex!=null&&(fe+="."+ie.arrayPathIndex),re=(U=E(re,fe,Z,this)).__array,K&&Z!=null&&Z.$__!=null&&Z.$populated(this.path))return U;var we=this.caster,Re=we.$isMongooseArray;if(we&&this.casterConstructor!==A)try{var ke=re.length;for($e=0;$e<ke;$e++){var ue={};Re&&(ie.arrayPath!=null||we._arrayParentPath!=null)&&(ue.arrayPathIndex=$e),ie.hydratedPopulatedDocs&&(ue.hydratedPopulatedDocs=ie.hydratedPopulatedDocs),re[$e]=we.applySetters(re[$e],Z,K,void 0,ue)}}catch(Ae){throw new x("["+Ae.kind+"]",W.inspect(U),this.path+"."+$e,Ae,this)}return U}var Ee=this.options.castNonArrays!=null?this.options.castNonArrays:L.options.castNonArrays;if(K||Ee)return Z&&K&&Z.markModified(this.path),this.cast([U],Z,K);throw new x("Array",W.inspect(U),this.path,null,this)},L.prototype._castForPopulate=function(U,Z){if(E||(E=a(9600).Array),Array.isArray(U)){var K,oe=U.__array?U.__array:U,ie=oe.length,$e=this.caster;if($e&&this.casterConstructor!==A)try{for(K=0;K<ie;K++){var ce={};$e.$isMongooseArray&&$e._arrayParentPath!=null&&(ce.arrayPathIndex=K),oe[K]=$e.cast(oe[K],Z,!1,void 0,ce)}}catch(le){throw new x("["+le.kind+"]",W.inspect(U),this.path+"."+K,le,this)}return U}throw new x("Array",W.inspect(U),this.path,null,this)},L.prototype.$toObject=L.prototype.toObject,L.prototype.discriminator=function(){for(var U,Z=this;Z.$isMongooseArray&&!Z.$isMongooseDocumentArray;)if((Z=Z.casterConstructor)==null||typeof Z=="function")throw new p("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return(U=Z).discriminator.apply(U,arguments)},L.prototype.clone=function(){var U=Object.assign({},this.options),Z=new this.constructor(this.path,this.caster,U,this.schemaOptions);return Z.validators=this.validators.slice(),this.requiredValidator!==void 0&&(Z.requiredValidator=this.requiredValidator),Z},L.prototype._castForQuery=function(U,Z){var K=this,oe=this.casterConstructor;if(U&&oe.discriminators&&oe.schema&&oe.schema.options&&oe.schema.options.discriminatorKey)if(typeof U[oe.schema.options.discriminatorKey]=="string"&&oe.discriminators[U[oe.schema.options.discriminatorKey]])oe=oe.discriminators[U[oe.schema.options.discriminatorKey]];else{var ie=be(oe.discriminators,U[oe.schema.options.discriminatorKey]);ie&&(oe=ie)}var $e=this.casterConstructor.prototype,ce=$e&&$e.castForQuery,le=$e&&$e.cast,ye=oe.castForQuery,_e=this.caster;return Array.isArray(U)?(this.setters.reverse().forEach(function(q){U=q.call(K,U,K)}),U=U.map(function(q){return ee.isObject(q)&&q.$elemMatch?q:ce?q=ce.call(_e,null,q,Z):le?q=le.call(_e,q):ye?q=ye.call(_e,null,q,Z):q!=null?q=new oe(q):q})):ce?U=ce.call(_e,null,U,Z):le?U=le.call(_e,U):ye?U=ye.call(_e,null,U,Z):U!=null&&(U=new oe(U)),U},L.prototype.castForQuery=function(U,Z,K){var oe;if(U!=null){if(!(oe=this.$conditionalHandlers[U]))throw new Error("Can't use "+U+" with Array.");return oe.call(this,Z,K)}return this._castForQuery(Z,K)},L.prototype.virtual=function(U,Z){if(U instanceof C||V(U)==="VirtualType")return this.virtual(U.path,U.options);if(Z=new R(Z),ee.hasUserDefinedProperty(Z,["ref","refPath"]))throw new p("Cannot set populate virtual as a property of an array");var K=new C(Z,U);return this.virtuals===null&&(this.virtuals={}),this.virtuals[U]=K,K};var F=L.prototype.$conditionalHandlers={};function M(U){return function(Z,K){if(!Array.isArray(Z))throw new TypeError("conditional "+U+" requires an array");var oe,ie=[],$e=function(ye,_e){var q=typeof Symbol<"u"&&ye[Symbol.iterator]||ye["@@iterator"];if(!q){if(Array.isArray(ye)||(q=function(ue,Ee){if(ue){if(typeof ue=="string")return v(ue,Ee);var Ae={}.toString.call(ue).slice(8,-1);return Ae==="Object"&&ue.constructor&&(Ae=ue.constructor.name),Ae==="Map"||Ae==="Set"?Array.from(ue):Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae)?v(ue,Ee):void 0}}(ye))||_e){q&&(ye=q);var re=0,fe=function(){};return{s:fe,n:function(){return re>=ye.length?{done:!0}:{done:!1,value:ye[re++]}},e:function(ue){throw ue},f:fe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var we,Re=!0,ke=!1;return{s:function(){q=q.call(ye)},n:function(){var ue=q.next();return Re=ue.done,ue},e:function(ue){ke=!0,we=ue},f:function(){try{Re||q.return==null||q.return()}finally{if(ke)throw we}}}}(Z);try{for($e.s();!(oe=$e.n()).done;){var ce,le=oe.value;ie.push(D((ce=this.casterConstructor.schema)!==null&&ce!==void 0?ce:K.schema,le,null,this&&this.$$context))}}catch(ye){$e.e(ye)}finally{$e.f()}return ie}}F.$all=function(U,Z){var K=this;return Array.isArray(U)||(U=[U]),U=U.map(function(oe){if(!ee.isObject(oe))return oe;if(oe.$elemMatch!=null)return{$elemMatch:D(K.casterConstructor.schema,oe.$elemMatch,null,K&&K.$$context)};var ie={};return ie[K.path]=oe,D(K.casterConstructor.schema,ie,null,K&&K.$$context)[K.path]},this),this.castForQuery(null,U,Z)},F.$options=String,F.$elemMatch=function(U,Z){for(var K=Object.keys(U),oe=K.length,ie=0;ie<oe;++ie){var $e=K[ie],ce=U[$e];z($e)&&ce!=null&&(U[$e]=this.castForQuery($e,ce,Z))}return U},F.$geoIntersects=se.cast$geoIntersects,F.$or=M("$or"),F.$and=M("$and"),F.$nor=M("$nor"),F.$near=F.$nearSphere=se.cast$near,F.$within=F.$geoWithin=se.cast$within,F.$size=F.$minDistance=F.$maxDistance=ne,F.$exists=b,F.$type=m,F.$eq=F.$gt=F.$gte=F.$lt=F.$lte=F.$not=F.$regex=F.$ne=L.prototype._castForQuery,F.$nin=y.prototype.$conditionalHandlers.$nin,F.$in=y.prototype.$conditionalHandlers.$in,L.prototype.toJSONSchema=function(U){var Z=this.getEmbeddedSchemaType(),K=this.options.required&&typeof this.options.required!="function";return g(g({},Q("array","array",U==null?void 0:U.useBsonType,K)),{},{items:Z.toJSONSchema(U)})},d.exports=L},7768:(d,f,a)=>{var u=a(2402);d.exports=function(g){return g==null?g:g===""?null:(typeof g!="string"&&typeof g!="boolean"||(g=Number(g)),u.ok(!isNaN(g)),g instanceof Number?g.valueOf():typeof g=="number"?g:Array.isArray(g)||typeof g.valueOf!="function"?g.toString&&!Array.isArray(g)&&g.toString()==Number(g)?Number(g):void u.ok(!1):Number(g.valueOf()))}},7775:(d,f,a)=>{d.exports=g;var u=a(3550).EventEmitter;function g(){u.call(this)}a(1679)(g,u),g.Readable=a(8134),g.Writable=a(4186),g.Duplex=a(4560),g.Transform=a(8784),g.PassThrough=a(1026),g.finished=a(8500),g.pipeline=a(1144),g.Stream=g,g.prototype.pipe=function($,v){var S=this;function E(x){$.writable&&$.write(x)===!1&&S.pause&&S.pause()}function h(){S.readable&&S.resume&&S.resume()}S.on("data",E),$.on("drain",h),$._isStdio||v&&v.end===!1||(S.on("end",m),S.on("close",p));var b=!1;function m(){b||(b=!0,$.end())}function p(){b||(b=!0,typeof $.destroy=="function"&&$.destroy())}function _(x){if(y(),u.listenerCount(this,"error")===0)throw x}function y(){S.removeListener("data",E),$.removeListener("drain",h),S.removeListener("end",m),S.removeListener("close",p),S.removeListener("error",_),$.removeListener("error",_),S.removeListener("end",y),S.removeListener("close",y),$.removeListener("close",y)}return S.on("error",_),$.on("error",_),S.on("end",y),S.on("close",y),$.on("close",y),$.emit("pipe",S),$}},7790:()=>{},7797:(d,f,a)=>{var u=a(5833),g=a(9732).Buffer;function $(v){var S=g.allocUnsafe(4);return S.writeUInt32BE(v,0),S}d.exports=function(v,S){for(var E,h=g.alloc(0),b=0;h.length<S;)E=$(b++),h=g.concat([h,u("sha1").update(v).update(E).digest()]);return h.slice(0,S)}},7799:function(d,f,a){function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},u(g)}(function(g,$){function v(H,P){if(!H)throw new Error(P||"Assertion failed")}function S(H,P){H.super_=P;var L=function(){};L.prototype=P.prototype,H.prototype=new L,H.prototype.constructor=H}function E(H,P,L){if(E.isBN(H))return H;this.negative=0,this.words=null,this.length=0,this.red=null,H!==null&&(P!=="le"&&P!=="be"||(L=P,P=10),this._init(H||0,P||10,L||"be"))}var h;u(g)==="object"?g.exports=E:$.BN=E,E.BN=E,E.wordSize=26;try{h=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:a(7790).Buffer}catch{}function b(H,P){var L=H.charCodeAt(P);return L>=48&&L<=57?L-48:L>=65&&L<=70?L-55:L>=97&&L<=102?L-87:void v(!1,"Invalid character in "+H)}function m(H,P,L){var F=b(H,L);return L-1>=P&&(F|=b(H,L-1)<<4),F}function p(H,P,L,F){for(var M=0,U=0,Z=Math.min(H.length,L),K=P;K<Z;K++){var oe=H.charCodeAt(K)-48;M*=F,U=oe>=49?oe-49+10:oe>=17?oe-17+10:oe,v(oe>=0&&U<F,"Invalid character"),M+=U}return M}function _(H,P){H.words=P.words,H.length=P.length,H.negative=P.negative,H.red=P.red}if(E.isBN=function(H){return H instanceof E||H!==null&&u(H)==="object"&&H.constructor.wordSize===E.wordSize&&Array.isArray(H.words)},E.max=function(H,P){return H.cmp(P)>0?H:P},E.min=function(H,P){return H.cmp(P)<0?H:P},E.prototype._init=function(H,P,L){if(typeof H=="number")return this._initNumber(H,P,L);if(u(H)==="object")return this._initArray(H,P,L);P==="hex"&&(P=16),v(P===(0|P)&&P>=2&&P<=36);var F=0;(H=H.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<H.length&&(P===16?this._parseHex(H,F,L):(this._parseBase(H,P,F),L==="le"&&this._initArray(this.toArray(),P,L)))},E.prototype._initNumber=function(H,P,L){H<0&&(this.negative=1,H=-H),H<67108864?(this.words=[67108863&H],this.length=1):H<4503599627370496?(this.words=[67108863&H,H/67108864&67108863],this.length=2):(v(H<9007199254740992),this.words=[67108863&H,H/67108864&67108863,1],this.length=3),L==="le"&&this._initArray(this.toArray(),P,L)},E.prototype._initArray=function(H,P,L){if(v(typeof H.length=="number"),H.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(H.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var M,U,Z=0;if(L==="be")for(F=H.length-1,M=0;F>=0;F-=3)U=H[F]|H[F-1]<<8|H[F-2]<<16,this.words[M]|=U<<Z&67108863,this.words[M+1]=U>>>26-Z&67108863,(Z+=24)>=26&&(Z-=26,M++);else if(L==="le")for(F=0,M=0;F<H.length;F+=3)U=H[F]|H[F+1]<<8|H[F+2]<<16,this.words[M]|=U<<Z&67108863,this.words[M+1]=U>>>26-Z&67108863,(Z+=24)>=26&&(Z-=26,M++);return this._strip()},E.prototype._parseHex=function(H,P,L){this.length=Math.ceil((H.length-P)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var M,U=0,Z=0;if(L==="be")for(F=H.length-1;F>=P;F-=2)M=m(H,P,F)<<U,this.words[Z]|=67108863&M,U>=18?(U-=18,Z+=1,this.words[Z]|=M>>>26):U+=8;else for(F=(H.length-P)%2==0?P+1:P;F<H.length;F+=2)M=m(H,P,F)<<U,this.words[Z]|=67108863&M,U>=18?(U-=18,Z+=1,this.words[Z]|=M>>>26):U+=8;this._strip()},E.prototype._parseBase=function(H,P,L){this.words=[0],this.length=1;for(var F=0,M=1;M<=67108863;M*=P)F++;F--,M=M/P|0;for(var U=H.length-L,Z=U%F,K=Math.min(U,U-Z)+L,oe=0,ie=L;ie<K;ie+=F)oe=p(H,ie,ie+F,P),this.imuln(M),this.words[0]+oe<67108864?this.words[0]+=oe:this._iaddn(oe);if(Z!==0){var $e=1;for(oe=p(H,ie,H.length,P),ie=0;ie<Z;ie++)$e*=P;this.imuln($e),this.words[0]+oe<67108864?this.words[0]+=oe:this._iaddn(oe)}this._strip()},E.prototype.copy=function(H){H.words=new Array(this.length);for(var P=0;P<this.length;P++)H.words[P]=this.words[P];H.length=this.length,H.negative=this.negative,H.red=this.red},E.prototype._move=function(H){_(H,this)},E.prototype.clone=function(){var H=new E(null);return this.copy(H),H},E.prototype._expand=function(H){for(;this.length<H;)this.words[this.length++]=0;return this},E.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},E.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{E.prototype[Symbol.for("nodejs.util.inspect.custom")]=y}catch{E.prototype.inspect=y}else E.prototype.inspect=y;function y(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function C(H,P,L){L.negative=P.negative^H.negative;var F=H.length+P.length|0;L.length=F,F=F-1|0;var M=0|H.words[0],U=0|P.words[0],Z=M*U,K=67108863&Z,oe=Z/67108864|0;L.words[0]=K;for(var ie=1;ie<F;ie++){for(var $e=oe>>>26,ce=67108863&oe,le=Math.min(ie,P.length-1),ye=Math.max(0,ie-H.length+1);ye<=le;ye++){var _e=ie-ye|0;$e+=(Z=(M=0|H.words[_e])*(U=0|P.words[ye])+ce)/67108864|0,ce=67108863&Z}L.words[ie]=0|ce,oe=0|$e}return oe!==0?L.words[ie]=0|oe:L.length--,L._strip()}E.prototype.toString=function(H,P){var L;if(P=0|P||1,(H=H||10)===16||H==="hex"){L="";for(var F=0,M=0,U=0;U<this.length;U++){var Z=this.words[U],K=(16777215&(Z<<F|M)).toString(16);M=Z>>>24-F&16777215,(F+=2)>=26&&(F-=26,U--),L=M!==0||U!==this.length-1?x[6-K.length]+K+L:K+L}for(M!==0&&(L=M.toString(16)+L);L.length%P!=0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}if(H===(0|H)&&H>=2&&H<=36){var oe=A[H],ie=R[H];L="";var $e=this.clone();for($e.negative=0;!$e.isZero();){var ce=$e.modrn(ie).toString(H);L=($e=$e.idivn(ie)).isZero()?ce+L:x[oe-ce.length]+ce+L}for(this.isZero()&&(L="0"+L);L.length%P!=0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}v(!1,"Base should be between 2 and 36")},E.prototype.toNumber=function(){var H=this.words[0];return this.length===2?H+=67108864*this.words[1]:this.length===3&&this.words[2]===1?H+=4503599627370496+67108864*this.words[1]:this.length>2&&v(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-H:H},E.prototype.toJSON=function(){return this.toString(16,2)},h&&(E.prototype.toBuffer=function(H,P){return this.toArrayLike(h,H,P)}),E.prototype.toArray=function(H,P){return this.toArrayLike(Array,H,P)},E.prototype.toArrayLike=function(H,P,L){this._strip();var F=this.byteLength(),M=L||Math.max(1,F);v(F<=M,"byte array longer than desired length"),v(M>0,"Requested array length <= 0");var U=function(Z,K){return Z.allocUnsafe?Z.allocUnsafe(K):new Z(K)}(H,M);return this["_toArrayLike"+(P==="le"?"LE":"BE")](U,F),U},E.prototype._toArrayLikeLE=function(H,P){for(var L=0,F=0,M=0,U=0;M<this.length;M++){var Z=this.words[M]<<U|F;H[L++]=255&Z,L<H.length&&(H[L++]=Z>>8&255),L<H.length&&(H[L++]=Z>>16&255),U===6?(L<H.length&&(H[L++]=Z>>24&255),F=0,U=0):(F=Z>>>24,U+=2)}if(L<H.length)for(H[L++]=F;L<H.length;)H[L++]=0},E.prototype._toArrayLikeBE=function(H,P){for(var L=H.length-1,F=0,M=0,U=0;M<this.length;M++){var Z=this.words[M]<<U|F;H[L--]=255&Z,L>=0&&(H[L--]=Z>>8&255),L>=0&&(H[L--]=Z>>16&255),U===6?(L>=0&&(H[L--]=Z>>24&255),F=0,U=0):(F=Z>>>24,U+=2)}if(L>=0)for(H[L--]=F;L>=0;)H[L--]=0},Math.clz32?E.prototype._countBits=function(H){return 32-Math.clz32(H)}:E.prototype._countBits=function(H){var P=H,L=0;return P>=4096&&(L+=13,P>>>=13),P>=64&&(L+=7,P>>>=7),P>=8&&(L+=4,P>>>=4),P>=2&&(L+=2,P>>>=2),L+P},E.prototype._zeroBits=function(H){if(H===0)return 26;var P=H,L=0;return 8191&P||(L+=13,P>>>=13),127&P||(L+=7,P>>>=7),15&P||(L+=4,P>>>=4),3&P||(L+=2,P>>>=2),1&P||L++,L},E.prototype.bitLength=function(){var H=this.words[this.length-1],P=this._countBits(H);return 26*(this.length-1)+P},E.prototype.zeroBits=function(){if(this.isZero())return 0;for(var H=0,P=0;P<this.length;P++){var L=this._zeroBits(this.words[P]);if(H+=L,L!==26)break}return H},E.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},E.prototype.toTwos=function(H){return this.negative!==0?this.abs().inotn(H).iaddn(1):this.clone()},E.prototype.fromTwos=function(H){return this.testn(H-1)?this.notn(H).iaddn(1).ineg():this.clone()},E.prototype.isNeg=function(){return this.negative!==0},E.prototype.neg=function(){return this.clone().ineg()},E.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},E.prototype.iuor=function(H){for(;this.length<H.length;)this.words[this.length++]=0;for(var P=0;P<H.length;P++)this.words[P]=this.words[P]|H.words[P];return this._strip()},E.prototype.ior=function(H){return v(!(this.negative|H.negative)),this.iuor(H)},E.prototype.or=function(H){return this.length>H.length?this.clone().ior(H):H.clone().ior(this)},E.prototype.uor=function(H){return this.length>H.length?this.clone().iuor(H):H.clone().iuor(this)},E.prototype.iuand=function(H){var P;P=this.length>H.length?H:this;for(var L=0;L<P.length;L++)this.words[L]=this.words[L]&H.words[L];return this.length=P.length,this._strip()},E.prototype.iand=function(H){return v(!(this.negative|H.negative)),this.iuand(H)},E.prototype.and=function(H){return this.length>H.length?this.clone().iand(H):H.clone().iand(this)},E.prototype.uand=function(H){return this.length>H.length?this.clone().iuand(H):H.clone().iuand(this)},E.prototype.iuxor=function(H){var P,L;this.length>H.length?(P=this,L=H):(P=H,L=this);for(var F=0;F<L.length;F++)this.words[F]=P.words[F]^L.words[F];if(this!==P)for(;F<P.length;F++)this.words[F]=P.words[F];return this.length=P.length,this._strip()},E.prototype.ixor=function(H){return v(!(this.negative|H.negative)),this.iuxor(H)},E.prototype.xor=function(H){return this.length>H.length?this.clone().ixor(H):H.clone().ixor(this)},E.prototype.uxor=function(H){return this.length>H.length?this.clone().iuxor(H):H.clone().iuxor(this)},E.prototype.inotn=function(H){v(typeof H=="number"&&H>=0);var P=0|Math.ceil(H/26),L=H%26;this._expand(P),L>0&&P--;for(var F=0;F<P;F++)this.words[F]=67108863&~this.words[F];return L>0&&(this.words[F]=~this.words[F]&67108863>>26-L),this._strip()},E.prototype.notn=function(H){return this.clone().inotn(H)},E.prototype.setn=function(H,P){v(typeof H=="number"&&H>=0);var L=H/26|0,F=H%26;return this._expand(L+1),this.words[L]=P?this.words[L]|1<<F:this.words[L]&~(1<<F),this._strip()},E.prototype.iadd=function(H){var P,L,F;if(this.negative!==0&&H.negative===0)return this.negative=0,P=this.isub(H),this.negative^=1,this._normSign();if(this.negative===0&&H.negative!==0)return H.negative=0,P=this.isub(H),H.negative=1,P._normSign();this.length>H.length?(L=this,F=H):(L=H,F=this);for(var M=0,U=0;U<F.length;U++)P=(0|L.words[U])+(0|F.words[U])+M,this.words[U]=67108863&P,M=P>>>26;for(;M!==0&&U<L.length;U++)P=(0|L.words[U])+M,this.words[U]=67108863&P,M=P>>>26;if(this.length=L.length,M!==0)this.words[this.length]=M,this.length++;else if(L!==this)for(;U<L.length;U++)this.words[U]=L.words[U];return this},E.prototype.add=function(H){var P;return H.negative!==0&&this.negative===0?(H.negative=0,P=this.sub(H),H.negative^=1,P):H.negative===0&&this.negative!==0?(this.negative=0,P=H.sub(this),this.negative=1,P):this.length>H.length?this.clone().iadd(H):H.clone().iadd(this)},E.prototype.isub=function(H){if(H.negative!==0){H.negative=0;var P=this.iadd(H);return H.negative=1,P._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(H),this.negative=1,this._normSign();var L,F,M=this.cmp(H);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;M>0?(L=this,F=H):(L=H,F=this);for(var U=0,Z=0;Z<F.length;Z++)U=(P=(0|L.words[Z])-(0|F.words[Z])+U)>>26,this.words[Z]=67108863&P;for(;U!==0&&Z<L.length;Z++)U=(P=(0|L.words[Z])+U)>>26,this.words[Z]=67108863&P;if(U===0&&Z<L.length&&L!==this)for(;Z<L.length;Z++)this.words[Z]=L.words[Z];return this.length=Math.max(this.length,Z),L!==this&&(this.negative=1),this._strip()},E.prototype.sub=function(H){return this.clone().isub(H)};var k=function(H,P,L){var F,M,U,Z=H.words,K=P.words,oe=L.words,ie=0,$e=0|Z[0],ce=8191&$e,le=$e>>>13,ye=0|Z[1],_e=8191&ye,q=ye>>>13,re=0|Z[2],fe=8191&re,we=re>>>13,Re=0|Z[3],ke=8191&Re,ue=Re>>>13,Ee=0|Z[4],Ae=8191&Ee,Ne=Ee>>>13,De=0|Z[5],he=8191&De,tt=De>>>13,at=0|Z[6],He=8191&at,ot=at>>>13,Ue=0|Z[7],Ze=8191&Ue,ae=Ue>>>13,Oe=0|Z[8],Le=8191&Oe,Pe=Oe>>>13,ft=0|Z[9],Lt=8191&ft,qt=ft>>>13,gn=0|K[0],dn=8191&gn,un=gn>>>13,ge=0|K[1],ve=8191&ge,Fe=ge>>>13,qe=0|K[2],st=8191&qe,Dt=qe>>>13,Wt=0|K[3],pn=8191&Wt,bn=Wt>>>13,sr=0|K[4],Pn=8191&sr,Bn=sr>>>13,ci=0|K[5],pe=8191&ci,Se=ci>>>13,Ie=0|K[6],Me=8191&Ie,Be=Ie>>>13,Ge=0|K[7],Xe=8191&Ge,Je=Ge>>>13,xt=0|K[8],nt=8191&xt,ct=xt>>>13,mt=0|K[9],yt=8191&mt,Et=mt>>>13;L.negative=H.negative^P.negative,L.length=19;var jt=(ie+(F=Math.imul(ce,dn))|0)+((8191&(M=(M=Math.imul(ce,un))+Math.imul(le,dn)|0))<<13)|0;ie=((U=Math.imul(le,un))+(M>>>13)|0)+(jt>>>26)|0,jt&=67108863,F=Math.imul(_e,dn),M=(M=Math.imul(_e,un))+Math.imul(q,dn)|0,U=Math.imul(q,un);var Ut=(ie+(F=F+Math.imul(ce,ve)|0)|0)+((8191&(M=(M=M+Math.imul(ce,Fe)|0)+Math.imul(le,ve)|0))<<13)|0;ie=((U=U+Math.imul(le,Fe)|0)+(M>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,F=Math.imul(fe,dn),M=(M=Math.imul(fe,un))+Math.imul(we,dn)|0,U=Math.imul(we,un),F=F+Math.imul(_e,ve)|0,M=(M=M+Math.imul(_e,Fe)|0)+Math.imul(q,ve)|0,U=U+Math.imul(q,Fe)|0;var Ct=(ie+(F=F+Math.imul(ce,st)|0)|0)+((8191&(M=(M=M+Math.imul(ce,Dt)|0)+Math.imul(le,st)|0))<<13)|0;ie=((U=U+Math.imul(le,Dt)|0)+(M>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,F=Math.imul(ke,dn),M=(M=Math.imul(ke,un))+Math.imul(ue,dn)|0,U=Math.imul(ue,un),F=F+Math.imul(fe,ve)|0,M=(M=M+Math.imul(fe,Fe)|0)+Math.imul(we,ve)|0,U=U+Math.imul(we,Fe)|0,F=F+Math.imul(_e,st)|0,M=(M=M+Math.imul(_e,Dt)|0)+Math.imul(q,st)|0,U=U+Math.imul(q,Dt)|0;var ln=(ie+(F=F+Math.imul(ce,pn)|0)|0)+((8191&(M=(M=M+Math.imul(ce,bn)|0)+Math.imul(le,pn)|0))<<13)|0;ie=((U=U+Math.imul(le,bn)|0)+(M>>>13)|0)+(ln>>>26)|0,ln&=67108863,F=Math.imul(Ae,dn),M=(M=Math.imul(Ae,un))+Math.imul(Ne,dn)|0,U=Math.imul(Ne,un),F=F+Math.imul(ke,ve)|0,M=(M=M+Math.imul(ke,Fe)|0)+Math.imul(ue,ve)|0,U=U+Math.imul(ue,Fe)|0,F=F+Math.imul(fe,st)|0,M=(M=M+Math.imul(fe,Dt)|0)+Math.imul(we,st)|0,U=U+Math.imul(we,Dt)|0,F=F+Math.imul(_e,pn)|0,M=(M=M+Math.imul(_e,bn)|0)+Math.imul(q,pn)|0,U=U+Math.imul(q,bn)|0;var yn=(ie+(F=F+Math.imul(ce,Pn)|0)|0)+((8191&(M=(M=M+Math.imul(ce,Bn)|0)+Math.imul(le,Pn)|0))<<13)|0;ie=((U=U+Math.imul(le,Bn)|0)+(M>>>13)|0)+(yn>>>26)|0,yn&=67108863,F=Math.imul(he,dn),M=(M=Math.imul(he,un))+Math.imul(tt,dn)|0,U=Math.imul(tt,un),F=F+Math.imul(Ae,ve)|0,M=(M=M+Math.imul(Ae,Fe)|0)+Math.imul(Ne,ve)|0,U=U+Math.imul(Ne,Fe)|0,F=F+Math.imul(ke,st)|0,M=(M=M+Math.imul(ke,Dt)|0)+Math.imul(ue,st)|0,U=U+Math.imul(ue,Dt)|0,F=F+Math.imul(fe,pn)|0,M=(M=M+Math.imul(fe,bn)|0)+Math.imul(we,pn)|0,U=U+Math.imul(we,bn)|0,F=F+Math.imul(_e,Pn)|0,M=(M=M+Math.imul(_e,Bn)|0)+Math.imul(q,Pn)|0,U=U+Math.imul(q,Bn)|0;var $n=(ie+(F=F+Math.imul(ce,pe)|0)|0)+((8191&(M=(M=M+Math.imul(ce,Se)|0)+Math.imul(le,pe)|0))<<13)|0;ie=((U=U+Math.imul(le,Se)|0)+(M>>>13)|0)+($n>>>26)|0,$n&=67108863,F=Math.imul(He,dn),M=(M=Math.imul(He,un))+Math.imul(ot,dn)|0,U=Math.imul(ot,un),F=F+Math.imul(he,ve)|0,M=(M=M+Math.imul(he,Fe)|0)+Math.imul(tt,ve)|0,U=U+Math.imul(tt,Fe)|0,F=F+Math.imul(Ae,st)|0,M=(M=M+Math.imul(Ae,Dt)|0)+Math.imul(Ne,st)|0,U=U+Math.imul(Ne,Dt)|0,F=F+Math.imul(ke,pn)|0,M=(M=M+Math.imul(ke,bn)|0)+Math.imul(ue,pn)|0,U=U+Math.imul(ue,bn)|0,F=F+Math.imul(fe,Pn)|0,M=(M=M+Math.imul(fe,Bn)|0)+Math.imul(we,Pn)|0,U=U+Math.imul(we,Bn)|0,F=F+Math.imul(_e,pe)|0,M=(M=M+Math.imul(_e,Se)|0)+Math.imul(q,pe)|0,U=U+Math.imul(q,Se)|0;var sn=(ie+(F=F+Math.imul(ce,Me)|0)|0)+((8191&(M=(M=M+Math.imul(ce,Be)|0)+Math.imul(le,Me)|0))<<13)|0;ie=((U=U+Math.imul(le,Be)|0)+(M>>>13)|0)+(sn>>>26)|0,sn&=67108863,F=Math.imul(Ze,dn),M=(M=Math.imul(Ze,un))+Math.imul(ae,dn)|0,U=Math.imul(ae,un),F=F+Math.imul(He,ve)|0,M=(M=M+Math.imul(He,Fe)|0)+Math.imul(ot,ve)|0,U=U+Math.imul(ot,Fe)|0,F=F+Math.imul(he,st)|0,M=(M=M+Math.imul(he,Dt)|0)+Math.imul(tt,st)|0,U=U+Math.imul(tt,Dt)|0,F=F+Math.imul(Ae,pn)|0,M=(M=M+Math.imul(Ae,bn)|0)+Math.imul(Ne,pn)|0,U=U+Math.imul(Ne,bn)|0,F=F+Math.imul(ke,Pn)|0,M=(M=M+Math.imul(ke,Bn)|0)+Math.imul(ue,Pn)|0,U=U+Math.imul(ue,Bn)|0,F=F+Math.imul(fe,pe)|0,M=(M=M+Math.imul(fe,Se)|0)+Math.imul(we,pe)|0,U=U+Math.imul(we,Se)|0,F=F+Math.imul(_e,Me)|0,M=(M=M+Math.imul(_e,Be)|0)+Math.imul(q,Me)|0,U=U+Math.imul(q,Be)|0;var wn=(ie+(F=F+Math.imul(ce,Xe)|0)|0)+((8191&(M=(M=M+Math.imul(ce,Je)|0)+Math.imul(le,Xe)|0))<<13)|0;ie=((U=U+Math.imul(le,Je)|0)+(M>>>13)|0)+(wn>>>26)|0,wn&=67108863,F=Math.imul(Le,dn),M=(M=Math.imul(Le,un))+Math.imul(Pe,dn)|0,U=Math.imul(Pe,un),F=F+Math.imul(Ze,ve)|0,M=(M=M+Math.imul(Ze,Fe)|0)+Math.imul(ae,ve)|0,U=U+Math.imul(ae,Fe)|0,F=F+Math.imul(He,st)|0,M=(M=M+Math.imul(He,Dt)|0)+Math.imul(ot,st)|0,U=U+Math.imul(ot,Dt)|0,F=F+Math.imul(he,pn)|0,M=(M=M+Math.imul(he,bn)|0)+Math.imul(tt,pn)|0,U=U+Math.imul(tt,bn)|0,F=F+Math.imul(Ae,Pn)|0,M=(M=M+Math.imul(Ae,Bn)|0)+Math.imul(Ne,Pn)|0,U=U+Math.imul(Ne,Bn)|0,F=F+Math.imul(ke,pe)|0,M=(M=M+Math.imul(ke,Se)|0)+Math.imul(ue,pe)|0,U=U+Math.imul(ue,Se)|0,F=F+Math.imul(fe,Me)|0,M=(M=M+Math.imul(fe,Be)|0)+Math.imul(we,Me)|0,U=U+Math.imul(we,Be)|0,F=F+Math.imul(_e,Xe)|0,M=(M=M+Math.imul(_e,Je)|0)+Math.imul(q,Xe)|0,U=U+Math.imul(q,Je)|0;var jn=(ie+(F=F+Math.imul(ce,nt)|0)|0)+((8191&(M=(M=M+Math.imul(ce,ct)|0)+Math.imul(le,nt)|0))<<13)|0;ie=((U=U+Math.imul(le,ct)|0)+(M>>>13)|0)+(jn>>>26)|0,jn&=67108863,F=Math.imul(Lt,dn),M=(M=Math.imul(Lt,un))+Math.imul(qt,dn)|0,U=Math.imul(qt,un),F=F+Math.imul(Le,ve)|0,M=(M=M+Math.imul(Le,Fe)|0)+Math.imul(Pe,ve)|0,U=U+Math.imul(Pe,Fe)|0,F=F+Math.imul(Ze,st)|0,M=(M=M+Math.imul(Ze,Dt)|0)+Math.imul(ae,st)|0,U=U+Math.imul(ae,Dt)|0,F=F+Math.imul(He,pn)|0,M=(M=M+Math.imul(He,bn)|0)+Math.imul(ot,pn)|0,U=U+Math.imul(ot,bn)|0,F=F+Math.imul(he,Pn)|0,M=(M=M+Math.imul(he,Bn)|0)+Math.imul(tt,Pn)|0,U=U+Math.imul(tt,Bn)|0,F=F+Math.imul(Ae,pe)|0,M=(M=M+Math.imul(Ae,Se)|0)+Math.imul(Ne,pe)|0,U=U+Math.imul(Ne,Se)|0,F=F+Math.imul(ke,Me)|0,M=(M=M+Math.imul(ke,Be)|0)+Math.imul(ue,Me)|0,U=U+Math.imul(ue,Be)|0,F=F+Math.imul(fe,Xe)|0,M=(M=M+Math.imul(fe,Je)|0)+Math.imul(we,Xe)|0,U=U+Math.imul(we,Je)|0,F=F+Math.imul(_e,nt)|0,M=(M=M+Math.imul(_e,ct)|0)+Math.imul(q,nt)|0,U=U+Math.imul(q,ct)|0;var _n=(ie+(F=F+Math.imul(ce,yt)|0)|0)+((8191&(M=(M=M+Math.imul(ce,Et)|0)+Math.imul(le,yt)|0))<<13)|0;ie=((U=U+Math.imul(le,Et)|0)+(M>>>13)|0)+(_n>>>26)|0,_n&=67108863,F=Math.imul(Lt,ve),M=(M=Math.imul(Lt,Fe))+Math.imul(qt,ve)|0,U=Math.imul(qt,Fe),F=F+Math.imul(Le,st)|0,M=(M=M+Math.imul(Le,Dt)|0)+Math.imul(Pe,st)|0,U=U+Math.imul(Pe,Dt)|0,F=F+Math.imul(Ze,pn)|0,M=(M=M+Math.imul(Ze,bn)|0)+Math.imul(ae,pn)|0,U=U+Math.imul(ae,bn)|0,F=F+Math.imul(He,Pn)|0,M=(M=M+Math.imul(He,Bn)|0)+Math.imul(ot,Pn)|0,U=U+Math.imul(ot,Bn)|0,F=F+Math.imul(he,pe)|0,M=(M=M+Math.imul(he,Se)|0)+Math.imul(tt,pe)|0,U=U+Math.imul(tt,Se)|0,F=F+Math.imul(Ae,Me)|0,M=(M=M+Math.imul(Ae,Be)|0)+Math.imul(Ne,Me)|0,U=U+Math.imul(Ne,Be)|0,F=F+Math.imul(ke,Xe)|0,M=(M=M+Math.imul(ke,Je)|0)+Math.imul(ue,Xe)|0,U=U+Math.imul(ue,Je)|0,F=F+Math.imul(fe,nt)|0,M=(M=M+Math.imul(fe,ct)|0)+Math.imul(we,nt)|0,U=U+Math.imul(we,ct)|0;var hr=(ie+(F=F+Math.imul(_e,yt)|0)|0)+((8191&(M=(M=M+Math.imul(_e,Et)|0)+Math.imul(q,yt)|0))<<13)|0;ie=((U=U+Math.imul(q,Et)|0)+(M>>>13)|0)+(hr>>>26)|0,hr&=67108863,F=Math.imul(Lt,st),M=(M=Math.imul(Lt,Dt))+Math.imul(qt,st)|0,U=Math.imul(qt,Dt),F=F+Math.imul(Le,pn)|0,M=(M=M+Math.imul(Le,bn)|0)+Math.imul(Pe,pn)|0,U=U+Math.imul(Pe,bn)|0,F=F+Math.imul(Ze,Pn)|0,M=(M=M+Math.imul(Ze,Bn)|0)+Math.imul(ae,Pn)|0,U=U+Math.imul(ae,Bn)|0,F=F+Math.imul(He,pe)|0,M=(M=M+Math.imul(He,Se)|0)+Math.imul(ot,pe)|0,U=U+Math.imul(ot,Se)|0,F=F+Math.imul(he,Me)|0,M=(M=M+Math.imul(he,Be)|0)+Math.imul(tt,Me)|0,U=U+Math.imul(tt,Be)|0,F=F+Math.imul(Ae,Xe)|0,M=(M=M+Math.imul(Ae,Je)|0)+Math.imul(Ne,Xe)|0,U=U+Math.imul(Ne,Je)|0,F=F+Math.imul(ke,nt)|0,M=(M=M+Math.imul(ke,ct)|0)+Math.imul(ue,nt)|0,U=U+Math.imul(ue,ct)|0;var ar=(ie+(F=F+Math.imul(fe,yt)|0)|0)+((8191&(M=(M=M+Math.imul(fe,Et)|0)+Math.imul(we,yt)|0))<<13)|0;ie=((U=U+Math.imul(we,Et)|0)+(M>>>13)|0)+(ar>>>26)|0,ar&=67108863,F=Math.imul(Lt,pn),M=(M=Math.imul(Lt,bn))+Math.imul(qt,pn)|0,U=Math.imul(qt,bn),F=F+Math.imul(Le,Pn)|0,M=(M=M+Math.imul(Le,Bn)|0)+Math.imul(Pe,Pn)|0,U=U+Math.imul(Pe,Bn)|0,F=F+Math.imul(Ze,pe)|0,M=(M=M+Math.imul(Ze,Se)|0)+Math.imul(ae,pe)|0,U=U+Math.imul(ae,Se)|0,F=F+Math.imul(He,Me)|0,M=(M=M+Math.imul(He,Be)|0)+Math.imul(ot,Me)|0,U=U+Math.imul(ot,Be)|0,F=F+Math.imul(he,Xe)|0,M=(M=M+Math.imul(he,Je)|0)+Math.imul(tt,Xe)|0,U=U+Math.imul(tt,Je)|0,F=F+Math.imul(Ae,nt)|0,M=(M=M+Math.imul(Ae,ct)|0)+Math.imul(Ne,nt)|0,U=U+Math.imul(Ne,ct)|0;var dr=(ie+(F=F+Math.imul(ke,yt)|0)|0)+((8191&(M=(M=M+Math.imul(ke,Et)|0)+Math.imul(ue,yt)|0))<<13)|0;ie=((U=U+Math.imul(ue,Et)|0)+(M>>>13)|0)+(dr>>>26)|0,dr&=67108863,F=Math.imul(Lt,Pn),M=(M=Math.imul(Lt,Bn))+Math.imul(qt,Pn)|0,U=Math.imul(qt,Bn),F=F+Math.imul(Le,pe)|0,M=(M=M+Math.imul(Le,Se)|0)+Math.imul(Pe,pe)|0,U=U+Math.imul(Pe,Se)|0,F=F+Math.imul(Ze,Me)|0,M=(M=M+Math.imul(Ze,Be)|0)+Math.imul(ae,Me)|0,U=U+Math.imul(ae,Be)|0,F=F+Math.imul(He,Xe)|0,M=(M=M+Math.imul(He,Je)|0)+Math.imul(ot,Xe)|0,U=U+Math.imul(ot,Je)|0,F=F+Math.imul(he,nt)|0,M=(M=M+Math.imul(he,ct)|0)+Math.imul(tt,nt)|0,U=U+Math.imul(tt,ct)|0;var vn=(ie+(F=F+Math.imul(Ae,yt)|0)|0)+((8191&(M=(M=M+Math.imul(Ae,Et)|0)+Math.imul(Ne,yt)|0))<<13)|0;ie=((U=U+Math.imul(Ne,Et)|0)+(M>>>13)|0)+(vn>>>26)|0,vn&=67108863,F=Math.imul(Lt,pe),M=(M=Math.imul(Lt,Se))+Math.imul(qt,pe)|0,U=Math.imul(qt,Se),F=F+Math.imul(Le,Me)|0,M=(M=M+Math.imul(Le,Be)|0)+Math.imul(Pe,Me)|0,U=U+Math.imul(Pe,Be)|0,F=F+Math.imul(Ze,Xe)|0,M=(M=M+Math.imul(Ze,Je)|0)+Math.imul(ae,Xe)|0,U=U+Math.imul(ae,Je)|0,F=F+Math.imul(He,nt)|0,M=(M=M+Math.imul(He,ct)|0)+Math.imul(ot,nt)|0,U=U+Math.imul(ot,ct)|0;var Un=(ie+(F=F+Math.imul(he,yt)|0)|0)+((8191&(M=(M=M+Math.imul(he,Et)|0)+Math.imul(tt,yt)|0))<<13)|0;ie=((U=U+Math.imul(tt,Et)|0)+(M>>>13)|0)+(Un>>>26)|0,Un&=67108863,F=Math.imul(Lt,Me),M=(M=Math.imul(Lt,Be))+Math.imul(qt,Me)|0,U=Math.imul(qt,Be),F=F+Math.imul(Le,Xe)|0,M=(M=M+Math.imul(Le,Je)|0)+Math.imul(Pe,Xe)|0,U=U+Math.imul(Pe,Je)|0,F=F+Math.imul(Ze,nt)|0,M=(M=M+Math.imul(Ze,ct)|0)+Math.imul(ae,nt)|0,U=U+Math.imul(ae,ct)|0;var pt=(ie+(F=F+Math.imul(He,yt)|0)|0)+((8191&(M=(M=M+Math.imul(He,Et)|0)+Math.imul(ot,yt)|0))<<13)|0;ie=((U=U+Math.imul(ot,Et)|0)+(M>>>13)|0)+(pt>>>26)|0,pt&=67108863,F=Math.imul(Lt,Xe),M=(M=Math.imul(Lt,Je))+Math.imul(qt,Xe)|0,U=Math.imul(qt,Je),F=F+Math.imul(Le,nt)|0,M=(M=M+Math.imul(Le,ct)|0)+Math.imul(Pe,nt)|0,U=U+Math.imul(Pe,ct)|0;var Tn=(ie+(F=F+Math.imul(Ze,yt)|0)|0)+((8191&(M=(M=M+Math.imul(Ze,Et)|0)+Math.imul(ae,yt)|0))<<13)|0;ie=((U=U+Math.imul(ae,Et)|0)+(M>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,F=Math.imul(Lt,nt),M=(M=Math.imul(Lt,ct))+Math.imul(qt,nt)|0,U=Math.imul(qt,ct);var nr=(ie+(F=F+Math.imul(Le,yt)|0)|0)+((8191&(M=(M=M+Math.imul(Le,Et)|0)+Math.imul(Pe,yt)|0))<<13)|0;ie=((U=U+Math.imul(Pe,Et)|0)+(M>>>13)|0)+(nr>>>26)|0,nr&=67108863;var _t=(ie+(F=Math.imul(Lt,yt))|0)+((8191&(M=(M=Math.imul(Lt,Et))+Math.imul(qt,yt)|0))<<13)|0;return ie=((U=Math.imul(qt,Et))+(M>>>13)|0)+(_t>>>26)|0,_t&=67108863,oe[0]=jt,oe[1]=Ut,oe[2]=Ct,oe[3]=ln,oe[4]=yn,oe[5]=$n,oe[6]=sn,oe[7]=wn,oe[8]=jn,oe[9]=_n,oe[10]=hr,oe[11]=ar,oe[12]=dr,oe[13]=vn,oe[14]=Un,oe[15]=pt,oe[16]=Tn,oe[17]=nr,oe[18]=_t,ie!==0&&(oe[19]=ie,L.length++),L};function D(H,P,L){L.negative=P.negative^H.negative,L.length=H.length+P.length;for(var F=0,M=0,U=0;U<L.length-1;U++){var Z=M;M=0;for(var K=67108863&F,oe=Math.min(U,P.length-1),ie=Math.max(0,U-H.length+1);ie<=oe;ie++){var $e=U-ie,ce=(0|H.words[$e])*(0|P.words[ie]),le=67108863&ce;K=67108863&(le=le+K|0),M+=(Z=(Z=Z+(ce/67108864|0)|0)+(le>>>26)|0)>>>26,Z&=67108863}L.words[U]=K,F=Z,Z=M}return F!==0?L.words[U]=F:L.length--,L._strip()}function j(H,P,L){return D(H,P,L)}Math.imul||(k=C),E.prototype.mulTo=function(H,P){var L=this.length+H.length;return this.length===10&&H.length===10?k(this,H,P):L<63?C(this,H,P):L<1024?D(this,H,P):j(this,H,P)},E.prototype.mul=function(H){var P=new E(null);return P.words=new Array(this.length+H.length),this.mulTo(H,P)},E.prototype.mulf=function(H){var P=new E(null);return P.words=new Array(this.length+H.length),j(this,H,P)},E.prototype.imul=function(H){return this.clone().mulTo(H,this)},E.prototype.imuln=function(H){var P=H<0;P&&(H=-H),v(typeof H=="number"),v(H<67108864);for(var L=0,F=0;F<this.length;F++){var M=(0|this.words[F])*H,U=(67108863&M)+(67108863&L);L>>=26,L+=M/67108864|0,L+=U>>>26,this.words[F]=67108863&U}return L!==0&&(this.words[F]=L,this.length++),P?this.ineg():this},E.prototype.muln=function(H){return this.clone().imuln(H)},E.prototype.sqr=function(){return this.mul(this)},E.prototype.isqr=function(){return this.imul(this.clone())},E.prototype.pow=function(H){var P=function(U){for(var Z=new Array(U.bitLength()),K=0;K<Z.length;K++){var oe=K/26|0,ie=K%26;Z[K]=U.words[oe]>>>ie&1}return Z}(H);if(P.length===0)return new E(1);for(var L=this,F=0;F<P.length&&P[F]===0;F++,L=L.sqr());if(++F<P.length)for(var M=L.sqr();F<P.length;F++,M=M.sqr())P[F]!==0&&(L=L.mul(M));return L},E.prototype.iushln=function(H){v(typeof H=="number"&&H>=0);var P,L=H%26,F=(H-L)/26,M=67108863>>>26-L<<26-L;if(L!==0){var U=0;for(P=0;P<this.length;P++){var Z=this.words[P]&M,K=(0|this.words[P])-Z<<L;this.words[P]=K|U,U=Z>>>26-L}U&&(this.words[P]=U,this.length++)}if(F!==0){for(P=this.length-1;P>=0;P--)this.words[P+F]=this.words[P];for(P=0;P<F;P++)this.words[P]=0;this.length+=F}return this._strip()},E.prototype.ishln=function(H){return v(this.negative===0),this.iushln(H)},E.prototype.iushrn=function(H,P,L){var F;v(typeof H=="number"&&H>=0),F=P?(P-P%26)/26:0;var M=H%26,U=Math.min((H-M)/26,this.length),Z=67108863^67108863>>>M<<M,K=L;if(F-=U,F=Math.max(0,F),K){for(var oe=0;oe<U;oe++)K.words[oe]=this.words[oe];K.length=U}if(U!==0)if(this.length>U)for(this.length-=U,oe=0;oe<this.length;oe++)this.words[oe]=this.words[oe+U];else this.words[0]=0,this.length=1;var ie=0;for(oe=this.length-1;oe>=0&&(ie!==0||oe>=F);oe--){var $e=0|this.words[oe];this.words[oe]=ie<<26-M|$e>>>M,ie=$e&Z}return K&&ie!==0&&(K.words[K.length++]=ie),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},E.prototype.ishrn=function(H,P,L){return v(this.negative===0),this.iushrn(H,P,L)},E.prototype.shln=function(H){return this.clone().ishln(H)},E.prototype.ushln=function(H){return this.clone().iushln(H)},E.prototype.shrn=function(H){return this.clone().ishrn(H)},E.prototype.ushrn=function(H){return this.clone().iushrn(H)},E.prototype.testn=function(H){v(typeof H=="number"&&H>=0);var P=H%26,L=(H-P)/26,F=1<<P;return!(this.length<=L||!(this.words[L]&F))},E.prototype.imaskn=function(H){v(typeof H=="number"&&H>=0);var P=H%26,L=(H-P)/26;if(v(this.negative===0,"imaskn works only with positive numbers"),this.length<=L)return this;if(P!==0&&L++,this.length=Math.min(L,this.length),P!==0){var F=67108863^67108863>>>P<<P;this.words[this.length-1]&=F}return this._strip()},E.prototype.maskn=function(H){return this.clone().imaskn(H)},E.prototype.iaddn=function(H){return v(typeof H=="number"),v(H<67108864),H<0?this.isubn(-H):this.negative!==0?this.length===1&&(0|this.words[0])<=H?(this.words[0]=H-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(H),this.negative=1,this):this._iaddn(H)},E.prototype._iaddn=function(H){this.words[0]+=H;for(var P=0;P<this.length&&this.words[P]>=67108864;P++)this.words[P]-=67108864,P===this.length-1?this.words[P+1]=1:this.words[P+1]++;return this.length=Math.max(this.length,P+1),this},E.prototype.isubn=function(H){if(v(typeof H=="number"),v(H<67108864),H<0)return this.iaddn(-H);if(this.negative!==0)return this.negative=0,this.iaddn(H),this.negative=1,this;if(this.words[0]-=H,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var P=0;P<this.length&&this.words[P]<0;P++)this.words[P]+=67108864,this.words[P+1]-=1;return this._strip()},E.prototype.addn=function(H){return this.clone().iaddn(H)},E.prototype.subn=function(H){return this.clone().isubn(H)},E.prototype.iabs=function(){return this.negative=0,this},E.prototype.abs=function(){return this.clone().iabs()},E.prototype._ishlnsubmul=function(H,P,L){var F,M,U=H.length+L;this._expand(U);var Z=0;for(F=0;F<H.length;F++){M=(0|this.words[F+L])+Z;var K=(0|H.words[F])*P;Z=((M-=67108863&K)>>26)-(K/67108864|0),this.words[F+L]=67108863&M}for(;F<this.length-L;F++)Z=(M=(0|this.words[F+L])+Z)>>26,this.words[F+L]=67108863&M;if(Z===0)return this._strip();for(v(Z===-1),Z=0,F=0;F<this.length;F++)Z=(M=-(0|this.words[F])+Z)>>26,this.words[F]=67108863&M;return this.negative=1,this._strip()},E.prototype._wordDiv=function(H,P){var L=(this.length,H.length),F=this.clone(),M=H,U=0|M.words[M.length-1];(L=26-this._countBits(U))!=0&&(M=M.ushln(L),F.iushln(L),U=0|M.words[M.length-1]);var Z,K=F.length-M.length;if(P!=="mod"){(Z=new E(null)).length=K+1,Z.words=new Array(Z.length);for(var oe=0;oe<Z.length;oe++)Z.words[oe]=0}var ie=F.clone()._ishlnsubmul(M,1,K);ie.negative===0&&(F=ie,Z&&(Z.words[K]=1));for(var $e=K-1;$e>=0;$e--){var ce=67108864*(0|F.words[M.length+$e])+(0|F.words[M.length+$e-1]);for(ce=Math.min(ce/U|0,67108863),F._ishlnsubmul(M,ce,$e);F.negative!==0;)ce--,F.negative=0,F._ishlnsubmul(M,1,$e),F.isZero()||(F.negative^=1);Z&&(Z.words[$e]=ce)}return Z&&Z._strip(),F._strip(),P!=="div"&&L!==0&&F.iushrn(L),{div:Z||null,mod:F}},E.prototype.divmod=function(H,P,L){return v(!H.isZero()),this.isZero()?{div:new E(0),mod:new E(0)}:this.negative!==0&&H.negative===0?(U=this.neg().divmod(H,P),P!=="mod"&&(F=U.div.neg()),P!=="div"&&(M=U.mod.neg(),L&&M.negative!==0&&M.iadd(H)),{div:F,mod:M}):this.negative===0&&H.negative!==0?(U=this.divmod(H.neg(),P),P!=="mod"&&(F=U.div.neg()),{div:F,mod:U.mod}):this.negative&H.negative?(U=this.neg().divmod(H.neg(),P),P!=="div"&&(M=U.mod.neg(),L&&M.negative!==0&&M.isub(H)),{div:U.div,mod:M}):H.length>this.length||this.cmp(H)<0?{div:new E(0),mod:this}:H.length===1?P==="div"?{div:this.divn(H.words[0]),mod:null}:P==="mod"?{div:null,mod:new E(this.modrn(H.words[0]))}:{div:this.divn(H.words[0]),mod:new E(this.modrn(H.words[0]))}:this._wordDiv(H,P);var F,M,U},E.prototype.div=function(H){return this.divmod(H,"div",!1).div},E.prototype.mod=function(H){return this.divmod(H,"mod",!1).mod},E.prototype.umod=function(H){return this.divmod(H,"mod",!0).mod},E.prototype.divRound=function(H){var P=this.divmod(H);if(P.mod.isZero())return P.div;var L=P.div.negative!==0?P.mod.isub(H):P.mod,F=H.ushrn(1),M=H.andln(1),U=L.cmp(F);return U<0||M===1&&U===0?P.div:P.div.negative!==0?P.div.isubn(1):P.div.iaddn(1)},E.prototype.modrn=function(H){var P=H<0;P&&(H=-H),v(H<=67108863);for(var L=67108864%H,F=0,M=this.length-1;M>=0;M--)F=(L*F+(0|this.words[M]))%H;return P?-F:F},E.prototype.modn=function(H){return this.modrn(H)},E.prototype.idivn=function(H){var P=H<0;P&&(H=-H),v(H<=67108863);for(var L=0,F=this.length-1;F>=0;F--){var M=(0|this.words[F])+67108864*L;this.words[F]=M/H|0,L=M%H}return this._strip(),P?this.ineg():this},E.prototype.divn=function(H){return this.clone().idivn(H)},E.prototype.egcd=function(H){v(H.negative===0),v(!H.isZero());var P=this,L=H.clone();P=P.negative!==0?P.umod(H):P.clone();for(var F=new E(1),M=new E(0),U=new E(0),Z=new E(1),K=0;P.isEven()&&L.isEven();)P.iushrn(1),L.iushrn(1),++K;for(var oe=L.clone(),ie=P.clone();!P.isZero();){for(var $e=0,ce=1;!(P.words[0]&ce)&&$e<26;++$e,ce<<=1);if($e>0)for(P.iushrn($e);$e-- >0;)(F.isOdd()||M.isOdd())&&(F.iadd(oe),M.isub(ie)),F.iushrn(1),M.iushrn(1);for(var le=0,ye=1;!(L.words[0]&ye)&&le<26;++le,ye<<=1);if(le>0)for(L.iushrn(le);le-- >0;)(U.isOdd()||Z.isOdd())&&(U.iadd(oe),Z.isub(ie)),U.iushrn(1),Z.iushrn(1);P.cmp(L)>=0?(P.isub(L),F.isub(U),M.isub(Z)):(L.isub(P),U.isub(F),Z.isub(M))}return{a:U,b:Z,gcd:L.iushln(K)}},E.prototype._invmp=function(H){v(H.negative===0),v(!H.isZero());var P=this,L=H.clone();P=P.negative!==0?P.umod(H):P.clone();for(var F,M=new E(1),U=new E(0),Z=L.clone();P.cmpn(1)>0&&L.cmpn(1)>0;){for(var K=0,oe=1;!(P.words[0]&oe)&&K<26;++K,oe<<=1);if(K>0)for(P.iushrn(K);K-- >0;)M.isOdd()&&M.iadd(Z),M.iushrn(1);for(var ie=0,$e=1;!(L.words[0]&$e)&&ie<26;++ie,$e<<=1);if(ie>0)for(L.iushrn(ie);ie-- >0;)U.isOdd()&&U.iadd(Z),U.iushrn(1);P.cmp(L)>=0?(P.isub(L),M.isub(U)):(L.isub(P),U.isub(M))}return(F=P.cmpn(1)===0?M:U).cmpn(0)<0&&F.iadd(H),F},E.prototype.gcd=function(H){if(this.isZero())return H.abs();if(H.isZero())return this.abs();var P=this.clone(),L=H.clone();P.negative=0,L.negative=0;for(var F=0;P.isEven()&&L.isEven();F++)P.iushrn(1),L.iushrn(1);for(;;){for(;P.isEven();)P.iushrn(1);for(;L.isEven();)L.iushrn(1);var M=P.cmp(L);if(M<0){var U=P;P=L,L=U}else if(M===0||L.cmpn(1)===0)break;P.isub(L)}return L.iushln(F)},E.prototype.invm=function(H){return this.egcd(H).a.umod(H)},E.prototype.isEven=function(){return!(1&this.words[0])},E.prototype.isOdd=function(){return!(1&~this.words[0])},E.prototype.andln=function(H){return this.words[0]&H},E.prototype.bincn=function(H){v(typeof H=="number");var P=H%26,L=(H-P)/26,F=1<<P;if(this.length<=L)return this._expand(L+1),this.words[L]|=F,this;for(var M=F,U=L;M!==0&&U<this.length;U++){var Z=0|this.words[U];M=(Z+=M)>>>26,Z&=67108863,this.words[U]=Z}return M!==0&&(this.words[U]=M,this.length++),this},E.prototype.isZero=function(){return this.length===1&&this.words[0]===0},E.prototype.cmpn=function(H){var P,L=H<0;if(this.negative!==0&&!L)return-1;if(this.negative===0&&L)return 1;if(this._strip(),this.length>1)P=1;else{L&&(H=-H),v(H<=67108863,"Number is too big");var F=0|this.words[0];P=F===H?0:F<H?-1:1}return this.negative!==0?0|-P:P},E.prototype.cmp=function(H){if(this.negative!==0&&H.negative===0)return-1;if(this.negative===0&&H.negative!==0)return 1;var P=this.ucmp(H);return this.negative!==0?0|-P:P},E.prototype.ucmp=function(H){if(this.length>H.length)return 1;if(this.length<H.length)return-1;for(var P=0,L=this.length-1;L>=0;L--){var F=0|this.words[L],M=0|H.words[L];if(F!==M){F<M?P=-1:F>M&&(P=1);break}}return P},E.prototype.gtn=function(H){return this.cmpn(H)===1},E.prototype.gt=function(H){return this.cmp(H)===1},E.prototype.gten=function(H){return this.cmpn(H)>=0},E.prototype.gte=function(H){return this.cmp(H)>=0},E.prototype.ltn=function(H){return this.cmpn(H)===-1},E.prototype.lt=function(H){return this.cmp(H)===-1},E.prototype.lten=function(H){return this.cmpn(H)<=0},E.prototype.lte=function(H){return this.cmp(H)<=0},E.prototype.eqn=function(H){return this.cmpn(H)===0},E.prototype.eq=function(H){return this.cmp(H)===0},E.red=function(H){return new se(H)},E.prototype.toRed=function(H){return v(!this.red,"Already a number in reduction context"),v(this.negative===0,"red works only with positives"),H.convertTo(this)._forceRed(H)},E.prototype.fromRed=function(){return v(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},E.prototype._forceRed=function(H){return this.red=H,this},E.prototype.forceRed=function(H){return v(!this.red,"Already a number in reduction context"),this._forceRed(H)},E.prototype.redAdd=function(H){return v(this.red,"redAdd works only with red numbers"),this.red.add(this,H)},E.prototype.redIAdd=function(H){return v(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,H)},E.prototype.redSub=function(H){return v(this.red,"redSub works only with red numbers"),this.red.sub(this,H)},E.prototype.redISub=function(H){return v(this.red,"redISub works only with red numbers"),this.red.isub(this,H)},E.prototype.redShl=function(H){return v(this.red,"redShl works only with red numbers"),this.red.shl(this,H)},E.prototype.redMul=function(H){return v(this.red,"redMul works only with red numbers"),this.red._verify2(this,H),this.red.mul(this,H)},E.prototype.redIMul=function(H){return v(this.red,"redMul works only with red numbers"),this.red._verify2(this,H),this.red.imul(this,H)},E.prototype.redSqr=function(){return v(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},E.prototype.redISqr=function(){return v(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},E.prototype.redSqrt=function(){return v(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},E.prototype.redInvm=function(){return v(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},E.prototype.redNeg=function(){return v(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},E.prototype.redPow=function(H){return v(this.red&&!H.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,H)};var V={k256:null,p224:null,p192:null,p25519:null};function z(H,P){this.name=H,this.p=new E(P,16),this.n=this.p.bitLength(),this.k=new E(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function W(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function ee(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function ne(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Q(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function se(H){if(typeof H=="string"){var P=E._prime(H);this.m=P.p,this.prime=P}else v(H.gtn(1),"modulus must be greater than 1"),this.m=H,this.prime=null}function be(H){se.call(this,H),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new E(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}z.prototype._tmp=function(){var H=new E(null);return H.words=new Array(Math.ceil(this.n/13)),H},z.prototype.ireduce=function(H){var P,L=H;do this.split(L,this.tmp),P=(L=(L=this.imulK(L)).iadd(this.tmp)).bitLength();while(P>this.n);var F=P<this.n?-1:L.ucmp(this.p);return F===0?(L.words[0]=0,L.length=1):F>0?L.isub(this.p):L.strip!==void 0?L.strip():L._strip(),L},z.prototype.split=function(H,P){H.iushrn(this.n,0,P)},z.prototype.imulK=function(H){return H.imul(this.k)},S(W,z),W.prototype.split=function(H,P){for(var L=4194303,F=Math.min(H.length,9),M=0;M<F;M++)P.words[M]=H.words[M];if(P.length=F,H.length<=9)return H.words[0]=0,void(H.length=1);var U=H.words[9];for(P.words[P.length++]=U&L,M=10;M<H.length;M++){var Z=0|H.words[M];H.words[M-10]=(Z&L)<<4|U>>>22,U=Z}U>>>=22,H.words[M-10]=U,U===0&&H.length>10?H.length-=10:H.length-=9},W.prototype.imulK=function(H){H.words[H.length]=0,H.words[H.length+1]=0,H.length+=2;for(var P=0,L=0;L<H.length;L++){var F=0|H.words[L];P+=977*F,H.words[L]=67108863&P,P=64*F+(P/67108864|0)}return H.words[H.length-1]===0&&(H.length--,H.words[H.length-1]===0&&H.length--),H},S(ee,z),S(ne,z),S(Q,z),Q.prototype.imulK=function(H){for(var P=0,L=0;L<H.length;L++){var F=19*(0|H.words[L])+P,M=67108863&F;F>>>=26,H.words[L]=M,P=F}return P!==0&&(H.words[H.length++]=P),H},E._prime=function(H){if(V[H])return V[H];var P;if(H==="k256")P=new W;else if(H==="p224")P=new ee;else if(H==="p192")P=new ne;else{if(H!=="p25519")throw new Error("Unknown prime "+H);P=new Q}return V[H]=P,P},se.prototype._verify1=function(H){v(H.negative===0,"red works only with positives"),v(H.red,"red works only with red numbers")},se.prototype._verify2=function(H,P){v(!(H.negative|P.negative),"red works only with positives"),v(H.red&&H.red===P.red,"red works only with red numbers")},se.prototype.imod=function(H){return this.prime?this.prime.ireduce(H)._forceRed(this):(_(H,H.umod(this.m)._forceRed(this)),H)},se.prototype.neg=function(H){return H.isZero()?H.clone():this.m.sub(H)._forceRed(this)},se.prototype.add=function(H,P){this._verify2(H,P);var L=H.add(P);return L.cmp(this.m)>=0&&L.isub(this.m),L._forceRed(this)},se.prototype.iadd=function(H,P){this._verify2(H,P);var L=H.iadd(P);return L.cmp(this.m)>=0&&L.isub(this.m),L},se.prototype.sub=function(H,P){this._verify2(H,P);var L=H.sub(P);return L.cmpn(0)<0&&L.iadd(this.m),L._forceRed(this)},se.prototype.isub=function(H,P){this._verify2(H,P);var L=H.isub(P);return L.cmpn(0)<0&&L.iadd(this.m),L},se.prototype.shl=function(H,P){return this._verify1(H),this.imod(H.ushln(P))},se.prototype.imul=function(H,P){return this._verify2(H,P),this.imod(H.imul(P))},se.prototype.mul=function(H,P){return this._verify2(H,P),this.imod(H.mul(P))},se.prototype.isqr=function(H){return this.imul(H,H.clone())},se.prototype.sqr=function(H){return this.mul(H,H)},se.prototype.sqrt=function(H){if(H.isZero())return H.clone();var P=this.m.andln(3);if(v(P%2==1),P===3){var L=this.m.add(new E(1)).iushrn(2);return this.pow(H,L)}for(var F=this.m.subn(1),M=0;!F.isZero()&&F.andln(1)===0;)M++,F.iushrn(1);v(!F.isZero());var U=new E(1).toRed(this),Z=U.redNeg(),K=this.m.subn(1).iushrn(1),oe=this.m.bitLength();for(oe=new E(2*oe*oe).toRed(this);this.pow(oe,K).cmp(Z)!==0;)oe.redIAdd(Z);for(var ie=this.pow(oe,F),$e=this.pow(H,F.addn(1).iushrn(1)),ce=this.pow(H,F),le=M;ce.cmp(U)!==0;){for(var ye=ce,_e=0;ye.cmp(U)!==0;_e++)ye=ye.redSqr();v(_e<le);var q=this.pow(ie,new E(1).iushln(le-_e-1));$e=$e.redMul(q),ie=q.redSqr(),ce=ce.redMul(ie),le=_e}return $e},se.prototype.invm=function(H){var P=H._invmp(this.m);return P.negative!==0?(P.negative=0,this.imod(P).redNeg()):this.imod(P)},se.prototype.pow=function(H,P){if(P.isZero())return new E(1).toRed(this);if(P.cmpn(1)===0)return H.clone();var L=new Array(16);L[0]=new E(1).toRed(this),L[1]=H;for(var F=2;F<L.length;F++)L[F]=this.mul(L[F-1],H);var M=L[0],U=0,Z=0,K=P.bitLength()%26;for(K===0&&(K=26),F=P.length-1;F>=0;F--){for(var oe=P.words[F],ie=K-1;ie>=0;ie--){var $e=oe>>ie&1;M!==L[0]&&(M=this.sqr(M)),$e!==0||U!==0?(U<<=1,U|=$e,(++Z==4||F===0&&ie===0)&&(M=this.mul(M,L[U]),Z=0,U=0)):Z=0}K=26}return M},se.prototype.convertTo=function(H){var P=H.umod(this.m);return P===H?P.clone():P},se.prototype.convertFrom=function(H){var P=H.clone();return P.red=null,P},E.mont=function(H){return new be(H)},S(be,se),be.prototype.convertTo=function(H){return this.imod(H.ushln(this.shift))},be.prototype.convertFrom=function(H){var P=this.imod(H.mul(this.rinv));return P.red=null,P},be.prototype.imul=function(H,P){if(H.isZero()||P.isZero())return H.words[0]=0,H.length=1,H;var L=H.imul(P),F=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=L.isub(F).iushrn(this.shift),U=M;return M.cmp(this.m)>=0?U=M.isub(this.m):M.cmpn(0)<0&&(U=M.iadd(this.m)),U._forceRed(this)},be.prototype.mul=function(H,P){if(H.isZero()||P.isZero())return new E(0)._forceRed(this);var L=H.mul(P),F=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=L.isub(F).iushrn(this.shift),U=M;return M.cmp(this.m)>=0?U=M.isub(this.m):M.cmpn(0)<0&&(U=M.iadd(this.m)),U._forceRed(this)},be.prototype.invm=function(H){return this.imod(H._invmp(this.m).mul(this.r2))._forceRed(this)}})(d=a.nmd(d),this)},7834:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a,u,g,$){return $.justOne||$.count?(a[u]=Array.isArray(g)?g[0]:g,f(a[u])!=="object"&&(a[u]=$.count?g:null)):(a[u]=Array.isArray(g)?g:g==null?[]:[g],a[u]=a[u].filter(function(v){return v&&f(v)==="object"})),a[u]}},7860:d=>{d.exports=function(f){for(var a=[],u="",g="DEFAULT",$=0;$<f.length;++$)g!=="IN_SQUARE_BRACKETS"||/\d/.test(f[$])||f[$]==="]"||(g="DEFAULT",u=a[a.length-1]+"["+u,a.splice(a.length-1,1)),f[$]==="["?(g!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(a.push(u),u=""),g="IN_SQUARE_BRACKETS"):f[$]==="]"?g==="IN_SQUARE_BRACKETS"?(g="IMMEDIATELY_AFTER_SQUARE_BRACKETS",a.push(u),u=""):(g="DEFAULT",u+=f[$]):f[$]==="."?(g!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(a.push(u),u=""),g="DEFAULT"):u+=f[$];return g!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&a.push(u),a}},7878:(d,f,a)=>{var u=a(2273),g=a(4183);d.exports=function(){var $=g();return u(Number,{isNaN:$},{isNaN:function(){return Number.isNaN!==$}}),$}},7910:(d,f,a)=>{var u=a(8677);d.exports=function(g,$,v){var S=g.schema.options.discriminatorKey,E=$!=null&&$[S];if(E==null&&(E=v),g.discriminators&&E!=null)if(g.discriminators[E])g=g.discriminators[E];else{var h=u(g.discriminators,E);h&&(g=h)}return g}},7911:(d,f,a)=>{var u=a(9834);d.exports=function(g){return!!u(g)}},7919:(d,f,a)=>{function u($){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},u($)}function g($){return Object.prototype.toString.call($)}f.isArray=function($){return Array.isArray?Array.isArray($):g($)==="[object Array]"},f.isBoolean=function($){return typeof $=="boolean"},f.isNull=function($){return $===null},f.isNullOrUndefined=function($){return $==null},f.isNumber=function($){return typeof $=="number"},f.isString=function($){return typeof $=="string"},f.isSymbol=function($){return u($)==="symbol"},f.isUndefined=function($){return $===void 0},f.isRegExp=function($){return g($)==="[object RegExp]"},f.isObject=function($){return u($)==="object"&&$!==null},f.isDate=function($){return g($)==="[object Date]"},f.isError=function($){return g($)==="[object Error]"||$ instanceof Error},f.isFunction=function($){return typeof $=="function"},f.isPrimitive=function($){return $===null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||u($)==="symbol"||$===void 0},f.isBuffer=a(5832).Buffer.isBuffer},7930:(d,f)=>{f.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup"),f.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics"),f.arrayParentSymbol=Symbol("mongoose#Array#_parent"),f.arrayPathSymbol=Symbol("mongoose#Array#_path"),f.arraySchemaSymbol=Symbol("mongoose#Array#_schema"),f.documentArrayParent=Symbol("mongoose#documentArrayParent"),f.documentIsSelected=Symbol("mongoose#Document#isSelected"),f.documentIsModified=Symbol("mongoose#Document#isModified"),f.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths"),f.documentSchemaSymbol=Symbol("mongoose#Document#schema"),f.getSymbol=Symbol("mongoose#Document#get"),f.modelSymbol=Symbol("mongoose#Model"),f.objectIdSymbol=Symbol("mongoose#ObjectId"),f.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model"),f.schemaTypeSymbol=Symbol("mongoose#schemaType"),f.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments"),f.scopeSymbol=Symbol("mongoose#Document#scope"),f.validatorErrorSymbol=Symbol("mongoose#validatorError")},7937:(d,f,a)=>{var u=a(9732).Buffer,g=a(5833),$=a(3292),v=a(1679),S=a(6620),E=a(7032),h=a(2951);function b(y){$.Writable.call(this);var x=h[y];if(!x)throw new Error("Unknown message digest");this._hashType=x.hash,this._hash=g(x.hash),this._tag=x.id,this._signType=x.sign}function m(y){$.Writable.call(this);var x=h[y];if(!x)throw new Error("Unknown message digest");this._hash=g(x.hash),this._tag=x.id,this._signType=x.sign}function p(y){return new b(y)}function _(y){return new m(y)}Object.keys(h).forEach(function(y){h[y].id=u.from(h[y].id,"hex"),h[y.toLowerCase()]=h[y]}),v(b,$.Writable),b.prototype._write=function(y,x,A){this._hash.update(y),A()},b.prototype.update=function(y,x){return this._hash.update(typeof y=="string"?u.from(y,x):y),this},b.prototype.sign=function(y,x){this.end();var A=this._hash.digest(),R=S(A,y,this._hashType,this._signType,this._tag);return x?R.toString(x):R},v(m,$.Writable),m.prototype._write=function(y,x,A){this._hash.update(y),A()},m.prototype.update=function(y,x){return this._hash.update(typeof y=="string"?u.from(y,x):y),this},m.prototype.verify=function(y,x,A){var R=typeof x=="string"?u.from(x,A):x;this.end();var C=this._hash.digest();return E(R,C,y,this._signType,this._tag)},d.exports={Sign:p,Verify:_,createSign:p,createVerify:_}},7944:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a){return a&&f(a)==="object"&&typeof a.copy=="function"&&typeof a.fill=="function"&&typeof a.readUInt8=="function"}},7952:(d,f,a)=>{function u(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var g=a(9732),$=a(4276),v=g.Buffer,S=g.kMaxLength,E=a.g.crypto||a.g.msCrypto,h=Math.pow(2,32)-1;function b(_,y){if(typeof _!="number"||_!=_)throw new TypeError("offset must be a number");if(_>h||_<0)throw new TypeError("offset must be a uint32");if(_>S||_>y)throw new RangeError("offset out of range")}function m(_,y,x){if(typeof _!="number"||_!=_)throw new TypeError("size must be a number");if(_>h||_<0)throw new TypeError("size must be a uint32");if(_+y>x||_>S)throw new RangeError("buffer too small")}function p(_,y,x,A){if({}.browser){var R=_.buffer,C=new Uint8Array(R,y,x);return E.getRandomValues(C),A?void{env:{}}.nextTick(function(){A(null,_)}):_}if(!A)return $(x).copy(_,y),_;$(x,function(k,D){if(k)return A(k);D.copy(_,y),A(null,_)})}E&&E.getRandomValues||!{}.browser?(f.randomFill=function(_,y,x,A){if(!(v.isBuffer(_)||_ instanceof a.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof y=="function")A=y,y=0,x=_.length;else if(typeof x=="function")A=x,x=_.length-y;else if(typeof A!="function")throw new TypeError('"cb" argument must be a function');return b(y,_.length),m(x,y,_.length),p(_,y,x,A)},f.randomFillSync=function(_,y,x){if(y===void 0&&(y=0),!(v.isBuffer(_)||_ instanceof a.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return b(y,_.length),x===void 0&&(x=_.length-y),m(x,y,_.length),p(_,y,x)}):(f.randomFill=u,f.randomFillSync=u)},7953:(d,f,a)=>{f.Array=a(7760),f.BigInt=a(3318),f.Boolean=a(6413),f.Buffer=a(2307),f.Date=a(2345),f.Decimal128=f.Decimal=a(7045),f.DocumentArray=a(9123),f.Map=a(6867),f.Mixed=a(5022),f.Number=a(3660),f.ObjectId=a(3091),f.String=a(8728),f.Subdocument=a(5098),f.UUID=a(2134),f.Double=a(1732),f.Int32=a(433),f.Oid=f.ObjectId,f.Object=f.Mixed,f.Bool=f.Boolean,f.ObjectID=f.ObjectId},7982:(d,f,a)=>{function u(V,z){var W=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!W){if(Array.isArray(V)||(W=function(H,P){if(H){if(typeof H=="string")return g(H,P);var L={}.toString.call(H).slice(8,-1);return L==="Object"&&H.constructor&&(L=H.constructor.name),L==="Map"||L==="Set"?Array.from(H):L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?g(H,P):void 0}}(V))||z){W&&(V=W);var ee=0,ne=function(){};return{s:ne,n:function(){return ee>=V.length?{done:!0}:{done:!1,value:V[ee++]}},e:function(H){throw H},f:ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Q,se=!0,be=!1;return{s:function(){W=W.call(V)},n:function(){var H=W.next();return se=H.done,H},e:function(H){be=!0,Q=H},f:function(){try{se||W.return==null||W.return()}finally{if(be)throw Q}}}}function g(V,z){(z==null||z>V.length)&&(z=V.length);for(var W=0,ee=Array(z);W<z;W++)ee[W]=V[W];return ee}function $(V){return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},$(V)}var v=a(3609),S=a(8995),E=a(7953),h=a(170),b=a(1244),m=a(9064),p=a(3703),_=a(7425),y=a(5110),x=a(7352),A=a(608),R=a(2497),C=a(8768),k=["Polygon","MultiPolygon"];function D(V,z,W){if(Array.isArray(V))V.forEach(function(be,H){if(Array.isArray(be)||A(be))return D(be,z,W);V[H]=z.castForQuery(null,be,W)});else for(var ee=Object.keys(V),ne=ee.length;ne--;){var Q=ee[ne],se=V[Q];Array.isArray(se)||A(se)?(D(se,z,W),V[Q]=se):V[Q]=z.castForQuery({val:se,context:W})}}function j(V,z,W,ee){if("strictQuery"in V)return V.strictQuery;if("strictQuery"in z)return z.strictQuery;var ne=ee&&ee.mongooseCollection&&ee.mongooseCollection.conn&&ee.mongooseCollection.conn.base&&ee.mongooseCollection.conn.base.options;return ne&&"strictQuery"in ne?ne.strictQuery:W.strictQuery}d.exports=function V(z,W,ee,ne){if(Array.isArray(W))throw new Error("Query filter must be an object, got an array ",x.inspect(W));if(W==null)return W;z!=null&&z.discriminators!=null&&W[z.options.discriminatorKey]!=null&&(z=_(z,W[z.options.discriminatorKey])||z);var Q,se,be,H,P,L,F=Object.keys(W),M=F.length;for(ee=ee||{};M--;)if(L=W[H=F[M]],H==="$or"||H==="$nor"||H==="$and"){if(!Array.isArray(L))throw new v("Array",L,H);for(var U=L.length-1;U>=0;U--){if(L[U]==null||$(L[U])!=="object")throw new v("Object",L[U],H+"."+U);var Z=Object.keys(L[U]).length,K=L[U][z.options.discriminatorKey];if(K==null)L[U]=V(z,L[U],ee,ne);else{var oe=_(ne.schema,K);L[U]=V(oe||z,L[U],ee,ne)}Object.keys(L[U]).length===0&&Z!==0&&L.splice(U,1)}L.length===0&&delete W[H]}else{if(H==="$where"){if((P=$(L))!=="string"&&P!=="function")throw new Error("Must have a string or function for $where");P==="function"&&(W[H]=L.toString());continue}if(H==="$expr"){L=h(L,z);continue}if(H==="$elemMatch")L=V(z,L,ee,ne);else if(H==="$text")L=m(L,H);else if(H!=="$comment"||z.paths.hasOwnProperty("$comment")){if(!z)continue;if(!(se=z.path(H)))for(var ie=H.split("."),$e=ie.length;$e--;){var ce=ie.slice(0,$e).join("."),le=ie.slice($e).join("."),ye=z.path(ce),_e=ye&&ye.schema&&ye.schema.options&&ye.schema.options.discriminatorKey;if(ye!=null&&(ye.schema&&ye.schema.discriminators)!=null&&_e!=null&&le!==_e){var q=p(W,ce+"."+_e),re=ye.schema.discriminators;typeof q=="string"&&re[q]!=null?se=re[q].path(le):q!=null&&Object.keys(q).length===1&&Array.isArray(q.$in)&&q.$in.length===1&&typeof q.$in[0]=="string"&&re[q.$in[0]]!=null&&(se=re[q.$in[0]].path(le))}}if(se){if(L==null)continue;if(C.isPOJO(L))if(Object.keys(L).some(y))for(var fe=Object.keys(L),we=void 0,Re=fe.length;Re--;)if(be=L[we=fe[Re]],we==="$elemMatch")be&&se!=null&&se.schema!=null?V(se.schema,be,ee,ne):be&&se!=null&&se.$isMongooseArray&&(C.isPOJO(be)&&be.$not!=null?V(z,be,ee,ne):L[we]=se.castForQuery(we,be,ne));else if(we==="$not"){if(be&&se){if((Q=Object.keys(be)).length&&y(Q[0]))for(var ke in be)be[ke]=se.castForQuery(ke,be[ke],ne);else L[we]=se.castForQuery(we,be,ne);continue}}else L[we]=se.castForQuery(we,be,ne);else W[H]=se.castForQuery(null,L,ne);else if(Array.isArray(L)&&["Buffer","Array"].indexOf(se.instance)===-1&&!ee.sanitizeFilter){var ue,Ee=[],Ae=u(L);try{for(Ae.s();!(ue=Ae.n()).done;){var Ne=ue.value;Ee.push(se.castForQuery(null,Ne,ne))}}catch(Lt){Ae.e(Lt)}finally{Ae.f()}W[H]={$in:Ee}}else W[H]=se.castForQuery(null,L,ne)}else{for(var De=H.split("."),he=De.length,tt=void 0,at=void 0,He=void 0;he--&&(tt=De.slice(0,he).join("."),!(se=z.path(tt))););if(se){if(se.caster&&se.caster.schema){(He={})[at=De.slice(he).join(".")]=L;var ot=V(se.caster.schema,He,ee,ne)[at];ot===void 0?delete W[H]:W[H]=ot}else W[H]=L;continue}if(A(L)){var Ue="";if(L.$near?Ue="$near":L.$nearSphere?Ue="$nearSphere":L.$within?Ue="$within":L.$geoIntersects?Ue="$geoIntersects":L.$geoWithin&&(Ue="$geoWithin"),Ue){var Ze=new E.Number("__QueryCasting__"),ae=L[Ue];if(L.$maxDistance!=null&&(L.$maxDistance=Ze.castForQuery(null,L.$maxDistance,ne)),L.$minDistance!=null&&(L.$minDistance=Ze.castForQuery(null,L.$minDistance,ne)),Ue==="$within"){var Oe=ae.$center||ae.$centerSphere||ae.$box||ae.$polygon;if(!Oe)throw new Error("Bad $within parameter: "+JSON.stringify(L));ae=Oe}else if(Ue==="$near"&&typeof ae.type=="string"&&Array.isArray(ae.coordinates))ae=ae.coordinates;else if((Ue==="$near"||Ue==="$nearSphere"||Ue==="$geoIntersects")&&ae.$geometry&&typeof ae.$geometry.type=="string"&&Array.isArray(ae.$geometry.coordinates))ae.$maxDistance!=null&&(ae.$maxDistance=Ze.castForQuery(null,ae.$maxDistance,ne)),ae.$minDistance!=null&&(ae.$minDistance=Ze.castForQuery(null,ae.$minDistance,ne)),R(ae.$geometry)&&(ae.$geometry=ae.$geometry.toObject({transform:!1,virtuals:!1})),ae=ae.$geometry.coordinates;else if(Ue==="$geoWithin")if(ae.$geometry){R(ae.$geometry)&&(ae.$geometry=ae.$geometry.toObject({virtuals:!1}));var Le=ae.$geometry.type;if(k.indexOf(Le)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+Le+'", must be "Polygon" or "MultiPolygon"');ae=ae.$geometry.coordinates}else ae=ae.$box||ae.$polygon||ae.$center||ae.$centerSphere,R(ae)&&(ae=ae.toObject({virtuals:!1}));D(ae,Ze,ne);continue}}if(z.nested[H])continue;var Pe="strict"in ee?ee.strict:z.options.strict,ft=j(ee,z._userProvidedOptions,z.options,ne);if(ee.upsert&&Pe)throw Pe==="throw"?new S(H):new S(H,'Path "'+H+'" is not in schema, strict mode is `true`, and upsert is `true`.');if(ft==="throw")throw new S(H,'Path "'+H+`" is not in schema and strictQuery is 'throw'.`);ft&&delete W[H]}}else L=b(L,H),W[H]=L}return W}},7991:(d,f,a)=>{var u=a(4758);d.exports=C;var g,$=a(5455);C.ReadableState=R,a(3550).EventEmitter;var v=function(M,U){return M.listeners(U).length},S=a(5864),E=a(8317).Buffer,h=(a.g!==void 0?a.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},b=Object.create(a(7919));b.inherits=a(1679);var m=a(9838),p=void 0;p=m&&m.debuglog?m.debuglog("stream"):function(){};var _,y=a(6567),x=a(8639);b.inherits(C,S);var A=["error","close","destroy","pause","resume"];function R(M,U){M=M||{};var Z=U instanceof(g=g||a(1313));this.objectMode=!!M.objectMode,Z&&(this.objectMode=this.objectMode||!!M.readableObjectMode);var K=M.highWaterMark,oe=M.readableHighWaterMark,ie=this.objectMode?16:16384;this.highWaterMark=K||K===0?K:Z&&(oe||oe===0)?oe:ie,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=M.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,M.encoding&&(_||(_=a(136).I),this.decoder=new _(M.encoding),this.encoding=M.encoding)}function C(M){if(g=g||a(1313),!(this instanceof C))return new C(M);this._readableState=new R(M,this),this.readable=!0,M&&(typeof M.read=="function"&&(this._read=M.read),typeof M.destroy=="function"&&(this._destroy=M.destroy)),S.call(this)}function k(M,U,Z,K,oe){var ie,$e=M._readableState;return U===null?($e.reading=!1,function(ce,le){if(!le.ended){if(le.decoder){var ye=le.decoder.end();ye&&ye.length&&(le.buffer.push(ye),le.length+=le.objectMode?1:ye.length)}le.ended=!0,z(ce)}}(M,$e)):(oe||(ie=function(ce,le){var ye,_e;return _e=le,E.isBuffer(_e)||_e instanceof h||typeof le=="string"||le===void 0||ce.objectMode||(ye=new TypeError("Invalid non-string/buffer chunk")),ye}($e,U)),ie?M.emit("error",ie):$e.objectMode||U&&U.length>0?(typeof U=="string"||$e.objectMode||Object.getPrototypeOf(U)===E.prototype||(U=function(ce){return E.from(ce)}(U)),K?$e.endEmitted?M.emit("error",new Error("stream.unshift() after end event")):D(M,$e,U,!0):$e.ended?M.emit("error",new Error("stream.push() after EOF")):($e.reading=!1,$e.decoder&&!Z?(U=$e.decoder.write(U),$e.objectMode||U.length!==0?D(M,$e,U,!1):ee(M,$e)):D(M,$e,U,!1))):K||($e.reading=!1)),function(ce){return!ce.ended&&(ce.needReadable||ce.length<ce.highWaterMark||ce.length===0)}($e)}function D(M,U,Z,K){U.flowing&&U.length===0&&!U.sync?(M.emit("data",Z),M.read(0)):(U.length+=U.objectMode?1:Z.length,K?U.buffer.unshift(Z):U.buffer.push(Z),U.needReadable&&z(M)),ee(M,U)}Object.defineProperty(C.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(M){this._readableState&&(this._readableState.destroyed=M)}}),C.prototype.destroy=x.destroy,C.prototype._undestroy=x.undestroy,C.prototype._destroy=function(M,U){this.push(null),U(M)},C.prototype.push=function(M,U){var Z,K=this._readableState;return K.objectMode?Z=!0:typeof M=="string"&&((U=U||K.defaultEncoding)!==K.encoding&&(M=E.from(M,U),U=""),Z=!0),k(this,M,U,!1,Z)},C.prototype.unshift=function(M){return k(this,M,null,!0,!1)},C.prototype.isPaused=function(){return this._readableState.flowing===!1},C.prototype.setEncoding=function(M){return _||(_=a(136).I),this._readableState.decoder=new _(M),this._readableState.encoding=M,this};var j=8388608;function V(M,U){return M<=0||U.length===0&&U.ended?0:U.objectMode?1:M!=M?U.flowing&&U.length?U.buffer.head.data.length:U.length:(M>U.highWaterMark&&(U.highWaterMark=function(Z){return Z>=j?Z=j:(Z--,Z|=Z>>>1,Z|=Z>>>2,Z|=Z>>>4,Z|=Z>>>8,Z|=Z>>>16,Z++),Z}(M)),M<=U.length?M:U.ended?U.length:(U.needReadable=!0,0))}function z(M){var U=M._readableState;U.needReadable=!1,U.emittedReadable||(p("emitReadable",U.flowing),U.emittedReadable=!0,U.sync?u.nextTick(W,M):W(M))}function W(M){p("emit readable"),M.emit("readable"),be(M)}function ee(M,U){U.readingMore||(U.readingMore=!0,u.nextTick(ne,M,U))}function ne(M,U){for(var Z=U.length;!U.reading&&!U.flowing&&!U.ended&&U.length<U.highWaterMark&&(p("maybeReadMore read 0"),M.read(0),Z!==U.length);)Z=U.length;U.readingMore=!1}function Q(M){p("readable nexttick read 0"),M.read(0)}function se(M,U){U.reading||(p("resume read 0"),M.read(0)),U.resumeScheduled=!1,U.awaitDrain=0,M.emit("resume"),be(M),U.flowing&&!U.reading&&M.read(0)}function be(M){var U=M._readableState;for(p("flow",U.flowing);U.flowing&&M.read()!==null;);}function H(M,U){return U.length===0?null:(U.objectMode?Z=U.buffer.shift():!M||M>=U.length?(Z=U.decoder?U.buffer.join(""):U.buffer.length===1?U.buffer.head.data:U.buffer.concat(U.length),U.buffer.clear()):Z=function(K,oe,ie){var $e;return K<oe.head.data.length?($e=oe.head.data.slice(0,K),oe.head.data=oe.head.data.slice(K)):$e=K===oe.head.data.length?oe.shift():ie?function(ce,le){var ye=le.head,_e=1,q=ye.data;for(ce-=q.length;ye=ye.next;){var re=ye.data,fe=ce>re.length?re.length:ce;if(fe===re.length?q+=re:q+=re.slice(0,ce),(ce-=fe)==0){fe===re.length?(++_e,ye.next?le.head=ye.next:le.head=le.tail=null):(le.head=ye,ye.data=re.slice(fe));break}++_e}return le.length-=_e,q}(K,oe):function(ce,le){var ye=E.allocUnsafe(ce),_e=le.head,q=1;for(_e.data.copy(ye),ce-=_e.data.length;_e=_e.next;){var re=_e.data,fe=ce>re.length?re.length:ce;if(re.copy(ye,ye.length-ce,0,fe),(ce-=fe)==0){fe===re.length?(++q,_e.next?le.head=_e.next:le.head=le.tail=null):(le.head=_e,_e.data=re.slice(fe));break}++q}return le.length-=q,ye}(K,oe),$e}(M,U.buffer,U.decoder),Z);var Z}function P(M){var U=M._readableState;if(U.length>0)throw new Error('"endReadable()" called on non-empty stream');U.endEmitted||(U.ended=!0,u.nextTick(L,U,M))}function L(M,U){M.endEmitted||M.length!==0||(M.endEmitted=!0,U.readable=!1,U.emit("end"))}function F(M,U){for(var Z=0,K=M.length;Z<K;Z++)if(M[Z]===U)return Z;return-1}C.prototype.read=function(M){p("read",M),M=parseInt(M,10);var U=this._readableState,Z=M;if(M!==0&&(U.emittedReadable=!1),M===0&&U.needReadable&&(U.length>=U.highWaterMark||U.ended))return p("read: emitReadable",U.length,U.ended),U.length===0&&U.ended?P(this):z(this),null;if((M=V(M,U))===0&&U.ended)return U.length===0&&P(this),null;var K,oe=U.needReadable;return p("need readable",oe),(U.length===0||U.length-M<U.highWaterMark)&&p("length less than watermark",oe=!0),U.ended||U.reading?p("reading or ended",oe=!1):oe&&(p("do read"),U.reading=!0,U.sync=!0,U.length===0&&(U.needReadable=!0),this._read(U.highWaterMark),U.sync=!1,U.reading||(M=V(Z,U))),(K=M>0?H(M,U):null)===null?(U.needReadable=!0,M=0):U.length-=M,U.length===0&&(U.ended||(U.needReadable=!0),Z!==M&&U.ended&&P(this)),K!==null&&this.emit("data",K),K},C.prototype._read=function(M){this.emit("error",new Error("_read() is not implemented"))},C.prototype.pipe=function(M,U){var Z=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=M;break;case 1:K.pipes=[K.pipes,M];break;default:K.pipes.push(M)}K.pipesCount+=1,p("pipe count=%d opts=%j",K.pipesCount,U);var oe=U&&U.end===!1||M==={}.stdout||M==={}.stderr?fe:ie;function ie(){p("onend"),M.end()}K.endEmitted?u.nextTick(oe):Z.once("end",oe),M.on("unpipe",function we(Re,ke){p("onunpipe"),Re===Z&&ke&&ke.hasUnpiped===!1&&(ke.hasUnpiped=!0,p("cleanup"),M.removeListener("close",q),M.removeListener("finish",re),M.removeListener("drain",$e),M.removeListener("error",_e),M.removeListener("unpipe",we),Z.removeListener("end",ie),Z.removeListener("end",fe),Z.removeListener("data",ye),ce=!0,!K.awaitDrain||M._writableState&&!M._writableState.needDrain||$e())});var $e=function(we){return function(){var Re=we._readableState;p("pipeOnDrain",Re.awaitDrain),Re.awaitDrain&&Re.awaitDrain--,Re.awaitDrain===0&&v(we,"data")&&(Re.flowing=!0,be(we))}}(Z);M.on("drain",$e);var ce=!1,le=!1;function ye(we){p("ondata"),le=!1,M.write(we)!==!1||le||((K.pipesCount===1&&K.pipes===M||K.pipesCount>1&&F(K.pipes,M)!==-1)&&!ce&&(p("false write response, pause",K.awaitDrain),K.awaitDrain++,le=!0),Z.pause())}function _e(we){p("onerror",we),fe(),M.removeListener("error",_e),v(M,"error")===0&&M.emit("error",we)}function q(){M.removeListener("finish",re),fe()}function re(){p("onfinish"),M.removeListener("close",q),fe()}function fe(){p("unpipe"),Z.unpipe(M)}return Z.on("data",ye),function(we,Re,ke){if(typeof we.prependListener=="function")return we.prependListener(Re,ke);we._events&&we._events[Re]?$(we._events[Re])?we._events[Re].unshift(ke):we._events[Re]=[ke,we._events[Re]]:we.on(Re,ke)}(M,"error",_e),M.once("close",q),M.once("finish",re),M.emit("pipe",Z),K.flowing||(p("pipe resume"),Z.resume()),M},C.prototype.unpipe=function(M){var U=this._readableState,Z={hasUnpiped:!1};if(U.pipesCount===0)return this;if(U.pipesCount===1)return M&&M!==U.pipes||(M||(M=U.pipes),U.pipes=null,U.pipesCount=0,U.flowing=!1,M&&M.emit("unpipe",this,Z)),this;if(!M){var K=U.pipes,oe=U.pipesCount;U.pipes=null,U.pipesCount=0,U.flowing=!1;for(var ie=0;ie<oe;ie++)K[ie].emit("unpipe",this,{hasUnpiped:!1});return this}var $e=F(U.pipes,M);return $e===-1||(U.pipes.splice($e,1),U.pipesCount-=1,U.pipesCount===1&&(U.pipes=U.pipes[0]),M.emit("unpipe",this,Z)),this},C.prototype.on=function(M,U){var Z=S.prototype.on.call(this,M,U);if(M==="data")this._readableState.flowing!==!1&&this.resume();else if(M==="readable"){var K=this._readableState;K.endEmitted||K.readableListening||(K.readableListening=K.needReadable=!0,K.emittedReadable=!1,K.reading?K.length&&z(this):u.nextTick(Q,this))}return Z},C.prototype.addListener=C.prototype.on,C.prototype.resume=function(){var M=this._readableState;return M.flowing||(p("resume"),M.flowing=!0,function(U,Z){Z.resumeScheduled||(Z.resumeScheduled=!0,u.nextTick(se,U,Z))}(this,M)),this},C.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},C.prototype.wrap=function(M){var U=this,Z=this._readableState,K=!1;for(var oe in M.on("end",function(){if(p("wrapped end"),Z.decoder&&!Z.ended){var $e=Z.decoder.end();$e&&$e.length&&U.push($e)}U.push(null)}),M.on("data",function($e){p("wrapped data"),Z.decoder&&($e=Z.decoder.write($e)),Z.objectMode&&$e==null||(Z.objectMode||$e&&$e.length)&&(U.push($e)||(K=!0,M.pause()))}),M)this[oe]===void 0&&typeof M[oe]=="function"&&(this[oe]=function($e){return function(){return M[$e].apply(M,arguments)}}(oe));for(var ie=0;ie<A.length;ie++)M.on(A[ie],this.emit.bind(this,A[ie]));return this._read=function($e){p("wrapped _read",$e),K&&(K=!1,M.resume())},this},Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),C._fromList=H},8050:(d,f,a)=>{var u=f;u._reverse=function(g){var $={};return Object.keys(g).forEach(function(v){(0|v)==v&&(v|=0);var S=g[v];$[S]=v}),$},u.der=a(425)},8063:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,h),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,h,[`Schema hasn't been registered for model "`+m+`".
Use mongoose.model(name, schema)`])}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"MissingSchemaError"}),d.exports=S},8093:d=>{d.exports=Object},8133:(d,f,a)=>{var u=a(8995);d.exports=function(g){var $,v;g.$immutable?(g.$immutableSetter=($=g.path,v=g.options.immutable,function(S,E,h,b){if(this==null||this.$__==null||this.isNew||b&&b.overwriteImmutable||!(typeof v=="function"?v.call(this,this):v))return S;var m=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue($):this.$__getValue($);if(this.$__.strictMode==="throw"&&S!==m)throw new u($,"Path `"+$+"` is immutable and strict mode is set to throw.",!0);return m}),g.set(g.$immutableSetter)):g.$immutableSetter&&(g.setters=g.setters.filter(function(S){return S!==g.$immutableSetter}),delete g.$immutableSetter)}},8134:(d,f,a)=>{var u;d.exports=W,W.ReadableState=z,a(3550).EventEmitter;var g,$=function(ce,le){return ce.listeners(le).length},v=a(6871),S=a(5832).Buffer,E=(a.g!==void 0?a.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h=a(7199);g=h&&h.debuglog?h.debuglog("stream"):function(){};var b,m,p,_=a(6811),y=a(6222),x=a(9681).getHighWaterMark,A=a(198).F,R=A.ERR_INVALID_ARG_TYPE,C=A.ERR_STREAM_PUSH_AFTER_EOF,k=A.ERR_METHOD_NOT_IMPLEMENTED,D=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;a(1679)(W,v);var j=y.errorOrDestroy,V=["error","close","destroy","pause","resume"];function z(ce,le,ye){u=u||a(4560),ce=ce||{},typeof ye!="boolean"&&(ye=le instanceof u),this.objectMode=!!ce.objectMode,ye&&(this.objectMode=this.objectMode||!!ce.readableObjectMode),this.highWaterMark=x(this,ce,"readableHighWaterMark",ye),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ce.emitClose!==!1,this.autoDestroy=!!ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ce.encoding&&(b||(b=a(136).I),this.decoder=new b(ce.encoding),this.encoding=ce.encoding)}function W(ce){if(u=u||a(4560),!(this instanceof W))return new W(ce);var le=this instanceof u;this._readableState=new z(ce,this,le),this.readable=!0,ce&&(typeof ce.read=="function"&&(this._read=ce.read),typeof ce.destroy=="function"&&(this._destroy=ce.destroy)),v.call(this)}function ee(ce,le,ye,_e,q){g("readableAddChunk",le);var re,fe=ce._readableState;if(le===null)fe.reading=!1,function(we,Re){if(g("onEofChunk"),!Re.ended){if(Re.decoder){var ke=Re.decoder.end();ke&&ke.length&&(Re.buffer.push(ke),Re.length+=Re.objectMode?1:ke.length)}Re.ended=!0,Re.sync?be(we):(Re.needReadable=!1,Re.emittedReadable||(Re.emittedReadable=!0,H(we)))}}(ce,fe);else if(q||(re=function(we,Re){var ke,ue;return ue=Re,S.isBuffer(ue)||ue instanceof E||typeof Re=="string"||Re===void 0||we.objectMode||(ke=new R("chunk",["string","Buffer","Uint8Array"],Re)),ke}(fe,le)),re)j(ce,re);else if(fe.objectMode||le&&le.length>0)if(typeof le=="string"||fe.objectMode||Object.getPrototypeOf(le)===S.prototype||(le=function(we){return S.from(we)}(le)),_e)fe.endEmitted?j(ce,new D):ne(ce,fe,le,!0);else if(fe.ended)j(ce,new C);else{if(fe.destroyed)return!1;fe.reading=!1,fe.decoder&&!ye?(le=fe.decoder.write(le),fe.objectMode||le.length!==0?ne(ce,fe,le,!1):P(ce,fe)):ne(ce,fe,le,!1)}else _e||(fe.reading=!1,P(ce,fe));return!fe.ended&&(fe.length<fe.highWaterMark||fe.length===0)}function ne(ce,le,ye,_e){le.flowing&&le.length===0&&!le.sync?(le.awaitDrain=0,ce.emit("data",ye)):(le.length+=le.objectMode?1:ye.length,_e?le.buffer.unshift(ye):le.buffer.push(ye),le.needReadable&&be(ce)),P(ce,le)}Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(ce){this._readableState&&(this._readableState.destroyed=ce)}}),W.prototype.destroy=y.destroy,W.prototype._undestroy=y.undestroy,W.prototype._destroy=function(ce,le){le(ce)},W.prototype.push=function(ce,le){var ye,_e=this._readableState;return _e.objectMode?ye=!0:typeof ce=="string"&&((le=le||_e.defaultEncoding)!==_e.encoding&&(ce=S.from(ce,le),le=""),ye=!0),ee(this,ce,le,!1,ye)},W.prototype.unshift=function(ce){return ee(this,ce,null,!0,!1)},W.prototype.isPaused=function(){return this._readableState.flowing===!1},W.prototype.setEncoding=function(ce){b||(b=a(136).I);var le=new b(ce);this._readableState.decoder=le,this._readableState.encoding=this._readableState.decoder.encoding;for(var ye=this._readableState.buffer.head,_e="";ye!==null;)_e+=le.write(ye.data),ye=ye.next;return this._readableState.buffer.clear(),_e!==""&&this._readableState.buffer.push(_e),this._readableState.length=_e.length,this};var Q=1073741824;function se(ce,le){return ce<=0||le.length===0&&le.ended?0:le.objectMode?1:ce!=ce?le.flowing&&le.length?le.buffer.head.data.length:le.length:(ce>le.highWaterMark&&(le.highWaterMark=function(ye){return ye>=Q?ye=Q:(ye--,ye|=ye>>>1,ye|=ye>>>2,ye|=ye>>>4,ye|=ye>>>8,ye|=ye>>>16,ye++),ye}(ce)),ce<=le.length?ce:le.ended?le.length:(le.needReadable=!0,0))}function be(ce){var le=ce._readableState;g("emitReadable",le.needReadable,le.emittedReadable),le.needReadable=!1,le.emittedReadable||(g("emitReadable",le.flowing),le.emittedReadable=!0,{env:{}}.nextTick(H,ce))}function H(ce){var le=ce._readableState;g("emitReadable_",le.destroyed,le.length,le.ended),le.destroyed||!le.length&&!le.ended||(ce.emit("readable"),le.emittedReadable=!1),le.needReadable=!le.flowing&&!le.ended&&le.length<=le.highWaterMark,Z(ce)}function P(ce,le){le.readingMore||(le.readingMore=!0,{env:{}}.nextTick(L,ce,le))}function L(ce,le){for(;!le.reading&&!le.ended&&(le.length<le.highWaterMark||le.flowing&&le.length===0);){var ye=le.length;if(g("maybeReadMore read 0"),ce.read(0),ye===le.length)break}le.readingMore=!1}function F(ce){var le=ce._readableState;le.readableListening=ce.listenerCount("readable")>0,le.resumeScheduled&&!le.paused?le.flowing=!0:ce.listenerCount("data")>0&&ce.resume()}function M(ce){g("readable nexttick read 0"),ce.read(0)}function U(ce,le){g("resume",le.reading),le.reading||ce.read(0),le.resumeScheduled=!1,ce.emit("resume"),Z(ce),le.flowing&&!le.reading&&ce.read(0)}function Z(ce){var le=ce._readableState;for(g("flow",le.flowing);le.flowing&&ce.read()!==null;);}function K(ce,le){return le.length===0?null:(le.objectMode?ye=le.buffer.shift():!ce||ce>=le.length?(ye=le.decoder?le.buffer.join(""):le.buffer.length===1?le.buffer.first():le.buffer.concat(le.length),le.buffer.clear()):ye=le.buffer.consume(ce,le.decoder),ye);var ye}function oe(ce){var le=ce._readableState;g("endReadable",le.endEmitted),le.endEmitted||(le.ended=!0,{env:{}}.nextTick(ie,le,ce))}function ie(ce,le){if(g("endReadableNT",ce.endEmitted,ce.length),!ce.endEmitted&&ce.length===0&&(ce.endEmitted=!0,le.readable=!1,le.emit("end"),ce.autoDestroy)){var ye=le._writableState;(!ye||ye.autoDestroy&&ye.finished)&&le.destroy()}}function $e(ce,le){for(var ye=0,_e=ce.length;ye<_e;ye++)if(ce[ye]===le)return ye;return-1}W.prototype.read=function(ce){g("read",ce),ce=parseInt(ce,10);var le=this._readableState,ye=ce;if(ce!==0&&(le.emittedReadable=!1),ce===0&&le.needReadable&&((le.highWaterMark!==0?le.length>=le.highWaterMark:le.length>0)||le.ended))return g("read: emitReadable",le.length,le.ended),le.length===0&&le.ended?oe(this):be(this),null;if((ce=se(ce,le))===0&&le.ended)return le.length===0&&oe(this),null;var _e,q=le.needReadable;return g("need readable",q),(le.length===0||le.length-ce<le.highWaterMark)&&g("length less than watermark",q=!0),le.ended||le.reading?g("reading or ended",q=!1):q&&(g("do read"),le.reading=!0,le.sync=!0,le.length===0&&(le.needReadable=!0),this._read(le.highWaterMark),le.sync=!1,le.reading||(ce=se(ye,le))),(_e=ce>0?K(ce,le):null)===null?(le.needReadable=le.length<=le.highWaterMark,ce=0):(le.length-=ce,le.awaitDrain=0),le.length===0&&(le.ended||(le.needReadable=!0),ye!==ce&&le.ended&&oe(this)),_e!==null&&this.emit("data",_e),_e},W.prototype._read=function(ce){j(this,new k("_read()"))},W.prototype.pipe=function(ce,le){var ye=this,_e=this._readableState;switch(_e.pipesCount){case 0:_e.pipes=ce;break;case 1:_e.pipes=[_e.pipes,ce];break;default:_e.pipes.push(ce)}_e.pipesCount+=1,g("pipe count=%d opts=%j",_e.pipesCount,le);var q=le&&le.end===!1||ce==={}.stdout||ce==={}.stderr?Ae:re;function re(){g("onend"),ce.end()}_e.endEmitted?{env:{}}.nextTick(q):ye.once("end",q),ce.on("unpipe",function Ne(De,he){g("onunpipe"),De===ye&&he&&he.hasUnpiped===!1&&(he.hasUnpiped=!0,g("cleanup"),ce.removeListener("close",ue),ce.removeListener("finish",Ee),ce.removeListener("drain",fe),ce.removeListener("error",ke),ce.removeListener("unpipe",Ne),ye.removeListener("end",re),ye.removeListener("end",Ae),ye.removeListener("data",Re),we=!0,!_e.awaitDrain||ce._writableState&&!ce._writableState.needDrain||fe())});var fe=function(Ne){return function(){var De=Ne._readableState;g("pipeOnDrain",De.awaitDrain),De.awaitDrain&&De.awaitDrain--,De.awaitDrain===0&&$(Ne,"data")&&(De.flowing=!0,Z(Ne))}}(ye);ce.on("drain",fe);var we=!1;function Re(Ne){g("ondata");var De=ce.write(Ne);g("dest.write",De),De===!1&&((_e.pipesCount===1&&_e.pipes===ce||_e.pipesCount>1&&$e(_e.pipes,ce)!==-1)&&!we&&(g("false write response, pause",_e.awaitDrain),_e.awaitDrain++),ye.pause())}function ke(Ne){g("onerror",Ne),Ae(),ce.removeListener("error",ke),$(ce,"error")===0&&j(ce,Ne)}function ue(){ce.removeListener("finish",Ee),Ae()}function Ee(){g("onfinish"),ce.removeListener("close",ue),Ae()}function Ae(){g("unpipe"),ye.unpipe(ce)}return ye.on("data",Re),function(Ne,De,he){if(typeof Ne.prependListener=="function")return Ne.prependListener(De,he);Ne._events&&Ne._events[De]?Array.isArray(Ne._events[De])?Ne._events[De].unshift(he):Ne._events[De]=[he,Ne._events[De]]:Ne.on(De,he)}(ce,"error",ke),ce.once("close",ue),ce.once("finish",Ee),ce.emit("pipe",ye),_e.flowing||(g("pipe resume"),ye.resume()),ce},W.prototype.unpipe=function(ce){var le=this._readableState,ye={hasUnpiped:!1};if(le.pipesCount===0)return this;if(le.pipesCount===1)return ce&&ce!==le.pipes||(ce||(ce=le.pipes),le.pipes=null,le.pipesCount=0,le.flowing=!1,ce&&ce.emit("unpipe",this,ye)),this;if(!ce){var _e=le.pipes,q=le.pipesCount;le.pipes=null,le.pipesCount=0,le.flowing=!1;for(var re=0;re<q;re++)_e[re].emit("unpipe",this,{hasUnpiped:!1});return this}var fe=$e(le.pipes,ce);return fe===-1||(le.pipes.splice(fe,1),le.pipesCount-=1,le.pipesCount===1&&(le.pipes=le.pipes[0]),ce.emit("unpipe",this,ye)),this},W.prototype.on=function(ce,le){var ye=v.prototype.on.call(this,ce,le),_e=this._readableState;return ce==="data"?(_e.readableListening=this.listenerCount("readable")>0,_e.flowing!==!1&&this.resume()):ce==="readable"&&(_e.endEmitted||_e.readableListening||(_e.readableListening=_e.needReadable=!0,_e.flowing=!1,_e.emittedReadable=!1,g("on readable",_e.length,_e.reading),_e.length?be(this):_e.reading||{env:{}}.nextTick(M,this))),ye},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(ce,le){var ye=v.prototype.removeListener.call(this,ce,le);return ce==="readable"&&{env:{}}.nextTick(F,this),ye},W.prototype.removeAllListeners=function(ce){var le=v.prototype.removeAllListeners.apply(this,arguments);return ce!=="readable"&&ce!==void 0||{env:{}}.nextTick(F,this),le},W.prototype.resume=function(){var ce=this._readableState;return ce.flowing||(g("resume"),ce.flowing=!ce.readableListening,function(le,ye){ye.resumeScheduled||(ye.resumeScheduled=!0,{env:{}}.nextTick(U,le,ye))}(this,ce)),ce.paused=!1,this},W.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},W.prototype.wrap=function(ce){var le=this,ye=this._readableState,_e=!1;for(var q in ce.on("end",function(){if(g("wrapped end"),ye.decoder&&!ye.ended){var fe=ye.decoder.end();fe&&fe.length&&le.push(fe)}le.push(null)}),ce.on("data",function(fe){g("wrapped data"),ye.decoder&&(fe=ye.decoder.write(fe)),ye.objectMode&&fe==null||(ye.objectMode||fe&&fe.length)&&(le.push(fe)||(_e=!0,ce.pause()))}),ce)this[q]===void 0&&typeof ce[q]=="function"&&(this[q]=function(fe){return function(){return ce[fe].apply(ce,arguments)}}(q));for(var re=0;re<V.length;re++)ce.on(V[re],this.emit.bind(this,V[re]));return this._read=function(fe){g("wrapped _read",fe),_e&&(_e=!1,ce.resume())},this},typeof Symbol=="function"&&(W.prototype[Symbol.asyncIterator]=function(){return m===void 0&&(m=a(8493)),m(this)}),Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(W.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(W.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ce){this._readableState&&(this._readableState.flowing=ce)}}),W._fromList=K,Object.defineProperty(W.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(W.from=function(ce,le){return p===void 0&&(p=a(9271)),p(W,ce,le)})},8151:(d,f,a)=>{var u=a(5832).Buffer,g=a(7799),$=new(a(1257)),v=new g(24),S=new g(11),E=new g(10),h=new g(3),b=new g(7),m=a(1673),p=a(4276);function _(C,k){return k=k||"utf8",u.isBuffer(C)||(C=new u(C,k)),this._pub=new g(C),this}function y(C,k){return k=k||"utf8",u.isBuffer(C)||(C=new u(C,k)),this._priv=new g(C),this}d.exports=A;var x={};function A(C,k,D){this.setGenerator(k),this.__prime=new g(C),this._prime=g.mont(this.__prime),this._primeLen=C.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,D?(this.setPublicKey=_,this.setPrivateKey=y):this._primeCode=8}function R(C,k){var D=new u(C.toArray());return k?D.toString(k):D}Object.defineProperty(A.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(C,k){var D=k.toString("hex"),j=[D,C.toString(16)].join("_");if(j in x)return x[j];var V,z=0;if(C.isEven()||!m.simpleSieve||!m.fermatTest(C)||!$.test(C))return z+=1,z+=D==="02"||D==="05"?8:4,x[j]=z,z;switch($.test(C.shrn(1))||(z+=2),D){case"02":C.mod(v).cmp(S)&&(z+=8);break;case"05":(V=C.mod(E)).cmp(h)&&V.cmp(b)&&(z+=8);break;default:z+=4}return x[j]=z,z}(this.__prime,this.__gen)),this._primeCode}}),A.prototype.generateKeys=function(){return this._priv||(this._priv=new g(p(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},A.prototype.computeSecret=function(C){var k=(C=(C=new g(C)).toRed(this._prime)).redPow(this._priv).fromRed(),D=new u(k.toArray()),j=this.getPrime();if(D.length<j.length){var V=new u(j.length-D.length);V.fill(0),D=u.concat([V,D])}return D},A.prototype.getPublicKey=function(C){return R(this._pub,C)},A.prototype.getPrivateKey=function(C){return R(this._priv,C)},A.prototype.getPrime=function(C){return R(this.__prime,C)},A.prototype.getGenerator=function(C){return R(this._gen,C)},A.prototype.setGenerator=function(C,k){return k=k||"utf8",u.isBuffer(C)||(C=new u(C,k)),this.__gen=C,this._gen=new g(C),this}},8188:d=>{d.exports=URIError},8201:(d,f,a)=>{var u=a(2533),g=a(1471),$=a(1679),v=a(9732).Buffer,S={"des-ede3-cbc":g.CBC.instantiate(g.EDE),"des-ede3":g.EDE,"des-ede-cbc":g.CBC.instantiate(g.EDE),"des-ede":g.EDE,"des-cbc":g.CBC.instantiate(g.DES),"des-ecb":g.DES};function E(h){u.call(this);var b,m=h.mode.toLowerCase(),p=S[m];b=h.decrypt?"decrypt":"encrypt";var _=h.key;v.isBuffer(_)||(_=v.from(_)),m!=="des-ede"&&m!=="des-ede-cbc"||(_=v.concat([_,_.slice(0,8)]));var y=h.iv;v.isBuffer(y)||(y=v.from(y)),this._des=p.create({key:_,iv:y,type:b})}S.des=S["des-cbc"],S.des3=S["des-ede3-cbc"],d.exports=E,$(E,u),E.prototype._update=function(h){return v.from(this._des.update(h))},E.prototype._final=function(){return v.from(this._des.final())}},8213:d=>{function f(S){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},f(S)}function a(S){var E=typeof Map=="function"?new Map:void 0;return a=function(h){if(h===null||!function(m){try{return Function.toString.call(m).indexOf("[native code]")!==-1}catch{return typeof m=="function"}}(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(E!==void 0){if(E.has(h))return E.get(h);E.set(h,b)}function b(){return function(m,p,_){if(u())return Reflect.construct.apply(null,arguments);var y=[null];y.push.apply(y,p);var x=new(m.bind.apply(m,y));return _&&g(x,_.prototype),x}(h,arguments,$(this).constructor)}return b.prototype=Object.create(h.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g(b,h)},a(S)}function u(){try{var S=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u=function(){return!!S})()}function g(S,E){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,b){return h.__proto__=b,h},g(S,E)}function $(S){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},$(S)}var v=function(S){function E(){return function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}(this,E),function(b,m,p){return m=$(m),function(_,y){if(y&&(f(y)=="object"||typeof y=="function"))return y;if(y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(_)}(b,u()?Reflect.construct(m,p||[],$(b).constructor):m.apply(b,p))}(this,E,arguments)}return function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),m&&g(b,m)}(E,S),h=E,Object.defineProperty(h,"prototype",{writable:!1}),h;var h}(a(Error));Object.defineProperty(v.prototype,"name",{value:"MongooseError"}),d.exports=v},8235:(d,f,a)=>{var u=a(8213),g=a(6426),$=a(5098),v=a(7910);function S(E,h){if(this.$parentSchemaType=h&&h.$parentSchemaType,!this.$parentSchemaType)throw new u("Cannot create DocumentArrayElement schematype without a parent");delete h.$parentSchemaType,g.call(this,E,h,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0}S.schemaName="DocumentArrayElement",S.defaultOptions={},S.prototype=Object.create(g.prototype),S.prototype.constructor=S,S.prototype.cast=function(){var E;return(E=this.$parentSchemaType).cast.apply(E,arguments)[0]},S.prototype.doValidate=function(E,h,b,m){var p=v(this.caster,E);return!E||E instanceof p||(E=new p(E,b,null,null,m&&m.index!=null?m.index:null)),$.prototype.doValidate.call(this,E,h,b,m)},S.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;var E=g.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,E.caster=this.caster,E.schema=this.schema,E},d.exports=S},8250:(d,f,a)=>{var u=a(5832).Buffer,g=a(6365),$=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,v=g.Binary;function S(E){typeof E!="string"&&(E="");var h,b=(h=E.replace(/[{}-]/g,""))!=null&&u.from(h,"hex"),m=new g(b);return m._subtype=4,m}d.exports=function(E){if(E==null)return E;function h(b){var m=new g(b);return m._subtype=4,m}if(typeof E=="string"){if($.test(E))return S(E);throw new Error('"'.concat(E,'" is not a valid UUID string'))}if(u.isBuffer(E))return h(E);if(E instanceof v)return h(E.value(!0));if(E.toString&&E.toString!==Object.prototype.toString&&$.test(E.toString()))return S(E.toString());throw new Error('"'.concat(E,'" cannot be casted to a UUID'))},d.exports.UUID_FORMAT=$},8260:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}var g=a(1679),$=a(1620).Reporter,v=a(5832).Buffer;function S(h,b){$.call(this,b),v.isBuffer(h)?(this.base=h,this.offset=0,this.length=h.length):this.error("Input not Buffer")}function E(h,b){if(Array.isArray(h))this.length=0,this.value=h.map(function(m){return m instanceof E||(m=new E(m,b)),this.length+=m.length,m},this);else if(typeof h=="number"){if(!(0<=h&&h<=255))return b.error("non-byte EncoderBuffer value");this.value=h,this.length=1}else if(typeof h=="string")this.value=h,this.length=v.byteLength(h);else{if(!v.isBuffer(h))return b.error("Unsupported type: "+u(h));this.value=h,this.length=h.length}}g(S,$),f.t=S,S.prototype.save=function(){return{offset:this.offset,reporter:$.prototype.save.call(this)}},S.prototype.restore=function(h){var b=new S(this.base);return b.offset=h.offset,b.length=this.offset,this.offset=h.offset,$.prototype.restore.call(this,h.reporter),b},S.prototype.isEmpty=function(){return this.offset===this.length},S.prototype.readUInt8=function(h){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(h||"DecoderBuffer overrun")},S.prototype.skip=function(h,b){if(!(this.offset+h<=this.length))return this.error(b||"DecoderBuffer overrun");var m=new S(this.base);return m._reporterState=this._reporterState,m.offset=this.offset,m.length=this.offset+h,this.offset+=h,m},S.prototype.raw=function(h){return this.base.slice(h?h.offset:this.offset,this.length)},f.d=E,E.prototype.join=function(h,b){return h||(h=new v(this.length)),b||(b=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(m){m.join(h,b),b+=m.length}):(typeof this.value=="number"?h[b]=this.value:typeof this.value=="string"?h.write(this.value,b):v.isBuffer(this.value)&&this.value.copy(h,b),b+=this.length)),h}},8285:(d,f,a)=>{var u=a(2400),g=a(2580),$=!1;d.exports=function(){return $?g:u},d.exports.setBrowser=function(v){$=v}},8297:d=>{function f(y,x){var A=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(!A){if(Array.isArray(y)||(A=u(y))||x){A&&(y=A);var R=0,C=function(){};return{s:C,n:function(){return R>=y.length?{done:!0}:{done:!1,value:y[R++]}},e:function(V){throw V},f:C}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var k,D=!0,j=!1;return{s:function(){A=A.call(y)},n:function(){var V=A.next();return D=V.done,V},e:function(V){j=!0,k=V},f:function(){try{D||A.return==null||A.return()}finally{if(j)throw k}}}}function a(y){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},a(y)}function u(y,x){if(y){if(typeof y=="string")return g(y,x);var A={}.toString.call(y).slice(8,-1);return A==="Object"&&y.constructor&&(A=y.constructor.name),A==="Map"||A==="Set"?Array.from(y):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?g(y,x):void 0}}function g(y,x){(x==null||x>y.length)&&(x=y.length);for(var A=0,R=Array(x);A<x;A++)R[A]=y[A];return R}function $(y,x,A){if(v())return Reflect.construct.apply(null,arguments);var R=[null];R.push.apply(R,x);var C=new(y.bind.apply(y,R));return C}function v(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v=function(){return!!y})()}function S(){this._pres=new Map,this._posts=new Map}function E(y,x,A,R,C,k,D){return k.useErrorHandlers?y.execPost(A,R,C,{error:x},function(j){return typeof D=="function"&&D(j)}):typeof D=="function"&&D(x)}function h(y,x,A,R){var C;try{C=y.apply(x,A)}catch(k){return R(k)}b(C)&&C.then(function(){return R()},function(k){return R(k)})}function b(y){return a(y)==="object"&&y!==null&&typeof y.then=="function"}function m(y){var x=!1,A=this;return function(){var R=arguments;if(!x)return x=!0,p(function(){return y.apply(A,R)})}}S.skipWrappedFunction=function(){if(!(this instanceof S.skipWrappedFunction))return $(S.skipWrappedFunction,Array.prototype.slice.call(arguments));this.args=Array.prototype.slice.call(arguments)},S.overwriteResult=function(){if(!(this instanceof S.overwriteResult))return $(S.overwriteResult,Array.prototype.slice.call(arguments));this.args=Array.prototype.slice.call(arguments)},S.prototype.execPre=function(y,x,A,R){arguments.length===3&&(R=A,A=[]);var C=this._pres.get(y)||[],k=C.length,D=C.numAsync||0,j=0,V=D,z=!1,W=A,ee=null;if(!k)return p(function(){R(null)});function ne(){if(!(j>=k)){var se=C[j];if(se.isAsync){var be=[m(Q),m(function(M){if(M){if(z)return;if(!(M instanceof S.skipWrappedFunction))return z=!0,R(M);ee=M}if(--V==0&&j>=k)return R(ee)})];h(se.fn,x,be,be[0])}else if(se.fn.length>0){for(var H=[m(Q)],P=arguments.length>=2?arguments:[null].concat(W),L=1;L<P.length;++L)L===P.length-1&&typeof P[L]=="function"||H.push(P[L]);h(se.fn,x,H,H[0])}else{var F=null;try{F=se.fn.call(x)}catch(M){if(M!=null)return R(M)}if(b(F))F.then(function(){return Q()},function(M){return Q(M)});else{if(++j>=k)return V>0?void 0:p(function(){R(ee)});ne()}}}}function Q(se){if(se){if(z)return;if(!(se instanceof S.skipWrappedFunction))return z=!0,R(se);ee=se}if(++j>=k)return V>0?void 0:R(ee);ne.apply(x,arguments)}ne.apply(null,[null].concat(A))},S.prototype.execPreSync=function(y,x,A){for(var R=this._pres.get(y)||[],C=R.length,k=0;k<C;++k)R[k].fn.apply(x,A||[])},S.prototype.execPost=function(y,x,A,R,C){arguments.length<5&&(C=R,R=null);var k=this._posts.get(y)||[],D=k.length,j=0,V=null;if(R&&R.error&&(V=R.error),!D)return p(function(){C.apply(null,[V].concat(A))});(function z(){for(var W=k[j].fn,ee=0,ne=A.length,Q=[],se=0;se<ne;++se)ee+=A[se]&&A[se]._kareemIgnore?0:1,A[se]&&A[se]._kareemIgnore||Q.push(A[se]);if(V)if(_(k[j],ee)){var be=m(function(F){if(F){if(F instanceof S.overwriteResult)return A=F.args,++j>=D?C.call(null,V):z();V=F}if(++j>=D)return C.call(null,V);z()});h(W,x,[V].concat(Q).concat([be]),be)}else{if(++j>=D)return C.call(null,V);z()}else{var H=m(function(F){return F?F instanceof S.overwriteResult?(A=F.args,++j>=D?C.apply(null,[null].concat(A)):z()):(V=F,z()):++j>=D?C.apply(null,[null].concat(A)):void z()});if(_(k[j],ee))return++j>=D?C.apply(null,[null].concat(A)):z();if(W.length===ee+1)h(W,x,Q.concat([H]),H);else{var P,L;try{L=W.apply(x,Q)}catch(F){P=F,V=F}if(b(L))return L.then(function(F){H(F instanceof S.overwriteResult?F:null)},function(F){return H(F)});if(L instanceof S.overwriteResult&&(A=L.args),++j>=D)return C.apply(null,[P].concat(A));z()}}})()},S.prototype.execPostSync=function(y,x,A){for(var R=this._posts.get(y)||[],C=R.length,k=0;k<C;++k){var D=R[k].fn.apply(x,A||[]);D instanceof S.overwriteResult&&(A=D.args)}return A},S.prototype.createWrapperSync=function(y,x){var A=this;return function(){A.execPreSync(y,this,arguments);var R=x.apply(this,arguments);return A.execPostSync(y,this,[R])[0]}},S.prototype.wrap=function(y,x,A,R,C){var k=R.length>0?R[R.length-1]:null,D=Array.from(R);typeof k=="function"&&D.pop();var j=this,V=(C=C||{}).checkForPromise;this.execPre(y,A,R,function(z){if(z&&!(z instanceof S.skipWrappedFunction)){for(var W=C.numCallbackParams||0,ee=C.contextParameter?[A]:[],ne=ee.length;ne<W;++ne)ee.push(null);return E(j,z,y,A,ee,C,k)}var Q,se,be=x.length;if(z instanceof S.skipWrappedFunction)return Q=z.args[0],H.apply(void 0,[null].concat(function(P){if(Array.isArray(P))return g(P)}(se=z.args)||function(P){if(typeof Symbol<"u"&&P[Symbol.iterator]!=null||P["@@iterator"]!=null)return Array.from(P)}(se)||u(se)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()));try{Q=x.apply(A,D.concat(H))}catch(P){return H(P)}if(V){if(b(Q))return Q.then(function(P){return H(null,P)},function(P){return H(P)});if(be<D.length+1)return H(null,Q)}function H(){var P=Array.from(arguments);if(P.shift(),C.nullResultByDefault&&P.length===0&&P.push(null),arguments[0])return E(j,arguments[0],y,A,P,C,k);j.execPost(y,A,P,function(){k!==null&&(arguments[0]?k(arguments[0]):k.apply(A,arguments))})}})},S.prototype.filter=function(y){for(var x=this,A=this.clone(),R=Array.from(A._pres.keys()),C=function(){var ee=D[k],ne=x._pres.get(ee).map(function(Q){return Object.assign({},Q,{name:ee})}).filter(y);if(ne.length===0)return A._pres.delete(ee),1;ne.numAsync=ne.filter(function(Q){return Q.isAsync}).length,A._pres.set(ee,ne)},k=0,D=R;k<D.length;k++)C();for(var j=Array.from(A._posts.keys()),V=function(){var ee=W[z],ne=x._posts.get(ee).map(function(Q){return Object.assign({},Q,{name:ee})}).filter(y);if(ne.length===0)return A._posts.delete(ee),1;A._posts.set(ee,ne)},z=0,W=j;z<W.length;z++)V();return A},S.prototype.hasHooks=function(y){return this._pres.has(y)||this._posts.has(y)},S.prototype.createWrapper=function(y,x,A,R){var C=this;return this.hasHooks(y)?function(){var k=A||this;C.wrap(y,x,k,Array.from(arguments),R)}:function(){var k=arguments,D=this;p(function(){return x.apply(D,k)})}},S.prototype.pre=function(y,x,A,R,C){var k={};a(x)==="object"&&x!==null?x=(k=x).isAsync:typeof arguments[1]!="boolean"&&(A=x,x=!1);var D=this._pres.get(y)||[];if(this._pres.set(y,D),x&&(D.numAsync=D.numAsync||0,++D.numAsync),typeof A!="function")throw new Error('pre() requires a function, got "'+a(A)+'"');return C?D.unshift(Object.assign({},k,{fn:A,isAsync:x})):D.push(Object.assign({},k,{fn:A,isAsync:x})),this},S.prototype.post=function(y,x,A,R){var C=this._posts.get(y)||[];if(typeof x=="function"&&(R=!!A,A=x,x={}),typeof A!="function")throw new Error('post() requires a function, got "'+a(A)+'"');return R?C.unshift(Object.assign({},x,{fn:A})):C.push(Object.assign({},x,{fn:A})),this._posts.set(y,C),this},S.prototype.clone=function(){var y,x=new S,A=f(this._pres.keys());try{for(A.s();!(y=A.n()).done;){var R=y.value,C=this._pres.get(R).slice();C.numAsync=this._pres.get(R).numAsync,x._pres.set(R,C)}}catch(V){A.e(V)}finally{A.f()}var k,D=f(this._posts.keys());try{for(D.s();!(k=D.n()).done;){var j=k.value;x._posts.set(j,this._posts.get(j).slice())}}catch(V){D.e(V)}finally{D.f()}return x},S.prototype.merge=function(y,x){var A,R=(x=arguments.length===1||x)?this.clone():this,C=f(y._pres.keys());try{var k=function(){var z=A.value,W=R._pres.get(z)||[],ee=y._pres.get(z).filter(function(Q){return W.map(function(se){return se.fn}).indexOf(Q.fn)===-1}),ne=W.concat(ee);ne.numAsync=W.numAsync||0,ne.numAsync+=ee.filter(function(Q){return Q.isAsync}).length,R._pres.set(z,ne)};for(C.s();!(A=C.n()).done;)k()}catch(z){C.e(z)}finally{C.f()}var D,j=f(y._posts.keys());try{var V=function(){var z=D.value,W=R._posts.get(z)||[],ee=y._posts.get(z).filter(function(ne){return W.indexOf(ne)===-1});R._posts.set(z,W.concat(ee))};for(j.s();!(D=j.n()).done;)V()}catch(z){j.e(z)}finally{j.f()}return R};var p=a({env:{}})==="object"&&{}!==null&&{}.nextTick||function(y){setTimeout(y,0)};function _(y,x){return!!y.errorHandler||y.fn.length===x+2}d.exports=S},8317:(d,f,a)=>{var u=a(5832),g=u.Buffer;function $(S,E){for(var h in S)E[h]=S[h]}function v(S,E,h){return g(S,E,h)}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?d.exports=u:($(u,f),f.Buffer=v),$(g,v),v.from=function(S,E,h){if(typeof S=="number")throw new TypeError("Argument must not be a number");return g(S,E,h)},v.alloc=function(S,E,h){if(typeof S!="number")throw new TypeError("Argument must be a number");var b=g(S);return E!==void 0?typeof h=="string"?b.fill(E,h):b.fill(E):b.fill(0),b},v.allocUnsafe=function(S){if(typeof S!="number")throw new TypeError("Argument must be a number");return g(S)},v.allocUnsafeSlow=function(S){if(typeof S!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(S)}},8330:(d,f,a)=>{var u=a(1679),g=a(5832).Buffer,$=a(3879);function v(S){$.call(this,S),this.enc="pem"}u(v,$),d.exports=v,v.prototype.decode=function(S,E){for(var h=S.toString().split(/[\r\n]+/g),b=E.label.toUpperCase(),m=/^-----(BEGIN|END) ([^-]+)-----$/,p=-1,_=-1,y=0;y<h.length;y++){var x=h[y].match(m);if(x!==null&&x[2]===b){if(p!==-1){if(x[1]!=="END")break;_=y;break}if(x[1]!=="BEGIN")break;p=y}}if(p===-1||_===-1)throw new Error("PEM section not found for: "+b);var A=h.slice(p+1,_).join("");A.replace(/[^a-z0-9\+\/=]+/gi,"");var R=new g(A,"base64");return $.prototype.decode.call(this,R,E)}},8418:(d,f,a)=>{var u=a(1679),g=a(2655);function $(v){g.call(this,v),this.enc="pem"}u($,g),d.exports=$,$.prototype.encode=function(v,S){for(var E=g.prototype.encode.call(this,v).toString("base64"),h=["-----BEGIN "+S.label+"-----"],b=0;b<E.length;b+=64)h.push(E.slice(b,b+64));return h.push("-----END "+S.label+"-----"),h.join(`
`)}},8433:(d,f,a)=>{function u(b){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u(b)}var g=a(7799),$=a(1970),v=$.assert,S=$.cachedProperty,E=$.parseBytes;function h(b,m){this.eddsa=b,u(m)!=="object"&&(m=E(m)),Array.isArray(m)&&(v(m.length===2*b.encodingLength,"Signature has invalid size"),m={R:m.slice(0,b.encodingLength),S:m.slice(b.encodingLength)}),v(m.R&&m.S,"Signature without R or S"),b.isPoint(m.R)&&(this._R=m.R),m.S instanceof g&&(this._S=m.S),this._Rencoded=Array.isArray(m.R)?m.R:m.Rencoded,this._Sencoded=Array.isArray(m.S)?m.S:m.Sencoded}S(h,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),S(h,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),S(h,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),S(h,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),h.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},h.prototype.toHex=function(){return $.encode(this.toBytes(),"hex").toUpperCase()},d.exports=h},8435:d=>{d.exports=Math.min},8442:(d,f,a)=>{var u=a(1898);d.exports=function(g){for(var $=0,v=Object.values(u);$<v.length;$++)(0,v[$])(g,{deduplicate:!0});g.plugins=Object.values(u).map(function(S){return{fn:S,opts:{deduplicate:!0}}}).concat(g.plugins)}},8493:(d,f,a)=>{function u(k){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},u(k)}var g;function $(k,D,j){return(D=function(V){var z=function(W){if(u(W)!=="object"||W===null)return W;var ee=W[Symbol.toPrimitive];if(ee!==void 0){var ne=ee.call(W,"string");if(u(ne)!=="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(W)}(V);return u(z)==="symbol"?z:String(z)}(D))in k?Object.defineProperty(k,D,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[D]=j,k}var v=a(8500),S=Symbol("lastResolve"),E=Symbol("lastReject"),h=Symbol("error"),b=Symbol("ended"),m=Symbol("lastPromise"),p=Symbol("handlePromise"),_=Symbol("stream");function y(k,D){return{value:k,done:D}}function x(k){var D=k[S];if(D!==null){var j=k[_].read();j!==null&&(k[m]=null,k[S]=null,k[E]=null,D(y(j,!1)))}}function A(k){({env:{}}).nextTick(x,k)}var R=Object.getPrototypeOf(function(){}),C=Object.setPrototypeOf(($(g={get stream(){return this[_]},next:function(){var k=this,D=this[h];if(D!==null)return Promise.reject(D);if(this[b])return Promise.resolve(y(void 0,!0));if(this[_].destroyed)return new Promise(function(W,ee){({env:{}}).nextTick(function(){k[h]?ee(k[h]):W(y(void 0,!0))})});var j,V=this[m];if(V)j=new Promise(function(W,ee){return function(ne,Q){W.then(function(){ee[b]?ne(y(void 0,!0)):ee[p](ne,Q)},Q)}}(V,this));else{var z=this[_].read();if(z!==null)return Promise.resolve(y(z,!1));j=new Promise(this[p])}return this[m]=j,j}},Symbol.asyncIterator,function(){return this}),$(g,"return",function(){var k=this;return new Promise(function(D,j){k[_].destroy(null,function(V){V?j(V):D(y(void 0,!0))})})}),g),R);d.exports=function(k){var D,j=Object.create(C,($(D={},_,{value:k,writable:!0}),$(D,S,{value:null,writable:!0}),$(D,E,{value:null,writable:!0}),$(D,h,{value:null,writable:!0}),$(D,b,{value:k._readableState.endEmitted,writable:!0}),$(D,p,{value:function(V,z){var W=j[_].read();W?(j[m]=null,j[S]=null,j[E]=null,V(y(W,!1))):(j[S]=V,j[E]=z)},writable:!0}),D));return j[m]=null,v(k,function(V){if(V&&V.code!=="ERR_STREAM_PREMATURE_CLOSE"){var z=j[E];return z!==null&&(j[m]=null,j[S]=null,j[E]=null,z(V)),void(j[h]=V)}var W=j[S];W!==null&&(j[m]=null,j[S]=null,j[E]=null,W(y(void 0,!0))),j[b]=!0}),k.on("readable",A.bind(null,j)),j}},8499:(d,f,a)=>{var u=a(8953);d.exports=function(g){var $=this!=null?this.path:null;return u(g,$)}},8500:(d,f,a)=>{var u=a(198).F.ERR_STREAM_PREMATURE_CLOSE;function g(){}d.exports=function $(v,S,E){if(typeof S=="function")return $(v,null,S);S||(S={}),E=function(k){var D=!1;return function(){if(!D){D=!0;for(var j=arguments.length,V=new Array(j),z=0;z<j;z++)V[z]=arguments[z];k.apply(this,V)}}}(E||g);var h=S.readable||S.readable!==!1&&v.readable,b=S.writable||S.writable!==!1&&v.writable,m=function(){v.writable||_()},p=v._writableState&&v._writableState.finished,_=function(){b=!1,p=!0,h||E.call(v)},y=v._readableState&&v._readableState.endEmitted,x=function(){h=!1,y=!0,b||E.call(v)},A=function(k){E.call(v,k)},R=function(){var k;return h&&!y?(v._readableState&&v._readableState.ended||(k=new u),E.call(v,k)):b&&!p?(v._writableState&&v._writableState.ended||(k=new u),E.call(v,k)):void 0},C=function(){v.req.on("finish",_)};return function(k){return k.setHeader&&typeof k.abort=="function"}(v)?(v.on("complete",_),v.on("abort",R),v.req?C():v.on("request",C)):b&&!v._writableState&&(v.on("end",m),v.on("close",m)),v.on("end",x),v.on("finish",_),S.error!==!1&&v.on("error",A),v.on("close",R),function(){v.removeListener("complete",_),v.removeListener("abort",R),v.removeListener("request",C),v.req&&v.req.removeListener("finish",_),v.removeListener("end",m),v.removeListener("close",m),v.removeListener("finish",_),v.removeListener("end",x),v.removeListener("error",A),v.removeListener("close",R)}}},8533:(d,f,a)=>{var u=a(5832).Buffer;function g(h){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},g(h)}function $(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($=function(){return!!h})()}function v(h){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},v(h)}function S(h,b){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},S(h,b)}a(7591).set(a(4026));var E=a(8285);E.setBrowser(!0),f.Error=a(3672),f.Schema=a(7058),f.Types=a(9600),f.VirtualType=a(622),f.SchemaType=a(6426),f.SchemaTypeOptions=a(8879),f.utils=a(8768),f.Document=E(),f.model=function(h,b){var m=function(p){function _(x,A){return function(R,C){if(!(R instanceof C))throw new TypeError("Cannot call a class as a function")}(this,_),function(R,C,k){return C=v(C),function(D,j){if(j&&(g(j)=="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}(D)}(R,$()?Reflect.construct(C,k||[],v(R).constructor):C.apply(R,k))}(this,_,[x,b,A])}return function(x,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(A&&A.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),A&&S(x,A)}(_,p),y=_,Object.defineProperty(y,"prototype",{writable:!1}),y;var y}(f.Document);return m.modelName=h,m},typeof window<"u"&&(window.mongoose=d.exports,window.Buffer=u)},8629:(d,f,a)=>{var u={ECB:a(9907),CBC:a(5459),CFB:a(4488),CFB8:a(6322),CFB1:a(4937),OFB:a(4252),CTR:a(2538),GCM:a(2538)},g=a(3219);for(var $ in g)g[$].module=u[g[$].mode];d.exports=g},8633:d=>{d.exports=Math.pow},8639:(d,f,a)=>{var u=a(4758);function g($,v){$.emit("error",v)}d.exports={destroy:function($,v){var S=this,E=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return E||h?(v?v($):$&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,u.nextTick(g,this,$)):u.nextTick(g,this,$)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy($||null,function(b){!v&&b?S._writableState?S._writableState.errorEmitted||(S._writableState.errorEmitted=!0,u.nextTick(g,S,b)):u.nextTick(g,S,b):v&&v(b)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},8677:(d,f,a)=>{var u=a(2696);d.exports=function(g,$){if(g==null)return null;for(var v=0,S=Object.keys(g);v<S.length;v++){var E=g[S[v]];if(E.schema&&E.schema.discriminatorMapping&&u(E.schema.discriminatorMapping.value,$))return E}return null}},8699:(d,f,a)=>{f.pbkdf2=a(2367),f.pbkdf2Sync=a(245)},8728:(d,f,a)=>{function u(D,j){var V=Object.keys(D);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(D);j&&(z=z.filter(function(W){return Object.getOwnPropertyDescriptor(D,W).enumerable})),V.push.apply(V,z)}return V}function g(D){for(var j=1;j<arguments.length;j++){var V=arguments[j]!=null?arguments[j]:{};j%2?u(Object(V),!0).forEach(function(z){$(D,z,V[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(V)):u(Object(V)).forEach(function(z){Object.defineProperty(D,z,Object.getOwnPropertyDescriptor(V,z))})}return D}function $(D,j,V){return(j=function(z){var W=function(ee){if(v(ee)!="object"||!ee)return ee;var ne=ee[Symbol.toPrimitive];if(ne!==void 0){var Q=ne.call(ee,"string");if(v(Q)!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ee)}(z);return v(W)=="symbol"?W:W+""}(j))in D?Object.defineProperty(D,j,{value:V,enumerable:!0,configurable:!0,writable:!0}):D[j]=V,D}function v(D){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},v(D)}function S(D,j){(j==null||j>D.length)&&(j=D.length);for(var V=0,z=Array(j);V<j;V++)z[V]=D[V];return z}var E=a(6426),h=a(3672),b=a(9528),m=a(1244),p=a(4327),_=a(8768),y=a(3305),x=E.CastError;function A(D,j){this.enumValues=[],this.regExp=null,E.call(this,D,j,"String")}function R(D,j){return this.castForQuery(null,D,j)}function C(D){return D==null?this._castNullish(D):this.cast(D,this)}A.schemaName="String",A.defaultOptions={},A.prototype=Object.create(E.prototype),A.prototype.constructor=A,Object.defineProperty(A.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:b}),A._cast=m,A.cast=function(D){return arguments.length===0||(D===!1&&(D=this._defaultCaster),this._cast=D),this._cast},A._defaultCaster=function(D){if(D!=null&&typeof D!="string")throw new Error;return D},A.get=E.get,A.set=E.set,A.setters=[],A._checkRequired=function(D){return(D instanceof String||typeof D=="string")&&D.length},A.checkRequired=E.checkRequired,A.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function(ne){return ne.validator!==this.enumValidator},this),this.enumValidator=!1),arguments[0]===void 0||arguments[0]===!1)return this;var D,j;_.isObject(arguments[0])?Array.isArray(arguments[0].values)?(D=arguments[0].values,j=arguments[0].message):(D=_.object.vals(arguments[0]),j=h.messages.String.enum):(D=arguments,j=h.messages.String.enum);var V,z=function(ne,Q){var se=typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(!se){if(Array.isArray(ne)||(se=function(M,U){if(M){if(typeof M=="string")return S(M,U);var Z={}.toString.call(M).slice(8,-1);return Z==="Object"&&M.constructor&&(Z=M.constructor.name),Z==="Map"||Z==="Set"?Array.from(M):Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z)?S(M,U):void 0}}(ne))||Q){se&&(ne=se);var be=0,H=function(){};return{s:H,n:function(){return be>=ne.length?{done:!0}:{done:!1,value:ne[be++]}},e:function(M){throw M},f:H}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P,L=!0,F=!1;return{s:function(){se=se.call(ne)},n:function(){var M=se.next();return L=M.done,M},e:function(M){F=!0,P=M},f:function(){try{L||se.return==null||se.return()}finally{if(F)throw P}}}}(D);try{for(z.s();!(V=z.n()).done;){var W=V.value;W!==void 0&&this.enumValues.push(this.cast(W))}}catch(ne){z.e(ne)}finally{z.f()}var ee=this.enumValues;return this.enumValidator=function(ne){return ne==null||~ee.indexOf(ne)},this.validators.push({validator:this.enumValidator,message:j,type:"enum",enumValues:ee}),this},A.prototype.lowercase=function(D){var j=this;return arguments.length>0&&!D?this:this.set(function(V){return typeof V!="string"&&(V=j.cast(V)),V&&V.toLowerCase()})},A.prototype.uppercase=function(D){var j=this;return arguments.length>0&&!D?this:this.set(function(V){return typeof V!="string"&&(V=j.cast(V)),V&&V.toUpperCase()})},A.prototype.trim=function(D){var j=this;return arguments.length>0&&!D?this:this.set(function(V){return typeof V!="string"&&(V=j.cast(V)),V&&V.trim()})},A.prototype.minlength=function(D,j){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(z){return z.validator!==this.minlengthValidator},this)),D!=null){var V=j||h.messages.String.minlength;V=V.replace(/{MINLENGTH}/,D),this.validators.push({validator:this.minlengthValidator=function(z){return z===null||z.length>=D},message:V,type:"minlength",minlength:D})}return this},A.prototype.minLength=A.prototype.minlength,A.prototype.maxlength=function(D,j){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(z){return z.validator!==this.maxlengthValidator},this)),D!=null){var V=j||h.messages.String.maxlength;V=V.replace(/{MAXLENGTH}/,D),this.validators.push({validator:this.maxlengthValidator=function(z){return z===null||z.length<=D},message:V,type:"maxlength",maxlength:D})}return this},A.prototype.maxLength=A.prototype.maxlength,A.prototype.match=function(D,j){var V=j||h.messages.String.match;return this.validators.push({validator:function(z){return!!D&&(D.lastIndex=0,z==null||z===""||D.test(z))},message:V,type:"regexp",regexp:D}),this},A.prototype.checkRequired=function(D,j){return v(D)==="object"&&E._isRef(this,D,j,!0)?D!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():A.checkRequired())(D)},A.prototype.cast=function(D,j,V,z,W){if(typeof D!="string"&&E._isRef(this,D,j,V))return this._castRef(D,j,V,W);var ee;ee=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():A.cast();try{return ee(D)}catch{throw new x("string",D,this.path,null,this)}};var k=g(g({},E.prototype.$conditionalHandlers),{},{$all:function(D,j){var V=this;return Array.isArray(D)?D.map(function(z){return V.castForQuery(null,z,j)}):[this.castForQuery(null,D,j)]},$gt:R,$gte:R,$lt:R,$lte:R,$options:C,$regex:function(D){return Object.prototype.toString.call(D)==="[object RegExp]"?D:C.call(this,D)},$not:R});Object.defineProperty(A.prototype,"$conditionalHandlers",{configurable:!1,enumerable:!1,writable:!1,value:Object.freeze(k)}),A.prototype.castForQuery=function(D,j,V){var z;if(D!=null){if(!(z=this.$conditionalHandlers[D]))throw new Error("Can't use "+D+" with String.");return z.call(this,j,V)}if(Object.prototype.toString.call(j)==="[object RegExp]"||y(j,"BSONRegExp"))return j;try{return this.applySetters(j,V)}catch(W){throw W instanceof x&&W.path===this.path&&this.$fullPath!=null&&(W.path=this.$fullPath),W}},A.prototype.toJSONSchema=function(D){var j=this.options.required&&typeof this.options.required!="function";return p("string","string",D==null?void 0:D.useBsonType,j)},d.exports=A},8759:d=>{d.exports=function(f){return f.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}},8768:(d,f,a)=>{var u=a(5832).Buffer;function g(K,oe){var ie=Object.keys(K);if(Object.getOwnPropertySymbols){var $e=Object.getOwnPropertySymbols(K);oe&&($e=$e.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ie.push.apply(ie,$e)}return ie}function $(K){for(var oe=1;oe<arguments.length;oe++){var ie=arguments[oe]!=null?arguments[oe]:{};oe%2?g(Object(ie),!0).forEach(function($e){v(K,$e,ie[$e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ie)):g(Object(ie)).forEach(function($e){Object.defineProperty(K,$e,Object.getOwnPropertyDescriptor(ie,$e))})}return K}function v(K,oe,ie){return(oe=function($e){var ce=function(le){if(b(le)!="object"||!le)return le;var ye=le[Symbol.toPrimitive];if(ye!==void 0){var _e=ye.call(le,"string");if(b(_e)!="object")return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(le)}($e);return b(ce)=="symbol"?ce:ce+""}(oe))in K?Object.defineProperty(K,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):K[oe]=ie,K}function S(K,oe){var ie=typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(!ie){if(Array.isArray(K)||(ie=E(K))||oe){ie&&(K=ie);var $e=0,ce=function(){};return{s:ce,n:function(){return $e>=K.length?{done:!0}:{done:!1,value:K[$e++]}},e:function(q){throw q},f:ce}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,ye=!0,_e=!1;return{s:function(){ie=ie.call(K)},n:function(){var q=ie.next();return ye=q.done,q},e:function(q){_e=!0,le=q},f:function(){try{ye||ie.return==null||ie.return()}finally{if(_e)throw le}}}}function E(K,oe){if(K){if(typeof K=="string")return h(K,oe);var ie={}.toString.call(K).slice(8,-1);return ie==="Object"&&K.constructor&&(ie=K.constructor.name),ie==="Map"||ie==="Set"?Array.from(K):ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ie)?h(K,oe):void 0}}function h(K,oe){(oe==null||oe>K.length)&&(oe=K.length);for(var ie=0,$e=Array(oe);ie<oe;ie++)$e[ie]=K[ie];return $e}function b(K){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},b(K)}var m,p=a(3633).UUID,_=a(354),y=a(5678),x=a(5549),A=a(6948),R=a(4450),C=a(2746),k=a(608),D=a(1243),j=a(1347),V=a(3305),z=a(2789),W=a(9696),ee=a(2497),ne=a(5268),Q=a(9539),se=a(2793),be=a(7291).trustedSymbol;f.specialProperties=se,f.isMongooseArray=D.isMongooseArray,f.isMongooseDocumentArray=j.isMongooseDocumentArray,f.registerMongooseArray=D.registerMongooseArray,f.registerMongooseDocumentArray=j.registerMongooseDocumentArray;var H=/\s/,P=/\s+/;f.toCollectionName=function(K,oe){if(K==="system.profile"||K==="system.indexes")return K;if(typeof oe=="function"){if(typeof K!="string")throw new TypeError("Collection name must be a string");if(K.length===0)throw new TypeError("Collection name cannot be empty");return oe(K)}return K},f.deepEqual=function K(oe,ie){if(oe===ie)return!0;if(b(oe)!=="object"||b(ie)!=="object")return oe===ie;if(oe instanceof Date&&ie instanceof Date)return oe.getTime()===ie.getTime();if(V(oe,"ObjectId")&&V(ie,"ObjectId")||V(oe,"Decimal128")&&V(ie,"Decimal128"))return oe.toString()===ie.toString();if(oe instanceof RegExp&&ie instanceof RegExp)return oe.source===ie.source&&oe.ignoreCase===ie.ignoreCase&&oe.multiline===ie.multiline&&oe.global===ie.global&&oe.dotAll===ie.dotAll&&oe.unicode===ie.unicode&&oe.sticky===ie.sticky&&oe.hasIndices===ie.hasIndices;if(oe==null||ie==null||oe.prototype!==ie.prototype)return!1;if(oe instanceof Map||ie instanceof Map)return oe instanceof Map&&ie instanceof Map&&K(Array.from(oe.keys()),Array.from(ie.keys()))&&K(Array.from(oe.values()),Array.from(ie.values()));if(oe instanceof Number&&ie instanceof Number)return oe.valueOf()===ie.valueOf();if(u.isBuffer(oe))return f.buffer.areEqual(oe,ie);if(Array.isArray(oe)||Array.isArray(ie)){if(!Array.isArray(oe)||!Array.isArray(ie))return!1;var $e=oe.length;if($e!==ie.length)return!1;for(var ce=0;ce<$e;++ce)if(!K(oe[ce],ie[ce]))return!1;return!0}oe.$__!=null?oe=oe._doc:ee(oe)&&(oe=oe.toObject()),ie.$__!=null?ie=ie._doc:ee(ie)&&(ie=ie.toObject());var le=Object.keys(oe),ye=Object.keys(ie),_e=le.length;if(_e!==ye.length)return!1;for(var q=_e-1;q>=0;q--)if(le[q]!==ye[q])return!1;for(var re=0,fe=le;re<fe.length;re++){var we=fe[re];if(!K(oe[we],ie[we]))return!1}return!0},f.last=function(K){if(K.length>0)return K[K.length-1]},f.promiseOrCallback=ne,f.cloneArrays=function(K){return Array.isArray(K)?K.map(function(oe){return f.cloneArrays(oe)}):K},f.omit=function(K,oe){if(oe==null)return Object.assign({},K);Array.isArray(oe)||(oe=[oe]);var ie,$e=Object.assign({},K),ce=S(oe);try{for(ce.s();!(ie=ce.n()).done;)delete $e[ie.value]}catch(le){ce.e(le)}finally{ce.f()}return $e},f.merge=function K(oe,ie,$e,ce){$e=$e||{};var le,ye,_e=Object.keys(ie),q=0,re=_e.length;ie[be]&&(oe[be]=ie[be]),ce=ce||"";for(var fe=$e.omitNested||{};q<re;)if(le=_e[q++],!($e.omit&&$e.omit[le]||fe[ce]||se.has(le)))if(oe[le]==null)z(ie[le])?oe[le]=$({},ie[le]):Array.isArray(ie[le])?oe[le]=function(we){if(Array.isArray(we))return h(we)}(ye=ie[le])||function(we){if(typeof Symbol<"u"&&we[Symbol.iterator]!=null||we["@@iterator"]!=null)return Array.from(we)}(ye)||E(ye)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}():oe[le]=ie[le];else if(f.isObject(ie[le])){if(f.isObject(oe[le])||(oe[le]={}),ie[le]!=null){if($e.isDiscriminatorSchemaMerge&&ie[le].$isSingleNested&&oe[le].$isMongooseDocumentArray||ie[le].$isMongooseDocumentArray&&oe[le].$isSingleNested)continue;if(ie[le].instanceOfSchema){oe[le].instanceOfSchema?Q(oe[le],ie[le].clone(),$e.isDiscriminatorSchemaMerge):oe[le]=ie[le].clone();continue}if(V(ie[le],"ObjectId")){oe[le]=new x(ie[le]);continue}}K(oe[le],ie[le],$e,ce?ce+"."+le:le)}else $e.overwrite&&(oe[le]=ie[le]);return oe},f.toObject=function K(oe){var ie;if(m||(m=a(2400)),oe==null)return oe;if(oe instanceof m)return oe.toObject();if(Array.isArray(oe)){ie=[];var $e,ce=S(oe);try{for(ce.s();!($e=ce.n()).done;){var le=$e.value;ie.push(K(le))}}catch(re){ce.e(re)}finally{ce.f()}return ie}if(f.isPOJO(oe)){ie={},oe[be]&&(ie[be]=oe[be]);for(var ye=0,_e=Object.keys(oe);ye<_e.length;ye++){var q=_e[ye];se.has(q)||(ie[q]=K(oe[q]))}return ie}return oe},f.isObject=k,f.isPOJO=a(2789),f.isNonBuiltinObject=function(K){return!(b(K)!=="object"||f.isNativeObject(K)||f.isMongooseType(K)||K instanceof p||K==null)},f.isNativeObject=function(K){return Array.isArray(K)||K instanceof Date||K instanceof Boolean||K instanceof Number||K instanceof String},f.isEmptyObject=function(K){return K!=null&&b(K)==="object"&&Object.keys(K).length===0},f.hasKey=function(K,oe){for(var ie=0,$e=Object.keys(K);ie<$e.length;ie++){var ce=$e[ie];if(ce===oe||f.isPOJO(K[ce])&&f.hasKey(K[ce],oe))return!0}return!1},f.tick=function(K){if(typeof K=="function")return function(){try{K.apply(this,arguments)}catch(oe){C(function(){throw oe})}}},f.isMongooseType=function(K){return V(K,"ObjectId")||V(K,"Decimal128")||K instanceof u},f.isMongooseObject=ee,f.expires=function(K){K&&K.constructor.name==="Object"&&"expires"in K&&(K.expireAfterSeconds=typeof K.expires!="string"?K.expires:Math.round(_(K.expires)/1e3),delete K.expires)},f.populate=function(K,oe,ie,$e,ce,le,ye,_e){var q,re=null;if(arguments.length===1){if(K instanceof A)return K._docs={},K._childDocs=[],[K];if(Array.isArray(K)){var fe=(q=[],K.forEach(function(we){H.test(we.path)?we.path.split(P).forEach(function(Re){var ke=Object.assign({},we);ke.path=Re,q.push(ke)}):q.push(we)}),q);return fe.map(function(we){return f.populate(we)[0]})}re=f.isObject(K)?Object.assign({},K):{path:K}}else re=b(ie)==="object"?{path:K,select:oe,match:ie,options:$e}:{path:K,select:oe,model:ie,match:$e,options:ce,populate:le,justOne:ye,count:_e};if(!(typeof re.path=="string"||Array.isArray(re.path)&&re.path.every(function(we){return typeof we=="string"})))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+b(K)+"`");return function(we){if(Array.isArray(we.populate)){var Re=[];we.populate.forEach(function(De){if(H.test(De.path)){var he=Object.assign({},De);he.path.split(P).forEach(function(tt){he.path=tt,Re.push(f.populate(he)[0])})}else Re.push(f.populate(De)[0])}),we.populate=f.populate(Re)}else we.populate!=null&&b(we.populate)==="object"&&(we.populate=f.populate(we.populate));var ke=[],ue=H.test(we.path)?we.path.split(P):Array.isArray(we.path)?we.path:[we.path];we.options!=null&&(we.options=R(we.options));var Ee,Ae=S(ue);try{for(Ae.s();!(Ee=Ae.n()).done;){var Ne=Ee.value;ke.push(new A(Object.assign({},we,{path:Ne})))}}catch(De){Ae.e(De)}finally{Ae.f()}return ke}(re)},f.getValue=function(K,oe,ie){return y.get(K,oe,F,ie)};var L=Object.freeze({getters:!1});function F(K,oe){if(oe==="$*"&&K instanceof Map)return K;var ie=(K==null?void 0:K._doc)||K;return ie!=null&&ie.isMongooseArrayProxy&&(ie=ie.__array),ie instanceof Map?ie.get(oe,L):ie[oe]}f.setValue=function(K,oe,ie,$e,ce){y.set(K,oe,ie,"_doc",$e,ce)},f.object={},f.object.vals=function(K){for(var oe=Object.keys(K),ie=oe.length,$e=[];ie--;)$e.push(K[oe[ie]]);return $e};var M=Object.prototype.hasOwnProperty;f.object.hasOwnProperty=function(K,oe){return M.call(K,oe)},f.isNullOrUndefined=function(K){return K==null},f.array={},f.array.flatten=function K(oe,ie,$e){return $e||($e=[]),oe.forEach(function(ce){Array.isArray(ce)?K(ce,ie,$e):ie&&!ie(ce)||$e.push(ce)}),$e};var U=Object.prototype.hasOwnProperty;f.hasUserDefinedProperty=function(K,oe){if(K==null)return!1;if(Array.isArray(oe)){var ie,$e=S(oe);try{for($e.s();!(ie=$e.n()).done;){var ce=ie.value;if(f.hasUserDefinedProperty(K,ce))return!0}}catch(ye){$e.e(ye)}finally{$e.f()}return!1}if(U.call(K,oe))return!0;if(b(K)==="object"&&oe in K){var le=K[oe];return le!==Object.prototype[oe]&&le!==Array.prototype[oe]}return!1};var Z=Math.pow(2,32)-1;f.isArrayIndex=function(K){return typeof K=="number"?K>=0&&K<=Z:typeof K=="string"&&!!/^\d+$/.test(K)&&(K=+K)>=0&&K<=Z},f.array.unique=function(K){var oe,ie=new Set,$e=new Set,ce=[],le=S(K);try{for(le.s();!(oe=le.n()).done;){var ye=oe.value;if(typeof ye=="number"||typeof ye=="string"||ye==null){if(ie.has(ye))continue;ce.push(ye),ie.add(ye)}else if(V(ye,"ObjectId")){if($e.has(ye.toString()))continue;ce.push(ye),$e.add(ye.toString())}else ce.push(ye)}}catch(_e){le.e(_e)}finally{le.f()}return ce},f.buffer={},f.buffer.areEqual=function(K,oe){if(!u.isBuffer(K)||!u.isBuffer(oe)||K.length!==oe.length)return!1;for(var ie=0,$e=K.length;ie<$e;++ie)if(K[ie]!==oe[ie])return!1;return!0},f.getFunctionName=W,f.decorate=function(K,oe){for(var ie in oe)se.has(ie)||(K[ie]=oe[ie])},f.mergeClone=function(K,oe){ee(oe)&&(oe=oe.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));for(var ie,$e=Object.keys(oe),ce=$e.length,le=0;le<ce;)if(ie=$e[le++],!se.has(ie))if(K[ie]===void 0)K[ie]=R(oe[ie],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{var ye=oe[ie];if(ye==null||!ye.valueOf||ye instanceof Date||(ye=ye.valueOf()),f.isObject(ye)){var _e=ye;ee(ye)&&!ye.isMongooseBuffer&&(_e=_e.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),ye.isMongooseBuffer&&(_e=u.from(_e)),f.mergeClone(K[ie],_e)}else K[ie]=R(ye,{flattenDecimals:!1})}},f.each=function(K,oe){var ie,$e=S(K);try{for($e.s();!(ie=$e.n()).done;)oe(ie.value)}catch(ce){$e.e(ce)}finally{$e.f()}},f.renameObjKey=function(K,oe,ie){return Object.keys(K).reduce(function($e,ce){return ce===oe?$e[ie]=K[oe]:$e[ce]=K[ce],$e},{})},f.getOption=function(K){var oe,ie=S(Array.prototype.slice.call(arguments,1));try{for(ie.s();!(oe=ie.n()).done;){var $e=oe.value;if($e!=null&&$e[K]!=null)return $e[K]}}catch(ce){ie.e(ce)}finally{ie.f()}return null},f.noop=function(){},f.errorToPOJO=function(K){if(!(K instanceof Error))throw new Error("`error` must be `instanceof Error`.");var oe,ie={},$e=S(Object.getOwnPropertyNames(K));try{for($e.s();!(oe=$e.n()).done;){var ce=oe.value;ie[ce]=K[ce]}}catch(le){$e.e(le)}finally{$e.f()}return ie},f.warn=function(K){return{env:{}}.emitWarning(K,{code:"MONGOOSE"})},f.injectTimestampsOption=function(K,oe){oe!=null&&(K.timestamps=oe)}},8784:(d,f,a)=>{d.exports=b;var u=a(198).F,g=u.ERR_METHOD_NOT_IMPLEMENTED,$=u.ERR_MULTIPLE_CALLBACK,v=u.ERR_TRANSFORM_ALREADY_TRANSFORMING,S=u.ERR_TRANSFORM_WITH_LENGTH_0,E=a(4560);function h(_,y){var x=this._transformState;x.transforming=!1;var A=x.writecb;if(A===null)return this.emit("error",new $);x.writechunk=null,x.writecb=null,y!=null&&this.push(y),A(_);var R=this._readableState;R.reading=!1,(R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}function b(_){if(!(this instanceof b))return new b(_);E.call(this,_),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_&&(typeof _.transform=="function"&&(this._transform=_.transform),typeof _.flush=="function"&&(this._flush=_.flush)),this.on("prefinish",m)}function m(){var _=this;typeof this._flush!="function"||this._readableState.destroyed?p(this,null,null):this._flush(function(y,x){p(_,y,x)})}function p(_,y,x){if(y)return _.emit("error",y);if(x!=null&&_.push(x),_._writableState.length)throw new S;if(_._transformState.transforming)throw new v;return _.push(null)}a(1679)(b,E),b.prototype.push=function(_,y){return this._transformState.needTransform=!1,E.prototype.push.call(this,_,y)},b.prototype._transform=function(_,y,x){x(new g("_transform()"))},b.prototype._write=function(_,y,x){var A=this._transformState;if(A.writecb=x,A.writechunk=_,A.writeencoding=y,!A.transforming){var R=this._readableState;(A.needTransform||R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}},b.prototype._read=function(_){var y=this._transformState;y.writechunk===null||y.transforming?y.needTransform=!0:(y.transforming=!0,this._transform(y.writechunk,y.writeencoding,y.afterTransform))},b.prototype._destroy=function(_,y){E.prototype._destroy.call(this,_,function(x){y(x)})}},8863:(d,f,a)=>{var u=a(2354),g=a(2268),$=a(3123),v=a(5477);d.exports=function(S){if(S.length<1||typeof S[0]!="function")throw new g("a function is required");return v(u,$,S)}},8872:(d,f,a)=>{f.po=a(4276),a(5833),a(2046),a(4606);var u=a(8699);u.pbkdf2,u.pbkdf2Sync;var g=a(9652);g.Cipher,g.createCipher,g.Cipheriv,g.createCipheriv,g.Decipher,g.createDecipher,g.Decipheriv,g.createDecipheriv,g.getCiphers,g.listCiphers;var $=a(9803);$.DiffieHellmanGroup,$.createDiffieHellmanGroup,$.getDiffieHellman,$.createDiffieHellman,$.DiffieHellman;var v=a(7937);v.createSign,v.Sign,v.createVerify,v.Verify,a(1005);var S=a(2327);S.publicEncrypt,S.privateEncrypt,S.publicDecrypt,S.privateDecrypt;var E=a(7952);E.randomFill,E.randomFillSync},8879:(d,f,a)=>{function u(S,E,h){return Object.defineProperty(S,"prototype",{writable:!1}),S}var g=a(4450),$=u(function S(E){if(function(h,b){if(!(h instanceof b))throw new TypeError("Cannot call a class as a function")}(this,S),E==null)return this;Object.assign(this,g(E))}),v=a(5761);Object.defineProperty($.prototype,"type",v),Object.defineProperty($.prototype,"validate",v),Object.defineProperty($.prototype,"cast",v),Object.defineProperty($.prototype,"required",v),Object.defineProperty($.prototype,"default",v),Object.defineProperty($.prototype,"ref",v),Object.defineProperty($.prototype,"refPath",v),Object.defineProperty($.prototype,"select",v),Object.defineProperty($.prototype,"index",v),Object.defineProperty($.prototype,"unique",v),Object.defineProperty($.prototype,"immutable",v),Object.defineProperty($.prototype,"sparse",v),Object.defineProperty($.prototype,"text",v),Object.defineProperty($.prototype,"transform",v),d.exports=$},8890:(d,f,a)=>{var u=a(1679),g=a(1485),$=a(9732).Buffer,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],S=new Array(64);function E(){this.init(),this._w=S,g.call(this,64,56)}function h(y,x,A){return A^y&(x^A)}function b(y,x,A){return y&x|A&(y|x)}function m(y){return(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10)}function p(y){return(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7)}function _(y){return(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3}u(E,g),E.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},E.prototype._update=function(y){for(var x,A=this._w,R=0|this._a,C=0|this._b,k=0|this._c,D=0|this._d,j=0|this._e,V=0|this._f,z=0|this._g,W=0|this._h,ee=0;ee<16;++ee)A[ee]=y.readInt32BE(4*ee);for(;ee<64;++ee)A[ee]=0|(((x=A[ee-2])>>>17|x<<15)^(x>>>19|x<<13)^x>>>10)+A[ee-7]+_(A[ee-15])+A[ee-16];for(var ne=0;ne<64;++ne){var Q=W+p(j)+h(j,V,z)+v[ne]+A[ne]|0,se=m(R)+b(R,C,k)|0;W=z,z=V,V=j,j=D+Q|0,D=k,k=C,C=R,R=Q+se|0}this._a=R+this._a|0,this._b=C+this._b|0,this._c=k+this._c|0,this._d=D+this._d|0,this._e=j+this._e|0,this._f=V+this._f|0,this._g=z+this._g|0,this._h=W+this._h|0},E.prototype._hash=function(){var y=$.allocUnsafe(32);return y.writeInt32BE(this._a,0),y.writeInt32BE(this._b,4),y.writeInt32BE(this._c,8),y.writeInt32BE(this._d,12),y.writeInt32BE(this._e,16),y.writeInt32BE(this._f,20),y.writeInt32BE(this._g,24),y.writeInt32BE(this._h,28),y},d.exports=E},8904:(d,f,a)=>{function u(S){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},u(S)}var g;function $(S){this.rand=S}if(d.exports=function(S){return g||(g=new $(null)),g.generate(S)},d.exports.Rand=$,$.prototype.generate=function(S){return this._rand(S)},$.prototype._rand=function(S){if(this.rand.getBytes)return this.rand.getBytes(S);for(var E=new Uint8Array(S),h=0;h<E.length;h++)E[h]=this.rand.getByte();return E},(typeof self>"u"?"undefined":u(self))==="object")self.crypto&&self.crypto.getRandomValues?$.prototype._rand=function(S){var E=new Uint8Array(S);return self.crypto.getRandomValues(E),E}:self.msCrypto&&self.msCrypto.getRandomValues?$.prototype._rand=function(S){var E=new Uint8Array(S);return self.msCrypto.getRandomValues(E),E}:(typeof window>"u"?"undefined":u(window))==="object"&&($.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var v=a(3776);if(typeof v.randomBytes!="function")throw new Error("Not supported");$.prototype._rand=function(S){return v.randomBytes(S)}}catch{}},8920:(d,f,a)=>{var u=a(5832).Buffer;function g(P){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},g(P)}function $(P,L){var F=typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(!F){if(Array.isArray(P)||(F=v(P))||L){F&&(P=F);var M=0,U=function(){};return{s:U,n:function(){return M>=P.length?{done:!0}:{done:!1,value:P[M++]}},e:function(ie){throw ie},f:U}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Z,K=!0,oe=!1;return{s:function(){F=F.call(P)},n:function(){var ie=F.next();return K=ie.done,ie},e:function(ie){oe=!0,Z=ie},f:function(){try{K||F.return==null||F.return()}finally{if(oe)throw Z}}}}function v(P,L){if(P){if(typeof P=="string")return S(P,L);var F={}.toString.call(P).slice(8,-1);return F==="Object"&&P.constructor&&(F=P.constructor.name),F==="Map"||F==="Set"?Array.from(P):F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F)?S(P,L):void 0}}function S(P,L){(L==null||L>P.length)&&(L=P.length);for(var F=0,M=Array(L);F<L;F++)M[F]=P[F];return M}var E=a(2400),h=a(6547),b=a(8213),m=a(4473),p=a(4450),_=a(3303)._,y=a(5678),x=a(8768),A=a(3305),R=a(7930).arrayAtomicsSymbol,C=a(7930).arrayParentSymbol,k=a(7930).arrayPathSymbol,D=a(7930).arraySchemaSymbol,j=a(7930).populateModelSymbol,V=Symbol("mongoose#Array#sliced"),z=Array.prototype.push,W={$__getAtomics:function(){var P=[],L=Object.keys(this[R]||{}),F=L.length,M=Object.assign({},_,{_isNested:!0});if(F===0)return P[0]=["$set",this.toObject(M)],P;for(;F--;){var U=L[F],Z=this[R][U];x.isMongooseObject(Z)?Z=Z.toObject(M):Array.isArray(Z)?Z=this.toObject.call(Z,M):Z!=null&&Array.isArray(Z.$each)?Z.$each=this.toObject.call(Z.$each,M):Z!=null&&typeof Z.valueOf=="function"&&(Z=Z.valueOf()),U==="$addToSet"&&(Z={$each:Z}),P.push([U,Z])}return P},$atomics:function(){return this[R]},$parent:function(){return this[C]},$path:function(){return this[k]},$shift:function(){this._registerAtomic("$pop",-1),this._markModified();var P=this.__array;if(!P._shifted)return P._shifted=!0,[].shift.call(P)},$pop:function(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},$schema:function(){return this[D]},_cast:function(P){var L,F=!1,M=this[C];if(M&&(F=M.$populated(this[k],!0)),F&&P!=null){if((L=F.options[j])==null)throw new b("No populated model found for path `"+this[k]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");return(u.isBuffer(P)||A(P,"ObjectId")||!x.isObject(P))&&(P={_id:P}),P.schema&&P.schema.discriminatorMapping&&P.schema.discriminatorMapping.key!==void 0||(P=new L(P)),this[D].caster.applySetters(P,M,!0)}return this[D].caster.applySetters(P,M,!1)},_mapCast:function(P,L){return this._cast(P,this.length+L)},_markModified:function(P){var L,F=this[C];if(F){if(L=this[k],arguments.length&&(L=L+"."+P),L!=null&&L.endsWith(".$"))return this;F.markModified(L,arguments.length!==0?P:F)}return this},_registerAtomic:function(P,L){if(!this[V]){if(P==="$set")return this[R]={$set:L},m(this[C],this[k]),this._markModified(),this;var F,M=this[R];if(P==="$pop"&&!("$pop"in M)){var U=this;this[C].once("save",function(){U._popped=U._shifted=null})}if(M.$set||Object.keys(M).length&&!(P in M))return this[R]={$set:this},this;if(P==="$pullAll"||P==="$addToSet")M[P]||(M[P]=[]),M[P]=M[P].concat(L);else if(P==="$pullDocs"){var Z=M.$pull||(M.$pull={});L[0]instanceof h?(F=Z.$or||(Z.$or=[]),Array.prototype.push.apply(F,L.map(function(le){return le.toObject({transform:function(ye,_e){return le==null||le.$__==null||Object.keys(le.$__.activePaths.getStatePaths("default")).forEach(function(q){y.unset(q,_e),ee(_e,q)}),_e},virtuals:!1})}))):(F=Z._id||(Z._id={$in:[]})).$in=F.$in.concat(L)}else if(P==="$push")if(M.$push=M.$push||{$each:[]},L!=null&&x.hasUserDefinedProperty(L,"$each"))M.$push=L;else if(L.length===1)M.$push.$each.push(L[0]);else if(L.length<1e4){var K;(K=M.$push.$each).push.apply(K,function(le){if(Array.isArray(le))return S(le)}(ce=L)||function(le){if(typeof Symbol<"u"&&le[Symbol.iterator]!=null||le["@@iterator"]!=null)return Array.from(le)}(ce)||v(ce)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())}else{var oe,ie=$(L);try{for(ie.s();!(oe=ie.n()).done;){var $e=oe.value;M.$push.$each.push($e)}}catch(le){ie.e(le)}finally{ie.f()}}else M[P]=L;return this}var ce},addToSet:function(){ne(this,arguments),Q(this,arguments);var P=[].map.call(arguments,this._mapCast,this),L=[],F="";P[0]instanceof h?F="doc":P[0]instanceof Date?F="date":A(P[0],"ObjectId")&&(F="ObjectId");var M=x.isMongooseArray(P)?P.__array:P,U=x.isMongooseArray(this)?this.__array:this;return M.forEach(function(Z){var K,oe=+Z;switch(F){case"doc":K=this.some(function(ie){return ie.equals(Z)});break;case"date":K=this.some(function(ie){return+ie===oe});break;case"ObjectId":K=this.find(function(ie){return ie.toString()===Z.toString()});break;default:K=~this.indexOf(Z)}K||(this._markModified(),U.push(Z),this._registerAtomic("$addToSet",Z),[].push.call(L,Z))},this),L},hasAtomics:function(){return x.isPOJO(this[R])?Object.keys(this[R]).length:0},includes:function(P,L){return this.indexOf(P,L)!==-1},indexOf:function(P,L){A(P,"ObjectId")&&(P=P.toString()),L=L??0;for(var F=this.length,M=L;M<F;++M)if(P==this[M])return M;return-1},inspect:function(){return JSON.stringify(this)},nonAtomicPush:function(){var P=[].map.call(arguments,this._mapCast,this);this._markModified();var L=[].push.apply(this,P);return this._registerAtomic("$set",this),L},pop:function(){this._markModified();var P=[].pop.call(this);return this._registerAtomic("$set",this),P},pull:function(){var P=this,L=[].map.call(arguments,function(Z,K){return P._cast(Z,K,{defaults:!1})},this),F=this[C].get(this[k]);x.isMongooseArray(F)&&(F=F.__array);var M,U=F.length;for(this._markModified();U--;)(M=F[U])instanceof E?L.some(function(Z){return M.equals(Z)})&&F.splice(U,1):~this.indexOf.call(L,M)&&F.splice(U,1);return L[0]instanceof h?this._registerAtomic("$pullDocs",L.map(function(Z){var K=Z.$__getValue("_id");return K===void 0||Z.$isDefault("_id")?Z:K})):this._registerAtomic("$pullAll",L),m(this[C],this[k])>0&&this._registerAtomic("$set",this),this},push:function(){var P,L=arguments,F=L,M=L[0]!=null&&x.hasUserDefinedProperty(L[0],"$each"),U=x.isMongooseArray(this)?this.__array:this;if(M&&(F=L[0],L=L[0].$each),this[D]==null)return z.apply(this,L);ne(this,L),Q(this,L),L=[].map.call(L,this._mapCast,this);var Z=this[R];return this._markModified(),M?(F.$each=L,(Z.$push&&Z.$push.$each&&Z.$push.$each.length||0)!==0&&Z.$push.$position!=F.$position?(F.$position!=null?([].splice.apply(U,[F.$position,0].concat(L)),P=U.length):P=[].push.apply(U,L),this._registerAtomic("$set",this)):F.$position!=null?([].splice.apply(U,[F.$position,0].concat(L)),P=this.length):P=[].push.apply(U,L)):(F=L,P=z.apply(U,L)),this._registerAtomic("$push",F),P},remove:function(){return this.pull.apply(this,arguments)},set:function(P,L,F){var M=this.__array;if(F)return M[P]=L,this;var U=W._cast.call(this,L,P);return W._markModified.call(this,P),M[P]=U,this},shift:function(){var P=x.isMongooseArray(this)?this.__array:this;this._markModified();var L=[].shift.call(P);return this._registerAtomic("$set",this),L},sort:function(){var P=x.isMongooseArray(this)?this.__array:this,L=[].sort.apply(P,arguments);return this._registerAtomic("$set",this),L},splice:function(){var P,L=x.isMongooseArray(this)?this.__array:this;if(this._markModified(),ne(this,Array.prototype.slice.call(arguments,2)),arguments.length){var F;if(this[D]==null)F=arguments;else{F=[];for(var M=0;M<arguments.length;++M)F[M]=M<2?arguments[M]:this._cast(arguments[M],arguments[0]+(M-2))}P=[].splice.apply(L,F),this._registerAtomic("$set",this)}return P},toBSON:function(){return this.toObject(_)},toObject:function(P){var L=x.isMongooseArray(this)?this.__array:this;return P&&P.depopulate?((P=p(P))._isNested=!0,[].concat(L).map(function(F){return F instanceof E?F.toObject(P):F})):[].concat(L)},$toObject:function(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift:function(){var P;ne(this,arguments),P=this[D]==null?arguments:[].map.call(arguments,this._cast,this);var L=x.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(L,P),this._registerAtomic("$set",this),this.length}};function ee(P,L,F){if(typeof L=="string"){if(L.indexOf(".")===-1)return;L=y.stringToParts(L)}(F=F||0)>=L.length||P!=null&&g(P)==="object"&&(ee(P[L[0]],L,F+1),P[L[0]]!=null&&g(P[L[0]])==="object"&&Object.keys(P[L[0]]).length===0&&delete P[L[0]])}function ne(P,L){var F,M,U,Z=P==null?null:P[D]&&P[D].caster&&P[D].caster.options&&P[D].caster.options.ref||null;P.length===0&&L.length!==0&&function(K,oe){if(!oe)return!1;var ie,$e=$(K);try{for($e.s();!(ie=$e.n()).done;){var ce=ie.value;if(ce==null)return!1;var le=ce.constructor;if(!(ce instanceof E)||le.modelName!==oe&&le.baseModelName!==oe)return!1}}catch(ye){$e.e(ye)}finally{$e.f()}return!0}(L,Z)&&P[C].$populated(P[k],[],(F={},M=j,U=L[0].constructor,(M=function(K){var oe=function(ie){if(g(ie)!="object"||!ie)return ie;var $e=ie[Symbol.toPrimitive];if($e!==void 0){var ce=$e.call(ie,"string");if(g(ce)!="object")return ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ie)}(K);return g(oe)=="symbol"?oe:oe+""}(M))in F?Object.defineProperty(F,M,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[M]=U,F))}function Q(P,L){var F=P==null?null:P[D]&&P[D].caster&&P[D].caster.options&&P[D].caster.options.ref||null,M=P[C],U=P[k];if(F&&M.populated(U)){var Z,K=$(L);try{for(K.s();!(Z=K.n()).done;){var oe=Z.value;if(oe!=null&&(g(oe)!=="object"||oe instanceof String||oe instanceof Number||oe instanceof u||x.isMongooseType(oe))){M.depopulate(U);break}}}catch(ie){K.e(ie)}finally{K.f()}}}for(var se=function(){var P=H[be];if(Array.prototype[P]==null)return 1;W[P]=function(){var L=x.isMongooseArray(this)?this.__array:this,F=[].concat(L);return F[P].apply(F,arguments)}},be=0,H=["filter","flat","flatMap","map","slice"];be<H.length;be++)se();d.exports=W},8953:(d,f,a)=>{var u=a(3609);d.exports=function(g,$){if(d.exports.convertToTrue.has(g))return!0;if(d.exports.convertToFalse.has(g))return!1;if(g==null)return g;throw new u("boolean",g,$)},d.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]),d.exports.convertToFalse=new Set([!1,"false",0,"0","no"])},8964:(d,f,a)=>{function u(b){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u(b)}var g,$=a(8863),v=a(1464);try{g=[].__proto__===Array.prototype}catch(b){if(!b||u(b)!=="object"||!("code"in b)||b.code!=="ERR_PROTO_ACCESS")throw b}var S=!!g&&v&&v(Object.prototype,"__proto__"),E=Object,h=E.getPrototypeOf;d.exports=S&&typeof S.get=="function"?$([S.get]):typeof h=="function"&&function(b){return h(b==null?b:E(b))}},8995:(d,f,a)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u(E)}function g(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!E})()}function $(E){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},$(E)}function v(E,h){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,m){return b.__proto__=m,b},v(E,h)}var S=function(E){function h(m,p,_){var y;return function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}(this,h),(y=function(x,A,R){return A=$(A),function(C,k){if(k&&(u(k)=="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}(C)}(x,g()?Reflect.construct(A,R||[],$(x).constructor):A.apply(x,R))}(this,h,[p=p||"Field `"+m+"` is not in schema and strict mode is set to throw."])).isImmutableError=!!_,y.path=m,y}return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),p&&v(m,p)}(h,E),b=h,Object.defineProperty(b,"prototype",{writable:!1}),b;var b}(a(8213));Object.defineProperty(S.prototype,"name",{value:"StrictModeError"}),d.exports=S},9003:d=>{d.exports=function(f){for(var a,u=f.length;u--;){if((a=f.readUInt8(u))!==255){a++,f.writeUInt8(a,u);break}f.writeUInt8(0,u)}}},9064:(d,f,a)=>{function u(S){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},u(S)}var g=a(3609),$=a(8953),v=a(1244);d.exports=function(S,E){if(S==null||u(S)!=="object")throw new g("$text",S,E);return S.$search!=null&&(S.$search=v(S.$search,E+".$search")),S.$language!=null&&(S.$language=v(S.$language,E+".$language")),S.$caseSensitive!=null&&(S.$caseSensitive=$(S.$caseSensitive,E+".$castSensitive")),S.$diacriticSensitive!=null&&(S.$diacriticSensitive=$(S.$diacriticSensitive,E+".$diacriticSensitive")),S}},9068:(d,f,a)=>{function u(W){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},u(W)}function g(W,ee,ne){return ee in W?Object.defineProperty(W,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):W[ee]=ne,W}function $(W,ee){for(var ne=0;ne<ee.length;ne++){var Q=ee[ne];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(W,Q.key,Q)}}function v(W,ee){return!ee||p(ee)!=="object"&&typeof ee!="function"?S(W):ee}function S(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}function E(W){var ee=typeof Map=="function"?new Map:void 0;return E=function(ne){if(ne===null||(Q=ne,Function.toString.call(Q).indexOf("[native code]")===-1))return ne;var Q;if(typeof ne!="function")throw new TypeError("Super expression must either be null or a function");if(ee!==void 0){if(ee.has(ne))return ee.get(ne);ee.set(ne,se)}function se(){return h(ne,arguments,m(this).constructor)}return se.prototype=Object.create(ne.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),b(se,ne)},E(W)}function h(W,ee,ne){return h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(Q,se,be){var H=[null];H.push.apply(H,se);var P=new(Function.bind.apply(Q,H));return be&&b(P,be.prototype),P},h.apply(null,arguments)}function b(W,ee){return b=Object.setPrototypeOf||function(ne,Q){return ne.__proto__=Q,ne},b(W,ee)}function m(W){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},m(W)}function p(W){return p=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(ee){return u(ee)}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":u(ee)},p(W)}var _=a(7352).inspect,y=a(3743).codes.ERR_INVALID_ARG_TYPE;function x(W,ee,ne){return(ne===void 0||ne>W.length)&&(ne=W.length),W.substring(ne-ee.length,ne)===ee}var A="",R="",C="",k="",D={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function j(W){var ee=Object.keys(W),ne=Object.create(Object.getPrototypeOf(W));return ee.forEach(function(Q){ne[Q]=W[Q]}),Object.defineProperty(ne,"message",{value:W.message}),ne}function V(W){return _(W,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var z=function(W){function ee(se){var be;if(function(ce,le){if(!(ce instanceof le))throw new TypeError("Cannot call a class as a function")}(this,ee),p(se)!=="object"||se===null)throw new y("options","Object",se);var H=se.message,P=se.operator,L=se.stackStartFn,F=se.actual,M=se.expected,U=Error.stackTraceLimit;if(Error.stackTraceLimit=0,H!=null)be=v(this,m(ee).call(this,String(H)));else if({}.stderr&&{}.stderr.isTTY&&({}.stderr&&{}.stderr.getColorDepth&&{}.stderr.getColorDepth()!==1?(A="\x1B[34m",R="\x1B[32m",k="\x1B[39m",C="\x1B[31m"):(A="",R="",k="",C="")),p(F)==="object"&&F!==null&&p(M)==="object"&&M!==null&&"stack"in F&&F instanceof Error&&"stack"in M&&M instanceof Error&&(F=j(F),M=j(M)),P==="deepStrictEqual"||P==="strictEqual")be=v(this,m(ee).call(this,function(ce,le,ye){var _e="",q="",re=0,fe="",we=!1,Re=V(ce),ke=Re.split(`
`),ue=V(le).split(`
`),Ee=0,Ae="";if(ye==="strictEqual"&&p(ce)==="object"&&p(le)==="object"&&ce!==null&&le!==null&&(ye="strictEqualObject"),ke.length===1&&ue.length===1&&ke[0]!==ue[0]){var Ne=ke[0].length+ue[0].length;if(Ne<=10){if(!(p(ce)==="object"&&ce!==null||p(le)==="object"&&le!==null||ce===0&&le===0))return"".concat(D[ye],`

`)+"".concat(ke[0]," !== ").concat(ue[0],`
`)}else if(ye!=="strictEqualObject"&&Ne<({}.stderr&&{}.stderr.isTTY?{}.stderr.columns:80)){for(;ke[0][Ee]===ue[0][Ee];)Ee++;Ee>2&&(Ae=`
  `.concat(function(Pe,ft){if(ft=Math.floor(ft),Pe.length==0||ft==0)return"";var Lt=Pe.length*ft;for(ft=Math.floor(Math.log(ft)/Math.log(2));ft;)Pe+=Pe,ft--;return Pe+Pe.substring(0,Lt-Pe.length)}(" ",Ee),"^"),Ee=0)}}for(var De=ke[ke.length-1],he=ue[ue.length-1];De===he&&(Ee++<2?fe=`
  `.concat(De).concat(fe):_e=De,ke.pop(),ue.pop(),ke.length!==0&&ue.length!==0);)De=ke[ke.length-1],he=ue[ue.length-1];var tt=Math.max(ke.length,ue.length);if(tt===0){var at=Re.split(`
`);if(at.length>30)for(at[26]="".concat(A,"...").concat(k);at.length>27;)at.pop();return"".concat(D.notIdentical,`

`).concat(at.join(`
`),`
`)}Ee>3&&(fe=`
`.concat(A,"...").concat(k).concat(fe),we=!0),_e!==""&&(fe=`
  `.concat(_e).concat(fe),_e="");var He=0,ot=D[ye]+`
`.concat(R,"+ actual").concat(k," ").concat(C,"- expected").concat(k),Ue=" ".concat(A,"...").concat(k," Lines skipped");for(Ee=0;Ee<tt;Ee++){var Ze=Ee-re;if(ke.length<Ee+1)Ze>1&&Ee>2&&(Ze>4?(q+=`
`.concat(A,"...").concat(k),we=!0):Ze>3&&(q+=`
  `.concat(ue[Ee-2]),He++),q+=`
  `.concat(ue[Ee-1]),He++),re=Ee,_e+=`
`.concat(C,"-").concat(k," ").concat(ue[Ee]),He++;else if(ue.length<Ee+1)Ze>1&&Ee>2&&(Ze>4?(q+=`
`.concat(A,"...").concat(k),we=!0):Ze>3&&(q+=`
  `.concat(ke[Ee-2]),He++),q+=`
  `.concat(ke[Ee-1]),He++),re=Ee,q+=`
`.concat(R,"+").concat(k," ").concat(ke[Ee]),He++;else{var ae=ue[Ee],Oe=ke[Ee],Le=Oe!==ae&&(!x(Oe,",")||Oe.slice(0,-1)!==ae);Le&&x(ae,",")&&ae.slice(0,-1)===Oe&&(Le=!1,Oe+=","),Le?(Ze>1&&Ee>2&&(Ze>4?(q+=`
`.concat(A,"...").concat(k),we=!0):Ze>3&&(q+=`
  `.concat(ke[Ee-2]),He++),q+=`
  `.concat(ke[Ee-1]),He++),re=Ee,q+=`
`.concat(R,"+").concat(k," ").concat(Oe),_e+=`
`.concat(C,"-").concat(k," ").concat(ae),He+=2):(q+=_e,_e="",Ze!==1&&Ee!==0||(q+=`
  `.concat(Oe),He++))}if(He>20&&Ee<tt-2)return"".concat(ot).concat(Ue,`
`).concat(q,`
`).concat(A,"...").concat(k).concat(_e,`
`)+"".concat(A,"...").concat(k)}return"".concat(ot).concat(we?Ue:"",`
`).concat(q).concat(_e).concat(fe).concat(Ae)}(F,M,P)));else if(P==="notDeepStrictEqual"||P==="notStrictEqual"){var Z=D[P],K=V(F).split(`
`);if(P==="notStrictEqual"&&p(F)==="object"&&F!==null&&(Z=D.notStrictEqualObject),K.length>30)for(K[26]="".concat(A,"...").concat(k);K.length>27;)K.pop();be=K.length===1?v(this,m(ee).call(this,"".concat(Z," ").concat(K[0]))):v(this,m(ee).call(this,"".concat(Z,`

`).concat(K.join(`
`),`
`)))}else{var oe=V(F),ie="",$e=D[P];P==="notDeepEqual"||P==="notEqual"?(oe="".concat(D[P],`

`).concat(oe)).length>1024&&(oe="".concat(oe.slice(0,1021),"...")):(ie="".concat(V(M)),oe.length>512&&(oe="".concat(oe.slice(0,509),"...")),ie.length>512&&(ie="".concat(ie.slice(0,509),"...")),P==="deepEqual"||P==="equal"?oe="".concat($e,`

`).concat(oe,`

should equal

`):ie=" ".concat(P," ").concat(ie)),be=v(this,m(ee).call(this,"".concat(oe).concat(ie)))}return Error.stackTraceLimit=U,be.generatedMessage=!H,Object.defineProperty(S(be),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),be.code="ERR_ASSERTION",be.actual=F,be.expected=M,be.operator=P,Error.captureStackTrace&&Error.captureStackTrace(S(be),L),be.stack,be.name="AssertionError",v(be)}var ne,Q;return function(se,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(be&&be.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),be&&b(se,be)}(ee,W),ne=ee,Q=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:_.custom,value:function(se,be){return _(this,function(H){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{},F=Object.keys(L);typeof Object.getOwnPropertySymbols=="function"&&(F=F.concat(Object.getOwnPropertySymbols(L).filter(function(M){return Object.getOwnPropertyDescriptor(L,M).enumerable}))),F.forEach(function(M){g(H,M,L[M])})}return H}({},be,{customInspect:!1,depth:0}))}}],Q&&$(ne.prototype,Q),ee}(E(Error));d.exports=z},9122:(d,f,a)=>{var u=a(3900),g=a(988),$=a(8863),v=a(5804);d.exports=function(S){var E=$(arguments),h=S.length-(arguments.length-1);return u(E,1+(h>0?h:0),!0)},g?g(d.exports,"apply",{value:v}):d.exports.apply=v},9123:(d,f,a)=>{function u(L){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},u(L)}function g(L,F){var M=Object.keys(L);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(L);F&&(U=U.filter(function(Z){return Object.getOwnPropertyDescriptor(L,Z).enumerable})),M.push.apply(M,U)}return M}function $(L){for(var F=1;F<arguments.length;F++){var M=arguments[F]!=null?arguments[F]:{};F%2?g(Object(M),!0).forEach(function(U){v(L,U,M[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(M)):g(Object(M)).forEach(function(U){Object.defineProperty(L,U,Object.getOwnPropertyDescriptor(M,U))})}return L}function v(L,F,M){return(F=function(U){var Z=function(K){if(u(K)!="object"||!K)return K;var oe=K[Symbol.toPrimitive];if(oe!==void 0){var ie=oe.call(K,"string");if(u(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(K)}(U);return u(Z)=="symbol"?Z:Z+""}(F))in L?Object.defineProperty(L,F,{value:M,enumerable:!0,configurable:!0,writable:!0}):L[F]=M,L}var S,E,h=a(3609),b=a(8235),m=a(3550).EventEmitter,p=a(7760),_=a(4561),y=a(6426),x=a(7982),A=a(4327),R=a(1469),C=a(3694),k=a(3216),D=a(5110),j=a(8768),V=a(7910),z=a(5537),W=a(7930).arrayAtomicsSymbol,ee=a(7930).arrayPathSymbol,ne=a(7930).documentArrayParent;function Q(L,F,M,U){if(F.options&&F.options.timeseries)throw new z(L,"timeseries");var Z=Q.defaultOptions&&Q.defaultOptions._id;Z!=null&&((U=U||{})._id=Z),U!=null&&U._id!=null?F=C(F,U):M!=null&&M._id!=null&&(F=C(F,M));var K=se(F,M);K.prototype.$basePath=L,p.call(this,L,K,M),this.schema=F,this.schemaOptions=U||{},this.$isMongooseDocumentArray=!0,this.Constructor=K,K.base=F.base;var oe=this.defaultValue;"defaultValue"in this&&oe==null||this.default(function(){var ie=oe.call(this);return ie==null||Array.isArray(ie)||(ie=[ie]),ie}),this.$embeddedSchemaType=new b(L+".$",{required:this&&this.schemaOptions&&this.schemaOptions.required||!1,$parentSchemaType:this}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}function se(L,F,M){function U(){E.apply(this,arguments),this.__parentArray!=null&&this.__parentArray.getArrayParent()!=null&&this.$session(this.__parentArray.getArrayParent().$session())}E||(E=a(6547)),L._preCompile();var Z=M!=null?M.prototype:E.prototype;for(var K in U.prototype=Object.create(Z),U.prototype.$__setSchema(L),U.schema=L,U.prototype.constructor=U,U.$isArraySubdocument=!0,U.events=new m,U.base=L.base,L.methods)U.prototype[K]=L.methods[K];for(var oe in L.statics)U[oe]=L.statics[oe];for(var ie in m.prototype)U[ie]=m.prototype[ie];return U.options=F,U}Q.schemaName="DocumentArray",Q.options={castNonArrays:!0},Q.prototype=Object.create(p.prototype),Q.prototype.constructor=Q,Q.prototype.OptionsConstructor=_,Q.prototype.$conditionalHandlers=$({},p.prototype.$conditionalHandlers),Q.prototype.discriminator=function(L,F,M){var U;typeof L=="function"&&(L=j.getFunctionName(L)),M=M||{};var Z=j.isPOJO(M)?M.value:M,K=typeof M.clone!="boolean"||M.clone;F.instanceOfSchema&&K&&(F=F.clone());var oe=se(F=R(this.casterConstructor,L,F,Z,null,null,(U=M)===null||U===void 0?void 0:U.overwriteExisting),null,this.casterConstructor);oe.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(oe,"name",{value:L})}catch{}return this.casterConstructor.discriminators[L]=oe,this.casterConstructor.discriminators[L]},Q.prototype.doValidate=function(L,F,M,U){S||(S=a(4878));var Z=this;try{y.prototype.doValidate.call(this,L,function(K){if(K)return F(K);var oe,ie=L&&L.length;if(!ie||U&&U.updateValidator)return F();function $e(q){q!=null&&(oe=q),--ie||F(oe)}j.isMongooseDocumentArray(L)||(L=new S(L,Z.path,M));for(var ce=0,le=ie;ce<le;++ce){var ye=L[ce];if(ye!=null){if(!(ye instanceof E)){var _e=V(Z.casterConstructor,L[ce]);ye=L[ce]=new _e(ye,L,void 0,void 0,ce)}U==null||!U.validateModifiedOnly||ye.$isModified()?ye.$__validate(null,U,$e):--ie||F(oe)}else--ie||F(oe)}},M)}catch(K){return F(K)}},Q.prototype.doValidateSync=function(L,F,M){var U=y.prototype.doValidateSync.call(this,L,F);if(U!=null)return U;var Z=L&&L.length,K=null;if(Z){for(var oe=0,ie=Z;oe<ie;++oe){var $e=L[oe];if($e){if(!($e instanceof E)){var ce=V(this.casterConstructor,L[oe]);$e=L[oe]=new ce($e,L,void 0,void 0,oe)}if(M==null||!M.validateModifiedOnly||$e.$isModified()){var le=$e.validateSync(M);le&&K==null&&(K=le)}}}return K}},Q.prototype.getDefault=function(L,F,M){var U=typeof this.defaultValue=="function"?this.defaultValue.call(L):this.defaultValue;if(U==null||M&&M.skipCast)return U;S||(S=a(4878)),Array.isArray(U)||(U=[U]),U=new S(U,this.path,L);for(var Z=0;Z<U.length;++Z){var K=new(V(this.casterConstructor,U[Z]))({},U,void 0,void 0,Z);K.$init(U[Z]),K.isNew=!0,Object.assign(K.$__.activePaths.default,K.$__.activePaths.init),K.$__.activePaths.init={},U[Z]=K}return U};var be=Object.freeze({transform:!1,virtuals:!1}),H=Object.freeze({skipId:!1,willInit:!0});function P(L,F,M){if(M&&F){for(var U,Z,K,oe=L.path+".",ie=Object.keys(F),$e=ie.length,ce={};$e--;)if((Z=ie[$e]).startsWith(oe)){if((K=Z.substring(oe.length))==="$")continue;K.startsWith("$.")&&(K=K.substring(2)),U||(U=!0),ce[K]=F[Z]}return U&&ce||void 0}}Q.prototype.cast=function(L,F,M,U,Z){if(S||(S=a(4878)),L!=null&&L[ee]!=null&&L===U)return L;var K,oe,ie=(Z=Z||{}).path||this.path;if(!Array.isArray(L)){if(!M&&!Q.options.castNonArrays)throw new h("DocumentArray",L,this.path,null,this);return F&&M&&F.markModified(ie),this.cast([L],F,M,U,Z)}Z.skipDocumentArrayCast&&!j.isMongooseDocumentArray(L)||(L=new S(L,ie,F,this)),U!=null&&(L[W]=U[W]||{}),Z.arrayPathIndex!=null&&(L[ee]=ie+"."+Z.arrayPathIndex);for(var $e=j.isMongooseDocumentArray(L)?L.__array:L,ce=$e.length,le=0;le<ce;++le)if($e[le]){var ye=V(this.casterConstructor,$e[le]),_e=k($e[le],!0);if($e[le]!==_e&&($e[le]=_e),$e[le]instanceof E){if($e[le][ne]!==F)if(M){var q=new ye(null,L,H,K,le);$e[le]=q.$init($e[le])}else{var re=new ye($e[le],L,void 0,void 0,le);$e[le]=re}$e[le].__index==null&&$e[le].$setIndex(le)}else if($e[le]!=null)if(M)F?K||(K=P(this,F.$__.selected,M)):K=!0,oe=new ye(null,L,H,K,le),$e[le]=oe.$init($e[le]);else if(U&&typeof U.id=="function"&&(oe=U.id($e[le]._id)),U&&oe&&j.deepEqual(oe.toObject(be),$e[le]))oe.set($e[le]),$e[le]=oe;else try{oe=new ye($e[le],L,void 0,void 0,le),$e[le]=oe}catch(fe){throw new h("embedded",$e[le],L[ee],fe,this)}}return L},Q.prototype.clone=function(){var L=Object.assign({},this.options),F=new this.constructor(this.path,this.schema,L,this.schemaOptions);return F.validators=this.validators.slice(),this.requiredValidator!==void 0&&(F.requiredValidator=this.requiredValidator),F.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),F._appliedDiscriminators=this._appliedDiscriminators,F},Q.prototype.applyGetters=function(L,F){return y.prototype.applyGetters.call(this,L,F)},Q.defaultOptions={},Q.set=y.set,Q.setters=[],Q.get=y.get,Q.prototype.$conditionalHandlers.$elemMatch=function(L,F){for(var M,U=Object.keys(L),Z=U.length,K=0;K<Z;++K){var oe=U[K],ie=L[oe];D(oe)&&ie!=null&&(L[oe]=this.castForQuery(oe,ie,F))}var $e=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,ce=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if($e!=null&&L[$e]!=null&&ce[L[$e]]!=null)return x(ce[L[$e]],L,null,this&&this.$$context);var le=(M=this.casterConstructor.schema)!==null&&M!==void 0?M:F.schema;return x(le,L,null,this&&this.$$context)},Q.prototype.toJSONSchema=function(L){var F=A("object","object",L==null?void 0:L.useBsonType,!1),M=this.options.required&&typeof this.options.required!="function";return $($({},A("array","array",L==null?void 0:L.useBsonType,M)),{},{items:$($({},F),this.schema.toJSONSchema(L))})},d.exports=Q},9125:(d,f,a)=>{d.exports=$;var u=a(1191),g=Object.create(a(7919));function $(v){if(!(this instanceof $))return new $(v);u.call(this,v)}g.inherits=a(1679),g.inherits($,u),$.prototype._transform=function(v,S,E){E(null,v)}},9147:(d,f,a)=>{var u=a(4758);function g(z){var W=this;this.next=null,this.entry=null,this.finish=function(){(function(ee,ne){var Q=ee.entry;for(ee.entry=null;Q;){var se=Q.callback;ne.pendingcb--,se(void 0),Q=Q.next}ne.corkedRequestsFree.next=ee})(W,z)}}d.exports=A;var $,v=!{}.browser&&["v0.10","v0.9."].indexOf({}.version.slice(0,5))>-1?setImmediate:u.nextTick;A.WritableState=x;var S=Object.create(a(7919));S.inherits=a(1679);var E,h={deprecate:a(3340)},b=a(5864),m=a(8317).Buffer,p=(a.g!==void 0?a.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},_=a(8639);function y(){}function x(z,W){$=$||a(1313),z=z||{};var ee=W instanceof $;this.objectMode=!!z.objectMode,ee&&(this.objectMode=this.objectMode||!!z.writableObjectMode);var ne=z.highWaterMark,Q=z.writableHighWaterMark,se=this.objectMode?16:16384;this.highWaterMark=ne||ne===0?ne:ee&&(Q||Q===0)?Q:se,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var be=z.decodeStrings===!1;this.decodeStrings=!be,this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){(function(P,L){var F=P._writableState,M=F.sync,U=F.writecb;if(function(K){K.writing=!1,K.writecb=null,K.length-=K.writelen,K.writelen=0}(F),L)(function(K,oe,ie,$e,ce){--oe.pendingcb,ie?(u.nextTick(ce,$e),u.nextTick(V,K,oe),K._writableState.errorEmitted=!0,K.emit("error",$e)):(ce($e),K._writableState.errorEmitted=!0,K.emit("error",$e),V(K,oe))})(P,F,M,L,U);else{var Z=D(F);Z||F.corked||F.bufferProcessing||!F.bufferedRequest||k(P,F),M?v(C,P,F,Z,U):C(P,F,Z,U)}})(W,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new g(this)}function A(z){if($=$||a(1313),!(E.call(A,this)||this instanceof $))return new A(z);this._writableState=new x(z,this),this.writable=!0,z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final)),b.call(this)}function R(z,W,ee,ne,Q,se,be){W.writelen=ne,W.writecb=be,W.writing=!0,W.sync=!0,ee?z._writev(Q,W.onwrite):z._write(Q,se,W.onwrite),W.sync=!1}function C(z,W,ee,ne){ee||function(Q,se){se.length===0&&se.needDrain&&(se.needDrain=!1,Q.emit("drain"))}(z,W),W.pendingcb--,ne(),V(z,W)}function k(z,W){W.bufferProcessing=!0;var ee=W.bufferedRequest;if(z._writev&&ee&&ee.next){var ne=W.bufferedRequestCount,Q=new Array(ne),se=W.corkedRequestsFree;se.entry=ee;for(var be=0,H=!0;ee;)Q[be]=ee,ee.isBuf||(H=!1),ee=ee.next,be+=1;Q.allBuffers=H,R(z,W,!0,W.length,Q,"",se.finish),W.pendingcb++,W.lastBufferedRequest=null,se.next?(W.corkedRequestsFree=se.next,se.next=null):W.corkedRequestsFree=new g(W),W.bufferedRequestCount=0}else{for(;ee;){var P=ee.chunk,L=ee.encoding,F=ee.callback;if(R(z,W,!1,W.objectMode?1:P.length,P,L,F),ee=ee.next,W.bufferedRequestCount--,W.writing)break}ee===null&&(W.lastBufferedRequest=null)}W.bufferedRequest=ee,W.bufferProcessing=!1}function D(z){return z.ending&&z.length===0&&z.bufferedRequest===null&&!z.finished&&!z.writing}function j(z,W){z._final(function(ee){W.pendingcb--,ee&&z.emit("error",ee),W.prefinished=!0,z.emit("prefinish"),V(z,W)})}function V(z,W){var ee=D(W);return ee&&(function(ne,Q){Q.prefinished||Q.finalCalled||(typeof ne._final=="function"?(Q.pendingcb++,Q.finalCalled=!0,u.nextTick(j,ne,Q)):(Q.prefinished=!0,ne.emit("prefinish")))}(z,W),W.pendingcb===0&&(W.finished=!0,z.emit("finish"))),ee}S.inherits(A,b),x.prototype.getBuffer=function(){for(var z=this.bufferedRequest,W=[];z;)W.push(z),z=z.next;return W},function(){try{Object.defineProperty(x.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(z){return!!E.call(this,z)||this===A&&z&&z._writableState instanceof x}})):E=function(z){return z instanceof this},A.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},A.prototype.write=function(z,W,ee){var ne,Q=this._writableState,se=!1,be=!Q.objectMode&&(ne=z,m.isBuffer(ne)||ne instanceof p);return be&&!m.isBuffer(z)&&(z=function(H){return m.from(H)}(z)),typeof W=="function"&&(ee=W,W=null),be?W="buffer":W||(W=Q.defaultEncoding),typeof ee!="function"&&(ee=y),Q.ended?function(H,P){var L=new Error("write after end");H.emit("error",L),u.nextTick(P,L)}(this,ee):(be||function(H,P,L,F){var M=!0,U=!1;return L===null?U=new TypeError("May not write null values to stream"):typeof L=="string"||L===void 0||P.objectMode||(U=new TypeError("Invalid non-string/buffer chunk")),U&&(H.emit("error",U),u.nextTick(F,U),M=!1),M}(this,Q,z,ee))&&(Q.pendingcb++,se=function(H,P,L,F,M,U){if(!L){var Z=function($e,ce,le){return $e.objectMode||$e.decodeStrings===!1||typeof ce!="string"||(ce=m.from(ce,le)),ce}(P,F,M);F!==Z&&(L=!0,M="buffer",F=Z)}var K=P.objectMode?1:F.length;P.length+=K;var oe=P.length<P.highWaterMark;if(oe||(P.needDrain=!0),P.writing||P.corked){var ie=P.lastBufferedRequest;P.lastBufferedRequest={chunk:F,encoding:M,isBuf:L,callback:U,next:null},ie?ie.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else R(H,P,!1,K,F,M,U);return oe}(this,Q,be,z,W,ee)),se},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,z.writing||z.corked||z.bufferProcessing||!z.bufferedRequest||k(this,z))},A.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((z+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+z);return this._writableState.defaultEncoding=z,this},Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(z,W,ee){ee(new Error("_write() is not implemented"))},A.prototype._writev=null,A.prototype.end=function(z,W,ee){var ne=this._writableState;typeof z=="function"?(ee=z,z=null,W=null):typeof W=="function"&&(ee=W,W=null),z!=null&&this.write(z,W),ne.corked&&(ne.corked=1,this.uncork()),ne.ending||function(Q,se,be){se.ending=!0,V(Q,se),be&&(se.finished?u.nextTick(be):Q.once("finish",be)),se.ended=!0,Q.writable=!1}(this,ne,ee)},Object.defineProperty(A.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(z){this._writableState&&(this._writableState.destroyed=z)}}),A.prototype.destroy=_.destroy,A.prototype._undestroy=_.undestroy,A.prototype._destroy=function(z,W){this.end(),W(z)}},9166:(d,f,a)=>{function u(h,b){var m=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(!m){if(Array.isArray(h)||(m=function(R,C){if(R){if(typeof R=="string")return g(R,C);var k={}.toString.call(R).slice(8,-1);return k==="Object"&&R.constructor&&(k=R.constructor.name),k==="Map"||k==="Set"?Array.from(R):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?g(R,C):void 0}}(h))||b){m&&(h=m);var p=0,_=function(){};return{s:_,n:function(){return p>=h.length?{done:!0}:{done:!1,value:h[p++]}},e:function(R){throw R},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,x=!0,A=!1;return{s:function(){m=m.call(h)},n:function(){var R=m.next();return x=R.done,R},e:function(R){A=!0,y=R},f:function(){try{x||m.return==null||m.return()}finally{if(A)throw y}}}}function g(h,b){(b==null||b>h.length)&&(b=h.length);for(var m=0,p=Array(b);m<b;m++)p[m]=h[m];return p}var $=a(8759),v=a(3696);function S(h,b,m){if(b!=null){var p=Object.keys(b).some(function(W){return W[0]==="$"});if(p){if(b.$push&&z(b.$push),b.$addToSet&&z(b.$addToSet),b.$set!=null)for(var _=0,y=Object.keys(b.$set);_<y.length;_++){var x=y[_];E(m,x,b.$set,h)}if(b.$setOnInsert!=null)for(var A=0,R=Object.keys(b.$setOnInsert);A<R.length;A++){var C=R[A];E(m,C,b.$setOnInsert,h)}}var k,D=Object.keys(b).filter(function(W){return W[0]!=="$"}),j=u(D);try{for(j.s();!(k=j.n()).done;){var V=k.value;E(m,V,b,h)}}catch(W){j.e(W)}finally{j.f()}}function z(W){for(var ee=function(){var se=Q[ne],be=m.path(se.replace(/\.\$\./i,".").replace(/.\$$/,""));if(W[se]&&be&&be.$isMongooseDocumentArray&&be.schema.options.timestamps){var H=be.schema.options.timestamps,P=v(H,"createdAt"),L=v(H,"updatedAt");W[se].$each?W[se].$each.forEach(function(F){L!=null&&(F[L]=h),P!=null&&(F[P]=h),S(h,F,be.schema)}):(L!=null&&(W[se][L]=h),P!=null&&(W[se][P]=h),S(h,W[se],be.schema))}},ne=0,Q=Object.keys(W);ne<Q.length;ne++)ee()}}function E(h,b,m,p){var _=$(b),y=h.path(_);if(y){for(var x=[],A=_.split("."),R=A.length-1;R>0;--R){var C=h.path(A.slice(0,R).join("."));C!=null&&(C.$isMongooseDocumentArray||C.$isSingleNested)&&x.push({parentPath:b.split(".").slice(0,R).join("."),parentSchemaType:C})}if(Array.isArray(m[b])&&y.$isMongooseDocumentArray)(function(P,L,F){var M=L.schema.options.timestamps,U=P.length;if(M)for(var Z=v(M,"createdAt"),K=v(M,"updatedAt"),oe=0;oe<U;++oe)K!=null&&(P[oe][K]=F),Z!=null&&(P[oe][Z]=F),S(F,P[oe],L.schema);else for(var ie=0;ie<U;++ie)S(F,P[ie],L.schema)})(m[b],y,p);else if(m[b]&&y.$isSingleNested)(function(P,L,F){var M=L.schema.options.timestamps;if(M){var U=v(M,"createdAt"),Z=v(M,"updatedAt");Z!=null&&(P[Z]=F),U!=null&&(P[U]=F),S(F,P,L.schema)}else S(F,P,L.schema)})(m[b],y,p);else if(x.length>0){var k,D=u(x);try{for(D.s();!(k=D.n()).done;){var j=k.value,V=j.parentPath,z=j.parentSchemaType,W=z.schema.options.timestamps,ee=v(W,"updatedAt");if(W&&ee!=null){if(z.$isSingleNested)m[V+"."+ee]=p;else if(z.$isMongooseDocumentArray){var ne=b.substring(V.length+1);if(/^\d+$/.test(ne)){m[V+"."+ne][ee]=p;continue}var Q=ne.indexOf(".");m[V+"."+(ne=Q!==-1?ne.substring(0,Q):ne)+"."+ee]=p}}}}catch(P){D.e(P)}finally{D.f()}}else if(y.schema!=null&&y.schema!=h&&m[b]){var se=y.schema.options.timestamps,be=v(se,"createdAt"),H=v(se,"updatedAt");if(!se)return;H!=null&&(m[b][H]=p),be!=null&&(m[b][be]=p)}}}d.exports=S},9176:(d,f,a)=>{var u=f;u.der=a(2655),u.pem=a(8418)},9183:d=>{d.exports=function(f){return typeof f=="function"&&f.constructor&&f.constructor.name==="AsyncFunction"}},9206:d=>{d.exports=EvalError},9217:d=>{var f=Math.pow(2,30)-1;d.exports=function(a,u){if(typeof a!="number")throw new TypeError("Iterations not a number");if(a<0)throw new TypeError("Bad iterations");if(typeof u!="number")throw new TypeError("Key length not a number");if(u<0||u>f||u!=u)throw new TypeError("Bad key length")}},9247:(d,f,a)=>{var u=a(2481),g=a(2273);d.exports=function(){var $=u();return g(Object,{is:$},{is:function(){return Object.is!==$}}),$}},9271:d=>{d.exports=function(){throw new Error("Readable.from is not available in the browser")}},9313:(d,f,a)=>{var u=a(4685),g=a(3528);function $(v,S,E){if(!(this instanceof $))return new $(v,S,E);this.Hash=v,this.blockSize=v.blockSize/8,this.outSize=v.outSize/8,this.inner=null,this.outer=null,this._init(u.toArray(S,E))}d.exports=$,$.prototype._init=function(v){v.length>this.blockSize&&(v=new this.Hash().update(v).digest()),g(v.length<=this.blockSize);for(var S=v.length;S<this.blockSize;S++)v.push(0);for(S=0;S<v.length;S++)v[S]^=54;for(this.inner=new this.Hash().update(v),S=0;S<v.length;S++)v[S]^=106;this.outer=new this.Hash().update(v)},$.prototype.update=function(v,S){return this.inner.update(v,S),this},$.prototype.digest=function(v){return this.outer.update(this.inner.digest()),this.outer.digest(v)}},9344:(d,f,a)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(y)}var g,$=a(3071),v=a(953)(),S=a(5994),E=a(1464);if(v){var h=$("RegExp.prototype.exec"),b={},m=function(){throw b},p={toString:m,valueOf:m};u(Symbol.toPrimitive)==="symbol"&&(p[Symbol.toPrimitive]=m),g=function(y){if(!y||u(y)!=="object")return!1;var x=E(y,"lastIndex");if(!x||!S(x,"value"))return!1;try{h(y,p)}catch(A){return A===b}}}else{var _=$("Object.prototype.toString");g=function(y){return!(!y||u(y)!=="object"&&typeof y!="function")&&_(y)==="[object RegExp]"}}d.exports=g},9363:(d,f,a)=>{var u=a(9732).Buffer,g=u.alloc(16,0);function $(S){var E=u.allocUnsafe(16);return E.writeUInt32BE(S[0]>>>0,0),E.writeUInt32BE(S[1]>>>0,4),E.writeUInt32BE(S[2]>>>0,8),E.writeUInt32BE(S[3]>>>0,12),E}function v(S){this.h=S,this.state=u.alloc(16,0),this.cache=u.allocUnsafe(0)}v.prototype.ghash=function(S){for(var E=-1;++E<S.length;)this.state[E]^=S[E];this._multiply()},v.prototype._multiply=function(){for(var S,E,h,b=[(S=this.h).readUInt32BE(0),S.readUInt32BE(4),S.readUInt32BE(8),S.readUInt32BE(12)],m=[0,0,0,0],p=-1;++p<128;){for(this.state[~~(p/8)]&1<<7-p%8&&(m[0]^=b[0],m[1]^=b[1],m[2]^=b[2],m[3]^=b[3]),h=!!(1&b[3]),E=3;E>0;E--)b[E]=b[E]>>>1|(1&b[E-1])<<31;b[0]=b[0]>>>1,h&&(b[0]=b[0]^-520093696)}this.state=$(m)},v.prototype.update=function(S){var E;for(this.cache=u.concat([this.cache,S]);this.cache.length>=16;)E=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(E)},v.prototype.final=function(S,E){return this.cache.length&&this.ghash(u.concat([this.cache,g],16)),this.ghash($([0,S,0,E])),this.state},d.exports=v},9380:(d,f,a)=>{function u(){u=function(){return _};var p,_={},y=Object.prototype,x=y.hasOwnProperty,A=Object.defineProperty||function(_e,q,re){_e[q]=re.value},R=typeof Symbol=="function"?Symbol:{},C=R.iterator||"@@iterator",k=R.asyncIterator||"@@asyncIterator",D=R.toStringTag||"@@toStringTag";function j(_e,q,re){return Object.defineProperty(_e,q,{value:re,enumerable:!0,configurable:!0,writable:!0}),_e[q]}try{j({},"")}catch{j=function(q,re,fe){return q[re]=fe}}function V(_e,q,re,fe){var we=q&&q.prototype instanceof be?q:be,Re=Object.create(we.prototype),ke=new le(fe||[]);return A(Re,"_invoke",{value:oe(_e,re,ke)}),Re}function z(_e,q,re){try{return{type:"normal",arg:_e.call(q,re)}}catch(fe){return{type:"throw",arg:fe}}}_.wrap=V;var W="suspendedStart",ee="suspendedYield",ne="executing",Q="completed",se={};function be(){}function H(){}function P(){}var L={};j(L,C,function(){return this});var F=Object.getPrototypeOf,M=F&&F(F(ye([])));M&&M!==y&&x.call(M,C)&&(L=M);var U=P.prototype=be.prototype=Object.create(L);function Z(_e){["next","throw","return"].forEach(function(q){j(_e,q,function(re){return this._invoke(q,re)})})}function K(_e,q){function re(we,Re,ke,ue){var Ee=z(_e[we],_e,Re);if(Ee.type!=="throw"){var Ae=Ee.arg,Ne=Ae.value;return Ne&&$(Ne)=="object"&&x.call(Ne,"__await")?q.resolve(Ne.__await).then(function(De){re("next",De,ke,ue)},function(De){re("throw",De,ke,ue)}):q.resolve(Ne).then(function(De){Ae.value=De,ke(Ae)},function(De){return re("throw",De,ke,ue)})}ue(Ee.arg)}var fe;A(this,"_invoke",{value:function(we,Re){function ke(){return new q(function(ue,Ee){re(we,Re,ue,Ee)})}return fe=fe?fe.then(ke,ke):ke()}})}function oe(_e,q,re){var fe=W;return function(we,Re){if(fe===ne)throw Error("Generator is already running");if(fe===Q){if(we==="throw")throw Re;return{value:p,done:!0}}for(re.method=we,re.arg=Re;;){var ke=re.delegate;if(ke){var ue=ie(ke,re);if(ue){if(ue===se)continue;return ue}}if(re.method==="next")re.sent=re._sent=re.arg;else if(re.method==="throw"){if(fe===W)throw fe=Q,re.arg;re.dispatchException(re.arg)}else re.method==="return"&&re.abrupt("return",re.arg);fe=ne;var Ee=z(_e,q,re);if(Ee.type==="normal"){if(fe=re.done?Q:ee,Ee.arg===se)continue;return{value:Ee.arg,done:re.done}}Ee.type==="throw"&&(fe=Q,re.method="throw",re.arg=Ee.arg)}}}function ie(_e,q){var re=q.method,fe=_e.iterator[re];if(fe===p)return q.delegate=null,re==="throw"&&_e.iterator.return&&(q.method="return",q.arg=p,ie(_e,q),q.method==="throw")||re!=="return"&&(q.method="throw",q.arg=new TypeError("The iterator does not provide a '"+re+"' method")),se;var we=z(fe,_e.iterator,q.arg);if(we.type==="throw")return q.method="throw",q.arg=we.arg,q.delegate=null,se;var Re=we.arg;return Re?Re.done?(q[_e.resultName]=Re.value,q.next=_e.nextLoc,q.method!=="return"&&(q.method="next",q.arg=p),q.delegate=null,se):Re:(q.method="throw",q.arg=new TypeError("iterator result is not an object"),q.delegate=null,se)}function $e(_e){var q={tryLoc:_e[0]};1 in _e&&(q.catchLoc=_e[1]),2 in _e&&(q.finallyLoc=_e[2],q.afterLoc=_e[3]),this.tryEntries.push(q)}function ce(_e){var q=_e.completion||{};q.type="normal",delete q.arg,_e.completion=q}function le(_e){this.tryEntries=[{tryLoc:"root"}],_e.forEach($e,this),this.reset(!0)}function ye(_e){if(_e||_e===""){var q=_e[C];if(q)return q.call(_e);if(typeof _e.next=="function")return _e;if(!isNaN(_e.length)){var re=-1,fe=function we(){for(;++re<_e.length;)if(x.call(_e,re))return we.value=_e[re],we.done=!1,we;return we.value=p,we.done=!0,we};return fe.next=fe}}throw new TypeError($(_e)+" is not iterable")}return H.prototype=P,A(U,"constructor",{value:P,configurable:!0}),A(P,"constructor",{value:H,configurable:!0}),H.displayName=j(P,D,"GeneratorFunction"),_.isGeneratorFunction=function(_e){var q=typeof _e=="function"&&_e.constructor;return!!q&&(q===H||(q.displayName||q.name)==="GeneratorFunction")},_.mark=function(_e){return Object.setPrototypeOf?Object.setPrototypeOf(_e,P):(_e.__proto__=P,j(_e,D,"GeneratorFunction")),_e.prototype=Object.create(U),_e},_.awrap=function(_e){return{__await:_e}},Z(K.prototype),j(K.prototype,k,function(){return this}),_.AsyncIterator=K,_.async=function(_e,q,re,fe,we){we===void 0&&(we=Promise);var Re=new K(V(_e,q,re,fe),we);return _.isGeneratorFunction(q)?Re:Re.next().then(function(ke){return ke.done?ke.value:Re.next()})},Z(U),j(U,D,"Generator"),j(U,C,function(){return this}),j(U,"toString",function(){return"[object Generator]"}),_.keys=function(_e){var q=Object(_e),re=[];for(var fe in q)re.push(fe);return re.reverse(),function we(){for(;re.length;){var Re=re.pop();if(Re in q)return we.value=Re,we.done=!1,we}return we.done=!0,we}},_.values=ye,le.prototype={constructor:le,reset:function(_e){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(ce),!_e)for(var q in this)q.charAt(0)==="t"&&x.call(this,q)&&!isNaN(+q.slice(1))&&(this[q]=p)},stop:function(){this.done=!0;var _e=this.tryEntries[0].completion;if(_e.type==="throw")throw _e.arg;return this.rval},dispatchException:function(_e){if(this.done)throw _e;var q=this;function re(Ee,Ae){return Re.type="throw",Re.arg=_e,q.next=Ee,Ae&&(q.method="next",q.arg=p),!!Ae}for(var fe=this.tryEntries.length-1;fe>=0;--fe){var we=this.tryEntries[fe],Re=we.completion;if(we.tryLoc==="root")return re("end");if(we.tryLoc<=this.prev){var ke=x.call(we,"catchLoc"),ue=x.call(we,"finallyLoc");if(ke&&ue){if(this.prev<we.catchLoc)return re(we.catchLoc,!0);if(this.prev<we.finallyLoc)return re(we.finallyLoc)}else if(ke){if(this.prev<we.catchLoc)return re(we.catchLoc,!0)}else{if(!ue)throw Error("try statement without catch or finally");if(this.prev<we.finallyLoc)return re(we.finallyLoc)}}}},abrupt:function(_e,q){for(var re=this.tryEntries.length-1;re>=0;--re){var fe=this.tryEntries[re];if(fe.tryLoc<=this.prev&&x.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var we=fe;break}}we&&(_e==="break"||_e==="continue")&&we.tryLoc<=q&&q<=we.finallyLoc&&(we=null);var Re=we?we.completion:{};return Re.type=_e,Re.arg=q,we?(this.method="next",this.next=we.finallyLoc,se):this.complete(Re)},complete:function(_e,q){if(_e.type==="throw")throw _e.arg;return _e.type==="break"||_e.type==="continue"?this.next=_e.arg:_e.type==="return"?(this.rval=this.arg=_e.arg,this.method="return",this.next="end"):_e.type==="normal"&&q&&(this.next=q),se},finish:function(_e){for(var q=this.tryEntries.length-1;q>=0;--q){var re=this.tryEntries[q];if(re.finallyLoc===_e)return this.complete(re.completion,re.afterLoc),ce(re),se}},catch:function(_e){for(var q=this.tryEntries.length-1;q>=0;--q){var re=this.tryEntries[q];if(re.tryLoc===_e){var fe=re.completion;if(fe.type==="throw"){var we=fe.arg;ce(re)}return we}}throw Error("illegal catch attempt")},delegateYield:function(_e,q,re){return this.delegate={iterator:ye(_e),resultName:q,nextLoc:re},this.method==="next"&&(this.arg=p),se}},_}function g(p,_,y,x,A,R,C){try{var k=p[R](C),D=k.value}catch(j){return void y(j)}k.done?_(D):Promise.resolve(D).then(x,A)}function $(p){return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},$(p)}var v=a(2400),S=a(2746),E=a(3303)._,h=a(7352),b=a(8768);function m(p,_,y,x,A){if($(x)==="object"&&x!=null&&A==null&&(A=x,x=void 0),y!=null){var R={isNew:y.isNew};"defaults"in y.$__&&(R.defaults=y.$__.defaults),A=Object.assign(R,A)}A!=null&&A.path!=null&&(this.$basePath=A.path),v.call(this,p,_,x,A),delete this.$__.priorDoc}d.exports=m,m.prototype=Object.create(v.prototype),Object.defineProperty(m.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0}),Object.defineProperty(m.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0}),m.prototype.toBSON=function(){return this.toObject(E)},m.prototype.save=function(){var p,_=(p=u().mark(function y(x){var A=this;return u().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(x=x||{}).suppressWarning||b.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),R.abrupt("return",new Promise(function(C,k){A.$__save(function(D){if(D!=null)return k(D);C(A)})}));case 3:case"end":return R.stop()}},y)}),function(){var y=this,x=arguments;return new Promise(function(A,R){var C=p.apply(y,x);function k(j){g(C,A,R,k,D,"next",j)}function D(j){g(C,A,R,k,D,"throw",j)}k(void 0)})});return function(y){return _.apply(this,arguments)}}(),m.prototype.$__fullPath=function(p){return this.$__.fullPath||this.ownerDocument(),p?this.$__.fullPath+"."+p:this.$__.fullPath},m.prototype.$__pathRelativeToParent=function(p){return p==null?this.$basePath:[this.$basePath,p].join(".")},m.prototype.$__save=function(p){var _=this;return S(function(){return p(null,_)})},m.prototype.$isValid=function(p){var _=this.$parent(),y=this.$__pathRelativeToParent(p);return _!=null&&y!=null?_.$isValid(y):v.prototype.$isValid.call(this,p)},m.prototype.markModified=function(p){v.prototype.markModified.call(this,p);var _=this.$parent(),y=this.$__pathRelativeToParent(p);if(_!=null&&y!=null){var x=this.$__pathRelativeToParent().replace(/\.$/,"");_.isDirectModified(x)||this.isNew||this.$__parent.markModified(y,this)}},m.prototype.isModified=function(p,_,y){var x=this,A=this.$parent();return A!=null?(Array.isArray(p)||typeof p=="string"?p=(p=Array.isArray(p)?p:p.split(" ")).map(function(R){return x.$__pathRelativeToParent(R)}).filter(function(R){return R!=null}):p||(p=this.$__pathRelativeToParent()),A.$isModified(p,_,y)):v.prototype.isModified.call(this,p,_,y)},m.prototype.$markValid=function(p){v.prototype.$markValid.call(this,p);var _=this.$parent(),y=this.$__pathRelativeToParent(p);_!=null&&y!=null&&_.$markValid(y)},m.prototype.invalidate=function(p,_,y){v.prototype.invalidate.call(this,p,_,y);var x=this.$parent(),A=this.$__pathRelativeToParent(p);if(x!=null&&A!=null)x.invalidate(A,_,y);else if(_.kind==="cast"||_.name==="CastError"||A==null)throw _;return this.ownerDocument().$__.validationError},m.prototype.$ignore=function(p){v.prototype.$ignore.call(this,p);var _=this.$parent(),y=this.$__pathRelativeToParent(p);_!=null&&y!=null&&_.$ignore(y)},m.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;for(var p=this,_=[],y=new Set([p]);typeof p.$__pathRelativeToParent=="function";){_.unshift(p.$__pathRelativeToParent(void 0,!0));var x=p.$parent();if(x==null)break;if(p=x,y.has(p))throw new Error("Infinite subdocument loop: subdoc with _id "+p._id+" is a parent of itself");y.add(p)}return this.$__.fullPath=_.join("."),this.$__.ownerDocument=p,this.$__.ownerDocument},m.prototype.$__fullPathWithIndexes=function(){for(var p=this,_=[],y=new Set([p]);typeof p.$__pathRelativeToParent=="function";){_.unshift(p.$__pathRelativeToParent(void 0,!1));var x=p.$parent();if(x==null)break;if(p=x,y.has(p))throw new Error("Infinite subdocument loop: subdoc with _id "+p._id+" is a parent of itself");y.add(p)}return _.join(".")},m.prototype.parent=function(){return this.$__parent},m.prototype.$parent=m.prototype.parent,m.prototype.$__deleteOne=function(p){if(p!=null)return p(null,this)},m.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)},m.prototype.deleteOne=function(p,_){if(typeof p=="function"&&(_=p,p=null),function(x){var A=x.ownerDocument();function R(){A.$removeListener("save",R),A.$removeListener("deleteOne",R),x.emit("deleteOne",x),x.constructor.emit("deleteOne",x)}A.$on("save",R),A.$on("deleteOne",R)}(this),!p||!p.noop){this.$__removeFromParent();var y=this.ownerDocument();y.$__.removedSubdocs=y.$__.removedSubdocs||[],y.$__.removedSubdocs.push(this)}return this.$__deleteOne(_)},m.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')},m.prototype.inspect=function(){return this.toObject()},h.inspect.custom&&(m.prototype[h.inspect.custom]=m.prototype.inspect)},9460:(d,f,a)=>{var u=a(5832).Buffer,g=a(3609);function $(v,S){var E=Number(S);if(isNaN(E))throw new g("number",S,v);return E}d.exports=function(v){var S=this;return Array.isArray(v)?v.map(function(E){return $(S.path,E)}):u.isBuffer(v)?v:$(S.path,v)}},9471:d=>{d.exports=Math.abs},9473:(d,f)=>{f.readUInt32BE=function($,v){return($[0+v]<<24|$[1+v]<<16|$[2+v]<<8|$[3+v])>>>0},f.writeUInt32BE=function($,v,S){$[0+S]=v>>>24,$[1+S]=v>>>16&255,$[2+S]=v>>>8&255,$[3+S]=255&v},f.ip=function($,v,S,E){for(var h=0,b=0,m=6;m>=0;m-=2){for(var p=0;p<=24;p+=8)h<<=1,h|=v>>>p+m&1;for(p=0;p<=24;p+=8)h<<=1,h|=$>>>p+m&1}for(m=6;m>=0;m-=2){for(p=1;p<=25;p+=8)b<<=1,b|=v>>>p+m&1;for(p=1;p<=25;p+=8)b<<=1,b|=$>>>p+m&1}S[E+0]=h>>>0,S[E+1]=b>>>0},f.rip=function($,v,S,E){for(var h=0,b=0,m=0;m<4;m++)for(var p=24;p>=0;p-=8)h<<=1,h|=v>>>p+m&1,h<<=1,h|=$>>>p+m&1;for(m=4;m<8;m++)for(p=24;p>=0;p-=8)b<<=1,b|=v>>>p+m&1,b<<=1,b|=$>>>p+m&1;S[E+0]=h>>>0,S[E+1]=b>>>0},f.pc1=function($,v,S,E){for(var h=0,b=0,m=7;m>=5;m--){for(var p=0;p<=24;p+=8)h<<=1,h|=v>>p+m&1;for(p=0;p<=24;p+=8)h<<=1,h|=$>>p+m&1}for(p=0;p<=24;p+=8)h<<=1,h|=v>>p+m&1;for(m=1;m<=3;m++){for(p=0;p<=24;p+=8)b<<=1,b|=v>>p+m&1;for(p=0;p<=24;p+=8)b<<=1,b|=$>>p+m&1}for(p=0;p<=24;p+=8)b<<=1,b|=$>>p+m&1;S[E+0]=h>>>0,S[E+1]=b>>>0},f.r28shl=function($,v){return $<<v&268435455|$>>>28-v};var a=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];f.pc2=function($,v,S,E){for(var h=0,b=0,m=a.length>>>1,p=0;p<m;p++)h<<=1,h|=$>>>a[p]&1;for(p=m;p<a.length;p++)b<<=1,b|=v>>>a[p]&1;S[E+0]=h>>>0,S[E+1]=b>>>0},f.expand=function($,v,S){var E=0,h=0;E=(1&$)<<5|$>>>27;for(var b=23;b>=15;b-=4)E<<=6,E|=$>>>b&63;for(b=11;b>=3;b-=4)h|=$>>>b&63,h<<=6;h|=(31&$)<<1|$>>>31,v[S+0]=E>>>0,v[S+1]=h>>>0};var u=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];f.substitute=function($,v){for(var S=0,E=0;E<4;E++)S<<=4,S|=u[64*E+($>>>18-6*E&63)];for(E=0;E<4;E++)S<<=4,S|=u[256+64*E+(v>>>18-6*E&63)];return S>>>0};var g=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];f.permute=function($){for(var v=0,S=0;S<g.length;S++)v<<=1,v|=$>>>g[S]&1;return v>>>0},f.padSplit=function($,v,S){for(var E=$.toString(2);E.length<v;)E="0"+E;for(var h=[],b=0;b<v;b+=S)h.push(E.slice(b,b+S));return h.join(" ")}},9528:(d,f,a)=>{function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(h)}function g(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!h})()}function $(h){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(h)}function v(h,b){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},v(h,b)}var S=function(h){function b(){return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,b),function(p,_,y){return _=$(_),function(x,A){if(A&&(u(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(x)}(p,g()?Reflect.construct(_,y||[],$(p).constructor):_.apply(p,y))}(this,b,arguments)}return function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(_&&_.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),_&&v(p,_)}(b,h),m=b,Object.defineProperty(m,"prototype",{writable:!1}),m;var m}(a(8879)),E=a(5761);Object.defineProperty(S.prototype,"enum",E),Object.defineProperty(S.prototype,"match",E),Object.defineProperty(S.prototype,"lowercase",E),Object.defineProperty(S.prototype,"trim",E),Object.defineProperty(S.prototype,"uppercase",E),Object.defineProperty(S.prototype,"minLength",E),Object.defineProperty(S.prototype,"minlength",E),Object.defineProperty(S.prototype,"maxLength",E),Object.defineProperty(S.prototype,"maxlength",E),Object.defineProperty(S.prototype,"populate",E),d.exports=S},9538:(d,f,a)=>{function u(p){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(p)}function g(p,_){for(var y=0;y<_.length;y++){var x=_[y];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(p,$(x.key),x)}}function $(p){var _=function(y){if(u(y)!="object"||!y)return y;var x=y[Symbol.toPrimitive];if(x!==void 0){var A=x.call(y,"string");if(u(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(p);return u(_)=="symbol"?_:_+""}function v(){try{var p=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v=function(){return!!p})()}function S(p){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},S(p)}function E(p,_){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,x){return y.__proto__=x,y},E(p,_)}var h=a(8213),b=function(p){function _(A,R){var C;(function(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")})(this,_);var k=A.message;k||(k=h.messages.general.default);var D=m(k,A,R);return C=function(j,V,z){return V=S(V),function(W,ee){if(ee&&(u(ee)=="object"||typeof ee=="function"))return ee;if(ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}(W)}(j,v()?Reflect.construct(V,z||[],S(j).constructor):V.apply(j,z))}(this,_,[D]),A=Object.assign({},A,{message:D}),C.properties=A,C.kind=A.type,C.path=A.path,C.value=A.value,C.reason=A.reason,C}return function(A,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(R&&R.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),R&&E(A,R)}(_,p),y=_,(x=[{key:"toString",value:function(){return this.message}},{key:"toJSON",value:function(){return Object.assign({name:this.name,message:this.message},this)}}])&&g(y.prototype,x),Object.defineProperty(y,"prototype",{writable:!1}),y;var y,x}(h);function m(p,_,y){if(typeof p=="function")return p(_,y);for(var x=0,A=Object.keys(_);x<A.length;x++){var R=A[x];R!=="message"&&(p=p.replace("{"+R.toUpperCase()+"}",_[R]))}return p}Object.defineProperty(b.prototype,"name",{value:"ValidatorError"}),Object.defineProperty(b.prototype,"properties",{enumerable:!1,writable:!0,value:null}),b.prototype.formatMessage=m,d.exports=b},9539:d=>{function f(a,u){(u==null||u>a.length)&&(u=a.length);for(var g=0,$=Array(u);g<u;g++)$[g]=a[g];return $}d.exports=function(a,u,g){for(var $={},v=0,S=Object.keys(u.tree);v<S.length;v++){var E=S[v];g&&(a.paths[E]||a.nested[E]||a.singleNestedPaths[E])||($[E]=u.tree[E])}a.options._isMerging=!0,a.add($,null),delete a.options._isMerging,a.callQueue=a.callQueue.concat(u.callQueue),a.method(u.methods),a.static(u.statics);for(var h=0,b=Object.entries(u._userProvidedOptions);h<b.length;h++){var m=(y=b[h],x=2,function(C){if(Array.isArray(C))return C}(y)||function(C,k){var D=C==null?null:typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(D!=null){var j,V,z,W,ee=[],ne=!0,Q=!1;try{if(z=(D=D.call(C)).next,k===0){if(Object(D)!==D)return;ne=!1}else for(;!(ne=(j=z.call(D)).done)&&(ee.push(j.value),ee.length!==k);ne=!0);}catch(se){Q=!0,V=se}finally{try{if(!ne&&D.return!=null&&(W=D.return(),Object(W)!==W))return}finally{if(Q)throw V}}return ee}}(y,x)||function(C,k){if(C){if(typeof C=="string")return f(C,k);var D={}.toString.call(C).slice(8,-1);return D==="Object"&&C.constructor&&(D=C.constructor.name),D==="Map"||D==="Set"?Array.from(C):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?f(C,k):void 0}}(y,x)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),p=m[0],_=m[1];p in a._userProvidedOptions||a.set(p,_)}var y,x;for(var A in u.query)a.query[A]=u.query[A];for(var R in u.virtuals)a.virtuals[R]=u.virtuals[R].clone();a._indexes=a._indexes.concat(u._indexes||[]),a.s.hooks.merge(u.s.hooks,!1)}},9553:(d,f,a)=>{var u=a(5832).Buffer;function g(S){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},g(S)}var $=a(9639),v=a(2402);d.exports=function(S){return S==null?S:g(S)==="object"&&typeof S.$numberDecimal=="string"?$.fromString(S.$numberDecimal):S instanceof $?S:typeof S=="string"?$.fromString(S):typeof u=="function"&&u.isBuffer(S)||typeof Uint8Array=="function"&&S instanceof Uint8Array?new $(S):typeof S=="number"?$.fromString(String(S)):typeof S.valueOf=="function"&&typeof S.valueOf()=="string"?$.fromString(S.valueOf()):void v.ok(!1)}},9600:(d,f,a)=>{f.Array=a(7557),f.Buffer=a(6365),f.Document=f.Embedded=a(6547),f.DocumentArray=a(4878),f.Double=a(2822),f.Decimal128=a(9639),f.ObjectId=a(5549),f.Map=a(2081),f.Subdocument=a(9380),f.UUID=a(1344)},9604:(d,f,a)=>{var u=a(5558).p,g=a(5558).G;function $(S,E){switch(S.$geometry.type){case"Polygon":case"LineString":case"Point":u(S.$geometry.coordinates,E)}return v(E,S),S}function v(S,E){E.$maxDistance&&(E.$maxDistance=g.call(S,E.$maxDistance)),E.$minDistance&&(E.$minDistance=g.call(S,E.$minDistance))}f.cast$geoIntersects=function(S){if(S.$geometry)return $(S,this),S},f.cast$near=function(S){var E=a(7760);if(Array.isArray(S))return u(S,this),S;if(v(this,S),S&&S.$geometry)return $(S,this);if(!Array.isArray(S))throw new TypeError("$near must be either an array or an object with a $geometry property");return E.prototype.castForQuery.call(this,null,S)},f.cast$within=function(S){var E=this;if(v(this,S),S.$box||S.$polygon){var h=S.$box?"$box":"$polygon";S[h].forEach(function(m){if(!Array.isArray(m))throw new TypeError("Invalid $within $box argument. Expected an array, received "+m);m.forEach(function(p,_){m[_]=g.call(E,p)})})}else if(S.$center||S.$centerSphere){var b=S.$center?"$center":"$centerSphere";S[b].forEach(function(m,p){Array.isArray(m)?m.forEach(function(_,y){m[y]=g.call(E,_)}):S[b][p]=g.call(E,m)})}else S.$geometry&&$(S,this);return S}},9639:(d,f,a)=>{d.exports=a(3633).Decimal128},9652:(d,f,a)=>{var u=a(8201),g=a(2098),$=a(8629),v=a(3849),S=a(1685);function E(b,m,p){if(b=b.toLowerCase(),$[b])return g.createCipheriv(b,m,p);if(v[b])return new u({key:m,iv:p,mode:b});throw new TypeError("invalid suite type")}function h(b,m,p){if(b=b.toLowerCase(),$[b])return g.createDecipheriv(b,m,p);if(v[b])return new u({key:m,iv:p,mode:b,decrypt:!0});throw new TypeError("invalid suite type")}f.createCipher=f.Cipher=function(b,m){var p,_;if(b=b.toLowerCase(),$[b])p=$[b].key,_=$[b].iv;else{if(!v[b])throw new TypeError("invalid suite type");p=8*v[b].key,_=v[b].iv}var y=S(m,!1,p,_);return E(b,y.key,y.iv)},f.createCipheriv=f.Cipheriv=E,f.createDecipher=f.Decipher=function(b,m){var p,_;if(b=b.toLowerCase(),$[b])p=$[b].key,_=$[b].iv;else{if(!v[b])throw new TypeError("invalid suite type");p=8*v[b].key,_=v[b].iv}var y=S(m,!1,p,_);return h(b,y.key,y.iv)},f.createDecipheriv=f.Decipheriv=h,f.listCiphers=f.getCiphers=function(){return Object.keys(v).concat(g.getCiphers())}},9681:(d,f,a)=>{var u=a(198).F.ERR_INVALID_OPT_VALUE;d.exports={getHighWaterMark:function(g,$,v,S){var E=function(h,b,m){return h.highWaterMark!=null?h.highWaterMark:b?h[m]:null}($,S,v);if(E!=null){if(!isFinite(E)||Math.floor(E)!==E||E<0)throw new u(S?v:"highWaterMark",E);return Math.floor(E)}return g.objectMode?16:16384}}},9696:d=>{var f=/^function\s*([^\s(]+)/;d.exports=function(a){return a.name||(a.toString().trim().match(f)||[])[1]}},9723:(d,f,a)=>{var u=a(1970),g=a(7799),$=a(1679),v=a(3334),S=u.assert;function E(b){this.twisted=(0|b.a)!=1,this.mOneA=this.twisted&&(0|b.a)==-1,this.extended=this.mOneA,v.call(this,"edwards",b),this.a=new g(b.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new g(b.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new g(b.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),S(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|b.c)==1}function h(b,m,p,_,y){v.BasePoint.call(this,b,"projective"),m===null&&p===null&&_===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new g(m,16),this.y=new g(p,16),this.z=_?new g(_,16):this.curve.one,this.t=y&&new g(y,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}$(E,v),d.exports=E,E.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)},E.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)},E.prototype.jpoint=function(b,m,p,_){return this.point(b,m,p,_)},E.prototype.pointFromX=function(b,m){(b=new g(b,16)).red||(b=b.toRed(this.red));var p=b.redSqr(),_=this.c2.redSub(this.a.redMul(p)),y=this.one.redSub(this.c2.redMul(this.d).redMul(p)),x=_.redMul(y.redInvm()),A=x.redSqrt();if(A.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");var R=A.fromRed().isOdd();return(m&&!R||!m&&R)&&(A=A.redNeg()),this.point(b,A)},E.prototype.pointFromY=function(b,m){(b=new g(b,16)).red||(b=b.toRed(this.red));var p=b.redSqr(),_=p.redSub(this.c2),y=p.redMul(this.d).redMul(this.c2).redSub(this.a),x=_.redMul(y.redInvm());if(x.cmp(this.zero)===0){if(m)throw new Error("invalid point");return this.point(this.zero,b)}var A=x.redSqrt();if(A.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");return A.fromRed().isOdd()!==m&&(A=A.redNeg()),this.point(A,b)},E.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();var m=b.x.redSqr(),p=b.y.redSqr(),_=m.redMul(this.a).redAdd(p),y=this.c2.redMul(this.one.redAdd(this.d.redMul(m).redMul(p)));return _.cmp(y)===0},$(h,v.BasePoint),E.prototype.pointFromJSON=function(b){return h.fromJSON(this,b)},E.prototype.point=function(b,m,p,_){return new h(this,b,m,p,_)},h.fromJSON=function(b,m){return new h(b,m[0],m[1],m[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},h.prototype._extDbl=function(){var b=this.x.redSqr(),m=this.y.redSqr(),p=this.z.redSqr();p=p.redIAdd(p);var _=this.curve._mulA(b),y=this.x.redAdd(this.y).redSqr().redISub(b).redISub(m),x=_.redAdd(m),A=x.redSub(p),R=_.redSub(m),C=y.redMul(A),k=x.redMul(R),D=y.redMul(R),j=A.redMul(x);return this.curve.point(C,k,j,D)},h.prototype._projDbl=function(){var b,m,p,_,y,x,A=this.x.redAdd(this.y).redSqr(),R=this.x.redSqr(),C=this.y.redSqr();if(this.curve.twisted){var k=(_=this.curve._mulA(R)).redAdd(C);this.zOne?(b=A.redSub(R).redSub(C).redMul(k.redSub(this.curve.two)),m=k.redMul(_.redSub(C)),p=k.redSqr().redSub(k).redSub(k)):(y=this.z.redSqr(),x=k.redSub(y).redISub(y),b=A.redSub(R).redISub(C).redMul(x),m=k.redMul(_.redSub(C)),p=k.redMul(x))}else _=R.redAdd(C),y=this.curve._mulC(this.z).redSqr(),x=_.redSub(y).redSub(y),b=this.curve._mulC(A.redISub(_)).redMul(x),m=this.curve._mulC(_).redMul(R.redISub(C)),p=_.redMul(x);return this.curve.point(b,m,p)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(b){var m=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),p=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),_=this.t.redMul(this.curve.dd).redMul(b.t),y=this.z.redMul(b.z.redAdd(b.z)),x=p.redSub(m),A=y.redSub(_),R=y.redAdd(_),C=p.redAdd(m),k=x.redMul(A),D=R.redMul(C),j=x.redMul(C),V=A.redMul(R);return this.curve.point(k,D,V,j)},h.prototype._projAdd=function(b){var m,p,_=this.z.redMul(b.z),y=_.redSqr(),x=this.x.redMul(b.x),A=this.y.redMul(b.y),R=this.curve.d.redMul(x).redMul(A),C=y.redSub(R),k=y.redAdd(R),D=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(x).redISub(A),j=_.redMul(C).redMul(D);return this.curve.twisted?(m=_.redMul(k).redMul(A.redSub(this.curve._mulA(x))),p=C.redMul(k)):(m=_.redMul(k).redMul(A.redSub(x)),p=this.curve._mulC(C).redMul(k)),this.curve.point(j,m,p)},h.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)},h.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)},h.prototype.mulAdd=function(b,m,p){return this.curve._wnafMulAdd(1,[this,m],[b,p],2,!1)},h.prototype.jmulAdd=function(b,m,p){return this.curve._wnafMulAdd(1,[this,m],[b,p],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(b){return this===b||this.getX().cmp(b.getX())===0&&this.getY().cmp(b.getY())===0},h.prototype.eqXToP=function(b){var m=b.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(m)===0)return!0;for(var p=b.clone(),_=this.curve.redN.redMul(this.z);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(m.redIAdd(_),this.x.cmp(m)===0)return!0}},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},9732:(d,f,a)=>{var u=a(5832),g=u.Buffer;function $(S,E){for(var h in S)E[h]=S[h]}function v(S,E,h){return g(S,E,h)}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?d.exports=u:($(u,f),f.Buffer=v),v.prototype=Object.create(g.prototype),$(g,v),v.from=function(S,E,h){if(typeof S=="number")throw new TypeError("Argument must not be a number");return g(S,E,h)},v.alloc=function(S,E,h){if(typeof S!="number")throw new TypeError("Argument must be a number");var b=g(S);return E!==void 0?typeof h=="string"?b.fill(E,h):b.fill(E):b.fill(0),b},v.allocUnsafe=function(S){if(typeof S!="number")throw new TypeError("Argument must be a number");return g(S)},v.allocUnsafeSlow=function(S){if(typeof S!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(S)}},9803:(d,f,a)=>{var u=a(5832).Buffer,g=a(1673),$=a(3241),v=a(8151),S={binary:!0,hex:!0,base64:!0};f.DiffieHellmanGroup=f.createDiffieHellmanGroup=f.getDiffieHellman=function(E){var h=new u($[E].prime,"hex"),b=new u($[E].gen,"hex");return new v(h,b)},f.createDiffieHellman=f.DiffieHellman=function E(h,b,m,p){return u.isBuffer(b)||S[b]===void 0?E(h,"binary",b,m):(b=b||"binary",p=p||"binary",m=m||new u([2]),u.isBuffer(m)||(m=new u(m,p)),typeof h=="number"?new v(g(h,m),m,!0):(u.isBuffer(h)||(h=new u(h,b)),new v(h,m,!0)))}},9809:d=>{function f(y){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},f(y)}var a,u,g=Function.prototype.toString,$=(typeof Reflect>"u"?"undefined":f(Reflect))==="object"&&Reflect!==null&&Reflect.apply;if(typeof $=="function"&&typeof Object.defineProperty=="function")try{a=Object.defineProperty({},"length",{get:function(){throw u}}),u={},$(function(){throw 42},null,a)}catch(y){y!==u&&($=null)}else $=null;var v=/^\s*class\b/,S=function(y){try{var x=g.call(y);return v.test(x)}catch{return!1}},E=function(y){try{return!S(y)&&(g.call(y),!0)}catch{return!1}},h=Object.prototype.toString,b=typeof Symbol=="function"&&!!Symbol.toStringTag,m=!(0 in[,]),p=function(){return!1};if((typeof document>"u"?"undefined":f(document))==="object"){var _=document.all;h.call(_)===h.call(document.all)&&(p=function(y){if((m||!y)&&(y===void 0||f(y)==="object"))try{var x=h.call(y);return(x==="[object HTMLAllCollection]"||x==="[object HTML document.all class]"||x==="[object HTMLCollection]"||x==="[object Object]")&&y("")==null}catch{}return!1})}d.exports=$?function(y){if(p(y))return!0;if(!y||typeof y!="function"&&f(y)!=="object")return!1;try{$(y,null,a)}catch(x){if(x!==u)return!1}return!S(y)&&E(y)}:function(y){if(p(y))return!0;if(!y||typeof y!="function"&&f(y)!=="object")return!1;if(b)return E(y);if(S(y))return!1;var x=h.call(y);return!(x!=="[object Function]"&&x!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(x))&&E(y)}},9834:(d,f,a)=>{function u(R){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(R)}var g=a(3777),$=a(3426),v=a(9122),S=a(3071),E=a(1464),h=a(209),b=S("Object.prototype.toString"),m=a(953)(),p=typeof globalThis>"u"?a.g:globalThis,_=$(),y=S("String.prototype.slice"),x=S("Array.prototype.indexOf",!0)||function(R,C){for(var k=0;k<R.length;k+=1)if(R[k]===C)return k;return-1},A={__proto__:null};g(_,m&&E&&h?function(R){var C=new p[R];if(Symbol.toStringTag in C&&h){var k=h(C),D=E(k,Symbol.toStringTag);if(!D&&k){var j=h(k);D=E(j,Symbol.toStringTag)}A["$"+R]=v(D.get)}}:function(R){var C=new p[R],k=C.slice||C.set;k&&(A["$"+R]=v(k))}),d.exports=function(R){if(!R||u(R)!=="object")return!1;if(!m){var C=y(b(R),8,-1);return x(_,C)>-1?C:C==="Object"&&function(k){var D=!1;return g(A,function(j,V){if(!D)try{j(k),D=y(V,1)}catch{}}),D}(R)}return E?function(k){var D=!1;return g(A,function(j,V){if(!D)try{"$"+j(k)===V&&(D=y(V,1))}catch{}}),D}(R):null}},9838:()=>{},9848:d=>{function f(a){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(a)}d.exports=function(a){a.pre("save",!1,function(u,g){var $=this,v=this;if(this.$isSubdocument)return u();if(g&&f(g)==="object"&&"validateBeforeSave"in g?g.validateBeforeSave:this.$__schema.options.validateBeforeSave){var S=g&&f(g)==="object"&&"validateModifiedOnly"in g?{validateModifiedOnly:g.validateModifiedOnly}:null;this.$validate(S).then(function(){$.$op="save",u()},function(E){v.$__schema.s.hooks.execPost("save:error",v,[v],{error:E},function(h){v.$op="save",u(h)})})}else u()},null,!0)}},9870:d=>{d.exports=Error},9907:(d,f)=>{f.encrypt=function(a,u){return a._cipher.encryptBlock(u)},f.decrypt=function(a,u){return a._cipher.decryptBlock(u)}},9939:d=>{d.exports=RangeError}},l={};function w(d){var f=l[d];if(f!==void 0)return f.exports;var a=l[d]={id:d,loaded:!1,exports:{}};return n[d].call(a.exports,a,a.exports,w),a.loaded=!0,a.exports}return w.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),w.nmd=d=>(d.paths=[],d.children||(d.children=[]),d),w(4829)})())}(browser_umd$1)),browser_umd$1.exports}requireBrowser_umd();const games=[{title:"Sopa de Letras",image:sopaDeLetrasImg,information:"Juego interactivo donde encontrars palabras clave relacionadas con la programacin. Al descubrir cada palabra, recibirn una breve explicacin de su significado.",route:"/sopa-de-letras"},{title:"Memorama",image:memoramaImg,information:"Juego de memoria donde encontrars cartas con trminos de programacin y su significado. Al encontrar la pareja correcta, se mostrar una breve explicacin.",route:"/memorama"},{title:"Safari racing",image:safariracing,information:"Juego de carreras donde compites con la mquina para ser el primero en llegar a la meta. Presiona la tecla rpidamente para hacer que avance tu carro.",route:"/safari-racing"}],cuentos=[{title:"El Zoologico de Nombres",image:ZoologicoNombres,information:"Un cuentito de un zoolgico de nombres",route:"/libro/libro-1"},{title:"El Inventario de la Jungla",image:LibrosImg,information:"Un cuentito de un inventario de la jungla",route:"/libro/libro-2"}],modoLibre=[{title:"Modo libre",image:freeModeIMG,route:"/libre"}],Home=()=>{const i=useNavigate(),[r,n]=reactExports.useState(null),[l,w]=reactExports.useState(!1),[d,f]=reactExports.useState("JUEGOS"),a=h=>{f(h)},u=()=>{switch(d){case"JUEGOS":return games;case"CUENTOS":return cuentos;case"MODO LIBRE":return modoLibre;default:return games}},[g,$]=reactExports.useState(!1),[v,S]=reactExports.useState(!1),E=h=>{if(h==="menu"){if(g)return;$(!0),setTimeout(()=>{r==="menu"?(n(null),w(!1)):(n("menu"),w(!0)),$(!1)},500)}else h==="Notificaciones"?(S(!0),w(!1)):h==="Avatar"?i("/avatar"):h==="Settings"?i("/settings"):(n(h),w(!0))};return jsxRuntimeExports.jsxs("div",{className:"home-container",children:[jsxRuntimeExports.jsx(Navbar,{}),l&&jsxRuntimeExports.jsx("div",{className:"popup-container show",children:jsxRuntimeExports.jsxs("div",{className:"popup-content",children:[jsxRuntimeExports.jsx("h3",{children:"Men"}),jsxRuntimeExports.jsxs("div",{className:"icon-container",children:[jsxRuntimeExports.jsx("img",{src:r==="Avatar"?avatar:avatar$1,alt:"Avatar",onClick:()=>E("Avatar")}),jsxRuntimeExports.jsx("span",{children:"Perfil"})]}),jsxRuntimeExports.jsxs("div",{className:"icon-container",children:[jsxRuntimeExports.jsx("img",{src:r==="Notificaciones"?noti_2:noti_1,alt:"Notificaciones",onClick:()=>E("Notificaciones")}),jsxRuntimeExports.jsx("span",{children:"Notificaciones"})]}),jsxRuntimeExports.jsxs("div",{className:"icon-container",children:[jsxRuntimeExports.jsx("img",{src:r==="Settings"?setting_1:setting,alt:"Settings",onClick:()=>E("Settings")}),jsxRuntimeExports.jsx("span",{children:"Configuracin"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"contenido-principal",children:[jsxRuntimeExports.jsx("h1",{className:"activities-title",children:"ACTIVIDADES"}),jsxRuntimeExports.jsxs("div",{className:"tab-container",children:[jsxRuntimeExports.jsx("button",{className:`tab ${d==="JUEGOS"?"active":""}`,onClick:()=>a("JUEGOS"),children:"JUEGOS"}),jsxRuntimeExports.jsx("button",{className:`tab ${d==="CUENTOS"?"active":""}`,onClick:()=>a("CUENTOS"),children:"CUENTOS"}),jsxRuntimeExports.jsx("button",{className:`tab ${d==="MODO LIBRE"?"active":""}`,onClick:()=>a("MODO LIBRE"),children:"MODO LIBRE"})]}),jsxRuntimeExports.jsxs("div",{className:"games-container",children:[u().map((h,b)=>jsxRuntimeExports.jsxs("div",{className:"games-card",onClick:()=>i(h.route),children:[jsxRuntimeExports.jsx("img",{src:h.image,className:"games-img"}),jsxRuntimeExports.jsx("div",{className:"games-title",children:h.title})]},b)),jsxRuntimeExports.jsx(CodeZooCat,{})]})]})]})},aboutImage="/CodeZoo/assets/icono-pantalla-principal-yBg1svma.png",Info=()=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("div",{className:"main-content",children:jsxRuntimeExports.jsxs("div",{className:"about-containter",children:[jsxRuntimeExports.jsx("img",{src:aboutImage,alt:"",class:"imagen-info"}),jsxRuntimeExports.jsxs("div",{className:"info-box",children:[jsxRuntimeExports.jsx("h1",{className:"title",children:"ACERCA DE CODEZOO"}),jsxRuntimeExports.jsx("p",{className:"text",children:"CodeZoo es una plataforma educativa creada para que nios y jvenes aprendan a programar de una manera divertida y sencilla. Aqu podrs encontrar juegos interactivos, cuentos educativos y retos que te ayudarn a desarrollar habilidades de lgica, creatividad y resolucin de problemas. Nuestro objetivo es que aprendas mientras juegas y descubras el mundo de la programacin de forma amigable y accesible."})]})]})})]}),mounts=[{key:"title",getter:i=>i.getTitle()},{key:"html",getter:i=>i.getHtmlContainer()},{key:"confirmButtonText",getter:i=>i.getConfirmButton()},{key:"denyButtonText",getter:i=>i.getDenyButton()},{key:"cancelButtonText",getter:i=>i.getCancelButton()},{key:"footer",getter:i=>i.getFooter()},{key:"closeButtonHtml",getter:i=>i.getCloseButton()},{key:"iconHtml",getter:i=>i.getIconContent()},{key:"loaderHtml",getter:i=>i.getLoader()}],noop$1=()=>{};function withReactContent(i){function r(w){const d={},f={},a=mounts.map(u=>u.key);return Object.entries(w).forEach(u=>{let[g,$]=u;a.includes(g)&&React.isValidElement($)?(d[g]=$,f[g]=" "):f[g]=$}),[d,f]}function n(w,d){Object.entries(d).forEach(f=>{let[a,u]=f;const $=mounts.find(S=>S.key===a).getter(i),v=clientExports.createRoot($);v.render(u),w.__roots.push(v)})}function l(w){w.__roots.forEach(d=>{d.unmount()}),w.__roots=[]}return class extends i{static argsToParams(w){if(React.isValidElement(w[0])||React.isValidElement(w[1])){const d={};return["title","html","icon"].forEach((f,a)=>{w[a]!==void 0&&(d[f]=w[a])}),d}else return i.argsToParams(w)}_main(w,d){this.__roots=[],this.__params=Object.assign({},d,w);const[f,a]=r(this.__params),u=a.willOpen||noop$1,g=a.didOpen||noop$1,$=a.didDestroy||noop$1;return super._main(Object.assign({},a,{willOpen:v=>{n(this,f),u(v)},didOpen:v=>{setTimeout(()=>{g(v)})},didDestroy:v=>{$(v),l(this)}}))}update(w){Object.assign(this.__params,w),l(this);const[d,f]=r(this.__params);super.update(f),n(this,d)}}}const welcomeImg$2="/CodeZoo/assets/leon_searching-Caik9bY_.png",endImg$1="/CodeZoo/assets/leon_like-B_gYDdu9.png",mostrarInsignia=async i=>{const r=localStorage.getItem("username");if(!r){console.warn(" No hay username en localStorage");return}console.log(" MOSTRANDO INSIGNIA PARA:",r),console.log(" Datos:",i);const n=JSON.parse(localStorage.getItem("insignias"))||[];n.some(l=>l.nombre===i.nombre)?console.log(" Ya se tena esta insignia en localStorage"):(localStorage.setItem("insignias",JSON.stringify([...n,i])),console.log(" Insignia guardada en localStorage"));try{const w=await(await fetch(`http://localhost:3000/api/insignias/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json();console.log(" Respuesta del backend:",w)}catch(l){console.error(" Error al guardar en MongoDB:",l)}await Swal.fire({title:`Ganaste una insignia: ${i.nombre}!`,text:i.descripcion,imageUrl:i.imagenUrl,imageWidth:100,imageHeight:100,icon:"success",confirmButtonText:"Ir al perfil",showCancelButton:!0,cancelButtonText:"Cerrar"}).then(l=>{l.isConfirmed&&(window.location.href="/perfil")})},MySwal$2=withReactContent(Swal);function generarSopaDeLetras(i,r){let n=new Array(i).fill(null).map(()=>new Array(i).fill(" ")),l=new Map,w=[[1,0],[0,1],[1,1],[-1,1],[-1,0],[0,-1],[-1,-1],[1,-1]];function d(f){f=f.toUpperCase();let a=0;for(;a<100;){let[u,g]=w[Math.floor(Math.random()*w.length)],$=Math.floor(Math.random()*i),v=Math.floor(Math.random()*i);if($+u*(f.length-1)>=0&&$+u*(f.length-1)<i&&v+g*(f.length-1)>=0&&v+g*(f.length-1)<i){let S=!0,E=[];for(let h=0;h<f.length;h++){let b=$+h*u,m=v+h*g;if(n[b][m]!==" "&&n[b][m]!==f[h]){S=!1;break}E.push({fila:b,columna:m})}if(S){E.forEach(({fila:h,columna:b},m)=>{n[h][b]=f[m]}),l.set(f,E);return}}a++}}r.forEach(d);for(let f=0;f<i;f++)for(let a=0;a<i;a++)n[f][a]===" "&&(n[f][a]=String.fromCharCode(65+Math.floor(Math.random()*26)));return{sopa:n,posicionesPalabras:l}}const niveles={facil:{palabras:["JAVA","CODIGO","BLOQUE","INT","CHAR"],tamano:8},medio:{palabras:["JAVA","CODIGO","BLOQUE","SENTENCIA","CONDICION","VARIABLE"],tamano:10},dificil:{palabras:["INT","FLOAT","DOUBLE","BOOLEAN","CHAR","STRING","SENTENCIA","CONDICION"],tamano:12}},SopaDeLetras=()=>{const[i,r]=reactExports.useState("medio"),[n,l]=reactExports.useState(!0),[w,d]=reactExports.useState(!1),[f,a]=reactExports.useState(!1),[u,g]=reactExports.useState([]),[$,v]=reactExports.useState([]),[S,E]=reactExports.useState(new Set),[h,b]=reactExports.useState([]),[m,p]=reactExports.useState(new Map),[_,y]=reactExports.useState(""),[x,A]=reactExports.useState(!1),R={JAVA:"Java es un lenguaje de programacin multiplataforma y una plataforma de software.",CODIGO:"Cdigo es un conjunto de instrucciones escritas en un lenguaje de programacin.",BLOQUE:"Un bloque es una agrupacin de declaraciones e instrucciones en programacin.",SENTENCIA:"Una sentencia es una lnea de cdigo que ordena una tarea.",CONDICION:"Una condicin es una instruccin que se evala como verdadera o falsa.",VARIABLE:"Una variable es un espacio en la memoria para almacenar datos.",INT:"INT es un tipo de dato para nmeros enteros.",FLOAT:"Float representa un nmero en coma flotante de 32 bits.",DOUBLE:"Double permite almacenar nmeros decimales con mayor precisin.",BOOLEAN:"Boolean solo puede tener dos valores: true o false.",CHAR:"Char se usa para almacenar caracteres individuales.",STRING:"String permite almacenar palabras, frases o nombres."},C=async()=>{const j=localStorage.getItem("id");try{let ee=((await(await axios.get(`http://localhost:3000/api/usuarios/${j}`)).data).progreso||{actividadesCompletadas:0,porcentaje:0}).actividadesCompletadas;const ne=7,Q=ee+1,se=Math.min(100,Math.round(Q/ne*100));(await axios.post(`http://localhost:3000/api/usuarios/${j}/progreso`,{actividadesCompletadas:Q,porcentaje:se})).status===200?console.log("Progreso actualizado con exito"):console.error("Error al actualizar el progreso")}catch(V){console.error("Error al actualizar el progreso:",V)}},k=()=>{const j=niveles[i],{sopa:V,posicionesPalabras:z}=generarSopaDeLetras(j.tamano,j.palabras);g(V),p(z),E(new Set),v([]),b([])};reactExports.useEffect(()=>{k()},[i]);const D=(j,V)=>{const z=$.findIndex(ee=>ee.fila===j&&ee.columna===V);let W=z!==-1?$.filter((ee,ne)=>ne!==z):[...$,{fila:j,columna:V}];if(v(W),W.length>1){W.sort((Q,se)=>Q.fila-se.fila||Q.columna-se.columna);let ee=W.map(({fila:Q,columna:se})=>u[Q][se]).join(""),ne=ee.split("").reverse().join("");m.has(ee)?(E(new Set([...S,ee])),b(Q=>[...Q,...m.get(ee)]),v([]),y(`Buen trabajo! Has encontrado ${ee}. ${R[ee]}`),A(!0)):m.has(ne)&&(E(new Set([...S,ne])),b(Q=>[...Q,...m.get(ne)]),v([]),y(`Buen trabajo! Has encontrado ${ne}. ${R[ne]}`),A(!0)),x&&setTimeout(()=>A(!1),1e4)}};return reactExports.useEffect(()=>{n&&MySwal$2.fire({title:jsxRuntimeExports.jsx("strong",{children:"Bienvenido a la Sopa de Letras!"}),html:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:welcomeImg$2,alt:"",width:"150",height:"150"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px"},children:"Selecciona el nivel de dificultad para comenzar."}),jsxRuntimeExports.jsxs("select",{onChange:j=>r(j.target.value),defaultValue:i,children:[jsxRuntimeExports.jsx("option",{value:"facil",children:"Fcil"}),jsxRuntimeExports.jsx("option",{value:"medio",children:"Medio"}),jsxRuntimeExports.jsx("option",{value:"dificil",children:"Difcil"})]})]}),confirmButtonText:"Comenzar!",backdrop:!0,allowOutsideClick:!1}).then(()=>l(!1))},[n]),reactExports.useEffect(()=>{(async()=>{if(S.size===niveles[i].palabras.length&&!f){const V=localStorage.getItem("username"),z=localStorage.getItem("swalsMostrados"),W=z?JSON.parse(z):{},ee={...W,[V]:{...W[V]||{}}},ne=async(Q,se,be,H)=>{var P;(P=W==null?void 0:W[V])!=null&&P[Q]||(await mostrarInsignia({nombre:se,descripcion:be,fecha:new Date().toLocaleDateString(),imagenUrl:H}),ee[V][Q]=!0)};i==="facil"?await ne("primerosPasos","Primeros pasos","Completaste la sopa de letras en nivel fcil","/insignias/primeros pasos.png"):i==="medio"?await ne("cazadorLetras","Cazador de letras","Completaste la sopa de letras en nivel medio","/insignias/cazador de letras.png"):i==="dificil"&&await ne("maestroSopa","Maestro de la Sopa de Letras","Completaste la sopa de letras en nivel difcil","/insignias/maestro de la sopa de letras.png"),localStorage.setItem("swalsMostrados",JSON.stringify(ee)),a(!0),d(!0),C()}})()},[S,i,f]),reactExports.useEffect(()=>{w&&MySwal$2.fire({title:jsxRuntimeExports.jsx("strong",{children:"SOPA COMPLETADA!"}),html:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:endImg$1,alt:"",width:"150",height:"150"}),jsxRuntimeExports.jsx("p",{children:"Quieres jugar otra vez?"})]}),confirmButtonText:"Reiniciar",showCancelButton:!0,cancelButtonText:"Salir"}).then(j=>{d(!1),j.isConfirmed?k():window.location.href="/home"})},[w]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"sopa-container",children:[jsxRuntimeExports.jsx("h1",{className:"sopa-header",children:"SOPA DE LETRAS"}),jsxRuntimeExports.jsx(CodeZooCat,{contexto:"sopa-de-letras",customMessage:_,isOpen:x}),jsxRuntimeExports.jsxs("div",{className:"sopa-layout",children:[jsxRuntimeExports.jsxs("div",{className:"sopa-column",children:[jsxRuntimeExports.jsx("h3",{children:"Palabras a buscar:"}),jsxRuntimeExports.jsx("ul",{className:"palabras-list",children:niveles[i].palabras.map((j,V)=>jsxRuntimeExports.jsx("li",{className:S.has(j)?"encontrada":"",children:j},V))})]}),jsxRuntimeExports.jsx("div",{className:"sopa-grid",children:jsxRuntimeExports.jsx("div",{className:"sopa-table",children:u.map((j,V)=>jsxRuntimeExports.jsx("div",{className:"sopa-row",children:j.map((z,W)=>{const ee=$.some(Q=>Q.fila===V&&Q.columna===W),ne=h.some(Q=>Q.fila===V&&Q.columna===W);return jsxRuntimeExports.jsx("div",{onClick:()=>D(V,W),className:`sopa-cell ${ne?"encontrado":ee?"seleccionado":""}`,children:z},`${V}-${W}`)})},V))})}),jsxRuntimeExports.jsxs("div",{className:"sopa-column",children:[jsxRuntimeExports.jsx("h3",{children:"Palabras encontradas:"}),jsxRuntimeExports.jsx("ul",{className:"palabras-list li",children:[...S].map((j,V)=>jsxRuntimeExports.jsx("li",{children:j},V))})]})]})]})]})},StartEffect=({trigger:i})=>{const[r,n]=reactExports.useState([]);return reactExports.useEffect(()=>{if(i){const l=Array.from({length:40}).map((w,d)=>({id:d,left:`${Math.random()*100}vw`,top:`${Math.random()*100}vh`,size:`${Math.random()*15+5}px`,color:["gold","yellow","silver","lightblue","pink"][Math.floor(Math.random()*5)],animationDuration:`${Math.random()*1.5+.5}s`}));n(l),setTimeout(()=>{n([])},2e3)}},[i]),jsxRuntimeExports.jsx("div",{className:"stars-container",children:r.map(l=>jsxRuntimeExports.jsx("div",{className:"star",style:{left:l.left,top:l.top,width:l.size,height:l.size,backgroundColor:l.color,animationDuration:l.animationDuration}},l.id))})},welcomeImg$1="/CodeZoo/assets/cocodrilo_img-BhMwPcZh.png",endImg="/CodeZoo/assets/cocodrilo2_img-Dg1ghn_1.png",imagenes=[{id:"mono",src:"src/resources/Mem/A.jpg",info:"El mono es gil e inteligente, igual que 'if', que toma decisiones dependiendo de una condicin. "},{id:"leon",src:"src/resources/Mem/B.jpg",info:"El len es el rey de la selva, as como 'else' gobierna cuando la condicin de 'if' no se cumple. "},{id:"oso",src:"src/resources/Mem/C.jpg",info:"Los osos hibernan todo el invierno, igual que 'do' ejecuta su cdigo al menos una vez antes de verificar la condicin. "},{id:"cocodrilo",src:"src/resources/Mem/D.jpg",info:"El cocodrilo espera pacientemente bajo el agua, como 'while', que repite su cdigo hasta que la condicin cambia. "},{id:"jirafa",src:"src/resources/Mem/E.jpg",info:"Las jirafas son altas y metdicas, como 'for', que repite un bloque de cdigo un nmero definido de veces. "},{id:"cerdo",src:"src/resources/Mem/F.jpg",info:"Los cerdos son curiosos y exploran opciones, igual que 'switch', que elige entre mltiples caminos. "},{id:"vaca",src:"src/resources/Mem/G.jpg",info:"Las vacas saben cundo detenerse a descansar, igual que 'break', que interrumpe un bucle o estructura de control. "},{id:"elefante",src:"src/resources/Mem/H.jpg",info:"Los elefantes nunca olvidan su camino, igual que 'return' nos lleva de vuelta un resultado en una funcin. "}],MySwal$1=withReactContent(Swal),generarCartas=()=>[...imagenes,...imagenes].sort(()=>Math.random()-.5).map((r,n)=>({...r,idUnico:n,volteada:!1,encontrada:!1})),Memorama=()=>{const[i,r]=reactExports.useState(!0),[n,l]=reactExports.useState(!1),[w,d]=reactExports.useState(generarCartas()),[f,a]=reactExports.useState([]),[u,g]=reactExports.useState(!1),[$,v]=reactExports.useState(!1),[S,E]=reactExports.useState(""),[h,b]=reactExports.useState(!1),[m,p]=reactExports.useState(!1),[_,y]=reactExports.useState(null),[x,A]=reactExports.useState(!1),R=async()=>{const k=localStorage.getItem("id");try{let z=((await(await axios$1.get(`http://localhost:3000/api/usuarios/${k}`)).data).progreso||{actividadesCompletadas:0,porcentaje:0}).actividadesCompletadas;const W=7,ee=z+1,ne=Math.min(100,Math.round(ee/W*100));(await axios$1.post(`http://localhost:3000/api/usuarios/${k}/progreso`,{actividadesCompletadas:ee,porcentaje:ne})).status===200?console.log("Progreso actualizado con exito"):console.error("Error al actualizar el progreso")}catch(D){console.error("Error al actualizar el progreso:",D)}},C=k=>{if(u||f.some(j=>j.idUnico===k))return;const D=w.map(j=>j.idUnico===k?{...j,volteada:!0}:j);d(D),a([...f,D.find(j=>j.idUnico===k)])};return reactExports.useEffect(()=>{if(f.length===2){g(!0);const[k,D]=f;k.id===D.id?(d(j=>j.map(V=>V.id===k.id?{...V,encontrada:!0}:V)),E(`Buen trabajo! Has encontrado un par de ${k.id}. ${k.info}`),b(!0),p(!0),setTimeout(()=>{b(!1)},1e4),setTimeout(()=>p(!1),2e3)):(E("Oops, intenta de nuevo. "),b(!0),setTimeout(()=>{d(j=>j.map(V=>V.encontrada?V:{...V,volteada:!1})),b(!1)},2e3)),setTimeout(()=>{a([]),g(!1)},2e3)}},[f]),reactExports.useEffect(()=>{var k,D,j;if(w.every(V=>V.encontrada)){if(v(!0),E("Felicidades! Has encontrado todos los pares. "),b(!0),!x){const V=localStorage.getItem("username"),z=localStorage.getItem("swalsMostrados"),W=z?JSON.parse(z):{},ee={...W,[V]:{...W[V]||{}}},ne=(Date.now()-_)/1e3,Q=[];(k=W==null?void 0:W[V])!=null&&k.exploradorMemoria||Q.push(async()=>{await mostrarInsignia({nombre:"Explorador de Memoria",descripcion:"Jugaste Memorama por primera vez",fecha:new Date().toLocaleDateString(),imagenUrl:"/insignias/Explorador de memoria.png"}),ee[V].exploradorMemoria=!0}),ne<=150&&!((D=W==null?void 0:W[V])!=null&&D.maestroMemo)&&Q.push(async()=>{await mostrarInsignia({nombre:"Maestro del Memo",descripcion:"Completaste el memorama en menos de 2:30 minutos",fecha:new Date().toLocaleDateString(),imagenUrl:"/insignias/maestro del memo.png"}),ee[V].maestroMemo=!0}),ne<=300&&!((j=W==null?void 0:W[V])!=null&&j.perseverante)&&Q.push(async()=>{await mostrarInsignia({nombre:"Perseverante",descripcion:"Completaste el memorama en menos de 5 minutos",fecha:new Date().toLocaleDateString(),imagenUrl:"/insignias/Perseverante.png"}),ee[V].perseverante=!0}),(async()=>{for(let be of Q)await be();localStorage.setItem("swalsMostrados",JSON.stringify(ee)),A(!0),l(!0)})()}R()}},[w]),i&&MySwal$1.fire({title:jsxRuntimeExports.jsx("strong",{children:"Bienvenido al juego de Memorama!"}),html:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:welcomeImg$1,alt:"",width:"150",height:"150"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",fontWeight:"500"},children:"En este juego, debes encontrar pares de cartas que tengan la misma imagen."}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",fontWeight:"500"},children:"Estas listo para poner tu mente a prueba?"})]}),showConfirmButton:!0,confirmButtonText:"JUGAR AHORA",customClass:{confirmButton:"play-button"},backdrop:!0,allowOutsideClick:!1}).then(()=>{r(!1),y(Date.now())}),reactExports.useEffect(()=>{n&&MySwal$1.fire({title:jsxRuntimeExports.jsx("strong",{children:"FELICIDADES, HAS TERMINADO EL JUEGO!"}),html:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:endImg,alt:"",width:"150",height:"150"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"10px",marginTop:"10px"},children:"Has encontrado todos los pares de cartas correctamente!"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",fontWeight:"500"},children:"Quieres volver a intentarlo?"})]}),showConfirmButton:!0,confirmButtonText:"JUGAR DE NUEVO",showCancelButton:!0,cancelButtonText:"SALIR",customClass:{confirmButton:"play-button",cancelButton:"cancel-button"},backdrop:!0,allowOutsideClick:!1}).then(k=>{l(!1),k.isConfirmed?(d(generarCartas()),a([]),v(!1)):k.isDismissed&&(window.location.href="/home")})},[n]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"memorama-body",style:{textAlign:"center"},children:[jsxRuntimeExports.jsx("h1",{className:"memorama-header",children:"MEMORAMA"}),jsxRuntimeExports.jsx(CodeZooCat,{contexto:"memorama",customMessage:S,isOpen:h}),jsxRuntimeExports.jsx("div",{className:"memorama-grid",children:w.map(k=>jsxRuntimeExports.jsx("div",{onClick:()=>!k.volteada&&C(k.idUnico),className:`memorama-card ${k.volteada||k.encontrada?"flipped":""}`,children:jsxRuntimeExports.jsxs("div",{className:"card-inner",children:[jsxRuntimeExports.jsx("div",{className:"card-front"}),jsxRuntimeExports.jsx("div",{className:"card-back",children:jsxRuntimeExports.jsx("img",{src:k.src,alt:"Carta"})})]})},k.idUnico))}),jsxRuntimeExports.jsx(StartEffect,{trigger:m})]})]})},jeepIMG="/CodeZoo/assets/jeep-Bqxs_gQa.png",welcomeImg="/CodeZoo/assets/safariIcon-D455uy2F.png",MySwal=withReactContent(Swal);function CarreraDeAutos(){const[i,r]=reactExports.useState(0),[n,l]=reactExports.useState(0),[w,d]=reactExports.useState(null),[f,a]=reactExports.useState(!1),[u,g]=reactExports.useState(!1),[$,v]=reactExports.useState(3),S=typeof window<"u"?window.innerWidth*.75:500,[E,h]=reactExports.useState(!1),[b,m]=reactExports.useState({actividadesCompletadas:0,porcentaje:0}),[p,_]=reactExports.useState(!1),[y,x]=reactExports.useState(0),[A,R]=reactExports.useState(!1),C=[{pregunta:"Completa: 2 + 2 = ?",respuesta:"4"},{pregunta:"Palabra clave para crear funciones",respuesta:"function"},{pregunta:"Palabra clave para crear condicionales",respuesta:"if"},{pregunta:"Resultado de 5 * 4?",respuesta:"20"},{pregunta:"Cmo se llama el operador de suma?",respuesta:"+"},{pregunta:"Palabra clave para crear bucles",respuesta:"for"},{pregunta:"Que tipo de dato representa un texto?",respuesta:"string"},{pregunta:"Que palabra retorna un valor de una funcin?",respuesta:"return"},{pregunta:"Que significa JS?",respuesta:"javascript"},{pregunta:"Evento que ocurre al hacer clic",respuesta:"click"}],k=async()=>{const z=localStorage.getItem("id");try{let Q=((await(await axios.get(`http://localhost:3000/api/usuarios/${z}`)).data).progreso||{actividadesCompletadas:0,porcentaje:0}).actividadesCompletadas;const se=7,be=Q+1,H=Math.min(100,Math.round(be/se*100));(await axios.post(`http://localhost:3000/api/usuarios/${z}/progreso`,{actividadesCompletadas:be,porcentaje:H})).status===200?console.log("Progreso actualizado con exito"):console.error("Error al actualizar el progreso")}catch(W){console.error("Error al actualizar el progreso:",W)}};reactExports.useEffect(()=>{MySwal.fire({title:"Bienvenido a Safari Racing!",html:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:welcomeImg,alt:"",width:"150",height:"150"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",fontWeight:"500"},children:"Preprate para una emocionante y desafiante carrera!"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",fontWeight:"500"},children:"Estas listo?"})]}),showConfirmButton:!0,confirmButtonText:"JUGAR AHORA",customClass:{confirmButton:"play-button"},backdrop:!0,allowOutsideClick:!1}).then(z=>{z.isConfirmed&&h(!0)})},[]),reactExports.useEffect(()=>{if(!E||p)return;const z=W=>{w||(W.key.toLowerCase()==="a"&&D(),W.key.toLowerCase()==="s"&&$>0&&(g(!0),setTimeout(()=>g(!1),500),v(ee=>ee-1),r(ee=>Math.min(ee+50,S))))};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[w,$,E,p]),reactExports.useEffect(()=>{if(!E||w||p)return;const z=setInterval(()=>{l(W=>{const ee=Math.random()*15+5;return W+ee>=S?(d("Computadora"),clearInterval(z),S):W+ee})},Math.random()*400+400);return()=>clearInterval(z)},[E,w,p]);async function D(){_(!0);const z=C[Math.floor(Math.random()*C.length)],{value:W}=await MySwal.fire({title:"Resuelve la siguiente pregunta",text:z.pregunta,input:"text",inputPlaceholder:"Escribe tu respuesta aqui",showCancelButton:!0,confirmButtonText:"Enviar",cancelButtonText:"Cancelar",allowOutsideClick:!1});_(!1),W!==void 0&&(W.trim()===z.respuesta?(r(ee=>{const ne=Math.random()*60+30,Q=ee+ne;return Q>=S?(d("Jugador 1"),S):Q}),MySwal.fire("Correcto! ","Avanzaste ","success")):(x(ee=>ee+1),MySwal.fire("Incorrecto! ","No avanzaste, intenta presionando A","error")))}reactExports.useEffect(()=>{if(!w||A)return;const z=localStorage.getItem("username");if(!z)return;const W=localStorage.getItem("swalsMostrados"),ee=W?JSON.parse(W):{},ne={...ee,[z]:{...ee[z]||{}}};(async()=>{R(!0),ne[z].pilotoSafari||(await mostrarInsignia({nombre:"Piloto del Safari",descripcion:"Completaste la carrera en Safari Racing",fecha:new Date().toLocaleDateString(),imagenUrl:"/insignias/Piloto del Safari.png"}),ne[z].pilotoSafari=!0),w!=null&&w.startsWith("Jugador")&&y===0&&!ne[z].sinErrores&&(await mostrarInsignia({nombre:"Sin errores",descripcion:"Completaste una actividad sin cometer errores",fecha:new Date().toLocaleDateString(),imagenUrl:"/insignias/sin errores.png"}),ne[z].sinErrores=!0),localStorage.setItem("swalsMostrados",JSON.stringify(ne)),j()})()},[w]);function j(){MySwal.fire({title:`${w} GANA!`,html:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:welcomeImg,alt:"",width:"150",height:"150"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",fontWeight:"500"},children:"Quieres volver a intentarlo?"})]}),showConfirmButton:!0,confirmButtonText:"JUGAR DE NUEVO",showCancelButton:!0,cancelButtonText:"SALIR",backdrop:!0,allowOutsideClick:!1}).then(z=>{z.isConfirmed?V():window.location.href="/home"})}reactExports.useEffect(()=>{w==="Jugador"&&k()},[w]);function V(){r(0),l(0),d(null),v(3)}return jsxRuntimeExports.jsx("div",{className:"carrera-container",children:jsxRuntimeExports.jsxs("div",{className:"carrera-content",children:[jsxRuntimeExports.jsxs("div",{className:"carrera-instrucciones",children:[jsxRuntimeExports.jsx("h2",{children:"Instrucciones"}),jsxRuntimeExports.jsx("p",{children:'Presiona "A" para lanzar un reto. Si aciertas, avanzas. Si fallas, no avanzas.'}),jsxRuntimeExports.jsxs("p",{children:['Presiona "S" para usar el boost. Tienes ',$," restantes."]})]}),jsxRuntimeExports.jsx("div",{className:"carrera-pista",children:jsxRuntimeExports.jsx("img",{src:jeepIMG,className:`carrera-auto ${f?"turbo-effect":u?"boost-effect":""}`,id:"jeep1",style:{left:i}})}),jsxRuntimeExports.jsx("div",{className:"carrera-pista",children:jsxRuntimeExports.jsx("img",{src:jeepIMG,className:"carrera-auto",id:"jeep2",style:{left:n}})})]})})}function Settings(){return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h1",{children:"Settings"})})}const defaultAvatar="/CodeZoo/assets/default-avatar-PN9CYkr1.png",Avatar=()=>jsxRuntimeExports.jsxs("div",{className:"avatar-container",children:[jsxRuntimeExports.jsx("aside",{className:"sidebar",children:jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{className:"active",children:" Inicio"}),jsxRuntimeExports.jsx("li",{children:" Informacin personal"}),jsxRuntimeExports.jsx("li",{children:" Seguridad"}),jsxRuntimeExports.jsx("li",{children:" Configuracin"}),jsxRuntimeExports.jsx("li",{children:" Suscripciones"})]})}),jsxRuntimeExports.jsxs("main",{className:"content",children:[jsxRuntimeExports.jsxs("div",{className:"profile-header",children:[jsxRuntimeExports.jsx("img",{src:defaultAvatar,alt:"Foto de perfil",className:"profile-pic"}),jsxRuntimeExports.jsx("h1",{children:"Bienvenido, Usuario"}),jsxRuntimeExports.jsx("p",{children:"Administra tu informacin, privacidad y seguridad."})]}),jsxRuntimeExports.jsxs("div",{className:"info-cards",children:[jsxRuntimeExports.jsxs("div",{className:"card-avatar",children:[jsxRuntimeExports.jsx("h2",{children:"Privacidad y seguridad"}),jsxRuntimeExports.jsx("p",{children:"Configura tu cuenta y personaliza tu experiencia."}),jsxRuntimeExports.jsx("button",{children:"Administrar privacidad"})]}),jsxRuntimeExports.jsxs("div",{className:"card-avatar",children:[jsxRuntimeExports.jsx("h2",{children:"Proteccin de cuenta"}),jsxRuntimeExports.jsx("p",{children:"Verifica la seguridad de tu cuenta."}),jsxRuntimeExports.jsx("button",{children:"Ver detalles"})]})]})]})]}),libros={"libro-1":{titulo:"El Zoolgico de Nombres",paginas:["/resource/Libros/Libro_1/1.jpg","/resource/Libros/Libro_1/2.jpg","/resource/Libros/Libro_1/3.jpg","/resource/Libros/Libro_1/4.jpg","/resource/Libros/Libro_1/5.jpg","/resource/Libros/Libro_1/6.jpg","/resource/Libros/Libro_1/7.jpg"]},"libro-2":{titulo:"El Inventario de la Jungla",paginas:["/resource/Libros/Libro_2/1.jpg","/resource/Libros/Libro_2/2.jpg","/resource/Libros/Libro_2/3.jpg","/resource/Libros/Libro_2/4.jpg","/resource/Libros/Libro_2/5.jpg","/resource/Libros/Libro_2/6.jpg","/resource/Libros/Libro_2/7.jpg","/resource/Libros/Libro_2/8.jpg"]}},Libro=()=>{const{libroId:i}=useParams(),r=libros[i];if(!r)return jsxRuntimeExports.jsx("div",{children:" Libro no encontrado"});const n=r.paginas.length,[l,w]=reactExports.useState(0),d=()=>Array.from({length:n},(S,E)=>({id:E,flipping:!1,flippingBack:!1})),[f,a]=reactExports.useState(d()),u=async()=>{if(l<n-1){const S=[...f];S[l+1].flipping=!0,a(S),setTimeout(async()=>{const E=[...S];if(E[l+1].flipping=!1,a(E),w(l+1),l+1===n-1){const h=localStorage.getItem("username");if(!h)return;const b=localStorage.getItem("swalsMostrados"),m=b?JSON.parse(b):{},p={...m,[h]:{...m[h]||{}}},_=localStorage.getItem("librosLeidos"),y=_?JSON.parse(_):{};y[i]=!0,localStorage.setItem("librosLeidos",JSON.stringify(y));const x=Object.keys(y).length,A=[];p[h].exploradorIdeas||(A.push(mostrarInsignia({nombre:"Explorador de Ideas",descripcion:"Completaste tu primera lectura en CodeZoo",fecha:new Date().toLocaleDateString(),imagenUrl:"/insignias/explorador de ideas.png"})),p[h].exploradorIdeas=!0),x>=2&&!p[h].lectorEstrella&&(A.push(mostrarInsignia({nombre:"Lector estrella",descripcion:"Completaste al menos dos libros en CodeZoo",fecha:new Date().toLocaleDateString(),imagenUrl:"/insignias/Lector estrella.png"})),p[h].lectorEstrella=!0),await Promise.all(A),localStorage.setItem("swalsMostrados",JSON.stringify(p))}},800)}},g=()=>{if(l>0){const S=[...f];S[l].flippingBack=!0,a(S),setTimeout(()=>{const E=[...S];E[l].flippingBack=!1,a(E),w(l-1)},800)}},$=S=>{if(!(S===l||S<0||S>=n))if(S>l)for(let E=l+1;E<=S;E++)setTimeout(()=>{a(h=>{const b=[...h];return b[E].flipping=!0,b}),setTimeout(()=>{a(h=>{const b=[...h];return b[E].flipping=!1,b}),E===S&&w(S)},800)},(E-l-1)*400);else for(let E=l;E>S;E--)setTimeout(()=>{a(h=>{const b=[...h];return b[E].flippingBack=!0,b}),setTimeout(()=>{a(h=>{const b=[...h];return b[E].flippingBack=!1,b}),E===S+1&&w(S)},800)},(l-E)*400)},v=(S,E)=>{const h=E<=l;let b="page";return S.flipping&&(b+=" flipping"),S.flippingBack&&(b+=" flipping-back"),jsxRuntimeExports.jsx("div",{className:b,style:{zIndex:n-E,transform:h?"rotateY(-180deg)":"rotateY(0deg)"},children:jsxRuntimeExports.jsxs("div",{className:"page-content",children:[jsxRuntimeExports.jsx("img",{src:r.paginas[E],alt:`Pgina ${E+1}`,className:"page-image"}),E!==0&&jsxRuntimeExports.jsxs("div",{className:"page-number",children:["Pgina ",E]})]})},S.id)};return jsxRuntimeExports.jsxs("div",{className:"libro-container",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"book-content",children:[jsxRuntimeExports.jsxs("div",{className:"book-sidebar",children:[jsxRuntimeExports.jsx("h3",{children:r.titulo}),jsxRuntimeExports.jsxs("div",{className:"available-books",children:[jsxRuntimeExports.jsx("h4",{children:"Libros Disponibles"}),Object.keys(libros).map(S=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:`/libro/${S}`,className:"book-link",children:libros[S].titulo})},S))]})]}),jsxRuntimeExports.jsxs("div",{className:"book-area",children:[jsxRuntimeExports.jsx("div",{className:"book-container",children:jsxRuntimeExports.jsx("div",{className:"book",children:f.map((S,E)=>v(S,E))})}),jsxRuntimeExports.jsx("div",{className:"page-indicators",children:f.map((S,E)=>jsxRuntimeExports.jsx("div",{className:`indicator ${E===l?"active":""}`,onClick:()=>$(E)},E))}),jsxRuntimeExports.jsxs("div",{className:"book-navigation",children:[jsxRuntimeExports.jsx("button",{className:"nav-button",onClick:g,disabled:l===0,children:""}),jsxRuntimeExports.jsx("button",{className:"nav-button",onClick:u,disabled:l===n-1,children:""})]})]}),jsxRuntimeExports.jsx("div",{className:"ad-sidebar",children:jsxRuntimeExports.jsx("h3",{children:"Publicidad"})})]})]})};var blockly$1={exports:{}},blockly_compressed$1={exports:{}},blockly_compressed=blockly_compressed$1.exports,hasRequiredBlockly_compressed;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,function(i,r){(function(n,l){i.exports=l()})(blockly_compressed,function(){var n={},l,w,d,f,a,u,g,$,v,S,E,h,b,m,p,_,y,x,A,R,C,k,D,j,V,z,W,ee,ne,Q,se,be,H,P,L,F,M,U,Z,K,oe,ie,$e,ce,le,ye,_e,q,re,fe,we,Re,ke,ue,Ee,Ae,Ne,De,he,tt,at,He,ot,Ue,Ze,ae,Oe,Le,Pe,ft,Lt,qt,gn,dn,un,ge,ve,Fe,qe,st,Dt,Wt,pn,bn,sr,Pn,Bn,ci,pe,Se,Ie,Me,Be,Ge,Xe,Je,xt,nt,ct,mt,yt,Et,jt,Ut,Ct,ln,yn,$n,sn,wn,jn,_n,hr,ar,dr,vn,Un,pt,Tn,nr,_t,wt,Ft,hn,Vt,Sn,zn,xn,Rn,lr,fr,Cn,Lr,Er,Sr,Y,B,me,de,je,Ve,bt,$t,Ye,zt,Mt,ut,At,Xt,Jt,On,Yn,Kn,kn,Xn,Ht,nn,Fr,Nn,Or,St,Yt,Gt,In,Ln,br,Fs,Hs,jo,Uo,Lu,Sa,Xf,Jf,md,gd,dl,Du,Zf,fl,cc,bd,yd,uc,hc,_d,Qf,$d,vd,Ed,wd,Td,Sd,Od,Pu,ds,xd,dc,fc,To,Bu,ju,Fo,Ad,Rd,ep,pc,Uu,pl,ml,tp,mc,Cd,Oa,gc,bc,xa,yc,kd,np,Id,Md,fs,Nd,Ti,gl,Ld,Dd,Pd,Fu,Hu,Bd,rp,fo,Aa,Vs,bl,zs,ps,ms,_c,Dr,Gs,Ra,Ws,jd,Ud,Vu,yl,zu,qs,_l,qi,Di,Ca,Gu,$c,$l,Wu,Ho,vl,vc,ka,Fd,Yi,Vo,Ys,El,Ia,Si,Ki,So,Oo,Xi,Ks,Hd,zo,Ec,Ir,si,cr,Ji,xo,gs,bs,Vd,zd,wl,Tl,Sl,Ma,Gd,qu,wc,Tc,Wd,Na,Sc,Xs,Js,Ol,La,ys,Zs,Go,bi,qd,Da,Oc,Yu,xl,Ku,Zi,Ao,Wo,xc,qo,po,Zr,Ac,ip,op,cn,pr,Wr,yr,Pi,Qs,Zt,xr,Yd,Kd,ea,Rc,Yo,Cc,kc,Xu,Ro,Fn,_r,qr,Al,Pa,Ko,Ic,Rl,Ba,sp,Hr,Mc,Ju,Cl,kl,ap,Nc,Lc,Dc,yi,Pr,Il,Ml,Pc,Zu,Bi,Nl,Qu,Ll,Qi,Xd,_s,eh,Jd,Dl,Bc,th,Zd,nh,rh,ih,jc,oh,sh,ah,Qd,ef,lp,tf,ja,nf,Ua,Uc,rf,Fc,lh,ch,uh,hh,Hc,dh,Vc,Fa,fh,of,sf,zc,ph,mh,Gc,gh,bh,af,lf,yh,Pl,_h,Wc,$h,cf,Co,ta,$s,na,kt;l=function(e,t,s,T){if(!(e instanceof It)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const N=t.toLowerCase();if(!s)throw Error("Can not register a null value");let te=Xo[e],xe=qc[e];if(te||(te=Xo[e]=Object.create(null),xe=qc[e]=Object.create(null)),w(e,s),!T&&te[N]&&te[N]!==s)throw Error('Name "'+N+'" with type "'+e+'" already registered.');te[N]=s,xe[N]=t},w=function(e,t){switch(e){case String(It.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},d=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const s=Xo[e];s&&s[t]?(delete Xo[e][t],delete qc[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},f=function(e,t,s){e=`${e}`.toLowerCase(),t=t.toLowerCase();const T=Xo[e];if(!T||!T[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",s)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return T[t]},a=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),(e=Xo[e])?!!e[t]:!1},u=function(e,t,s){return f(e,t,s)},g=function(e,t,s){return f(e,t,s)},$=function(e,t,s){e=`${e}`.toLowerCase();var T=Xo[e];if(!T){if(T=`Unable to find [${e}] in the registry.`,s)throw Error(`${T} You must require or register a ${e} plugin.`);return console.warn(T),null}if(!t)return T;e=qc[e],s=Object.create(null);for(const N of Object.keys(T))s[e[N]]=T[N];return s},v=function(e,t,s){return t=t.plugins[String(e)]||_i,typeof t=="function"?t:u(e,t,s)},S=function(e,t,s,T){e=e+" was deprecated in "+t+" and will be deleted in "+s+".",T&&(e+=`
Use `+T+" instead."),uf.has(e)||(uf.add(e),console.warn(e))},E=function(){return"blockly-"+(Pp++).toString(36)},h=function(){return df.genUid()},b=function(e){return e.type===ht.BLOCK_CREATE},m=function(e){return e.type===ht.BLOCK_DELETE},p=function(e){return e.type===ht.BLOCK_CHANGE},_=function(e){return e.type===ht.BLOCK_FIELD_INTERMEDIATE_CHANGE},y=function(e){return e.type===ht.BLOCK_MOVE},x=function(e){return e.type===ht.CLICK},A=function(e){return e.type===ht.BUBBLE_OPEN},R=function(e){return e.type===ht.VIEWPORT_CHANGE},n.setRecordUndo$$module$build$src$core$events$utils=function(e){Yr=e},C=function(){return Yr},k=function(e){ff.fireInternal(e)},D=function(e){if(ee()){if(!Zo.length)try{requestAnimationFrame(()=>{setTimeout(j,0)})}catch{setTimeout(j,0)}V(e)}},j=function(){const e=z(Zo,!0);Zo.length=0;for(const t of e){if(!t.workspaceId)continue;let s;(s=P(t.workspaceId))==null||s.fireChangeListener(t)}},V=function(e){if(p(e)&&e.element==="mutation"){let t;for(t=Zo.length;0<t;t--){const s=Zo[t-1];if(s.group!==e.group||s.workspaceId!==e.workspaceId||!y(s)||s.newParentId!==e.blockId)break}Zo.splice(t,0,e)}else Zo.push(e)},z=function(e,t=!0){t||(S("filter(queue, /*forward=*/false)","v11.2","v12"),e=e.slice().reverse());const s=[];for(const T of e)if(e=s[s.length-1],!T.isNull())if(e&&e.workspaceId===T.workspaceId&&e.group===T.group)if(y(T)&&y(e)&&T.blockId===e.blockId){if(e.newParentId=T.newParentId,e.newInputName=T.newInputName,e.newCoordinate=T.newCoordinate,e.reason||T.reason){let N,te;e.reason=Array.from(new Set(((N=e.reason)!=null?N:[]).concat((te=T.reason)!=null?te:[])))}}else p(T)&&p(e)&&T.blockId===e.blockId&&T.element===e.element&&T.name===e.name?e.newValue=T.newValue:R(T)&&R(e)?(e.viewTop=T.viewTop,e.viewLeft=T.viewLeft,e.scale=T.scale,e.oldScale=T.oldScale):x(T)&&A(e)||s.push(T);else s.push(T);return e=s.filter(T=>!T.isNull()),t||e.reverse(),e},W=function(){for(let e=0,t;t=Zo[e];e++)t.recordUndo=!1},n.disable$$module$build$src$core$events$utils=function(){wh++},n.enable$$module$build$src$core$events$utils=function(){wh--},ee=function(){return wh===0},n.getGroup$$module$build$src$core$events$utils=function(){return ti},n.setGroup$$module$build$src$core$events$utils=function(e){ff.setGroupInternal(e)},ne=function(e){ti=typeof e=="boolean"?e?h():"":e},Q=function(e){const t=[];e=e.getDescendants(!1);for(let s=0,T;T=e[s];s++)t[s]=T.id;return t},se=function(e,t){const s=be(e.type);if(!s)throw Error("Unknown event type.");return s.fromJson(e,t)},be=function(e){const t=u(It.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},H=function(e){if((y(e)||b(e))&&e.workspaceId){var t=P(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const s=Yr;try{Yr=!1;const T=e.getParent();if(T&&!T.hasDisabledReason(Th)){const N=e.getDescendants(!1);for(let te=0,xe;xe=N[te];te++)xe.setDisabledReason(!1,Th)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setDisabledReason(!0,Th),e=e.getNextBlock();while(e)}finally{Yr=s}}}},P=function(e){return Bl[e]||null},L=function(){const e=[];for(const t in Bl)e.push(Bl[t]);return e},F=function(e){Bl[e.id]=e},M=function(e){delete Bl[e.id]},U=function(){return jl},Z=function(e){jl=e},K=function(){return vs},n.setSelected$$module$build$src$core$common=function(e){if(vs!==e){var t,s,T,N,te,xe,We=new(be(ht.SELECTED))((T=(t=vs)==null?void 0:t.id)!=null?T:null,(N=e==null?void 0:e.id)!=null?N:null,(xe=(te=e==null?void 0:e.workspace.id)!=null?te:(s=vs)==null?void 0:s.workspace.id)!=null?xe:"");k(We);var vt;(vt=vs)==null||vt.unselect(),vs=e;var rn;(rn=vs)==null||rn.select()}},oe=function(){return pf},ie=function(e){pf=e},$e=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),s=e.getCachedParentSvgSize();var T=t.parentElement;if(T instanceof HTMLElement){var N=T.offsetWidth;T=T.offsetHeight,s.width!==N&&(t.setAttribute("width",N+"px"),e.setCachedParentSvgSize(N,null)),s.height!==T&&(t.setAttribute("height",T+"px"),e.setCachedParentSvgSize(null,T)),e.resize()}},ce=function(e,t){const s=Object.create(null),T=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=T.indexOf(e),T.splice(e,T.length-e));for(let N=0,te;te=T[N];N++)s[te.type]?s[te.type]++:s[te.type]=1;return s},le=function(e){return function(){this.jsonInit(e)}},ye=function(e){mf.defineBlocksWithJsonArrayInternal(e)},_e=function(e){n.defineBlocks$$module$build$src$core$common(n.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},n.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let s=0;s<e.length;s++){const T=e[s];if(!T){console.warn(`Block definition #${s} in JSON array is ${T}. Skipping`);continue}const N=T.type;N?t[N]={init:le(T)}:console.warn(`Block definition #${s} in JSON array is missing a type attribute. Skipping.`)}return t},n.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const s=e[t];t in Oi&&console.warn(`Block definition "${t}" overwrites previous definition.`),Oi[t]=s}},q=function(e,t){re(),Jc=setTimeout(function(){t&&t.handleRightClick(e)},gf)},re=function(){Jc&&(clearTimeout(Jc),Jc=0)},fe=function(){Xc=null},we=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&ke(e)},Re=function(e){return`${e.pointerId}`},ke=function(e){const t=Re(e);return Xc?Xc===t:e.type==="pointerdown"?(Xc=t,!0):!1},ue=function(e,t,s,T,N){function te(We){(N||we(We))&&(s?T.call(s,We):T(We))}const xe=[];if(t in Es)for(let We=0;We<Es[t].length;We++){const vt=Es[t][We];e.addEventListener(vt,te,!1),xe.push([e,vt,te])}else e.addEventListener(t,te,!1),xe.push([e,t,te]);return xe},Ee=function(e,t,s,T){function N(xe){s?T.call(s,xe):T(xe)}const te=[];if(t in Es)for(let xe=0;xe<Es[t].length;xe++){const We=Es[t][xe];e.addEventListener(We,N,!1),te.push([e,We,N])}else e.addEventListener(t,N,!1),te.push([e,t,N]);return te},Ae=function(e){const t=e[e.length-1][2];for(;e.length;){const[s,T,N]=e.pop();s.removeEventListener(T,N,!1)}return t},Ne=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},De=function(e){return e.ctrlKey&&ns?!0:e.button===2},he=function(e,t,s){const T=t.createSVGPoint();return T.x=e.clientX,T.y=e.clientY,s||(s=t.getScreenCTM().inverse()),T.matrixTransform(s)},tt=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*ws,y:e.deltaY*ws};case 2:return{x:e.deltaX*Ts,y:e.deltaY*Ts}}},at=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},He=function(e){if(Va)throw Error("CSS already injected");Ih+=`
`+e},ot=function(e,t){Va||(Va=!0,e&&(e=t.replace(/[\\/]$/,""),t=Ih.replace(/<<<PATH>>>/g,e),Ih="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},Ue=function(e,t,s){e=document.createElementNS(go,`${e}`);for(const T in t)e.setAttribute(T,`${t[T]}`);return s&&s.appendChild(e),e},Ze=function(e,t){return t=t.split(" "),t.every(s=>e.classList.contains(s))?!1:(e.classList.add(...t),!0)},ae=function(e,t){e.classList.remove(...t.split(" "))},Oe=function(e,t){return t=t.split(" "),t.every(s=>!e.classList.contains(s))?!1:(e.classList.remove(...t),!0)},Le=function(e,t){return e.classList.contains(t)},Pe=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},ft=function(e,t){const s=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");s?t.insertBefore(e,s):t.appendChild(e)},Lt=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},qt=function(){Nh++,Br||(Br=Object.create(null))},gn=function(){Nh--,Nh||(Br=null)},dn=function(e){const t=e.textContent+`
`+e.className.baseVal;let s;if(Br&&(s=Br[t]))return s;try{s=e.getComputedTextLength()}catch{return 8*e.textContent.length}return Br&&(Br[t]=s),s},un=function(e,t,s,T){return ge(e,t+"pt",s,T)},ge=function(e,t,s,T){const N=e.textContent;e=N+`
`+e.className.baseVal;var te;return Br&&(te=Br[e])||(tu||(te=document.createElement("canvas"),te.className="blocklyComputeCanvas",document.body.appendChild(te),tu=te.getContext("2d")),tu.font=s+" "+t+" "+T,te=N?tu.measureText(N).width:0,Br&&(Br[e]=te)),te},ve=function(e,t,s,T){const N=document.createElement("span");N.style.font=s+" "+t+" "+T,N.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.style.display="flex",t.style.position="fixed",t.style.top="0",t.style.left="0",t.appendChild(N),t.appendChild(e),document.body.appendChild(t),s={height:0,baseline:0};try{t.style.alignItems="baseline",s.baseline=e.offsetTop-N.offsetTop,t.style.alignItems="flex-end",s.height=e.offsetTop-N.offsetTop}finally{document.body.removeChild(t)}return s},Fe=function(e){return rs.getSizeInternal(e)},qe=function(e){if(Dt(e,"display")!=="none")return st(e);const t=e.style,s=t.display,T=t.visibility,N=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const te=e.offsetWidth;return e=e.offsetHeight,t.display=s,t.position=N,t.visibility=T,new Hn(te,e)},st=function(e){return new Hn(e.offsetWidth,e.offsetHeight)},Dt=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},Wt=function(e){const t=new Bt(0,0);e=e.getBoundingClientRect();var s=document.documentElement;return s=new Bt(window.pageXOffset||s.scrollLeft,window.pageYOffset||s.scrollTop),t.x=e.left+s.x,t.y=e.top+s.y,t},pn=function(){const e=document.body,t=document.documentElement;return new Bt(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},bn=function(e){const t=parseFloat(Dt(e,"borderLeftWidth")),s=parseFloat(Dt(e,"borderRightWidth")),T=parseFloat(Dt(e,"borderTopWidth"));return e=parseFloat(Dt(e,"borderBottomWidth")),new mr(T,e,t,s)},sr=function(e,t,s){e=Pn(e,t,s),t.scrollLeft=e.x,t.scrollTop=e.y},Pn=function(e,t,s){var T=Wt(e),N=Wt(t),te=bn(t);const xe=T.x-N.x-te.left;return T=T.y-N.y-te.top,N=st(e),e=t.clientWidth-N.width,N=t.clientHeight-N.height,te=t.scrollLeft,t=t.scrollTop,s?(te+=xe-e/2,t+=T-N/2):(te+=Math.min(xe,Math.max(xe-e,0)),t+=Math.min(T,Math.max(T-N,0))),new Bt(te,t)},Bn=function(e){const t=new Bt(0,0);var s=e.x&&e.getAttribute("x");const T=e.y&&e.getAttribute("y");return s&&(t.x=parseInt(s)),T&&(t.y=parseInt(T)),(s=(s=e.getAttribute("transform"))&&s.match(Lh))&&(t.x+=Number(s[1]),s[3]&&(t.y+=Number(s[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match($f))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},ci=function(e){let t=0,s=0;for(;e;){const T=Bn(e);if(t+=T.x,s+=T.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new Bt(t,s)},pe=function(){const e=pn();return new mr(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},Se=function(){const e=document.documentElement,t=window;return new Bt(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},Ie=function(e,t){var s=t.x;t=t.y;const T=e.getInjectionDiv().getBoundingClientRect();return s=new Bt(s-T.left,t-T.top),t=e.getOriginOffsetInPixels(),Bt.difference(s,t).scale(1/e.scale)},Me=function(e,t){var s=t.scale(e.scale);t=s.x,s=s.y;const T=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new Bt(t+T.left+e.x,s+T.top+e.y)},Be=function(e){({document:jr=jr,DOMParser:ui=ui,XMLSerializer:ro=ro}=e),nu=new ui,Dh=new ro},n.createElement$$module$build$src$core$utils$xml=function(e){return jr.createElementNS(vf,e)},n.createTextNode$$module$build$src$core$utils$xml=function(e){return jr.createTextNode(e)},n.textToDom$$module$build$src$core$utils$xml=function(e){let t=nu.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=nu.parseFromString(e,"text/html"))&&t.body.firstChild&&t.body.firstChild.nodeName.toLowerCase()==="xml")return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},Ge=function(e){return Xe(Dh.serializeToString(e))},Xe=function(e){return e.replace(dp,t=>`&#${t.charCodeAt(0)};`)},Je=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=Ct(e),e=Et(e)),xt(e),e):null},xt=function(e){const t=e.kind;if(e=e.contents,t&&t!==io&&t!==ru)throw Error("Invalid toolbox kind "+t+". Please supply either "+io+" or "+ru);if(!e)throw Error("Toolbox must have a contents attribute.")},nt=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:jt(e):[]},ct=function(e){return Ef.hasCategoriesInternal(e)},mt=function(e){if(!e)return!1;const t=e.kind;return t?t===ru:!!e.contents.filter(s=>s.kind.toUpperCase()==="CATEGORY").length},yt=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},Et=function(e){const t={contents:jt(e)};return e instanceof Node&&Ut(e,t),t},jt=function(e){const t=[];let s=e.childNodes;s||(s=e);for(let T=0,N;N=s[T];T++){if(!N.tagName)continue;e={};const te=N.tagName.toUpperCase();e.kind=te,te==="BLOCK"?e.blockxml=N:N.childNodes&&0<N.childNodes.length&&(e.contents=jt(N)),Ut(N,e),t.push(e)}return t},Ut=function(e,t){for(let s=0;s<e.attributes.length;s++){const T=e.attributes[s];T.nodeName.includes("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[T.nodeName.replace("css-","")]=T.value):t[T.nodeName]=T.value}},Ct=function(e){let t=null;if(e)if(typeof e=="string"){if(t=n.textToDom$$module$build$src$core$utils$xml(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},ln=function(e,t,s,T,N,te){const xe=te.scrollbar&&te.scrollbar.canScrollVertically();return e.horizontal===Ui.LEFT?(s=N.absoluteMetrics.left+s,xe&&te.RTL&&(s+=Vr.scrollbarThickness)):(s=N.absoluteMetrics.left+N.viewMetrics.width-t.width-s,xe&&!te.RTL&&(s-=Vr.scrollbarThickness)),e.vertical===is.TOP?e=N.absoluteMetrics.top+T:(e=N.absoluteMetrics.top+N.viewMetrics.height-t.height-T,te.scrollbar&&te.scrollbar.canScrollHorizontally()&&(e-=Vr.scrollbarThickness)),new mr(e,e+t.height,s,s+t.width)},yn=function(e,t){return{horizontal:t.toolboxMetrics.position===En.LEFT||e.horizontalLayout&&!e.RTL?Ui.RIGHT:Ui.LEFT,vertical:t.toolboxMetrics.position===En.BOTTOM?is.TOP:is.BOTTOM}},$n=function(e,t,s,T){const N=e.left,te=e.right-e.left,xe=e.bottom-e.top;for(let We=0;We<T.length;We++){const vt=T[We];e.intersects(vt)&&(e=s===oo.UP?vt.top-xe-t:vt.bottom+t,e=new mr(e,e+xe,N,N+te),We=-1)}return e},sn=function(e,t){l(It.SERIALIZER,e,t)},wn=function(e){d(It.SERIALIZER,e)},jn=function(e,{addCoordinates:t=!1,saveIds:s=!0}={}){const T=e.workspace,N=Object.create(null);return N.height=e.getSize().height,N.width=e.getSize().width,s&&(N.id=e.id),t&&(t=e.getRelativeToSurfaceXY(),N.x=T.RTL?T.getWidth()-t.x:t.x,N.y=t.y),e.getText()&&(N.text=e.getText()),e.isCollapsed()&&(N.collapsed=!0),e.isOwnEditable()||(N.editable=!1),e.isOwnMovable()||(N.movable=!1),e.isOwnDeletable()||(N.deletable=!1),N},_n=function(e,t,{recordUndo:s=!1}={}){const T=C();if(n.setRecordUndo$$module$build$src$core$events$utils(s),s=t.newComment(e.id),e.text!==void 0&&s.setText(e.text),e.x!==void 0||e.y!==void 0){const te=s.getRelativeToSurfaceXY();let xe,We=(xe=e.x)!=null?xe:te.x;We=t.RTL?t.getWidth()-We:We;var N;t=(N=e.y)!=null?N:te.y,s.moveTo(new Bt(We,t))}if(e.width!==void 0||e.height){N=s.getSize();let te,xe;s.setSize(new Hn((te=e.width)!=null?te:N.width,(xe=e.height)!=null?xe:N.height))}return e.collapsed!==void 0&&s.setCollapsed(e.collapsed),e.editable!==void 0&&s.setEditable(e.editable),e.movable!==void 0&&s.setMovable(e.movable),e.deletable!==void 0&&s.setDeletable(e.deletable),n.setRecordUndo$$module$build$src$core$events$utils(T),s},hr=function(e,t){l(It.PASTER,e,t)},ar=function(e){d(It.PASTER,e)},dr=function(e){const t=e.workspace,s=e.getRelativeToSurfaceXY(),T=new Bt(0,0),N=t.getTopComments(!1).filter(te=>te.id!==e.id).map(te=>te.getRelativeToSurfaceXY());for(;vn(Bt.sum(s,T),N);)T.translate(t.RTL?-30:30,30);e.moveTo(Bt.sum(s,T))},vn=function(e,t){return t.some(s=>1>=Math.abs(s.x-e.x)&&1>=Math.abs(s.y-e.y))},Un=function(e,t){e.setAttribute(Bp,t)},pt=function(e,t,s){Array.isArray(s)&&(s=s.join(" ")),e.setAttribute(fp+t,`${s}`)},Tn=function(e){return e.saveState!==void 0&&e.loadState!==void 0},nr=function(e){return hn(e),Ft()?(Vt(),Promise.resolve()):(os||(os=new Promise(t=>{Rr=t,pp=window.requestAnimationFrame(()=>{Vt(),t()})})),os)},_t=function(){return os||Promise.resolve()},wt=function(e){e||window.cancelAnimationFrame(pp),Vt(e),!e&&Rr&&Rr()},Ft=function(){return eu},hn=function(e){jh.add(e),Gl.set(e,n.getGroup$$module$build$src$core$events$utils());const t=e.getParent();t?hn(t):yo.add(e)},Vt=function(e){const t=e?new Set([e]):new Set([...yo].map(te=>te.workspace)),s=[...yo].filter(zn).filter(te=>t.has(te.workspace));for(var T of s)xn(T);for(const te of t)te.resizeContents();for(var N of s)T=N.getRelativeToSurfaceXY(),N.updateComponentLocations(T);for(const te of s)N=n.getGroup$$module$build$src$core$events$utils(),(T=Gl.get(te))&&n.setGroup$$module$build$src$core$events$utils(T),te.bumpNeighbours(),n.setGroup$$module$build$src$core$events$utils(N);for(const te of s)Sn(te);e||(os=null)},Sn=function(e){yo.delete(e),jh.delete(e),Gl.delete(e);for(const t of e.getChildren(!1))Sn(t)},zn=function(e){return!e.isDisposed()&&!e.getParent()},xn=function(e){if(jh.has(e)&&e.initialized){for(const t of e.getChildren(!1))xn(t);e.renderEfficiently()}},Rn=function(e,t){Of(e,t)},lr=function(e){Of=e},fr=function(e,t){Mr.confirmInternal(e,t)},Cn=function(e,t){mp(e,t)},Lr=function(e){mp=e},Er=function(e,t,s){gp(e,t,s)},Sr=function(e){gp=e},Y=function(e){return e.getProcedureDef!==void 0},B=function(e){return e.getProcedureCall!==void 0&&e.renameProcedure!==void 0},me=function(e){return e.getVariableModel!==void 0},n.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let s=0;s<e.length;s++){const T=e[s].getVarModels();if(T)for(let N=0;N<T.length;N++){const te=T[N];te.getId()&&t.add(te)}}return Array.from(t.values())},n.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let T=0,N;N=e[T];T++){var s=N.getDeveloperVariables;if(s){s=s();for(let te=0;te<s.length;te++)t.add(s[te])}}return Array.from(t.values())},de=function(e){let t=[];const s=document.createElement("button");return s.setAttribute("text","%{BKY_NEW_VARIABLE}"),s.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(T){Ye(T.getTargetWorkspace())}),t.push(s),e=je(e),t=t.concat(e)},je=function(e){e=e.getVariablesOfType("");const t=[];if(0<e.length){var s=e[e.length-1];if(Oi.variables_set){var T=n.createElement$$module$build$src$core$utils$xml("block");T.setAttribute("type","variables_set"),T.setAttribute("gap",Oi.math_change?"8":"24"),T.appendChild(On(s)),t.push(T)}if(Oi.math_change&&(T=n.createElement$$module$build$src$core$utils$xml("block"),T.setAttribute("type","math_change"),T.setAttribute("gap",Oi.variables_get?"20":"8"),T.appendChild(On(s)),s=n.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),T.appendChild(s),t.push(T)),Oi.variables_get){e.sort(so.compareByName);for(let N=0,te;te=e[N];N++)s=n.createElement$$module$build$src$core$utils$xml("block"),s.setAttribute("type","variables_get"),s.setAttribute("gap","8"),s.appendChild(On(te)),t.push(s)}}return t},Ve=function(e){return ss.generateUniqueNameInternal(e)},bt=function(e){return $t(lu.charAt(0),e.getAllVariableNames())},$t=function(e,t){if(!t.length)return e;const s=lu;let T="",N=s.indexOf(e);for(;;){let te=!1;for(let xe=0;xe<t.length;xe++)if(t[xe].toLowerCase()===e){te=!0;break}if(!te)break;N++,N===s.length&&(N=0,T=`${Number(T)+1}`),e=s.charAt(N)+T}return e},Ye=function(e,t,s){function T(te){zt(n.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,te,function(xe){if(xe){var We=ut(xe,e);if(We){if(We.type===N)var vt=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",We.name);else vt=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,vt=vt.replace("%1",We.name).replace("%2",We.type);Rn(vt,function(){T(xe)})}else e.createVariable(xe,N),t&&t(xe)}else t&&t(null)})}const N=s||"";T("")},n.renameVariable$$module$build$src$core$variables=function(e,t,s){function T(N){const te=n.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.name);zt(te,N,function(xe){if(xe){var We=Mt(xe,t.type,e),vt=At(t.name,xe,e);if(We||vt){var rn="";We?rn=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",We.name).replace("%2",We.type):vt&&(rn=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",xe).replace("%2",vt)),Rn(rn,function(){T(xe)})}else e.renameVariableById(t.getId(),xe),s&&s(xe)}else s&&s(null)})}T("")},zt=function(e,t,s){Er(e,t,function(T){T&&(T=T.replace(/[\s\xa0]+/g," ").trim(),T===n.Msg$$module$build$src$core$msg.RENAME_VARIABLE||T===n.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(T=null),s(T)})},Mt=function(e,t,s){s=s.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let T=0,N;N=s[T];T++)if(N.name.toLowerCase()===e&&N.type!==t)return N;return null},ut=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let s=0,T;T=t[s];s++)if(T.name.toLowerCase()===e)return T;return null},At=function(e,t,s){return s.getProcedureMap().getProcedures().length?Xt(e,t,s):Jt(e,t,s)},Xt=function(e,t,s){e=e.toLowerCase(),t=t.toLowerCase(),s=s.getProcedureMap().getProcedures();for(const N of s){var T=N.getParameters().filter(me).map(te=>te.getVariableModel().name);if(T&&(s=T.some(te=>te.toLowerCase()===e),T=T.some(te=>te.toLowerCase()===t),s&&T))return N.getName()}return null},Jt=function(e,t,s){e=e.toLowerCase(),t=t.toLowerCase(),s=s.getAllBlocks(!1);for(const N of s){if(!Y(N))continue;s=N.getProcedureDef();var T=s[1];const te=T.some(xe=>xe.toLowerCase()===e);if(T=T.some(xe=>xe.toLowerCase()===t),te&&T)return s[0]}return null},On=function(e){const t=n.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=n.createTextNode$$module$build$src$core$utils$xml(e.name),t.appendChild(e),t},n.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,s,T){let N=n.getVariable$$module$build$src$core$variables(e,t,s,T);return N||(N=Yn(e,t,s,T)),N},n.getVariable$$module$build$src$core$variables=function(e,t,s,T){const N=e.getPotentialVariableMap();let te=null;if(t&&(te=e.getVariableById(t),!te&&N&&(te=N.getVariableById(t)),te))return te;if(s){if(T===void 0)throw Error("Tried to look up a variable by name without a type");te=e.getVariable(s,T),!te&&N&&(te=N.getVariable(s,T))}return te},Yn=function(e,t,s,T){const N=e.getPotentialVariableMap();return s||(s=Ve(e.isFlyout?e.targetWorkspace:e)),N?N.createVariable(s,T,t):e.createVariable(s,T,t)},Kn=function(e,t){e=e.getAllVariables();const s=[];if(t.length!==e.length)for(let T=0;T<e.length;T++){const N=e[T];t.includes(N)||s.push(N)}return s},kn=function(e,{addCoordinates:t=!1,addInputBlocks:s=!0,addNextBlocks:T=!0,doFullSerialization:N=!0,saveIds:te=!0}={}){if(e.isInsertionMarker())return null;const xe={type:e.type,id:te?e.id:void 0};return t&&Ht(e,xe),Xn(e,xe),nn(e,xe,N),Fr(e,xe,N),Nn(e,xe,N),s&&Or(e,xe,N,te),T&&St(e,xe,N,te),xe},Xn=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},Ht=function(e,t){const s=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(s.RTL?s.getWidth()-e.x:e.x),t.y=Math.round(e.y)},nn=function(e,t,s){e.saveExtraState?(e=e.saveExtraState(s),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=Ir(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Fr=function(e,t,s){const T=Object.create(null);for(const N of e.getIcons())Tn(N)&&(e=N.saveState(s))&&(T[N.getType().toString()]=e);Object.keys(T).length&&(t.icons=T)},Nn=function(e,t,s){const T=Object.create(null);for(let N=0;N<e.inputList.length;N++){const te=e.inputList[N];for(let xe=0;xe<te.fieldRow.length;xe++){const We=te.fieldRow[xe];We.isSerializable()&&(T[We.name]=We.saveState(s))}}Object.keys(T).length&&(t.fields=T)},Or=function(e,t,s,T){const N=Object.create(null);for(let te=0;te<e.inputList.length;te++){const xe=e.inputList[te];if(!xe.connection)continue;const We=Yt(xe.connection,s,T);We&&(N[xe.name]=We)}Object.keys(N).length&&(t.inputs=N)},St=function(e,t,s,T){e.nextConnection&&(e=Yt(e.nextConnection,s,T))&&(t.next=e)},Yt=function(e,t,s){const T=e.getShadowState(!0);if(e=e.targetBlock(),!T&&!e)return null;const N=Object.create(null);return T&&(N.shadow=T),e&&!e.isShadow()&&(N.block=kn(e,{doFullSerialization:t,saveIds:s})),N},Gt=function(e,t,{recordUndo:s=!1}={}){return e=In(e,t,{recordUndo:s}),t.rendered&&wt(),e},In=function(e,t,{parentConnection:s,isShadow:T=!1,recordUndo:N=!1}={}){const te=C();n.setRecordUndo$$module$build$src$core$events$utils(N),(N=n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),n.disable$$module$build$src$core$events$utils();const xe=t.getAllVariables();let We;try{We=Ln(e,t,{parentConnection:s,isShadow:T})}finally{n.enable$$module$build$src$core$events$utils()}if(br(t,xe),ee()&&k(new(be(ht.BLOCK_CREATE))(We)),n.setGroup$$module$build$src$core$events$utils(N),n.setRecordUndo$$module$build$src$core$events$utils(te),t.rendered){const vt=We;setTimeout(()=>{vt.disposed||vt.setConnectionTracking(!0)},1)}return We},Ln=function(e,t,{parentConnection:s,isShadow:T=!1}={}){if(!e.type)throw new la(e);const N=t.newBlock(e.type,e.id);return N.setShadow(T),Fs(N,e),Hs(N,e),jo(N,e),Uo(s,N,e),Lu(N,e),Sa(N,e),Xf(N,e),Jf(N,e),gd(N,t.rendered),N},br=function(e,t){if(ee())for(e=Kn(e,t),t=0;t<e.length;t++){const s=e[t];k(new(be(ht.VAR_CREATE))(s))}},Fs=function(e,t){let s=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const T=e.workspace;s=T.RTL?T.getWidth()-s:s,e.moveBy(s,t)},Hs=function(e,t){if(t.collapsed&&e.setCollapsed(!0),t.deletable===!1&&e.setDeletable(!1),t.movable===!1&&e.setMovable(!1),t.editable===!1&&e.setEditable(!1),t.enabled===!1&&e.setDisabledReason(!0,di),Array.isArray(t.disabledReasons))for(const s of t.disabledReasons)e.setDisabledReason(!0,s);t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},jo=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(n.textToDom$$module$build$src$core$utils$xml(t.extraState)))},Uo=function(e,t,s){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new qa(s);if(e.type===n.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var T=t.outputConnection;if(!T)throw new Wa("output",t,s)}else if(T=t.previousConnection,!T)throw new Wa("previous",t,s);if(!e.connect(T)){const N=t.workspace.connectionChecker;throw new lo(N.getErrorMessage(N.canConnectWithReason(T,e,!1),T,e),e.type===n.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,s)}}},Lu=function(e,t){if(t.icons){var s=Object.keys(t.icons);for(const N of s){s=t.icons[N];var T=e.getIcon(N);if(!T){if(T=u(It.ICON,N,!1),!T)throw new Wl(N,e,t);T=new T(e),e.addIcon(T)}Tn(T)&&T.loadState(s)}}},Sa=function(e,t){if(t.fields){var s=Object.keys(t.fields);for(let T=0;T<s.length;T++){const N=s[T],te=t.fields[N],xe=e.getField(N);xe?xe.loadState(te):console.warn(`Ignoring non-existant field ${N} in block ${e.type}`)}}},Xf=function(e,t){if(t.inputs){var s=Object.keys(t.inputs);for(let T=0;T<s.length;T++){const N=s[T],te=e.getInput(N);if(!te||!te.connection)throw new Wa(N,e,t);md(te.connection,t.inputs[N])}}},Jf=function(e,t){if(t.next){if(!e.nextConnection)throw new Wa("next",e,t);md(e.nextConnection,t.next)}},md=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&Ln(t.block,e.getSourceBlock().workspace,{parentConnection:e})},gd=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const s of e.getIcons())s.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},dl=function(e){return e.bubbleIsVisible!==void 0&&e.setBubbleVisible!==void 0},Du=function(e){return e*Math.PI/180},Zf=function(e){return 180*e/Math.PI},fl=function(e,t,s){if(s<e){const T=s;s=e,e=T}return Math.max(e,Math.min(t,s))},cc=function(){document.querySelector(".blocklyDropDownDiv")||(rr=document.createElement("div"),rr.className="blocklyDropDownDiv",(oe()||document.body).appendChild(rr),ua=document.createElement("div"),ua.className="blocklyDropDownContent",rr.appendChild(ua),ha=document.createElement("div"),ha.className="blocklyDropDownArrow",rr.appendChild(ha),rr.style.opacity="0",rr.style.transition="transform "+ca+"s, opacity "+ca+"s",rr.addEventListener("focusin",function(){Ze(rr,"blocklyFocused")}),rr.addEventListener("focusout",function(){Oe(rr,"blocklyFocused")}))},bd=function(e){xf=e},yd=function(){return vi},uc=function(){return ua},hc=function(){ua.textContent="",ua.style.width=""},_d=function(e,t){rr.style.backgroundColor=e,rr.style.borderColor=t},Qf=function(e,t,s,T){return wd(vd(t),e,s,T)},$d=function(e,t,s){return hu=!0,wd(Ed(e),e,t,s)},vd=function(e){var t=e.getSvgRoot();const s=e.workspace.scale,T=e.height*s;return e=e.width*s,t=Wt(t),new mr(t.y,t.y+T,t.x,t.x+e)},Ed=function(e){return e=e.getScaledBBox(),new mr(e.top,e.bottom,e.left,e.right)},wd=function(e,t,s,T){const N=e.left+(e.right-e.left)/2,te=e.bottom;e=e.top,T&&(e+=T),T=t.getSourceBlock();let xe=T.workspace;for(;xe.options.parentWorkspace;)xe=xe.options.parentWorkspace;return bd(xe.getParentSvg().parentNode),Td(t,T.RTL,N,te,N,e,s)},Td=function(e,t,s,T,N,te,xe){return vi=e,oi=xe||null,rr.style.direction=t?"rtl":"ltr",e=U(),Xa=e.getRenderer().getClassName(),Qr=e.getTheme().getClassName(),Xa&&Ze(rr,Xa),Qr&&Ze(rr,Qr),Bu(s,T,N,te)},Sd=function(e,t,s,T){return e=ds(e,s.left,s.right,T.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+cu,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},Od=function(e,t,s,T){return e=ds(e,s.left,s.right,T.width),{initialX:e.divX,initialY:t-T.height,finalX:e.divX,finalY:t-T.height-cu,arrowX:e.arrowX,arrowY:T.height-2*ql-ls/2,arrowAtTop:!1,arrowVisible:!0}},Pu=function(e,t,s){return e=ds(e,t.left,t.right,s.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},ds=function(e,t,s,T){return t=fl(t,e-T/2,s-T),e=e-ls/2-t,s=Hh,e=fl(s,e,T-s-ls),{arrowX:e,divX:t}},xd=function(){return!!vi},dc=function(e,t){return vi===e?(t?To():fc(),!0):!1},fc=function(){rr.style.transform="translate(0, 0)",rr.style.opacity="0",uu=setTimeout(function(){To()},1e3*ca),oi&&(oi(),oi=null)},To=function(){xd()&&(uu&&clearTimeout(uu),rr.style.transform="",rr.style.left="",rr.style.top="",rr.style.opacity="0",rr.style.display="none",rr.style.backgroundColor="",rr.style.borderColor="",oi&&(oi(),oi=null),hc(),vi=null,Xa&&(Oe(rr,Xa),Xa=""),Qr&&(Oe(rr,Qr),Qr=""),U().markFocused())},Bu=function(e,t,s,T){e=du.getPositionMetrics(e,t,s,T),e.arrowVisible?(ha.style.display="",ha.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",ha.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):ha.style.display="none",t=Math.floor(e.initialX),s=Math.floor(e.initialY),T=Math.floor(e.finalX);const N=Math.floor(e.finalY);return rr.style.left=t+"px",rr.style.top=s+"px",rr.style.display="block",rr.style.opacity="1",rr.style.transform="translate("+(T-t)+"px,"+(N-s)+"px)",!!e.arrowAtTop},ju=function(){if(vi){var e=vi.getSourceBlock();e=hu?Ed(vi):vd(e);const t=e.left+(e.right-e.left)/2;Bu(t,e.bottom,t,e.top)}else fc()},Fo=function(e){return e.length?e.reduce(function(t,s){return t.length<s.length?t:s}).length:0},Ad=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let s=0;t=t||Fo(e);let T;for(T=0;T<t;T++){for(var N=e[0][T],te=1;te<e.length;te++)if(N!==e[te][T])return s;N===" "&&(s=T+1)}for(N=1;N<e.length;N++)if((te=e[N][T])&&te!==" ")return s;return t},Rd=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let s=0;t=t||Fo(e);let T;for(T=0;T<t;T++){for(var N=e[0].substr(-T-1,1),te=1;te<e.length;te++)if(N!==e[te].substr(-T-1,1))return s;N===" "&&(s=T+1)}for(N=1;N<e.length;N++)if((te=e[N].charAt(e[N].length-T-1))&&te!==" ")return s;return t},n.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split(`
`);for(let s=0;s<e.length;s++)e[s]=ep(e[s],t);return e.join(`
`)},ep=function(e,t){if(e.length<=t)return e;const s=e.trim().split(/\s+/);for(var T=0;T<s.length;T++)s[T].length>t&&(t=s[T].length);var N=-1/0;let te,xe=1;do{T=N,te=e,e=[],N=s.length/xe;let We=1;for(let vt=0;vt<s.length-1;vt++)We<(vt+1.5)/N?(We++,e[vt]=!0):e[vt]=!1;e=Uu(s,e,t),N=pc(s,e,t),e=pl(s,e),xe++}while(N>T);return te},pc=function(e,t,s){const T=[0],N=[];for(var te=0;te<e.length;te++)T[T.length-1]+=e[te].length,t[te]===!0?(T.push(0),N.push(e[te].charAt(e[te].length-1))):t[te]===!1&&T[T.length-1]++;for(e=Math.max(...T),t=0,te=0;te<T.length;te++)t-=2*Math.pow(Math.abs(s-T[te]),1.5),t-=Math.pow(e-T[te],1.5),".?!".includes(N[te])?t+=s/3:",;)]}".includes(N[te])&&(t+=s/4);return 1<T.length&&T[T.length-1]<=T[T.length-2]&&(t+=.5),t},Uu=function(e,t,s){let T=pc(e,t,s),N;for(let te=0;te<t.length-1;te++){if(t[te]===t[te+1])continue;const xe=[].concat(t);xe[te]=!xe[te],xe[te+1]=!xe[te+1];const We=pc(e,xe,s);We>T&&(T=We,N=xe)}return N?Uu(e,N,s):t},pl=function(e,t){const s=[];for(let T=0;T<e.length;T++)s.push(e[T]),t[T]!==void 0&&s.push(t[T]?`
`:" ");return s.join("")},n.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},ml=function(e){fu=e},tp=function(){return fu},mc=function(){return Za},Cd=function(){return Jr},Oa=function(e){if(e=gc(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},gc=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},bc=function(){document.querySelector(".blocklyTooltipDiv")||(Jr=document.createElement("div"),Jr.className="blocklyTooltipDiv",(oe()||document.body).appendChild(Jr))},xa=function(e){e.mouseOverWrapper_=Ee(e,"pointerover",null,kd),e.mouseOutWrapper_=Ee(e,"pointerout",null,np),e.addEventListener("pointermove",Id,!1)},yc=function(e){e&&(Ae(e.mouseOverWrapper_),Ae(e.mouseOutWrapper_),e.removeEventListener("pointermove",Id))},kd=function(e){da||(e=gc(e.currentTarget),fi!==e&&(fs(),fa=null,fi=e),clearTimeout(yp))},np=function(e){da||(yp=setTimeout(function(){fa=fi=null,fs()},1),clearTimeout(Qa),Qa=0)},Id=function(e){if(fi&&fi.tooltip&&!da)if(Za){const t=Vh-e.pageX;e=zh-e.pageY,Math.sqrt(t*t+e*e)>_p&&fs()}else fa!==fi&&(clearTimeout(Qa),Vh=e.pageX,zh=e.pageY,Qa=setTimeout(Pd,Af))},Md=function(){fa=fi=null,fs()},fs=function(){Za&&(Za=!1,Jr&&(Jr.style.display="none")),Qa&&(clearTimeout(Qa),Qa=0)},Nd=function(){fs(),da=!0},Ti=function(){da=!1},gl=function(){Jr&&fi&&(typeof fu=="function"?fu(Jr,fi):Ld())},Ld=function(){var e=Oa(fi);e=n.wrap$$module$build$src$core$utils$string(e,bp),e=e.split(`
`);for(let t=0;t<e.length;t++){const s=document.createElement("div");s.appendChild(document.createTextNode(e[t])),Jr.appendChild(s)}},Dd=function(e){const t=document.documentElement.clientWidth,s=document.documentElement.clientHeight;let T=Vh;T=e?T-(Gh+Jr.offsetWidth):T+Gh;let N=zh+Wh;return N+Jr.offsetHeight>s+window.scrollY&&(N-=Jr.offsetHeight+2*Wh),e?T=Math.max(Os-window.scrollX,T):T+Jr.offsetWidth>t+window.scrollX-2*Os&&(T=t-Jr.offsetWidth-2*Os),{x:T,y:N}},Pd=function(){if(!da&&(fa=fi,Jr)){Jr.textContent="",gl();var e=fi.RTL;Jr.style.direction=e?"rtl":"ltr",Jr.style.display="block",Za=!0;var{x:t,y:s}=Dd(e);Jr.style.left=t+"px",Jr.style.top=s+"px"}},Fu=function(){return pu},Hu=function(e){pu=e},Bd=function(){return Rf},rp=function(e){Rf=e},fo=function(e){e=`${e}`.toLowerCase().trim();var t=Cf[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var s=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return s&&(e=Number(s[1]),t=Number(s[2]),s=Number(s[3]),0<=e&&256>e&&0<=t&&256>t&&0<=s&&256>s)?Aa(e,t,s):null},Aa=function(e,t,s){return t=e<<16|t<<8|s,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},Vs=function(e){return e=fo(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},bl=function(e,t,s){let T=0,N=0,te=0;if(t===0)te=N=T=s;else{const xe=Math.floor(e/60),We=e/60-xe;e=s*(1-t);const vt=s*(1-t*We);switch(t=s*(1-t*(1-We)),xe){case 1:T=vt,N=s,te=e;break;case 2:T=e,N=s,te=t;break;case 3:T=e,N=vt,te=s;break;case 4:T=t,N=e,te=s;break;case 5:T=s,N=e,te=vt;break;case 6:case 0:T=s,N=t,te=e}}return Aa(Math.floor(T),Math.floor(N),Math.floor(te))},zs=function(e,t,s){return e=fo(e),!e||(t=fo(t),!t)?null:(e=Vs(e),t=Vs(t),Aa(Math.round(t[0]+s*(e[0]-t[0])),Math.round(t[1]+s*(e[1]-t[1])),Math.round(t[2]+s*(e[2]-t[2]))))},ps=function(e){return bl(e,pu,255*Rf)},ms=function(e,t,s){const T=[];var N=e.split("");N.push("");var te=0;e=[];let xe=null;for(let rn=0;rn<N.length;rn++){var We=N[rn];if(te===0)if(We==="%")(te=e.join(""))&&T.push(te),e.length=0,te=1;else if(s&&We===`
`){const kr=e.join("");kr&&T.push(kr),e.length=0,T.push(We)}else e.push(We);else if(te===1)We==="%"?(e.push(We),te=0):t&&"0"<=We&&"9">=We?(te=2,xe=We,(We=e.join(""))&&T.push(We),e.length=0):We==="{"?te=3:(e.push("%",We),te=0);else if(te===2)if("0"<=We&&"9">=We)xe+=We;else{var vt=void 0;T.push(parseInt((vt=xe)!=null?vt:"",10)),rn--,te=0}else te===3&&(We===""?(e.splice(0,0,"%{"),rn--,te=0):We!=="}"?e.push(We):(te=e.join(""),/[A-Z]\w*/i.test(te)?(We=te.toUpperCase(),(We=We.startsWith("BKY_")?We.substring(4):null)&&We in n.Msg$$module$build$src$core$msg?(te=n.Msg$$module$build$src$core$msg[We],typeof te=="string"?Array.prototype.push.apply(T,ms(te,t,s)):t?T.push(`${te}`):T.push(te)):T.push("%{"+te+"}")):T.push("%{"+te+"}"),te=e.length=0))}for((t=e.join(""))&&T.push(t),vt=[],e.length=0,N=0;N<T.length;N++)typeof T[N]!="string"||s&&T[N]===`
`?((t=e.join(""))&&vt.push(t),e.length=0,vt.push(T[N])):e.push(T[N]);return(t=e.join(""))&&vt.push(t),e.length=0,vt},_c=function(e){return ms(e,!0,!0)},Dr=function(e){return typeof e!="string"?e:(e=ms(e,!1,!1),e.length?String(e[0]):"")},Gs=function(e){let t=!0;const s=n.Msg$$module$build$src$core$msg,T=e.match(/%{BKY_[A-Z]\w*}/gi);if(T)for(let N=0;N<T.length;N++){const te=T[N].toUpperCase();s[te.slice(6,-1)]===void 0&&(console.warn("No message string for "+T[N]+" in "+e),t=!1)}return t},Ra=function(e){const t=typeof e=="string"?Dr(e):e;var s=Number(t);if(!isNaN(s)&&0<=s&&360>=s)return{hue:s,hex:bl(s,Fu(),255*Bd())};if(s=fo(t))return{hue:null,hex:s};throw s='Invalid colour: "'+t+'"',e!==t&&(s+=' (from "'+e+'")'),Error(s)},Ws=function(){return ki},jd=function(e){if(ki=e,e===null){let t;(t=document.querySelector("."+Kl))==null||t.remove()}},Ud=function(){const e=oe()||document.body;document.querySelector("."+Kl)?ki=document.querySelector("."+Kl):(ki=document.createElement("div"),ki.className=Kl),e.appendChild(ki)},Vu=function(e,t,s,T){if(yl(),No=e,el=s,s=ki){if(s.style.direction=t?"rtl":"ltr",s.style.display="block",!T&&e instanceof Tr){let xe;T=(xe=e.getSourceBlock())==null?void 0:xe.workspace}var N;gu=(N=T)!=null?N:null;var te;e=(te=T)!=null?te:U(),$o=e.getRenderer().getClassName(),Ci=e.getTheme().getClassName(),$o&&Ze(s,$o),Ci&&Ze(s,Ci)}},yl=function(){if(zu()){No=null;var e=ki;e&&(e.style.display="none",e.style.left="",e.style.top="",el&&el(),el=null,e.textContent="",$o&&(Oe(e,$o),$o=""),Ci&&(Oe(e,Ci),Ci=""),U().markFocused())}},zu=function(){return!!No},qs=function(e){No===e&&yl()},_l=function(e){gu!==null&&gu!==e||yl()},qi=function(e,t,s){ki.style.left=e+"px",ki.style.top=t+"px",ki.style.height=s+"px"},Di=function(e,t,s,T){const N=Gu(e,t,s);e=Ca(e,t,s,T),0>N?qi(e,0,s.height+N):qi(e,N,s.height)},Ca=function(e,t,s,T){return T?Math.min(Math.max(t.right-s.width,e.left),e.right-s.width):Math.max(Math.min(t.left,e.right-s.width),e.left)},Gu=function(e,t,s){return t.bottom+s.height>=e.bottom?t.top-s.height:t.bottom},$c=function(e){return!(e==null||!e.repositionForWindowResize)},$l=function(){$c(No)&&No.repositionForWindowResize()||yl()},Wu=function(){return bu},Ho=function(e){bu=e},vl=function(e,t,s,T){if(Vu(kf,s,Ys,T),t.length){var N=vc(t,s,e);yu=N,ka(N,e,s),setTimeout(function(){N.focus()},1),bu=null}else Vo()},vc=function(e,t,s){const T=new Bh;T.setRole(zr.MENU);for(let N=0;N<e.length;N++){const te=e[N],xe=new zl(te.text);xe.setRightToLeft(t),xe.setRole(zr.MENUITEM),T.addChild(xe),xe.setEnabled(te.enabled),te.enabled&&xe.onAction(function(){Vo(),requestAnimationFrame(()=>{setTimeout(()=>{te.callback(te.scope,s)},0)})},{})}return T},ka=function(e,t,s){const T=pe();t=new mr(t.clientY+T.top,t.clientY+T.top,t.clientX+T.left,t.clientX+T.left),Fd(e);const N=e.getSize();s&&(t.left+=N.width,t.right+=N.width,T.left+=N.width,T.right+=N.width),Di(T,t,N,s),e.focus()},Fd=function(e){var t=Ws();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),Ze(t,"blocklyContextMenu"),ue(t,"contextmenu",null,Yi),e.focus()},Yi=function(e){e.preventDefault(),e.stopPropagation()},Vo=function(){qs(kf),bu=null},Ys=function(){yu&&(yu.dispose(),yu=null)},n.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{n.disable$$module$build$src$core$events$utils();let s;try{s=t instanceof Element?gs(t,e.workspace):In(t,e.workspace);const T=e.getRelativeToSurfaceXY();T.x=e.RTL?T.x-n.config$$module$build$src$core$config.snapRadius:T.x+n.config$$module$build$src$core$config.snapRadius,T.y+=2*n.config$$module$build$src$core$config.snapRadius,s.moveBy(T.x,T.y)}finally{n.enable$$module$build$src$core$events$utils()}return ee()&&!s.isShadow()&&k(new(be(ht.BLOCK_CREATE))(s)),n.setSelected$$module$build$src$core$common(s),s}},El=function(e,t){return t=he(t,e.getParentSvg(),e.getInverseScreenCTM()),t.x/=e.scale,t.y/=e.scale,t},Ia=function(e,t,s){t=El(e,t),Yh.set(e,Bt.difference(s,t))},Si=function(e,t){if(t=El(e,t),e=Yh.get(e),!e)throw Error("Drag not initialized");return Bt.sum(e,t)},Ki=function(e,t=!1){const s=n.createElement$$module$build$src$core$utils$xml("xml");var T=Oo(n.allUsedVarModels$$module$build$src$core$variables(e));T.hasChildNodes()&&s.appendChild(T);for(const N of e.getTopComments())s.appendChild(So(N,t));for(e=e.getTopBlocks(!0),T=0;T<e.length;T++)s.appendChild(Xi(e[T],t));return s},So=function(e,t=!1){const s=n.createElement$$module$build$src$core$utils$xml("comment");t||s.setAttribute("id",e.id),t=e.workspace;const T=e.getRelativeToSurfaceXY();return T.x=t.RTL?t.getWidth()-T.x:T.x,s.setAttribute("x",`${T.x}`),s.setAttribute("y",`${T.y}`),s.setAttribute("w",`${e.getSize().width}`),s.setAttribute("h",`${e.getSize().height}`),e.getText()&&(s.textContent=e.getText()),e.isCollapsed()&&s.setAttribute("collapsed","true"),e.isOwnEditable()||s.setAttribute("editable","false"),e.isOwnMovable()||s.setAttribute("movable","false"),e.isOwnDeletable()||s.setAttribute("deletable","false"),s},Oo=function(e){const t=n.createElement$$module$build$src$core$utils$xml("variables");for(let s=0;s<e.length;s++){const T=e[s],N=n.createElement$$module$build$src$core$utils$xml("variable");N.appendChild(n.createTextNode$$module$build$src$core$utils$xml(T.name)),T.type&&N.setAttribute("type",T.type),N.id=T.getId(),t.appendChild(N)}return t},Xi=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let s=0;if(e.workspace.RTL&&(s=e.workspace.getWidth()),t=zo(e,t),Na(t)){const T=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?s-T.x:T.x))),t.setAttribute("y",String(Math.round(T.y)))}return t},Ks=function(e){if(e.isSerializable()){const t=n.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},Hd=function(e,t){for(let s=0;s<e.inputList.length;s++){const T=e.inputList[s];for(let N=0;N<T.fieldRow.length;N++){const te=Ks(T.fieldRow[N]);te&&t.appendChild(te)}}},zo=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?zo(t):new DocumentFragment;const s=n.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(s.setAttribute("type",e.type),t||(s.id=e.id),e.mutationToDom){var T=e.mutationToDom();T&&(T.hasChildNodes()||T.hasAttributes())&&s.appendChild(T)}if(Hd(e,s),T=e.getCommentText()){var N=e.getIcon(Ur.COMMENT),te=N.getBubbleSize();N=N.bubbleIsVisible();var xe=n.createElement$$module$build$src$core$utils$xml("comment");xe.appendChild(n.createTextNode$$module$build$src$core$utils$xml(T)),xe.setAttribute("pinned",`${N}`),xe.setAttribute("h",String(te.height)),xe.setAttribute("w",String(te.width)),s.appendChild(xe)}for(e.data&&(T=n.createElement$$module$build$src$core$utils$xml("data"),T.appendChild(n.createTextNode$$module$build$src$core$utils$xml(e.data)),s.appendChild(T)),T=0;T<e.inputList.length;T++){te=e.inputList[T];var We=void 0;if(N=!0,te.type!==n.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&te.type!==n.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){xe=te.connection.targetBlock(),te.type===n.inputTypes$$module$build$src$core$inputs$input_types.VALUE?We=n.createElement$$module$build$src$core$utils$xml("value"):te.type===n.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(We=n.createElement$$module$build$src$core$utils$xml("statement"));const rn=te.connection.getShadowDom();!rn||xe&&xe.isShadow()||We.appendChild(Ec(rn,t)),xe&&(xe=zo(xe,t),xe.nodeType===Ai.ELEMENT_NODE&&(We.appendChild(xe),N=!1)),We.setAttribute("name",te.name),N||s.appendChild(We)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&s.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&s.setAttribute("collapsed","true"),e.isEnabled()||s.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||s.setAttribute("deletable","false"),e.isOwnMovable()||s.setAttribute("movable","false"),e.isOwnEditable()||s.setAttribute("editable","false"),We=e.getNextBlock();let vt;return We&&(T=zo(We,t),T.nodeType===Ai.ELEMENT_NODE&&(vt=n.createElement$$module$build$src$core$utils$xml("next"),vt.appendChild(T),s.appendChild(vt))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||We&&We.isShadow()||vt.appendChild(Ec(e,t)),s},Ec=function(e,t){let s=e=e.cloneNode(!0),T;for(;s;)if(t&&s.nodeName==="shadow"&&s.removeAttribute("id"),s.firstChild)s=s.firstChild;else{for(;s&&!s.nextSibling;){T=s,s=s.parentNode;let N;T.nodeType===Ai.TEXT_NODE&&T.data.trim()===""&&((N=s)==null?void 0:N.firstChild)!==T&&Pe(T)}s&&(T=s,s=s.nextSibling,T.nodeType===Ai.TEXT_NODE&&T.data.trim()===""&&Pe(T))}return e},Ir=function(e){return Ge(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},si=function(e){e=Ir(e).split("<");let t="";for(let s=1;s<e.length;s++){const T=e[s];T[0]==="/"&&(t=t.substring(2)),e[s]=t+"<"+T,T[0]!=="/"&&T.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},cr=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=n.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},n.domToWorkspace$$module$build$src$core$xml=function(e,t){let s=0;t.RTL&&(s=t.getWidth());const T=[];qt();const N=n.getGroup$$module$build$src$core$events$utils();N||n.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let te=!0;try{for(let xe=0,We;We=e.childNodes[xe];xe++){const vt=We.nodeName.toLowerCase(),rn=We;if(vt==="block"||vt==="shadow"&&!C()){const kr=gs(rn,t);T.push(kr.id);let Ar;const wo=parseInt((Ar=rn.getAttribute("x"))!=null?Ar:"10",10);let pd;const Kf=parseInt((pd=rn.getAttribute("y"))!=null?pd:"10",10);isNaN(wo)||isNaN(Kf)||kr.moveBy(t.RTL?s-wo:wo,Kf,["create"]),te=!1}else{if(vt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(vt==="comment")Ji(rn,t);else if(vt==="variables"){if(te)bs(rn,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");te=!1}}}}finally{n.setGroup$$module$build$src$core$events$utils(N),t.setResizesEnabled&&t.setResizesEnabled(!0),t.rendered&&wt(),gn()}return k(new(be(ht.FINISHED_LOADING))(t)),T},Ji=function(e,t){var s;const T=(s=e.getAttribute("id"))!=null?s:void 0;s=t.rendered?new pa(t,T):new Kh(t,T);var N;s.setText((N=e.textContent)!=null?N:"");var te;N=parseInt((te=e.getAttribute("x"))!=null?te:"",10);let xe;te=parseInt((xe=e.getAttribute("y"))!=null?xe:"",10),isNaN(N)||isNaN(te)||(N=t.RTL?t.getWidth()-N:N,s.moveTo(new Bt(N,te)));var We;t=parseInt((We=e.getAttribute("w"))!=null?We:"",10);let vt;return We=parseInt((vt=e.getAttribute("h"))!=null?vt:"",10),isNaN(t)||isNaN(We)||s.setSize(new Hn(t,We)),e.getAttribute("collapsed")==="true"&&s.setCollapsed(!0),e.getAttribute("editable")==="false"&&s.setEditable(!1),e.getAttribute("movable")==="false"&&s.setMovable(!1),e.getAttribute("deletable")==="false"&&s.setDeletable(!1),s},xo=function(e,t){if(!t.getBlocksBoundingBox)return n.domToWorkspace$$module$build$src$core$xml(e,t);var s=t.getBlocksBoundingBox();if(e=n.domToWorkspace$$module$build$src$core$xml(e,t),s&&s.top!==s.bottom){var T=s.bottom;s=t.RTL?s.right:s.left;var N=1/0;let te=-1/0,xe=1/0;for(let We=0;We<e.length;We++){const vt=t.getBlockById(e[We]).getRelativeToSurfaceXY();vt.y<xe&&(xe=vt.y),vt.x<N&&(N=vt.x),vt.x>te&&(te=vt.x)}for(T=T-xe+10,s=t.RTL?s-te:s-N,N=0;N<e.length;N++)t.getBlockById(e[N]).moveBy(s,T,["create"])}return e},n.domToBlock$$module$build$src$core$xml=function(e,t){return e=gs(e,t),t.rendered&&wt(),e},gs=function(e,t){n.disable$$module$build$src$core$events$utils();var s=t.getAllVariables();let T;try{if(T=wc(e,t),t.rendered){const N=T,te=T.getDescendants(!1);N.setConnectionTracking(!1);for(let xe=te.length-1;0<=xe;xe--)te[xe].initSvg();for(let xe=te.length-1;0<=xe;xe--)te[xe].queueRender();setTimeout(function(){N.disposed||N.setConnectionTracking(!0)},1),t.resizeContents()}else{const N=T.getDescendants(!1);for(let te=N.length-1;0<=te;te--)N[te].initModel()}}finally{n.enable$$module$build$src$core$events$utils()}if(ee()){for(e=Kn(t,s),t=0;t<e.length;t++)s=e[t],k(new(be(ht.VAR_CREATE))(s));k(new(be(ht.BLOCK_CREATE))(T))}return T},bs=function(e,t){for(let T=0;T<e.children.length;T++){var s=e.children[T];const N=s.getAttribute("type"),te=s.getAttribute("id");if(s=s.textContent,!s)break;t.createVariable(s,N,te)}},Vd=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let s=0;s<e.children.length;s++){const T=e.children[s];if(T.nodeType!==Ai.TEXT_NODE)switch(T.nodeName.toLowerCase()){case"mutation":t.mutation.push(T);break;case"comment":t.comment.push(T);break;case"data":t.data.push(T);break;case"title":case"field":t.field.push(T);break;case"value":case"statement":t.input.push(T);break;case"next":t.next.push(T);break;default:console.warn("Ignoring unknown tag: "+T.nodeName)}}return t},zd=function(e,t){let s=!1;for(let T=0;T<e.length;T++){const N=e[T];t.domToMutation&&(t.domToMutation(N),t.initSvg&&(s=!0))}return s},wl=function(e,t){for(let T=0;T<e.length;T++){var s=e[T];const N=s.textContent,te=s.getAttribute("pinned")==="true";let xe;const We=parseInt((xe=s.getAttribute("w"))!=null?xe:"50",10);let vt;s=parseInt((vt=s.getAttribute("h"))!=null?vt:"50",10),t.setCommentText(N);const rn=t.getIcon(Ur.COMMENT);isNaN(We)||isNaN(s)||rn.setBubbleSize(new Hn(We,s)),rn.setBubbleVisible(te),setTimeout(()=>rn.setBubbleVisible(te),1)}},Tl=function(e,t){for(let s=0;s<e.length;s++)t.data=e[s].textContent},Sl=function(e,t){for(let s=0;s<e.length;s++){const T=e[s],N=T.getAttribute("name");N?Tc(t,N,T):console.warn(`Ignoring unnamed field in block ${t.type}`)}},Ma=function(e){let t=null,s=null;for(let T=0;T<e.childNodes.length;T++){const N=e.childNodes[T];Na(N)&&(N.nodeName.toLowerCase()==="block"?t=N:N.nodeName.toLowerCase()==="shadow"&&(s=N))}return{childBlockElement:t,childShadowElement:s}},Gd=function(e,t,s,T){for(let te=0;te<e.length;te++){var N=e[te];const xe=N.getAttribute("name"),We=xe?s.getInput(xe):null;if(!We){console.warn("Ignoring non-existent input "+xe+" in block "+T);break}if(N=Ma(N),N.childBlockElement){if(!We.connection)throw TypeError("Input connection does not exist.");wc(N.childBlockElement,t,We.connection,!1)}if(N.childShadowElement){let vt;(vt=We.connection)==null||vt.setShadowDom(N.childShadowElement)}}},qu=function(e,t,s){for(let T=0;T<e.length;T++){const N=Ma(e[T]);if(N.childBlockElement){if(!s.nextConnection)throw TypeError("Next statement does not exist.");if(s.nextConnection.isConnected())throw TypeError("Next statement is already connected.");wc(N.childBlockElement,t,s.nextConnection,!0)}N.childShadowElement&&s.nextConnection&&s.nextConnection.setShadowDom(N.childShadowElement)}},wc=function(e,t,s,T){var N;const te=e.getAttribute("type");if(!te)throw TypeError("Block type unspecified: "+e.outerHTML);var xe=(N=e.getAttribute("id"))!=null?N:void 0;N=t.newBlock(te,xe),xe=Vd(e);const We=zd(xe.mutation,N);if(wl(xe.comment,N),Tl(xe.data,N),s)if(T)if(N.previousConnection)s.connect(N.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(N.outputConnection)s.connect(N.outputConnection);else if(N.previousConnection)s.connect(N.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Sl(xe.field,N),Gd(xe.input,t,N,te),qu(xe.next,t,N),We&&N.initSvg(),(t=e.getAttribute("inline"))&&N.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&N.setDisabledReason(t==="true"||t==="disabled",di),t=e.getAttribute("disabled-reasons"),t!==null)for(var vt of t.split(","))N.setDisabledReason(!0,decodeURIComponent(vt));if((vt=e.getAttribute("deletable"))&&N.setDeletable(vt==="true"),(vt=e.getAttribute("movable"))&&N.setMovable(vt==="true"),(vt=e.getAttribute("editable"))&&N.setEditable(vt==="true"),(vt=e.getAttribute("collapsed"))&&N.setCollapsed(vt==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=N.getChildren(!1),vt=0;vt<e.length;vt++)if(!e[vt].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");N.setShadow(!0)}return N},Tc=function(e,t,s){const T=e.getField(t);T?T.fromXml(s):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},Wd=function(e){for(let t=0;t<e.childNodes.length;t++){const s=e.childNodes[t];if(s.nodeName.toLowerCase()==="next"){e.removeChild(s);break}}},Na=function(e){return e.nodeType===Ai.ELEMENT_NODE},Sc=function(e){if(!(100<e.getDescendants(!1).length)){var t=e.workspace,s=e.getSvgRoot();t.getAudioManager().play("delete");var T=e.getRelativeToSurfaceXY(),N=s.cloneNode(!0);N.setAttribute("transform","translate("+T.x+","+T.y+")");var te;(te=t.getLayerManager())==null||te.appendToAnimationLayer({getSvgRoot:()=>N}),Xs(N,{x:T.x,y:T.y,width:e.width,height:e.height},t.RTL,new Date)}},Xs=function(e,t,s,T){const N=(new Date().getTime()-T.getTime())/150;1<N?Pe(e):(e.setAttribute("transform","translate("+(t.x+(s?-1:1)*t.width/2*N)+","+(t.y+t.height/2*N)+") scale("+(1-N)+")"),setTimeout(Xs,10,e,t,s,T))},Js=function(e){var t=e.workspace;const s=t.scale;if(t.getAudioManager().play("click"),!(1>s)){var T=t.getSvgXY(e.getSvgRoot());e.outputConnection?(T.x+=(e.RTL?3:-3)*s,T.y+=13*s):e.previousConnection&&(T.x+=(e.RTL?-23:23)*s,T.y+=3*s);var N=Ue(rt.CIRCLE,{cx:T.x,cy:T.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());e=Ue(rt.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*s},N),t=Ue(rt.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},N),e.beginElement(),t.beginElement(),setTimeout(()=>void Pe(N),150)}},Ol=function(e){if(ys(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),As=e,La(e,t,new Date,0)}},La=function(e,t,s,T){const N=[.66,1,.66,0,-.66,-1,-.66,0];let te="";s.getTime()+200>new Date().getTime()&&(te=`skewX(${Math.round(N[T%N.length]*t)})`,Jl=setTimeout(La,15,e,t,s,T+1)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${te}`)},ys=function(){As&&(Jl&&(clearTimeout(Jl),Jl=null),As.getSvgRoot().setAttribute("transform",As.getTranslation()),As=null)},Zs=function(e){return e.getRelativeToSurfaceXY!==void 0&&e.isMovable!==void 0&&e.startDrag!==void 0&&e.drag!==void 0&&e.endDrag!==void 0&&e.revertDrag!==void 0},Go=function(e,t){for(const s in t)e[s]=t[s]!==null&&typeof t[s]=="object"?Go(e[s]||Object.create(null),t[s]):t[s];return e},bi=function(e,t){l(It.FIELD,e,t)},qd=function(e){d(It.FIELD,e)},n.fromJson$$module$build$src$core$field_registry=function(e){return Qh.fromJsonInternal(e)},Da=function(e){const t=g(It.FIELD,e.type);return t?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},n.register$$module$build$src$core$extensions=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(Zl[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');Zl[e]=t},n.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');n.register$$module$build$src$core$extensions(e,function(){this.mixin(t)})},n.registerMutator$$module$build$src$core$extensions=function(e,t,s,T){const N='Error when registering mutator "'+e+'": ';qo(N,t);const te=Wo(t,N);if(s&&typeof s!="function")throw Error(N+'Extension "'+e+'" is not a function');n.register$$module$build$src$core$extensions(e,function(){te&&this.setMutator(new n.MutatorIcon$$module$build$src$core$icons$mutator_icon(T||[],this)),this.mixin(t),s&&s.apply(this)})},Oc=function(e){Yu(e)?delete Zl[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Yu=function(e){return!!Zl[e]},xl=function(e,t,s){const T=Zl[e];if(typeof T!="function")throw Error('Error: Extension "'+e+'" not found.');let N;if(s?Ku(e,t):N=po(t),T.apply(t),s)qo('Error after applying mutator "'+e+'": ',t);else if(!Zr(N,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},Ku=function(e,t){if(po(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},Zi=function(e,t){return xc(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},Ao=function(e,t){return xc(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},Wo=function(e,t){return xc(e.compose,e.decompose,t+" compose/decompose")},xc=function(e,t,s){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(s+" must be a function");return!0}if(!e&&!t)return!1;throw Error(s+"Must have both or neither functions")},qo=function(e,t){const s=Zi(t,e),T=Ao(t,e);if(!s&&!T)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");Wo(t,e)},po=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},Zr=function(e,t){if(t=po(t),t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(e[s]!==t[s])return!1;return!0},Ac=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},n.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const s=[];return function(){s.includes(this.type)||(ip(this,e,t),s.push(this.type)),this.setTooltip((function(){const T=String(this.getFieldValue(e));return Dr(t[T])}).bind(this))}},ip=function(e,t,s){var T=e.getField(t);if(T instanceof Ii&&!T.isOptionListDynamic()){T=T.getOptions();for(const[,N]of T)s[N]===void 0&&console.warn(`No tooltip mapping for value ${N} of field ${t} of block type ${e.type}.`)}},n.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return function(){this.setTooltip((function(){const s=this.getField(t);return Dr(e).replace("%1",s?s.getText():"")}).bind(this))}},op=function(){const e=this.tooltip;this.setTooltip((function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}).bind(this))},cn=function(e,t){return" "+e+","+t+" "},pr=function(e,t){return" "+e+t.join("")},Wr=function(e,t){return" M "+e+","+t+" "},yr=function(e,t){return" m "+e+","+t+" "},Pi=function(e,t){return" l "+e+","+t+" "},Qs=function(e){return" l"+e.join("")},Zt=function(e,t){return" "+e+" "+t+" "},xr=function(e,t,s,T){return e+" "+s+" "+s+" "+t+T},Yd=function(e,t){l(It.ICON,e.toString(),t)},Kd=function(e){d(It.ICON,e)},ea=function(e){return e.getProcedureModel!==void 0&&e.doProcedureUpdate!==void 0&&e.isProcedureDef!==void 0},Rc=function(e){return e.startPublishing!==void 0&&e.stopPublishing!==void 0},Yo=function(e){const t=e.getProcedureMap().getProcedures().filter(T=>!T.getReturnTypes()).map(T=>[T.getName(),T.getParameters().map(N=>N.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(T=>{!ea(T)&&Y(T)&&t.push(T.getProcedureDef())});const s=e.getProcedureMap().getProcedures().filter(T=>!!T.getReturnTypes()).map(T=>[T.getName(),T.getParameters().map(N=>N.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(T=>{!ea(T)&&Y(T)&&s.push(T.getProcedureDef())}),t.sort(Cc),s.sort(Cc),[t,s]},Cc=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},n.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||n.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!kc(e,t.workspace,t);){const s=e.match(/^(.*?)(\d+)$/);e=s?s[1]+(parseInt(s[2])+1):e+"2"}return e},kc=function(e,t,s){return!Xu(e,t,s)},Xu=function(e,t,s){for(const T of t.getAllBlocks(!1))if(T!==s&&Y(T)&&n.Names$$module$build$src$core$names.equals(T.getProcedureDef()[0],e))return!0;s=s&&ea(s)?s==null?void 0:s.getProcedureModel():void 0;for(const T of t.getProcedureMap().getProcedures())if(T!==s&&n.Names$$module$build$src$core$names.equals(T.getName(),e))return!0;return!1},n.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new Cr;e=e.trim();const s=n.findLegalName$$module$build$src$core$procedures(e,t);ea(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(s);const T=this.getValue();if(T!==e&&T!==s)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const N=e[t];N.renameProcedure&&N.renameProcedure(T,s)}return s},Ro=function(e){function t(te,xe){for(let vt=0;vt<te.length;vt++){var We=te[vt][0];const rn=te[vt][1],kr=n.createElement$$module$build$src$core$utils$xml("block");kr.setAttribute("type",xe),kr.setAttribute("gap","16");const Ar=n.createElement$$module$build$src$core$utils$xml("mutation");for(Ar.setAttribute("name",We),kr.appendChild(Ar),We=0;We<rn.length;We++){const wo=n.createElement$$module$build$src$core$utils$xml("arg");wo.setAttribute("name",rn[We]),Ar.appendChild(wo)}s.push(kr)}}const s=[];if(Oi.procedures_defnoreturn){var T=n.createElement$$module$build$src$core$utils$xml("block");T.setAttribute("type","procedures_defnoreturn"),T.setAttribute("gap","16");var N=n.createElement$$module$build$src$core$utils$xml("field");N.setAttribute("name","NAME"),N.appendChild(n.createTextNode$$module$build$src$core$utils$xml(n.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),T.appendChild(N),s.push(T)}return Oi.procedures_defreturn&&(T=n.createElement$$module$build$src$core$utils$xml("block"),T.setAttribute("type","procedures_defreturn"),T.setAttribute("gap","16"),N=n.createElement$$module$build$src$core$utils$xml("field"),N.setAttribute("name","NAME"),N.appendChild(n.createTextNode$$module$build$src$core$utils$xml(n.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),T.appendChild(N),s.push(T)),Oi.procedures_ifreturn&&(T=n.createElement$$module$build$src$core$utils$xml("block"),T.setAttribute("type","procedures_ifreturn"),T.setAttribute("gap","16"),s.push(T)),s.length&&s[s.length-1].setAttribute("gap","24"),e=Yo(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),s},Fn=function(e){var t=[],s=e.getBlocksByType("procedures_mutatorarg",!1);for(let te=0,xe;xe=s[te];te++)t.push(xe.getFieldValue("NAME"));s=n.createElement$$module$build$src$core$utils$xml("xml");const T=n.createElement$$module$build$src$core$utils$xml("block");T.setAttribute("type","procedures_mutatorarg");const N=n.createElement$$module$build$src$core$utils$xml("field");N.setAttribute("name","NAME"),t=$t(n.DEFAULT_ARG$$module$build$src$core$procedures,t),t=n.createTextNode$$module$build$src$core$utils$xml(t),N.appendChild(t),T.appendChild(N),s.appendChild(T),e.updateToolbox(s)},_r=function(e){if(A(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=P(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.getIcon(n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Fn(e),e.addChangeListener(qr))}},qr=function(e){(b(e)||m(e)||p(e)||_(e))&&(e=P(e.workspaceId),Fn(e))},Al=function(e,t){return t.getAllBlocks(!1).filter(s=>Pa(s,e)||B(s)&&n.Names$$module$build$src$core$names.equals(s.getProcedureCall(),e))},Pa=function(e,t){return ea(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&n.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},n.mutateCallers$$module$build$src$core$procedures=function(e){const t=C();var s=e.getProcedureDef()[0];const T=e.mutationToDom(!0);e=Al(s,e.workspace);for(let te=0,xe;xe=e[te];te++){s=(s=xe.mutationToDom())&&Ge(s),xe.domToMutation&&xe.domToMutation(T);var N=xe.mutationToDom();N=N&&Ge(N),s!==N&&(n.setRecordUndo$$module$build$src$core$events$utils(!1),k(new(be(ht.BLOCK_CHANGE))(xe,"mutation",null,s,N)),n.setRecordUndo$$module$build$src$core$events$utils(t))}},n.getDefinition$$module$build$src$core$procedures=function(e,t){for(const s of t.getAllBlocks(!1))if(ea(s)&&s.isProcedureDef()&&n.Names$$module$build$src$core$names.equals(s.getProcedureModel().getName(),e)||Y(s)&&n.Names$$module$build$src$core$names.equals(s.getProcedureDef()[0],e))return s;return null},Ko=function(e){return e.isDynamic},Ic=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},Rl=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},Ba=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},sp=function(e,t){let s=null;t=t.outputConnection;const T=t==null?void 0:t.getConnectionChecker();for(let N=0,te;te=e.inputList[N];N++){const xe=te.connection;let We;if(xe&&((We=T)!=null&&We.canConnect(t,xe,!1))){if(s)return null;s=xe}}return s},Hr=function(e,t){let s;for(;s=sp(e,t);)if(e=s.targetBlock(),!e||e.isShadow())return s;return null},Mc=function(e){return e.getType!==void 0&&e.initView!==void 0&&e.dispose!==void 0&&e.getWeight!==void 0&&e.getSize!==void 0&&e.applyColour!==void 0&&e.hideForInsertionMarker!==void 0&&e.updateEditable!==void 0&&e.updateCollapsed!==void 0&&e.isShownWhenCollapsed!==void 0&&e.setOffsetInBlock!==void 0&&e.onLocationChange!==void 0&&e.onClick!==void 0},Ju=function(e){return Mc(e)&&dl(e)&&Tn(e)&&e.setText!==void 0&&e.getText!==void 0&&e.setBubbleSize!==void 0&&e.getBubbleSize!==void 0&&e.getType()===Ur.COMMENT},Cl=function(e){let t=e.outputConnection;return(!t||e.previousConnection&&e.previousConnection.isConnected())&&(t=e.previousConnection),t},kl=function(e,t){l(It.RENDERER,e,t)},ap=function(e){d(It.RENDERER,e)},Nc=function(e,t,s){return e=new(u(It.RENDERER,e))(e),e.init(t,s),e},Lc=function(e){Ye(e.getTargetWorkspace(),void 0,"String")},Dc=function(e){Ye(e.getTargetWorkspace(),void 0,"Number")},yi=function(e){Ye(e.getTargetWorkspace(),void 0,"Colour")},Pr=function(e){let t=[],s=document.createElement("button");return s.setAttribute("text",n.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),s.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(s),s=document.createElement("button"),s.setAttribute("text",n.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),s.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(s),s=document.createElement("button"),s.setAttribute("text",n.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),s.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(s),e.registerButtonCallback("CREATE_VARIABLE_STRING",Lc),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Dc),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",yi),e=Il(e),t=t.concat(e)},Il=function(e){e=e.getAllVariables();const t=[];if(0<e.length){if(Oi.variables_set_dynamic){var s=e[e.length-1];const T=n.createElement$$module$build$src$core$utils$xml("block");T.setAttribute("type","variables_set_dynamic"),T.setAttribute("gap","24"),T.appendChild(On(s)),t.push(T)}if(Oi.variables_get_dynamic){e.sort(so.compareByName);for(let T=0,N;N=e[T];T++)s=n.createElement$$module$build$src$core$utils$xml("block"),s.setAttribute("type","variables_get_dynamic"),s.setAttribute("gap","8"),s.appendChild(On(N)),t.push(s)}}return t},Ml=function(e,t){const s=e.workspace,T=n.config$$module$build$src$core$config.snapRadius,N=Bt.difference(t,e.getRelativeToSurfaceXY()),te=new Bt(0,0),xe=s.getAllBlocks(!1).filter(We=>We.id!=e.id).map(We=>We.getRelativeToSurfaceXY());for(;Pc(Bt.sum(t,te),xe)||Zu(e,Bt.sum(N,te),T);)s.RTL?te.translate(-T,2*T):te.translate(T,2*T);e.moveTo(Bt.sum(t,te))},Pc=function(e,t){return t.some(s=>1>=Math.abs(s.x-e.x)&&1>=Math.abs(s.y-e.y))},Zu=function(e,t,s){return e.getConnections_(!1).some(T=>!!T.closest(s,t).connection)},Bi=function(e,t,s){const T=s.getBoundingRectangle(),N=T.right-T.left,te=fl(t.top,T.top,t.top+t.height-(T.bottom-T.top))-T.top;let xe=t.left;return t=t.left+t.width-N,e.RTL?xe=Math.min(t,xe):t=Math.max(xe,t),(e=fl(xe,T.left,t)-T.left)||te?(s.moveBy(e,te,["inbounds"]),!0):!1},Nl=function(e){return t=>{var s=e.getMetricsManager();if(s.hasFixedEdges()&&!e.isDragging()){var T;if(Yc.includes((T=t.type)!=null?T:"")){T=s.getScrollMetrics(!0);const N=Qu(e,t);N&&(s=n.getGroup$$module$build$src$core$events$utils()||!1,n.setGroup$$module$build$src$core$events$utils(t.group),Bi(e,T,N)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),n.setGroup$$module$build$src$core$events$utils(s))}else R(t)&&t.scale&&t.oldScale&&t.scale>t.oldScale&&Ll(e)}}},Qu=function(e,t){let s=null;switch(t.type){case ht.BLOCK_CREATE:case ht.BLOCK_MOVE:(s=e.getBlockById(t.blockId))&&(s=s.getRootBlock());break;case ht.COMMENT_CREATE:case ht.COMMENT_MOVE:case ht.COMMENT_RESIZE:s=e.getCommentById(t.commentId)}return s},Ll=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var s=e.getTopBoundedElements();for(let T=0,N;N=s[T];T++)Bi(e,t,N)}},Qi=function(e){return e.isDeletable!==void 0&&e.dispose!==void 0&&e.setDeleteStyle!==void 0},Xd=function(e){const t=e.toCopyData();ei=t;let s;return or=(s=e.workspace)!=null?s:null,t},_s=function(e,t,s){return e&&t?eh(e,t,s):ei&&or?eh(ei,or):null},eh=function(e,t,s){let T;t=t.isMutator?t:(T=t.getRootWorkspace())!=null?T:t;let N,te;return(te=(N=g(It.PASTER,e.paster,!1))==null?void 0:N.paste(e,t,s))!=null?te:null},Jd=function(e){const t=e.toCopyData();return t?_s(t,e.workspace):null},Dl=function(e){return e.toCopyData!==void 0},Bc=function(){Kt.registry.register({name:va.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[Dn.ESC]})},th=function(){Kt.registry.register({name:va.DELETE,preconditionFn(e){const t=K();return!e.options.readOnly&&t!=null&&Qi(t)&&t.isDeletable()&&!Rs.inProgress()},callback(e,t){return t.preventDefault(),e=K(),e instanceof J?e.checkAndDelete():Qi(e)&&e.isDeletable()&&(n.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),n.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[Dn.DELETE,Dn.BACKSPACE]})},Zd=function(){const e=Kt.registry.createSerializedKey(Dn.C,[Dn.CTRL]),t=Kt.registry.createSerializedKey(Dn.C,[Dn.ALT]),s=Kt.registry.createSerializedKey(Dn.C,[Dn.META]);Kt.registry.register({name:va.COPY,preconditionFn(T){const N=K();return!T.options.readOnly&&!Rs.inProgress()&&N!=null&&Qi(N)&&N.isDeletable()&&Zs(N)&&N.isMovable()&&Dl(N)},callback(T,N){return N.preventDefault(),T.hideChaff(),N=K(),!N||!Dl(N)?!1:(oc=N.toCopyData(),sc=N.workspace instanceof mi?N.workspace:T,hd=Zs(N)?N.getRelativeToSurfaceXY():null,!!oc)},keyCodes:[e,t,s]})},nh=function(){const e=Kt.registry.createSerializedKey(Dn.X,[Dn.CTRL]),t=Kt.registry.createSerializedKey(Dn.X,[Dn.ALT]),s=Kt.registry.createSerializedKey(Dn.X,[Dn.META]);Kt.registry.register({name:va.CUT,preconditionFn(T){const N=K();return!T.options.readOnly&&!Rs.inProgress()&&N!=null&&Qi(N)&&N.isDeletable()&&Zs(N)&&N.isMovable()&&!N.workspace.isFlyout},callback(T){const N=K();return N instanceof J?(oc=N.toCopyData(),sc=T,hd=N.getRelativeToSurfaceXY(),N.checkAndDelete(),!0):Qi(N)&&N.isDeletable()&&Dl(N)?(oc=N.toCopyData(),sc=T,hd=Zs(N)?N.getRelativeToSurfaceXY():null,N.dispose(),!0):!1},keyCodes:[e,t,s]})},rh=function(){const e=Kt.registry.createSerializedKey(Dn.V,[Dn.CTRL]),t=Kt.registry.createSerializedKey(Dn.V,[Dn.ALT]),s=Kt.registry.createSerializedKey(Dn.V,[Dn.META]);Kt.registry.register({name:va.PASTE,preconditionFn(T){return!T.options.readOnly&&!Rs.inProgress()},callback(){if(!oc||!sc)return!1;if(!hd)return!!_s(oc,sc);const{left:T,top:N,width:te,height:xe}=sc.getMetricsManager().getViewMetrics(!0);if(new mr(N,N+xe,T,T+te).contains(hd.x,hd.y))return!!_s(oc,sc);const We=new Bt(T+te/2,N+xe/2);return!!_s(oc,sc,We)},keyCodes:[e,t,s]})},ih=function(){const e=Kt.registry.createSerializedKey(Dn.Z,[Dn.CTRL]),t=Kt.registry.createSerializedKey(Dn.Z,[Dn.ALT]),s=Kt.registry.createSerializedKey(Dn.Z,[Dn.META]);Kt.registry.register({name:va.UNDO,preconditionFn(T){return!T.options.readOnly&&!Rs.inProgress()},callback(T,N){return T.hideChaff(),T.undo(!1),N.preventDefault(),!0},keyCodes:[e,t,s]})},jc=function(){const e=Kt.registry.createSerializedKey(Dn.Z,[Dn.SHIFT,Dn.CTRL]),t=Kt.registry.createSerializedKey(Dn.Z,[Dn.SHIFT,Dn.ALT]),s=Kt.registry.createSerializedKey(Dn.Z,[Dn.SHIFT,Dn.META]),T=Kt.registry.createSerializedKey(Dn.Y,[Dn.CTRL]);Kt.registry.register({name:va.REDO,preconditionFn(N){return!Rs.inProgress()&&!N.options.readOnly},callback(N,te){return N.hideChaff(),N.undo(!0),te.preventDefault(),!0},keyCodes:[e,t,s,T]})},oh=function(){Bc(),th(),Zd(),nh(),rh(),ih(),jc()},sh=function(e){const t=e.saveState();return e.getParameters().length&&(t.parameters=e.getParameters().map(s=>s.saveState())),t},ah=function(e,t,s,T){if(e=e.loadState(s,T),!s.parameters)return e;for(const[N,te]of s.parameters.entries())e.insertParameter(t.loadState(te,T),N);return e},Qd=function(e){const t=Object.create(null),s=$(It.SERIALIZER,!0);for(const T in s){let N;const te=(N=s[T])==null?void 0:N.save(e);te&&(t[T]=te)}return t},ef=function(e,t,{recordUndo:s=!1}={}){var T=$(It.SERIALIZER,!0);if(T){T=Object.entries(T).sort((te,xe)=>xe[1].priority-te[1].priority);var N=C();n.setRecordUndo$$module$build$src$core$events$utils(s),(s=n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),qt(),t instanceof mi&&t.setResizesEnabled(!1);for(const[,te]of T.reverse()){let xe;(xe=te)==null||xe.clear(t)}for(const[te,xe]of T.reverse())if(e[te]){let We;(We=xe)==null||We.load(e[te],t)}t instanceof mi&&t.setResizesEnabled(!0),gn(),k(new(be(ht.FINISHED_LOADING))(t)),n.setGroup$$module$build$src$core$events$utils(s),n.setRecordUndo$$module$build$src$core$events$utils(N)}},lp=function(e,t){let s=null;s=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var T;if(!document.contains(s)&&document!==((T=s)==null?void 0:T.ownerDocument))throw Error("Error: container is not in current document");e=new Vi(t||{}),T=document.createElement("div"),Ze(T,"injectionDiv"),t!=null&&t.rtl&&Ze(T,"blocklyRTL"),T.tabIndex=0,pt(T,Kr.LABEL,n.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),s.appendChild(T),t=tf(T,e);const N=ja(T,t,e);return nf(N),Z(N),$e(N),T.addEventListener("focusin",function(){Z(N)}),ue(T,"keydown",null,Ua),ue(uc(),"keydown",null,Ua),(t=Ws())&&ue(t,"keydown",null,Ua),N},tf=function(e,t){e.setAttribute("dir","LTR"),ot(t.hasCss,t.pathToMedia),e=Ue(rt.SVG,{xmlns:go,"xmlns:html":Io,"xmlns:xlink":ji,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const s=Ue(rt.DEFS,{},e),T=String(Math.random()).substring(2);return t.gridPattern=Jh.createDom(T,t.gridOptions,s),e},ja=function(e,t,s){s.parentWorkspace=null,s=new mi(s);const T=s.options;s.scale=T.zoomOptions.startScale,t.appendChild(s.createDom("blocklyMainBackground",e));var N=s.getRenderer().getClassName();return N&&Ze(e,N),(N=s.getTheme().getClassName())&&Ze(e,N),!T.hasCategories&&T.languageTree&&(e=s.addFlyout(rt.SVG),ft(e,t)),T.hasTrashcan&&s.addTrashcan(),T.zoomOptions&&T.zoomOptions.controls&&s.addZoomControls(),s.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),s.translate(0,0),s.addChangeListener(Nl(s)),$e(s),Ud(),cc(),bc(),s},nf=function(e){const t=e.options;var s=e.getParentSvg();if(ue(s.parentNode,"contextmenu",null,function(T){Ne(T)||T.preventDefault()}),s=ue(window,"resize",null,function(){fs(),e.hideComponents(!0),ju(),$l(),$e(e),Ll(e)}),e.setResizeHandlerWrapper(s),Uc(),t.languageTree){s=e.getToolbox();const T=e.getFlyout(!0);s?s.init():T&&(T.init(e),T.show(t.languageTree),typeof T.scrollToStart=="function"&&T.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new zp(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&rf(t.pathToMedia,e)},Ua=function(e){const t=U();t&&!(Ne(e)||t.rendered&&!t.isVisible())&&Kt.registry.onKeyDown(t,e)},Uc=function(){Em||(ue(document,"scroll",null,function(){const e=L();for(let t=0,s;s=e[t];t++)s instanceof mi&&s.updateInverseScreenCTM()}),Ee(document,"touchend",null,re),Ee(document,"touchcancel",null,re)),Em=!0},rf=function(e,t){function s(){for(;N.length;){const te=N.pop();te&&Ae(te)}T.preload()}const T=t.getAudioManager();T.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),T.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),T.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const N=[];N.push(ue(document,"pointermove",null,s,!0)),N.push(ue(document,"touchstart",null,s,!0))},Fc=function(){Mn.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:Mn.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},lh=function(){Mn.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:Mn.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},ch=function(){Mn.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:Mn.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},uh=function(e,t){function s(te){N--,te.setCollapsed(e),N===0&&n.setGroup$$module$build$src$core$events$utils(!1)}let T=0,N=0;n.setGroup$$module$build$src$core$events$utils(!0);for(let te=0;te<t.length;te++){let xe=t[te];for(;xe;)N++,setTimeout(s.bind(null,xe),T),xe=xe.getNextBlock(),T+=10}},hh=function(){Mn.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let s=e[t];for(;s;){if(!s.isCollapsed())return"enabled";s=s.getNextBlock()}}return"disabled"}return"hidden"},callback(e){uh(!0,e.workspace.getTopBlocks(!0))},scopeType:Mn.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Hc=function(){Mn.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let s=e[t];for(;s;){if(s.isCollapsed())return"enabled";s=s.getNextBlock()}}return"disabled"}return"hidden"},callback(e){uh(!1,e.workspace.getTopBlocks(!0))},scopeType:Mn.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},dh=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let s=0;s<e.length;s++)dh(e[s],t)}},Vc=function(e){const t=[];e=e.getTopBlocks(!0);for(let s=0;s<e.length;s++)dh(e[s],t);return t},Fa=function(e,t){t?n.setGroup$$module$build$src$core$events$utils(t):(n.setGroup$$module$build$src$core$events$utils(!0),t=n.getGroup$$module$build$src$core$events$utils());const s=e.shift();s&&(s.isDeadOrDying()?Fa(e,t):(s.dispose(!1,!0),setTimeout(Fa,10,e,t))),n.setGroup$$module$build$src$core$events$utils(!1)},fh=function(){Mn.registry.register({displayText(e){return e.workspace?(e=Vc(e.workspace).length,e===1?n.Msg$$module$build$src$core$msg.DELETE_BLOCK:n.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&0<Vc(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=Vc(e.workspace);2>t.length?Fa(t):fr(n.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(s){s&&Fa(t)})}},scopeType:Mn.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},of=function(){Fc(),lh(),ch(),hh(),Hc(),fh()},sf=function(){Mn.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var t=e.block.toCopyData();t&&_s(t,e.block.workspace)}},scopeType:Mn.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},zc=function(){Mn.registry.register({displayText(e){return e.block.hasIcon(Eo.TYPE)?n.Msg$$module$build$src$core$msg.REMOVE_COMMENT:n.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(Eo.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:Mn.ScopeType.BLOCK,id:"blockComment",weight:2})},ph=function(){Mn.registry.register({displayText(e){return e.block.getInputsInline()?n.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:n.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof Mp||e.inputList[t]instanceof Mp))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:Mn.ScopeType.BLOCK,id:"blockInline",weight:3})},mh=function(){Mn.registry.register({displayText(e){return e.block.isCollapsed()?n.Msg$$module$build$src$core$msg.EXPAND_BLOCK:n.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:Mn.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Gc=function(){Mn.registry.register({displayText(e){return e.block.hasDisabledReason(di)?n.Msg$$module$build$src$core$msg.ENABLE_BLOCK:n.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var t=e.getDisabledReasons();return t=t.size>(t.has(di)?1:0),e.getInheritedDisabled()||t?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const t=n.getGroup$$module$build$src$core$events$utils();t||n.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(di),di),n.setGroup$$module$build$src$core$events$utils(t)},scopeType:Mn.ScopeType.BLOCK,id:"blockDisable",weight:5})},gh=function(){Mn.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?n.Msg$$module$build$src$core$msg.DELETE_BLOCK:n.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:Mn.ScopeType.BLOCK,id:"blockDelete",weight:6})},bh=function(){Mn.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:Mn.ScopeType.BLOCK,id:"blockHelp",weight:7})},af=function(){Mn.registry.register({displayText:()=>n.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isDeletable()?"enabled":"hidden"},callback(e){n.setGroup$$module$build$src$core$events$utils(!0);let t;(t=e.comment)==null||t.dispose(),n.setGroup$$module$build$src$core$events$utils(!1)},scopeType:Mn.ScopeType.COMMENT,id:"commentDelete",weight:6})},lf=function(){Mn.registry.register({displayText:()=>n.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var t=e.comment.toCopyData();t&&_s(t,e.comment.workspace)}},scopeType:Mn.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},yh=function(){Mn.registry.register({displayText:()=>n.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:e=>{let t;return(t=e.workspace)!=null&&t.isMutator?"hidden":"enabled"},callback:(e,t)=>{if(e=e.workspace){n.setGroup$$module$build$src$core$events$utils(!0);var s=new pa(e);s.setText(n.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),s.moveTo(Pl(new Bt(t.clientX,t.clientY),e)),n.setSelected$$module$build$src$core$common(s),n.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:Mn.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},Pl=function(e,t){var s=t.getInjectionDiv().getBoundingClientRect();return e=new Bt(e.x-s.left,e.y-s.top),s=t.getOriginOffsetInPixels(),e=Bt.difference(e,s),e.scale(1/t.scale),e},_h=function(){sf(),zc(),ph(),mh(),Gc(),gh(),bh()},Wc=function(){lf(),af(),yh()},$h=function(){of(),_h()},cf=function(e){return e.paste!==void 0},Co=function(e){return e.getSvgRoot!==void 0},ta=function(e){return typeof e.id=="string"&&e.workspace!==void 0&&e.select!==void 0&&e.unselect!==void 0},$s=function(e){return e.isSelectable()},na=function(e){U().hideChaff(e)},kt=kt||{},kt.scope={},kt.ASSUME_ES5=!1,kt.ASSUME_NO_NATIVE_MAP=!1,kt.ASSUME_NO_NATIVE_SET=!1,kt.SIMPLE_FROUND_POLYFILL=!1,kt.ISOLATE_POLYFILLS=!1,kt.FORCE_POLYFILL_PROMISE=!1,kt.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,kt.defineProperty=kt.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,s){return e==Array.prototype||e==Object.prototype||(e[t]=s.value),e},kt.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var t=0;t<e.length;++t){var s=e[t];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")},kt.global=kt.getGlobal(this),kt.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",kt.TRUST_ES6_POLYFILLS=!kt.ISOLATE_POLYFILLS||kt.IS_SYMBOL_NATIVE,kt.polyfills={},kt.propertyToPolyfillSymbol={},kt.POLYFILL_PREFIX="$jscp$",kt.polyfill=function(e,t,s,T){t&&(kt.ISOLATE_POLYFILLS?kt.polyfillIsolated(e,t,s,T):kt.polyfillUnisolated(e,t,s,T))},kt.polyfillUnisolated=function(e,t,s,T){for(s=kt.global,e=e.split("."),T=0;T<e.length-1;T++){var N=e[T];if(!(N in s))return;s=s[N]}e=e[e.length-1],T=s[e],t=t(T),t!=T&&t!=null&&kt.defineProperty(s,e,{configurable:!0,writable:!0,value:t})},kt.polyfillIsolated=function(e,t,s,T){var N=e.split(".");e=N.length===1,T=N[0],T=!e&&T in kt.polyfills?kt.polyfills:kt.global;for(var te=0;te<N.length-1;te++){var xe=N[te];if(!(xe in T))return;T=T[xe]}N=N[N.length-1],s=kt.IS_SYMBOL_NATIVE&&s==="es6"?T[N]:null,t=t(s),t!=null&&(e?kt.defineProperty(kt.polyfills,N,{configurable:!0,writable:!0,value:t}):t!==s&&(kt.propertyToPolyfillSymbol[N]===void 0&&(s=1e9*Math.random()>>>0,kt.propertyToPolyfillSymbol[N]=kt.IS_SYMBOL_NATIVE?kt.global.Symbol(N):kt.POLYFILL_PREFIX+s+"$"+N),kt.defineProperty(T,kt.propertyToPolyfillSymbol[N],{configurable:!0,writable:!0,value:t})))},kt.underscoreProtoCanBeSet=function(){var e={a:!0},t={};try{return t.__proto__=e,t.a}catch{}return!1},kt.setPrototypeOf=kt.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:kt.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,kt.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},kt.arrayIterator=function(e){return{next:kt.arrayIteratorImpl(e)}},kt.makeIterator=function(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return kt.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},kt.generator={},kt.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},kt.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},kt.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},kt.generator.Context.prototype.stop_=function(){this.isRunning_=!1},kt.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},kt.generator.Context.prototype.next_=function(e){this.yieldResult=e},kt.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},kt.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},kt.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},kt.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},kt.generator.Context.prototype.yieldAll=function(e,t){e=kt.makeIterator(e);var s=e.next();if(kt.generator.ensureIteratorResultIsObject_(s),s.done)this.yieldResult=s.value,this.nextAddress=t;else return this.yieldAllIterator_=e,this.yield(s.value,t)},kt.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},kt.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},kt.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,t!=null&&(this.finallyAddress_=t)},kt.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},kt.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},kt.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},kt.generator.Context.prototype.enterFinallyBlock=function(e,t,s){s?this.finallyContexts_[s]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},kt.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();t.jumpTo!=null&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},kt.generator.Context.prototype.forIn=function(e){return new kt.generator.Context.PropertyIterator(e)},kt.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var t in e)this.properties_.push(t);this.properties_.reverse()},kt.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},kt.generator.Engine_=function(e){this.context_=new kt.generator.Context,this.program_=e},kt.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},kt.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(s){return{value:s,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},kt.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},kt.generator.Engine_.prototype.yieldAllStep_=function(e,t,s){try{var T=e.call(this.context_.yieldAllIterator_,t);if(kt.generator.ensureIteratorResultIsObject_(T),!T.done)return this.context_.stop_(),T;var N=T.value}catch(te){return this.context_.yieldAllIterator_=null,this.context_.throw_(te),this.nextStep_()}return this.context_.yieldAllIterator_=null,s.call(this.context_,N),this.nextStep_()},kt.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(t){this.context_.yieldResult=void 0,this.context_.throw_(t)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},kt.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},kt.generator.createGenerator=function(e,t){return t=new kt.generator.Generator_(new kt.generator.Engine_(t)),kt.setPrototypeOf&&e.prototype&&kt.setPrototypeOf(t,e.prototype),t},kt.asyncExecutePromiseGenerator=function(e){function t(T){return e.next(T)}function s(T){return e.throw(T)}return new Promise(function(T,N){function te(xe){xe.done?T(xe.value):Promise.resolve(xe.value).then(t,s).then(te,N)}te(e.next())})},kt.asyncExecutePromiseGeneratorFunction=function(e){return kt.asyncExecutePromiseGenerator(e())},kt.asyncExecutePromiseGeneratorProgram=function(e){return kt.asyncExecutePromiseGenerator(new kt.generator.Generator_(new kt.generator.Engine_(e)))},kt.polyfill("globalThis",function(e){return e||kt.global},"es_2020","es3"),kt.polyfill("Array.prototype.includes",function(e){return e||function(t,s){var T=this;T instanceof String&&(T=String(T));var N=T.length;for(s=s||0,0>s&&(s=Math.max(s+N,0));s<N;s++){var te=T[s];if(te===t||Object.is(te,t))return!0}return!1}},"es7","es3"),kt.initSymbol=function(){},kt.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},kt.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var s=0,T=!1,N={next:function(){if(!T&&s<e.length){var te=s++;return{value:t(te,e[te]),done:!1}}return T=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N},kt.polyfill("Array.prototype.values",function(e){return e||function(){return kt.iteratorFromArray(this,function(t,s){return s})}},"es8","es3"),kt.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;var s=[];return Array.prototype.forEach.call(this,function(T){Array.isArray(T)&&0<t?(T=Array.prototype.flat.call(T,t-1),s.push.apply(s,T)):s.push(T)}),s}},"es9","es5"),kt.polyfill("Array.prototype.flatMap",function(e){return e||function(t,s){var T=[];return Array.prototype.forEach.call(this,function(N,te){N=t.call(s,N,te,this),Array.isArray(N)?T.push.apply(T,N):T.push(N)}),T}},"es9","es5"),kt.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},kt.polyfill("Object.entries",function(e){return e||function(t){var s=[],T;for(T in t)kt.owns(t,T)&&s.push([T,t[T]]);return s}},"es8","es3"),kt.polyfill("Object.values",function(e){return e||function(t){var s=[],T;for(T in t)kt.owns(t,T)&&s.push(t[T]);return s}},"es8","es3");var Xo=Object.create(null),cp={typeMap:Xo},qc=Object.create(null),_i="default",It=class{constructor(e){this.name=e}toString(){return this.name}};It.CONNECTION_CHECKER=new It("connectionChecker"),It.CONNECTION_PREVIEWER=new It("connectionPreviewer"),It.CURSOR=new It("cursor"),It.EVENT=new It("event"),It.FIELD=new It("field"),It.INPUT=new It("input"),It.RENDERER=new It("renderer"),It.TOOLBOX=new It("toolbox"),It.THEME=new It("theme"),It.TOOLBOX_ITEM=new It("toolboxItem"),It.FLYOUTS_VERTICAL_TOOLBOX=new It("flyoutsVerticalToolbox"),It.FLYOUTS_HORIZONTAL_TOOLBOX=new It("flyoutsHorizontalToolbox"),It.METRICS_MANAGER=new It("metricsManager"),It.BLOCK_DRAGGER=new It("blockDragger"),It.SERIALIZER=new It("serializer"),It.ICON=new It("icon"),It.PASTER=new It("paster");var Jo={DEFAULT:_i,TEST_ONLY:cp};Jo.Type=It,Jo.getAllItems=$,Jo.getClass=u,Jo.getClassFromOptions=v,Jo.getObject=g,Jo.hasItem=a,Jo.register=l,Jo.unregister=d;var Oi=Object.create(null),ht;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(ht||(ht={}));var Yc=[ht.BLOCK_CREATE,ht.BLOCK_MOVE,ht.COMMENT_CREATE,ht.COMMENT_MOVE],uf=new Set,vh={};vh.warn=S;var hf="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",df={genUid:()=>{const e=hf.length,t=[];for(let s=0;20>s;s++)t[s]=hf.charAt(Math.random()*e);return t.join("")}},Pp=0,Eh={TEST_ONLY:df};Eh.genUid=h,Eh.getNextUniqueId=E;var ti="",Yr=!0,wh=0,Th="ORPHANED_BLOCK",Zo=[],ff={FIRE_QUEUE:Zo,enqueueEvent:V,fireNow:j,fireInternal:D,setGroupInternal:ne};n.disable$$module$build$src$core$events$utils,n.enable$$module$build$src$core$events$utils,n.getGroup$$module$build$src$core$events$utils,n.setGroup$$module$build$src$core$events$utils,n.setRecordUndo$$module$build$src$core$events$utils;var Bl=Object.create(null),jl,vs=null,pf,Ul=[],mf={defineBlocksWithJsonArrayInternal:_e},ni={TEST_ONLY:mf};ni.createBlockDefinitionsFromJsonArray=n.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,ni.defineBlocks=n.defineBlocks$$module$build$src$core$common,ni.defineBlocksWithJsonArray=ye,ni.draggingConnections=Ul,ni.getAllWorkspaces=L,ni.getBlockTypeCounts=ce,ni.getMainWorkspace=U,ni.getParentContainer=oe,ni.getSelected=K,ni.getWorkspaceById=P,ni.registerWorkspace=F,ni.setMainWorkspace=Z,ni.setParentContainer=ie,ni.setSelected=n.setSelected$$module$build$src$core$common,ni.svgResize=$e,ni.unregisterWorkpace=M;var ra=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=n.getGroup$$module$build$src$core$events$utils(),this.recordUndo=C()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,s){return s.isBlank=!1,s.group=e.group||"",s.workspaceId=t.id,s}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=P(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},eo=class extends ra{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},Sh=class extends eo{constructor(e,t,s){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=ht.CLICK,this.blockId=e?e.id:void 0,this.targetType=s}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Sh),t.targetType=e.targetType,t.blockId=e.blockId,t}},Kc;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(Kc||(Kc={})),l(It.EVENT,ht.CLICK,Sh);var gf=750,Oh="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Xc=null,Es={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Jc=0,xi={TOUCH_ENABLED:Oh,TOUCH_MAP:Es};xi.checkTouchIdentifier=ke,xi.clearTouchIdentifier=fe,xi.getTouchIdentifierFromEvent=Re,xi.longStart=q,xi.longStop=re,xi.shouldHandleEvent=we;var Zc,hp,bf,xh,Qo,mo,es,ts,Ah,Rh;(function(e){function t(T){return s.includes(T.toUpperCase())}Zc=e;const s=Zc.toUpperCase();hp=t("JavaFX"),bf=t("WebKit"),xh=t("Gecko")&&!bf,Qo=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,mo=t("iPad")||t("Macintosh")&&0<e,es=t("iPhone")&&!mo,ts=t("Macintosh"),Ah=mo||Qo&&!t("Mobile")||t("Silk"),Rh=!Ah&&(es||Qo)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Qc=Zc,eu=hp,ia=xh,ai=Qo,Ha=mo,yf=es,ns=ts,Ch=Rh,_f={ANDROID:ai,GECKO:ia,IPAD:Ha,IPHONE:yf,JavaFx:eu,MAC:ns,MOBILE:Ch,raw:Qc},ws=40,Ts=125,no={};no.bind=Ee,no.conditionalBind=ue,no.getScrollDeltaPixels=tt,no.isRightButton=De,no.isTargetInput=Ne,no.mouseToSvg=he,no.unbind=Ae;var kh={};kh.removeElem=at;var ko=class{constructor(e){this.name=e}toString(){return this.name}};ko.POSITIONABLE=new ko("positionable"),ko.DRAG_TARGET=new ko("drag_target"),ko.DELETE_AREA=new ko("delete_area"),ko.AUTOHIDEABLE=new ko("autohideable");var $r=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const s=e.component.id;if(!t&&this.componentData.has(s)){var T;throw Error('Plugin "'+s+'" with capabilities "'+((T=this.componentData.get(s))==null?void 0:T.capabilities)+'" already added.')}for(this.componentData.set(s,e),t=[],T=0;T<e.capabilities.length;T++){const N=String(e.capabilities[T]).toLowerCase();if(t.push(N),this.capabilityToComponentIds.has(N)){let te;(te=this.capabilityToComponentIds.get(N))==null||te.push(s)}else this.capabilityToComponentIds.set(N,[s])}this.componentData.get(s).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let s=0;s<t.capabilities.length;s++){const T=String(t.capabilities[s]).toLowerCase();at(this.capabilityToComponentIds.get(T),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=`${t}`.toLowerCase();var s;(s=this.componentData.get(e))==null||s.capabilities.push(t);var T;(T=this.capabilityToComponentIds.get(t))==null||T.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),at(this.componentData.get(e).capabilities,t),at(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(t)}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const s=[];if(t){const T=[];e.forEach(N=>{T.push(this.componentData.get(N))}),T.sort(function(N,te){return N.weight-te.weight}),T.forEach(function(N){s.push(N.component)})}else e.forEach(T=>{s.push(this.componentData.get(T).component)});return s}};$r.Capability=ko,function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}($r||($r={})),$r.ComponentWeight;var Va=!1,Ih=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
  pointer-events: none;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,Mh={};Mh.inject=ot,Mh.register=He;var Bt=class{constructor(e,t){this.x=e,this.y=t}clone(){return new Bt(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const s=e.x-t.x;return e=e.y-t.y,Math.sqrt(s*s+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new Bt(e.x-t.x,e.y-t.y)}static sum(e,t){return new Bt(e.x+t.x,e.y+t.y)}},go="http://www.w3.org/2000/svg",Io="http://www.w3.org/1999/xhtml",ji="http://www.w3.org/1999/xlink",Ai;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Ai||(Ai={}));var Br=null,Nh=0,tu=null,ri={HTML_NS:Io};ri.NodeType=Ai,ri.SVG_NS=go,ri.XLINK_NS=ji,ri.addClass=Ze,ri.createSvgElement=Ue,ri.getFastTextWidth=un,ri.getFastTextWidthWithSizeString=ge,ri.getTextWidth=dn,ri.hasClass=Le,ri.insertAfter=ft,ri.measureFontMetrics=ve,ri.removeClass=Oe,ri.removeClasses=ae,ri.removeNode=Pe,ri.setCssTransform=Lt,ri.startTextWidthCache=qt,ri.stopTextWidthCache=gn;var rt=class{constructor(e){this.tagName=e}toString(){return this.tagName}};rt.ANIMATE=new rt("animate"),rt.CIRCLE=new rt("circle"),rt.CLIPPATH=new rt("clipPath"),rt.DEFS=new rt("defs"),rt.FECOMPOSITE=new rt("feComposite"),rt.FECOMPONENTTRANSFER=new rt("feComponentTransfer"),rt.FEFLOOD=new rt("feFlood"),rt.FEFUNCA=new rt("feFuncA"),rt.FEGAUSSIANBLUR=new rt("feGaussianBlur"),rt.FEPOINTLIGHT=new rt("fePointLight"),rt.FESPECULARLIGHTING=new rt("feSpecularLighting"),rt.FILTER=new rt("filter"),rt.FOREIGNOBJECT=new rt("foreignObject"),rt.G=new rt("g"),rt.IMAGE=new rt("image"),rt.LINE=new rt("line"),rt.PATH=new rt("path"),rt.PATTERN=new rt("pattern"),rt.POLYGON=new rt("polygon"),rt.RECT=new rt("rect"),rt.SVG=new rt("svg"),rt.TEXT=new rt("text"),rt.TSPAN=new rt("tspan");var mr=class{constructor(e,t,s,T){this.top=e,this.bottom=t,this.left=s,this.right=T}clone(){return new mr(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,t){return e===t?!0:e&&t?e.top===t.top&&e.bottom===t.bottom&&e.left===t.left&&e.right===t.right:!1}static createFromPoint(e,t,s){const T=e.x;return e=e.y,new mr(e,e+s,T,T+t)}},Hn=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}static max(e,t){return new Hn(Math.max(e.width,t.width),Math.max(e.height,t.height))}static min(e,t){return new Hn(Math.min(e.width,t.width),Math.min(e.height,t.height))}},rs={getSizeInternal:qe},wr={TEST_ONLY:rs};wr.getBorderBox=bn,wr.getComputedStyle=Dt,wr.getContainerOffsetToScrollInto=Pn,wr.getPageOffset=Wt,wr.getSize=Fe,wr.getViewportPageOffset=pn,wr.scrollIntoContainerView=sr;var Lh=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,$f=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,li={XY_REGEX:Lh,XY_STYLE_REGEX:$f},oa={TEST_ONLY:li};oa.getDocumentScroll=Se,oa.getInjectionDivXY=ci,oa.getRelativeXY=Bn,oa.getViewportBBox=pe,oa.screenToWsCoordinates=Ie,oa.wsToScreenCoordinates=Me;var Vr=class{constructor(e,t,s,T,N){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new Bt(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Bt(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=s||!1,this.margin=N!==void 0?N:Vr.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),T&&(e+=" "+T),this.outerSvg=Ue(rt.SVG,{class:e}),T=Ue(rt.G,{},this.outerSvg),this.svgBackground=Ue(rt.RECT,{class:"blocklyScrollbarBackground"},T),e=Math.floor((Vr.scrollbarThickness-5)/2),this.svgHandle=Ue(rt.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},T),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),ft(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=ue(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=ue(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=Vr.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),Ae(this.onMouseDownBarWrapper_),Ae(this.onMouseDownHandleWrapper_),Pe(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,Lt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&Vr.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-2*this.margin;this.pair&&(t-=Vr.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=Vr.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-Vr.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var s=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*s,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=s/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-2*this.margin;this.pair&&(t-=Vr.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-Vr.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var s=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*s,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=s/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const t=e!==this.isVisible();this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),fe(),this.cleanUp(),De(e))e.stopPropagation();else{var t=he(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var s=ci(this.svgHandle);s=this.horizontal?s.x:s.y;var T=this.handlePosition,N=.95*this.handleLength;t<=s?T-=N:t>=s+this.handleLength&&(T+=N),this.setHandlePosition(this.constrainHandlePosition(T)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),De(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=ue(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=ue(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){fe(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(Ae(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(Ae(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new Bt(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};Vr.scrollbarThickness=Oh?25:15,Vr.DEFAULT_SCROLLBAR_MARGIN=.5;var nu={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Dh={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:jr,DOMParser:ui,XMLSerializer:ro}=globalThis;ui&&(nu=new ui),ro&&(Dh=new ro);var vf="https://developers.google.com/blockly/xml",dp=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Fl={NAME_SPACE:vf};Fl.createElement=n.createElement$$module$build$src$core$utils$xml,Fl.createTextNode=n.createTextNode$$module$build$src$core$utils$xml,Fl.domToText=Ge,Fl.injectDependencies=Be,Fl.textToDom=n.textToDom$$module$build$src$core$utils$xml;var ru="categoryToolbox",io="flyoutToolbox",En;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(En||(En={}));var Ef={hasCategoriesInternal:mt},ii={};ii.Position=En,ii.TEST_ONLY=Ef,ii.convertFlyoutDefToJsonArray=nt,ii.convertToolboxDefToJson=Je,ii.hasCategories=ct,ii.isCategoryCollapsible=yt,ii.parseToolboxTree=Ct;var is;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(is||(is={}));var Ui;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Ui||(Ui={}));var oo;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(oo||(oo={}));var Fi={};Fi.bumpDirection=oo,Fi.bumpPositionRect=$n,Fi.getCornerOppositeToolbox=yn,Fi.getStartPositionRect=ln,Fi.horizontalPosition=Ui,Fi.verticalPosition=is;var hi={width:96,height:124,url:"sprites.png"},Ph=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=Ue(rt.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:$r.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[$r.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&Pe(this.svgGroup);for(const e of this.boundEvents)Ae(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new mr(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var s=yn(this.workspace,e),T=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(T+=this.LARGE_SPACING+this.HEIGHT),e=ln(s,new Hn(this.WIDTH,T),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),s=s.vertical,t=$n(e,this.MARGIN_VERTICAL,s===is.TOP?oo.DOWN:oo.UP,t),s===is.TOP){var N=this.SMALL_SPACING+this.HEIGHT,te;(te=this.zoomInGroup)==null||te.setAttribute("transform","translate(0, "+N+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(N+this.LARGE_SPACING+this.HEIGHT)+")")}else{te=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let We;(We=this.zoomInGroup)==null||We.setAttribute("transform","translate(0, "+te+")"),te=te+this.SMALL_SPACING+this.HEIGHT,(N=this.zoomOutGroup)==null||N.setAttribute("transform","translate(0, "+te+")")}this.top=t.top,this.left=t.left;var xe;(xe=this.svgGroup)==null||xe.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=Ue(rt.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const t=Ue(rt.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);Ue(rt.RECT,{width:32,height:32},t),Ue(rt.IMAGE,{width:hi.width,height:hi.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(ji,"xlink:href",this.workspace.options.pathToMedia+hi.url),this.boundEvents.push(ue(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=Ue(rt.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const t=Ue(rt.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);Ue(rt.RECT,{width:32,height:32},t),Ue(rt.IMAGE,{width:hi.width,height:hi.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(ji,"xlink:href",this.workspace.options.pathToMedia+hi.url),this.boundEvents.push(ue(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),fe(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=Ue(rt.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const t=Ue(rt.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);Ue(rt.RECT,{width:32,height:32},t),Ue(rt.IMAGE,{width:hi.width,height:hi.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(ji,"xlink:href",this.workspace.options.pathToMedia+hi.url),this.boundEvents.push(ue(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),fe(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(be(ht.CLICK))(null,this.workspace.id,"zoom_controls");k(e)}};He(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var Ss=100,wf=75,za=50,Hl=25,iu={BLOCKS:za,PROCEDURES:wf,VARIABLES:Ss,WORKSPACE_COMMENTS:Hl},sa={};sa.register=sn,sa.unregister=wn;var Tf=class{constructor(){this.priority=Hl}save(e){const t=[];for(const s of e.getTopComments())(e=jn(s,{addCoordinates:!0,saveIds:!0}))&&t.push(e);return t.length?t:null}load(e,t){for(const s of e)_n(s,t,{recordUndo:C()})}clear(e){for(const t of e.getTopComments())t.dispose()}};sn("workspaceComments",new Tf);var ou={};ou.WorkspaceCommentSerializer=Tf,ou.append=_n,ou.save=jn;var Ga={};Ga.register=hr,Ga.unregister=ar;var su=class{paste(e,t,s){e=e.commentState,s&&(e.x=s.x,e.y=s.y),n.disable$$module$build$src$core$events$utils();let T;try{T=_n(e,t),dr(T)}finally{n.enable$$module$build$src$core$events$utils()}return T?(ee()&&k(new(be(ht.COMMENT_CREATE))(T)),n.setSelected$$module$build$src$core$common(T),T):null}};su.TYPE="workspace-comment",hr(su.TYPE,new su);var Vl;Vl=28,n.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Vl,connectingSnapRadius:Vl,currentConnectionPreference:8,bumpDelay:250},n.config$$module$build$src$core$config;var fp="aria-",Bp="role",zr;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(zr||(zr={}));var Kr;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(Kr||(Kr={}));var bo={};bo.Role=zr,bo.State=Kr,bo.setRole=Un,bo.setState=pt;var Bh=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.pointerLeaveHandler=this.pointerEnterHandler=this.clickHandler=this.pointerMoveHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName&&Un(t,this.roleName),this.element=t;for(let s=0,T;T=this.menuItems[s];s++)t.appendChild(T.createDom());return this.pointerMoveHandler=ue(t,"pointermove",this,this.handlePointerMove,!0),this.clickHandler=ue(t,"pointerup",this,this.handleClick,!0),this.pointerEnterHandler=ue(t,"pointerenter",this,this.handlePointerEnter,!0),this.pointerLeaveHandler=ue(t,"pointerleave",this,this.handlePointerLeave,!0),this.onKeyDownHandler=ue(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),Ze(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),Oe(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.pointerMoveHandler&&(Ae(this.pointerMoveHandler),this.pointerMoveHandler=null),this.clickHandler&&(Ae(this.clickHandler),this.clickHandler=null),this.pointerEnterHandler&&(Ae(this.pointerEnterHandler),this.pointerEnterHandler=null),this.pointerLeaveHandler&&(Ae(this.pointerLeaveHandler),this.pointerLeaveHandler=null),this.onKeyDownHandler&&(Ae(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){for(let s=0,T;T=this.menuItems[s];s++)if(T.getElement()===e)return T}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;if(t&&(t.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,t=this.getElement();const s=t==null?void 0:t.parentElement,T=e.getElement();s&&T&&(sr(T,s),pt(t,Kr.ACTIVEDESCENDANT,e.getId()))}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let s;for(;s=this.menuItems[e];){if(s.isEnabled()){this.setHighlighted(s);break}e+=t}}handlePointerMove(e){Math.max(Math.abs(e.movementX),Math.abs(e.movementY))!==0&&(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const s=new Bt(e.clientX,e.clientY);if(1>Bt.distance(t,s))return}(e=this.getMenuItem(e.target))&&e.performAction()}handlePointerEnter(e){this.focus()}handlePointerLeave(e){this.getElement()&&this.setHighlighted(null)}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=Fe(e);return t.height=e.scrollHeight,t}},zl=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=E(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var s=document.createElement("div");s.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(s)}return s=this.content,typeof this.content=="string"&&(s=document.createTextNode(this.content)),t.appendChild(s),e.appendChild(t),this.roleName&&Un(e,this.roleName),pt(e,Kr.SELECTED,this.checkable&&this.checked||!1),pt(e,Kr.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?(Ze(t,"blocklyMenuItemHighlight"),Ze(t,"goog-menuitem-highlight")):(Oe(t,"blocklyMenuItemHighlight"),Oe(t,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,t){this.actionHandler=e.bind(t)}},Mo="_TEMP_COLLAPSED_INPUT",au="_TEMP_COLLAPSED_FIELD",di="MANUALLY_DISABLED",Sf={COLLAPSED_FIELD_NAME:au,COLLAPSED_INPUT_NAME:Mo,MANUALLY_DISABLED:di};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(n.inputTypes$$module$build$src$core$inputs$input_types||(n.inputTypes$$module$build$src$core$inputs$input_types={})),n.inputTypes$$module$build$src$core$inputs$input_types;var yo=new Set,jh=new WeakSet,Gl=new WeakMap,os=null,Rr=null,pp=0,Uh={};Uh.finishQueuedRenders=_t,Uh.queueRender=nr,Uh.triggerQueuedRenders=wt;var Of=function(e,t){window.alert(e),t&&t()},mp=function(e,t){t(window.confirm(e))},gp=function(e,t,s){s(window.prompt(e,t))},Mr={confirmInternal:Cn},gr={TEST_ONLY:Mr};gr.alert=Rn,gr.confirm=fr,gr.prompt=Er,gr.setAlert=lr,gr.setConfirm=Lr,gr.setPrompt=Sr;var Gn,er;n.Msg$$module$build$src$core$msg=Object.create(null),Gn=function(e){Object.keys(e).forEach(function(t){n.Msg$$module$build$src$core$msg[t]=e[t]})},er={Msg:n.Msg$$module$build$src$core$msg,setLocale:Gn};var vr=class extends ra{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new vr),t.varId=e.varId,t}},Ri=class extends vr{constructor(e){super(e),this.type=ht.VAR_CREATE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Ri),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)}};l(It.EVENT,ht.VAR_CREATE,Ri);var so=class{constructor(e,t,s,T){this.workspace=e,this.name=t,this.type=s||"",this.id=T||h()}getId(){return this.id}static compareByName(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}},aa="VARIABLE",lu="ijkmnopqrstuvwxyzabcdefgh",ss={generateUniqueNameInternal:bt},Jn={CATEGORY_NAME:aa,TEST_ONLY:ss,VAR_LETTER_OPTIONS:lu};Jn.allDeveloperVariables=n.allDeveloperVariables$$module$build$src$core$variables,Jn.allUsedVarModels=n.allUsedVarModels$$module$build$src$core$variables,Jn.createVariableButtonHandler=Ye,Jn.flyoutCategory=de,Jn.flyoutCategoryBlocks=je,Jn.generateUniqueName=Ve,Jn.generateUniqueNameFromOptions=$t,Jn.generateVariableFieldDom=On,Jn.getAddedVariables=Kn,Jn.getOrCreateVariablePackage=n.getOrCreateVariablePackage$$module$build$src$core$variables,Jn.getVariable=n.getVariable$$module$build$src$core$variables,Jn.nameUsedWithAnyType=ut,Jn.nameUsedWithConflictingParam=At,Jn.promptName=zt,Jn.renameVariable=n.renameVariable$$module$build$src$core$variables;var ao=class extends Error{},la=class extends ao{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Wa=class extends ao{constructor(e,t,s){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=s}},lo=class extends ao{constructor(e,t,s,T){super(`The block ${s.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=s,this.childState=T}},qa=class extends ao{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},Wl=class extends ao{constructor(e,t,s){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=s}},$i={};$i.BadConnectionCheck=lo,$i.DeserializationError=ao,$i.MissingBlockType=la,$i.MissingConnection=Wa,$i.RealChildOfShadow=qa,$i.UnregisteredIcon=Wl;var Fh=class{constructor(){this.priority=za}save(e){const t=[];for(const s of e.getTopBlocks(!1))(e=kn(s,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const s of e)Gt(s,t,{recordUndo:C()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};sn("blocks",new Fh);var Ya={};Ya.BlockSerializer=Fh,Ya.append=Gt,Ya.appendInternal=In,Ya.save=kn;var Ur=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};Ur.MUTATOR=new Ur("mutator"),Ur.WARNING=new Ur("warning"),Ur.COMMENT=new Ur("comment");var as=class extends ra{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new as),t.blockId=e.blockId,t}},Hi=class extends as{constructor(e,t,s,T,N){super(e),this.type=ht.BLOCK_CHANGE,e&&(this.element=t,this.name=s||void 0,this.oldValue=T,this.newValue=N)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Hi),t.element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,e.disabledReason!==void 0&&(t.disabledReason=e.disabledReason),t}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const s=t.getIcon(Ur.MUTATOR);switch(s&&dl(s)&&s.bubbleIsVisible()&&s.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":var T;t.setDisabledReason(!!e,(T=this.disabledReason)!=null?T:di);break;case"inline":t.setInputsInline(!!e);break;case"mutation":T=Hi.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(n.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),k(new Hi(t,"mutation",null,T,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?Ir(e):""}};l(It.EVENT,ht.BLOCK_CHANGE,Hi);var Ka={};Ka.clamp=fl,Ka.toDegrees=Zf,Ka.toRadians=Du;var ls=16,ql=1,Hh=12,cu=16,ca=.25,uu=null,oi=null,Xa="",Qr="",rr,ua,ha,xf=null,vi=null,hu=null,du={getBoundsInfo:function(){const e=Wt(xf),t=Fe(xf);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,s,T){const N=du.getBoundsInfo(),te=Fe(rr);return t+te.height<N.bottom?Sd(e,t,N,te):T-te.height>N.top?Od(s,T,N,te):t+te.height<document.documentElement.clientHeight?Sd(e,t,N,te):T-te.height>document.documentElement.clientTop?Od(s,T,N,te):Pu(e,N,te)}},Xr={ANIMATION_TIME:ca,ARROW_HORIZONTAL_PADDING:Hh,ARROW_SIZE:ls,BORDER_SIZE:ql,PADDING_Y:cu,TEST_ONLY:du};Xr.clearContent=hc,Xr.createDom=cc,Xr.getContentDiv=uc,Xr.getOwner=yd,Xr.getPositionX=ds,Xr.hide=fc,Xr.hideIfOwner=dc,Xr.hideWithoutAnimation=To,Xr.isVisible=xd,Xr.repositionForWindowResize=ju,Xr.setBoundsElement=bd,Xr.setColour=_d,Xr.show=Td,Xr.showPositionedByBlock=Qf,Xr.showPositionedByField=$d;var Yl=class{constructor(e){this.workspace=e,this.cursorSvg=this.cursor=null,this.markers=new Map,this.markerSvg=null}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),t.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor&&this.cursor.getDrawer()&&this.cursor.getDrawer().dispose(),(this.cursor=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor),this.cursor.setDrawer(e),this.setCursorSvg(this.cursor.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let t=0,s;s=e[t];t++)this.unregisterMarker(s);this.markers.clear(),this.cursor&&(this.cursor.dispose(),this.cursor=null)}};Yl.LOCAL_MARKER="local_marker_1";var Ja={};Ja.commonWordPrefix=Ad,Ja.commonWordSuffix=Rd,Ja.isNumber=n.isNumber$$module$build$src$core$utils$string,Ja.shortestStringLength=Fo,Ja.wrap=n.wrap$$module$build$src$core$utils$string;var fu=void 0,Za=!1,da=!1,bp=50,yp=0,Qa=0,Vh=0,zh=0,fi=null,fa=null,Gh=0,Wh=10,_p=10,Af=750,Os=5,Jr=null,Wn={HOVER_MS:Af,LIMIT:bp,MARGINS:Os,OFFSET_X:Gh,OFFSET_Y:Wh,RADIUS_OK:_p};Wn.bindMouseEvents=xa,Wn.block=Nd,Wn.createDom=bc,Wn.dispose=Md,Wn.getCustomTooltip=tp,Wn.getDiv=Cd,Wn.getTooltipOfObject=Oa,Wn.hide=fs,Wn.isVisible=mc,Wn.setCustomTooltip=ml,Wn.unbindMouseEvents=yc,Wn.unblock=Ti;var pu=.45,Rf=.65,Cf={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},_o={};_o.blend=zs,_o.getHsvSaturation=Fu,_o.getHsvValue=Bd,_o.hexToRgb=Vs,_o.hsvToHex=bl,_o.hueToHex=ps,_o.names=Cf,_o.parse=fo,_o.rgbToHex=Aa,_o.setHsvSaturation=Hu,_o.setHsvValue=rp;var mu={};mu.checkMessageReferences=Gs,mu.parseBlockColour=Ra,mu.replaceMessageReferences=Dr,mu.tokenizeInterpolation=_c;var Tr=class{constructor(e,t,s){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg=this.cursorSvg=this.tooltip=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Hn(0,0),e!==Tr.SKIP_SETUP&&(s&&this.configure_(s),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(Dr(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=Ue(rt.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=Ue(rt.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=Ue(rt.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");xa(e),this.mouseDownWrapper=ue(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(Tr),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(Tr,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=n.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),Ge(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(n.textToDom$$module$build$src$core$utils$xml(t)),!0):!1}dispose(){dc(this),qs(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||Pe(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(Ze(e,"blocklyEditableText"),Oe(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(Ze(e,"blocklyNonEditableText"),Oe(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Tr.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let s=2*e,T=t.FIELD_TEXT_HEIGHT,N=0;this.textElement_&&(N=un(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY),s+=N),this.isFullBlockField()||(T=Math.max(T,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=T,this.size_.width=s,this.positionTextElement_(e,N),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var s=this.getConstants(),T=this.size_.height/2,N;this.textElement_.setAttribute("x",String((N=this.getSourceBlock())!=null&&N.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(s.FIELD_TEXT_BASELINE_CENTER?T:T-s.FIELD_TEXT_HEIGHT/2+s.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Hn(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new Cr;if(this.isFullBlockField()){var s=this.sourceBlock_.getHeightWidth();const T=t.workspace.scale;e=this.getAbsoluteXY_(),t=(s.width+1)*T,s=(s.height+1)*T,ia?(e.x+=1.5*T,e.y+=1.5*T):(e.x-=.5*T,e.y-=.5*T)}else s=this.borderRect_.getBoundingClientRect(),e=Wt(this.borderRect_),t=s.width,s=s.height;return new mr(e.y,e.y+s,e.x,e.x+t)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,Tr.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e):Tr.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,t=!0){if(e!==null){var s=n.getGroup$$module$build$src$core$events$utils();s||n.setGroup$$module$build$src$core$events$utils(!0);try{const vt=this.doClassValidation_(e),rn=this.processValidation(e,vt,t);if(!(rn instanceof Error)){var T,N=(T=this.getValidator())==null?void 0:T.call(this,rn),te=this.processValidation(rn,N,t);if(!(te instanceof Error)){var xe=this.sourceBlock_;if(!xe||!xe.disposed){var We=this.getValue();We===te?this.doValueUpdate_(te):(this.doValueUpdate_(te),t&&xe&&ee()&&k(new(be(ht.BLOCK_CHANGE))(xe,"field",this.name||null,We,te)),this.isDirty_&&this.forceRerender())}}}}finally{n.setGroup$$module$build$src$core$events$utils(s)}}}processValidation(e,t,s){return t===null?(this.doValueInvalid_(e,s),this.isDirty_&&this.forceRerender(),Error()):t===void 0?e:t}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,t){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return Oa(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Wt(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new Cr;const s=t.inputList;for(let T=0;T<t.inputList.length;T++){const N=s[T],te=N.fieldRow;for(let xe=0;xe<te.length;xe++)if(te[xe]===this){e=N;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg=e}else this.cursorSvg=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg=e}else this.markerSvg=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new Cr;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg&&e.getMarker(Yl.LOCAL_MARKER).draw()}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};Tr.NBSP="",Tr.SKIP_SETUP=Symbol("SKIP_SETUP");var Cr=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},No=null,gu=null,el=null,Kl="blocklyWidgetDiv",$o="",Ci="",ki,Lo={};Lo.createDom=Ud,Lo.getDiv=Ws,Lo.hide=yl,Lo.hideIfOwner=qs,Lo.hideIfOwnerIsInWorkspace=_l,Lo.isVisible=zu,Lo.positionWithAnchor=Di,Lo.repositionForWindowResize=$l,Lo.show=Vu,Lo.testOnly_setDiv=jd;var bu=null,kf={},yu=null,tl={};tl.callbackFactory=n.callbackFactory$$module$build$src$core$contextmenu,tl.dispose=Ys,tl.getCurrentBlock=Wu,tl.hide=Vo,tl.setCurrentBlock=Ho,tl.show=vl;var Mn=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let t;return(t=this.registeredItems.get(e))!=null?t:null}getContextMenuOptions(e,t){const s=[];for(const N of this.registeredItems.values())if(e===N.scopeType){var T=N.preconditionFn(t);T!=="hidden"&&(T={text:typeof N.displayText=="function"?N.displayText(t):N.displayText,enabled:T==="enabled",callback:N.callback,scope:t,weight:N.weight},s.push(T))}return s.sort(function(N,te){return N.weight-te.weight}),s}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",t.COMMENT="comment",e.registry=new e})(Mn||(Mn={})),Mn.ScopeType;var xs=50,_u=100,jp={BLOCK:xs,BUBBLE:_u},qh=class{constructor(e){this.comment=e,this.startLoc=null,this.inGroup=!1,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.options.readOnly}startDrag(){(this.inGroup=!!n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,xs),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),this.inGroup||n.setGroup$$module$build$src$core$events$utils(!1)}fireDragStartEvent(){const e=new(be(ht.COMMENT_DRAG))(this.comment,!0);k(e)}fireDragEndEvent(){const e=new(be(ht.COMMENT_DRAG))(this.comment,!1);k(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(be(ht.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),k(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},Yh=new WeakMap,$p=class{constructor(e){this.workspace=e,this.size=new Hn(120,100),this.collapsed=!1,this.editable=!0,this.location=new Bt(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=Ue(rt.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,e),{foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let t;(t=e.getLayerManager())==null||t.append(this,xs),this.setSizeWithoutFiringEvents(this.size),this.moveTo(new Bt(0,0))}createHighlightRect(e){return Ue(rt.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e,t){e=Ue(rt.G,{class:"blocklyCommentTopbar"},e);const s=Ue(rt.RECT,{class:"blocklyCommentTopbarBackground"},e),T=Ue(rt.IMAGE,{class:"blocklyDeleteIcon",href:`${t.options.pathToMedia}delete-icon.svg`},e);t=Ue(rt.IMAGE,{class:"blocklyFoldoutIcon",href:`${t.options.pathToMedia}foldout-icon.svg`},e);const N=Ue(rt.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),te=document.createTextNode("");return N.appendChild(te),ue(t,"pointerdown",this,this.onFoldoutDown),ue(T,"pointerdown",this,this.onDeleteDown),{topBarGroup:e,topBarBackground:s,deleteIcon:T,foldoutIcon:t,textPreview:N,textPreviewNode:te}}createTextArea(e){e=Ue(rt.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},e);const t=document.createElementNS(Io,"body");t.setAttribute("xmlns",Io),t.className="blocklyMinimalBody";const s=document.createElementNS(Io,"textarea");return Ze(s,"blocklyCommentText"),Ze(s,"blocklyTextarea"),Ze(s,"blocklyText"),t.appendChild(s),e.appendChild(t),ue(s,"change",this,this.onTextChange),{foreignObject:e,textArea:s}}createResizeHandle(e,t){return e=Ue(rt.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),ue(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const t=this.topBarBackground.getBBox(),s=this.deleteIcon.getBBox(),T=this.foldoutIcon.getBBox(),N=this.textPreview.getBBox(),te=this.resizeHandle.getBBox();this.size=e=Hn.max(e,this.calcMinSize(t,T,s)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.updateTextAreaSize(e,t),this.updateDeleteIconPosition(e,t,s),this.updateFoldoutIconPosition(t,T),this.updateTextPreviewSize(e,t,N,s,te),this.updateResizeHandlePosition(e,te)}setSize(e){const t=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(t,this.size)}calcMinSize(e,t,s){var T;this.updateTextPreview((T=this.textArea.value)!=null?T:""),T=dn(this.textPreview);const N=this.calcFoldoutMargin(e,t),te=this.calcDeleteMargin(e,s);let xe=T;return this.foldoutIcon.checkVisibility()?xe+=t.width+2*N:T&&(xe+=4),this.deleteIcon.checkVisibility()?xe+=s.width+2*te:T&&(xe+=4),new Hn(xe,e.height+20)}calcDeleteMargin(e,t){return(e.height-t.height)/2}calcFoldoutMargin(e,t){return(e.height-t.height)/2}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextAreaSize(e,t){this.foreignObject.setAttribute("height",`${e.height-t.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${t.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}updateDeleteIconPosition(e,t,s){t=this.calcDeleteMargin(t,s),this.deleteIcon.setAttribute("y",`${t}`),this.deleteIcon.setAttribute("x",`${e.width-s.width-t}`)}updateFoldoutIconPosition(e,t){e=this.calcFoldoutMargin(e,t),this.foldoutIcon.setAttribute("y",`${e}`),this.foldoutIcon.setAttribute("x",`${e}`)}updateTextPreviewSize(e,t,s,T,N){const te=(t.height-s.height)/2,xe=this.calcDeleteMargin(t,T);t=this.calcFoldoutMargin(t,N),e=e.width-N.width-2*t-T.width-2*xe,this.textPreview.setAttribute("x",`${N.width+2*t*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${te+s.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,t){this.resizeHandle.setAttribute("y",`${e.height-t.height}`),this.resizeHandle.setAttribute("x",`${e.width-t.width}`)}onSizeChange(e,t){for(let s=this.sizeChangeListeners.length-1;0<=s;s--)this.sizeChangeListeners[s](e,t)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),De(e)||(this.preResizeSize=this.getSize(),Ia(this.workspace,e,new Bt(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=ue(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=ue(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){fe(),this.resizePointerUpListener&&(Ae(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Ae(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=Si(this.workspace,e),this.setSizeWithoutFiringEvents(new Hn(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?Ze(this.svgRoot,"blocklyCollapsed"):Oe(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;0<=e;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}onFoldoutDown(e){fe(),this.bringToFront(),De(e)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),e.stopPropagation()}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(Ze(this.svgRoot,"blocklyEditable"),Oe(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(Oe(this.svgRoot,"blocklyEditable"),Ze(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}onTextChange(){const e=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let t=this.textChangeListeners.length-1;0<=t;t--)this.textChangeListeners[t](e,this.text)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return 12<=e.length?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,t=e.childNodes;t[t.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){fe(),De(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,Pe(this.svgRoot);for(let e=this.disposeListeners.length-1;0<=e;e--)this.disposeListeners[e]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}};He(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var Kh=class{constructor(e,t){this.workspace=e,this.text="",this.size=new Hn(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new Bt(0,0),this.disposing=this.disposed=!1,this.id=t&&!e.getCommentById(t)?t:h(),e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){ee()&&k(new(be(ht.COMMENT_CREATE))(this))}fireDeleteEvent(){ee()&&k(new(be(ht.COMMENT_DELETE))(this))}fireChangeEvent(e,t){ee()&&k(new(be(ht.COMMENT_CHANGE))(this,e,t))}fireCollapseEvent(e){ee()&&k(new(be(ht.COMMENT_COLLAPSE))(this,e))}setText(e){const t=this.text;this.text=e,this.fireChangeEvent(t,e)}getText(){return this.text}setSize(e){const t=new(be(ht.COMMENT_RESIZE))(this);this.size=e,t.recordCurrentSizeAsNewSize(),k(t)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(e,t){const s=new(be(ht.COMMENT_MOVE))(this);t&&s.setReason(t),this.location=e,s.recordNew(),k(s)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},pa=class extends Kh{constructor(e,t){super(e,t),this.dragStrategy=new qh(this),this.workspace=e,this.view=new $p(e),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.addModelUpdateBindings(),ue(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),ue(this.view.getSvgRoot(),"wheel",this,s=>{s.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((e,t)=>void super.setText(t)),this.view.addSizeChangeListener((e,t)=>void super.setSize(t)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var t,s;const T=(s=(t=this.view)==null?void 0:t.getSize())!=null?s:this.getSize();return this.workspace.RTL?(t=e.x-T.width,s=e.x):(t=e.x,s=e.x+T.width),new mr(e.y,e.y+T.height,t,s)}moveBy(e,t,s){const T=this.getRelativeToSurfaceXY();e=new Bt(T.x+e,T.y+t),this.moveTo(e,s)}moveTo(e,t){super.moveTo(e,t),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?Ze(this.getSvgRoot(),"blocklyDragging"):Oe(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const t=this.workspace.getGesture(e);if(t){if(Ne(e))e.stopPropagation();else{t.handleCommentStart(e,this);let s;(s=this.workspace.getLayerManager())==null||s.append(this,xs)}n.setSelected$$module$build$src$core$common(this)}}setDeleteStyle(e){e?Ze(this.getSvgRoot(),"blocklyDraggingDelete"):Oe(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Ze(this.getSvgRoot(),"blocklySelected")}unselect(){Oe(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:su.TYPE,commentState:jn(this,{addCoordinates:!0})}}showContextMenu(e){const t=Mn.registry.getContextMenuOptions(Mn.ScopeType.COMMENT,{comment:this});vl(e,t,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}},Ei={};Ei.appendDomToWorkspace=xo,Ei.blockToDom=zo,Ei.blockToDomWithXY=Xi,Ei.clearWorkspaceAndLoadFromXml=cr,Ei.deleteNext=Wd,Ei.domToBlock=n.domToBlock$$module$build$src$core$xml,Ei.domToBlockInternal=gs,Ei.domToPrettyText=si,Ei.domToText=Ir,Ei.domToVariables=bs,Ei.domToWorkspace=n.domToWorkspace$$module$build$src$core$xml,Ei.loadWorkspaceComment=Ji,Ei.saveWorkspaceComment=So,Ei.variablesToDom=Oo,Ei.workspaceToDom=Ki;var Xh=class extends as{constructor(e){super(e),this.type=ht.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Xi(e),this.ids=Q(e),this.json=kn(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ir(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Xh),t.xml=n.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!tr(t,this.ids))if(e)Gt(this.json,t);else for(e=0;e<this.ids.length;e++){const s=this.ids[e],T=t.getBlockById(s);T?T.dispose(!1):s===this.blockId&&console.warn("Can't uncreate non-existent block: "+s)}}},tr=function(e,t){return t.map(s=>e.getBlockById(s)).filter(s=>s&&s.isShadow()).length===t.length};l(It.EVENT,ht.BLOCK_CREATE,Xh);var $u=class extends eo{constructor(e,t){super(t),this.type=ht.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new $u),t.themeName=e.themeName,t}};l(It.EVENT,ht.THEME_CHANGE,$u);var Xl=class extends eo{constructor(e,t,s,T,N){super(T),this.type=ht.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=t,this.scale=s,this.oldScale=N}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Xl),t.viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};l(It.EVENT,ht.VIEWPORT_CHANGE,Xl);var Qt;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Qt||(Qt={}));var nl=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const s=this.calculateIndexForYPos(t);if(s>=this.connections.length)return-1;t=e.y;let T=s;for(;0<=T&&this.connections[T].y===t;){if(this.connections[T]===e)return T;T--}for(T=s;T<this.connections.length&&this.connections[T].y===t;){if(this.connections[T]===e)return T;T++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,s=this.connections.length;for(;t<s;){const T=Math.floor((t+s)/2);if(this.connections[T].y<e)t=T+1;else if(this.connections[T].y>e)s=T;else{t=T;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function s(rn){const kr=N-T[rn].x,Ar=te-T[rn].y;return Math.sqrt(kr*kr+Ar*Ar)<=t&&vt.push(T[rn]),Ar<t}const T=this.connections,N=e.x,te=e.y;e=0;let xe=T.length-2,We=xe;for(;e<We;)T[We].y<te?e=We:xe=We,We=Math.floor((e+xe)/2);const vt=[];if(xe=e=We,T.length){for(;0<=e&&s(e);)e--;do xe++;while(xe<T.length&&s(xe))}return vt}isInYRange(e,t,s){return Math.abs(this.connections[e].y-t)<=s}searchForClosest(e,t,s){if(!this.connections.length)return{connection:null,radius:t};const T=e.y,N=e.x;e.x=N+s.x,e.y=T+s.y;var te=this.calculateIndexForYPos(e.y);s=null;let xe=t,We,vt=te-1;for(;0<=vt&&this.isInYRange(vt,e.y,t);)We=this.connections[vt],this.connectionChecker.canConnect(e,We,!0,xe)&&(s=We,xe=We.distanceFrom(e)),vt--;for(;te<this.connections.length&&this.isInYRange(te,e.y,t);)We=this.connections[te],this.connectionChecker.canConnect(e,We,!0,xe)&&(s=We,xe=We.distanceFrom(e)),te++;return e.x=N,e.y=T,{connection:s,radius:xe}}static init(e){const t=[];return t[Qt.INPUT_VALUE]=new nl(e),t[Qt.OUTPUT_VALUE]=new nl(e),t[Qt.NEXT_STATEMENT]=new nl(e),t[Qt.PREVIOUS_STATEMENT]=new nl(e),t}},Jl=null,As=null,ma={};ma.connectionUiEffect=Js,ma.disconnectUiEffect=Ol,ma.disconnectUiStop=ys,ma.disposeUiEffect=Sc;var rl=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new Bt(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){K()&&K().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=Bt.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},vp=5,Up=6,Rs=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new Bt(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new Bt(0,0)}dispose(){fe(),Ti(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)Ae(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new Bt(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(e),re()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=Bt.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=Bt.magnitude(this.currentDragDeltaXY)>(this.flyout?n.config$$module$build$src$core$config.flyoutDragRadius:n.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),n.getGroup$$module$build$src$core$events$utils()||n.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),n.setSelected$$module$build$src$core$common(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new rl(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const t=K();t&&Zs(t)&&t.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(t,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,t){return new(v(It.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,t)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,Ne(e)?this.cancel():(this.gestureHasStarted=!0,ys(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=yd(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,Nd(),De(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&q(e,this),this.mouseDownXY=new Bt(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(ue(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(ue(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(ue(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&re())}handleMove(e){this.isDragging()&&we(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),re())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!we(e))return;if(this.updateFromEvent(e),re(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=Re(e);this.cachedPoints.set(t,this.getTouchPoint(e));var s=Array.from(this.cachedPoints.keys());s.length===2&&(t=this.cachedPoints.get(s[0]),s=this.cachedPoints.get(s[1]),this.startDistance=Bt.distance(t,s),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const t=Re(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),s=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),s=Bt.distance(s,t)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(t=s-this.previousScale,t=0<t?t*vp:t*Up,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const T=this.startWorkspace_,N=he(e,T.getParentSvg(),T.getInverseScreenCTM());T.zoom(N.x,N.y,t)}this.previousScale=s,e.preventDefault()}handleTouchEnd(e){e=Re(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new Bt(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(re(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment||n.setSelected$$module$build$src$core$common(null),this.doStart(e)}fireWorkspaceClick(e){k(new(be(ht.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}handleCommentStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(t),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){n.getGroup$$module$build$src$core$events$utils()||n.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(be(ht.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),k(e)}this.bringBlockToFront(),n.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,K()&&K().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,n.setSelected$$module$build$src$core$common(this.startBlock),e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,t;return(t=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?t:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=L();for(let t=0,s;s=e[t];t++)if(s.currentGesture_)return!0;return!1}},Jh=class{constructor(e,t){this.pattern=e,this.scale=1;let s;this.spacing=(s=t.spacing)!=null?s:0;let T;this.length=(T=t.length)!=null?T:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let N;this.snapToGrid=(N=t.snap)!=null?N:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`),t=Math.floor(this.spacing/2)+.5;let s=t-this.length/2,T=t+this.length/2;t*=e,s*=e,T*=e,this.setLineAttributes(this.line1,e,s,T,t,t),this.setLineAttributes(this.line2,e,t,t,s,T)}setLineAttributes(e,t,s,T,N,te){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${s}`),e.setAttribute("y1",`${N}`),e.setAttribute("x2",`${T}`),e.setAttribute("y2",`${te}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}alignXY(e){var t=this.getSpacing();const s=t/2,T=Math.round(Math.round((e.x-s)/t)*t+s);return t=Math.round(Math.round((e.y-s)/t)*t+s),T===e.x&&t===e.y?e:new Bt(T,t)}static createDom(e,t,s){e=Ue(rt.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},s);let T,N;if(0<((T=t.length)!=null?T:1)&&0<((N=t.spacing)!=null?N:0)){Ue(rt.LINE,{stroke:t.colour},e);let te;(te=t.length)!=null&&te&&Ue(rt.LINE,{stroke:t.colour},e)}else Ue(rt.LINE,{},e);return e}},Ep=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(xs),Ze(e,"blocklyBlockCanvas"),e=this.createLayer(_u),Ze(e,"blocklyBubbleCanvas")}createDragLayer(e){const t=Ue(rt.SVG,{class:"blocklyBlockDragSurface",xmlns:go,"xmlns:html":Io,"xmlns:xlink":ji,version:"1.1"});return e.append(t),Ue(rt.G,{},t)}createAnimationLayer(e){const t=Ue(rt.SVG,{class:"blocklyAnimationLayer",xmlns:go,"xmlns:html":Io,"xmlns:xlink":ji,version:"1.1"});return e.append(t),Ue(rt.G,{},t)}appendToAnimationLayer(e){let t;const s=(t=this.dragLayer)==null?void 0:t.getAttribute("transform");if(s){let N;(N=this.animationLayer)==null||N.setAttribute("transform",s)}let T;(T=this.animationLayer)==null||T.appendChild(e.getSvgRoot())}translateLayers(e,t){e=`translate(${e.x}, ${e.y}) scale(${t})`;let s;(s=this.dragLayer)==null||s.setAttribute("transform",e);for(const[,T]of this.layers)T.setAttribute("transform",e)}moveToDragLayer(e){let t;(t=this.dragLayer)==null||t.appendChild(e.getSvgRoot())}moveOffDragLayer(e,t){this.append(e,t)}append(e,t){this.layers.has(t)||this.createLayer(t);let s;(s=this.layers.get(t))==null||s.appendChild(e.getSvgRoot())}createLayer(e){const t=this.workspace.getSvgGroup(),s=Ue(rt.G,{});let T=!1;const N=[...this.layers].sort((te,xe)=>te[0]-xe[0]);for(const[te,xe]of N)if(e<te){t.insertBefore(s,xe),T=!0;break}return T||t.appendChild(s),this.layers.set(e,s),s}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(xs)}getBubbleLayer(){return this.layers.get(_u)}},vu={};vu.deepMerge=Go;var ir=class{constructor(e,t,s,T){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=s||Object.create(null),this.componentStyles=T||Object.create(null),this.fontStyle=Object.create(null),l(It.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const s=new ir(e);let T=t.base;if(T){if(typeof T=="string"){let N;T=(N=g(It.THEME,T))!=null?N:void 0}T instanceof ir&&(Go(s,T),s.name=e)}return Go(s.blockStyles,t.blockStyles),Go(s.categoryStyles,t.categoryStyles),Go(s.componentStyles,t.componentStyles),Go(s.fontStyle,t.fontStyle),t.startHats!==null&&(s.startHats=t.startHats),s}},If={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},pi={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Zh=new ir("classic",If,pi),Vi=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,s=!1;var T=!1,N=!1,te=!1,xe=!1,We=!1;const vt=!!e.readOnly;if(!vt){var rn;t=Je((rn=e.toolbox)!=null?rn:null),s=ct(t),T=e.trashcan,T=T===void 0?s:T,N=e.collapse,N=N===void 0?s:N,te=e.comments,te=te===void 0?s:te,xe=e.disable,xe=xe===void 0?s:xe,We=e.sounds,We=We===void 0?!0:We}rn=e.maxTrashcanContents,T?rn===void 0&&(rn=32):rn=0;const kr=!!e.rtl;let Ar=e.horizontalLayout;Ar===void 0&&(Ar=!1);var wo=e.toolboxPosition!=="end";wo=Ar?wo?En.TOP:En.BOTTOM:wo===kr?En.RIGHT:En.LEFT;let pd=e.css;pd===void 0&&(pd=!0);let Kf="https://blockly-demo.appspot.com/static/media/";e.media&&(Kf=e.media.endsWith("/")?e.media:e.media+"/");const dg=e.oneBasedIndex,Mg=e.renderer||"geras",Ng=e.plugins||{};let um=e.modalInputs;um===void 0&&(um=!0),this.RTL=kr,this.oneBasedIndex=dg===void 0?!0:dg,this.collapse=N,this.comments=te,this.disable=xe,this.readOnly=vt,this.maxBlocks=e.maxBlocks||1/0;let fg;this.maxInstances=(fg=e.maxInstances)!=null?fg:null,this.modalInputs=um,this.pathToMedia=Kf,this.hasCategories=s,this.moveOptions=Vi.parseMoveOptions(e,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=T,this.maxTrashcanContents=rn,this.hasSounds=We,this.hasCss=pd,this.horizontalLayout=Ar,this.languageTree=t,this.gridOptions=Vi.parseGridOptions(e),this.zoomOptions=Vi.parseZoomOptions(e),this.toolboxPosition=wo,this.theme=Vi.parseThemeOptions(e),this.renderer=Mg;let pg;this.rendererOverrides=(pg=e.rendererOverrides)!=null?pg:null;let mg;this.parentWorkspace=(mg=e.parentWorkspace)!=null?mg:null,this.plugins=Ng}static parseMoveOptions(e,t){const s=e.move||{},T={};return s.scrollbars===void 0&&e.scrollbars===void 0?T.scrollbars=t:typeof s.scrollbars=="object"?(T.scrollbars={horizontal:!!s.scrollbars.horizontal,vertical:!!s.scrollbars.vertical},T.scrollbars.horizontal&&T.scrollbars.vertical?T.scrollbars=!0:T.scrollbars.horizontal||T.scrollbars.vertical||(T.scrollbars=!1)):T.scrollbars=!!s.scrollbars||!!e.scrollbars,T.wheel=T.scrollbars&&s.wheel!==void 0?!!s.wheel:typeof T.scrollbars=="object",T.drag=T.scrollbars?s.drag===void 0?!0:!!s.drag:!1,T}static parseZoomOptions(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t}static parseThemeOptions(e){return e=e.theme||Zh,typeof e=="string"?g(It.THEME,e):e instanceof ir?e:ir.defineTheme(e.name||"builtin"+E(),e)}},Qh={fromJsonInternal:Da},il={TEST_ONLY:Qh};il.fromJson=n.fromJson$$module$build$src$core$field_registry,il.register=bi,il.unregister=qd;var Ii=class extends Tr{constructor(e,t,s){super(Tr.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==Tr.SKIP_SETUP&&(Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],s&&this.configure_(s),this.setValue(this.selectedOption[1]),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(Ii,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=Ue(rt.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Ze(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=Ue(rt.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?Ii.ARROW_CHAR+" ":" "+Ii.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=Ue(rt.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(ji,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new Cr;this.dropdownCreate(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new Bt(e.clientX,e.clientY):null,hc(),e=this.menu_.render(uc()),Ze(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=t.getColour(),e=this.sourceBlock_.getColourTertiary(),_d(t,e)),$d(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),sr(this.selectedMenuItem.getElement(),uc(),!0)),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new Cr;const t=new Bh;t.setRole(zr.LISTBOX),this.menu_=t;const s=this.getOptions(!1);this.selectedMenuItem=null;for(let N=0;N<s.length;N++){const[te,xe]=s[N];if(typeof te=="object"){var T=new Image(te.width,te.height);T.src=te.src,T.alt=te.alt||""}else T=te;T=new zl(T,xe),T.setRole(zr.OPTION),T.setRightToLeft(e.RTL),T.setCheckable(!0),t.addChild(T),T.setChecked(xe===this.value_),xe===this.value_&&(this.selectedMenuItem=T),T.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){dc(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,s;s=e[t];t++)s[1]===this.value_&&(this.selectedOption=s)}applyColour(){const e=this.sourceBlock_;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.getColourTertiary()),this.menu_?this.borderRect_.setAttribute("fill",e.getColourTertiary()):this.borderRect_.setAttribute("fill","transparent")),e&&this.arrow&&(e.isShadow()?this.arrow.style.fill=e.getColourSecondary():this.arrow.style.fill=e.getColour())}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&typeof e=="object"?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new Cr;this.imageElement.style.display="",this.imageElement.setAttributeNS(ji,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const s=Number(e.height);e=Number(e.width);var T=!!this.borderRect_;const N=Math.max(T?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,s+Ii.IMAGE_Y_PADDING);T=T?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let te;te=this.svgArrow?this.positionSVGArrow(e+T,N/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):un(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+te+2*T,this.size_.height=N;let xe=0;t.RTL?this.imageElement.setAttribute("x",`${T+te}`):(xe=e+te,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${T}`)),this.imageElement.setAttribute("y",String(N/2-s/2)),this.positionTextElement_(xe+T,e+te)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();Ze(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const s=un(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let T=0;this.svgArrow&&(T=this.positionSVGArrow(s+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=s+T+2*t,this.size_.height=e,this.positionTextElement_(t,s)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const s=this.getSourceBlock();if(!s)throw new Cr;const T=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,N=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,te=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(s.RTL?T:e+N)+","+t+")"),te+N}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let t=!1;const s=e.map(([xe,We])=>typeof xe=="string"?[Dr(xe),We]:(t=!0,[xe.alt!==null?Object.assign({},xe,{alt:Dr(xe.alt)}):Object.assign({},xe),We]));if(t||2>e.length)return{options:s};var T=s.map(([xe])=>xe),N=Fo(T);e=Ad(T,N);const te=Rd(T,N);return!e&&!te||N<=e+te?{options:s}:(N=e?T[0].substring(0,e-1):void 0,T=te?T[0].substr(1-te):void 0,{options:this.applyTrim(s,e,te),prefix:N,suffix:T})}applyTrim(e,t,s){return e.map(([T,N])=>[T.substring(t,T.length-s),N])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let s=0;s<e.length;s++){const T=e[s];Array.isArray(T)?typeof T[1]!="string"?(t=!0,console.error(`Invalid option[${s}]: Each FieldDropdown option id must be a string. 
          Found ${T[1]} in: ${T}`)):T[0]&&typeof T[0]!="string"&&typeof T[0].src!="string"&&(t=!0,console.error(`Invalid option[${s}]: Each FieldDropdown option must have a string 
          label or image description. Found ${T[0]} in: ${T}`)):(t=!0,console.error(`Invalid option[${s}]: Each FieldDropdown option must be an array.
          Found: ${T}`))}if(t)throw TypeError("Found invalid FieldDropdown options.")}};Ii.CHECKMARK_OVERHANG=25,Ii.MAX_MENU_HEIGHT_VH=.45,Ii.ARROW_CHAR="",Ii.IMAGE_Y_OFFSET=5,Ii.IMAGE_Y_PADDING=2*Ii.IMAGE_Y_OFFSET,bi("field_dropdown",Ii);var Mf=class{constructor(e,t){this.bubble=e,this.workspace=t,this.startLoc=null,this.inGroup=!1}isMovable(){return!0}startDrag(){(this.inGroup=!!n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0),this.inGroup||n.setGroup$$module$build$src$core$events$utils(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,_u),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},Mi,ur=class{constructor(e,t,s){this.workspace=e,this.anchor=t,this.ownerRect=s,this.size=new Hn(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new Mf(this,this.workspace),this.id=E(),this.svgRoot=Ue(rt.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=Ue(rt.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=Ue(rt.PATH,{class:"blocklyBubbleTail"},e),this.background=Ue(rt.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Mi.BORDER_WIDTH,ry:Mi.BORDER_WIDTH},e),this.contentContainer=Ue(rt.G,{},this.svgRoot),ue(this.background,"pointerdown",this,this.onMouseDown)}dispose(){Pe(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,Mi.MIN_SIZE),e.height=Math.max(e.height,Mi.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;(t=this.workspace.getGesture(e))==null||t.handleBubbleStart(e,this),this.bringToFront(),n.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new mr(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),s=this.getOptimalRelativeLeft(t),T=this.getOptimalRelativeTop(t);const N={x:s,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},te={x:-this.size.width-30,y:T};T={x:e.getWidth(),y:T};var xe={x:s,y:e.getHeight()};s=e.getWidth()<e.getHeight()?T:xe,e=e.getWidth()<e.getHeight()?xe:T,T=this.getOverlap(N,t),xe=this.getOverlap(te,t);const We=this.getOverlap(s,t);t=this.getOverlap(e,t),t=Math.max(T,xe,We,t),T===t?(this.relativeLeft=N.x,this.relativeTop=N.y):xe===t?(this.relativeLeft=te.x,this.relativeTop=te.y):We===t?(this.relativeLeft=s.x,this.relativeTop=s.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var s=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(s+this.size.width,t.left+t.width)-Math.max(s,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var s=this.anchor.x-t;s-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):s>e.right&&(t=-(e.right-this.anchor.x))}else{s=t+this.anchor.x;const T=s+this.size.width;s<e.left?t=e.left-this.anchor.x:T>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const s=this.anchor.y+t,T=s+this.size.height;return e=this.getWorkspaceViewRect(e),s<e.top?t=e.top-this.anchor.y:T>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let s=e.top+e.height,T=e.left;return e=e.left+e.width,s-=this.getScrollbarThickness(),this.workspace.RTL?T-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new mr(t,s,T,e)}getScrollbarThickness(){return Vr.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,s=this.size.height/2,T=-this.relativeLeft,N=-this.relativeTop;if(t===T&&s===N)e.push("M "+t+","+s);else{N-=s,T-=t,this.workspace.RTL&&(T*=-1);var te=Math.sqrt(N*N+T*T),xe=Math.acos(T/te);0>N&&(xe=2*Math.PI-xe);var We=xe+Math.PI/2;We>2*Math.PI&&(We-=2*Math.PI);var vt=Math.sin(We);const kr=Math.cos(We);let Ar=(this.size.width+this.size.height)/Mi.TAIL_THICKNESS;Ar=Math.min(Ar,this.size.width,this.size.height)/4,We=1-Mi.ANCHOR_RADIUS/te,T=t+We*T,N=s+We*N,We=t+Ar*kr;const wo=s+Ar*vt;t-=Ar*kr,s-=Ar*vt,vt=Du(this.workspace.RTL?-Mi.TAIL_ANGLE:Mi.TAIL_ANGLE),vt=xe+vt,vt>2*Math.PI&&(vt-=2*Math.PI),xe=Math.sin(vt)*te/Mi.TAIL_BEND,te=Math.cos(vt)*te/Mi.TAIL_BEND,e.push("M"+We+","+wo),e.push("C"+(We+te)+","+(wo+xe)+" "+T+","+N+" "+T+","+N),e.push("C"+T+","+N+" "+(t+te)+","+(s+xe)+" "+t+","+s)}e.push("z");let rn;(rn=this.tail)==null||rn.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&(t==null?void 0:t.lastChild)!==this.svgRoot?(t==null||t.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new Bt(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};Mi=ur,ur.BORDER_WIDTH=6,ur.DOUBLE_BORDER=2*Mi.BORDER_WIDTH,ur.MIN_SIZE=Mi.DOUBLE_BORDER,ur.TAIL_THICKNESS=1,ur.TAIL_ANGLE=20,ur.TAIL_BEND=4,ur.ANCHOR_RADIUS=8;var Cs=class extends ur{constructor(e,t,s,T){super(t,s,T),this.workspace=t,this.anchor=s,this.ownerRect=T,this.autoLayout=!0,t=new Vi(e),this.validateWorkspaceOptions(t),this.svgDialog=Ue(rt.SVG,{x:ur.BORDER_WIDTH,y:ur.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Vi(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(rt.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e==null||e.init(this.miniWorkspace),e==null||e.show(t.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let N,te;(N=this.miniWorkspace.getFlyout())==null||(te=N.getWorkspace())==null||te.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(20>t.y&&e.moveBy(0,20-t.y),e.RTL){let s=-20;const T=this.miniWorkspace.getFlyout();T&&(s-=T.getWidth()),t.x>s&&e.moveBy(s-t.x,0)}else 20>t.x&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<Cs.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<Cs.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new Hn(t.width+ur.DOUBLE_BORDER,t.height+ur.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+Cs.MARGIN;e=e.height+Cs.MARGIN;const s=this.miniWorkspace.getFlyout();if(s){const T=s.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,T.height+20),t+=s.getWidth()}return new Hn(t,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=(t=this.miniWorkspace.getFlyout())==null?void 0:t.getWorkspace())for(const s of e.getAllBlocks(!1))s.setStyle(s.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Cs.MINIMUM_VIEW_CHANGE=10,Cs.MARGIN=3*ur.DOUBLE_BORDER;var Eu=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new Bt(0,0),this.workspaceLocation=new Bt(0,0),this.svgRoot=null,this.tooltip=e}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=Ue(rt.G,{class:"blocklyIconGroup"}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),ue(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,xa(this.svgRoot)}}dispose(){yc(this.svgRoot),Pe(this.svgRoot)}getWeight(){return-1}getSize(){return new Hn(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",dl(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=Bt.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}},ed,wu;ed=17,wu=16,n.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends Eu{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),Ue(rt.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),Ue(rt.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),Ue(rt.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),Ze(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return n.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Hn(ed,ed)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.getColour());let t;(t=this.miniWorkspaceBubble)==null||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let t;(t=this.miniWorkspaceBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const t=this;return kt.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield _t(),e){t.miniWorkspaceBubble=new Cs(t.getMiniWorkspaceConfig(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour(),t.createRootBlock(),t.addSaveConnectionsListener();let s;(s=t.miniWorkspaceBubble)==null||s.addWorkspaceChangeListener(t.createMiniWorkspaceChangeListener())}else{let s;(s=t.miniWorkspaceBubble)==null||s.dispose(),t.miniWorkspaceBubble=null,t.saveConnectionsListener&&t.sourceBlock.workspace.removeChangeListener(t.saveConnectionsListener),t.saveConnectionsListener=null}k(new(be(ht.BUBBLE_OPEN))(t.sourceBlock,e,"mutator"))}})}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(s=>({kind:"block",type:s}))}),t}getAnchorLocation(){const e=ed/2;return Bt.sum(this.workspaceLocation,new Bt(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new mr(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let t,s,T,N;e=(N=(t=this.miniWorkspaceBubble)==null||(s=t.getWorkspace())==null||(T=s.getFlyout())==null?void 0:T.getWidth())!=null?N:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+wu):wu,wu)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{n.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||b(e)||p(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=n.getGroup$$module$build$src$core$events$utils();e||n.setGroup$$module$build$src$core$events$utils(!0);var t=Hi.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var s=Hi.getExtraBlockState_(this.sourceBlock);t!==s&&k(new(be(ht.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,t,s)),n.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Ur.MUTATOR,n.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,n.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Zl=Object.create(null),Fp={allExtensions:Zl};n.register$$module$build$src$core$extensions("parent_tooltip_when_inline",op);var co={TEST_ONLY:Fp};co.apply=xl,co.buildTooltipForDropdown=n.buildTooltipForDropdown$$module$build$src$core$extensions,co.buildTooltipWithFieldText=n.buildTooltipWithFieldText$$module$build$src$core$extensions,co.isRegistered=Yu,co.register=n.register$$module$build$src$core$extensions,co.registerMixin=n.registerMixin$$module$build$src$core$extensions,co.registerMutator=n.registerMutator$$module$build$src$core$extensions,co.runAfterPageLoad=Ac,co.unregister=Oc;var Dn;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(Dn||(Dn={}));var ks={};ks.arc=xr,ks.curve=pr,ks.line=Qs,ks.lineOnAxis=Zt,ks.lineTo=Pi,ks.moveBy=yr,ks.moveTo=Wr,ks.point=cn;var Nr={};Nr.Coordinate=Bt,Nr.KeyCodes=Dn,Nr.Rect=mr,Nr.Size=Hn,Nr.Svg=rt,Nr.aria=bo,Nr.array=kh,Nr.browserEvents=no,Nr.colour=_o,Nr.deprecation=vh,Nr.dom=ri,Nr.extensions=co,Nr.idGenerator=Eh,Nr.math=Ka,Nr.object=vu,Nr.parsing=mu,Nr.string=Ja,Nr.style=wr,Nr.svgMath=oa,Nr.svgPaths=ks,Nr.toolbox=ii,Nr.userAgent=_f,Nr.xml=Fl;var vo=class extends ur{constructor(e,t,s){super(e,t,s),this.workspace=e,this.anchor=t,this.ownerRect=s,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Hn(160+ur.DOUBLE_BORDER,80+ur.DOUBLE_BORDER),this.MIN_SIZE=new Hn(45+ur.DOUBLE_BORDER,20+ur.DOUBLE_BORDER),this.editable=!0,Ze(this.svgRoot,"blocklyTextInputBubble"),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}setEditable(e){(this.editable=e)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=Ue(rt.FOREIGNOBJECT,{x:ur.BORDER_WIDTH,y:ur.BORDER_WIDTH},e);const t=document.createElementNS(Io,"body");t.setAttribute("xmlns",Io),t.className="blocklyMinimalBody";const s=document.createElementNS(Io,"textarea");return s.className="blocklyTextarea blocklyText",s.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),t.appendChild(s),e.appendChild(t),this.bindTextAreaEvents(s),setTimeout(()=>{s.focus()},0),{inputRoot:e,textArea:s}}bindTextAreaEvents(e){ue(e,"wheel",this,t=>{t.stopPropagation()}),ue(e,"focus",this,this.onStartEdit,!0),ue(e,"change",this,this.onTextChange)}createResizeHandle(e,t){return e=Ue(rt.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),ue(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const s=e.width-ur.DOUBLE_BORDER,T=e.height-ur.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${s}`),this.inputRoot.setAttribute("height",`${T}`),this.resizeGroup.setAttribute("y",`${T}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-ur.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${s}`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),De(e)||(Ia(this.workspace,e,new Bt(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=ue(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=ue(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){fe(),this.resizePointerUpListener&&(Ae(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Ae(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=Si(this.workspace,e),this.setSize(new Hn(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};He(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var td={};td.register=Yd,td.unregister=Kd;var nd=17,uo=160,Nf=80,Eo=class extends Eu{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new Hn(uo,Nf),this.bubbleVisiblity=!1}getType(){return Eo.TYPE}initView(e){this.svgRoot||(super.initView(e),Ue(rt.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),Ue(rt.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),Ue(rt.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),Ze(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return Eo.WEIGHT}getSize(){return new Hn(nd,nd)}applyColour(){super.applyColour();const e=this.sourceBlock.getColour();let t;(t=this.textInputBubble)==null||t.setColour(e)}updateEditable(){const e=this,t=()=>super.updateEditable;return kt.asyncExecutePromiseGeneratorFunction(function*(){t().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){super.onLocationChange(e),e=this.getAnchorLocation();let t;(t=this.textInputBubble)==null||t.setAnchorLocation(e)}setText(e){const t=this.text;k(new(be(ht.BLOCK_CHANGE))(this.sourceBlock,"comment",null,t,e)),this.text=e;let s;(s=this.textInputBubble)==null||s.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let t;(t=this.textInputBubble)==null||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let t;this.text=(t=e.text)!=null?t:"";let s,T;this.bubbleSize=new Hn((s=e.width)!=null?s:uo,(T=e.height)!=null?T:Nf);let N;this.bubbleVisiblity=(N=e.pinned)!=null?N:!1,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(k(new(be(ht.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const t=this;return kt.asyncExecutePromiseGeneratorFunction(function*(){t.bubbleVisiblity!==e&&(t.bubbleVisiblity=e,yield _t(),!t.sourceBlock.rendered||t.sourceBlock.isInFlyout||t.sourceBlock.isInsertionMarker()||(e?(t.sourceBlock.isEditable()?t.showEditableBubble():t.showNonEditableBubble(),t.applyColour()):t.hideBubble(),k(new(be(ht.BUBBLE_OPEN))(t.sourceBlock,e,"comment"))))})}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let t;(t=this.textInputBubble)==null||t.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new vo(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0)}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=nd/2;return Bt.sum(this.workspaceLocation,new Bt(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};Eo.TYPE=Ur.COMMENT,Eo.WEIGHT=3,Yd(Eo.TYPE,Eo);var cs=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},wp={};wp.DuplicateIconType=cs;var Tp=class extends ur{constructor(e,t,s,T){super(t,s,T),this.text=e,this.workspace=t,this.anchor=s,this.ownerRect=T,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,Pe(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createTextFragments(t,e),this.workspace.RTL&&this.rightAlignTextFragments(t.getBBox().width,e),t}createParagraph(e){return Ue(rt.G,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",transform:`translate(0,${ur.BORDER_WIDTH})`,style:`direction: ${this.workspace.RTL?"rtl":"ltr"}`},e)}createTextFragments(e,t){let s=1;return t.split(`
`).map(T=>{const N=Ue(rt.TEXT,{y:`${s}em`,x:ur.BORDER_WIDTH},e);return T=document.createTextNode(T),N.appendChild(T),s+=1,N})}rightAlignTextFragments(e,t){for(const s of t)s.setAttribute("text-anchor","start"),s.setAttribute("x",`${e+ur.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new Hn(e.width+2*ur.BORDER_WIDTH,e.height+2*ur.BORDER_WIDTH),!0)}},ga=17,us=class extends Eu{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return us.TYPE}initView(e){this.svgRoot||(super.initView(e),Ue(rt.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),Ue(rt.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),Ue(rt.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),Ze(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return us.WEIGHT}getSize(){return new Hn(ga,ga)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.getColour())}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let t;(t=this.textBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;e?this.textMap.set(t,e):this.textMap.delete(t);let s;return(s=this.textBubble)==null||s.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const t=this;return kt.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield _t(),e)t.textBubble=new Tp(t.getText(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour();else{let s;(s=t.textBubble)==null||s.dispose(),t.textBubble=null}k(new(be(ht.BUBBLE_OPEN))(t.sourceBlock,e,"warning"))}})}getAnchorLocation(){const e=ga/2;return Bt.sum(this.workspaceLocation,new Bt(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new mr(e.y,e.y+e.height,e.x,e.x+e.width)}};us.TYPE=Ur.WARNING,us.WEIGHT=2;var ba={};ba.CommentIcon=Eo,ba.Icon=Eu,ba.IconType=Ur,ba.MutatorIcon=n.MutatorIcon$$module$build$src$core$icons$mutator_icon,ba.WarningIcon=us,ba.exceptions=wp,ba.registry=td,n.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=n.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),n.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let s=e;t===n.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(s=e),e=s.toLowerCase();const T=t===n.NameType$$module$build$src$core$names.VARIABLE||t===n.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const N=this.db.get(t);return N.has(e)?T+N.get(e):(t=this.getDistinctName(s,t),N.set(e,t.substr(T.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let s=null,T,N;for(;this.dbReverse.has(e+((T=s)!=null?T:""))||this.reservedWords.has(e+((N=s)!=null?N:""));)s=s?s+1:2;let te;return e+=(te=s)!=null?te:"",this.dbReverse.add(e),(t===n.NameType$$module$build$src$core$names.VARIABLE||t===n.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=n.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(n.Names$$module$build$src$core$names||(n.Names$$module$build$src$core$names={})),n.NameType$$module$build$src$core$names=n.Names$$module$build$src$core$names.NameType,n.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=n.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,n.NameType$$module$build$src$core$names,n.Names$$module$build$src$core$names;var Sp=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t?this:(super.set(e,t),Rc(t)&&t.startPublishing(),this)}delete(e){const t=this.get(e);return e=super.delete(e),e&&(Rc(t)&&t.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},rd,Ni;rd="PROCEDURE",n.DEFAULT_ARG$$module$build$src$core$procedures="x",Ni={CATEGORY_NAME:rd,DEFAULT_ARG:n.DEFAULT_ARG$$module$build$src$core$procedures},Ni.ObservableProcedureMap=Sp,Ni.allProcedures=Yo,Ni.findLegalName=n.findLegalName$$module$build$src$core$procedures,Ni.flyoutCategory=Ro,Ni.getCallers=Al,Ni.getDefinition=n.getDefinition$$module$build$src$core$procedures,Ni.isNameUsed=Xu,Ni.isProcedureBlock=ea,Ni.mutateCallers=n.mutateCallers$$module$build$src$core$procedures,Ni.mutatorOpenListener=_r,Ni.rename=n.rename$$module$build$src$core$procedures;var Hp=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},Ke=new Hp,hs=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=Ke.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},Ql=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=Ke.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(Ke.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(Ke.isSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(Ke.isSpacer(t))return t}return null}},ya=class extends Ql{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=Ke.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,s=0;for(let T=0;T<this.elements.length;T++){const N=this.elements[T];t+=N.width,Ke.isSpacer(N)||(Ke.isNextConnection(N)?s=Math.max(s,N.height):e=Math.max(e,N.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+s,this.descenderHeight=s,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},ho=class extends hs{constructor(e,t){super(e),this.connectionModel=t,this.type|=Ke.CONNECTION,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=t.isHighlighted()}},Is=class extends ho{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=Ke.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},id=class extends Is{constructor(e,t){super(e,t),this.height=0,this.type|=Ke.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Do=class extends hs{constructor(e,t,s){super(e),this.field=t,this.parentInput=s,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=Ke.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},ol=class extends hs{constructor(e){super(e),this.type|=Ke.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Lf=class extends hs{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.type|=Ke.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},wi=class extends hs{constructor(e,t){super(e),this.type=this.type|Ke.SPACER|Ke.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Tu=class extends Is{constructor(e,t){super(e,t),this.type|=Ke.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},sl=class extends Is{constructor(e,t){super(e,t),this.type|=Ke.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},ec=class extends Ql{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=Ke.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const s=this.elements[t];this.width+=s.width,Ke.isInput(s)&&s instanceof Is&&(Ke.isStatementInput(s)&&s instanceof sl?e+=s.connectedBlockWidth:Ke.isExternalInput(s)&&s instanceof id&&s.connectedBlockWidth!==0&&(e+=s.connectedBlockWidth-s.connectionWidth)),Ke.isSpacer(s)||(this.height=Math.max(this.height,s.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Df=class extends hs{constructor(e){super(e),this.type|=Ke.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},Pf=class extends ho{constructor(e,t){super(e,t),this.type|=Ke.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Op=class extends ho{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=Ke.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Bf=class extends ho{constructor(e,t){super(e,t),this.type|=Ke.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Ms=class extends hs{constructor(e,t){super(e),this.type=(t&&t!=="left"?Ke.RIGHT_ROUND_CORNER:Ke.LEFT_ROUND_CORNER)|Ke.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},jf=class extends Ql{constructor(e,t,s){super(e),this.height=t,this.width=s,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|Ke.SPACER|Ke.BETWEEN_ROW_SPACER,this.elements=[new wi(this.constants_,s)]}measure(){}},Su=class extends hs{constructor(e,t){super(e),this.type=(t&&t!=="left"?Ke.RIGHT_SQUARE_CORNER:Ke.LEFT_SQUARE_CORNER)|Ke.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Uf=class extends Ql{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=Ke.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,s=e.getPreviousBlock();return!!e.outputConnection||t||(s?s.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,s=0;for(let T=0;T<this.elements.length;T++){const N=this.elements[T];t+=N.width,Ke.isSpacer(N)||(Ke.isHat(N)&&N instanceof ol?s=Math.max(s,N.ascenderHeight):e=Math.max(e,N.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+s,this.capline=this.ascenderHeight=s,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},al=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=yr(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const s in t)this.blockStyles[s]=this.validatedBlockStyle_(t[s]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=ve("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=Ra(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?Ra(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?Ra(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return zs("#fff",e,.6)||e}generateTertiaryColour_(e){return zs("#fff",e,.3)||e}dispose(){this.embossFilter&&Pe(this.embossFilter),this.disabledPattern&&Pe(this.disabledPattern),this.debugFilter&&Pe(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,s=Qs([cn(t,e/4),cn(2*-t,e/2),cn(t,e/4)]);return{height:e,width:t,path:s}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,s=pr("c",[cn(30,-e),cn(70,-e),cn(t,0)]);return{height:e,width:t,path:s}}makePuzzleTab(){function e(te){te=te?-1:1;const xe=-te;var We=s/2;const vt=We+2.5,rn=We+.5,kr=cn(-t,te*We);return We=cn(t,te*We),pr("c",[cn(0,te*vt),cn(-t,xe*rn),kr])+pr("s",[cn(t,2.5*xe),We])}const t=this.TAB_WIDTH,s=this.TAB_HEIGHT,T=e(!0),N=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:s,pathDown:N,pathUp:T}}makeNotch(){function e(xe){return Qs([cn(xe*T,s),cn(3*xe,0),cn(xe*T,-s)])}const t=this.NOTCH_WIDTH,s=this.NOTCH_HEIGHT,T=(t-3)/2,N=e(1),te=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:s,pathLeft:N,pathRight:te}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=xr("a","0 0,0",e,cn(-e,e)),s=xr("a","0 0,0",e,cn(e,e));return{width:e,height:e,pathTop:t,pathBottom:s}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=yr(0,e)+xr("a","0 0,1",e,cn(e,-e)),s=xr("a","0 0,1",e,cn(e,e)),T=xr("a","0 0,1",e,cn(-e,-e)),N=xr("a","0 0,1",e,cn(-e,e));return{topLeft:t,topRight:s,bottomRight:N,bottomLeft:T,rightHeight:e}}shapeFor(e){switch(e.type){case Qt.INPUT_VALUE:case Qt.OUTPUT_VALUE:return this.PUZZLE_TAB;case Qt.PREVIOUS_STATEMENT:case Qt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,s){this.injectCSS_(t,s),this.defs=Ue(rt.DEFS,{},e),e=Ue(rt.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),Ue(rt.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=Ue(rt.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),Ue(rt.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),Ue(rt.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),Ue(rt.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=Ue(rt.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),Ue(rt.RECT,{width:10,height:10,fill:"#aaa"},e),Ue(rt.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=Ue(rt.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=Ue(rt.FECOMPONENTTRANSFER,{result:"outBlur"},e);Ue(rt.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),Ue(rt.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),Ue(rt.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const s=t.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=s:(t=document.createElement("style"),t.id=e,e=document.createTextNode(s),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},ll=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=yr(e.xPos,this.info_.startY);for(let s=0,T;T=t[s];s++)Ke.isLeftRoundedCorner(T)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:Ke.isRightRoundedCorner(T)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:Ke.isPreviousConnection(T)&&T instanceof ho?this.outlinePath_+=T.shape.pathLeft:Ke.isHat(T)?this.outlinePath_+=this.constants_.START_HAT.path:Ke.isSpacer(T)&&(this.outlinePath_+=Zt("h",T.width));this.outlinePath_+=Zt("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Zt("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const s=Ko(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=Zt("H",t.xPos+t.width)+s+Zt("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var s=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+Zt("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var T=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Zt("H",s)+t+Zt("v",T)+this.constants_.INSIDE_CORNERS.pathBottom+Zt("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=Zt("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let s=0,T="";for(let N=t.length-1,te;te=t[N];N--)Ke.isNextConnection(te)&&te instanceof ho?T+=te.shape.pathRight:Ke.isLeftSquareCorner(te)?T+=Zt("H",e.xPos):Ke.isLeftRoundedCorner(te)?T+=this.constants_.OUTSIDE_CORNERS.bottomLeft:Ke.isRightRoundedCorner(te)?(T+=this.constants_.OUTSIDE_CORNERS.bottomRight,s=this.constants_.OUTSIDE_CORNERS.rightHeight):Ke.isSpacer(te)&&(T+=Zt("h",-1*te.width));this.outlinePath_+=Zt("V",e.baseline-s),this.outlinePath_+=T}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=Ko(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=Zt("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let s=0,T;T=t.elements[s];s++)Ke.isInlineInput(T)?this.drawInlineInput_(T):(Ke.isIcon(T)||Ke.isField(T))&&this.layoutField_(T)}layoutField_(e){const t=e.centerline-e.height/2;let s=e.xPos;var T="";this.info_.RTL&&(s=-(s+e.width),e.flipRtl&&(s+=e.width,T="scale(-1 1)")),Ke.isIcon(e)?(T=e.icon,T.setOffsetInBlock(new Bt(s,t)),this.info_.isInsertionMarker&&T.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+s+","+t+")"+T),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,s=e.height,T=e.connectionOffsetY,N=e.connectionHeight+T;this.inlinePath_+=Wr(e.xPos+e.connectionWidth,e.centerline-s/2)+Zt("v",T)+e.shape.pathDown+Zt("v",s-N)+Zt("h",t-e.connectionWidth)+Zt("v",-s)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let s=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(s*=-1),e.connectionModel.setOffsetInBlock(s,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let s=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(s*=-1),t.connectionModel.setOffsetInBlock(s,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let s=e.xPos+e.width;this.info_.RTL&&(s*=-1),t.connectionModel.setOffsetInBlock(s,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,s=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-s:s,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const t of e.elements)if(t instanceof ho)if(t.highlighted)this.drawConnectionHighlightPath(t);else{let s,T;(T=(s=this.block_.pathObject).removeConnectionHighlight)==null||T.call(s,t.connectionModel)}}drawConnectionHighlightPath(e){const t=e.connectionModel;e=t.type===Qt.INPUT_VALUE||t.type===Qt.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const s=t.getSourceBlock();let T,N;(N=(T=s.pathObject).addConnectionHighlight)==null||N.call(T,t,e,t.getOffsetInBlock(),s.RTL)}getExpressionConnectionHighlightPath(e){let t="";return Ko(e.shape)?t=e.shape.pathDown(e.height):Ic(e.shape)&&(t=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,yr(0,-e)+Zt("v",e)+t+Zt("v",e)}getStatementConnectionHighlightPath(e){if(!Rl(e.shape))throw Error("Statement connections should have notch shapes");const t=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return yr(-t,0)+Zt("h",t)+e.shape.pathLeft+Zt("h",t)}};(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(n.Align$$module$build$src$core$inputs$align||(n.Align$$module$build$src$core$inputs$align={})),n.Align$$module$build$src$core$inputs$align;var Ns=class extends Tr{constructor(e,t,s){super(Tr.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==Tr.SKIP_SETUP&&(s?this.configure_(s):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&Ze(this.getTextElement(),this.class)}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&Oe(this.textElement_,this.class),e&&Ze(this.textElement_,e)),this.class=e}static fromJson(e){return new this(Dr(e.text),void 0,e)}};bi("field_label",Ns),Ns.prototype.DEFAULT_VALUE="";var tc=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=n.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,s){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&s)&&(typeof t=="string"&&(t=n.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(t),t.name=s,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,t){for(let s=0,T;T=this.fieldRow[s];s++)if(T.name===e)return T.dispose(),this.fieldRow.splice(s,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let T=0,N;N=this.fieldRow[T];T++)N.setVisible(e);if(this.connection){var s=this.connection;e?t=s.startTrackingAll():s.stopTrackingAll(),(s=s.targetBlock())&&(s.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},zi=class extends tc{constructor(e,t){super(e,t),this.name=e,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Ls=class extends tc{constructor(e,t){super(e,t),this.name=e,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Gi=class extends tc{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Qt.NEXT_STATEMENT)}},Ff;n.ValueInput$$module$build$src$core$inputs$value_input=class extends tc{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Qt.INPUT_VALUE)}},Ff={},Ff.ValueInput=n.ValueInput$$module$build$src$core$inputs$value_input;var nc=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new Op(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new Uf(this.constants_),this.bottomRow=new ya(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new ec(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let s=0,T;T=t[s];s++){const N=new Lf(this.constants_,T);this.isCollapsed&&!T.isShownWhenCollapsed()||e.elements.push(N)}t=void 0;for(let s=0,T;T=this.block_.inputList[s];s++)if(T.isVisible()){this.shouldStartNewRow_(T,t)&&(this.rows.push(e),e=new ec(this.constants_),this.inputRows.push(e));for(let N=0,te;te=T.fieldRow[N];N++)e.elements.push(new Do(this.constants_,te,T));this.addInput_(T,e),t=T}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new Df(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let s=this.topRow.hasLeftSquareCorner(this.block_)?Su:Ms;this.topRow.elements.push(new s(this.constants_)),t?(e=new ol(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Bf(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Gi&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,s=this.topRow.hasRightSquareCorner(this.block_)?Su:Ms,this.topRow.elements.push(new s(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Gi?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Su(this.constants_)):this.bottomRow.elements.push(new Ms(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Pf(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Su(this.constants_,"right")):this.bottomRow.elements.push(new Ms(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Tu(this.constants_,e)),t.hasInlineInput=!0):e instanceof Gi?(t.elements.push(new sl(this.constants_,e)),t.hasStatement=!0):e instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new id(this.constants_,e)),t.hasExternalInput=!0):(e instanceof zi||e instanceof Ls)&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?t instanceof Ls||e instanceof Gi||t instanceof Gi?!0:e instanceof n.ValueInput$$module$build$src$core$inputs$value_input||e instanceof zi||t instanceof n.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const s=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new wi(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(let T=0;T<s.length-1;T++){t.elements.push(s[T]);const N=this.getInRowSpacing_(s[T],s[T+1]);t.elements.push(new wi(this.constants_,N))}t.elements.push(s[s.length-1]),t.endsWithElemSpacer()&&t.elements.push(new wi(this.constants_,this.getInRowSpacing_(s[s.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&Ke.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&Ke.isInput(e)&&!t){if(Ke.isExternalInput(e))return this.constants_.NO_PADDING;if(Ke.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Ke.isStatementInput(e))return this.constants_.NO_PADDING}return e&&Ke.isLeftSquareCorner(e)&&t&&(Ke.isPreviousConnection(t)||Ke.isNextConnection(t))?t.notchOffset:e&&Ke.isLeftRoundedCorner(e)&&t&&(Ke.isPreviousConnection(t)||Ke.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,s=0;for(let N=0,te;te=this.rows[N];N++){if(te.measure(),t=Math.max(t,te.width),te.hasStatement){var T=te.getLastInput();let xe,We;T=te.width-((We=(xe=T)==null?void 0:xe.width)!=null?We:0),e=Math.max(e,T)}s=Math.max(s,te.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let N=0,te;te=this.rows[N];N++)te.hasStatement&&(te.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,s),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,s;s=this.rows[t];t++)if(s.hasStatement)this.alignStatementRow_(s);else{var e=s.width;e=this.getDesiredRowWidth_(s)-e,0<e&&this.addAlignmentPadding_(s,e),Ke.isTopOrBottomRow(s)&&(s.widthWithConnectedBlocks=s.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const s=e.getFirstSpacer(),T=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===n.Align$$module$build$src$core$inputs$align.LEFT&&T)T.width+=t;else if(e.align===n.Align$$module$build$src$core$inputs$align.CENTRE&&s&&T)s.width+=t/2,T.width+=t/2;else if(e.align===n.Align$$module$build$src$core$inputs$align.RIGHT&&s)s.width+=t;else if(T)T.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var s=e.width-t.width,T=this.statementEdge;s=T-s,0<s&&this.addAlignmentPadding_(e,s),s=e.width,T=this.getDesiredRowWidth_(e),t.width+=T-s,t.height=Math.max(t.height,e.height),e.width+=T-s,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var s=this.getSpacerRowHeight_(e,t);const T=this.getSpacerRowWidth_(e,t);return s=new jf(this.constants_,s,T),e.hasStatement&&(s.followsStatement=!0),t.hasStatement&&(s.precedesStatement=!0),s}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return Ke.isSpacer(t)?e.yPos+t.height/2:Ke.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,Ke.isNextConnection(t)?e+t.height/2:e-t.height/2):Ke.isTopRow(e)?Ke.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let s=0,T;T=e.elements[s];s++)Ke.isSpacer(T)&&(T.height=e.height),T.xPos=t,T.centerline=this.getElemCenterline_(e,T),t+=T.width}finalize_(){let e=0,t=0;for(let s=0,T;T=this.rows[s];s++)T.yPos=t,T.xPos=this.startX,t+=T.height,e=Math.max(e,T.widthWithConnectedBlocks),this.recordElemPositions_(T);if(this.outputConnection&&this.block_.nextConnection){const s=this.block_.nextConnection.targetBlock();s&&(e=Math.max(e,s.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let t;if(((t=this.outputConnection)==null?void 0:t.connectionModel)===e)return this.outputConnection;for(const s of this.rows)for(const T of s.elements)if(T instanceof ho&&T.connectionModel===e)return T;return null}},od=class extends as{constructor(e){if(super(e),this.type=ht.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Xi(e),this.ids=Q(e),this.wasShadow=e.isShadow(),this.oldJson=kn(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=Ir(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new od),t.oldXml=n.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||t.oldXml.tagName.toLowerCase()==="shadow",t.oldJson=e.oldJson,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const s=this.ids[e],T=t.getBlockById(s);T?T.dispose(!1):s===this.blockId&&console.warn("Can't delete non-existent block: "+s)}else Gt(this.oldJson,t)}};l(It.EVENT,ht.BLOCK_DELETE,od);var Qn=class{constructor(e,t){this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const t=Qt.INPUT_VALUE,s=this.getSourceBlock();var T=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let N;if(this.isConnected()){const xe=this.stashShadowState(),We=this.targetBlock();We.isShadow()?We.dispose(!1):(this.disconnectInternal(),N=We),this.applyShadowState(xe)}let te;ee()&&(te=new(be(ht.BLOCK_MOVE))(T),te.setReason(["connect"])),Ba(this,e),T.setParent(s),te&&(te.recordNew(),k(te)),N&&(e=this.type===t?N.outputConnection:N.previousConnection)&&((T=Qn.getConnectionForOrphanedConnection(T,e))?e.connect(T):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Qt.INPUT_VALUE||this.type===Qt.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=n.getGroup$$module$build$src$core$events$utils();t||n.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),n.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:s}=this.getParentAndChildConnections();if(!t||!s)throw Error("Source connection not connected.");const T=n.getGroup$$module$build$src$core$events$utils();T||n.setGroup$$module$build$src$core$events$utils(!0);let N;ee()&&(N=new(be(ht.BLOCK_MOVE))(s.getSourceBlock()),N.setReason(["disconnect"]));const te=this.targetConnection;te&&(te.targetConnection=null),this.targetConnection=null,e&&s.getSourceBlock().setParent(null),N&&(N.recordNew(),k(N)),s.getSourceBlock().isShadow()||t.respawnShadow_(),n.setGroup$$module$build$src$core$events$utils(T)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){if(this.getSourceBlock().isDeadOrDying())return!1;var s;return t=(s=e.getInput(t))==null?void 0:s.connection,s=this.targetBlock(),s&&s!==e||!t||t.targetConnection===this?!1:(t.isConnected()&&t.disconnect(),t.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?zo(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?kn(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let s=0;s<t.length;s++)if(t[s].connection===this){e=t[s];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let s=0,T;T=e.inputList[s];s++)if(T.connection===this){t=T;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var t=this.getSourceBlock();const s=this.getShadowState(),T=this.getShadowDom();if(t.isDeadOrDying()||!s&&!T)return null;if(s)return t=In(s,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(T){if(t=gs(T,t.workspace),e)if(this.type===Qt.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Qt.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow(e){e&&(this.shadowDom=zo(e),this.shadowState=kn(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===Qt.OUTPUT_VALUE)return Hr(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const s=t.getConnectionChecker();return e&&s.canConnect(t,e,!1)?e:null}};Qn.CAN_CONNECT=0,Qn.REASON_SELF_CONNECTION=1,Qn.REASON_WRONG_TYPE=2,Qn.REASON_TARGET_NULL=3,Qn.REASON_CHECKS_FAILED=4,Qn.REASON_DIFFERENT_WORKSPACES=5,Qn.REASON_SHADOW_PARENT=6,Qn.REASON_DRAG_CHECKS_FAILED=7,Qn.REASON_PREVIOUS_AND_OUTPUT=8;var Ds=class{constructor(e,t,s){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=s&&!e.getBlockById(s)?s:h(),e.setBlockById(this.id,this),this.xy=new Bt(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,s=Oi[t],!s||typeof s!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,s)}e.addTopBlock(this),e.addTypedBlock(this),new.target===Ds&&this.doInit_()}doInit_(){const e=n.getGroup$$module$build$src$core$events$utils();e||n.setGroup$$module$build$src$core$events$utils(!0);const t=C();try{typeof this.init=="function"&&(n.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),n.setRecordUndo$$module$build$src$core$events$utils(t)),ee()&&k(new(be(ht.BLOCK_CREATE))(this))}finally{n.setGroup$$module$build$src$core$events$utils(e),n.setRecordUndo$$module$build$src$core$events$utils(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),ee()&&k(new(be(ht.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let t=null,s;(s=this.outputConnection)!=null&&s.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e==null||e.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e==null||e.onFailedConnect(t))}getOnlyValueConnection(){let e=null;for(let t=0;t<this.inputList.length;t++){const s=this.inputList[t].connection;if(s&&s.type===Qt.INPUT_VALUE&&s.targetConnection){if(e)return null;e=s}}return e}unplugFromStack(e){let t=null;var s;if((s=this.previousConnection)!=null&&s.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),s=this.getNextBlock(),e&&s&&!s.isShadow()){let T,N;e=(N=(T=this.nextConnection)==null?void 0:T.targetConnection)!=null?N:null,e==null||e.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,s;s=this.inputList[t];t++)s.connection&&e.push(s.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const s=t.targetBlock();if(!s||e&&s.isShadow())return t;t=s.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,s;s=this.inputList[t];t++)if(s.connection&&s.connection.targetBlock()===e)return s;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let s=0,T;T=this.inputList[s];s++)if(T.connection){var t=T.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),s=!!t;if(s&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!s&&e)throw Error("Block not connected to new parent.");if(s&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?at(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],s=this.getChildren(e);for(let T,N=0;T=s[N];N++)t.push(...T.getDescendants(e));return t}isDeletable(){return this.deletable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(ce(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(let t=0,s;s=this.inputList[t];t++)for(let T=0,N;N=s.fieldRow[T];T++)N.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||1<e.fieldRow.length)return!1;return!0}getMatchingConnection(e,t){const s=this.getConnections_(!0);if(e=e.getConnections_(!0),s.length!==e.length)throw Error("Connection lists did not match in length.");for(let T=0;T<e.length;T++)if(e[T]===t)return s[T];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return Oa(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=Ra(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let t=0,s;s=this.inputList[t];t++)for(let T=0,N;N=s.fieldRow[T];T++)if(N.name===e)return N;return null}getVars(){const e=[];for(let t=0,s;s=this.inputList[t];t++)for(let T=0,N;N=s.fieldRow[T];T++)N.referencesVariables()&&e.push(N.getValue());return e}getVarModels(){const e=[];for(let t=0,s;s=this.inputList[t];t++)for(let T=0,N;N=s.fieldRow[T];T++)if(N.referencesVariables()){const te=this.workspace.getVariableById(N.getValue());te&&e.push(te)}return e}updateVarName(e){for(let t=0,s;s=this.inputList[t];t++)for(let T=0,N;N=s.fieldRow[T];T++)N.referencesVariables()&&e.getId()===N.getValue()&&N.refreshVariableName()}renameVarById(e,t){for(let s=0,T;T=this.inputList[s];s++)for(let N=0,te;te=T.fieldRow[N];N++)te.referencesVariables()&&e===te.getValue()&&te.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const s=this.getField(t);if(!s)throw Error('Field "'+t+'" not found.');s.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Qt.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Qt.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Qt.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(k(new(be(ht.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof zi&&this.inputList[e]instanceof zi)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof n.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof zi)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof Ls)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}get disabled(){return S("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(di)}set disabled(e){S("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(e,di)}setEnabled(e){S("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!e,di)}setDisabledReason(e,t){e||this.workspace.options.disable||!this.hasDisabledReason(di)||t==di||this.setDisabledReason(!1,di),this.disabledReasons.has(t)!==e&&(e?this.disabledReasons.add(t):this.disabledReasons.delete(t),e=new(be(ht.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(t),k(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(k(new(be(ht.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let T=2;T<t.length;T++)t[T-2]==="("&&t[T]===")"&&(t[T-2]=t[T-1],t.splice(T-1,2));let s="";return t=t.reduce((T,N)=>(T=T+(s==="("||N===")"?"":" ")+N,s=N[N.length-1],T),""),t=t.trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const T of this.inputList)if(T.name!=Mo){for(const N of T.fieldRow)t.push(N.getText());if(T.connection){const N=T.connection.targetBlock();if(N){var s=T.connection;let te=s.getCheck();!te&&s.targetConnection&&(te=s.targetConnection.getCheck()),(s=!!te&&(te.includes("Boolean")||te.includes("Number")))&&t.push("("),t.push(...N.toTokens(e)),s&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new n.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new Gi(e,this))}appendDummyInput(e=""){return this.appendInput(new zi(e,this))}appendEndRowInput(e=""){return this.appendInput(new Ls(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=u(It.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");for(var s=0;e["args"+s];){if(e["message"+s]===void 0)throw Error(t+`args${s} must have a corresponding message (message${s}).`);s++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,t):this.jsonInitColour(e,t),s=0;e["message"+s]!==void 0;)this.interpolate(e["message"+s],e["args"+s]||[],e["implicitAlign"+s]||e["lastDummyAlign"+s],t),s++;if(e.inputsInline!==void 0&&(n.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),n.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(s=Dr(e.tooltip),this.setTooltip(s)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(s=Dr(e.helpUrl),this.setHelpUrl(s)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&xl(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)xl(e[t],this,!1)}jsonInitColour(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const s in e)this[s]!==void 0&&t.push(s);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate(e,t,s,T){e=_c(e),this.validateTokens(e,t.length),t=this.interpolateArguments(e,t,s),s=[];for(let N=0,te;te=t[N];N++)if(this.isInputKeyword(te.type)){if(e=this.inputFromJson(te,T)){for(let xe=0,We;We=s[xe];xe++)e.appendField(We[0],We[1]);s.length=0}}else(e=this.fieldFromJson(te))&&s.push([e,te.name])}validateTokens(e,t){const s=[];let T=0;for(let N=0;N<e.length;N++){const te=e[N];if(typeof te=="number"){if(1>te||te>t)throw Error('Block "'+this.type+'": Message index %'+te+" out of range.");if(s[te])throw Error('Block "'+this.type+'": Message index %'+te+" duplicated.");s[te]=!0,T++}}if(T!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments(e,t,s){const T=[];for(let te=0;te<e.length;te++){var N=e[te];if(typeof N=="number"&&(N=t[N-1]),typeof N=="string"){if(N===`
`)N={type:"input_end_row"},s&&(N.align=s);else if(N=this.stringToFieldJson(N),!N)continue}T.push(N)}return(e=T.length)&&!this.isInputKeyword(T[e-1].type)&&(e={type:"input_dummy"},s&&(e.align=s),T.push(e)),T}fieldFromJson(e){const t=n.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):t}inputFromJson(e,t){var s={LEFT:n.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:n.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:n.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:n.Align$$module$build$src$core$inputs$align.CENTRE};let T;switch(e.type){case"input_value":T=this.appendValueInput(e.name);break;case"input_statement":T=this.appendStatementInput(e.name);break;case"input_dummy":T=this.appendDummyInput(e.name);break;case"input_end_row":T=this.appendEndRowInput(e.name);break;default:T=this.appendInputFromRegistry(e.type,e.name)}return T?(e.check&&T.setCheck(e.check),e.align&&(s=s[e.align.toUpperCase()],s===void 0?console.warn(t+"Illegal align value: ",e.align):T.setAlign(s)),T):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||a(It.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var s=-1,T=t?-1:this.inputList.length;for(let N=0,te;te=this.inputList[N];N++)if(te.name===e){if(s=N,T!==-1)break}else if(t&&te.name===t&&(T=N,s!==-1))break;if(s===-1)throw Error('Named input "'+e+'" not found.');if(T===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(s,T)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const s=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,s)}removeInput(e,t){for(let s=0,T;T=this.inputList[s];s++)if(T.name===e)return T instanceof Gi&&this.statementInputCount--,T.dispose(),this.inputList.splice(s,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,s;s=this.inputList[t];t++)if(s.name===e)return s;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return(t=(e=this.getIcon(Ur.COMMENT))==null?void 0:e.getText())!=null?t:null}setCommentText(e){var t;let s;const T=(s=(t=this.getIcon(Ur.COMMENT))==null?void 0:t.getText())!=null?s:null;if(T!==e){if(e!==null){if(t=this.getIcon(Ur.COMMENT),!t){if(t=u(It.ICON,Ur.COMMENT.toString(),!1),!t)throw Error("No comment icon class is registered, so a comment cannot be set");if(t=new t(this),!Ju(t))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");t=this.addIcon(t)}n.disable$$module$build$src$core$events$utils(),t.setText(e),n.enable$$module$build$src$core$events$utils()}else this.removeIcon(Ur.COMMENT);k(new(be(ht.BLOCK_CHANGE))(this,"comment",null,T,e))}}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new cs(e);return this.icons.push(e),this.icons.sort((t,s)=>t.getWeight()-s.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return(t=this.getIcon(e))==null||t.dispose(),this.icons=this.icons.filter(s=>!s.getType().equals(e)),!0}hasIcon(e){return this.icons.some(t=>t.getType().equals(e))}getIcon(e){return e instanceof Ur?this.icons.find(t=>t.getType().equals(e)):this.icons.find(t=>t.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,t,s){if(this.parentBlock_)throw Error("Block has parent");const T=new(be(ht.BLOCK_MOVE))(this);s&&T.setReason(s),this.xy.translate(e,t),T.recordNew(),k(T)}makeConnection_(e){return new Qn(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let s=0,T;T=this.inputList[s];s++)if(T.connection){var t=T.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};Ds.COLLAPSED_INPUT_NAME=Mo,Ds.COLLAPSED_FIELD_NAME=au;var Li=class{constructor(e,t,s,T){this.workspace=e,this.targetWorkspace=t,this.isFlyoutLabel=T,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=s.text,this.position=new Bt(0,0),this.callbackKey=s.callbackKey||s.callbackkey,this.cssClass=s["web-class"]||null,this.info=s}createDom(){var e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=Ue(rt.G,{class:e},this.workspace.getCanvas());let t;this.isFlyoutLabel||(t=Ue(rt.RECT,{class:"blocklyFlyoutButtonShadow",rx:Li.BORDER_RADIUS,ry:Li.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=Ue(rt.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Li.BORDER_RADIUS,ry:Li.BORDER_RADIUS},this.svgGroup);const s=Ue(rt.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var T=Dr(this.text);this.workspace.RTL&&(T+=""),s.textContent=T,this.isFlyoutLabel&&(this.svgText=s,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const N=Dt(s,"fontSize"),te=Dt(s,"fontWeight"),xe=Dt(s,"fontFamily");if(this.width=ge(s,N,te,xe),T=ve(T,N,te,xe),this.height=T.height,!this.isFlyoutLabel){this.width+=2*Li.TEXT_MARGIN_X,this.height+=2*Li.TEXT_MARGIN_Y;let We;(We=t)==null||We.setAttribute("width",String(this.width));let vt;(vt=t)==null||vt.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),s.setAttribute("x",String(this.width/2)),s.setAttribute("y",String(this.height/2-T.height/2+T.baseline)),this.updateTransform(),this.onMouseUpWrapper=ue(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&Ae(this.onMouseUpWrapper),this.svgGroup&&Pe(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Li.TEXT_MARGIN_X=5,Li.TEXT_MARGIN_Y=2,Li.BORDER_RADIUS=4,He(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var Rt=class{constructor(e,t,s){if(this.wsCoordinate=null,!t)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=Rt.isConnectionType(e),this.location=t,this.processParams(s||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const t=e.getSourceBlock();for(e=t.inputList.indexOf(e),e+=1;e<t.inputList.length;e++){const s=t.inputList[e],T=s.fieldRow;for(let N=0;N<T.length;N++){const te=T[N];if(te.isClickable()||Rt.NAVIGATE_ALL_FIELDS)return Rt.createFieldNode(te)}if(s.connection)return Rt.createInputNode(s)}return null}findNextForField(){var e=this.location,t=e.getParentInput();const s=e.getSourceBlock();if(!s)throw Error("The current AST location is not associated with a block");var T=s.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;T<s.inputList.length;T++){t=s.inputList[T];const N=t.fieldRow;for(;e<N.length;){if(N[e].isClickable()||Rt.NAVIGATE_ALL_FIELDS)return Rt.createFieldNode(N[e]);e++}if(e=0,t.connection)return Rt.createInputNode(t)}return null}findPrevForInput(){const e=this.location.getParentInput(),t=e.getSourceBlock();for(var s=t.inputList.indexOf(e);0<=s;s--){var T=t.inputList[s];if(T.connection&&T!==e)return Rt.createInputNode(T);T=T.fieldRow;for(let N=T.length-1;0<=N;N--){const te=T[N];if(te.isClickable()||Rt.NAVIGATE_ALL_FIELDS)return Rt.createFieldNode(te)}}return null}findPrevForField(){var e=this.location;const t=e.getParentInput(),s=e.getSourceBlock();if(!s)throw Error("The current AST location is not associated with a block");var T=s.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)-1;0<=T;T--){var N=s.inputList[T];if(N.connection&&N!==t)return Rt.createInputNode(N);for(N=N.fieldRow;-1<e;){if(N[e].isClickable()||Rt.NAVIGATE_ALL_FIELDS)return Rt.createFieldNode(N[e]);e--}0<=T-1&&(e=s.inputList[T-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var t=this.getLocation();if(t.getSourceBlock){var s=t.getSourceBlock();s&&(t=s)}if(!t||t.isDeadOrDying())return null;if(t.workspace.isFlyout)return this.navigateFlyoutContents(e);s=t.getRootBlock(),t=s.workspace.getTopBlocks(!0);for(let T=0;T<t.length;T++)if(s.id===t[T].id)return e=T+(e?1:-1),e===-1||e===t.length?null:Rt.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}navigateFlyoutContents(e){let t;switch(this.getType()){case Rt.types.STACK:t=this.getLocation();var s=t.workspace.targetWorkspace;break;case Rt.types.BUTTON:t=this.getLocation(),s=t.getTargetWorkspace();break;default:return null}return s=s.getFlyout(),s&&(e=this.findNextLocationInFlyout(s.getContents(),t,e))?e.type==="button"&&e.button?Rt.createButtonNode(e.button):e.type==="block"&&e.block?Rt.createStackNode(e.block):null:null}findNextLocationInFlyout(e,t,s){const T=e.findIndex(N=>t instanceof Ds&&N.block===t||t instanceof Li&&N.button===t);return 0>T?null:(s=s?T+1:T-1,s===-1||s===e.length?null:e[s])}findTopASTNodeForBlock(e){const t=Cl(e);return t?Rt.createConnectionNode(t):Rt.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const t=Cl(e);return t&&t.targetConnection&&t.targetConnection.getParentInput()?Rt.createInputNode(t.targetConnection.getParentInput()):Rt.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let t=0;t<e.length;t++){const s=e[t],T=s.fieldRow;for(let N=0;N<T.length;N++){const te=T[N];if(te.isClickable()||Rt.NAVIGATE_ALL_FIELDS)return Rt.createFieldNode(te)}if(s.connection)return Rt.createInputNode(s)}return null}getSourceBlock(){return this.getType()===Rt.types.BLOCK?this.getLocation():this.getType()===Rt.types.STACK?this.getLocation():this.getType()===Rt.types.WORKSPACE||this.getType()===Rt.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Rt.types.STACK:return this.navigateBetweenStacks(!0);case Rt.types.OUTPUT:return Rt.createBlockNode(this.location.getSourceBlock());case Rt.types.FIELD:return this.findNextForField();case Rt.types.INPUT:return this.findNextForInput();case Rt.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return Rt.createConnectionNode(e);case Rt.types.PREVIOUS:return Rt.createBlockNode(this.location.getSourceBlock());case Rt.types.NEXT:return Rt.createConnectionNode(this.location.targetConnection);case Rt.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case Rt.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return Rt.createStackNode(e[0]);break;case Rt.types.STACK:return this.findTopASTNodeForBlock(this.location);case Rt.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Rt.types.INPUT:return Rt.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Rt.types.STACK:return this.navigateBetweenStacks(!1);case Rt.types.FIELD:return this.findPrevForField();case Rt.types.INPUT:return this.findPrevForInput();case Rt.types.BLOCK:var e=Cl(this.location);if(!e)break;return Rt.createConnectionNode(e);case Rt.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return Rt.createConnectionNode(e);break;case Rt.types.NEXT:return Rt.createBlockNode(this.location.getSourceBlock());case Rt.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case Rt.types.STACK:var e=this.location,t=e.getRelativeToSurfaceXY();return t=new Bt(t.x,t.y+Rt.DEFAULT_OFFSET_Y),Rt.createWorkspaceNode(e.workspace,t);case Rt.types.OUTPUT:return e=this.location,(t=e.targetConnection)?Rt.createConnectionNode(t):Rt.createStackNode(e.getSourceBlock());case Rt.types.FIELD:if(e=this.location.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return Rt.createBlockNode(e);case Rt.types.INPUT:return Rt.createBlockNode(this.location.getSourceBlock());case Rt.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Rt.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case Rt.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case Rt.types.PREVIOUS:case Rt.types.NEXT:case Rt.types.INPUT:case Rt.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new Rt(Rt.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const t=e.type;return t===Qt.INPUT_VALUE||t===Qt.NEXT_STATEMENT&&e.getParentInput()?Rt.createInputNode(e.getParentInput()):t===Qt.NEXT_STATEMENT?new Rt(Rt.types.NEXT,e):t===Qt.OUTPUT_VALUE?new Rt(Rt.types.OUTPUT,e):t===Qt.PREVIOUS_STATEMENT?new Rt(Rt.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new Rt(Rt.types.INPUT,e.connection):null}static createBlockNode(e){return e?new Rt(Rt.types.BLOCK,e):null}static createStackNode(e){return e?new Rt(Rt.types.STACK,e):null}static createButtonNode(e){return e?new Rt(Rt.types.BUTTON,e):null}static createWorkspaceNode(e,t){return t&&e?new Rt(Rt.types.WORKSPACE,e,{wsCoordinate:t}):null}static createTopNode(e){const t=Cl(e);return t?Rt.createConnectionNode(t):Rt.createBlockNode(e)}};Rt.NAVIGATE_ALL_FIELDS=!1,Rt.DEFAULT_OFFSET_Y=-20,function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace",e.BUTTON="button"}(Rt||(Rt={}));var Hf=class extends eo{constructor(e,t,s,T){let N=e?e.workspace.id:void 0;T&&T.getType()===Rt.types.WORKSPACE&&(N=T.getLocation().id),super(N),this.type=ht.MARKER_MOVE,this.blockId=e==null?void 0:e.id,this.oldNode=s||void 0,this.newNode=T,this.isCursor=t}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Hf),t.isCursor=e.isCursor,t.blockId=e.blockId,t.oldNode=e.oldNode,t.newNode=e.newNode,t}};l(It.EVENT,ht.MARKER_MOVE,Hf);var Vf="blocklyCursor",zf="blocklyMarker",sd=.75,Ou=class{constructor(e,t,s){this.workspace=e,this.marker=s,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=t,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=s.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?Vf:zf;return this.svgGroup_=Ue(rt.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,t){if(t){this.constants_=this.workspace.getRenderer().getConstants();var s=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||s,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent(e,t),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const t=e.getLocation().type;e.getType()===Rt.types.BLOCK?this.showWithBlock_(e):e.getType()===Rt.types.OUTPUT?this.showWithOutput_(e):t===Qt.INPUT_VALUE?this.showWithInput_(e):t===Qt.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===Rt.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===Rt.types.FIELD?this.showWithField_(e):e.getType()===Rt.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===Rt.types.STACK?this.showWithStack_(e):e.getType()===Rt.types.BUTTON&&this.showWithButton_(e)}showWithBlockPrevOutput(e){e=e.getSourceBlock();const t=e.width;var s=e.height,T=s*sd;const N=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(s=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,N,T,s)):e.outputConnection?(T=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,s,T)):this.positionBlock_(t,N,T),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const t=e.getSize().width,s=e.getSize().height;this.positionRect_(0,0,t,s),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const t=e.getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()}showWithNext_(e){var t=e.getLocation();e=t.getSourceBlock();let s=0;t=t.getOffsetInBlock().y;const T=e.getHeightWidth().width;this.workspace.RTL&&(s=-T),this.positionLine_(s,t,T),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var t=e.getHeightWidth();const s=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;const T=-this.constants_.CURSOR_STACK_PADDING/2,N=-this.constants_.CURSOR_STACK_PADDING/2;let te=T;this.workspace.RTL&&(te=-(s+T)),this.positionRect_(te,N,s,t),this.setParent_(e),this.showCurrent_()}showWithButton_(e){e=e.getLocation();const t=e.width+this.constants_.CURSOR_STACK_PADDING,s=e.height+this.constants_.CURSOR_STACK_PADDING,T=-this.constants_.CURSOR_STACK_PADDING/2,N=-this.constants_.CURSOR_STACK_PADDING/2;let te=T;this.workspace.RTL&&(te=-(t+T)),this.positionRect_(te,N,t,s),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,t,s){if(e=yr(-t,s)+Zt("V",-t)+Zt("H",e+2*t)+Zt("V",s),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const t=e.getOffsetInBlock().x,s=e.getOffsetInBlock().y;e=Wr(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+s+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,t,s){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${t}`),this.markerSvgLine_.setAttribute("width",`${s}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,t,s){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=yr(e,0)+Zt("h",-(e-s.width))+Zt("v",this.constants_.TAB_OFFSET_FROM_TOP)+s.pathDown+Zt("V",t)+Zt("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,t,s,T){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=yr(-t,s)+Zt("V",-t)+Zt("H",this.constants_.NOTCH_OFFSET_LEFT)+T.pathLeft+Zt("H",e+2*t)+Zt("V",s),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,t,s,T){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${t}`),this.markerSvgRect_.setAttribute("width",`${s}`),this.markerSvgRect_.setAttribute("height",`${T}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,t){const s=t.getSourceBlock();e=new(be(ht.MARKER_MOVE))(s,this.isCursor(),e,t),k(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=Ue(rt.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=Ue(rt.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=Ue(rt.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=Ue(rt.PATH,{transform:""},this.markerSvg_),this.markerBlock_=Ue(rt.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();Ue(rt.ANIMATE,e,this.markerSvgLine_),Ue(rt.ANIMATE,e,this.markerInput_),Ue(rt.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&Pe(this.svgGroup_)}},xu=class{constructor(e,t,s){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=s,this.style=t,this.svgRoot=e,this.svgPath=Ue(rt.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?Ze(this.svgRoot,e):Oe(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}addConnectionHighlight(e,t,s,T){if(this.connectionHighlights.has(e)){if(this.currentHighlightMatchesNew(e,t,s))return;this.removeConnectionHighlight(e)}t=Ue(rt.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:`translate(${s.x}, ${s.y})`+(T?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(e,t)}currentHighlightMatchesNew(e,t,s){let T;const N=(T=this.connectionHighlights.get(e))==null?void 0:T.getAttribute("d");return e=this.highlightOffsets.get(e),N===t&&Bt.equals(e,s)}removeConnectionHighlight(e){const t=this.connectionHighlights.get(e);t&&(Pe(t),this.connectionHighlights.delete(e))}},Wi=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,n.setSelected$$module$build$src$core$common(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){n.disable$$module$build$src$core$events$utils(),this.hidePreview(),n.enable$$module$build$src$core$events$utils();var{local:e,closest:t}=this.activeCandidate;e.connect(t);var s=e.isSuperior()?t:e,T=this.topBlock.getRootBlock();_t().then(()=>{Js(s.getSourceBlock()),setTimeout(()=>{T.bringToFront()},0)})}}update(e,t){const s=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!s,t))||this.shouldUpdatePreviews(s,e))&&(n.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(s),this.maybeShowPreview(s),n.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){n.disable$$module$build$src$core$events$utils();let t;try{const s=kn(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!s)throw Error(`Failed to serialize source block. ${e.toDevString()}`);t=Gt(s,this.workspace);for(const T of t.getDescendants(!1))T.setInsertionMarker(!0);t.initSvg(),t.getSvgRoot().setAttribute("visibility","hidden")}finally{n.enable$$module$build$src$core$events$utils()}return t}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),t=this.topBlock.lastConnectionInStack(!0);return t&&t!==this.topBlock.nextConnection&&(e.push(t),this.lastOnStack=t),e}shouldUpdatePreviews(e,t){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:s,closest:T}=this.activeCandidate;if(T===e.closest&&s===e.local)return!1;const N=s.x+t.x-T.x;return t=s.y+t.y-T.y,e.radius<Math.sqrt(N*N+t*t)-n.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let t=this.getStartRadius(),s=null;for(let T=0;T<this.availableConnections.length;T++){const N=this.availableConnections[T],te=N.closest(t,e);te.connection&&(s={closest:te.connection,local:N,radius:te.radius},t=te.radius)}return s}getStartRadius(){return this.activeCandidate?n.config$$module$build$src$core$config.connectingSnapRadius:n.config$$module$build$src$core$config.snapRadius}shouldDelete(e,t){return t&&this.workspace.getComponentManager().hasCapability(t.id,$r.Capability.DELETE_AREA)?t.wouldDelete(this.topBlock):!1}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var t=e.closest,s;t===((s=this.activeCandidate)==null?void 0:s.closest)||t.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const t=this.workspace.getRenderer();switch(t.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case Wi.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case Wi.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case Wi.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}t.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(!e)this.hidePreview();else if(this.activeCandidate){const t=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||t||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const t=(e=this.activeCandidate)==null?void 0:e.closest;t&&t.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(t)&&t.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:t,closest:s}=e;let T=(e=this.lastOnStack&&t===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!T)throw Error("Cannot show the insertion marker because there is no insertion marker block");let N;try{N=T.getMatchingConnection(t.getSourceBlock(),t)}catch{if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),T=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),T=this.firstMarker=this.createMarkerBlock(this.topBlock)),!T)throw Error("Cannot show the insertion marker because there is no insertion marker block");N=T.getMatchingConnection(t.getSourceBlock(),t)}if(!N)throw Error("Cannot show the insertion marker because there is no associated connection");if(N===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");T.queueRender(),wt(),N.connect(s);const te={x:s.x-N.x,y:s.y-N.y},xe=N.getOffsetInBlock().clone(),We=N;_t().then(()=>{let vt;(vt=T)==null||vt.positionNearConnection(We,te,xe);let rn;(rn=T)==null||rn.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=N}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,t=e.getSourceBlock(),s=t.outputConnection,T;if((T=t.previousConnection)!=null&&T.targetConnection||s!=null&&s.targetConnection)t.unplug(!0);else{let N;(N=e.targetBlock())==null||N.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=t.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){n.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{n.enable$$module$build$src$core$events$utils()}}}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Wi||(Wi={})),Wi.PREVIEW_TYPE;var Po=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())}refreshDom(e,t){const s=this.getConstants();s.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=s.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new al}makeRenderInfo_(e){return new nc(this,e)}makeDrawer_(e,t){return new ll(e,t)}makeMarkerDrawer(e,t){return new Ou(e,this.getConstants(),t)}makePathObject(e,t){return new xu(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,s){return!!Qn.getConnectionForOrphanedConnection(e,s===Qt.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}getConnectionPreviewMethod(e,t,s){return S("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===Qt.OUTPUT_VALUE||t.type===Qt.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(s,e.targetBlock(),t.type)?Wi.PREVIEW_TYPE.INSERTION_MARKER:Wi.PREVIEW_TYPE.REPLACEMENT_FADE:Wi.PREVIEW_TYPE.INSERTION_MARKER}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},qn={};qn.BottomRow=ya,qn.Connection=ho,qn.ConstantProvider=al,qn.Drawer=ll,qn.ExternalValueInput=id,qn.Field=Do,qn.Hat=ol,qn.Icon=Lf,qn.InRowSpacer=wi,qn.InlineInput=Tu,qn.InputConnection=Is,qn.InputRow=ec,qn.JaggedEdge=Df,qn.MarkerSvg=Ou,qn.Measurable=hs,qn.NextConnection=Pf,qn.OutputConnection=Op,qn.PathObject=xu,qn.PreviousConnection=Bf,qn.RenderInfo=nc,qn.Renderer=Po,qn.RoundCorner=Ms,qn.Row=Ql,qn.SpacerRow=jf,qn.SquareCorner=Su,qn.StatementInput=sl,qn.TopRow=Uf,qn.Types=Ke,qn.init=Nc,qn.register=kl,qn.unregister=ap;var Ps=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&Oe(e,t),(t=this.theme.getClassName())&&Ze(e,t));for(let s=0,T;T=this.subscribedWorkspaces[s];s++)T.refreshTheme();for(const[s,T]of this.componentDB)for(const N of T){e=N.element,t=N.propertyName;const te=this.theme&&this.theme.getComponentStyle(s);e.style.setProperty(t,te||"")}for(const s of this.subscribedWorkspaces)s.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!at(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,s){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:s}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(s,t||"")}unsubscribe(e){if(e)for(const[t,s]of this.componentDB){for(let T=s.length-1;0<=T;T--)s[T].element===e&&s.splice(T,1);s.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},cl="VARIABLE_DYNAMIC",Bo={CATEGORY_NAME:cl};Bo.flyoutCategory=Pr,Bo.flyoutCategoryBlocks=Il,Bo.onCreateVariableButtonClick_Colour=yi,Bo.onCreateVariableButtonClick_Number=Dc,Bo.onCreateVariableButtonClick_String=Lc;var Bs=30,ul=[];ul[Qt.INPUT_VALUE]=Qt.OUTPUT_VALUE,ul[Qt.OUTPUT_VALUE]=Qt.INPUT_VALUE,ul[Qt.NEXT_STATEMENT]=Qt.PREVIOUS_STATEMENT,ul[Qt.PREVIOUS_STATEMENT]=Qt.NEXT_STATEMENT;var ad="RENAME_VARIABLE_ID",hl="DELETE_VARIABLE_ID",xp=class{canConnect(e,t,s,T){return this.canConnectWithReason(e,t,s,T)===Qn.CAN_CONNECT}canConnectWithReason(e,t,s,T){const N=this.doSafetyChecks(e,t);return N!==Qn.CAN_CONNECT?N:this.doTypeChecks(e,t)?s&&!this.doDragChecks(e,t,T||0)?Qn.REASON_DRAG_CHECKS_FAILED:Qn.CAN_CONNECT:Qn.REASON_CHECKS_FAILED}getErrorMessage(e,t,s){switch(e){case Qn.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Qn.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Qn.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Qn.REASON_TARGET_NULL:return"Target connection is null.";case Qn.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+s.getCheck());case Qn.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Qn.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Qn.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return Qn.REASON_TARGET_NULL;let s,T,N;return e.isSuperior()?(s=e.getSourceBlock(),T=t.getSourceBlock(),N=t):(T=e.getSourceBlock(),s=t.getSourceBlock(),N=e,e=t),s===T?Qn.REASON_SELF_CONNECTION:N.type!==ul[e.type]?Qn.REASON_WRONG_TYPE:s.workspace!==T.workspace?Qn.REASON_DIFFERENT_WORKSPACES:s.isShadow()&&!T.isShadow()?Qn.REASON_SHADOW_PARENT:N.type===Qt.OUTPUT_VALUE&&T.previousConnection&&T.previousConnection.isConnected()||N.type===Qt.PREVIOUS_STATEMENT&&T.outputConnection&&T.outputConnection.isConnected()?Qn.REASON_PREVIOUS_AND_OUTPUT:Qn.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let s=0;s<e.length;s++)if(t.includes(e[s]))return!0;return!1}doDragChecks(e,t,s){if(e.distanceFrom(t)>s||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case Qt.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case Qt.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Qt.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case Qt.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return!Ul.includes(t)}canConnectToPrevious_(e,t){return e.targetConnection||Ul.includes(t)?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};l(It.CONNECTION_CHECKER,_i,xp);var ld=class extends vr{constructor(e){super(e),this.type=ht.VAR_DELETE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new ld),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)}};l(It.EVENT,ht.VAR_DELETE,ld);var rc=class extends vr{constructor(e,t){super(e),this.type=ht.VAR_RENAME,e&&(this.oldName=e.name,this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new rc),t.oldName=e.oldName,t.newName=e.newName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)}};l(It.EVENT,ht.VAR_RENAME,rc);var cd=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.name!==t){var s=this.getVariable(t,e.type),T=this.workspace.getAllBlocks(!1),N=n.getGroup$$module$build$src$core$events$utils();N||n.setGroup$$module$build$src$core$events$utils(!0);try{s&&s.getId()!==e.getId()?this.renameVariableWithConflict(e,t,s,T):this.renameVariableAndUses(e,t,T)}finally{n.setGroup$$module$build$src$core$events$utils(N)}}}renameVariableById(e,t){const s=this.getVariableById(e);if(!s)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(s,t)}renameVariableAndUses(e,t,s){for(k(new(be(ht.VAR_RENAME))(e,t)),e.name=t,t=0;t<s.length;t++)s[t].updateVarName(e)}renameVariableWithConflict(e,t,s,T){const N=e.type;for(t!==s.name&&this.renameVariableAndUses(s,t,T),t=0;t<T.length;t++)T[t].renameVarById(e.getId(),s.getId());k(new(be(ht.VAR_DELETE))(e)),at(this.variableMap.get(N),e)}createVariable(e,t,s){var T=this.getVariable(e,t);if(T){if(s&&T.getId()!==s)throw Error('Variable "'+e+'" is already in use and its id is "'+T.getId()+'" which conflicts with the passed in id, "'+s+'".');return T}if(s&&this.getVariableById(s))throw Error('Variable id, "'+s+'", is already in use.');return T=s||h(),t=t||"",T=new so(this.workspace,e,t,T),e=this.variableMap.get(t)||[],e.push(T),this.variableMap.delete(t),this.variableMap.set(t,e),k(new(be(ht.VAR_CREATE))(T)),T}deleteVariable(e){const t=e.getId(),s=this.variableMap.get(e.type);if(s){for(let T=0;T<s.length;T++)if(s[T].getId()===t){s.splice(T,1),k(new(be(ht.VAR_DELETE))(e)),s.length===0&&this.variableMap.delete(e.type);break}}}deleteVariableById(e){const t=this.getVariableById(e);if(t){var s=t.name;const T=this.getVariableUsesById(e);for(let N=0,te;te=T[N];N++)if(te.type==="procedures_defnoreturn"||te.type==="procedures_defreturn"){e=String(te.getFieldValue("NAME")),s=n.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",s).replace("%2",e),Rn(s);return}1<T.length?(s=n.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(T.length)).replace("%2",s),fr(s,N=>{N&&t&&this.deleteVariableInternal(t,T)})):this.deleteVariableInternal(t,T)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,t){const s=n.getGroup$$module$build$src$core$events$utils();s||n.setGroup$$module$build$src$core$events$utils(!0);try{for(let T=0;T<t.length;T++)t[T].dispose(!0);this.deleteVariable(e)}finally{n.setGroup$$module$build$src$core$events$utils(s)}}getVariable(e,t){if(t=this.variableMap.get(t||"")){for(let s=0,T;T=t[s];s++)if(n.Names$$module$build$src$core$names.equals(T.name,e))return T}return null}getVariableById(e){for(const t of this.variableMap.values())for(const s of t)if(s.getId()===e)return s;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const t=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const s of e.getPotentialVariableMap().variableMap.keys())t.add(s);return t.has("")||t.add(""),Array.from(t.values())}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(t);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const t=[],s=this.workspace.getAllBlocks(!1);for(let T=0;T<s.length;T++){const N=s[T].getVarModels();if(N)for(let te=0;te<N.length;te++)N[te].getId()===e&&t.push(s[T])}return t}},ic=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Sp,this.potentialVariableMap=null,this.id=h(),F(this),this.options=e||new Vi({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(v(It.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new cd(this)}dispose(){this.listeners.length=0,this.clear(),M(this)}sortObjects(e,t){const s=Math.sin(Du(ic.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+s*e.x-(t.y+s*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!at(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const t=[].concat(this.topBlocks);return e&&1<t.length&&t.sort(this.sortObjects.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){at(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&1<e.length&&e.sort(this.sortObjects.bind(this)),e.filter(s=>!s.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!at(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const t=[].concat(this.topComments);return e&&1<t.length&&t.sort(this.sortObjects.bind(this)),t}getAllBlocks(e=!1){if(e){var t=this.getTopBlocks(!0);e=[];for(let s=0;s<t.length;s++)e.push(...t[s].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(s=>!s.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=n.getGroup$$module$build$src$core$events$utils();for(e||n.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();n.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){this.variableMap.renameVariableById(e,t)}createVariable(e,t,s){return this.variableMap.createVariable(e,t,s)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,t){return this.variableMap.getVariable(e,t)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const s in e){if(e[s]>this.remainingCapacityOfType(s))return!1;t+=e[s]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,s=e?this.undoStack_:this.redoStack_;const T=t.pop();if(T){for(var N=[T];t.length&&T.group&&T.group===t[t.length-1].group;){const te=t.pop();te&&N.push(te)}for(t=0;t<N.length;t++)s.push(N[t]);n.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(s=0;s<N.length;s++)N[s].run(e)}finally{n.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,W()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){at(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let s=0;s<t.length;s++)if(!t[s].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new cd(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return P(e)}static getAll(){return L()}};ic.SCAN_ANGLE=3;var ud=100,Au=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var s=new globalThis.Audio}catch{return}for(let N=0;N<e.length;N++){const te=e[N],xe=te.match(/\.(\w+)$/);if(xe&&s.canPlayType("audio/"+xe[1])){var T=new globalThis.Audio(te);break}}T&&this.sounds.set(t,T)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),Ha||yf)break}}play(e,t){if(!this.muted){var s=this.sounds.get(e);s?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<ud||(this.lastSound=e,s=Ha||ai?s:s.cloneNode(),s.volume=t===void 0?1:t,s.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},Ap=20,mi=class extends ic{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(v(It.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||mi.setTopLevelWorkspaceMetrics,this.componentManager=new $r,this.connectionDBList=nl.init(this.connectionChecker),this.audioManager=new Au(e.parentWorkspace),this.grid=this.options.gridPattern?new Jh(this.options.gridPattern,e.gridOptions):null,this.markerManager=new Yl(this),Jn&&de&&this.registerToolboxCategoryCallback(aa,de),Bo&&Pr&&this.registerToolboxCategoryCallback(cl,Pr),Ni&&Ro&&(this.registerToolboxCategoryCallback(rd,Ro),this.addChangeListener(_r)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Ps(this,this.options.theme||Zh),this.themeManager_.subscribeWorkspace(this);let t;this.renderer=Nc(this.options.renderer||"geras",this.getTheme(),(t=this.options.rendererOverrides)!=null?t:void 0),this.cachedParentSvgSize=new Hn(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=Zh),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles(this.getAllBlocks(!1).filter(t=>!!t.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(be(ht.THEME_CHANGE))(this.getTheme().name,this.id);k(e)}updateBlockStyles(e){for(let t=0,s;s=e[t];t++){const T=s.getStyleName();T&&s.setStyle(T)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let t=0,s=0,T=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(T=this.scale);do{const N=Bn(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(T=1),t+=N.x*T,s+=N.y*T,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new Bt(t,s)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new Hn(e.width,e.height)}getOriginOffsetInPixels(){return ci(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,t){return this.injectionDiv||(this.injectionDiv=t??null),this.svgGroup_=Ue(rt.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=Ue(rt.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new Ep(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(ue(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),ue(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(v(It.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=v(It.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&Pe(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&Pe(e.parentNode)}this.resizeHandlerWrapper&&(Ae(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=mi.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new Ph(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const t=new Vi({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(v(It.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(v(It.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox&&this.toolbox.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents($r.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),s=[];for(let T=0,N;N=e[T];T++){N.position(t,s);const te=N.getBoundingRectangle();te&&s.push(te)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=Se();Bt.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,t){const s=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,s.setAttribute("data-cached-width",`${e}`)),t!=null&&(this.cachedParentSvgSize.height=t,s.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ee()){var e=this.scale,t=-this.scrollY,s=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(t-this.oldTop)&&1>Math.abs(s-this.oldLeft))){var T=new(be(ht.VIEWPORT_CHANGE))(t,s,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=s,k(T)}}}translate(e,t){let s;(s=this.layerManager)==null||s.translateLayers(new Bt(e,t),this.scale);let T;(T=this.grid)==null||T.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let t=e.length-1;0<=t;t--)e[t].queueRender();this.getTopBlocks().flatMap(t=>t.getDescendants(!1)).filter(t=>t.isInsertionMarker()).forEach(t=>t.queueRender()),_t().then(()=>void this.markerManager.updateMarkers())}highlightBlock(e,t){if(t===void 0){for(let s=0,T;T=this.highlightedBlocks[s];s++)T.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):at(this.highlightedBlocks,e),e.setHighlighted(t))}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}renameVariableById(e,t){super.renameVariableById(e,t),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,t,s){return e=super.createVariable(e,t,s),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents($r.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,s;s=e[t];t++){const T=s.getClientRect();T&&this.dragTargetAreas.push({component:s,clientRect:T})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,s;s=this.dragTargetAreas[t];t++)if(s.clientRect.contains(e.clientX,e.clientY))return s.component;return null}onMouseDown(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){Ia(this,e,t)}moveDrag(e){return Si(this,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(Rs.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,s=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||s){var T=tt(e);if(ns)var N=e.metaKey;t&&(e.ctrlKey||N||!s)?(T=-T.y/50,t=he(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,T)):(t=this.scrollX-T.x,s=this.scrollY-T.y,e.shiftKey&&!T.x&&(t=this.scrollX-T.y,s=this.scrollY),this.scroll(t,s)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new mr(0,0,0,0);const t=e[0].getBoundingRectangle();for(let T=1;T<e.length;T++){var s=e[T];s.isInsertionMarker&&s.isInsertionMarker()||(s=s.getBoundingRectangle(),s.top<t.top&&(t.top=s.top),s.bottom>t.bottom&&(t.bottom=s.bottom),s.left<t.left&&(t.left=s.left),s.right>t.right&&(t.right=s.right))}return t}cleanUp(){this.setResizesEnabled(!1),n.setGroup$$module$build$src$core$events$utils(!0);var e=this.getTopBlocks(!0),t=e.filter(te=>te.isMovable());const s=e.filter(te=>!te.isMovable()).map(te=>te.getBoundingRectangle());e=function(te){for(const xe of s)if(te.intersects(xe))return xe;return null};var T=0;const N=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const te of t){for(t=te.getBoundingRectangle(),te.moveBy(-t.left,T-t.top,["cleanup"]),te.snapToGrid(),t=te.getBoundingRectangle(),T=e(t);T!=null;)T=T.top+T.getHeight()+N,te.moveBy(0,T-t.top,["cleanup"]),te.snapToGrid(),t=te.getBoundingRectangle(),T=e(t);T=te.getRelativeToSurfaceXY().y+te.getHeightWidth().height+N}n.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var t=Mn.registry.getContextMenuOptions(Mn.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),vl(e,t,this.RTL,this)}}updateToolbox(e){if(e=Je(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(ct(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Z(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,s){s=Math.pow(this.options.zoomOptions.scaleSpeed,s);const T=this.scale*s;if(this.scale!==T){T>this.options.zoomOptions.maxScale?s=this.options.zoomOptions.maxScale/this.scale:T<this.options.zoomOptions.minScale&&(s=this.options.zoomOptions.minScale/this.scale);var N=this.getCanvas().getCTM(),te=this.getParentSvg().createSVGPoint();te.x=e,te.y=t,te=te.matrixTransform(N.inverse()),e=te.x,t=te.y,N=N.translate(e*(1-s),t*(1-s)).scale(s),this.scrollX=N.e,this.scrollY=N.f,this.setScale(T)}}zoomCenter(e){var t=this.getMetrics();let s;this.flyout?(s=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(s=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(s,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var s=this.getBlocksBoundingBox(),T=2*Ap,N=s.right-s.left+T;if(s=s.bottom-s.top+T,N){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),s+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),N+=this.flyout.getWidth()/this.scale)),t/=N,e/=s,n.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{n.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Ze(this.getCanvas(),"blocklyCanvasTransitioning"),Ze(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){Oe(this.getCanvas(),"blocklyCanvasTransitioning"),Oe(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,s=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,s=-s-e.scrollTop,this.scroll(t,s)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var s=e?this.getBlockById(e):null;if(s){e=s.getRelativeToSurfaceXY(),s=t?{height:s.height,width:s.width}:s.getHeightWidth();var T=this.scale;t=(e.x+(this.RTL?-1:1)*s.width/2)*T,e=(e.y+s.height/2)*T,s=this.getMetrics(),this.scroll(-(t-s.viewWidth/2),-(e-s.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,t){this.hideChaff(!0);const s=this.getMetrics();e=Math.min(e,-s.scrollLeft),t=Math.min(t,-s.scrollTop);const T=s.scrollTop+Math.max(0,s.scrollHeight-s.viewHeight);e=Math.max(e,-(s.scrollLeft+Math.max(0,s.scrollWidth-s.viewWidth))),t=Math.max(t,-T),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+s.scrollLeft),-(t+s.scrollTop),!1),e+=s.absoluteLeft,t+=s.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){at(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const t=e.type==="pointerdown",s=this.currentGesture_;return s?t&&s.hasStarted()?(console.warn("Tried to start the same gesture twice."),s.cancel(),null):s:t?this.currentGesture_=new Rs(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){fs(),_l(this),To(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents($r.Capability.AUTOHIDEABLE,!0).forEach(t=>t.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}},Ru=class extends eo{constructor(e,t,s){super(s),this.type=ht.SELECTED,this.oldElementId=e??void 0,this.newElementId=t??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Ru),t.oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};l(It.EVENT,ht.SELECTED,Ru);var _a=class{paste(e,t,s){if(!t.isCapacityAvailable(e.typeCounts))return null;s&&(e.blockState.x=s.x,e.blockState.y=s.y),s=s||new Bt(e.blockState.x||0,e.blockState.y||0),n.disable$$module$build$src$core$events$utils();let T;try{T=Gt(e.blockState,t),Ml(T,s)}finally{n.enable$$module$build$src$core$events$utils()}return T&&(ee()&&!T.isShadow()&&k(new(be(ht.BLOCK_CREATE))(T)),n.setSelected$$module$build$src$core$common(T),T)}};_a.TYPE="block",hr(_a.TYPE,new _a);var Cu={};Cu.bumpIntoBounds=Bi,Cu.bumpIntoBoundsHandler=Nl,Cu.bumpTopObjectsIntoBounds=Ll;var Rp=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new Bt(0,0),this.inGroup=!1,this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,t;return(t=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?t:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,(this.inGroup=!!n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(v(It.CONNECTION_PREVIEWER,this.workspace.options))(this.block),qt(),this.workspace.setResizesEnabled(!1),ys(),e=!!e&&(e.altKey||e.ctrlKey||e.metaKey),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.block)}}startDraggingShadow(e){const t=this.block.getParent();if(!t)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=Bt.difference(t.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),t.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let t,s,T;if(this.startParentConn=(T=(t=this.block.outputConnection)==null?void 0:t.targetConnection)!=null?T:(s=this.block.previousConnection)==null?void 0:s.targetConnection,e){let N;this.startChildConn=(N=this.block.nextConnection)==null?void 0:N.targetConnection}this.block.unplug(e),Ol(this.block)}fireDragStartEvent(){const e=new(be(ht.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));k(e)}fireDragEndEvent(){const e=new(be(ht.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));k(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(be(ht.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),k(e)}}drag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.drag(Bt.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,Bt.difference(e,this.startLoc))}updateConnectionPreview(e,t){var s=this.connectionCandidate;const T=this.getConnectionCandidate(e,t);if(T){this.connectionCandidate=t=s&&this.currCandidateIsBetter(s,t,T)?s:T;var{local:N,neighbour:te}=t;t=N.type===Qt.OUTPUT_VALUE||N.type===Qt.PREVIOUS_STATEMENT,s=te.isConnected()&&!te.targetBlock().isInsertionMarker(),t&&s&&!this.orphanCanConnectAtEnd(e,te.targetBlock(),N.type)?this.connectionPreviewer.previewReplacement(N,te,te.targetBlock()):this.connectionPreviewer.previewConnection(N,te)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(e,t,s){return!!Qn.getConnectionForOrphanedConnection(e,s===Qt.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}currCandidateIsBetter(e,t,s){const{local:T,neighbour:N}=e;e=new Bt(T.x,T.y);const te=new Bt(N.x,N.y);return t=Bt.distance(Bt.sum(e,t),te),s.distance>t-n.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,t){e=this.getLocalConnections(e);let s=this.connectionCandidate?n.config$$module$build$src$core$config.connectingSnapRadius:n.config$$module$build$src$core$config.snapRadius,T=null;for(const N of e){const{connection:te,radius:xe}=N.closest(s,t);te&&(T={local:N,neighbour:te,distance:xe},s=xe)}return T}getLocalConnections(e){const t=e.getConnections_(!1),s=e.lastConnectionInStack(!0);return s&&s!==e.nextConnection&&t.push(s),t}endDrag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.endDrag(e)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),gn(),ys(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,xs),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep()),this.inGroup||n.setGroup$$module$build$src$core$events$utils(!1)}}disposeStep(){this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0)}applyConnections(e){const{local:t,neighbour:s}=e;t.connect(s);const T=t.isSuperior()?s:t,N=this.block.getRootBlock();_t().then(()=>{Js(T.getSourceBlock()),setTimeout(()=>{N.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.revertDrag()}else{var e;if((e=this.startChildConn)==null||e.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case Qt.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case Qt.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,xs),Bi(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},ku=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const t=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(t,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},o=class extends ku{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===Rt.types.NEXT||e.getType()===Rt.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===Rt.types.PREVIOUS||e.getType()===Rt.types.OUTPUT)&&(e=e.next());let t,s;return(e=(s=(t=e)==null?void 0:t.in())!=null?s:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===Rt.types.NEXT||e.getType()===Rt.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===Rt.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};l(It.CURSOR,_i,o);var c=class extends o{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,t){if(!e)return null;const s=e.in()||e.next();return t(s)?s:s?this.getNextNode_(s,t):(e=this.findSiblingOrParent(e.out()),t(e)?e:e?this.getNextNode_(e,t):null)}getPreviousNode_(e,t){if(!e)return null;let s=e.prev();return s=s?this.getRightMostChild(s):e.out(),t(s)?s:s?this.getPreviousNode_(s,t):null}validNode_(e){let t=!1;return e=e&&e.getType(),(e===Rt.types.OUTPUT||e===Rt.types.INPUT||e===Rt.types.FIELD||e===Rt.types.NEXT||e===Rt.types.PREVIOUS||e===Rt.types.WORKSPACE)&&(t=!0),t}findSiblingOrParent(e){if(!e)return null;const t=e.next();return t||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};c.registrationName="basicCursor",l(It.CURSOR,c.registrationName,c);var O=class extends c{validNode_(e){let t=!1;const s=e&&e.getType();return e&&(e=e.getLocation(),s===Rt.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t}},I=10,G=class extends Qn{constructor(e,t){super(e,t),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[ul[t]],this.offsetInBlock=new Bt(0,0),this.trackedState=G.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===G.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,t;(t=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||t.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e,t=!1){if(!this.sourceBlock_.workspace.isDragging()){var s=n.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*I),T=n.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*I),N=e.sourceBlock_.getRootBlock(),te=this.sourceBlock_.getRootBlock();if(!N.isInFlyout&&!te.isInFlyout){var xe=!0;if(te.isMovable())N.isMovable()&&t&&(T=-T);else if(N.isMovable())xe=!1,s=-s,T=-T;else return;t=xe?e:this,e=xe?this:e,N=xe?te:N,(te=K()===N)||N.addSelect(),N.RTL&&(s=-s),N.moveBy(t.x+s-e.x,t.y+T-e.y,["bump"]),te||N.removeSelect()}}}moveTo(e,t){let s=!1;return this.trackedState===G.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=G.TrackedState.TRACKED,s=!0):this.trackedState===G.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),s=!0),this.x=e,this.y=t,s}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=Bt.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===G.TrackedState.TRACKED||!e&&this.trackedState===G.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=G.TrackedState.TRACKED):(this.trackedState===G.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=G.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const s=e[t],T=s.getConnections_(!0);for(let N=0;N<T.length;N++)T[N].setTracking(!1);for(const N of s.getIcons())dl(N)&&N.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Qt.INPUT_VALUE&&this.type!==Qt.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let s;t.isCollapsed()?(s=[],t.outputConnection&&s.push(t.outputConnection),t.nextConnection&&s.push(t.nextConnection),t.previousConnection&&s.push(t.previousConnection)):s=t.getConnections_(!0);for(let T=0;T<s.length;T++)e.push(...s[T].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(C()){const s=n.getGroup$$module$build$src$core$events$utils();setTimeout((function(){t.isDisposed()||t.getParent()||(n.setGroup$$module$build$src$core$events$utils(s),this.bumpAwayFrom(e),n.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),n.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:s}=this.getParentAndChildConnections();if(t&&s){var T=n.getGroup$$module$build$src$core$events$utils();T||n.setGroup$$module$build$src$core$events$utils(!0);var N=t.getSourceBlock(),te=s.getSourceBlock();super.disconnectInternal(e),N.queueRender(),te.updateDisabled(),te.queueRender(),te.getSvgRoot().style.display="block",n.setGroup$$module$build$src$core$events$utils(T)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.updateDisabled(),e.updateDisabled(),e.queueRender();var s=K();(s=s===t&&t||s===e&&e)&&(s.removeSelect(),s.addSelect()),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(G||(G={})),G.TrackedState;var J=class extends Ds{constructor(e,t,s){if(super(e,t,s),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new Bt(0,0),this.dragStrategy=new Rp(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=Ue(rt.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,xa(e),this.svgGroup.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const t of this.getIcons())t.initView(this.createIconPointerDownListener(t)),t.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),e=this.getSvgRoot(),!this.workspace.options.readOnly&&e&&ue(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let e;(e=this.getParent())==null||e.select()}else this.addSelect()}unselect(){if(this.isShadow()){let e;(e=this.getParent())==null||e.unselect()}else this.removeSelect()}setParent(e){const t=this.parentBlock_;if(e!==t){qt(),super.setParent(e),gn();var s=this.getSvgRoot();if(!this.workspace.isClearing&&s){var T=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(s):t&&((e=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(s,e):this.workspace.getCanvas().appendChild(s),this.translate(T.x,T.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,s=0,T=this.getSvgRoot();if(T)do{const N=Bn(T);t+=N.x,s+=N.y,T=T.parentNode}while(T&&!e.hasLayer(T));return new Bt(t,s)}moveBy(e,t,s){if(this.parentBlock_)throw Error("Block has parent");const T=ee();let N=null;T&&(N=new(be(ht.BLOCK_MOVE))(this),s&&N.setReason(s)),e=new Bt(e,t),t=this.getRelativeToSurfaceXY(),e=Bt.sum(t,e),this.translate(e.x,e.y),this.updateComponentLocations(e),T&&N&&(N.recordNew(),k(N)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new Bt(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const s=this.getRelativeToSurfaceXY();this.moveBy(e.x-s.x,e.y-s.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const t=this.getRelativeToSurfaceXY();let s,T;return this.RTL?(s=t.x-e.width,T=t.x):(s=t.x,T=t.x+e.width),new mr(t.y,t.y+e.height,s,T)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}updateCollapsed(){var e=this.isCollapsed();const t=Mo,s=au;for(let N=0,te;te=this.inputList[N];N++)te.name!==t&&te.setVisible(!e);for(var T of this.getIcons())T.updateCollapsed();e?(e=this.toString(Bs),(T=this.getField(s))?T.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new Ns(e),s)):(this.updateDisabled(),this.removeInput(t))}tab(e,t){const s=new O;s.setCurNode(Rt.createFieldNode(e)),e=s.getCurNode(),t?s.next():s.prev(),(t=s.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))}onMouseDown(e){const t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=Mn.registry.getContextMenuOptions(Mn.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const t=this.generateContextMenu();t&&t.length&&(vl(e,t,this.RTL,this.workspace),Ho(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const t of this.getChildren(!1))t.updateComponentLocations(Bt.sum(e,t.relativeCoords))}updateConnectionLocations(e){for(const t of this.getConnections_(!1))t.moveToOffset(e)}updateIconLocations(e){for(const t of this.getIcons())t.onLocationChange(e)}updateFieldLocations(e){for(const t of this.inputList)for(const s of t.fieldRow)s.onLocationChange(e)}setDragging(e){(this.dragging=e)?(this.translation="",Ul.push(...this.getConnections_(!0)),Ze(this.svgGroup,"blocklyDragging")):(Ul.length=0,Oe(this.svgGroup,"blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,t){if(this.disposing=!0,Md(),Vo(),t&&(this.unplug(e),Sc(this)),t=K(),t instanceof Ds){let s=t;for(;s!==null;)s===this&&t.unselect(),s=s.getParent()}super.dispose(!!e),Pe(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),K()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(n.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),n.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:_a.TYPE,blockState:kn(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:ce(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let t=0;t<e.length;t++)e[t].applyColour();for(let t=0,s;s=this.inputList[t];t++)for(let T=0,N;N=s.fieldRow[T];T++)N.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let t;(t=this.getNextBlock())==null||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const t of this.getChildren(!1))t.updateDisabled()}}setWarningText(e,t=""){if(t)this.warningTextDb.has(t)&&(clearTimeout(this.warningTextDb.get(t)),this.warningTextDb.delete(t));else{for(var s of this.warningTextDb.values())clearTimeout(s);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(t,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(t),this.setWarningText(e,t))},100));else if(this.isInFlyout&&(e=null),s=this.getIcon(us.TYPE),e){let T=this.getSurroundParent(),N=null;for(;T;)T.isCollapsed()&&(N=T),T=T.getSurroundParent();N&&N.setWarningText(n.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,J.COLLAPSED_WARNING_ID),s?s.addMessage(e,t):this.addIcon(new us(this).addMessage(e,t))}else s&&(t?(s.addMessage("",t),s.getText()||this.removeIcon(us.TYPE)):this.removeIcon(us.TYPE))}setMutator(e){this.removeIcon(n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof n.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),t}setEnabled(e){S("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const t=this.isEnabled();super.setEnabled(e),this.isEnabled()===t||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(e,t){const s=this.isEnabled();super.setDisabledReason(e,t),this.isEnabled()===s||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,t)this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour();else throw Error("Invalid style name: "+e)}getStyle(){return this.style}bringToFront(e=!1){let t=this;if(!t.isDeadOrDying())do{const s=t.getSvgRoot(),T=s.parentNode,N=T.childNodes;if(N[N.length-1]!==s&&T.appendChild(s),e)break;t=t.getParent()}while(t)}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.queueRender()}setNextStatement(e,t){super.setNextStatement(e,t),this.queueRender()}setOutput(e,t){super.setOutput(e,t),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,t){return e=super.removeInput(e,t),this.queueRender(),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var s=this.inputList[t].connection;s&&(s.setTracking(e),(s=s.targetBlock())&&s.setConnectionTracking(e))}}getConnections_(e){const t=[];if(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)for(let s=0,T;T=this.inputList[s];s++)T.connection&&t.push(T.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new G(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let s;(s=t.targetBlock())==null||s.bumpNeighbours()}for(const s of t.neighbours(n.config$$module$build$src$core$config.snapRadius))s.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&s.isConnected()||(t.isSuperior()?s.bumpAwayFrom(t,!1):t.bumpAwayFrom(s,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,t,s){if(e.type===Qt.NEXT_STATEMENT||e.type===Qt.INPUT_VALUE){let T=t.x;t=t.y,T+=s.x-e.getOffsetInBlock().x,t+=s.y-e.getOffsetInBlock().y,this.moveBy(T,t)}}getChildren(e){return super.getChildren(e)}queueRender(){return nr(this)}render(){this.queueRender(),wt()}renderEfficiently(){qt(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),gn(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Yl.LOCAL_MARKER).draw();for(const e of this.inputList)for(const t of e.fieldRow)t.updateMarkers_()}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,t=this.width;var s=this.getNextBlock();if(s){s=s.getHeightWidth();const T=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=s.height-T,t=Math.max(t,s.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}setDragStrategy(e){this.dragStrategy=e}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,t){this.dragStrategy.drag(e,t)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},kn(this)),t=new Set(["id","height","width","pinned","enabled"]),s=function(T){for(const N in T)t.has(N)?delete T[N]:typeof T[N]=="object"&&s(T[N])};return s(e),[e]}};J.INLINE=-1,J.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Te=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},Ce=class extends Te{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof J?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(Qi(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},ze=class extends eo{constructor(e,t){super(t),this.type=ht.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new ze),t.isOpen=e.isOpen,t}};l(It.EVENT,ht.TRASHCAN_OPEN,ze);var et=class extends Ce{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new Vi({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===En.TOP?En.BOTTOM:En.TOP,this.flyout=new(v(It.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===En.RIGHT?En.LEFT:En.RIGHT,this.flyout=new(v(It.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=Ue(rt.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=Ue(rt.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),Ue(rt.RECT,{width:Tt,height:Pt,y:dt},e);const s=Ue(rt.IMAGE,{width:hi.width,x:-0,height:hi.height,y:-32,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return s.setAttributeNS(ji,"xlink:href",this.workspace.options.pathToMedia+hi.url),e=Ue(rt.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),Ue(rt.RECT,{width:Tt,height:dt},e),this.svgLid=Ue(rt.IMAGE,{width:hi.width,x:-0,height:hi.height,y:-32,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(ji,"xlink:href",this.workspace.options.pathToMedia+hi.url),Ee(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),Ee(this.svgGroup,"pointerup",this,this.click),Ee(s,"pointerover",this,this.mouseOver),Ee(s,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(ft(this.flyout.createDom(rt.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:$r.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[$r.Capability.AUTOHIDEABLE,$r.Capability.DELETE_AREA,$r.Capability.DRAG_TARGET,$r.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&Pe(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(s){return JSON.parse(s)}),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout(()=>{let s;(s=this.flyout)==null||s.show(e),t.cursor="";let T;(T=this.workspace.scrollbar)==null||T.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var t;(t=this.workspace.scrollbar)==null||t.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var s=yn(this.workspace,e);e=ln(s,new Hn(Tt,Pt+dt),fn,Ot,e,this.workspace),t=$n(e,Ot,s.vertical===is.TOP?oo.DOWN:oo.UP,t),this.top=t.top,this.left=t.left;var T;(T=this.svgGroup)==null||T.setAttribute("transform","translate("+this.left+","+this.top+")");var N;(N=this.flyout)==null||N.position()}}getBoundingRectangle(){return new mr(this.top,this.top+Pt+dt,this.left,this.left+Tt)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+it-An;return e=e.left+Gr-An,new mr(t,t+dt+Pt+2*An,e,e+Tt+2*An)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=Nt;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*mn),t=an+this.lidOpen*(Zn-an),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),lt/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===En.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let s;(s=this.svgLid)==null||s.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:Tt-4)+","+(dt-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*mn)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(be(ht.TRASHCAN_OPEN))(e,this.workspace.id),k(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||!m(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(Qe)}}}cleanBlockJson(e){function t(s){if(s){if(delete s.id,delete s.x,delete s.y,delete s.enabled,delete s.disabledReasons,s.icons&&s.icons.comment){var T=s.icons.comment;delete T.height,delete T.width,delete T.pinned}T=s.inputs;for(var N in T){var te=T[N];const xe=te.block;te=te.shadow,xe&&t(xe),te&&t(te)}s.next&&(N=s.next,s=N.block,N=N.shadow,s&&t(s),N&&t(N))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},Tt=47,Pt=44,dt=16,Ot=20,fn=20,An=10,Gr=0,it=32,Qe=.1,lt=80,Nt=4,an=.4,Zn=.8,mn=45,Kt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),t=e.keyCodes,t!=null&&t.length)for(const s of t)this.addKeyMapping(s,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,s){e=`${e}`;const T=this.keyMap.get(e);if(T&&!s)throw Error(`Shortcut named "${t}" collides with shortcuts "${T}"`);T&&s?T.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,s){const T=this.keyMap.get(e);if(!T)return s||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const N=T.indexOf(t);return-1<N?(T.splice(N,1),T.length===0&&this.keyMap.delete(e),!0):(s||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,s]of this.keyMap)e[t]=s;return e}getRegistry(){const e=Object.create(null);for(const[t,s]of this.shortcuts)e[t]=s;return Go(Object.create(null),e)}onKeyDown(e,t){var s=this.serializeKeyEvent(t);if(s=this.getShortcutNamesByKeyCode(s),!s)return!1;for(const T of s){if(s=this.shortcuts.get(T),!s||s.preconditionFn&&!s.preconditionFn(e))continue;let N,te;if((te=(N=s).callback)!=null&&te.call(N,e,t,s))return!0}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const t=[];for(const[s,T]of this.keyMap)-1<T.indexOf(e)&&t.push(s);return t}serializeKeyEvent(e){let t="";for(const s in Kt.modifierKeys)e.getModifierState(s)&&(t!==""&&(t+="+"),t+=s);return t!==""&&e.keyCode?t+="+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers(e){for(const t of e)if(!(t in Kt.modifierKeys))throw Error(t+" is not a valid modifier key.")}createSerializedKey(e,t){let s="";if(t){this.checkModifiers(t);for(const T in Kt.modifierKeys)t.includes(Kt.modifierKeys[T])&&(s!==""&&(s+="+"),s+=T)}return s!==""&&e?s+="+"+e:e&&(s=`${e}`),s}};Kt.registry=new Kt,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(Kt||(Kt={}));var ei=null,or=null,$a={duplicateInternal:Jd,copyInternal:Xd},Iu={};Iu.BlockPaster=_a,Iu.TEST_ONLY=$a,Iu.paste=_s,Iu.registry=Ga;var va;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(va||(va={}));var oc=null,sc=null,hd=null;oh();var Ea={};Ea.names=va,Ea.registerCopy=Zd,Ea.registerCut=nh,Ea.registerDefaultShortcuts=oh,Ea.registerDelete=th,Ea.registerEscape=Bc,Ea.registerPaste=rh,Ea.registerRedo=jc,Ea.registerUndo=ih;var bg=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=wf}save(e){return e=e.getProcedureMap().getProcedures().map(t=>sh(t)),e.length?e:null}load(e,t){const s=t.getProcedureMap();for(const T of e)s.add(ah(this.procedureModelClass,this.parameterModelClass,T,t))}clear(e){e.getProcedureMap().clear()}},Cp={};Cp.ProcedureSerializer=bg,Cp.loadProcedure=ah,Cp.saveProcedure=sh;var hm=class{constructor(){this.priority=Ss}save(e){const t=[];for(const s of e.getAllVariables())e={name:s.name,id:s.getId()},s.type&&(e.type=s.type),t.push(e);return t.length?t:null}load(e,t){for(const s of e)t.createVariable(s.name,s.type,s.id)}clear(e){e.getVariableMap().clear()}};sn("variables",new hm);var dm={};dm.VariableSerializer=hm;var Vp={};Vp.load=ef,Vp.save=Qd;var yg={blocks:Ya,exceptions:$i,priorities:iu,procedures:Cp,registry:sa,variables:dm,workspaceComments:ou,workspaces:Vp},zp=class{constructor(e,t,s,T,N){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,s=s===void 0?!0:s;const te=t&&s;t&&(this.hScroll=new Vr(e,!0,te,T,N)),s&&(this.vScroll=new Vr(e,!1,te,T,N)),te&&(this.corner_=Ue(rt.RECT,{height:Vr.scrollbarThickness,width:Vr.scrollbarThickness,class:"blocklyScrollbarBackground"}),ft(this.corner_,e.getBubbleCanvas()))}dispose(){Pe(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,s=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(s=!0)):s=t=!0,t||s){try{n.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&s&&this.vScroll.resize(e)}finally{n.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let T;(T=this.corner_)==null||T.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let T;(T=this.corner_)==null||T.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,s){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(s||s===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},Gp=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,s=0;return e&&(t=e.getWidth(),s=e.getHeight()),new Hn(t,s)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,t=0;const s=this.getToolboxMetrics(),T=this.getFlyoutMetrics(),N=!!this.workspace_.getToolbox();var te;const xe=!((te=this.workspace_.getFlyout())!=null&&te.autoClose);te=N?s.position:T.position;const We=te===En.TOP;return te===En.LEFT&&(N&&(e+=s.width),xe&&(e+=T.width)),We&&(N&&(t+=s.height),xe&&(t+=T.height)),{top:t,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),s=this.getToolboxMetrics(),T=this.getFlyoutMetrics(),N=!!this.workspace_.getToolbox();var te;const xe=!((te=this.workspace_.getFlyout())!=null&&te.autoClose);te=N?s.position:T.position;const We=te===En.LEFT||te===En.RIGHT;return(te===En.TOP||te===En.BOTTOM)&&(N&&(t.height-=s.height),xe&&(t.height-=T.height)),We&&(N&&(t.width-=s.width),xe&&(t.width-=T.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),s=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const T={};return s||(T.top=e.top,T.bottom=e.top+e.height),t||(T.left=e.left,T.right=e.left+e.width),T}getPaddedContent_(e,t){const s=t.top+t.height,T=t.left+t.width,N=e.width;e=e.height;const te=N/2,xe=e/2;return{top:Math.min(t.top-xe,s-e),bottom:Math.max(s+xe,t.top+e),left:Math.min(t.left-te,T-N),right:Math.max(T+te,t.left+N)}}getScrollMetrics(e,t,s){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var T=s||this.getContentMetrics();s=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,T),T=s.top!==void 0?s.top:t.top;const N=s.left!==void 0?s.left:t.left;return{top:T/e,left:N/e,width:((s.right!==void 0?s.right:t.right)-N)/e,height:((s.bottom!==void 0?s.bottom:t.bottom)-T)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),s=this.getSvgMetrics(),T=this.getAbsoluteMetrics(),N=this.getViewMetrics(),te=this.getContentMetrics(),xe=this.getScrollMetrics(!1,N,te);return{contentHeight:te.height,contentWidth:te.width,contentTop:te.top,contentLeft:te.left,scrollHeight:xe.height,scrollWidth:xe.width,scrollTop:xe.top,scrollLeft:xe.left,viewHeight:N.height,viewWidth:N.width,viewTop:N.top,viewLeft:N.left,absoluteTop:T.top,absoluteLeft:T.left,svgHeight:s.height,svgWidth:s.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};l(It.METRICS_MANAGER,_i,Gp),"Blockly"in globalThis||(globalThis.Blockly={Msg:er});var fm=class extends al{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&Pe(this.selectedGlowFilter),this.replacementGlowFilter&&Pe(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,s=pr("c",[cn(25,-e),cn(71,-e),cn(t,0)]);return{height:e,width:t,path:s}}makeHexagonal(){function e(s,T,N){var te=s/2;return te=te>t?t:te,N=N?-1:1,s=(T?-1:1)*s/2,Pi(-N*te,s)+Pi(N*te,s)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(s){return s/=2,s>t?t:s},height(s){return s},connectionOffsetY(s){return s/2},connectionOffsetX(s){return-s},pathDown(s){return e(s,!1,!1)},pathUp(s){return e(s,!0,!1)},pathRightDown(s){return e(s,!1,!0)},pathRightUp(s){return e(s,!1,!0)}}}makeRounded(){function e(T,N,te){const xe=T>s?T-s:0;T=(T>s?s:T)/2;const We=te===N?"0":"1";return xr("a","0 0,"+We,T,cn((te?1:-1)*T,(N?-1:1)*T))+Zt("v",(N?-1:1)*xe)+xr("a","0 0,"+We,T,cn((te?-1:1)*T,(N?-1:1)*T))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,s=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width(T){return T/=2,T>t?t:T},height(T){return T},connectionOffsetY(T){return T/2},connectionOffsetX(T){return-T},pathDown(T){return e(T,!1,!1)},pathUp(T){return e(T,!0,!1)},pathRightDown(T){return e(T,!1,!0)},pathRightUp(T){return e(T,!1,!0)}}}makeSquared(){function e(s,T,N){s-=2*t;const te=N===T?"0":"1";return xr("a","0 0,"+te,t,cn((N?1:-1)*t,(T?-1:1)*t))+Zt("v",(T?-1:1)*s)+xr("a","0 0,"+te,t,cn((N?-1:1)*t,(T?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(s){return t},height(s){return s},connectionOffsetY(s){return s/2},connectionOffsetX(s){return-s},pathDown(s){return e(s,!1,!1)},pathUp(s){return e(s,!0,!1)},pathRightDown(s){return e(s,!1,!0)},pathRightUp(s){return e(s,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Qt.INPUT_VALUE:case Qt.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.includes("Boolean")?this.HEXAGONAL:t&&t.includes("Number")?this.ROUNDED:(t&&t.includes("String"),this.ROUNDED);case Qt.PREVIOUS_STATEMENT:case Qt.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(rn){return pr("c",[cn(rn*N/2,0),cn(rn*N*3/4,xe/2),cn(rn*N,xe)])+Qs([cn(rn*N,te)])+pr("c",[cn(rn*N/4,xe/2),cn(rn*N/2,xe),cn(rn*N,xe)])+Zt("h",rn*T)+pr("c",[cn(rn*N/2,0),cn(rn*N*3/4,-(xe/2)),cn(rn*N,-xe)])+Qs([cn(rn*N,-te)])+pr("c",[cn(rn*N/4,-(xe/2)),cn(rn*N/2,-xe),cn(rn*N,-xe)])}const t=this.NOTCH_WIDTH,s=this.NOTCH_HEIGHT,T=t/3,N=T/3,te=s/2,xe=te/2,We=e(1),vt=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:s,pathLeft:We,pathRight:vt}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=xr("a","0 0,0",e,cn(-e,e)),s=xr("a","0 0,1",e,cn(-e,e)),T=xr("a","0 0,0",e,cn(e,e)),N=xr("a","0 0,1",e,cn(e,e));return{width:e,height:e,pathTop:t,pathBottom:T,rightWidth:e,rightHeight:e,pathTopRight:s,pathBottomRight:N}}generateSecondaryColour_(e){return zs("#000",e,.15)||e}generateTertiaryColour_(e){return zs("#000",e,.25)||e}createDom(e,t,s){super.createDom(e,t,s),e=Ue(rt.DEFS,{},e),t=Ue(rt.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Ue(rt.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),s=Ue(rt.FECOMPONENTTRANSFER,{result:"outBlur"},t),Ue(rt.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},s),Ue(rt.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),Ue(rt.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=Ue(rt.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Ue(rt.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=Ue(rt.FECOMPONENTTRANSFER,{result:"outBlur"},e),Ue(rt.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),Ue(rt.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),Ue(rt.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),Ue(rt.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .blocklyMenuItem,`,`${e}.blocklyDropDownDiv .blocklyMenuItem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .blocklyMenuItemContent {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},pm=class extends ll{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(Ke.isSpacer(e)){const T=e.precedesStatement;var t=e.followsStatement;if(T||t){const N=this.constants_.INSIDE_CORNERS;var s=N.rightHeight;s=e.height-(T?s:0),t=t?N.pathBottomRight:"",e=0<s?Zt("V",e.yPos+s):"",this.outlinePath_+=t+e+(T?N.pathTopRight:"");return}}this.outlinePath_+=Zt("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=yr(e.xPos,this.info_.startY),this.outlinePath_+=Zt("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Zt("V",e.baseline),this.outlinePath_+=Zt("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=Wr(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(t,e))}getInlineInputPath(e){const t=e.width-2*e.connectionWidth,s=e.height;return Zt("h",t)+e.shape.pathRightDown(s)+Zt("h",-t)+e.shape.pathUp(s)+"z"}drawStatementInput_(e){var t=e.getLastInput();const s=t.xPos+t.notchOffset+t.shape.width,T=this.constants_.INSIDE_CORNERS,N=t.shape.pathRight+Zt("h",-(t.notchOffset-T.width))+T.pathTop,te=e.height-2*T.height;t=T.pathBottom+Zt("h",t.notchOffset-T.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=Zt("H",s)+N+Zt("v",te)+t+Zt("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const t=e.connectionModel;if(t.type===Qt.NEXT_STATEMENT||t.type===Qt.PREVIOUS_STATEMENT||t.type===Qt.OUTPUT_VALUE&&!e.isDynamicShape)super.drawConnectionHighlightPath(e);else{e=t.type===Qt.INPUT_VALUE?Wr(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):Wr(e.width,-e.height/2)+e.shape.pathDown(e.height);var s=t.getSourceBlock(),T,N;(N=(T=s.pathObject).addConnectionHighlight)==null||N.call(T,t,e,t.getOffsetInBlock(),s.RTL)}}},Mu=class extends Tr{constructor(e,t,s,T,N,te,xe){if(super(Tr.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",s=Number(Dr(s)),t=Number(Dr(t)),isNaN(s)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(0>=s||0>=t)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Hn(t,s+Mu.Y_PADDING),this.imageHeight=s,typeof N=="function"&&(this.clickHandler=N),e!==Tr.SKIP_SETUP&&(xe?this.configure_(xe):(this.flipRtl=!!te,this.altText=Dr(T)||""),this.setValue(Dr(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=Dr(e.alt))}initView(){this.imageElement=Ue(rt.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(ji,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(ji,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};Mu.Y_PADDING=1,bi("field_image",Mu),Mu.prototype.DEFAULT_VALUE="";var kp=class extends Tr{constructor(e,t,s){super(Tr.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==Tr.SKIP_SETUP&&(s&&this.configure_(s),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new Cr;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new Cr;let t;return this.fullBlockClickTarget_=!((t=this.getConstants())==null||!t.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,t=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&ee()&&this.value_!==e&&t&&k(new(be(ht.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new Cr;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.getColourTertiary())):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(Oe(e,"blocklyInvalidInput"),pt(e,Kr.INVALID,!1)):(Ze(e,"blocklyInvalidInput"),pt(e,Kr.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new Cr;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(Ch||ai||Ha)?this.showPromptEditor():this.showInlineEditor(t)}showPromptEditor(){Er(n.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e){const t=this.getSourceBlock();if(!t)throw new Cr;Vu(this,t.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new Cr;n.setGroup$$module$build$src$core$events$utils(!0);const t=Ws();var s=this.getClickTarget_();if(!s)throw Error("A click target has not been set.");Ze(s,"editing"),s=document.createElement("input"),s.className="blocklyHtmlInput",s.setAttribute("spellcheck",this.spellcheck_);const T=this.workspace_.getScale();var N=this.getConstants().FIELD_TEXT_FONTSIZE*T+"pt";return t.style.fontSize=N,s.style.fontSize=N,N=kp.BORDERRADIUS*T+"px",this.isFullBlockField()&&(N=this.getScaledBBox(),N=(N.bottom-N.top)/2+"px",e=e.getParent()?e.getParent().getColourTertiary():this.sourceBlock_.getColourTertiary(),s.style.border=1*T+"px solid "+e,t.style.borderRadius=N,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*T+"px")),s.style.borderRadius=N,t.appendChild(s),s.value=s.defaultValue=this.getEditorText_(this.value_),s.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(s),s}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ee()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(k(new(be(ht.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),n.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=Ws().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");Oe(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=ue(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper=ue(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(Ae(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onKeyInputWrapper&&(Ae(this.onKeyInputWrapper),this.onKeyInputWrapper=null)}onHtmlInputKeyDown_(e){e.key==="Enter"?(qs(this),To()):e.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),qs(this),To()):e.key==="Tab"&&(qs(this),To(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ee()&&this.value_!==e&&k(new(be(ht.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){_t().then(()=>{const e=this.getSourceBlock();if(!e)throw new Cr;const t=Ws(),s=this.getScaledBBox();t.style.width=s.right-s.left+"px",t.style.height=s.bottom-s.top+"px";const T=s.top;t.style.left=`${e.RTL?s.right-t.offsetWidth:s.left}px`,t.style.top=`${T}px`})}repositionForWindowResize(){let e;const t=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return t instanceof J?(Bi(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),t)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};kp.BORDERRADIUS=4;var Ip=class extends kp{constructor(e,t,s){super(e,t,s)}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(Dr(e.text),void 0,e)}};bi("field_input",Ip),Ip.prototype.DEFAULT_VALUE="";var mm=class extends ya{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Mp=class extends sl{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},gm=class extends hs{constructor(e){super(e),this.width=this.height=0,this.type|=Ke.getType("RIGHT_CONNECTION")}},bm=class extends Uf{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},ym=class extends nc{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new bm(this.constants_),this.bottomRow=new mm(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new gm(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?t instanceof Ls||e instanceof Gi||t instanceof Gi?!0:e instanceof n.ValueInput$$module$build$src$core$inputs$value_input||e instanceof zi||e instanceof Ls?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&Ke.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&Ke.isLeftRoundedCorner(e)&&t&&(Ke.isPreviousConnection(t)||Ke.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&Ke.isLeftSquareCorner(e)&&t&&Ke.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(Ke.isTopRow(e)&&Ke.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const s=Ke.isInputRow(e)&&e.hasStatement,T=Ke.isInputRow(t)&&t.hasStatement;return T||s?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),T&&s?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):Ke.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):Ke.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const s=this.width-this.startX;return Ke.isInputRow(e)&&e.hasStatement||Ke.isInputRow(t)&&t.hasStatement?Math.max(s,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):s}getElemCenterline_(e,t){if(e.hasStatement&&!Ke.isSpacer(t)&&!Ke.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(Ke.isInlineInput(t)&&t instanceof Is){const s=t.connectedBlock;if(s&&s.outputConnection&&s.nextConnection)return e.yPos+s.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if((e instanceof zi||e instanceof Ls)&&t.hasDummyInput&&t.align===n.Align$$module$build$src$core$inputs$align.LEFT&&e.align===n.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof Gi){t.elements.push(new Mp(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let s;for(let T=0;T<e.elements.length;T++){const N=e.elements[T];if(Ke.isSpacer(N)&&(s=N),Ke.isField(N)&&N instanceof Do&&N.parentInput===this.rightAlignedDummyInputs.get(e))break}if(s){s.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let N=2;N<this.rows.length-1;N+=2){var s=this.rows[N-1];const te=this.rows[N];var T=this.rows[N+1];if(s=N===2?!!this.topRow.hasPreviousConnection:!!s.followsStatement,T=N+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!T.precedesStatement,Ke.isInputRow(te)&&te.hasStatement){te.measure();let xe,We;t=te.width-((We=(xe=te.getLastInput())==null?void 0:xe.width)!=null?We:0)+e}else if(s&&(N===2||T)&&Ke.isInputRow(te)&&!te.hasStatement){T=te.xPos,s=null;for(let xe=0;xe<te.elements.length;xe++){const We=te.elements[xe];Ke.isSpacer(We)&&(s=We),s&&(Ke.isField(We)||Ke.isInput(We))&&T<t&&!(Ke.isField(We)&&We instanceof Do&&(We.field instanceof Ns||We.field instanceof Mu))&&(s.width+=t-T),T+=We.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,s=0;s<this.rows.length;s++){const T=this.rows[s];T.yPos=t,t+=T.height}this.height=t,s=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(s),s=e.width(s),this.outputConnection.height=t,this.outputConnection.width=s,this.outputConnection.startX=s,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(s),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=s,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=s,this.width+=s+e,this.widthWithChildren+=s+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var s=this.rows[t];if(!Ke.isInputRow(s))continue;e=s.elements[s.elements.length-2];let T=this.getNegativeSpacing_(s.elements[1]),N=this.getNegativeSpacing_(e);e=T+N;const te=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<te&&(e=this.width-te,T=e/2,N=e/2),s.elements.unshift(new wi(this.constants_,-T)),s.elements.push(new wi(this.constants_,-N))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)s=this.rows[t],Ke.isTopOrBottomRow(s)&&(s.elements[1].width-=e),s.width-=e,s.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var s=this.outputConnection.shape.type;const T=this.constants_;if(1<this.inputRows.length)switch(s){case T.SHAPES.ROUND:return s=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,s=this.height/2>s?s:this.height/2,t-s*(1-Math.sin(Math.acos((s-this.constants_.SMALL_PADDING)/s)));default:return 0}if(Ke.isInlineInput(e)&&e instanceof Is){const N=e.connectedBlock;return e=N?N.pathObject.outputShapeType:e.shape.type,e==null||N&&N.outputConnection&&(N.statementInputCount||N.nextConnection)||s===T.SHAPES.HEXAGONAL&&s!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[s][e]}return Ke.isField(e)&&e instanceof Do?s===T.SHAPES.ROUND&&e.field instanceof Ip?t-2.75*T.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[s][0]:Ke.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let T=2;T<this.rows.length-1;T+=2){const N=this.rows[T-1],te=this.rows[T],xe=this.rows[T+1];var e=T===2,t=T+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!xe.precedesStatement;if(e?this.topRow.hasPreviousConnection:N.followsStatement){var s=te.elements[1];if(s=te.elements.length===3&&s instanceof Do&&(s.field instanceof Ns||s.field instanceof Mu),!e&&s)N.height-=this.constants_.SMALL_PADDING,xe.height-=this.constants_.SMALL_PADDING,te.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)N.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<te.elements.length;t++)if(s=te.elements[t],s instanceof Is&&Ke.isInlineInput(s)&&s.connectedBlock&&!s.connectedBlock.isShadow()&&40<=s.connectedBlock.getHeightWidth().height){e=!0;break}e&&(N.height-=this.constants_.SMALL_PADDING,xe.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},_m=class extends Ou{constructor(e,t,s){super(e,t,s),this.markerCircle=null}showWithInputOutput(e){const t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(t),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){e=e.getLocation();const t=e.getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,t){let s;(s=this.markerCircle)==null||s.setAttribute("cx",`${e}`);let T;(T=this.markerCircle)==null||T.setAttribute("cy",`${t}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=Ue(rt.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();Ue(rt.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let t;(t=this.markerCircle)==null||t.setAttribute("fill",this.colour_);let s;if((s=this.markerCircle)==null||s.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let T;(T=this.markerCircle)==null||T.firstElementChild.setAttribute("values",e)}}},$m=class extends xu{constructor(e,t,s){super(e,t,s),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=s}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.getColourTertiary());for(const s of this.outlines.values())s.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,Ue(rt.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,s;(t=this.outlines.get(e))==null||(s=t.parentNode)==null||s.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Wp=class extends Po{constructor(e){super(e)}makeConstants_(){return new fm}makeRenderInfo_(e){return new ym(this,e)}makeDrawer_(e,t){return new pm(e,t)}makeMarkerDrawer(e,t){return new _m(e,this.getConstants(),t)}makePathObject(e,t){return new $m(e,t,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(e,t,s){return S("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===Qt.OUTPUT_VALUE?e.isConnected()?Wi.PREVIEW_TYPE.REPLACEMENT_FADE:Wi.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,t,s)}};kl("zelos",Wp);var vm=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,t,s){n.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=s,s.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(t)&&(t.highlight(),this.staticConn=t)}finally{n.enable$$module$build$src$core$events$utils()}}previewConnection(e,t){if(e!==this.draggedConn||t!==this.staticConn){n.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,t)&&(this.markerConn=this.previewMarker(e,t)),this.workspace.getRenderer().shouldHighlightConnection(t)&&t.highlight(),this.draggedConn=e,this.staticConn=t}finally{n.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,t){return t.type===Qt.PREVIOUS_STATEMENT||t.type===Qt.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof Wp)}previewMarker(e,t){const s=e.getSourceBlock(),T=this.createInsertionMarker(s),N=this.getMatchingConnection(s,T,e);if(!N)return null;T.queueRender(),wt(),N.connect(t);const te={x:t.x-N.x,y:t.y-N.y},xe=N.getOffsetInBlock().clone();return _t().then(()=>{if(!T.isDeadOrDying()){n.disable$$module$build$src$core$events$utils();try{T==null||T.positionNearConnection(N,te,xe),T==null||T.getSvgRoot().setAttribute("visibility","visible")}finally{n.enable$$module$build$src$core$events$utils()}}}),N}createInsertionMarker(e){const t=kn(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!t)throw Error(`Failed to serialize source block. ${e.toDevString()}`);e=Gt(t,this.workspace);for(const s of e.getDescendants(!1))s.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,t,s){if(e=e.getConnections_(!0),t=t.getConnections_(!0),e.length!==t.length)return null;for(let T=0;T<e.length;T++)if(e[T]===s)return t[T];return null}hidePreview(){n.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{n.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const t=e.getSourceBlock(),s=t.outputConnection;let T;if((T=t.previousConnection)!=null&&T.targetConnection||s!=null&&s.targetConnection)t.unplug(!0);else{let N;(N=e.targetBlock())==null||N.unplug(!1)}t.dispose()}dispose(){this.hidePreview()}};l(It.CONNECTION_PREVIEWER,_i,vm);var ac={};ac.Align=n.Align$$module$build$src$core$inputs$align,ac.DummyInput=zi,ac.EndRowInput=Ls,ac.Input=tc,ac.StatementInput=Gi,ac.ValueInput=n.ValueInput$$module$build$src$core$inputs$value_input,ac.inputTypes=n.inputTypes$$module$build$src$core$inputs$input_types;var Em=!1,wm;n.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=U());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let s=0,T;T=e[s];s++){let N=this.blockToCode(T);Array.isArray(N)&&(N=N[0]),N&&(T.outputConnection&&(N=this.scrubNakedValue(N),this.STATEMENT_PREFIX&&!T.suppressPrefixSuffix&&(N=this.injectId(this.STATEMENT_PREFIX,T)+N),this.STATEMENT_SUFFIX&&!T.suppressPrefixSuffix&&(N+=this.injectId(this.STATEMENT_SUFFIX,T))),t.push(N))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let s=0;s<e.length;s++){const T=e[s].getCommentText();T&&t.push(T)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var s=this.forBlock[e.type];if(typeof s!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(s=s.call(e,e,this),Array.isArray(s)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,s[0],t),s[1]]}if(typeof s=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(s=this.injectId(this.STATEMENT_PREFIX,e)+s),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(s+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,s,t);if(s===null)return"";throw SyntaxError("Invalid code generated: "+s)}valueToCode(e,t,s){if(isNaN(s))throw TypeError("Expecting valid order from block: "+e.type);var T=e.getInputTargetBlock(t);if(!T&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(!T||(t=this.blockToCode(T),t===""))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${T.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+T.type);if(!e)return"";T=!1;var N=Math.floor(s);const te=Math.floor(t);if(N<=te&&(N!==te||N!==0&&N!==99)){for(T=!0,N=0;N<this.ORDER_OVERRIDES.length;N++)if(this.ORDER_OVERRIDES[N][0]===s&&this.ORDER_OVERRIDES[N][1]===t){T=!1;break}}return T&&(e="("+e+")"),e}statementToCode(e,t){const s=e.getInputTargetBlock(t);if(!s&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(s),typeof e!="string")throw TypeError("Expecting code from statement block: "+(s&&s.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const s=this.nameDB_.getDistinctName(e,n.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=s,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,s);let T;for(;T!==t;)T=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}getVariableName(e){return this.getName(e,n.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,n.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,t){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,t)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,s){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},wm={},wm.CodeGenerator=n.CodeGenerator$$module$build$src$core$generator;var Tm=class extends Gp{constructor(e,t){super(e),this.flyout_=t}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,s){return t=s||this.getContentMetrics(),s=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*s)/e,width:(t.width+t.left+s)/e,top:0,left:0}}},dd;(function(e){e.BLOCK="block",e.BUTTON="button"})(dd||(dd={}));var _g="WORKSPACE_AT_BLOCK_CAPACITY",Np=class extends Ce{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new mi(e),this.workspace_.setMetricsManager(new Tm(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.id=h(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=Ue(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=Ue(rt.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new zp(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(ue(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(ue(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:$r.ComponentWeight.FLYOUT_WEIGHT,capabilities:[$r.Capability.AUTOHIDEABLE,$r.Capability.DELETE_AREA,$r.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)Ae(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&Pe(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const t=e!==this.isVisible();this.visible=e,t&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,s,T){let N;(N=this.svgGroup_)==null||N.setAttribute("width",`${e}`);let te;(te=this.svgGroup_)==null||te.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&Lt(this.svgGroup_,"translate("+s+"px,"+T+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(s,T),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)Ae(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=nt(e),e=this.createFlyoutInfo(e),wt(this.workspace_),this.setContents(e.contents),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const t=[],s=[];this.permanentlyDisabled.length=0;const T=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const N of e){if("custom"in N){e=this.getDynamicCategoryContents(N.custom),e=nt(e);const{contents:te,gaps:xe}=this.createFlyoutInfo(e);t.push(...te),s.push(...xe)}switch(N.kind.toUpperCase()){case"BLOCK":e=N;const te=this.createFlyoutBlock(e);t.push({type:dd.BLOCK,block:te}),this.addBlockGap(e,s,T);break;case"SEP":this.addSeparatorGap(N,s,T);break;case"LABEL":e=this.createButton(N,!0),t.push({type:dd.BUTTON,button:e}),s.push(T);break;case"BUTTON":e=this.createButton(N,!1),t.push({type:dd.BUTTON,button:e}),s.push(T)}}return{contents:t,gaps:s}}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,t){return new Li(this.workspace_,this.targetWorkspace,e,t)}createFlyoutBlock(e){let t;return e.blockxml?(e=typeof e.blockxml=="string"?n.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(t=this.getRecycledBlock(e.getAttribute("type")))||(t=gs(e,this.workspace_))):(t=this.getRecycledBlock(e.type),t||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[di]),t=In(e,this.workspace_))),t.isEnabled()||this.permanentlyDisabled.push(t),t}getRecycledBlock(e){let t=-1;for(let s=0;s<this.recycledBlocks.length;s++)if(this.recycledBlocks[s].type===e){t=s;break}return t===-1?void 0:this.recycledBlocks.splice(t,1)[0]}addBlockGap(e,t,s){let T;e.gap?T=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?n.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,T=parseInt(e.getAttribute("gap"))),t.push(!T||isNaN(T)?s:T)}addSeparatorGap(e,t,s){e=parseInt(String(e.gap)),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(s)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let s=0,T;T=e[s];s++)this.blockIsRecyclable_(T)?this.recycleBlock(T):T.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const s=this.mats[e];s&&(yc(s),Pe(s))}this.mats.length=0;for(let s=0,T;T=this.buttons_[s];s++)T.dispose();this.buttons_.length=0;let t;(t=this.workspace_.getPotentialVariableMap())==null||t.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const t=e.getRelativeToSurfaceXY();e.moveBy(-t.x,-t.y),this.recycledBlocks.push(e)}addBlockListeners_(e,t,s){this.listeners.push(ue(e,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(ue(s,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(Ee(e,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(Ee(e,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()})),this.listeners.push(Ee(s,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(Ee(s,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()}))}blockMouseDown(e){return t=>{const s=this.targetWorkspace.getGesture(t);s&&(s.setStartBlock(e),s.handleFlyoutStart(t,this))}}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let t=null;n.disable$$module$build$src$core$events$utils();var s=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{n.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=Kn(this.targetWorkspace,s),ee()){for(n.setGroup$$module$build$src$core$events$utils(!0),s=0;s<e.length;s++){const T=e[s];k(new(be(ht.VAR_CREATE))(T))}k(new(be(ht.BLOCK_CREATE))(t))}return this.autoClose?this.hide():this.filterForCapacity(),t}initFlyoutButton_(e,t,s){const T=e.createDom();e.moveTo(t,s),e.show(),this.listeners.push(ue(T,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,t,s,T,N){return t=Ue(rt.RECT,{"fill-opacity":0,x:t,y:s,height:T.height,width:T.width}),t.tooltip=e,xa(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),this.rectMap_.set(e,t),this.mats[N]=t}moveRectToBlock_(e,t){const s=t.getHeightWidth();e.setAttribute("width",String(s.width)),e.setAttribute("height",String(s.height)),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",String(t.y)),e.setAttribute("x",String(this.RTL?t.x-s.width:t.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let t=0,s;s=e[t];t++)if(!this.permanentlyDisabled.includes(s)){const T=this.targetWorkspace.isCapacityAvailable(ce(s));for(;s;)s.setDisabledReason(!T,_g),s=s.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const s=this.serializeBlock(e);return t.setResizesEnabled(!1),t=Gt(s,t),this.positionNewBlock(e,t),t}serializeBlock(e){return kn(e)}positionNewBlock(e,t){const s=this.targetWorkspace;var T=s.getOriginOffsetInPixels(),N=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),N=Bt.sum(N,e),T=Bt.difference(N,T),T.scale(1/s.scale),t.moveTo(new Bt(T.x,T.y))}};Np.FlyoutItemType=dd;var qp=class extends Np{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),s=t.getScrollMetrics(),T=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(s.top+(s.height-T.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),s=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===En.LEFT?e.width:s.width-this.width_:this.toolboxPosition_===En.LEFT?0:s.width:this.toolboxPosition_===En.LEFT?0:s.width+t.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const s=this.toolboxPosition_===En.RIGHT;var T=e+this.CORNER_RADIUS;T=["M "+(s?T:0)+",0"],T.push("h",s?-e:e),T.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,s?0:1,s?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),T.push("v",Math.max(0,t)),T.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,s?0:1,s?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),T.push("h",s?e:-e),T.push("z"),this.svgBackground_.setAttribute("d",T.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=tt(e);if(t.y){const s=this.workspace_.getMetricsManager(),T=s.getScrollMetrics();t=s.getViewMetrics().top-T.top+t.y;let N;(N=this.workspace_.scrollbar)==null||N.setY(t),_l(this.workspace_),To()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;var s=this.MARGIN;const T=this.RTL?s:s+this.tabWidth_;for(let We=0,vt;vt=e[We];We++)if(vt.type==="block"){var N=vt.block;if(!N)continue;var te=N.getDescendants(!1);for(let kr=0,Ar;Ar=te[kr];kr++)Ar.isInFlyout=!0;te=N.getSvgRoot();const rn=N.getHeightWidth();var xe=N.outputConnection?T-this.tabWidth_:T;N.moveBy(xe,s),xe=this.createRect_(N,this.RTL?xe-rn.width:xe,s,rn,We),this.addBlockListeners_(te,N,xe),s+=rn.height+t[We]}else vt.type==="button"&&(N=vt.button,this.initFlyoutButton_(N,T,s),s+=N.height+t[We])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===En.LEFT?new mr(-1e9,1e9,-1e9,t+e.width):new mr(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var t=this.workspace_.getTopBlocks(!1);for(let T=0,N;N=t[T];T++){var s=N.getHeightWidth().width;N.outputConnection&&(s-=this.tabWidth_),e=Math.max(e,s)}for(let T=0,N;N=this.buttons_[T];T++)e=Math.max(e,N.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=Vr.scrollbarThickness,this.width_!==e){for(let T=0,N;N=t[T];T++){if(this.RTL){s=N.getRelativeToSurfaceXY().x;let te=e/this.workspace_.scale-this.MARGIN;N.outputConnection||(te-=this.tabWidth_),N.moveBy(te-s,0)}this.rectMap_.has(N)&&this.moveRectToBlock_(this.rectMap_.get(N),N)}if(this.RTL)for(let T=0,N;N=this.buttons_[T];T++)t=N.getPosition().y,N.moveTo(e/this.workspace_.scale-N.width-this.MARGIN-this.tabWidth_,t);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==En.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};qp.registryName="verticalFlyout",l(It.FLYOUTS_VERTICAL_TOOLBOX,_i,qp);var Sm=class extends Np{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),s=t.getScrollMetrics(),T=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(s.left+(s.width-T.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),s=e.getViewMetrics();e=e.getToolboxMetrics();const T=this.toolboxPosition_===En.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?T?e.height:s.height-this.height_:T?0:s.height:T?0:s.height+t.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const s=this.toolboxPosition_===En.TOP,T=["M 0,"+(s?0:this.CORNER_RADIUS)];s?(T.push("h",e+2*this.CORNER_RADIUS),T.push("v",t),T.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),T.push("h",-e),T.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(T.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),T.push("h",e),T.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),T.push("v",t),T.push("h",-e-2*this.CORNER_RADIUS)),T.push("z"),this.svgBackground_.setAttribute("d",T.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=tt(e);if(t=t.x||t.y){const s=this.workspace_.getMetricsManager(),T=s.getScrollMetrics();t=s.getViewMetrics().left-T.left+t;let N;(N=this.workspace_.scrollbar)==null||N.setX(t),_l(this.workspace_),To()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;const s=this.MARGIN;let T=s+this.tabWidth_;this.RTL&&(e=e.reverse());for(let We=0,vt;vt=e[We];We++)if(vt.type==="block"){var N=vt.block;if(N==null)continue;var te=N.getDescendants(!1);for(let kr=0,Ar;Ar=te[kr];kr++)Ar.isInFlyout=!0;te=N.getSvgRoot();const rn=N.getHeightWidth();var xe=N.outputConnection?this.tabWidth_:0;xe=this.RTL?T+rn.width:T-xe,N.moveBy(xe,s),xe=this.createRect_(N,xe,s,rn,We),T+=rn.width+t[We],this.addBlockListeners_(te,N,xe)}else vt.type==="button"&&(N=vt.button,this.initFlyoutButton_(N,T,s),T+=N.width+t[We])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===En.TOP?new mr(-1e9,t+e.height,-1e9,1e9):new mr(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const t=this.workspace_.getTopBlocks(!1);for(let T=0,N;N=t[T];T++)e=Math.max(e,N.getHeightWidth().height);const s=this.buttons_;for(let T=0,N;N=s[T];T++)e=Math.max(e,N.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=Vr.scrollbarThickness,this.height_!==e){for(let T=0,N;N=t[T];T++)this.rectMap_.has(N)&&this.moveRectToBlock_(this.rectMap_.get(N),N);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==En.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};l(It.FLYOUTS_HORIZONTAL_TOOLBOX,_i,Sm);var Gf=class extends Ii{constructor(e,t,s,T,N){super(Tr.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Gf.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new Hn(0,0),e!==Tr.SKIP_SETUP&&(N?this.configure_(N):this.setTypes(s,T),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new Cr;this.variable||(e=n.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new Cr;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new Cr;const s=e.getAttribute("id"),T=e.textContent,N=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=n.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,s,T,N),N!==null&&N!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+Ir(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var t=this.saveLegacyState(Gf);return t!==null||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.name,t.type=this.variable.type)),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new Cr;this.loadLegacyState(Gf,e)||(e=n.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new Cr;return t=n.getVariable$$module$build$src$core$variables(t.workspace,e),t?(t=t.type,this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new Cr;this.variable=n.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let s=0;s<t.length;s++)if(e===t[s])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,t=""){if(Array.isArray(e)){let s=!1;for(let T=0;T<e.length;T++)e[T]===t&&(s=!0);if(!s)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(e!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===ad){n.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===hl){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(Dr(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var s=this.getVariableTypes(),T=0;T<s.length;T++){const N=this.sourceBlock_.workspace.getVariablesOfType(s[T]);t=t.concat(N)}for(t.sort(so.compareByName),s=[],T=0;T<t.length;T++)s[T]=[t[T].name,t[T].getId()];return s.push([n.Msg$$module$build$src$core$msg.RENAME_VARIABLE,ad]),n.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&s.push([n.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),hl]),s}};bi("field_variable",Gf);var Yp=class extends kp{constructor(e,t,s,T,N,te){super(Tr.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==Tr.SKIP_SETUP&&(te?this.configure_(te):this.setConstraints(t,s,T),this.setValue(e),N&&this.setValidator(N))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,s){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(s),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.includes("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const s=t.indexOf(".");this.decimalPlaces=s===-1?e?0:null:t.length-s-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,pt(e,Kr.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,pt(e,Kr.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};bi("field_number",Yp),Yp.prototype.DEFAULT_VALUE=0;var Om=class extends Ns{constructor(e,t,s){super(String(e??""),t,s),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(Dr(e.text),void 0,e)}};bi("field_label_serializable",Om);var Nu=class extends Tr{constructor(e,t,s){super(Tr.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=Nu.CHECK_CHAR,e!==Tr.SKIP_SETUP&&(s&&this.configure_(s),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(Nu);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();Ze(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||Nu.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};Nu.CHECK_CHAR="",bi("field_checkbox",Nu),Nu.prototype.DEFAULT_VALUE=!1;var xm=class{constructor(e,t){this.draggable=e,this.workspace=t,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){this.draggable.startDrag(e)}onDrag(e,t){this.moveDraggable(e,t),t=this.getRoot(this.draggable),Qi(t)&&t.setDeleteStyle(this.wouldDeleteDraggable(e,t)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const t=this.getRoot(this.draggable);if(this.dragTarget!==e){let s;(s=this.dragTarget)==null||s.onDragExit(t),e==null||e.onDragEnter(t)}e==null||e.onDragOver(t),this.dragTarget=e}moveDraggable(e,t){t=this.pixelsToWorkspaceUnits(t),t=Bt.sum(this.startLoc,t),this.draggable.drag(t,e)}wouldDeleteDraggable(e,t){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,$r.Capability.DELETE_AREA)?e.wouldDelete(t):!1}onDragEnd(e){const t=n.getGroup$$module$build$src$core$events$utils();var s=this.workspace.getDragTarget(e);const T=this.getRoot(this.draggable);if(s){let N;(N=this.dragTarget)==null||N.onDrop(T)}this.shouldReturnToStart(e,T)&&this.draggable.revertDrag(),(s=Qi(T)&&this.wouldDeleteDraggable(e,T))&&this.draggable instanceof J&&Sc(this.draggable.getRootBlock()),this.draggable.endDrag(e),s&&Qi(T)&&(e=n.getGroup$$module$build$src$core$events$utils(),n.setGroup$$module$build$src$core$events$utils(t),T.dispose(),n.setGroup$$module$build$src$core$events$utils(e))}getRoot(e){return e instanceof J?e.getRootBlock():e}shouldReturnToStart(e,t){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(t):!1}pixelsToWorkspaceUnits(e){return e=new Bt(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};l(It.BLOCK_DRAGGER,_i,xm);var Wf={};Wf.BlockDragStrategy=Rp,Wf.BubbleDragStrategy=Mf,Wf.CommentDragStrategy=qh,Wf.Dragger=xm;var Kp=class extends eo{constructor(e,t,s){super(e?e.workspace.id:void 0),this.type=ht.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=t,this.blocks=s)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Kp),t.isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};l(It.EVENT,ht.BLOCK_DRAG,Kp);var Xp=class extends as{constructor(e,t,s,T){super(e),this.type=ht.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=t,this.oldValue=s,this.newValue=T)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Xp),t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};l(It.EVENT,ht.BLOCK_FIELD_INTERMEDIATE_CHANGE,Xp);var Jp=class extends as{constructor(e){super(e),this.type=ht.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Jp),t.oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(s=e.oldCoordinate.split(","),t.oldCoordinate=new Bt(Number(s[0]),Number(s[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(s=e.newCoordinate.split(","),t.newCoordinate=new Bt(Number(s[0]),Number(s[1]))),e.reason!==void 0&&(t.reason=e.reason),e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const s=t.getParent();return s?(e.parentId=s.id,(t=s.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Bt.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var s=t.getBlockById(this.blockId);if(s){var T=e?this.newParentId:this.oldParentId,N=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,T){var te=t.getBlockById(T);if(!te){console.warn("Can't connect to non-existent block: "+T);return}}if(s.getParent()&&s.unplug(),e)N=s.getRelativeToSurfaceXY(),s.moveBy(e.x-N.x,e.y-N.y,this.reason);else{t=s.outputConnection,(!t||s.previousConnection&&s.previousConnection.isConnected())&&(t=s.previousConnection);let xe,We;s=(We=t)==null?void 0:We.type,N?(s=te.getInput(N))&&(xe=s.connection):s===Qt.PREVIOUS_STATEMENT&&(xe=te.nextConnection),xe&&t?t.connect(xe):console.warn("Can't connect to non-existent input: "+N)}}else console.warn("Can't move non-existent block: "+this.blockId)}};l(It.EVENT,ht.BLOCK_MOVE,Jp);var Zp=class extends eo{constructor(e,t,s){super(e?e.workspace.id:void 0),this.type=ht.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=s)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Zp),t.isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}},Qp;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(Qp||(Qp={})),l(It.EVENT,ht.BUBBLE_OPEN,Zp);var wa=class extends ra{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=n.getGroup$$module$build$src$core$events$utils(),this.recordUndo=C())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new wa),t.commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){const s=e.getEventWorkspace_();if(t){if(!e.json)throw Error("Encountered a comment event without proper json");_n(e.json,s)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=s.getCommentById(e.commentId))?t.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},em=class extends wa{constructor(e,t,s){super(e),this.type=ht.COMMENT_CHANGE,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof s>"u"?"":s)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new em),t.oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var s=e?this.newContents_:this.oldContents_;if(s===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setText(s)}else console.warn("Can't change non-existent comment: "+this.commentId)}};l(It.EVENT,ht.COMMENT_CHANGE,em);var tm=class extends wa{constructor(e,t){super(e),this.newCollapsed=t,this.type=ht.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new tm),t.newCollapsed=e.newCollapsed,t}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=t.getCommentById(this.commentId))?t.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};l(It.EVENT,ht.COMMENT_COLLAPSE,tm);var nm=class extends wa{constructor(e){super(e),this.type=ht.COMMENT_CREATE,e&&(this.xml=So(e),this.json=jn(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ir(this.xml),e.json=this.json,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new nm),t.xml=n.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}run(e){wa.CommentCreateDeleteHelper(this,e)}};l(It.EVENT,ht.COMMENT_CREATE,nm);var rm=class extends wa{constructor(e){super(e),this.type=ht.COMMENT_DELETE,e&&(this.xml=So(e),this.json=jn(e,{addCoordinates:!0}))}run(e){wa.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ir(this.xml),e.json=this.json,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new rm),t.xml=n.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}};l(It.EVENT,ht.COMMENT_DELETE,rm);var im=class extends eo{constructor(e,t){super(e?e.workspace.id:void 0),this.type=ht.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=t)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new im),t.isStart=e.isStart,t.commentId=e.commentId,t}};l(It.EVENT,ht.COMMENT_DRAG,im);var om=class extends wa{constructor(e){super(e),this.type=ht.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new om),s=e.oldCoordinate.split(","),t.oldCoordinate_=new Bt(Number(s[0]),Number(s[1])),s=e.newCoordinate.split(","),t.newCoordinate_=new Bt(Number(s[0]),Number(s[1])),t}isNull(){return Bt.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");t.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};l(It.EVENT,ht.COMMENT_MOVE,om);var sm=class extends wa{constructor(e){super(e),this.type=ht.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new sm),t.oldSize=new Hn(e.oldWidth,e.oldHeight),t.newSize=new Hn(e.newWidth,e.newHeight),t}isNull(){return Hn.equals(this.oldSize,this.newSize)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");t.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};l(It.EVENT,ht.COMMENT_RESIZE,sm);var am=class extends eo{constructor(e,t,s){super(s),this.type=ht.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=t??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new am),t.oldItem=e.oldItem,t.newItem=e.newItem,t}};l(It.EVENT,ht.TOOLBOX_ITEM_SELECT,am);var Am=class extends ra{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=ht.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};l(It.EVENT,ht.FINISHED_LOADING,Am);var Rm,Cm,km,Im,Mm,Nm,Lm,Dm,Pm,Bm,jm,Um,Fm,Hm,Vm,zm,Gm,Wm,qm,Ym,Km,Xm,Jm,Zm,Qm,tn;n.BLOCK_CHANGE$$module$build$src$core$events$events=ht.BLOCK_CHANGE,n.BLOCK_CREATE$$module$build$src$core$events$events=ht.BLOCK_CREATE,n.BLOCK_DELETE$$module$build$src$core$events$events=ht.BLOCK_DELETE,Rm=ht.BLOCK_DRAG,n.BLOCK_MOVE$$module$build$src$core$events$events=ht.BLOCK_MOVE,Cm=ht.BLOCK_FIELD_INTERMEDIATE_CHANGE,km=ht.BUBBLE_OPEN,Im=ht.BLOCK_CHANGE,Mm=ht.CLICK,Nm=ht.COMMENT_CHANGE,Lm=ht.COMMENT_CREATE,Dm=ht.COMMENT_DELETE,Pm=ht.COMMENT_MOVE,Bm=ht.COMMENT_RESIZE,jm=ht.COMMENT_DRAG,Um=ht.BLOCK_CREATE,Fm=ht.BLOCK_DELETE,Hm=ht.FINISHED_LOADING,Vm=ht.MARKER_MOVE,zm=ht.BLOCK_MOVE,Gm=ht.SELECTED,Wm=ht.THEME_CHANGE,qm=ht.TOOLBOX_ITEM_SELECT,Ym=ht.TRASHCAN_OPEN,Km=ht.UI,Xm=ht.VAR_CREATE,Jm=ht.VAR_DELETE,Zm=ht.VAR_RENAME,Qm=ht.VIEWPORT_CHANGE,tn={},tn.Abstract=ra,tn.BLOCK_CHANGE=n.BLOCK_CHANGE$$module$build$src$core$events$events,tn.BLOCK_CREATE=n.BLOCK_CREATE$$module$build$src$core$events$events,tn.BLOCK_DELETE=n.BLOCK_DELETE$$module$build$src$core$events$events,tn.BLOCK_DRAG=Rm,tn.BLOCK_FIELD_INTERMEDIATE_CHANGE=Cm,tn.BLOCK_MOVE=n.BLOCK_MOVE$$module$build$src$core$events$events,tn.BUBBLE_OPEN=km,tn.BUMP_EVENTS=Yc,tn.BlockBase=as,tn.BlockChange=Hi,tn.BlockCreate=Xh,tn.BlockDelete=od,tn.BlockDrag=Kp,tn.BlockFieldIntermediateChange=Xp,tn.BlockMove=Jp,tn.BubbleOpen=Zp,tn.BubbleType=Qp,tn.CHANGE=Im,tn.CLICK=Mm,tn.COMMENT_CHANGE=Nm,tn.COMMENT_CREATE=Lm,tn.COMMENT_DELETE=Dm,tn.COMMENT_DRAG=jm,tn.COMMENT_MOVE=Pm,tn.COMMENT_RESIZE=Bm,tn.CREATE=Um,tn.Click=Sh,tn.ClickTarget=Kc,tn.CommentBase=wa,tn.CommentChange=em,tn.CommentCollapse=tm,tn.CommentCreate=nm,tn.CommentDelete=rm,tn.CommentDrag=im,tn.CommentMove=om,tn.CommentResize=sm,tn.DELETE=Fm,tn.FINISHED_LOADING=Hm,tn.FinishedLoading=Am,tn.MARKER_MOVE=Vm,tn.MOVE=zm,tn.MarkerMove=Hf,tn.SELECTED=Gm,tn.Selected=Ru,tn.THEME_CHANGE=Wm,tn.TOOLBOX_ITEM_SELECT=qm,tn.TRASHCAN_OPEN=Ym,tn.ThemeChange=$u,tn.ToolboxItemSelect=am,tn.TrashcanOpen=ze,tn.UI=Km,tn.UiBase=eo,tn.VAR_CREATE=Xm,tn.VAR_DELETE=Jm,tn.VAR_RENAME=Zm,tn.VIEWPORT_CHANGE=Qm,tn.VarBase=vr,tn.VarCreate=Ri,tn.VarDelete=ld,tn.VarRename=rc,tn.ViewportChange=Xl,tn.clearPendingUndo=W,tn.disable=n.disable$$module$build$src$core$events$utils,tn.disableOrphans=H,tn.enable=n.enable$$module$build$src$core$events$utils,tn.filter=z,tn.fire=k,tn.fromJson=se,tn.get=be,tn.getDescendantIds=Q,tn.getGroup=n.getGroup$$module$build$src$core$events$utils,tn.getRecordUndo=C,tn.isEnabled=ee,tn.setGroup=n.setGroup$$module$build$src$core$events$utils,tn.setRecordUndo=n.setRecordUndo$$module$build$src$core$events$utils;var js={};js.BottomRow=mm,js.ConstantProvider=fm,js.Drawer=pm,js.MarkerSvg=_m,js.PathObject=$m,js.RenderInfo=ym,js.Renderer=Wp,js.RightConnectionShape=gm,js.StatementInput=Mp,js.TopRow=bm,$h();var gi={};gi.registerCleanup=ch,gi.registerCollapse=hh,gi.registerCollapseExpandBlock=mh,gi.registerComment=zc,gi.registerCommentCreate=yh,gi.registerCommentDelete=af,gi.registerCommentDuplicate=lf,gi.registerCommentOptions=Wc,gi.registerDefaultOptions=$h,gi.registerDelete=gh,gi.registerDeleteAll=fh,gi.registerDisable=Gc,gi.registerDuplicate=sf,gi.registerExpand=Hc,gi.registerHelp=bh,gi.registerInline=ph,gi.registerRedo=lh,gi.registerUndo=Fc;var Lp={};Lp.CommentView=$p,Lp.RenderedWorkspaceComment=pa,Lp.WorkspaceComment=Kh;var qf={};qf.Bubble=ur,qf.MiniWorkspaceBubble=Cs,qf.TextBubble=Tp,qf.TextInputBubble=vo;var eg=class extends al{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},tg=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=yr(e.xPos,this.info_.startY);for(let t=0,s;s=e.elements[t];t++)Ke.isLeftSquareCorner(s)?this.steps_+=this.highlightConstants_.START_POINT:Ke.isLeftRoundedCorner(s)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):Ke.isPreviousConnection(s)?this.steps_+=this.notchPaths_.pathLeft:Ke.isHat(s)?this.steps_+=this.startPaths_.path(this.RTL_):Ke.isSpacer(s)&&s.width!==0&&(this.steps_+=Zt("H",s.xPos+s.width-this.highlightOffset));this.steps_+=Zt("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Zt("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const s=e.height-t.connectionHeight;this.steps_+=Wr(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Zt("v",s)}else this.steps_+=Wr(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const s=e.height-2*this.insideCornerPaths_.height;this.steps_+=Wr(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Zt("v",s)+this.insideCornerPaths_.pathBottom(this.RTL_)+Pi(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Wr(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Pi(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof jf&&e.followsStatement&&(this.steps_+=Zt("H",t)),this.RTL_&&(this.steps_+=Zt("H",t),e.height>this.highlightOffset&&(this.steps_+=Zt("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=Zt("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];Ke.isLeftSquareCorner(t)?this.steps_+=Wr(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):Ke.isLeftRoundedCorner(t)&&(this.steps_+=Wr(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=Wr(this.info_.startX,e):(this.steps_+=Wr(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=Zt("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,Ke.isLeftRoundedCorner(e.elements[0])?this.steps_+=Zt("V",this.outsideCornerPaths_.height):this.steps_+=Zt("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,s=e.xPos+e.connectionWidth;var T=e.centerline-e.height/2;const N=e.width-e.connectionWidth,te=T+t;this.RTL_?(T=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=Wr(s-t,te)+Zt("v",T)+this.puzzleTabPaths_.pathDown(this.RTL_)+Zt("v",e)+Zt("h",N)):this.inlineSteps_+=Wr(e.xPos+e.width+t,te)+Zt("v",e.height)+Zt("h",-N)+Wr(s,T+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},ng=class extends ll{constructor(e,t){super(e,t),this.highlighter_=new tg(t)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=Zt("H",e.xPos+e.width)+Zt("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let s=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(s*=-1),e.connectionModel.setOffsetInBlock(s,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let s=e.xPos+e.statementEdge+t.notchOffset;s=this.info_.RTL?-1*s:s+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(s,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let s=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(s*=-1),t.connectionModel.setOffsetInBlock(s,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,s=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-s:s)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},rg=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=yr(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,s=(1-Math.SQRT1_2)*(e+t)-t,T=yr(s,s)+xr("a","0 0,0",e,cn(-s-t,e-s)),N=xr("a","0 0,0",e+t,cn(e+t,e+t)),te=yr(s,-s)+xr("a","0 0,0",e+t,cn(e-s,s+t));return{width:e+t,height:e,pathTop(xe){return xe?T:""},pathBottom(xe){return xe?N:te}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,s=(1-Math.SQRT1_2)*(e-t)+t,T=yr(s,s)+xr("a","0 0,1",e-t,cn(e-s,-s+t)),N=yr(t,e)+xr("a","0 0,1",e-t,cn(e,-e+t)),te=-s,xe=yr(s,te)+xr("a","0 0,1",e-t,cn(-s+t,-te-e));return{height:e,topLeft(We){return We?T:N},bottomLeft(){return xe}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,s=yr(-2,-t+3.4)+Pi(-.45*e,-2.1),T=Zt("v",2.5)+yr(.97*-e,2.5)+pr("q",[cn(.05*-e,10),cn(.3*e,9.5)])+yr(.67*e,-1.9)+Zt("v",2.5),N=Zt("v",-1.5)+yr(-.92*e,-.5)+pr("q",[cn(-.19*e,-5.5),cn(0,-11)])+yr(.92*e,1),te=yr(-5,t-.7)+Pi(.46*e,-2.1);return{width:e,height:t,pathUp(xe){return xe?s:N},pathDown(xe){return xe?T:te}}}makeNotch(){return{pathLeft:Zt("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Pi(5.1,2.6)+yr(-10.2,6.8)+Pi(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=yr(25,-8.7)+pr("c",[cn(29.7,-6.2),cn(57.2,-.5),cn(75,8.7)]),s=pr("c",[cn(17.8,-9.2),cn(45.3,-14.9),cn(75,-8.7)])+Wr(100.5,e+.5);return{path(T){return T?t:s}}}},ig=class extends Tu{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},og=class extends sl{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},sg=class extends nc{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Gi||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new ig(this.constants_,e)),t.hasInlineInput=!0):e instanceof Gi?(t.elements.push(new og(this.constants_,e)),t.hasStatement=!0):e instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new id(this.constants_,e)),t.hasExternalInput=!0):(e instanceof zi||e instanceof Ls)&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let s=0,T;T=this.rows[s];s++)T.hasExternalInput&&(e=!0);for(let s=0,T;T=this.rows[s];s++){var t=T.elements;if(T.elements=[],T.startsWithElemSpacer()&&T.elements.push(new wi(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let N=0;N<t.length-1;N++){T.elements.push(t[N]);const te=this.getInRowSpacing_(t[N],t[N+1]);T.elements.push(new wi(this.constants_,te))}T.elements.push(t[t.length-1]),T.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&T.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),T.elements.push(new wi(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&Ke.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&Ke.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&Ke.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Ke.isInput(e)&&(!t||Ke.isStatementInput(t)))return Ke.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:Ke.isIcon(e)?2*this.constants_.LARGE_PADDING+1:Ke.isHat(e)?this.constants_.NO_PADDING:Ke.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:Ke.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:Ke.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Ke.isInput(e)&&!t){if(Ke.isExternalInput(e))return this.constants_.NO_PADDING;if(Ke.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Ke.isStatementInput(e))return this.constants_.NO_PADDING}if(!Ke.isInput(e)&&t&&Ke.isInput(t)){if(Ke.isField(e)&&e.isEditable){if(Ke.isInlineInput(t)||Ke.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(Ke.isInlineInput(t)||Ke.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(Ke.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Ke.isIcon(e)&&t&&!Ke.isInput(t))return this.constants_.LARGE_PADDING;if(Ke.isInlineInput(e)&&t&&Ke.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Ke.isLeftSquareCorner(e)&&t){if(Ke.isHat(t))return this.constants_.NO_PADDING;if(Ke.isPreviousConnection(t))return t.notchOffset;if(Ke.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(Ke.isLeftRoundedCorner(e)&&t){if(Ke.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(Ke.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return Ke.isField(e)&&t&&Ke.isField(t)&&e.isEditable===t.isEditable||t&&Ke.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return Ke.isTopRow(e)&&Ke.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Ke.isTopRow(e)||Ke.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(Ke.isSpacer(t))return e.yPos+t.height/2;if(Ke.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,Ke.isNextConnection(t)?e+t.height/2:e-t.height/2;if(Ke.isTopRow(e))return Ke.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let s=e.yPos;return Ke.isField(t)||Ke.isIcon(t)?(s+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(s+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):s=Ke.isInlineInput(t)?s+t.height/2:s+e.height/2,s}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,s=null;for(let T=this.rows.length-1,N;N=this.rows[T];T--)t.set(N,e),Ke.isInputRow(N)&&(N.hasStatement&&this.alignStatementRow_(N),s&&s.hasStatement&&N.width<s.width?t.set(N,s.width):e=N.hasStatement?N.width:Math.max(e,N.width),s=N);e=0;for(let T=0,N;N=this.rows[T];T++)N.hasStatement?e=this.getDesiredRowWidth_(N):Ke.isSpacer(N)?N.width=Math.max(e,t.get(N)):(s=N.width,e=Math.max(e,t.get(N))-s,0<e&&this.addAlignmentPadding_(N,e),e=N.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let T=0,N;N=this.rows[T];T++){N.yPos=t,N.xPos=this.startX,t+=N.height,e=Math.max(e,N.widthWithConnectedBlocks);var s=t-this.topRow.ascenderHeight;N===this.bottomRow&&s<this.constants_.MIN_BLOCK_HEIGHT&&(s=this.constants_.MIN_BLOCK_HEIGHT-s,this.bottomRow.height+=s,t+=s),this.recordElemPositions_(N)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(s=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,s.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},ag=class extends xu{constructor(e,t,s){super(e,t,s),this.constants=s,this.colourDark="#000000",this.svgPathDark=Ue(rt.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=Ue(rt.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=zs("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},lg=class extends Po{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t){super.refreshDom(e,t),this.getHighlightConstants().init()}makeConstants_(){return new eg}makeRenderInfo_(e){return new sg(this,e)}makeDrawer_(e,t){return new ng(e,t)}makePathObject(e,t){return new ag(e,t,this.getConstants())}makeHighlightConstants_(){return new rg(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};kl("geras",lg);var Ta={};Ta.ConstantProvider=eg,Ta.Drawer=ng,Ta.HighlightConstantProvider=rg,Ta.Highlighter=tg,Ta.InlineInput=ig,Ta.PathObject=ag,Ta.RenderInfo=sg,Ta.Renderer=lg,Ta.StatementInput=og;var cg=class extends nc{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const T=this.rows[t];var s=T.elements;if(T.elements=[],T.startsWithElemSpacer()&&T.elements.push(new wi(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(let N=0;N<s.length-1;N++){T.elements.push(s[N]);const te=this.getInRowSpacing_(s[N],s[N+1]);T.elements.push(new wi(this.constants_,te))}T.elements.push(s[s.length-1]),T.endsWithElemSpacer()&&(s=this.getInRowSpacing_(s[s.length-1],null),e&&T.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),T.elements.push(new wi(this.constants_,s)))}}}getInRowSpacing_(e,t){if(!e)return t&&Ke.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&Ke.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&Ke.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Ke.isInput(e)&&!t)return Ke.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:Ke.isIcon(e)?2*this.constants_.LARGE_PADDING+1:Ke.isHat(e)?this.constants_.NO_PADDING:Ke.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:Ke.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:Ke.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Ke.isInput(e)&&!t){if(Ke.isExternalInput(e))return this.constants_.NO_PADDING;if(Ke.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Ke.isStatementInput(e))return this.constants_.NO_PADDING}if(!Ke.isInput(e)&&t&&Ke.isInput(t)){if(Ke.isField(e)&&e.isEditable){if(Ke.isInlineInput(t)||Ke.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(Ke.isInlineInput(t)||Ke.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(Ke.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Ke.isIcon(e)&&t&&!Ke.isInput(t))return this.constants_.LARGE_PADDING;if(Ke.isInlineInput(e)&&t&&Ke.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Ke.isLeftSquareCorner(e)&&t){if(Ke.isHat(t))return this.constants_.NO_PADDING;if(Ke.isPreviousConnection(t)||Ke.isNextConnection(t))return t.notchOffset}return Ke.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:Ke.isField(e)&&t&&Ke.isField(t)&&e.isEditable===t.isEditable||t&&Ke.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return Ke.isTopRow(e)&&Ke.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Ke.isTopRow(e)||Ke.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(Ke.isSpacer(t))return e.yPos+t.height/2;if(Ke.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,Ke.isNextConnection(t)?e+t.height/2:e-t.height/2;if(Ke.isTopRow(e))return Ke.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let s=e.yPos;return s=Ke.isField(t)&&e.hasStatement?s+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):s+e.height/2}finalize_(){let e=0,t=0;for(var s=0;s<this.rows.length;s++){const N=this.rows[s];N.yPos=t,N.xPos=this.startX,t+=N.height,e=Math.max(e,N.widthWithConnectedBlocks);var T=t-this.topRow.ascenderHeight;N===this.bottomRow&&T<this.constants_.MIN_BLOCK_HEIGHT&&(T=this.constants_.MIN_BLOCK_HEIGHT-T,this.bottomRow.height+=T,t+=T),this.recordElemPositions_(N)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(s=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,s.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},ug=class extends Po{constructor(e){super(e)}makeRenderInfo_(e){return new cg(this,e)}};kl("thrasos",ug);var lm={};lm.RenderInfo=cg,lm.Renderer=ug;var $g={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},vg={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},Eg=new ir("zelos",$g,vg),wg={Classic:Zh,Zelos:Eg},cm=class{constructor(e,t,s){this.id_=e.toolboxitemid||E(),this.level_=(this.parent_=s||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},Us=class extends cm{constructor(e,t,s){super(e,t,s),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const s=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(s)}}parseCategoryDef_(e){this.name_="name"in e?Dr(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Un(this.htmlDiv_,zr.TREEITEM),pt(this.htmlDiv_,Kr.SELECTED,!1),pt(this.htmlDiv_,Kr.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Un(this.iconDom_,zr.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&pt(this.htmlDiv_,Kr.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&Ze(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&Ze(e,t),t=`${Us.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&Ze(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&Ze(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&Ze(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=Us.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle(t);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=Dr(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=fo(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):ps(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&ae(e,t),(t=this.cssConfig_.openicon)&&Ze(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&ae(e,t),(t=this.cssConfig_.closedicon)&&Ze(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const s=this.parseColour(Us.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||s,t&&Ze(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&Oe(this.rowDiv_,t);pt(this.htmlDiv_,Kr.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:nt(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){Pe(this.htmlDiv_)}};Us.registrationName="category",Us.nestedPadding=19,Us.borderWidth=8,Us.defaultBackgroundColour="#57e",He(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),l(It.TOOLBOX_ITEM,Us.registrationName,Us);var Yf=class extends cm{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&Ze(e,t),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){Pe(this.htmlDiv)}};Yf.registrationName="sep",He(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),l(It.TOOLBOX_ITEM,Yf.registrationName,Yf);var fd=class extends Us{constructor(e,t,s){super(e,t,s),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let s=0;s<t.length;s++){const T=t[s];!a(It.TOOLBOX_ITEM,T.kind)||T.kind.toLowerCase()===Yf.registrationName&&e?(this.flyoutItems_.push(T),e=!0):(this.createToolboxItem(T),e=!1)}}}}createToolboxItem(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&yt(e)&&(t=fd.registrationName),e=new(u(It.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Un(this.subcategoriesDiv_,zr.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),pt(this.htmlDiv_,Kr.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&Ze(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var s=this.cssConfig_.contents;for(s&&Ze(t,s),s=0;s<e.length;s++){const T=e[s];T.init();const N=T.getDiv();if(t.appendChild(N),T.getClickTarget){let te;(te=T.getClickTarget())==null||te.setAttribute("id",T.getId())}}return t}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let t;(t=this.parentToolbox_.getFlyout())==null||t.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}pt(this.htmlDiv_,Kr.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let s=0;s<t.length;s++)t[s].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};fd.registrationName="collapsibleCategory",l(It.TOOLBOX_ITEM,fd.registrationName,fd);var hg=class extends Ce{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),ft(this.flyout.createDom("svg"),t),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:$r.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[$r.Capability.AUTOHIDEABLE,$r.Capability.DELETE_AREA,$r.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Un(this.contentsDiv_,zr.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),Ze(e,"blocklyToolboxDiv"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return Ze(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=ue(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=ue(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(De(e)||e.target===this.HtmlDiv)U().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),U().hideChaff(!0)}fe()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext();break;case"ArrowUp":t=this.selectPrevious();break;case"ArrowLeft":t=this.selectParent();break;case"ArrowRight":t=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=new Vi({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?v(It.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):v(It.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e;for(let t=0;t<this.contents_.length;t++){const s=this.contents_[t];s&&s.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let s=0;s<e.length;s++)this.createToolboxItem(e[s],t);this.contentsDiv_.appendChild(t)}createToolboxItem(e,t){var s=e.kind;s.toUpperCase()==="CATEGORY"&&yt(e)&&(s=fd.registrationName),(s=u(It.TOOLBOX_ITEM,s.toLowerCase()))&&(e=new s(e,this),e.init(),this.addToolboxItem_(e),(s=e.getDiv())&&t.appendChild(s),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&Ze(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&Oe(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,s=t+e.height,T=e.left;return e=T+e.width,this.toolboxPosition===En.TOP?new mr(-1e7,s,-1e7,1e7):this.toolboxPosition===En.BOTTOM?new mr(t,1e7,-1e7,1e7):this.toolboxPosition===En.LEFT?new mr(-1e7,1e7,-1e7,e):new mr(-1e7,1e7,T,1e7)}wouldDelete(e){return e instanceof J?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(Qi(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===En.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===En.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===En.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition===En.TOP?e.scrollY+t.height:e.scrollY),$e(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!$s(e)||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),pt(this.contentsDiv_,Kr.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),pt(this.contentsDiv_,Kr.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout.show(t.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,t){const s=e&&e.getName();let T=t&&t.getName();e===t&&(T=null),e=new(be(ht.TOOLBOX_ITEM_SELECT))(s,T,this.workspace_.id),k(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)Ae(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),Pe(this.HtmlDiv))}};He(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),l(It.TOOLBOX,_i,hg);var Tg="11.2.2",Sg=Qt.INPUT_VALUE,Og=Qt.OUTPUT_VALUE,xg=Qt.NEXT_STATEMENT,Ag=Qt.PREVIOUS_STATEMENT,Rg=En.TOP,Cg=En.BOTTOM,kg=En.LEFT,Ig=En.RIGHT;ic.prototype.newBlock=function(e,t){return new Ds(this,e,t)},mi.prototype.newBlock=function(e,t){return new J(this,e,t)},ic.prototype.newComment=function(e){return new Kh(this,e)},mi.prototype.newComment=function(e){return new pa(this,e)},mi.newTrashcan=function(e){return new et(e)},Cs.prototype.newWorkspaceSvg=function(e){return new mi(e)},n.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=Yo(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],n.Names$$module$build$src$core$names.NameType.PROCEDURE)};var gt={};return gt.ASTNode=Rt,gt.BasicCursor=c,gt.Block=Ds,gt.BlockSvg=J,gt.Blocks=Oi,gt.COLLAPSED_FIELD_NAME=au,gt.COLLAPSED_INPUT_NAME=Mo,gt.COLLAPSE_CHARS=Bs,gt.CodeGenerator=n.CodeGenerator$$module$build$src$core$generator,gt.CollapsibleToolboxCategory=fd,gt.ComponentManager=$r,gt.Connection=Qn,gt.ConnectionChecker=xp,gt.ConnectionDB=nl,gt.ConnectionType=Qt,gt.ContextMenu=tl,gt.ContextMenuItems=gi,gt.ContextMenuRegistry=Mn,gt.Css=Mh,gt.Cursor=o,gt.DELETE_VARIABLE_ID=hl,gt.DeleteArea=Ce,gt.DragTarget=Te,gt.DropDownDiv=Xr,gt.Events=tn,gt.Extensions=co,gt.Field=Tr,gt.FieldCheckbox=Nu,gt.FieldDropdown=Ii,gt.FieldImage=Mu,gt.FieldLabel=Ns,gt.FieldLabelSerializable=Om,gt.FieldNumber=Yp,gt.FieldTextInput=Ip,gt.FieldVariable=Gf,gt.Flyout=Np,gt.FlyoutButton=Li,gt.FlyoutMetricsManager=Tm,gt.Generator=n.CodeGenerator$$module$build$src$core$generator,gt.Gesture=Rs,gt.Grid=Jh,gt.HorizontalFlyout=Sm,gt.INPUT_VALUE=Sg,gt.Input=tc,gt.InsertionMarkerManager=Wi,gt.InsertionMarkerPreviewer=vm,gt.Marker=ku,gt.MarkerManager=Yl,gt.Menu=Bh,gt.MenuItem=zl,gt.MetricsManager=Gp,gt.Msg=n.Msg$$module$build$src$core$msg,gt.NEXT_STATEMENT=xg,gt.Names=n.Names$$module$build$src$core$names,gt.OPPOSITE_TYPE=ul,gt.OUTPUT_VALUE=Og,gt.Options=Vi,gt.PREVIOUS_STATEMENT=Ag,gt.PROCEDURE_CATEGORY_NAME=rd,gt.Procedures=Ni,gt.RENAME_VARIABLE_ID=ad,gt.RenderedConnection=G,gt.Scrollbar=Vr,gt.ScrollbarPair=zp,gt.ShortcutItems=Ea,gt.ShortcutRegistry=Kt,gt.TOOLBOX_AT_BOTTOM=Cg,gt.TOOLBOX_AT_LEFT=kg,gt.TOOLBOX_AT_RIGHT=Ig,gt.TOOLBOX_AT_TOP=Rg,gt.TabNavigateCursor=O,gt.Theme=ir,gt.ThemeManager=Ps,gt.Themes=wg,gt.Toolbox=hg,gt.ToolboxCategory=Us,gt.ToolboxItem=cm,gt.ToolboxSeparator=Yf,gt.Tooltip=Wn,gt.Touch=xi,gt.Trashcan=et,gt.UnattachedFieldError=Cr,gt.VARIABLE_CATEGORY_NAME=aa,gt.VARIABLE_DYNAMIC_CATEGORY_NAME=cl,gt.VERSION=Tg,gt.VariableMap=cd,gt.VariableModel=so,gt.Variables=Jn,gt.VariablesDynamic=Bo,gt.VerticalFlyout=qp,gt.WidgetDiv=Lo,gt.Workspace=ic,gt.WorkspaceAudio=Au,gt.WorkspaceDragger=rl,gt.WorkspaceSvg=mi,gt.Xml=Ei,gt.ZoomControls=Ph,gt.blockAnimations=ma,gt.blockRendering=qn,gt.browserEvents=no,gt.bubbles=qf,gt.bumpObjects=Cu,gt.clipboard=Iu,gt.comments=Lp,gt.common=ni,gt.config=n.config$$module$build$src$core$config,gt.constants=Sf,gt.defineBlocksWithJsonArray=ye,gt.dialog=gr,gt.dragging=Wf,gt.fieldRegistry=il,gt.geras=Ta,gt.getMainWorkspace=U,gt.getSelected=K,gt.hasBubble=dl,gt.hideChaff=na,gt.icons=ba,gt.inject=lp,gt.inputs=ac,gt.isCopyable=Dl,gt.isDeletable=Qi,gt.isDraggable=Zs,gt.isIcon=Mc,gt.isObservable=Rc,gt.isPaster=cf,gt.isRenderedElement=Co,gt.isSelectable=ta,gt.isSerializable=Tn,gt.isVariableBackedParameterModel=me,gt.layers=jp,gt.procedures=Ni,gt.registry=Jo,gt.renderManagement=Uh,gt.serialization=yg,gt.setLocale=Gn,gt.setParentContainer=ie,gt.svgResize=$e,gt.thrasos=lm,gt.uiPosition=Fi,gt.utils=Nr,gt.zelos=js,gt.__namespace__=n,gt})}(blockly_compressed$1)),blockly_compressed$1.exports}var en$1={exports:{}},en=en$1.exports,hasRequiredEn;function requireEn(){return hasRequiredEn||(hasRequiredEn=1,function(i,r){(function(n,l){i.exports=l()})(en,function(){var n=n||{Msg:Object.create(null)};return n.Msg.ADD_COMMENT="Add Comment",n.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",n.Msg.CHANGE_VALUE_TITLE="Change value:",n.Msg.CLEAN_UP="Clean up Blocks",n.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",n.Msg.COLLAPSE_ALL="Collapse Blocks",n.Msg.COLLAPSE_BLOCK="Collapse Block",n.Msg.COLOUR_BLEND_COLOUR1="colour 1",n.Msg.COLOUR_BLEND_COLOUR2="colour 2",n.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",n.Msg.COLOUR_BLEND_RATIO="ratio",n.Msg.COLOUR_BLEND_TITLE="blend",n.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",n.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",n.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",n.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",n.Msg.COLOUR_RANDOM_TITLE="random colour",n.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",n.Msg.COLOUR_RGB_BLUE="blue",n.Msg.COLOUR_RGB_GREEN="green",n.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",n.Msg.COLOUR_RGB_RED="red",n.Msg.COLOUR_RGB_TITLE="colour with",n.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",n.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",n.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",n.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",n.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",n.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",n.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",n.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",n.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",n.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",n.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",n.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",n.Msg.CONTROLS_IF_MSG_ELSE="else",n.Msg.CONTROLS_IF_MSG_ELSEIF="else if",n.Msg.CONTROLS_IF_MSG_IF="if",n.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",n.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",n.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",n.Msg.CONTROLS_REPEAT_INPUT_DO="do",n.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",n.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",n.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",n.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",n.Msg.DELETE_BLOCK="Delete Block",n.Msg.DELETE_VARIABLE="Delete the '%1' variable",n.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",n.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",n.Msg.DIALOG_CANCEL="Cancel",n.Msg.DIALOG_OK="OK",n.Msg.DISABLE_BLOCK="Disable Block",n.Msg.DUPLICATE_BLOCK="Duplicate",n.Msg.DUPLICATE_COMMENT="Duplicate Comment",n.Msg.ENABLE_BLOCK="Enable Block",n.Msg.EXPAND_ALL="Expand Blocks",n.Msg.EXPAND_BLOCK="Expand Block",n.Msg.EXTERNAL_INPUTS="External Inputs",n.Msg.HELP="Help",n.Msg.INLINE_INPUTS="Inline Inputs",n.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",n.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",n.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",n.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",n.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",n.Msg.LISTS_GET_INDEX_FIRST="first",n.Msg.LISTS_GET_INDEX_FROM_END="# from end",n.Msg.LISTS_GET_INDEX_FROM_START="#",n.Msg.LISTS_GET_INDEX_GET="get",n.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",n.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",n.Msg.LISTS_GET_INDEX_LAST="last",n.Msg.LISTS_GET_INDEX_RANDOM="random",n.Msg.LISTS_GET_INDEX_REMOVE="remove",n.Msg.LISTS_GET_INDEX_TAIL="",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",n.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",n.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",n.Msg.LISTS_GET_SUBLIST_END_LAST="to last",n.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",n.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",n.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",n.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",n.Msg.LISTS_GET_SUBLIST_TAIL="",n.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",n.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",n.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",n.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",n.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",n.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",n.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",n.Msg.LISTS_INLIST="in list",n.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",n.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",n.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",n.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",n.Msg.LISTS_LENGTH_TITLE="length of %1",n.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",n.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",n.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",n.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",n.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",n.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",n.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",n.Msg.LISTS_SET_INDEX_INPUT_TO="as",n.Msg.LISTS_SET_INDEX_INSERT="insert at",n.Msg.LISTS_SET_INDEX_SET="set",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",n.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",n.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",n.Msg.LISTS_SORT_ORDER_DESCENDING="descending",n.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",n.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",n.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",n.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",n.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",n.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",n.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",n.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",n.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",n.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",n.Msg.LOGIC_BOOLEAN_FALSE="false",n.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",n.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",n.Msg.LOGIC_BOOLEAN_TRUE="true",n.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",n.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",n.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",n.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",n.Msg.LOGIC_NEGATE_TITLE="not %1",n.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",n.Msg.LOGIC_NULL="null",n.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",n.Msg.LOGIC_NULL_TOOLTIP="Returns null.",n.Msg.LOGIC_OPERATION_AND="and",n.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",n.Msg.LOGIC_OPERATION_OR="or",n.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",n.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",n.Msg.LOGIC_TERNARY_CONDITION="test",n.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",n.Msg.LOGIC_TERNARY_IF_FALSE="if false",n.Msg.LOGIC_TERNARY_IF_TRUE="if true",n.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",n.Msg.MATH_ADDITION_SYMBOL="+",n.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",n.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",n.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",n.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",n.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",n.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",n.Msg.MATH_CHANGE_TITLE="change %1 by %2",n.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",n.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",n.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",n.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",n.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",n.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",n.Msg.MATH_DIVISION_SYMBOL="",n.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",n.Msg.MATH_IS_EVEN="is even",n.Msg.MATH_IS_NEGATIVE="is negative",n.Msg.MATH_IS_ODD="is odd",n.Msg.MATH_IS_POSITIVE="is positive",n.Msg.MATH_IS_PRIME="is prime",n.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",n.Msg.MATH_IS_WHOLE="is whole",n.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",n.Msg.MATH_MODULO_TITLE="remainder of %1  %2",n.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",n.Msg.MATH_MULTIPLICATION_SYMBOL="",n.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",n.Msg.MATH_NUMBER_TOOLTIP="A number.",n.Msg.MATH_ONLIST_HELPURL="",n.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",n.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",n.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",n.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",n.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",n.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",n.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",n.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",n.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",n.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",n.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",n.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",n.Msg.MATH_POWER_SYMBOL="^",n.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",n.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",n.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",n.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",n.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",n.Msg.MATH_ROUND_OPERATOR_ROUND="round",n.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",n.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",n.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",n.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",n.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",n.Msg.MATH_SINGLE_OP_ROOT="square root",n.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",n.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",n.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",n.Msg.MATH_SUBTRACTION_SYMBOL="-",n.Msg.MATH_TRIG_ACOS="acos",n.Msg.MATH_TRIG_ASIN="asin",n.Msg.MATH_TRIG_ATAN="atan",n.Msg.MATH_TRIG_COS="cos",n.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",n.Msg.MATH_TRIG_SIN="sin",n.Msg.MATH_TRIG_TAN="tan",n.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",n.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",n.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",n.Msg.NEW_NUMBER_VARIABLE="Create number variable...",n.Msg.NEW_STRING_VARIABLE="Create string variable...",n.Msg.NEW_VARIABLE="Create variable...",n.Msg.NEW_VARIABLE_TITLE="New variable name:",n.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",n.Msg.ORDINAL_NUMBER_SUFFIX="",n.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",n.Msg.PROCEDURES_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",n.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",n.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",n.Msg.PROCEDURES_CREATE_DO="Create '%1'",n.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",n.Msg.PROCEDURES_DEFNORETURN_DO="",n.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",n.Msg.PROCEDURES_DEFNORETURN_TITLE="to",n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",n.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFRETURN_RETURN="return",n.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",n.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",n.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",n.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",n.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",n.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",n.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",n.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",n.Msg.REDO="Redo",n.Msg.REMOVE_COMMENT="Remove Comment",n.Msg.RENAME_VARIABLE="Rename variable...",n.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",n.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_APPEND_TITLE="to %1 append text %2",n.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",n.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",n.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",n.Msg.TEXT_CHARAT_FIRST="get first letter",n.Msg.TEXT_CHARAT_FROM_END="get letter # from end",n.Msg.TEXT_CHARAT_FROM_START="get letter #",n.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",n.Msg.TEXT_CHARAT_LAST="get last letter",n.Msg.TEXT_CHARAT_RANDOM="get random letter",n.Msg.TEXT_CHARAT_TAIL="",n.Msg.TEXT_CHARAT_TITLE="in text %1 %2",n.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",n.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",n.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",n.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",n.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",n.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",n.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",n.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",n.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",n.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",n.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",n.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",n.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",n.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",n.Msg.TEXT_GET_SUBSTRING_TAIL="",n.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",n.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",n.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",n.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",n.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",n.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",n.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",n.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",n.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",n.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",n.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",n.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",n.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_LENGTH_TITLE="length of %1",n.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",n.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",n.Msg.TEXT_PRINT_TITLE="print %1",n.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",n.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",n.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",n.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",n.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",n.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",n.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",n.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",n.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",n.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",n.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",n.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",n.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",n.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",n.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",n.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",n.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",n.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",n.Msg.TODAY="Today",n.Msg.UNDO="Undo",n.Msg.UNNAMED_KEY="unnamed",n.Msg.VARIABLES_DEFAULT_NAME="item",n.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",n.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",n.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",n.Msg.VARIABLES_SET="set %1 to %2",n.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",n.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",n.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",n.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",n.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",n.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",n.Msg.CONTROLS_FOREACH_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_FOR_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=n.Msg.CONTROLS_IF_MSG_ELSEIF,n.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=n.Msg.CONTROLS_IF_MSG_ELSE,n.Msg.CONTROLS_IF_IF_TITLE_IF=n.Msg.CONTROLS_IF_MSG_IF,n.Msg.CONTROLS_IF_MSG_THEN=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.LISTS_CREATE_WITH_ITEM_TITLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.MATH_CHANGE_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.PROCEDURES_DEFRETURN_COMMENT=n.Msg.PROCEDURES_DEFNORETURN_COMMENT,n.Msg.PROCEDURES_DEFRETURN_DO=n.Msg.PROCEDURES_DEFNORETURN_DO,n.Msg.PROCEDURES_DEFRETURN_PROCEDURE=n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,n.Msg.PROCEDURES_DEFRETURN_TITLE=n.Msg.PROCEDURES_DEFNORETURN_TITLE,n.Msg.TEXT_APPEND_VARIABLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.COLOUR_HUE="20",n.Msg.LISTS_HUE="260",n.Msg.LOGIC_HUE="210",n.Msg.LOOPS_HUE="120",n.Msg.MATH_HUE="230",n.Msg.PROCEDURES_HUE="290",n.Msg.TEXTS_HUE="160",n.Msg.VARIABLES_DYNAMIC_HUE="310",n.Msg.VARIABLES_HUE="330",n.Msg})}(en$1)),en$1.exports}var blocks_compressed$1={exports:{}},blocks_compressed=blocks_compressed$1.exports,hasRequiredBlocks_compressed;function requireBlocks_compressed(){return hasRequiredBlocks_compressed||(hasRequiredBlocks_compressed=1,function(i,r){(function(n,l){i.exports=l(requireBlockly_compressed())})(blocks_compressed,function(n){var l=n.__namespace__,w=l.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),d={customContextMenu:function(ae){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(Le={text:l.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:f(this)},Pe=this.getField("VAR").getText(),Pe={text:l.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Pe),enabled:!0,callback:a(this)},ae.unshift(Le),ae.unshift(Pe));else{if(this.type==="variables_get_dynamic")var Oe="variables_set_dynamic",Le=l.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else Oe="variables_get_dynamic",Le=l.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Pe=this.getField("VAR");Oe={type:Oe,fields:{VAR:Pe.saveState(!0)}},ae.push({enabled:0<this.workspace.remainingCapacity(),text:Le.replace("%1",Pe.getText()),callback:l.callbackFactory$$module$build$src$core$contextmenu(this,Oe)})}},onchange:function(ae){ae=this.getFieldValue("VAR"),ae=l.getVariable$$module$build$src$core$variables(this.workspace,ae),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(ae.type):this.getInput("VALUE").connection.setCheck(ae.type)}},f=function(ae){return function(){const Oe=ae.workspace,Le=ae.getField("VAR").getVariable();l.renameVariable$$module$build$src$core$variables(Oe,Le)}},a=function(ae){return function(){const Oe=ae.workspace,Le=ae.getField("VAR").getVariable();Oe.deleteVariableById(Le.getId()),Oe.refreshToolboxSelection()}};l.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",d),l.defineBlocks$$module$build$src$core$common(w);var u={blocks:w},g=l.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),$={customContextMenu:function(ae){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(Le={text:l.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:v(this)},Pe=this.getField("VAR").getText(),Pe={text:l.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Pe),enabled:!0,callback:S(this)},ae.unshift(Le),ae.unshift(Pe));else{if(this.type==="variables_get")var Oe="variables_set",Le=l.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else Oe="variables_get",Le=l.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Pe=this.getField("VAR");Oe={type:Oe,fields:{VAR:Pe.saveState(!0)}},ae.push({enabled:0<this.workspace.remainingCapacity(),text:Le.replace("%1",Pe.getText()),callback:l.callbackFactory$$module$build$src$core$contextmenu(this,Oe)})}}},v=function(ae){return function(){const Oe=ae.workspace,Le=ae.getField("VAR").getVariable();l.renameVariable$$module$build$src$core$variables(Oe,Le)}},S=function(ae){return function(){const Oe=ae.workspace,Le=ae.getField("VAR").getVariable();Oe.deleteVariableById(Le.getId()),Oe.refreshToolboxSelection()}};l.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",$),l.defineBlocks$$module$build$src$core$common(g);var E={blocks:g},h=l.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),b={init:function(){this.WHERE_OPTIONS_1=[[l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const ae=Oe=>{const Le=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Oe]});return Le.setValidator(function(Pe){const ft=this.getValue();Pe=Pe==="FROM_START"||Pe==="FROM_END",Pe!==(ft==="FROM_START"||ft==="FROM_END")&&this.getSourceBlock().updateAt_(Oe,Pe)}),Le};this.appendDummyInput("WHERE1_INPUT").appendField(ae(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(ae(2),"WHERE2"),this.appendDummyInput("AT2"),l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");var Oe=this.getInput("AT1")instanceof l.ValueInput$$module$build$src$core$inputs$value_input;return ae.setAttribute("at1",`${Oe}`),Oe=this.getInput("AT2")instanceof l.ValueInput$$module$build$src$core$inputs$value_input,ae.setAttribute("at2",`${Oe}`),ae},domToMutation:function(ae){const Oe=ae.getAttribute("at1")==="true";ae=ae.getAttribute("at2")==="true",this.updateAt_(1,Oe),this.updateAt_(2,ae)},updateAt_:function(ae,Oe){this.removeInput("AT"+ae),this.removeInput("ORDINAL"+ae,!0),Oe?(this.appendValueInput("AT"+ae).setCheck("Number"),l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+ae).appendField(l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+ae),ae===2&&l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(l.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),ae===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};h.text_getSubstring=b,h.text_changeCase={init:function(){const ae=[[l.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[l.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[l.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(l.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:ae}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(l.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},h.text_trim={init:function(){const ae=[[l.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[l.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[l.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(l.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:ae}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(l.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},h.text_print={init:function(){this.jsonInit({message0:l.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:l.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:l.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var m={updateType_:function(ae){this.outputConnection.setCheck(ae==="NUMBER"?"Number":"String")},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");return ae.setAttribute("type",this.getFieldValue("TYPE")),ae},domToMutation:function(ae){this.updateType_(ae.getAttribute("type"))}};h.text_prompt_ext=Object.assign({},m,{init:function(){var ae=[[l.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[l.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(l.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),ae=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:ae}),ae.setValidator(Oe=>{this.updateType_(Oe)}),this.appendValueInput("TEXT").appendField(ae,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?l.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:l.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),h.text_prompt=Object.assign({},m,{init:function(){this.mixin(p);var ae=[[l.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[l.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(l.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),ae=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:ae}),ae.setValidator(Oe=>{this.updateType_(Oe)}),this.appendDummyInput().appendField(ae,"TYPE").appendField(this.newQuote_(!0)).appendField(l.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?l.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:l.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),h.text_count={init:function(){this.jsonInit({message0:l.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:l.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:l.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},h.text_replace={init:function(){this.jsonInit({message0:l.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:l.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:l.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},h.text_reverse={init:function(){this.jsonInit({message0:l.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:l.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:l.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var p={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(ae){for(let Oe=0,Le;Le=this.inputList[Oe];Oe++)for(let Pe=0,ft;ft=Le.fieldRow[Pe];Pe++)if(ae===ft.name){Le.insertFieldAt(Pe,this.newQuote_(!0)),Le.insertFieldAt(Pe+2,this.newQuote_(!1));return}console.warn('field named "'+ae+'" not found in '+this.toDevString())},newQuote_:function(ae){return ae=this.RTL?!ae:ae,l.fromJson$$module$build$src$core$field_registry({type:"field_image",src:ae?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:ae?"":""})}},_=function(){this.mixin(p),this.quoteField_("TEXT")},y={itemCount_:0,mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");return ae.setAttribute("items",`${this.itemCount_}`),ae},domToMutation:function(ae){this.itemCount_=parseInt(ae.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(ae){this.itemCount_=ae.itemCount,this.updateShape_()},decompose:function(ae){const Oe=ae.newBlock("text_create_join_container");Oe.initSvg();let Le=Oe.getInput("STACK").connection;for(let Pe=0;Pe<this.itemCount_;Pe++){const ft=ae.newBlock("text_create_join_item");ft.initSvg(),Le.connect(ft.previousConnection),Le=ft.nextConnection}return Oe},compose:function(ae){var Oe=ae.getInputTargetBlock("STACK");for(ae=[];Oe;)Oe.isInsertionMarker()||ae.push(Oe.valueConnection_),Oe=Oe.getNextBlock();for(Oe=0;Oe<this.itemCount_;Oe++){const Le=this.getInput("ADD"+Oe).connection.targetConnection;Le&&!ae.includes(Le)&&Le.disconnect()}for(this.itemCount_=ae.length,this.updateShape_(),Oe=0;Oe<this.itemCount_;Oe++){let Le;(Le=ae[Oe])==null||Le.reconnect(this,"ADD"+Oe)}},saveConnections:function(ae){ae=ae.getInputTargetBlock("STACK");let Oe=0;for(;ae;){if(ae.isInsertionMarker()){ae=ae.getNextBlock();continue}const Le=this.getInput("ADD"+Oe);ae.valueConnection_=Le&&Le.connection.targetConnection,ae=ae.getNextBlock(),Oe++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var ae=0;ae<this.itemCount_;ae++)if(!this.getInput("ADD"+ae)){const Oe=this.appendValueInput("ADD"+ae).setAlign(l.Align$$module$build$src$core$inputs$align.RIGHT);ae===0&&Oe.appendField(l.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(ae=this.itemCount_;this.getInput("ADD"+ae);ae++)this.removeInput("ADD"+ae)}},x=function(){this.mixin(p),this.itemCount_=2,this.updateShape_(),this.setMutator(new l.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};l.register$$module$build$src$core$extensions("text_append_tooltip",l.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var A=function(){this.setTooltip(()=>l.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},R={isAt_:!1,mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");return ae.setAttribute("at",`${this.isAt_}`),ae},domToMutation:function(ae){ae=ae.getAttribute("at")!=="false",this.updateAt_(ae)},updateAt_:function(ae){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),ae&&(this.appendValueInput("AT").setCheck("Number"),l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),l.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(l.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=ae}},C=function(){this.getField("WHERE").setValidator(function(ae){ae=ae==="FROM_START"||ae==="FROM_END";const Oe=this.getSourceBlock();ae!==Oe.isAt_&&Oe.updateAt_(ae)}),this.updateAt_(!0),this.setTooltip(()=>{var ae=this.getFieldValue("WHERE");let Oe=l.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(ae==="FROM_START"||ae==="FROM_END")&&(ae=ae==="FROM_START"?l.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:l.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(Oe+="  "+ae.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Oe})};l.register$$module$build$src$core$extensions("text_indexOf_tooltip",A),l.register$$module$build$src$core$extensions("text_quotes",_),l.registerMixin$$module$build$src$core$extensions("quote_image_mixin",p),l.registerMutator$$module$build$src$core$extensions("text_join_mutator",y,x),l.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",R,C),l.defineBlocks$$module$build$src$core$common(h);var k={blocks:h},D={},j={setStatements_:function(ae){this.hasStatements_!==ae&&(ae?(this.appendStatementInput("STACK").appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=ae)},updateParams_:function(){let ae="";this.arguments_.length&&(ae=l.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),l.disable$$module$build$src$core$events$utils();try{this.setFieldValue(ae,"PARAMS")}finally{l.enable$$module$build$src$core$events$utils()}},mutationToDom:function(ae){const Oe=l.createElement$$module$build$src$core$utils$xml("mutation");ae&&Oe.setAttribute("name",this.getFieldValue("NAME"));for(let Le=0;Le<this.argumentVarModels_.length;Le++){const Pe=l.createElement$$module$build$src$core$utils$xml("arg"),ft=this.argumentVarModels_[Le];Pe.setAttribute("name",ft.name),Pe.setAttribute("varid",ft.getId()),ae&&this.paramIds_&&Pe.setAttribute("paramId",this.paramIds_[Le]),Oe.appendChild(Pe)}return this.hasStatements_||Oe.setAttribute("statements","false"),Oe},domToMutation:function(ae){this.arguments_=[],this.argumentVarModels_=[];for(let Le=0,Pe;Pe=ae.childNodes[Le];Le++)if(Pe.nodeName.toLowerCase()==="arg"){var Oe=Pe;const ft=Oe.getAttribute("name");Oe=Oe.getAttribute("varid")||Oe.getAttribute("varId"),this.arguments_.push(ft),Oe=l.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,Oe,ft,""),Oe!==null?this.argumentVarModels_.push(Oe):console.log(`Failed to create a variable named "${ft}", ignoring.`)}this.updateParams_(),l.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(ae.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const ae=Object.create(null);if(this.argumentVarModels_.length){ae.params=[];for(let Oe=0;Oe<this.argumentVarModels_.length;Oe++)ae.params.push({name:this.argumentVarModels_[Oe].name,id:this.argumentVarModels_[Oe].getId()})}return this.hasStatements_||(ae.hasStatements=!1),ae},loadExtraState:function(ae){if(this.arguments_=[],this.argumentVarModels_=[],ae.params)for(let Le=0;Le<ae.params.length;Le++){var Oe=ae.params[Le];Oe=l.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,Oe.id,Oe.name,""),this.arguments_.push(Oe.name),this.argumentVarModels_.push(Oe)}this.updateParams_(),l.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(ae.hasStatements!==!1)},decompose:function(ae){const Oe=l.createElement$$module$build$src$core$utils$xml("block");Oe.setAttribute("type","procedures_mutatorcontainer");var Le=l.createElement$$module$build$src$core$utils$xml("statement");Le.setAttribute("name","STACK"),Oe.appendChild(Le);for(let ft=0;ft<this.arguments_.length;ft++){const Lt=l.createElement$$module$build$src$core$utils$xml("block");Lt.setAttribute("type","procedures_mutatorarg");var Pe=l.createElement$$module$build$src$core$utils$xml("field");Pe.setAttribute("name","NAME");const qt=l.createTextNode$$module$build$src$core$utils$xml(this.arguments_[ft]);Pe.appendChild(qt),Lt.appendChild(Pe),Pe=l.createElement$$module$build$src$core$utils$xml("next"),Lt.appendChild(Pe),Le.appendChild(Lt),Le=Pe}return ae=l.domToBlock$$module$build$src$core$xml(Oe,ae),this.type==="procedures_defreturn"?ae.setFieldValue(this.hasStatements_,"STATEMENTS"):ae.removeInput("STATEMENT_INPUT"),l.mutateCallers$$module$build$src$core$procedures(this),ae},compose:function(ae){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let Oe=ae.getInputTargetBlock("STACK");for(;Oe&&!Oe.isInsertionMarker();){var Le=Oe.getFieldValue("NAME");this.arguments_.push(Le),Le=this.workspace.getVariable(Le,""),this.argumentVarModels_.push(Le),this.paramIds_.push(Oe.id),Oe=Oe.nextConnection&&Oe.nextConnection.targetBlock()}if(this.updateParams_(),l.mutateCallers$$module$build$src$core$procedures(this),ae=ae.getFieldValue("STATEMENTS"),ae!==null&&(ae=ae==="TRUE",this.hasStatements_!==ae))if(ae){this.setStatements_(!0);var Pe;(Pe=this.statementConnection_)==null||Pe.reconnect(this,"STACK"),this.statementConnection_=null}else Pe=this.getInput("STACK").connection,(this.statementConnection_=Pe.targetConnection)&&(Pe=Pe.targetBlock(),Pe.unplug(),Pe.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(ae,Oe){var Le=this.workspace.getVariableById(ae);if(Le.type===""){Le=Le.name,Oe=this.workspace.getVariableById(Oe);var Pe=!1;for(let ft=0;ft<this.argumentVarModels_.length;ft++)this.argumentVarModels_[ft].getId()===ae&&(this.arguments_[ft]=Oe.name,this.argumentVarModels_[ft]=Oe,Pe=!0);Pe&&(this.displayRenamedVar_(Le,Oe.name),l.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(ae){const Oe=ae.name;let Le=!1,Pe;for(let ft=0;ft<this.argumentVarModels_.length;ft++)this.argumentVarModels_[ft].getId()===ae.getId()&&(Pe=this.arguments_[ft],this.arguments_[ft]=Oe,Le=!0);Le&&(this.displayRenamedVar_(Pe,Oe),l.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(ae,Oe){this.updateParams_();var Le=this.getIcon(l.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(Le&&Le.bubbleIsVisible()){Le=Le.getWorkspace().getAllBlocks(!1);for(let Pe=0,ft;ft=Le[Pe];Pe++)ft.type==="procedures_mutatorarg"&&l.Names$$module$build$src$core$names.equals(ae,ft.getFieldValue("NAME"))&&ft.setFieldValue(Oe,"NAME")}},customContextMenu:function(ae){if(!this.isInFlyout){var Oe=this.getFieldValue("NAME"),Le={type:this.callType_,extraState:{name:Oe,params:this.arguments_}};if(ae.push({enabled:!0,text:l.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",Oe),callback:l.callbackFactory$$module$build$src$core$contextmenu(this,Le)}),!this.isCollapsed())for(Oe=0;Oe<this.argumentVarModels_.length;Oe++){Le=this.argumentVarModels_[Oe];const Pe={type:"variables_get",fields:{VAR:{name:Le.name,id:Le.getId(),type:Le.type}}};ae.push({enabled:!0,text:l.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",Le.name),callback:l.callbackFactory$$module$build$src$core$contextmenu(this,Pe)})}}}};D.procedures_defnoreturn=Object.assign({},j,{init:function(){var ae=l.findLegalName$$module$build$src$core$procedures("",this);ae=l.fromJson$$module$build$src$core$field_registry({type:"field_input",text:ae}),ae.setValidator(l.rename$$module$build$src$core$procedures),ae.setSpellcheck(!1),this.appendDummyInput().appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(ae,"NAME").appendField("","PARAMS"),this.setMutator(new l.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&l.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),D.procedures_defreturn=Object.assign({},j,{init:function(){var ae=l.findLegalName$$module$build$src$core$procedures("",this);ae=l.fromJson$$module$build$src$core$field_registry({type:"field_input",text:ae}),ae.setValidator(l.rename$$module$build$src$core$procedures),ae.setSpellcheck(!1),this.appendDummyInput().appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(ae,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(l.Align$$module$build$src$core$inputs$align.RIGHT).appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new l.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var V={init:function(){this.appendDummyInput().appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(l.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(l.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};D.procedures_mutatorcontainer=V;var z={init:function(){const ae=l.fromJson$$module$build$src$core$field_registry({type:"field_input",text:l.DEFAULT_ARG$$module$build$src$core$procedures});ae.setValidator(this.validator_),ae.oldShowEditorFn_=ae.showEditor_,ae.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(ae,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(l.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,ae.onFinishEditing_=this.deleteIntermediateVars_,ae.createdVariables_=[],ae.onFinishEditing_("x")},validator_:function(ae){var Oe=this.getSourceBlock();const Le=Oe.workspace.getRootWorkspace();if(ae=ae.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!ae)return null;const Pe=(Oe.workspace.targetWorkspace||Oe.workspace).getAllBlocks(!1),ft=ae.toLowerCase();for(let Lt=0;Lt<Pe.length;Lt++){if(Pe[Lt].id===this.getSourceBlock().id)continue;const qt=Pe[Lt].getFieldValue("NAME");if(qt&&qt.toLowerCase()===ft)return null}return Oe.isInFlyout||((Oe=Le.getVariable(ae,""))&&Oe.name!==ae&&Le.renameVariableById(Oe.getId(),ae),Oe||(Oe=Le.createVariable(ae,""))&&this.createdVariables_&&this.createdVariables_.push(Oe)),ae},deleteIntermediateVars_:function(ae){const Oe=this.getSourceBlock().workspace.getRootWorkspace();if(Oe)for(let Le=0;Le<this.createdVariables_.length;Le++){const Pe=this.createdVariables_[Le];Pe.name!==ae&&Oe.deleteVariableById(Pe.getId())}}};D.procedures_mutatorarg=z;var W="DISABLED_PROCEDURE_DEFINITION",ee={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(ae,Oe){l.Names$$module$build$src$core$names.equals(ae,this.getProcedureCall())&&(this.setFieldValue(Oe,"NAME"),this.setTooltip((this.outputConnection?l.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:l.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",Oe)))},setProcedureParameters_:function(ae,Oe){var Le=l.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((Le=(Le=Le&&Le.getIcon(l.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&Le.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),ae.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=Oe;else{if(Oe.length!==ae.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let ft=0;ft<this.arguments_.length;ft++){var Pe=this.getInput("ARG"+ft);Pe&&(Pe=Pe.connection.targetConnection,this.quarkConnections_[this.quarkIds_[ft]]=Pe,Le&&Pe&&!Oe.includes(this.quarkIds_[ft])&&(Pe.disconnect(),Pe.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(ae),this.argumentVarModels_=[],ae=0;ae<this.arguments_.length;ae++)Le=l.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[ae],""),this.argumentVarModels_.push(Le);if(this.updateShape_(),this.quarkIds_=Oe){for(Oe=0;Oe<this.arguments_.length;Oe++)if(ae=this.quarkIds_[Oe],ae in this.quarkConnections_){let ft;(ft=this.quarkConnections_[ae])!=null&&ft.reconnect(this,"ARG"+Oe)||delete this.quarkConnections_[ae]}}}},updateShape_:function(){for(var ae=0;ae<this.arguments_.length;ae++){var Oe=this.getField("ARGNAME"+ae);if(Oe){l.disable$$module$build$src$core$events$utils();try{Oe.setValue(this.arguments_[ae])}finally{l.enable$$module$build$src$core$events$utils()}}else Oe=l.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[ae]}),this.appendValueInput("ARG"+ae).setAlign(l.Align$$module$build$src$core$inputs$align.RIGHT).appendField(Oe,"ARGNAME"+ae)}for(ae=this.arguments_.length;this.getInput("ARG"+ae);ae++)this.removeInput("ARG"+ae);(ae=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||ae.appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&ae.removeField("WITH"))},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");ae.setAttribute("name",this.getProcedureCall());for(let Oe=0;Oe<this.arguments_.length;Oe++){const Le=l.createElement$$module$build$src$core$utils$xml("arg");Le.setAttribute("name",this.arguments_[Oe]),ae.appendChild(Le)}return ae},domToMutation:function(ae){var Oe=ae.getAttribute("name");this.renameProcedure(this.getProcedureCall(),Oe),Oe=[];const Le=[];for(let Pe=0,ft;ft=ae.childNodes[Pe];Pe++)ft.nodeName.toLowerCase()==="arg"&&(Oe.push(ft.getAttribute("name")),Le.push(ft.getAttribute("paramId")));this.setProcedureParameters_(Oe,Le)},saveExtraState:function(){const ae=Object.create(null);return ae.name=this.getProcedureCall(),this.arguments_.length&&(ae.params=this.arguments_),ae},loadExtraState:function(ae){if(this.renameProcedure(this.getProcedureCall(),ae.name),ae=ae.params){const Oe=[];Oe.length=ae.length,Oe.fill(null),this.setProcedureParameters_(ae,Oe)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(ae){if(this.workspace&&!this.workspace.isFlyout&&ae.recordUndo)if(ae.type===l.BLOCK_CREATE$$module$build$src$core$events$events&&ae.ids.includes(this.id)){var Oe=this.getProcedureCall(),Le=l.getDefinition$$module$build$src$core$procedures(Oe,this.workspace);if(!Le||Le.type===this.defType_&&JSON.stringify(Le.getVars())===JSON.stringify(this.arguments_)||(Le=null),Le)Le.isEnabled()||(this.setDisabledReason(!0,W),this.setWarningText(l.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",Oe)));else{l.setGroup$$module$build$src$core$events$utils(ae.group),ae=l.createElement$$module$build$src$core$utils$xml("xml"),Oe=l.createElement$$module$build$src$core$utils$xml("block"),Oe.setAttribute("type",this.defType_),Le=this.getRelativeToSurfaceXY();var Pe=Le.y+2*l.config$$module$build$src$core$config.snapRadius;Oe.setAttribute("x",`${Le.x+l.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),Oe.setAttribute("y",`${Pe}`),Le=this.mutationToDom(),Oe.appendChild(Le),Le=l.createElement$$module$build$src$core$utils$xml("field"),Le.setAttribute("name","NAME"),Pe=this.getProcedureCall();const ft=l.findLegalName$$module$build$src$core$procedures(Pe,this);Pe!==ft&&this.renameProcedure(Pe,ft),Le.appendChild(l.createTextNode$$module$build$src$core$utils$xml(Pe)),Oe.appendChild(Le),ae.appendChild(Oe),l.domToWorkspace$$module$build$src$core$xml(ae,this.workspace),l.setGroup$$module$build$src$core$events$utils(!1)}}else ae.type===l.BLOCK_DELETE$$module$build$src$core$events$events?(Oe=this.getProcedureCall(),l.getDefinition$$module$build$src$core$procedures(Oe,this.workspace)||(l.setGroup$$module$build$src$core$events$utils(ae.group),this.dispose(!0),l.setGroup$$module$build$src$core$events$utils(!1))):ae.type===l.BLOCK_CHANGE$$module$build$src$core$events$events&&ae.element==="disabled"&&(Oe=this.getProcedureCall(),(Pe=l.getDefinition$$module$build$src$core$procedures(Oe,this.workspace))&&Pe.id===ae.blockId&&((Le=l.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),l.setGroup$$module$build$src$core$events$utils(ae.group),ae=Pe.isEnabled(),this.setDisabledReason(!ae,W),this.setWarningText(ae?null:l.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",Oe)),l.setGroup$$module$build$src$core$events$utils(Le)))},customContextMenu:function(ae){if(this.workspace.isMovable()){var Oe=this.getProcedureCall(),Le=this.workspace;ae.push({enabled:!0,text:l.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const Pe=l.getDefinition$$module$build$src$core$procedures(Oe,Le);Pe&&(Le.centerOnBlock(Pe.id),l.setSelected$$module$build$src$core$common(Pe))}})}}};D.procedures_callnoreturn=Object.assign({},ee,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(l.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),D.procedures_callreturn=Object.assign({},ee,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(l.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var ne="UNPARENTED_IFRETURN",Q={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(l.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(l.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(l.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");return ae.setAttribute("value",String(Number(this.hasReturnValue_))),ae},domToMutation:function(ae){this.hasReturnValue_=ae.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(ae){if(!(this.workspace.isDragging&&this.workspace.isDragging()||ae.type!==l.BLOCK_MOVE$$module$build$src$core$events$events&&ae.type!==l.BLOCK_CREATE$$module$build$src$core$events$events)){ae=!1;var Oe=this;do{if(this.FUNCTION_TYPES.includes(Oe.type)){ae=!0;break}Oe=Oe.getSurroundParent()}while(Oe);if(ae?(Oe.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):Oe.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(l.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(l.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{l.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!ae,ne)}finally{l.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};D.procedures_ifreturn=Q,l.defineBlocks$$module$build$src$core$common(D);var se={blocks:D},be=l.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),H={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};l.register$$module$build$src$core$extensions("math_op_tooltip",l.buildTooltipForDropdown$$module$build$src$core$extensions("OP",H));var P={mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation"),Oe=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return ae.setAttribute("divisor_input",String(Oe)),ae},domToMutation:function(ae){ae=ae.getAttribute("divisor_input")==="true",this.updateShape_(ae)},updateShape_:function(ae){const Oe=this.getInput("DIVISOR");ae?Oe||this.appendValueInput("DIVISOR").setCheck("Number"):Oe&&this.removeInput("DIVISOR")}},L=function(){this.getField("PROPERTY").setValidator(function(ae){ae=ae==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(ae)})};l.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",P,L),l.register$$module$build$src$core$extensions("math_change_tooltip",l.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var F={updateType_:function(ae){ae==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");return ae.setAttribute("op",this.getFieldValue("OP")),ae},domToMutation:function(ae){if(ae=ae.getAttribute("op"),ae===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(ae)}},M=function(){this.getField("OP").setValidator((function(ae){this.updateType_(ae)}).bind(this))};l.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",F,M),l.defineBlocks$$module$build$src$core$common(be);var U={blocks:be},Z=l.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),K={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};l.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",l.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",K));var oe={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};l.register$$module$build$src$core$extensions("controls_flow_tooltip",l.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",oe));var ie={customContextMenu:function(ae){if(!this.isInFlyout){var Oe=this.getField("VAR"),Le=Oe.getVariable().name;this.isCollapsed()||Le===null||(Oe={type:"variables_get",fields:{VAR:Oe.saveState(!0)}},ae.push({enabled:!0,text:l.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",Le),callback:l.callbackFactory$$module$build$src$core$contextmenu(this,Oe)}))}}};l.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",ie),l.register$$module$build$src$core$extensions("controls_for_tooltip",l.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),l.register$$module$build$src$core$extensions("controls_forEach_tooltip",l.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var $e=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),ce="CONTROL_FLOW_NOT_IN_LOOP",le={getSurroundLoop:function(){let ae=this;do{if($e.has(ae.type))return ae;ae=ae.getSurroundParent()}while(ae);return null},onchange:function(ae){const Oe=this.workspace;if(Oe.isDragging&&!Oe.isDragging()&&(ae.type===l.BLOCK_MOVE$$module$build$src$core$events$events||ae.type===l.BLOCK_CREATE$$module$build$src$core$events$events)&&(ae=!!this.getSurroundLoop(),this.setWarningText(ae?null:l.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{l.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!ae,ce)}finally{l.setRecordUndo$$module$build$src$core$events$utils(!0)}}};l.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",le),l.defineBlocks$$module$build$src$core$common(Z);var ye={blocks:Z,loopTypes:$e},_e=l.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),q={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};l.register$$module$build$src$core$extensions("logic_op_tooltip",l.buildTooltipForDropdown$$module$build$src$core$extensions("OP",q));var re={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const ae=l.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&ae.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&ae.setAttribute("else","1"),ae},domToMutation:function(ae){this.elseifCount_=parseInt(ae.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(ae.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const ae=Object.create(null);return this.elseifCount_&&(ae.elseIfCount=this.elseifCount_),this.elseCount_&&(ae.hasElse=!0),ae},loadExtraState:function(ae){this.elseifCount_=ae.elseIfCount||0,this.elseCount_=ae.hasElse?1:0,this.updateShape_()},decompose:function(ae){const Oe=ae.newBlock("controls_if_if");Oe.initSvg();let Le=Oe.nextConnection;for(let Pe=1;Pe<=this.elseifCount_;Pe++){const ft=ae.newBlock("controls_if_elseif");ft.initSvg(),Le.connect(ft.previousConnection),Le=ft.nextConnection}return this.elseCount_&&(ae=ae.newBlock("controls_if_else"),ae.initSvg(),Le.connect(ae.previousConnection)),Oe},compose:function(ae){ae=ae.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const Oe=[null],Le=[null];let Pe=null;for(;ae;){if(!ae.isInsertionMarker())switch(ae.type){case"controls_if_elseif":this.elseifCount_++,Oe.push(ae.valueConnection_),Le.push(ae.statementConnection_);break;case"controls_if_else":this.elseCount_++,Pe=ae.statementConnection_;break;default:throw TypeError("Unknown block type: "+ae.type)}ae=ae.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(Oe,Le,Pe)},saveConnections:function(ae){ae=ae.nextConnection.targetBlock();let Oe=1;for(;ae;){if(!ae.isInsertionMarker())switch(ae.type){case"controls_if_elseif":var Le=this.getInput("IF"+Oe);const Pe=this.getInput("DO"+Oe);ae.valueConnection_=Le&&Le.connection.targetConnection,ae.statementConnection_=Pe&&Pe.connection.targetConnection,Oe++;break;case"controls_if_else":Le=this.getInput("ELSE"),ae.statementConnection_=Le&&Le.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+ae.type)}ae=ae.getNextBlock()}},rebuildShape_:function(){const ae=[null],Oe=[null];let Le=null;this.getInput("ELSE")&&(Le=this.getInput("ELSE").connection.targetConnection);for(let Pe=1;this.getInput("IF"+Pe);Pe++){const ft=this.getInput("IF"+Pe),Lt=this.getInput("DO"+Pe);ae.push(ft.connection.targetConnection),Oe.push(Lt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(ae,Oe,Le)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var ae=1;this.getInput("IF"+ae);ae++)this.removeInput("IF"+ae),this.removeInput("DO"+ae);for(ae=1;ae<=this.elseifCount_;ae++)this.appendValueInput("IF"+ae).setCheck("Boolean").appendField(l.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+ae).appendField(l.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(l.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(ae,Oe,Le){for(let Pe=1;Pe<=this.elseifCount_;Pe++){let ft;(ft=ae[Pe])==null||ft.reconnect(this,"IF"+Pe);let Lt;(Lt=Oe[Pe])==null||Lt.reconnect(this,"DO"+Pe)}Le==null||Le.reconnect(this,"ELSE")}};l.registerMutator$$module$build$src$core$extensions("controls_if_mutator",re,null,["controls_if_elseif","controls_if_else"]);var fe=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return l.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return l.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return l.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return l.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};l.register$$module$build$src$core$extensions("controls_if_tooltip",fe);var we={onchange:function(ae){this.prevBlocks_||(this.prevBlocks_=[null,null]);var Oe=this.getInputTargetBlock("A");const Le=this.getInputTargetBlock("B");Oe&&Le&&!this.workspace.connectionChecker.doTypeChecks(Oe.outputConnection,Le.outputConnection)&&(l.setGroup$$module$build$src$core$events$utils(ae.group),ae=this.prevBlocks_[0],ae!==Oe&&(Oe.unplug(),!ae||ae.isDisposed()||ae.isShadow()||this.getInput("A").connection.connect(ae.outputConnection)),Oe=this.prevBlocks_[1],Oe!==Le&&(Le.unplug(),!Oe||Oe.isDisposed()||Oe.isShadow()||this.getInput("B").connection.connect(Oe.outputConnection)),this.bumpNeighbours(),l.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Re=function(){this.mixin(we)};l.register$$module$build$src$core$extensions("logic_compare",Re);var ke={prevParentConnection_:null,onchange:function(ae){const Oe=this.getInputTargetBlock("THEN"),Le=this.getInputTargetBlock("ELSE"),Pe=this.outputConnection.targetConnection;if((Oe||Le)&&Pe)for(let ft=0;2>ft;ft++){const Lt=ft===1?Oe:Le;Lt&&!Lt.workspace.connectionChecker.doTypeChecks(Lt.outputConnection,Pe)&&(l.setGroup$$module$build$src$core$events$utils(ae.group),Pe===this.prevParentConnection_?(this.unplug(),Pe.getSourceBlock().bumpNeighbours()):(Lt.unplug(),Lt.bumpNeighbours()),l.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=Pe}};l.registerMixin$$module$build$src$core$extensions("logic_ternary",ke),l.defineBlocks$$module$build$src$core$common(_e);var ue={blocks:_e},Ee=l.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Ae={init:function(){this.setHelpUrl(l.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new l.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(l.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");return ae.setAttribute("items",String(this.itemCount_)),ae},domToMutation:function(ae){if(ae=ae.getAttribute("items"),!ae)throw new TypeError("element did not have items");this.itemCount_=parseInt(ae,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(ae){this.itemCount_=ae.itemCount,this.updateShape_()},decompose:function(ae){const Oe=ae.newBlock("lists_create_with_container");Oe.initSvg();let Le=Oe.getInput("STACK").connection;for(let Pe=0;Pe<this.itemCount_;Pe++){const ft=ae.newBlock("lists_create_with_item");if(ft.initSvg(),!ft.previousConnection)throw Error("itemBlock has no previousConnection");Le.connect(ft.previousConnection),Le=ft.nextConnection}return Oe},compose:function(ae){var Oe=ae.getInputTargetBlock("STACK");for(ae=[];Oe;)Oe.isInsertionMarker()||ae.push(Oe.valueConnection_),Oe=Oe.getNextBlock();for(Oe=0;Oe<this.itemCount_;Oe++){const Le=this.getInput("ADD"+Oe).connection.targetConnection;Le&&!ae.includes(Le)&&Le.disconnect()}for(this.itemCount_=ae.length,this.updateShape_(),Oe=0;Oe<this.itemCount_;Oe++){let Le;(Le=ae[Oe])==null||Le.reconnect(this,"ADD"+Oe)}},saveConnections:function(ae){ae=ae.getInputTargetBlock("STACK");let Oe=0;for(;ae;){if(ae.isInsertionMarker()){ae=ae.getNextBlock();continue}const Le=this.getInput("ADD"+Oe);let Pe;ae.valueConnection_=(Pe=Le)==null?void 0:Pe.connection.targetConnection,ae=ae.getNextBlock(),Oe++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(l.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var ae=0;ae<this.itemCount_;ae++)if(!this.getInput("ADD"+ae)){const Oe=this.appendValueInput("ADD"+ae).setAlign(l.Align$$module$build$src$core$inputs$align.RIGHT);ae===0&&Oe.appendField(l.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(ae=this.itemCount_;this.getInput("ADD"+ae);ae++)this.removeInput("ADD"+ae)}};Ee.lists_create_with=Ae;var Ne={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(l.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(l.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};Ee.lists_create_with_container=Ne;var De={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(l.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(l.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};Ee.lists_create_with_item=De;var he={init:function(){var ae=[[l.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[l.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(l.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(l.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),ae=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:ae}),!ae)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(ae,"END"),this.setInputsInline(!0),this.setTooltip(()=>l.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};Ee.lists_indexOf=he;var tt={init:function(){var ae=[[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),ae=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:ae}),ae.setValidator(function(Oe){Oe=Oe==="REMOVE",this.getSourceBlock().updateStatement_(Oe)}),this.appendValueInput("VALUE").setCheck("Array").appendField(l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(ae,"MODE").appendField("","SPACE"),ae=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),ae.setValidator(function(Oe){const Le=this.getValue();Oe=Oe==="FROM_START"||Oe==="FROM_END",Oe!==(Le==="FROM_START"||Le==="FROM_END")&&this.getSourceBlock().updateAt_(Oe)}),this.appendDummyInput().appendField(ae,"WHERE"),this.appendDummyInput("AT"),l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const Oe=this.getFieldValue("MODE"),Le=this.getFieldValue("WHERE");let Pe="";switch(Oe+" "+Le){case"GET FROM_START":case"GET FROM_END":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Pe=l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(Le==="FROM_START"||Le==="FROM_END")&&(Pe+="  "+(Le==="FROM_START"?l.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:l.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Pe})},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");ae.setAttribute("statement",String(!this.outputConnection));const Oe=this.getInput("AT")instanceof l.ValueInput$$module$build$src$core$inputs$value_input;return ae.setAttribute("at",String(Oe)),ae},domToMutation:function(ae){const Oe=ae.getAttribute("statement")==="true";this.updateStatement_(Oe),ae=ae.getAttribute("at")!=="false",this.updateAt_(ae)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(ae){ae.isStatement?this.updateStatement_(!0):typeof ae=="string"&&this.domToMutation(l.textToDom$$module$build$src$core$utils$xml(ae))},updateStatement_:function(ae){ae!==!this.outputConnection&&(this.unplug(!0,!0),ae?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(ae){this.removeInput("AT"),this.removeInput("ORDINAL",!0),ae?(this.appendValueInput("AT").setCheck("Number"),l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};Ee.lists_getIndex=tt;var at={init:function(){var ae=[[l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[l.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),ae=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:ae}),this.appendDummyInput().appendField(ae,"MODE").appendField("","SPACE"),ae=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),ae.setValidator(function(Oe){const Le=this.getValue();Oe=Oe==="FROM_START"||Oe==="FROM_END",Oe!==(Le==="FROM_START"||Le==="FROM_END")&&this.getSourceBlock().updateAt_(Oe)}),this.appendDummyInput().appendField(ae,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const Oe=this.getFieldValue("MODE"),Le=this.getFieldValue("WHERE");let Pe="";switch(Oe+" "+Le){case"SET FROM_START":case"SET FROM_END":Pe=l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Pe=l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Pe=l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Pe=l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Pe=l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Pe=l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Pe=l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Pe=l.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(Le==="FROM_START"||Le==="FROM_END")&&(Pe+="  "+l.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Pe})},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation"),Oe=this.getInput("AT")instanceof l.ValueInput$$module$build$src$core$inputs$value_input;return ae.setAttribute("at",String(Oe)),ae},domToMutation:function(ae){ae=ae.getAttribute("at")!=="false",this.updateAt_(ae)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(ae){this.removeInput("AT"),this.removeInput("ORDINAL",!0),ae?(this.appendValueInput("AT").setCheck("Number"),l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};Ee.lists_setIndex=at;var He={init:function(){this.WHERE_OPTIONS_1=[[l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const ae=Oe=>{const Le=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Oe]});return Le.setValidator(function(Pe){const ft=this.getValue();Pe=Pe==="FROM_START"||Pe==="FROM_END",Pe!==(ft==="FROM_START"||ft==="FROM_END")&&this.getSourceBlock().updateAt_(Oe,Pe)}),Le};this.appendDummyInput("WHERE1_INPUT").appendField(ae(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(ae(2),"WHERE2"),this.appendDummyInput("AT2"),l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");var Oe=this.getInput("AT1")instanceof l.ValueInput$$module$build$src$core$inputs$value_input;return ae.setAttribute("at1",String(Oe)),Oe=this.getInput("AT2")instanceof l.ValueInput$$module$build$src$core$inputs$value_input,ae.setAttribute("at2",String(Oe)),ae},domToMutation:function(ae){const Oe=ae.getAttribute("at1")==="true";ae=ae.getAttribute("at2")==="true",this.updateAt_(1,Oe),this.updateAt_(2,ae)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(ae,Oe){this.removeInput("AT"+ae),this.removeInput("ORDINAL"+ae,!0),Oe?(this.appendValueInput("AT"+ae).setCheck("Number"),l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+ae).appendField(l.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+ae),ae===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),l.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};Ee.lists_getSublist=He,Ee.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Ee.lists_split={init:function(){const ae=l.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[l.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[l.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!ae)throw Error("field_dropdown not found");ae.setValidator(Oe=>{this.updateType_(Oe)}),this.setHelpUrl(l.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(ae,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(l.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const Oe=this.getFieldValue("MODE");if(Oe==="SPLIT")return l.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(Oe==="JOIN")return l.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+Oe)})},updateType_:function(ae){if(this.getFieldValue("MODE")!==ae){const Oe=this.getInput("INPUT").connection;Oe.setShadowDom(null);const Le=Oe.targetBlock();Le&&(Oe.disconnect(),Le.isShadow()?Le.dispose(!1):this.bumpNeighbours())}ae==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const ae=l.createElement$$module$build$src$core$utils$xml("mutation");return ae.setAttribute("mode",this.getFieldValue("MODE")),ae},domToMutation:function(ae){this.updateType_(ae.getAttribute("mode"))},saveExtraState:function(){return{mode:this.getFieldValue("MODE")}},loadExtraState:function(ae){this.updateType_(ae.mode)}},l.defineBlocks$$module$build$src$core$common(Ee);var ot={blocks:Ee},Ue=Object.assign({},Ee,_e,Z,be,D,h,g,w),Ze={blocks:Ue,lists:ot,logic:ue,loops:ye,math:U,procedures:se,texts:k,variables:E,variablesDynamic:u};return Ze.__namespace__=l,Ze})}(blocks_compressed$1)),blocks_compressed$1.exports}var blockly=blockly$1.exports,hasRequiredBlockly;function requireBlockly(){return hasRequiredBlockly||(hasRequiredBlockly=1,function(i,r){(function(n,l){i.exports=l(requireBlockly_compressed(),requireEn(),requireBlocks_compressed())})(blockly,function(n,l,w){return n.setLocale(l),n})}(blockly$1)),blockly$1.exports}var blocklyExports=requireBlockly();const Blockly=getDefaultExportFromCjs(blocklyExports),{ASTNode,BasicCursor,Block,BlockSvg,Blocks,COLLAPSED_FIELD_NAME,COLLAPSED_INPUT_NAME,COLLAPSE_CHARS,CodeGenerator,CollapsibleToolboxCategory,ComponentManager,Connection,ConnectionChecker,ConnectionDB,ConnectionType,ContextMenu,ContextMenuItems,ContextMenuRegistry,Css,Cursor,DELETE_VARIABLE_ID,DeleteArea,DragTarget,DropDownDiv,Events,Extensions,Field,FieldCheckbox,FieldDropdown,FieldImage,FieldLabel,FieldLabelSerializable,FieldNumber,FieldTextInput,FieldVariable,Flyout,FlyoutButton,FlyoutMetricsManager,Generator,Gesture,Grid,HorizontalFlyout,INPUT_VALUE,Input,InsertionMarkerManager,InsertionMarkerPreviewer,Marker,MarkerManager,Menu,MenuItem,MetricsManager,Msg,NEXT_STATEMENT,Names,OPPOSITE_TYPE,OUTPUT_VALUE,Options,PREVIOUS_STATEMENT,PROCEDURE_CATEGORY_NAME,Procedures,RENAME_VARIABLE_ID,RenderedConnection,Scrollbar,ScrollbarPair,ShortcutItems,ShortcutRegistry,TOOLBOX_AT_BOTTOM,TOOLBOX_AT_LEFT,TOOLBOX_AT_RIGHT,TOOLBOX_AT_TOP,TabNavigateCursor,Theme,ThemeManager,Themes,Toolbox,ToolboxCategory,ToolboxItem,ToolboxSeparator,Tooltip:Tooltip$1,Touch,Trashcan,UnattachedFieldError,VARIABLE_CATEGORY_NAME,VARIABLE_DYNAMIC_CATEGORY_NAME,VERSION,VariableMap,VariableModel,Variables,VariablesDynamic,VerticalFlyout,WidgetDiv,Workspace,WorkspaceAudio,WorkspaceDragger,WorkspaceSvg,Xml,ZoomControls,blockAnimations,blockRendering,browserEvents,bubbles,bumpObjects,clipboard,comments,common,config,constants,defineBlocksWithJsonArray,dialog,dragging,fieldRegistry,geras,getMainWorkspace,getSelected,hasBubble,hideChaff,icons,inject,inputs,isCopyable,isDeletable,isDraggable,isIcon,isObservable,isPaster,isRenderedElement,isSelectable,isSerializable,isVariableBackedParameterModel,layers,procedures,registry:registry$1,renderManagement,serialization,setLocale,setParentContainer,svgResize,thrasos,uiPosition,utils,zelos}=Blockly;var javascript_compressed$1={exports:{}},javascript_compressed=javascript_compressed$1.exports,hasRequiredJavascript_compressed;function requireJavascript_compressed(){return hasRequiredJavascript_compressed||(hasRequiredJavascript_compressed=1,function(i,r){(function(n,l){i.exports=l(requireBlockly_compressed())})(javascript_compressed,function(n){var l=n.__namespace__,w=function(ge,ve){return["[]",he.ATOMIC]},d=function(ge,ve){const Fe=Array(ge.itemCount_);for(let qe=0;qe<ge.itemCount_;qe++)Fe[qe]=ve.valueToCode(ge,"ADD"+qe,he.NONE)||"null";return["["+Fe.join(", ")+"]",he.ATOMIC]},f=function(ge,ve){const Fe=ve.provideFunction_("listsRepeat",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),qe=ve.valueToCode(ge,"ITEM",he.NONE)||"null";return ge=ve.valueToCode(ge,"NUM",he.NONE)||"0",[Fe+"("+qe+", "+ge+")",he.FUNCTION_CALL]},a=function(ge,ve){return[(ve.valueToCode(ge,"VALUE",he.MEMBER)||"[]")+".length",he.MEMBER]},u=function(ge,ve){return["!"+(ve.valueToCode(ge,"VALUE",he.MEMBER)||"[]")+".length",he.LOGICAL_NOT]},g=function(ge,ve){const Fe=ge.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",qe=ve.valueToCode(ge,"FIND",he.NONE)||"''";return ve=(ve.valueToCode(ge,"VALUE",he.MEMBER)||"[]")+"."+Fe+"("+qe+")",ge.workspace.options.oneBasedIndex?[ve+" + 1",he.ADDITION]:[ve,he.FUNCTION_CALL]},$=function(ge,ve){const Fe=ge.getFieldValue("MODE")||"GET",qe=ge.getFieldValue("WHERE")||"FROM_START";var st=ve.valueToCode(ge,"VALUE",qe==="RANDOM"?he.NONE:he.MEMBER)||"[]";switch(qe){case"FIRST":if(Fe==="GET")return[st+"[0]",he.MEMBER];if(Fe==="GET_REMOVE")return[st+".shift()",he.MEMBER];if(Fe==="REMOVE")return st+`.shift();
`;break;case"LAST":if(Fe==="GET")return[st+".slice(-1)[0]",he.MEMBER];if(Fe==="GET_REMOVE")return[st+".pop()",he.MEMBER];if(Fe==="REMOVE")return st+`.pop();
`;break;case"FROM_START":if(ge=ve.getAdjusted(ge,"AT"),Fe==="GET")return[st+"["+ge+"]",he.MEMBER];if(Fe==="GET_REMOVE")return[st+".splice("+ge+", 1)[0]",he.FUNCTION_CALL];if(Fe==="REMOVE")return st+".splice("+ge+`, 1);
`;break;case"FROM_END":if(ge=ve.getAdjusted(ge,"AT",1,!0),Fe==="GET")return[st+".slice("+ge+")[0]",he.FUNCTION_CALL];if(Fe==="GET_REMOVE")return[st+".splice("+ge+", 1)[0]",he.FUNCTION_CALL];if(Fe==="REMOVE")return st+".splice("+ge+", 1);";break;case"RANDOM":if(st=ve.provideFunction_("listsGetRandomItem",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+st+", "+(Fe!=="GET")+")",Fe==="GET"||Fe==="GET_REMOVE")return[st,he.FUNCTION_CALL];if(Fe==="REMOVE")return st+`;
`}throw Error("Unhandled combination (lists_getIndex).")},v=function(ge,ve){function Fe(){if(qe.match(/^\w+$/))return"";const pn=ve.nameDB_.getDistinctName("tmpList",l.NameType$$module$build$src$core$names.VARIABLE),bn="var "+pn+" = "+qe+`;
`;return qe=pn,bn}let qe=ve.valueToCode(ge,"LIST",he.MEMBER)||"[]";const st=ge.getFieldValue("MODE")||"GET";var Dt=ge.getFieldValue("WHERE")||"FROM_START";const Wt=ve.valueToCode(ge,"TO",he.ASSIGNMENT)||"null";switch(Dt){case"FIRST":if(st==="SET")return qe+"[0] = "+Wt+`;
`;if(st==="INSERT")return qe+".unshift("+Wt+`);
`;break;case"LAST":if(st==="SET")return Fe()+(qe+"["+qe+".length - 1] = "+Wt+`;
`);if(st==="INSERT")return qe+".push("+Wt+`);
`;break;case"FROM_START":if(ge=ve.getAdjusted(ge,"AT"),st==="SET")return qe+"["+ge+"] = "+Wt+`;
`;if(st==="INSERT")return qe+".splice("+ge+", 0, "+Wt+`);
`;break;case"FROM_END":if(ge=ve.getAdjusted(ge,"AT",1,!1,he.SUBTRACTION),Dt=Fe(),st==="SET")return Dt+(qe+"["+qe+".length - "+ge+"] = "+Wt+`;
`);if(st==="INSERT")return Dt+(qe+".splice("+qe+".length - "+ge+", 0, "+Wt+`);
`);break;case"RANDOM":if(ge=Fe(),Dt=ve.nameDB_.getDistinctName("tmpX",l.NameType$$module$build$src$core$names.VARIABLE),ge+="var "+Dt+" = Math.floor(Math.random() * "+qe+`.length);
`,st==="SET")return ge+(qe+"["+Dt+"] = "+Wt+`;
`);if(st==="INSERT")return ge+(qe+".splice("+Dt+", 0, "+Wt+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},S=function(ge,ve){var Fe={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},qe=ve.valueToCode(ge,"LIST",he.MEMBER)||"[]";const st=ge.getFieldValue("WHERE1"),Dt=ge.getFieldValue("WHERE2");if(st==="FIRST"&&Dt==="LAST")qe+=".slice(0)";else if(qe.match(/^\w+$/)||st!=="FROM_END"&&Dt==="FROM_START"){switch(st){case"FROM_START":Fe=ve.getAdjusted(ge,"AT1");break;case"FROM_END":Fe=ve.getAdjusted(ge,"AT1",1,!1,he.SUBTRACTION),Fe=qe+".length - "+Fe;break;case"FIRST":Fe="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Dt){case"FROM_START":ve=ve.getAdjusted(ge,"AT2",1);break;case"FROM_END":ve=ve.getAdjusted(ge,"AT2",0,!1,he.SUBTRACTION),ve=qe+".length - "+ve;break;case"LAST":ve=qe+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}qe=qe+".slice("+Fe+", "+ve+")"}else{const Wt=ve.getAdjusted(ge,"AT1");ge=ve.getAdjusted(ge,"AT2"),qe=ve.provideFunction_("subsequence"+Fe[st]+Fe[Dt],`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(sequence${st==="FROM_END"||st==="FROM_START"?", at1":""}${Dt==="FROM_END"||Dt==="FROM_START"?", at2":""}) {
  var start = ${at("sequence",st,"at1")};
  var end = ${at("sequence",Dt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+qe+(st==="FROM_END"||st==="FROM_START"?", "+Wt:"")+(Dt==="FROM_END"||Dt==="FROM_START"?", "+ge:"")+")"}return[qe,he.FUNCTION_CALL]},E=function(ge,ve){const Fe=ve.valueToCode(ge,"LIST",he.FUNCTION_CALL)||"[]",qe=ge.getFieldValue("DIRECTION")==="1"?1:-1;return ge=ge.getFieldValue("TYPE"),ve=ve.provideFunction_("listsGetSortCompare",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[Fe+".slice().sort("+ve+'("'+ge+'", '+qe+"))",he.FUNCTION_CALL]},h=function(ge,ve){let Fe=ve.valueToCode(ge,"INPUT",he.MEMBER);if(ve=ve.valueToCode(ge,"DELIM",he.NONE)||"''",ge=ge.getFieldValue("MODE"),ge==="SPLIT")Fe||(Fe="''"),ge="split";else if(ge==="JOIN")Fe||(Fe="[]"),ge="join";else throw Error("Unknown mode: "+ge);return[Fe+"."+ge+"("+ve+")",he.FUNCTION_CALL]},b=function(ge,ve){return[(ve.valueToCode(ge,"LIST",he.FUNCTION_CALL)||"[]")+".slice().reverse()",he.FUNCTION_CALL]},m=function(ge,ve){var Fe=0;let qe="";ve.STATEMENT_PREFIX&&(qe+=ve.injectId(ve.STATEMENT_PREFIX,ge));do{const st=ve.valueToCode(ge,"IF"+Fe,he.NONE)||"false";let Dt=ve.statementToCode(ge,"DO"+Fe);ve.STATEMENT_SUFFIX&&(Dt=ve.prefixLines(ve.injectId(ve.STATEMENT_SUFFIX,ge),ve.INDENT)+Dt),qe+=(0<Fe?" else ":"")+"if ("+st+`) {
`+Dt+"}",Fe++}while(ge.getInput("IF"+Fe));return(ge.getInput("ELSE")||ve.STATEMENT_SUFFIX)&&(Fe=ge.getInput("ELSE")?ve.statementToCode(ge,"ELSE"):"",ve.STATEMENT_SUFFIX&&(Fe=ve.prefixLines(ve.injectId(ve.STATEMENT_SUFFIX,ge),ve.INDENT)+Fe),qe+=` else {
`+Fe+"}"),qe+`
`},p=function(ge,ve){const Fe={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[ge.getFieldValue("OP")],qe=Fe==="=="||Fe==="!="?he.EQUALITY:he.RELATIONAL,st=ve.valueToCode(ge,"A",qe)||"0";return ge=ve.valueToCode(ge,"B",qe)||"0",[st+" "+Fe+" "+ge,qe]},_=function(ge,ve){const Fe=ge.getFieldValue("OP")==="AND"?"&&":"||",qe=Fe==="&&"?he.LOGICAL_AND:he.LOGICAL_OR;let st=ve.valueToCode(ge,"A",qe);return ge=ve.valueToCode(ge,"B",qe),st||ge?(ve=Fe==="&&"?"true":"false",st||(st=ve),ge||(ge=ve)):ge=st="false",[st+" "+Fe+" "+ge,qe]},y=function(ge,ve){const Fe=he.LOGICAL_NOT;return["!"+(ve.valueToCode(ge,"BOOL",Fe)||"true"),Fe]},x=function(ge,ve){return[ge.getFieldValue("BOOL")==="TRUE"?"true":"false",he.ATOMIC]},A=function(ge,ve){return["null",he.ATOMIC]},R=function(ge,ve){const Fe=ve.valueToCode(ge,"IF",he.CONDITIONAL)||"false",qe=ve.valueToCode(ge,"THEN",he.CONDITIONAL)||"null";return ge=ve.valueToCode(ge,"ELSE",he.CONDITIONAL)||"null",[Fe+" ? "+qe+" : "+ge,he.CONDITIONAL]},C=function(ge,ve){let Fe;Fe=ge.getField("TIMES")?String(Number(ge.getFieldValue("TIMES"))):ve.valueToCode(ge,"TIMES",he.ASSIGNMENT)||"0";let qe=ve.statementToCode(ge,"DO");qe=ve.addLoopTrap(qe,ge),ge="";const st=ve.nameDB_.getDistinctName("count",l.NameType$$module$build$src$core$names.VARIABLE);let Dt=Fe;return Fe.match(/^\w+$/)||l.isNumber$$module$build$src$core$utils$string(Fe)||(Dt=ve.nameDB_.getDistinctName("repeat_end",l.NameType$$module$build$src$core$names.VARIABLE),ge+="var "+Dt+" = "+Fe+`;
`),ge+("for (var "+st+" = 0; "+st+" < "+Dt+"; "+st+`++) {
`+qe+`}
`)},k=function(ge,ve){const Fe=ge.getFieldValue("MODE")==="UNTIL";let qe=ve.valueToCode(ge,"BOOL",Fe?he.LOGICAL_NOT:he.NONE)||"false",st=ve.statementToCode(ge,"DO");return st=ve.addLoopTrap(st,ge),Fe&&(qe="!"+qe),"while ("+qe+`) {
`+st+`}
`},D=function(ge,ve){var Fe=ve.getVariableName(ge.getFieldValue("VAR")),qe=ve.valueToCode(ge,"FROM",he.ASSIGNMENT)||"0",st=ve.valueToCode(ge,"TO",he.ASSIGNMENT)||"0";const Dt=ve.valueToCode(ge,"BY",he.ASSIGNMENT)||"1";let Wt=ve.statementToCode(ge,"DO");if(Wt=ve.addLoopTrap(Wt,ge),l.isNumber$$module$build$src$core$utils$string(qe)&&l.isNumber$$module$build$src$core$utils$string(st)&&l.isNumber$$module$build$src$core$utils$string(Dt))ve=Number(qe)<=Number(st),ge="for ("+Fe+" = "+qe+"; "+Fe+(ve?" <= ":" >= ")+st+"; "+Fe,Fe=Math.abs(Number(Dt)),ge=Fe===1?ge+(ve?"++":"--"):ge+((ve?" += ":" -= ")+Fe),ge+=`) {
`+Wt+`}
`;else{ge="";let pn=qe;qe.match(/^\w+$/)||l.isNumber$$module$build$src$core$utils$string(qe)||(pn=ve.nameDB_.getDistinctName(Fe+"_start",l.NameType$$module$build$src$core$names.VARIABLE),ge+="var "+pn+" = "+qe+`;
`),qe=st,st.match(/^\w+$/)||l.isNumber$$module$build$src$core$utils$string(st)||(qe=ve.nameDB_.getDistinctName(Fe+"_end",l.NameType$$module$build$src$core$names.VARIABLE),ge+="var "+qe+" = "+st+`;
`),st=ve.nameDB_.getDistinctName(Fe+"_inc",l.NameType$$module$build$src$core$names.VARIABLE),ge+="var "+st+" = ",ge=l.isNumber$$module$build$src$core$utils$string(Dt)?ge+(Math.abs(Number(Dt))+`;
`):ge+("Math.abs("+Dt+`);
`),ge+="if ("+pn+" > "+qe+`) {
`,ge+=ve.INDENT+st+" = -"+st+`;
`,ge=ge+`}
for (`+(Fe+" = "+pn+"; "+st+" >= 0 ? "+Fe+" <= "+qe+" : "+Fe+" >= "+qe+"; "+Fe+" += "+st+`) {
`+Wt+`}
`)}return ge},j=function(ge,ve){const Fe=ve.getVariableName(ge.getFieldValue("VAR"));var qe=ve.valueToCode(ge,"LIST",he.ASSIGNMENT)||"[]";let st=ve.statementToCode(ge,"DO");st=ve.addLoopTrap(st,ge),ge="";let Dt=qe;return qe.match(/^\w+$/)||(Dt=ve.nameDB_.getDistinctName(Fe+"_list",l.NameType$$module$build$src$core$names.VARIABLE),ge+="var "+Dt+" = "+qe+`;
`),qe=ve.nameDB_.getDistinctName(Fe+"_index",l.NameType$$module$build$src$core$names.VARIABLE),st=ve.INDENT+Fe+" = "+Dt+"["+qe+`];
`+st,ge+("for (var "+qe+" in "+Dt+`) {
`+st+`}
`)},V=function(ge,ve){let Fe="";if(ve.STATEMENT_PREFIX&&(Fe+=ve.injectId(ve.STATEMENT_PREFIX,ge)),ve.STATEMENT_SUFFIX&&(Fe+=ve.injectId(ve.STATEMENT_SUFFIX,ge)),ve.STATEMENT_PREFIX){const qe=ge.getSurroundLoop();qe&&!qe.suppressPrefixSuffix&&(Fe+=ve.injectId(ve.STATEMENT_PREFIX,qe))}switch(ge.getFieldValue("FLOW")){case"BREAK":return Fe+`break;
`;case"CONTINUE":return Fe+`continue;
`}throw Error("Unknown flow statement.")},z=function(ge,ve){return ge=Number(ge.getFieldValue("NUM")),[String(ge),0<=ge?he.ATOMIC:he.UNARY_NEGATION]},W=function(ge,ve){var Fe={ADD:[" + ",he.ADDITION],MINUS:[" - ",he.SUBTRACTION],MULTIPLY:[" * ",he.MULTIPLICATION],DIVIDE:[" / ",he.DIVISION],POWER:[null,he.NONE]}[ge.getFieldValue("OP")];const qe=Fe[0];Fe=Fe[1];const st=ve.valueToCode(ge,"A",Fe)||"0";return ge=ve.valueToCode(ge,"B",Fe)||"0",qe?[st+qe+ge,Fe]:["Math.pow("+st+", "+ge+")",he.FUNCTION_CALL]},ee=function(ge,ve){const Fe=ge.getFieldValue("OP");let qe;if(Fe==="NEG")return ge=ve.valueToCode(ge,"NUM",he.UNARY_NEGATION)||"0",ge[0]==="-"&&(ge=" "+ge),["-"+ge,he.UNARY_NEGATION];switch(ge=Fe==="SIN"||Fe==="COS"||Fe==="TAN"?ve.valueToCode(ge,"NUM",he.DIVISION)||"0":ve.valueToCode(ge,"NUM",he.NONE)||"0",Fe){case"ABS":qe="Math.abs("+ge+")";break;case"ROOT":qe="Math.sqrt("+ge+")";break;case"LN":qe="Math.log("+ge+")";break;case"EXP":qe="Math.exp("+ge+")";break;case"POW10":qe="Math.pow(10,"+ge+")";break;case"ROUND":qe="Math.round("+ge+")";break;case"ROUNDUP":qe="Math.ceil("+ge+")";break;case"ROUNDDOWN":qe="Math.floor("+ge+")";break;case"SIN":qe="Math.sin("+ge+" / 180 * Math.PI)";break;case"COS":qe="Math.cos("+ge+" / 180 * Math.PI)";break;case"TAN":qe="Math.tan("+ge+" / 180 * Math.PI)"}if(qe)return[qe,he.FUNCTION_CALL];switch(Fe){case"LOG10":qe="Math.log("+ge+") / Math.log(10)";break;case"ASIN":qe="Math.asin("+ge+") / Math.PI * 180";break;case"ACOS":qe="Math.acos("+ge+") / Math.PI * 180";break;case"ATAN":qe="Math.atan("+ge+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+Fe)}return[qe,he.DIVISION]},ne=function(ge,ve){return{PI:["Math.PI",he.MEMBER],E:["Math.E",he.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",he.DIVISION],SQRT2:["Math.SQRT2",he.MEMBER],SQRT1_2:["Math.SQRT1_2",he.MEMBER],INFINITY:["Infinity",he.ATOMIC]}[ge.getFieldValue("CONSTANT")]},Q=function(ge,ve){var Fe={EVEN:[" % 2 === 0",he.MODULUS,he.EQUALITY],ODD:[" % 2 === 1",he.MODULUS,he.EQUALITY],WHOLE:[" % 1 === 0",he.MODULUS,he.EQUALITY],POSITIVE:[" > 0",he.RELATIONAL,he.RELATIONAL],NEGATIVE:[" < 0",he.RELATIONAL,he.RELATIONAL],DIVISIBLE_BY:[null,he.MODULUS,he.EQUALITY],PRIME:[null,he.NONE,he.FUNCTION_CALL]};const qe=ge.getFieldValue("PROPERTY"),[st,Dt,Wt]=Fe[qe];return Fe=ve.valueToCode(ge,"NUMBER_TO_CHECK",Dt)||"0",qe==="PRIME"?ge=ve.provideFunction_("mathIsPrime",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+Fe+")":qe==="DIVISIBLE_BY"?(ge=ve.valueToCode(ge,"DIVISOR",he.MODULUS)||"0",ge=Fe+" % "+ge+" === 0"):ge=Fe+st,[ge,Wt]},se=function(ge,ve){const Fe=ve.valueToCode(ge,"DELTA",he.ADDITION)||"0";return ge=ve.getVariableName(ge.getFieldValue("VAR")),ge+" = (typeof "+ge+" === 'number' ? "+ge+" : 0) + "+Fe+`;
`},be=function(ge,ve){var Fe=ge.getFieldValue("OP");switch(Fe){case"SUM":ge=ve.valueToCode(ge,"LIST",he.MEMBER)||"[]",ge+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":ge=ve.valueToCode(ge,"LIST",he.NONE)||"[]",ge="Math.min.apply(null, "+ge+")";break;case"MAX":ge=ve.valueToCode(ge,"LIST",he.NONE)||"[]",ge="Math.max.apply(null, "+ge+")";break;case"AVERAGE":Fe=ve.provideFunction_("mathMean",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),ge=ve.valueToCode(ge,"LIST",he.NONE)||"[]",ge=Fe+"("+ge+")";break;case"MEDIAN":Fe=ve.provideFunction_("mathMedian",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),ge=ve.valueToCode(ge,"LIST",he.NONE)||"[]",ge=Fe+"("+ge+")";break;case"MODE":Fe=ve.provideFunction_("mathModes",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),ge=ve.valueToCode(ge,"LIST",he.NONE)||"[]",ge=Fe+"("+ge+")";break;case"STD_DEV":Fe=ve.provideFunction_("mathStandardDeviation",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),ge=ve.valueToCode(ge,"LIST",he.NONE)||"[]",ge=Fe+"("+ge+")";break;case"RANDOM":Fe=ve.provideFunction_("mathRandomList",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),ge=ve.valueToCode(ge,"LIST",he.NONE)||"[]",ge=Fe+"("+ge+")";break;default:throw Error("Unknown operator: "+Fe)}return[ge,he.FUNCTION_CALL]},H=function(ge,ve){const Fe=ve.valueToCode(ge,"DIVIDEND",he.MODULUS)||"0";return ge=ve.valueToCode(ge,"DIVISOR",he.MODULUS)||"0",[Fe+" % "+ge,he.MODULUS]},P=function(ge,ve){const Fe=ve.valueToCode(ge,"VALUE",he.NONE)||"0",qe=ve.valueToCode(ge,"LOW",he.NONE)||"0";return ge=ve.valueToCode(ge,"HIGH",he.NONE)||"Infinity",["Math.min(Math.max("+Fe+", "+qe+"), "+ge+")",he.FUNCTION_CALL]},L=function(ge,ve){const Fe=ve.valueToCode(ge,"FROM",he.NONE)||"0";return ge=ve.valueToCode(ge,"TO",he.NONE)||"0",[ve.provideFunction_("mathRandomInt",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+Fe+", "+ge+")",he.FUNCTION_CALL]},F=function(ge,ve){return["Math.random()",he.FUNCTION_CALL]},M=function(ge,ve){const Fe=ve.valueToCode(ge,"X",he.NONE)||"0";return["Math.atan2("+(ve.valueToCode(ge,"Y",he.NONE)||"0")+", "+Fe+") / Math.PI * 180",he.DIVISION]},U=function(ge,ve){const Fe=ve.getProcedureName(ge.getFieldValue("NAME"));var qe="";ve.STATEMENT_PREFIX&&(qe+=ve.injectId(ve.STATEMENT_PREFIX,ge)),ve.STATEMENT_SUFFIX&&(qe+=ve.injectId(ve.STATEMENT_SUFFIX,ge)),qe&&(qe=ve.prefixLines(qe,ve.INDENT));let st="";ve.INFINITE_LOOP_TRAP&&(st=ve.prefixLines(ve.injectId(ve.INFINITE_LOOP_TRAP,ge),ve.INDENT));let Dt="";ge.getInput("STACK")&&(Dt=ve.statementToCode(ge,"STACK"));let Wt="";ge.getInput("RETURN")&&(Wt=ve.valueToCode(ge,"RETURN",he.NONE)||"");let pn="";Dt&&Wt&&(pn=qe),Wt&&(Wt=ve.INDENT+"return "+Wt+`;
`);const bn=[],sr=ge.getVars();for(let Pn=0;Pn<sr.length;Pn++)bn[Pn]=ve.getVariableName(sr[Pn]);return qe="function "+Fe+"("+bn.join(", ")+`) {
`+qe+st+Dt+pn+Wt+"}",qe=ve.scrub_(ge,qe),ve.definitions_["%"+Fe]=qe,null},Z=function(ge,ve){const Fe=ve.getProcedureName(ge.getFieldValue("NAME")),qe=[],st=ge.getVars();for(let Dt=0;Dt<st.length;Dt++)qe[Dt]=ve.valueToCode(ge,"ARG"+Dt,he.NONE)||"null";return[Fe+"("+qe.join(", ")+")",he.FUNCTION_CALL]},K=function(ge,ve){return ve.forBlock.procedures_callreturn(ge,ve)[0]+`;
`},oe=function(ge,ve){let Fe="if ("+(ve.valueToCode(ge,"CONDITION",he.NONE)||"false")+`) {
`;return ve.STATEMENT_SUFFIX&&(Fe+=ve.prefixLines(ve.injectId(ve.STATEMENT_SUFFIX,ge),ve.INDENT)),ge.hasReturnValue_?(ge=ve.valueToCode(ge,"VALUE",he.NONE)||"null",Fe+=ve.INDENT+"return "+ge+`;
`):Fe+=ve.INDENT+`return;
`,Fe+`}
`},ie=function(ge,ve){return[ve.quote_(ge.getFieldValue("TEXT")),he.ATOMIC]},$e=function(ge,ve){switch(ge.itemCount_){case 0:return["''",he.ATOMIC];case 1:return ge=ve.valueToCode(ge,"ADD0",he.NONE)||"''",Le(ge);case 2:var Fe=ve.valueToCode(ge,"ADD0",he.NONE)||"''";return ge=ve.valueToCode(ge,"ADD1",he.NONE)||"''",[Le(Fe)[0]+" + "+Le(ge)[0],he.ADDITION];default:Fe=Array(ge.itemCount_);for(let qe=0;qe<ge.itemCount_;qe++)Fe[qe]=ve.valueToCode(ge,"ADD"+qe,he.NONE)||"''";return["["+Fe.join(",")+"].join('')",he.FUNCTION_CALL]}},ce=function(ge,ve){const Fe=ve.getVariableName(ge.getFieldValue("VAR"));return ge=ve.valueToCode(ge,"TEXT",he.NONE)||"''",Fe+" += "+Le(ge)[0]+`;
`},le=function(ge,ve){return[(ve.valueToCode(ge,"VALUE",he.MEMBER)||"''")+".length",he.MEMBER]},ye=function(ge,ve){return["!"+(ve.valueToCode(ge,"VALUE",he.MEMBER)||"''")+".length",he.LOGICAL_NOT]},_e=function(ge,ve){const Fe=ge.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",qe=ve.valueToCode(ge,"FIND",he.NONE)||"''";return ve=(ve.valueToCode(ge,"VALUE",he.MEMBER)||"''")+"."+Fe+"("+qe+")",ge.workspace.options.oneBasedIndex?[ve+" + 1",he.ADDITION]:[ve,he.FUNCTION_CALL]},q=function(ge,ve){const Fe=ge.getFieldValue("WHERE")||"FROM_START",qe=ve.valueToCode(ge,"VALUE",Fe==="RANDOM"?he.NONE:he.MEMBER)||"''";switch(Fe){case"FIRST":return[qe+".charAt(0)",he.FUNCTION_CALL];case"LAST":return[qe+".slice(-1)",he.FUNCTION_CALL];case"FROM_START":return ge=ve.getAdjusted(ge,"AT"),[qe+".charAt("+ge+")",he.FUNCTION_CALL];case"FROM_END":return ge=ve.getAdjusted(ge,"AT",1,!0),[qe+".slice("+ge+").charAt(0)",he.FUNCTION_CALL];case"RANDOM":return[ve.provideFunction_("textRandomLetter",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+qe+")",he.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},re=function(ge,ve){var Fe={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const qe=ge.getFieldValue("WHERE1"),st=ge.getFieldValue("WHERE2");var Dt=qe!=="FROM_END"&&qe!=="LAST"&&st!=="FROM_END"&&st!=="LAST",Wt=ve.valueToCode(ge,"STRING",Dt?he.MEMBER:he.NONE)||"''";if(qe==="FIRST"&&st==="LAST")return[Wt,he.NONE];if(Wt.match(/^'?\w+'?$/)||Dt){switch(qe){case"FROM_START":Fe=ve.getAdjusted(ge,"AT1");break;case"FROM_END":Fe=ve.getAdjusted(ge,"AT1",1,!1,he.SUBTRACTION),Fe=Wt+".length - "+Fe;break;case"FIRST":Fe="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(st){case"FROM_START":ve=ve.getAdjusted(ge,"AT2",1);break;case"FROM_END":ve=ve.getAdjusted(ge,"AT2",0,!1,he.SUBTRACTION),ve=Wt+".length - "+ve;break;case"LAST":ve=Wt+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Wt=Wt+".slice("+Fe+", "+ve+")"}else Dt=ve.getAdjusted(ge,"AT1"),ge=ve.getAdjusted(ge,"AT2"),Wt=ve.provideFunction_("subsequence"+Fe[qe]+Fe[st],`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(sequence${qe==="FROM_END"||qe==="FROM_START"?", at1":""}${st==="FROM_END"||st==="FROM_START"?", at2":""}) {
  var start = ${Pe("sequence",qe,"at1")};
  var end = ${Pe("sequence",st,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Wt+(qe==="FROM_END"||qe==="FROM_START"?", "+Dt:"")+(st==="FROM_END"||st==="FROM_START"?", "+ge:"")+")";return[Wt,he.FUNCTION_CALL]},fe=function(ge,ve){const Fe={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[ge.getFieldValue("CASE")];return ge=ve.valueToCode(ge,"TEXT",Fe?he.MEMBER:he.NONE)||"''",[Fe?ge+Fe:ve.provideFunction_("textToTitleCase",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+ge+")",he.FUNCTION_CALL]},we=function(ge,ve){const Fe={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[ge.getFieldValue("MODE")];return[(ve.valueToCode(ge,"TEXT",he.MEMBER)||"''")+Fe,he.FUNCTION_CALL]},Re=function(ge,ve){return"window.alert("+(ve.valueToCode(ge,"TEXT",he.NONE)||"''")+`);
`},ke=function(ge,ve){return ve="window.prompt("+(ge.getField("TEXT")?ve.quote_(ge.getFieldValue("TEXT")):ve.valueToCode(ge,"TEXT",he.NONE)||"''")+")",ge.getFieldValue("TYPE")==="NUMBER"&&(ve="Number("+ve+")"),[ve,he.FUNCTION_CALL]},ue=function(ge,ve){const Fe=ve.valueToCode(ge,"TEXT",he.NONE)||"''";return ge=ve.valueToCode(ge,"SUB",he.NONE)||"''",[ve.provideFunction_("textCount",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+Fe+", "+ge+")",he.FUNCTION_CALL]},Ee=function(ge,ve){const Fe=ve.valueToCode(ge,"TEXT",he.NONE)||"''",qe=ve.valueToCode(ge,"FROM",he.NONE)||"''";return ge=ve.valueToCode(ge,"TO",he.NONE)||"''",[ve.provideFunction_("textReplace",`
function ${ve.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+Fe+", "+qe+", "+ge+")",he.FUNCTION_CALL]},Ae=function(ge,ve){return[(ve.valueToCode(ge,"TEXT",he.MEMBER)||"''")+".split('').reverse().join('')",he.FUNCTION_CALL]},Ne=function(ge,ve){return[ve.getVariableName(ge.getFieldValue("VAR")),he.ATOMIC]},De=function(ge,ve){const Fe=ve.valueToCode(ge,"VALUE",he.ASSIGNMENT)||"0";return ve.getVariableName(ge.getFieldValue("VAR"))+" = "+Fe+`;
`},he;(function(ge){ge[ge.ATOMIC=0]="ATOMIC",ge[ge.NEW=1.1]="NEW",ge[ge.MEMBER=1.2]="MEMBER",ge[ge.FUNCTION_CALL=2]="FUNCTION_CALL",ge[ge.INCREMENT=3]="INCREMENT",ge[ge.DECREMENT=3]="DECREMENT",ge[ge.BITWISE_NOT=4.1]="BITWISE_NOT",ge[ge.UNARY_PLUS=4.2]="UNARY_PLUS",ge[ge.UNARY_NEGATION=4.3]="UNARY_NEGATION",ge[ge.LOGICAL_NOT=4.4]="LOGICAL_NOT",ge[ge.TYPEOF=4.5]="TYPEOF",ge[ge.VOID=4.6]="VOID",ge[ge.DELETE=4.7]="DELETE",ge[ge.AWAIT=4.8]="AWAIT",ge[ge.EXPONENTIATION=5]="EXPONENTIATION",ge[ge.MULTIPLICATION=5.1]="MULTIPLICATION",ge[ge.DIVISION=5.2]="DIVISION",ge[ge.MODULUS=5.3]="MODULUS",ge[ge.SUBTRACTION=6.1]="SUBTRACTION",ge[ge.ADDITION=6.2]="ADDITION",ge[ge.BITWISE_SHIFT=7]="BITWISE_SHIFT",ge[ge.RELATIONAL=8]="RELATIONAL",ge[ge.IN=8]="IN",ge[ge.INSTANCEOF=8]="INSTANCEOF",ge[ge.EQUALITY=9]="EQUALITY",ge[ge.BITWISE_AND=10]="BITWISE_AND",ge[ge.BITWISE_XOR=11]="BITWISE_XOR",ge[ge.BITWISE_OR=12]="BITWISE_OR",ge[ge.LOGICAL_AND=13]="LOGICAL_AND",ge[ge.LOGICAL_OR=14]="LOGICAL_OR",ge[ge.CONDITIONAL=15]="CONDITIONAL",ge[ge.ASSIGNMENT=16]="ASSIGNMENT",ge[ge.YIELD=17]="YIELD",ge[ge.COMMA=18]="COMMA",ge[ge.NONE=99]="NONE"})(he||(he={}));var tt=class extends l.CodeGenerator$$module$build$src$core$generator{constructor(ge="JavaScript"){super(ge),this.ORDER_OVERRIDES=[[he.FUNCTION_CALL,he.MEMBER],[he.FUNCTION_CALL,he.FUNCTION_CALL],[he.MEMBER,he.MEMBER],[he.MEMBER,he.FUNCTION_CALL],[he.LOGICAL_NOT,he.LOGICAL_NOT],[he.MULTIPLICATION,he.MULTIPLICATION],[he.ADDITION,he.ADDITION],[he.LOGICAL_AND,he.LOGICAL_AND],[he.LOGICAL_OR,he.LOGICAL_OR]],this.isInitialized=!1;for(const ve in he)ge=he[ve],typeof ge!="string"&&(this["ORDER_"+ve]=ge);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(ge){super.init(ge),this.nameDB_?this.nameDB_.reset():this.nameDB_=new l.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(ge.getVariableMap()),this.nameDB_.populateVariables(ge),this.nameDB_.populateProcedures(ge);const ve=[];var Fe=l.allDeveloperVariables$$module$build$src$core$variables(ge);for(let qe=0;qe<Fe.length;qe++)ve.push(this.nameDB_.getName(Fe[qe],l.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(ge=l.allUsedVarModels$$module$build$src$core$variables(ge),Fe=0;Fe<ge.length;Fe++)ve.push(this.nameDB_.getName(ge[Fe].getId(),l.NameType$$module$build$src$core$names.VARIABLE));ve.length&&(this.definitions_.variables="var "+ve.join(", ")+";"),this.isInitialized=!0}finish(ge){const ve=Object.values(this.definitions_);return super.finish(ge),this.isInitialized=!1,this.nameDB_.reset(),ve.join(`

`)+`


`+ge}scrubNakedValue(ge){return ge+`;
`}quote_(ge){return ge=ge.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+ge+"'"}multiline_quote_(ge){return ge.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(ge,ve,Fe=!1){let qe="";if(!ge.outputConnection||!ge.outputConnection.targetConnection){var st=ge.getCommentText();st&&(st=l.wrap$$module$build$src$core$utils$string(st,this.COMMENT_WRAP-3),qe+=this.prefixLines(st+`
`,"// "));for(let Dt=0;Dt<ge.inputList.length;Dt++)ge.inputList[Dt].type===l.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(st=ge.inputList[Dt].connection.targetBlock())&&(st=this.allNestedComments(st))&&(qe+=this.prefixLines(st,"// "))}return ge=ge.nextConnection&&ge.nextConnection.targetBlock(),Fe=Fe?"":this.blockToCode(ge),qe+ve+Fe}getAdjusted(ge,ve,Fe=0,qe=!1,st=he.NONE){ge.workspace.options.oneBasedIndex&&Fe--;const Dt=ge.workspace.options.oneBasedIndex?"1":"0";let Wt=st;return 0<Fe?Wt=he.ADDITION:0>Fe?Wt=he.SUBTRACTION:qe&&(Wt=he.UNARY_NEGATION),ge=this.valueToCode(ge,ve,Wt)||Dt,Fe===0&&!qe?ge:l.isNumber$$module$build$src$core$utils$string(ge)?(ge=String(Number(ge)+Fe),qe&&(ge=String(-Number(ge))),ge):(0<Fe?ge=`${ge} + ${Fe}`:0>Fe&&(ge=`${ge} - ${-Fe}`),qe&&(ge=Fe?`-(${ge})`:`-${ge}`),Math.floor(st)>=Math.floor(Wt)&&(ge=`(${ge})`),ge)}},at=function(ge,ve,Fe){return ve==="FIRST"?"0":ve==="FROM_END"?ge+".length - 1 - "+Fe:ve==="LAST"?ge+".length - 1":Fe},He={};He.lists_create_empty=w,He.lists_create_with=d,He.lists_getIndex=$,He.lists_getSublist=S,He.lists_indexOf=g,He.lists_isEmpty=u,He.lists_length=a,He.lists_repeat=f,He.lists_reverse=b,He.lists_setIndex=v,He.lists_sort=E,He.lists_split=h;var ot={};ot.controls_if=m,ot.controls_ifelse=m,ot.logic_boolean=x,ot.logic_compare=p,ot.logic_negate=y,ot.logic_null=A,ot.logic_operation=_,ot.logic_ternary=R;var Ue={};Ue.controls_flow_statements=V,Ue.controls_for=D,Ue.controls_forEach=j,Ue.controls_repeat=C,Ue.controls_repeat_ext=C,Ue.controls_whileUntil=k;var Ze={};Ze.math_arithmetic=W,Ze.math_atan2=M,Ze.math_change=se,Ze.math_constant=ne,Ze.math_constrain=P,Ze.math_modulo=H,Ze.math_number=z,Ze.math_number_property=Q,Ze.math_on_list=be,Ze.math_random_float=F,Ze.math_random_int=L,Ze.math_round=ee,Ze.math_single=ee,Ze.math_trig=ee;var ae={};ae.procedures_callnoreturn=K,ae.procedures_callreturn=Z,ae.procedures_defnoreturn=U,ae.procedures_defreturn=U,ae.procedures_ifreturn=oe;var Oe=/^\s*'([^']|\\')*'\s*$/,Le=function(ge){return Oe.test(ge)?[ge,he.ATOMIC]:["String("+ge+")",he.FUNCTION_CALL]},Pe=function(ge,ve,Fe){return ve==="FIRST"?"0":ve==="FROM_END"?ge+".length - 1 - "+Fe:ve==="LAST"?ge+".length - 1":Fe},ft={};ft.text=ie,ft.text_append=ce,ft.text_changeCase=fe,ft.text_charAt=q,ft.text_count=ue,ft.text_getSubstring=re,ft.text_indexOf=_e,ft.text_isEmpty=ye,ft.text_join=$e,ft.text_length=le,ft.text_print=Re,ft.text_prompt=ke,ft.text_prompt_ext=ke,ft.text_replace=Ee,ft.text_reverse=Ae,ft.text_trim=we;var Lt={};Lt.variables_get=Ne,Lt.variables_set=De;var qt={};qt.variables_get_dynamic=Ne,qt.variables_set_dynamic=De;var gn=new tt,dn=Object.assign({},He,ot,Ue,Ze,ae,ft,Lt,qt);for(const ge in dn)gn.forBlock[ge]=dn[ge];var un={};return un.JavascriptGenerator=tt,un.Order=he,un.javascriptGenerator=gn,un.__namespace__=l,un})}(javascript_compressed$1)),javascript_compressed$1.exports}var javascript_compressedExports=requireJavascript_compressed();const javascript=getDefaultExportFromCjs(javascript_compressedExports),{JavascriptGenerator,Order,javascriptGenerator}=javascript,Libre=()=>{const blocklyDiv=reactExports.useRef(null),workspaceRef=reactExports.useRef(null);reactExports.useEffect(()=>{if(blocklyDiv.current){const i=`
        <xml xmlns="https://developers.google.com/blockly/xml">
          <category name="Control" colour="#5C81A6">
            <block type="controls_if"></block>
            <block type="controls_repeat_ext">
              <value name="TIMES">
                <shadow type="math_number">
                  <field name="NUM">10</field>
                </shadow>
              </value>
            </block>
            <block type="controls_whileUntil"></block>
            <block type="controls_for"></block>
            <block type="controls_flow_statements"></block>
          </category>
          <category name="Lgica" colour="#5CA65C">
            <block type="logic_compare"></block>
            <block type="logic_operation"></block>
            <block type="logic_negate"></block>
            <block type="logic_boolean"></block>
            <block type="logic_null"></block>
          </category>
          <category name="Matemticas" colour="#5C68A6">
            <block type="math_number"></block>
            <block type="math_arithmetic"></block>
            <block type="math_single"></block>
            <block type="math_trig"></block>
            <block type="math_constant"></block>
            <block type="math_number_property"></block>
            <block type="math_round"></block>
            <block type="math_on_list"></block>
            <block type="math_modulo"></block>
            <block type="math_constrain"></block>
            <block type="math_random_int"></block>
            <block type="math_random_float"></block>
          </category>
          <category name="Texto" colour="#5CA6A6">
            <block type="text"></block>
            <block type="text_join"></block>
            <block type="text_append">
              <value name="TEXT">
                <shadow type="text"></shadow>
              </value>
            </block>
            <block type="text_length"></block>
            <block type="text_isEmpty"></block>
            <block type="text_indexOf"></block>
            <block type="text_charAt"></block>
            <block type="text_getSubstring"></block>
            <block type="text_changeCase"></block>
            <block type="text_trim"></block>
            <block type="text_print"></block>
            <block type="text_prompt_ext">
              <value name="TEXT">
                <shadow type="text"></shadow>
              </value>
            </block>
          </category>
          <category name="Listas" colour="#745CA6">
            <block type="lists_create_with"></block>
            <block type="lists_repeat"></block>
            <block type="lists_length"></block>
            <block type="lists_isEmpty"></block>
            <block type="lists_indexOf"></block>
            <block type="lists_getIndex"></block>
            <block type="lists_setIndex"></block>
            <block type="lists_getSublist"></block>
            <block type="lists_split"></block>
            <block type="lists_sort"></block>
          </category>
          <category name="Variables" custom="VARIABLE" colour="#A65C81"></category>
          <category name="Funciones" custom="PROCEDURE" colour="#9A5CA6"></category>
        </xml>
      `;workspaceRef.current=inject(blocklyDiv.current,{toolbox:i})}},[]);const runCode=()=>{const outputElement=document.getElementById("output-box"),code=javascriptGenerator.workspaceToCode(workspaceRef.current);outputElement.textContent=` Cdigo generado:
`+code+`

 Salida:
`;try{const originalLog=console.log;console.log=i=>{outputElement.textContent+=i+`
`},eval(code),console.log=originalLog}catch(i){outputElement.textContent+=` Error: ${i}`}},saveProject=()=>{if(!workspaceRef.current)return;const i=Xml.workspaceToDom(workspaceRef.current),r=Xml.domToPrettyText(i),n=new Blob([r],{type:"text/xml"}),l=URL.createObjectURL(n),w=document.createElement("a");w.href=l,w.download="mi_proyecto_blockly.xml",w.click(),URL.revokeObjectURL(l)},loadProject=i=>{const r=i.target.files[0];if(!r||!workspaceRef.current){alert(" Workspace no disponible todava.");return}const n=new FileReader;n.onload=l=>{try{const w=l.target.result;console.log(" XML cargado:",w);const f=new DOMParser().parseFromString(w,"text/xml");Xml.clearWorkspaceAndLoadFromXml(f.documentElement,workspaceRef.current),svgResize(workspaceRef.current),workspaceRef.current.scrollCenter(),workspaceRef.current.zoomToFit(),alert(" Proyecto cargado correctamente")}catch(w){alert(" Error al cargar el archivo. Revisa la consola."),console.error(w)}},n.readAsText(r)};return jsxRuntimeExports.jsxs("div",{className:"home-container",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"modo-libre-container",children:[jsxRuntimeExports.jsx("div",{className:"bloques-panel",children:jsxRuntimeExports.jsx("h3",{children:"Modo libre"})}),jsxRuntimeExports.jsx("div",{className:"workspace-panel",ref:blocklyDiv}),jsxRuntimeExports.jsxs("div",{className:"output-panel",children:[jsxRuntimeExports.jsx("div",{className:"output-box",id:"output-box"}),jsxRuntimeExports.jsx("button",{className:"play",onClick:runCode,children:" Ejecutar"}),jsxRuntimeExports.jsxs("div",{className:"project-buttons",children:[jsxRuntimeExports.jsx("button",{className:"save-button",onClick:saveProject,children:" Guardar Proyecto"}),jsxRuntimeExports.jsx("button",{className:"load-button",onClick:()=>document.getElementById("fileInput").click(),children:" Cargar Proyecto"}),jsxRuntimeExports.jsx("input",{type:"file",id:"fileInput",accept:".xml",style:{display:"none"},onChange:loadProject})]})]})]})]})},obtenerInsigniasDelUsuario=async i=>{try{const r=await fetch(`http://localhost:3000/api/insignias/${i}`);if(!r.ok)throw new Error("No se pudo obtener insignias");return await r.json()}catch(r){return console.error("Error al obtener insignias:",r),[]}},PerfilUsuario=()=>{const[i,r]=reactExports.useState(""),[n,l]=reactExports.useState(""),[w,d]=reactExports.useState(""),[f,a]=reactExports.useState({actividadesCompletadas:0,porcentaje:0}),[u,g]=reactExports.useState([]);return reactExports.useEffect(()=>{const $=localStorage.getItem("token"),v=localStorage.getItem("username"),S=localStorage.getItem("email"),E=localStorage.getItem("rol"),b=(JSON.parse(localStorage.getItem("progreso"))||[])[0]||{actividadesCompletadas:0,porcentaje:0};$&&v&&((async()=>{try{const p=await axios$1.post("http://localhost:3000/api/usuarios/username",{username:v});console.log("Datos:",p.data),l(p.data.email||S||""),d(p.data.rol||E||""),a(p.data.progreso||b)}catch(p){console.error("Error al obtener los datos del usuario:",p)}})(),r(v||""),l(S||""),d(E||""),a(b),obtenerInsigniasDelUsuario(v).then(p=>{g(p)}))},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"perfil-contenedor",children:[jsxRuntimeExports.jsxs("h1",{className:"perfil-titulo",children:["Bienvenido ",i]}),jsxRuntimeExports.jsxs("div",{className:"perfil-info",children:[jsxRuntimeExports.jsxs("div",{className:"perfil-datos",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Correo:"})," ",n]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Rol:"})," ",w]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Actividades completadas:"})," ",(f==null?void 0:f.actividadesCompletadas)??0]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Porcentaje de avance:"})," ",(f==null?void 0:f.porcentaje)??0,"%"]}),jsxRuntimeExports.jsx("div",{className:"barra-progreso-container",children:jsxRuntimeExports.jsx("div",{className:"barra-progreso",style:{width:`${f.porcentaje??0}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"perfil-insignias",children:[jsxRuntimeExports.jsx("h2",{children:"Insignias"}),jsxRuntimeExports.jsx("div",{className:"insignias-lista-tabla",children:jsxRuntimeExports.jsxs("table",{className:"tabla-insignias",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{}),jsxRuntimeExports.jsx("th",{children:"Nombre"}),jsxRuntimeExports.jsx("th",{children:"Descripcin"}),jsxRuntimeExports.jsx("th",{children:"Fecha"})]})}),jsxRuntimeExports.jsx("tbody",{children:u.map(($,v)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("img",{src:$.imagenUrl,alt:$.nombre,className:"icono-insignia"})}),jsxRuntimeExports.jsx("td",{children:$.nombre}),jsxRuntimeExports.jsx("td",{children:$.descripcion}),jsxRuntimeExports.jsx("td",{children:$.fecha})]},v))})]})})]})]})]})]})},Foro=()=>{const[i,r]=reactExports.useState(""),[n,l]=reactExports.useState(""),[w,d]=reactExports.useState([]),[f,a]=reactExports.useState(!1),u=async g=>{if(g.preventDefault(),i.trim()===""||n.trim()===""){alert("Por favor llena tanto el ttulo como el contenido de la pregunta.");return}try{const $=localStorage.getItem("username"),v=new Date().toISOString(),S="pendiente",E=[];await axios$1.post("http://localhost:3000/api/foro/pregunta",{titulo:i,contenido:n,autor:$,fecha:v,estado:S,comentarios:E});const h=await axios$1.post("http://localhost:3000/api/foro/autor",{autor:$});d(h.data),a(!0),r(""),l("")}catch{Swal.fire({icon:"error",title:"No se pudo hacer la pregunta",text:"Ha surgido un error al intentar publicar la pregunta, por favor intntelo ms tarde"})}};return reactExports.useEffect(()=>{(async()=>{try{const $=localStorage.getItem("username"),v=await axios$1.post("http://localhost:3000/api/foro/autor",{autor:$});d(v.data)}catch($){console.error("Error al obtener las preguntas del foro",$)}})()},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"foro-contenedor",children:[jsxRuntimeExports.jsx("h1",{className:"titulo-foro",style:{paddingBottom:"1rem"},children:"Foro de Ayuda"}),jsxRuntimeExports.jsxs("div",{className:"formulario-pregunta",children:[jsxRuntimeExports.jsxs("label",{className:"titulo-editable",children:[" ",jsxRuntimeExports.jsx("b",{children:"Titulo de la pregunta"})," "]}),jsxRuntimeExports.jsx("input",{className:"input-question",type:"text",placeholder:"Escribe un titulo para tu duda o problema aqu",value:i,onChange:g=>r(g.target.value),resize:"none"}),jsxRuntimeExports.jsx("b",{children:"Tu pregunta"}),jsxRuntimeExports.jsx("textarea",{placeholder:"Describe tu problema o duda aqu",value:n,onChange:g=>l(g.target.value)}),jsxRuntimeExports.jsx("button",{className:"boton-publicar",style:{paddingTop:"10px",paddingBottom:"10px"},onClick:u,children:"Publicar"})]}),jsxRuntimeExports.jsx("div",{className:"preguntas-lista",children:w.sort((g,$)=>new Date($.fecha)-new Date(g.fecha)).slice(0,8).map(g=>jsxRuntimeExports.jsxs("div",{className:"chat-container",children:[jsxRuntimeExports.jsx("div",{className:"chat-header",children:jsxRuntimeExports.jsxs("p",{className:"chat-fecha",children:[" ",new Date(g.fecha).toLocaleString("es-MX",{dateStyle:"short",timeStyle:"short"})]})}),jsxRuntimeExports.jsxs("div",{className:"chat-content",children:[jsxRuntimeExports.jsx("h3",{className:"pregunta-titulo",children:g.titulo}),jsxRuntimeExports.jsxs("p",{className:"pregunta-autor",children:[" ",g.autor]}),jsxRuntimeExports.jsx("p",{className:"pregunta-contenido",children:g.contenido}),jsxRuntimeExports.jsxs("div",{className:"respuestas",children:[jsxRuntimeExports.jsx("p",{className:"respuesta-autor",children:"Ayudante"}),g.comentarios&&g.comentarios.length>0?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"respuestas-content",children:[jsxRuntimeExports.jsx("p",{className:"respuesta-contenido",children:g.comentarios[0].contenido}),jsxRuntimeExports.jsx("p",{className:"fecha-respuesta",children:jsxRuntimeExports.jsx("em",{children:new Date(g.comentarios[0].fecha).toLocaleString("es-MX",{dateStyle:"short",timeStyle:"short"})})})]})}):jsxRuntimeExports.jsx("p",{children:"Responderemos pronto..."})]})]})]},g._id))}),f&&jsxRuntimeExports.jsx("div",{className:"modal-overlay",children:jsxRuntimeExports.jsxs("div",{className:"modal-contenido",children:[jsxRuntimeExports.jsx("img",{src:"resource/Zebra.png",alt:"Zebra"}),jsxRuntimeExports.jsx("h2",{children:"Gracias por enviar tu duda!"}),jsxRuntimeExports.jsx("p",{children:"Un administrador estar revisando tu duda y te responder lo antes posible"}),jsxRuntimeExports.jsx("button",{onClick:()=>a(!1),children:"ACEPTAR"})]})})]})]})},ProtectedRoute=({children:i})=>{const[r,n]=reactExports.useState(null),[l,w]=reactExports.useState(!0),d=useNavigate();return reactExports.useEffect(()=>{localStorage.getItem("token")?(n(!0),w(!1)):Swal.fire({icon:"error",title:"Acceso denegado",text:"Debes iniciar sesion para acceder a esta pagina"}).then(()=>{n(!1),d("/")})},[d]),l?null:r?i:null},API_URL$1="http://localhost:3000/api/foro",obtenerForo=async()=>(await fetch(API_URL$1)).json(),actualizarForo=async(i,r)=>{try{const n=await fetch(`${API_URL$1}/${i}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Error ${n.status}: ${await n.text()}`);return await n.json()}catch(n){return console.error("Error al actualizar el foro:",n.message),{error:n.message}}},eliminarForo=async i=>(await fetch(`${API_URL$1}/${i}`,{method:"DELETE"})).json(),eliminarComentario=async(i,r)=>(await fetch(`http://localhost:3000/api/foro/${i}/comentarios/${r}`,{method:"DELETE"})).json(),Spinner=()=>jsxRuntimeExports.jsx("div",{className:"spinner-overlay",children:jsxRuntimeExports.jsx("div",{className:"spinner"})}),iconPanel="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M2%202h2v20H2zM21%2013H7a1%201%200%200%200-1%201v5a1%201%200%200%200%201%201h14a1%201%200%200%200%201-1v-5a1%201%200%200%200-1-1zm-1%205H8v-3h12zM7%2011h10a1%201%200%200%200%201-1V5a1%201%200%200%200-1-1H7a1%201%200%200%200-1%201v5a1%201%200%200%200%201%201zm1-5h8v3H8z'/%3e%3c/svg%3e",SidebarMenu=()=>{const i=useLocation(),r=useNavigate(),[n,l]=reactExports.useState(!1),w=localStorage.getItem("username")||"Usuario no autenticado",d=()=>{l(!0),localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("email"),localStorage.removeItem("rol"),localStorage.removeItem("progreso"),localStorage.removeItem("insignias"),setTimeout(()=>{r("/"),l(!1)},1e3)};return jsxRuntimeExports.jsxs("aside",{className:"sidebar",children:[jsxRuntimeExports.jsxs("div",{className:"user-info",children:[jsxRuntimeExports.jsx("img",{src:avatar,alt:"avatar",className:"avatar"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"user-name",children:w})," ",jsxRuntimeExports.jsx("p",{className:"user-role",children:"Administrador"})," "]})]}),jsxRuntimeExports.jsxs("nav",{className:"nav-links",children:[jsxRuntimeExports.jsxs(NavLink,{to:"/Dashboard",className:i.pathname==="/Dashboard"?"active":"",children:[jsxRuntimeExports.jsx("img",{src:iconPanel,alt:"",className:"nav-icon"}),"Panel"]}),jsxRuntimeExports.jsxs(NavLink,{to:"/UserManagement",className:i.pathname==="/usuarios"?"active":"",children:[jsxRuntimeExports.jsx("img",{src:iconUsuario,alt:"",className:"nav-icon"}),"Usuarios"]}),jsxRuntimeExports.jsxs(NavLink,{to:"/forumadmin",className:i.pathname==="/forumadmin"?"active":"",children:[jsxRuntimeExports.jsx("img",{src:iconForo,alt:"",className:"nav-icon"}),"Foro"]})]}),jsxRuntimeExports.jsx("button",{className:"logout-btn",onClick:d,disabled:n,children:n?jsxRuntimeExports.jsx("spinner",{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:iconLogOut,alt:""}),"Salir"]})})]})},ForumAdmin=()=>{const[i,r]=reactExports.useState([]),[n,l]=reactExports.useState([]),[w,d]=reactExports.useState({}),[f,a]=reactExports.useState(""),[u,g]=reactExports.useState(null),[$,v]=reactExports.useState({}),[S,E]=reactExports.useState(!1);reactExports.useEffect(()=>{const y=x=>{u&&!x.target.closest(".response-box")&&!x.target.closest(".reply-btn")&&g(null)};return document.addEventListener("click",y),()=>document.removeEventListener("click",y)},[u]),reactExports.useEffect(()=>{(async()=>{E(!0);try{const x=await obtenerForo();r(x.filter(R=>R.estado==="pendiente")),l(x.filter(R=>R.estado==="aprobada"));const A={};x.forEach(R=>{A[R._id]=R.comentarios||[]}),d(A)}catch(x){console.error("Error al obtener las dudas:",x)}finally{E(!1)}})()},[]);const h=y=>{v(x=>({...x,[y]:!x[y]}))},b=async y=>{E(!0);try{const x=await actualizarForo(y._id,{estado:"aprobada"});if(x.error){console.error("Error en la actualizacin:",x.error);return}const A=await obtenerForo();r(A.filter(R=>R.estado==="pendiente")),l(A.filter(R=>R.estado==="aprobada"))}catch(x){console.error("Error al actualizar la duda:",x)}finally{E(!1)}},m=async y=>{E(!0);try{const x=await eliminarForo(y._id);if(x.error){console.error("Error al eliminar la duda:",x.error);return}const A=await obtenerForo();r(A.filter(R=>R.estado==="pendiente")),l(A.filter(R=>R.estado==="aprobada"))}catch(x){console.error("Error al eliminar la duda:",x)}finally{E(!1)}},p=async()=>{if(!(!u||!f.trim())){E(!0);try{const y={autor:"Ayudante",contenido:f,fecha:new Date().toISOString()},x=await fetch(`http://localhost:3000/api/foro/${u._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!x.ok)throw new Error(`Error ${x.status}: ${await x.text()}`);const A=await obtenerForo();l(A.filter(C=>C.estado==="aprobada"));const R=A.find(C=>C._id===u._id);d(C=>({...C,[u._id]:(R==null?void 0:R.comentarios)||[]})),a(""),g(null)}catch(y){console.error("Error al enviar la respuesta:",y)}finally{E(!1)}}},_=async(y,x)=>{E(!0);try{const A=await eliminarComentario(y,x);if(A.error){console.error("Error al eliminar el comentario:",A.error);return}d(R=>{const C=R[y].filter(k=>k._id!==x);return{...R,[y]:C}})}catch(A){console.error("Error al eliminar el comentario:",A)}finally{E(!1)}};return jsxRuntimeExports.jsxs("div",{className:"forum-admin",children:[jsxRuntimeExports.jsx(SidebarMenu,{}),jsxRuntimeExports.jsxs("div",{className:"forum-content",children:[jsxRuntimeExports.jsx("h1",{className:"forum-title",children:"Gestin del foro"}),jsxRuntimeExports.jsxs("div",{className:"forum-sections",children:[S&&jsxRuntimeExports.jsx(Spinner,{})," ",jsxRuntimeExports.jsxs("div",{className:"forum-panel",children:[jsxRuntimeExports.jsx("h2",{children:"Dudas Recibidas"}),jsxRuntimeExports.jsx("div",{className:"questions-box",children:i.map(y=>jsxRuntimeExports.jsxs("div",{className:"question-item",children:[jsxRuntimeExports.jsx("p",{className:"question-user",children:jsxRuntimeExports.jsx("strong",{children:y.autor})}),jsxRuntimeExports.jsx("p",{className:"question-title",children:jsxRuntimeExports.jsx("strong",{children:y.titulo})}),jsxRuntimeExports.jsx("p",{className:"question-text",children:y.contenido}),jsxRuntimeExports.jsx("p",{className:"question-date",children:new Date(y.fecha).toLocaleDateString("es-MX",{day:"2-digit",month:"long",year:"numeric"})}),jsxRuntimeExports.jsxs("div",{className:"button-group",children:[jsxRuntimeExports.jsx("button",{className:"accept-btn",onClick:()=>b(y),children:"Aceptar"}),jsxRuntimeExports.jsx("button",{className:"reject-btn",onClick:()=>m(y),children:"Rechazar"})]})]},y._id))})]}),jsxRuntimeExports.jsxs("div",{className:"forum-panel",children:[jsxRuntimeExports.jsx("h2",{children:"Dudas Aceptadas"}),jsxRuntimeExports.jsx("div",{className:"questions-box",children:n.map(y=>{var x,A;return jsxRuntimeExports.jsxs("div",{className:"question-item",children:[jsxRuntimeExports.jsx("p",{className:"question-user",children:jsxRuntimeExports.jsx("strong",{children:y.autor})}),jsxRuntimeExports.jsx("p",{className:"question-title",children:jsxRuntimeExports.jsx("strong",{children:y.titulo})}),jsxRuntimeExports.jsx("p",{className:"question-text",children:y.contenido}),jsxRuntimeExports.jsx("p",{className:"question-date",children:new Date(y.fecha).toLocaleDateString("es-MX",{day:"2-digit",month:"long",year:"numeric"})}),jsxRuntimeExports.jsx("div",{className:"button-group",children:jsxRuntimeExports.jsx("button",{className:"delete-forum-btn",onClick:()=>m(y),children:"Eliminar Foro"})}),jsxRuntimeExports.jsx("button",{className:"toggle-comments-btn",onClick:()=>h(y._id),children:$[y._id]?"Ocultar comentarios":"Mostrar comentarios"}),$[y._id]&&jsxRuntimeExports.jsxs("div",{className:"comments-section",children:[jsxRuntimeExports.jsx("h3",{children:"Comentarios"}),((x=w[y._id])==null?void 0:x.length)===0?jsxRuntimeExports.jsx("p",{children:"No existen comentarios"}):(A=w[y._id])==null?void 0:A.map((R,C)=>jsxRuntimeExports.jsxs("div",{className:"comment-box",children:[jsxRuntimeExports.jsxs("div",{className:"comment-header",children:[jsxRuntimeExports.jsx("div",{className:"user-avatar",children:jsxRuntimeExports.jsx("img",{src:avatar,alt:"Avatar del Ayudante"})}),jsxRuntimeExports.jsx("p",{className:"comment-author",children:jsxRuntimeExports.jsx("strong",{children:R.autor})})]}),jsxRuntimeExports.jsx("p",{className:"comment-content",children:R.contenido}),jsxRuntimeExports.jsx("p",{className:"question-date",children:new Date(R.fecha).toLocaleDateString("es-MX",{day:"2-digit",month:"long",year:"numeric"})}),jsxRuntimeExports.jsx("div",{className:"button-group",children:jsxRuntimeExports.jsx("button",{className:"delete-btn",onClick:()=>_(y._id,R._id),children:"Eliminar"})})]},`${y._id}-comentario-${C}`)),u&&u._id===y._id&&jsxRuntimeExports.jsxs("div",{className:"response-box",children:[jsxRuntimeExports.jsx("div",{className:"user-avatar",children:jsxRuntimeExports.jsx("img",{src:avatar,alt:"Tu Avatar"})}),jsxRuntimeExports.jsx("textarea",{value:f,onChange:R=>a(R.target.value),placeholder:"Escribe tu respuesta..."}),jsxRuntimeExports.jsx("button",{className:"submit-btn",onClick:p,children:"Enviar respuesta"})]})]}),jsxRuntimeExports.jsx("button",{className:"reply-btn",onClick:()=>g(y),children:"Responder"})]},y._id)})})]})]})]})]})};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...i)=>i.filter((r,n,l)=>!!r&&r.trim()!==""&&l.indexOf(r)===n).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:w="",children:d,iconNode:f,...a},u)=>reactExports.createElement("svg",{ref:u,...defaultAttributes,width:r,height:r,stroke:i,strokeWidth:l?Number(n)*24/Number(r):n,className:mergeClasses("lucide",w),...a},[...f.map(([g,$])=>reactExports.createElement(g,$)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(i,r)=>{const n=reactExports.forwardRef(({className:l,...w},d)=>reactExports.createElement(Icon,{ref:d,iconNode:r,className:mergeClasses(`lucide-${toKebabCase(i)}`,l),...w}));return n.displayName=`${i}`,n};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("Pencil",__iconNode$1);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("X",__iconNode),API_URL="http://localhost:3000/api/usuarios",actualizarUsuario=async(i,r)=>{const n=await fetch(`${API_URL}/${i}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const l=await n.json();throw new Error(l.message||"No se pudo actualizar el usuario")}return n.json()},eliminarUsuario=async i=>{const r=await fetch(`${API_URL}/${i}`,{method:"DELETE"});if(!r.ok){const n=await r.json();throw new Error(n.message||"No se pudo eliminar el usuario")}return r.json()},ModalEditUsuario=({showModal:i,closeModal:r,usuario:n,onSave:l})=>{const[w,d]=reactExports.useState({username:"",email:"",password:"",rol:""});reactExports.useEffect(()=>{n&&d({username:n.username||"",email:n.email||"",password:n.password||"",rol:n.rol||"estudiante"})},[n]);const f=u=>{d({...w,[u.target.name]:u.target.value})},a=async u=>{u.preventDefault(),l(w),r()};return i?jsxRuntimeExports.jsx("div",{className:"modal-overlay",children:jsxRuntimeExports.jsxs("div",{className:"modal",children:[jsxRuntimeExports.jsx("h2",{children:"Editar Usuario"}),jsxRuntimeExports.jsxs("form",{className:"edit-usuario-modal",onSubmit:a,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{children:"Nombre"}),jsxRuntimeExports.jsx("input",{className:"input-usuario",type:"text",name:"username",value:w.username,onChange:f,required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{children:"Email"}),jsxRuntimeExports.jsx("input",{className:"input-usuario",type:"email",name:"email",value:w.email,onChange:f,required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{children:"Contrasea"}),jsxRuntimeExports.jsx("input",{className:"input-usuario",type:"password",name:"password",value:w.password,onChange:f,required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{children:"Rol"}),jsxRuntimeExports.jsxs("select",{name:"rol",value:w.rol,onChange:f,required:!0,children:[jsxRuntimeExports.jsx("option",{value:"estudiante",children:"Estudiante"}),jsxRuntimeExports.jsx("option",{value:"administrador",children:"Administrador"})]})]}),jsxRuntimeExports.jsxs("div",{className:"modal-buttons",children:[jsxRuntimeExports.jsx("button",{className:"btn-guardar-usuario",type:"submit",children:"GUARDAR"}),jsxRuntimeExports.jsx("button",{className:"btn-cancelar",type:"button",onClick:r,children:"CANCELAR"})]})]})]})}):null};function UserManagement(){const[i,r]=reactExports.useState([]),[n,l]=reactExports.useState(!0),[w,d]=reactExports.useState(null),[f,a]=reactExports.useState(!1);reactExports.useEffect(()=>{fetch("http://localhost:3000/api/usuarios").then(v=>v.json()).then(v=>{r(v),l(!1)}).catch(v=>{console.error("Error al cargar usuarios:",v),l(!1)})},[]);const u=async v=>{if(window.confirm("Ests seguro de eliminar este usuario?"))try{await eliminarUsuario(v),r(E=>E.filter(h=>h._id!==v)),alert("Usuario eliminado con xito")}catch(E){console.error("Error al eliminar usuario:",E),alert(E.message||"Error al eliminar el usuario")}},g=v=>{d(v),a(!0)},$=async v=>{try{await actualizarUsuario(w._id,v),r(i.map(S=>S._id===w._id?{...S,...v}:S)),alert("Usuario actualizado con xito")}catch(S){console.error("Error al actualizar el usuario:",S),alert(S.message||"Error al actualizar el usuario")}};return jsxRuntimeExports.jsxs("div",{className:"user-management-layout",children:[jsxRuntimeExports.jsx(SidebarMenu,{}),jsxRuntimeExports.jsxs("div",{className:"user-management-container",children:[jsxRuntimeExports.jsxs("h2",{className:"user-management-title",children:[" Gestin de usuarios ",jsxRuntimeExports.jsx("span",{className:"emoji",children:""})," "]}),jsxRuntimeExports.jsx("div",{className:"user-management-card",children:jsxRuntimeExports.jsxs("div",{className:"user-table-wrapper",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar usuarios",className:"search-input"}),n?jsxRuntimeExports.jsx("p",{className:"loading-text",children:"Cargando usuarios..."}):jsxRuntimeExports.jsxs("table",{className:"user-table",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{}),jsxRuntimeExports.jsx("th",{children:"Avatar"}),jsxRuntimeExports.jsx("th",{children:"Nombre"}),jsxRuntimeExports.jsx("th",{children:"Correo electrnico"}),jsxRuntimeExports.jsx("th",{children:"Rol"}),jsxRuntimeExports.jsx("th",{children:"Progreso"}),jsxRuntimeExports.jsx("th",{children:"Acciones"})]})}),jsxRuntimeExports.jsx("tbody",{children:i.filter(v=>v.rol==="estudiante").map(v=>jsxRuntimeExports.jsxs("tr",{className:"user-row",children:[jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("input",{type:"checkbox"})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/616/616408.png",alt:"avatar",className:"avatar"})}),jsxRuntimeExports.jsx("td",{children:v.username}),jsxRuntimeExports.jsx("td",{children:v.email}),jsxRuntimeExports.jsx("td",{children:v.rol||"Usuario comn"}),jsxRuntimeExports.jsx("td",{children:Array.isArray(v.progreso)&&v.progreso.length>0?v.progreso[v.progreso.length-1].porcentaje+"%":"0%"}),jsxRuntimeExports.jsxs("td",{className:"action-buttons",children:[jsxRuntimeExports.jsx("button",{className:"edit-button",onClick:()=>g(v),children:jsxRuntimeExports.jsx(Pencil,{size:18})}),jsxRuntimeExports.jsx("button",{className:"delete-button",onClick:()=>u(v._id),children:jsxRuntimeExports.jsx(X,{size:18})})]})]},v._id))})]})]})})]}),jsxRuntimeExports.jsx(ModalEditUsuario,{showModal:f,closeModal:()=>a(!1),usuario:w,onSave:$})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function round(i){return i+.5|0}const lim=(i,r,n)=>Math.max(Math.min(i,n),r);function p2b(i){return lim(round(i*2.55),0,255)}function n2b(i){return lim(round(i*255),0,255)}function b2n(i){return lim(round(i/2.55)/100,0,1)}function n2p(i){return lim(round(i*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=i=>hex[i&15],h2=i=>hex[(i&240)>>4]+hex[i&15],eq=i=>(i&240)>>4===(i&15),isShort=i=>eq(i.r)&&eq(i.g)&&eq(i.b)&&eq(i.a);function hexParse(i){var r=i.length,n;return i[0]==="#"&&(r===4||r===5?n={r:255&map$1[i[1]]*17,g:255&map$1[i[2]]*17,b:255&map$1[i[3]]*17,a:r===5?map$1[i[4]]*17:255}:(r===7||r===9)&&(n={r:map$1[i[1]]<<4|map$1[i[2]],g:map$1[i[3]]<<4|map$1[i[4]],b:map$1[i[5]]<<4|map$1[i[6]],a:r===9?map$1[i[7]]<<4|map$1[i[8]]:255})),n}const alpha=(i,r)=>i<255?r(i):"";function hexString(i){var r=isShort(i)?h1:h2;return i?"#"+r(i.r)+r(i.g)+r(i.b)+alpha(i.a,r):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(i,r,n){const l=r*Math.min(n,1-n),w=(d,f=(d+i/30)%12)=>n-l*Math.max(Math.min(f-3,9-f,1),-1);return[w(0),w(8),w(4)]}function hsv2rgbn(i,r,n){const l=(w,d=(w+i/60)%6)=>n-n*r*Math.max(Math.min(d,4-d,1),0);return[l(5),l(3),l(1)]}function hwb2rgbn(i,r,n){const l=hsl2rgbn(i,1,.5);let w;for(r+n>1&&(w=1/(r+n),r*=w,n*=w),w=0;w<3;w++)l[w]*=1-r-n,l[w]+=r;return l}function hueValue(i,r,n,l,w){return i===w?(r-n)/l+(r<n?6:0):r===w?(n-i)/l+2:(i-r)/l+4}function rgb2hsl(i){const n=i.r/255,l=i.g/255,w=i.b/255,d=Math.max(n,l,w),f=Math.min(n,l,w),a=(d+f)/2;let u,g,$;return d!==f&&($=d-f,g=a>.5?$/(2-d-f):$/(d+f),u=hueValue(n,l,w,$,d),u=u*60+.5),[u|0,g||0,a]}function calln(i,r,n,l){return(Array.isArray(r)?i(r[0],r[1],r[2]):i(r,n,l)).map(n2b)}function hsl2rgb(i,r,n){return calln(hsl2rgbn,i,r,n)}function hwb2rgb(i,r,n){return calln(hwb2rgbn,i,r,n)}function hsv2rgb(i,r,n){return calln(hsv2rgbn,i,r,n)}function hue(i){return(i%360+360)%360}function hueParse(i){const r=HUE_RE.exec(i);let n=255,l;if(!r)return;r[5]!==l&&(n=r[6]?p2b(+r[5]):n2b(+r[5]));const w=hue(+r[2]),d=+r[3]/100,f=+r[4]/100;return r[1]==="hwb"?l=hwb2rgb(w,d,f):r[1]==="hsv"?l=hsv2rgb(w,d,f):l=hsl2rgb(w,d,f),{r:l[0],g:l[1],b:l[2],a:n}}function rotate(i,r){var n=rgb2hsl(i);n[0]=hue(n[0]+r),n=hsl2rgb(n),i.r=n[0],i.g=n[1],i.b=n[2]}function hslString(i){if(!i)return;const r=rgb2hsl(i),n=r[0],l=n2p(r[1]),w=n2p(r[2]);return i.a<255?`hsla(${n}, ${l}%, ${w}%, ${b2n(i.a)})`:`hsl(${n}, ${l}%, ${w}%)`}const map={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const i={},r=Object.keys(names$1),n=Object.keys(map);let l,w,d,f,a;for(l=0;l<r.length;l++){for(f=a=r[l],w=0;w<n.length;w++)d=n[w],a=a.replace(d,map[d]);d=parseInt(names$1[f],16),i[a]=[d>>16&255,d>>8&255,d&255]}return i}let names;function nameParse(i){names||(names=unpack(),names.transparent=[0,0,0,0]);const r=names[i.toLowerCase()];return r&&{r:r[0],g:r[1],b:r[2],a:r.length===4?r[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(i){const r=RGB_RE.exec(i);let n=255,l,w,d;if(r){if(r[7]!==l){const f=+r[7];n=r[8]?p2b(f):lim(f*255,0,255)}return l=+r[1],w=+r[3],d=+r[5],l=255&(r[2]?p2b(l):lim(l,0,255)),w=255&(r[4]?p2b(w):lim(w,0,255)),d=255&(r[6]?p2b(d):lim(d,0,255)),{r:l,g:w,b:d,a:n}}}function rgbString(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${b2n(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const to=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,from=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function interpolate$1(i,r,n){const l=from(b2n(i.r)),w=from(b2n(i.g)),d=from(b2n(i.b));return{r:n2b(to(l+n*(from(b2n(r.r))-l))),g:n2b(to(w+n*(from(b2n(r.g))-w))),b:n2b(to(d+n*(from(b2n(r.b))-d))),a:i.a+n*(r.a-i.a)}}function modHSL(i,r,n){if(i){let l=rgb2hsl(i);l[r]=Math.max(0,Math.min(l[r]+l[r]*n,r===0?360:1)),l=hsl2rgb(l),i.r=l[0],i.g=l[1],i.b=l[2]}}function clone$1(i,r){return i&&Object.assign(r||{},i)}function fromObject(i){var r={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(r={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(r.a=n2b(i[3]))):(r=clone$1(i,{r:0,g:0,b:0,a:1}),r.a=n2b(r.a)),r}function functionParse(i){return i.charAt(0)==="r"?rgbParse(i):hueParse(i)}class Color{constructor(r){if(r instanceof Color)return r;const n=typeof r;let l;n==="object"?l=fromObject(r):n==="string"&&(l=hexParse(r)||nameParse(r)||functionParse(r)),this._rgb=l,this._valid=!!l}get valid(){return this._valid}get rgb(){var r=clone$1(this._rgb);return r&&(r.a=b2n(r.a)),r}set rgb(r){this._rgb=fromObject(r)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(r,n){if(r){const l=this.rgb,w=r.rgb;let d;const f=n===d?.5:n,a=2*f-1,u=l.a-w.a,g=((a*u===-1?a:(a+u)/(1+a*u))+1)/2;d=1-g,l.r=255&g*l.r+d*w.r+.5,l.g=255&g*l.g+d*w.g+.5,l.b=255&g*l.b+d*w.b+.5,l.a=f*l.a+(1-f)*w.a,this.rgb=l}return this}interpolate(r,n){return r&&(this._rgb=interpolate$1(this._rgb,r._rgb,n)),this}clone(){return new Color(this.rgb)}alpha(r){return this._rgb.a=n2b(r),this}clearer(r){const n=this._rgb;return n.a*=1-r,this}greyscale(){const r=this._rgb,n=round(r.r*.3+r.g*.59+r.b*.11);return r.r=r.g=r.b=n,this}opaquer(r){const n=this._rgb;return n.a*=1+r,this}negate(){const r=this._rgb;return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,this}lighten(r){return modHSL(this._rgb,2,r),this}darken(r){return modHSL(this._rgb,2,-r),this}saturate(r){return modHSL(this._rgb,1,r),this}desaturate(r){return modHSL(this._rgb,1,-r),this}rotate(r){return rotate(this._rgb,r),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function noop(){}const uid=(()=>{let i=0;return()=>i++})();function isNullOrUndef(i){return i==null}function isArray(i){if(Array.isArray&&Array.isArray(i))return!0;const r=Object.prototype.toString.call(i);return r.slice(0,7)==="[object"&&r.slice(-6)==="Array]"}function isObject(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function isNumberFinite(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function finiteOrDefault(i,r){return isNumberFinite(i)?i:r}function valueOrDefault(i,r){return typeof i>"u"?r:i}const toDimension=(i,r)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*r:+i;function callback(i,r,n){if(i&&typeof i.call=="function")return i.apply(n,r)}function each(i,r,n,l){let w,d,f;if(isArray(i))for(d=i.length,w=0;w<d;w++)r.call(n,i[w],w);else if(isObject(i))for(f=Object.keys(i),d=f.length,w=0;w<d;w++)r.call(n,i[f[w]],f[w])}function _elementsEqual(i,r){let n,l,w,d;if(!i||!r||i.length!==r.length)return!1;for(n=0,l=i.length;n<l;++n)if(w=i[n],d=r[n],w.datasetIndex!==d.datasetIndex||w.index!==d.index)return!1;return!0}function clone(i){if(isArray(i))return i.map(clone);if(isObject(i)){const r=Object.create(null),n=Object.keys(i),l=n.length;let w=0;for(;w<l;++w)r[n[w]]=clone(i[n[w]]);return r}return i}function isValidKey(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function _merger(i,r,n,l){if(!isValidKey(i))return;const w=r[i],d=n[i];isObject(w)&&isObject(d)?merge(w,d,l):r[i]=clone(d)}function merge(i,r,n){const l=isArray(r)?r:[r],w=l.length;if(!isObject(i))return i;n=n||{};const d=n.merger||_merger;let f;for(let a=0;a<w;++a){if(f=l[a],!isObject(f))continue;const u=Object.keys(f);for(let g=0,$=u.length;g<$;++g)d(u[g],i,f,n)}return i}function mergeIf(i,r){return merge(i,r,{merger:_mergerIf})}function _mergerIf(i,r,n){if(!isValidKey(i))return;const l=r[i],w=n[i];isObject(l)&&isObject(w)?mergeIf(l,w):Object.prototype.hasOwnProperty.call(r,i)||(r[i]=clone(w))}const keyResolvers={"":i=>i,x:i=>i.x,y:i=>i.y};function _splitKey(i){const r=i.split("."),n=[];let l="";for(const w of r)l+=w,l.endsWith("\\")?l=l.slice(0,-1)+".":(n.push(l),l="");return n}function _getKeyResolver(i){const r=_splitKey(i);return n=>{for(const l of r){if(l==="")break;n=n&&n[l]}return n}}function resolveObjectKey(i,r){return(keyResolvers[r]||(keyResolvers[r]=_getKeyResolver(r)))(i)}function _capitalize(i){return i.charAt(0).toUpperCase()+i.slice(1)}const defined=i=>typeof i<"u",isFunction=i=>typeof i=="function",setsEqual=(i,r)=>{if(i.size!==r.size)return!1;for(const n of i)if(!r.has(n))return!1;return!0};function _isClickEvent(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function almostEquals(i,r,n){return Math.abs(i-r)<n}function niceNum(i){const r=Math.round(i);i=almostEquals(i,r,i/1e3)?r:i;const n=Math.pow(10,Math.floor(log10(i))),l=i/n;return(l<=1?1:l<=2?2:l<=5?5:10)*n}function _factorize(i){const r=[],n=Math.sqrt(i);let l;for(l=1;l<n;l++)i%l===0&&(r.push(l),r.push(i/l));return n===(n|0)&&r.push(n),r.sort((w,d)=>w-d).pop(),r}function isNonPrimitive(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function isNumber(i){return!isNonPrimitive(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function almostWhole(i,r){const n=Math.round(i);return n-r<=i&&n+r>=i}function _setMinAndMaxByKey(i,r,n){let l,w,d;for(l=0,w=i.length;l<w;l++)d=i[l][n],isNaN(d)||(r.min=Math.min(r.min,d),r.max=Math.max(r.max,d))}function toRadians(i){return i*(PI/180)}function toDegrees(i){return i*(180/PI)}function _decimalPlaces(i){if(!isNumberFinite(i))return;let r=1,n=0;for(;Math.round(i*r)/r!==i;)r*=10,n++;return n}function getAngleFromPoint(i,r){const n=r.x-i.x,l=r.y-i.y,w=Math.sqrt(n*n+l*l);let d=Math.atan2(l,n);return d<-.5*PI&&(d+=TAU),{angle:d,distance:w}}function distanceBetweenPoints(i,r){return Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2))}function _angleDiff(i,r){return(i-r+PITAU)%TAU-PI}function _normalizeAngle(i){return(i%TAU+TAU)%TAU}function _angleBetween(i,r,n,l){const w=_normalizeAngle(i),d=_normalizeAngle(r),f=_normalizeAngle(n),a=_normalizeAngle(d-w),u=_normalizeAngle(f-w),g=_normalizeAngle(w-d),$=_normalizeAngle(w-f);return w===d||w===f||l&&d===f||a>u&&g<$}function _limitValue(i,r,n){return Math.max(r,Math.min(n,i))}function _int16Range(i){return _limitValue(i,-32768,32767)}function _isBetween(i,r,n,l=1e-6){return i>=Math.min(r,n)-l&&i<=Math.max(r,n)+l}function _lookup(i,r,n){n=n||(f=>i[f]<r);let l=i.length-1,w=0,d;for(;l-w>1;)d=w+l>>1,n(d)?w=d:l=d;return{lo:w,hi:l}}const _lookupByKey=(i,r,n,l)=>_lookup(i,n,l?w=>{const d=i[w][r];return d<n||d===n&&i[w+1][r]===n}:w=>i[w][r]<n),_rlookupByKey=(i,r,n)=>_lookup(i,n,l=>i[l][r]>=n);function _filterBetween(i,r,n){let l=0,w=i.length;for(;l<w&&i[l]<r;)l++;for(;w>l&&i[w-1]>n;)w--;return l>0||w<i.length?i.slice(l,w):i}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(i,r){if(i._chartjs){i._chartjs.listeners.push(r);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),arrayEvents.forEach(n=>{const l="_onData"+_capitalize(n),w=i[n];Object.defineProperty(i,n,{configurable:!0,enumerable:!1,value(...d){const f=w.apply(this,d);return i._chartjs.listeners.forEach(a=>{typeof a[l]=="function"&&a[l](...d)}),f}})})}function unlistenArrayEvents(i,r){const n=i._chartjs;if(!n)return;const l=n.listeners,w=l.indexOf(r);w!==-1&&l.splice(w,1),!(l.length>0)&&(arrayEvents.forEach(d=>{delete i[d]}),delete i._chartjs)}function _arrayUnique(i){const r=new Set(i);return r.size===i.length?i:Array.from(r)}const requestAnimFrame=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function throttled(i,r){let n=[],l=!1;return function(...w){n=w,l||(l=!0,requestAnimFrame.call(window,()=>{l=!1,i.apply(r,n)}))}}function debounce(i,r){let n;return function(...l){return r?(clearTimeout(n),n=setTimeout(i,r,l)):i.apply(this,l),r}}const _toLeftRightCenter=i=>i==="start"?"left":i==="end"?"right":"center",_alignStartEnd=(i,r,n)=>i==="start"?r:i==="end"?n:(r+n)/2,_textX=(i,r,n,l)=>i===(l?"left":"right")?n:i==="center"?(r+n)/2:r,atEdge=i=>i===0||i===1,elasticIn=(i,r,n)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-r)*TAU/n)),elasticOut=(i,r,n)=>Math.pow(2,-10*i)*Math.sin((i-r)*TAU/n)+1,effects={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*HALF_PI)+1,easeOutSine:i=>Math.sin(i*HALF_PI),easeInOutSine:i=>-.5*(Math.cos(PI*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>atEdge(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>atEdge(i)?i:elasticIn(i,.075,.3),easeOutElastic:i=>atEdge(i)?i:elasticOut(i,.075,.3),easeInOutElastic(i){return atEdge(i)?i:i<.5?.5*elasticIn(i*2,.1125,.45):.5+.5*elasticOut(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let r=1.70158;return(i/=.5)<1?.5*(i*i*(((r*=1.525)+1)*i-r)):.5*((i-=2)*i*(((r*=1.525)+1)*i+r)+2)},easeInBounce:i=>1-effects.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?effects.easeInBounce(i*2)*.5:effects.easeOutBounce(i*2-1)*.5+.5};function isPatternOrGradient(i){if(i&&typeof i=="object"){const r=i.toString();return r==="[object CanvasPattern]"||r==="[object CanvasGradient]"}return!1}function color(i){return isPatternOrGradient(i)?i:new Color(i)}function getHoverColor(i){return isPatternOrGradient(i)?i:new Color(i).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];function applyAnimationsDefaults(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:r=>r!=="onProgress"&&r!=="onComplete"&&r!=="fn"}),i.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:r=>r|0}}}})}function applyLayoutsDefaults(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const intlCache=new Map;function getNumberFormat(i,r){r=r||{};const n=i+JSON.stringify(r);let l=intlCache.get(n);return l||(l=new Intl.NumberFormat(i,r),intlCache.set(n,l)),l}function formatNumber(i,r,n){return getNumberFormat(r,n).format(i)}const formatters={values(i){return isArray(i)?i:""+i},numeric(i,r,n){if(i===0)return"0";const l=this.chart.options.locale;let w,d=i;if(n.length>1){const g=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(g<1e-4||g>1e15)&&(w="scientific"),d=calculateDelta(i,n)}const f=log10(Math.abs(d)),a=isNaN(f)?1:Math.max(Math.min(-1*Math.floor(f),20),0),u={notation:w,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(u,this.options.ticks.format),formatNumber(i,l,u)}};function calculateDelta(i,r){let n=r.length>3?r[2].value-r[1].value:r[1].value-r[0].value;return Math.abs(n)>=1&&i!==Math.floor(i)&&(n=i-Math.floor(i)),n}var Ticks={formatters};function applyScaleDefaults(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(r,n)=>n.lineWidth,tickColor:(r,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:r=>!r.startsWith("before")&&!r.startsWith("after")&&r!=="callback"&&r!=="parser",_indexable:r=>r!=="borderDash"&&r!=="tickBorderDash"&&r!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:r=>r!=="backdropPadding"&&r!=="callback",_indexable:r=>r!=="backdropPadding"})}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(i,r){if(!r)return i;const n=r.split(".");for(let l=0,w=n.length;l<w;++l){const d=n[l];i=i[d]||(i[d]=Object.create(null))}return i}function set(i,r,n){return typeof r=="string"?merge(getScope$1(i,r),n):merge(getScope$1(i,""),r)}class Defaults{constructor(r,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=l=>l.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(l,w)=>getHoverColor(w.backgroundColor),this.hoverBorderColor=(l,w)=>getHoverColor(w.borderColor),this.hoverColor=(l,w)=>getHoverColor(w.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(r),this.apply(n)}set(r,n){return set(this,r,n)}get(r){return getScope$1(this,r)}describe(r,n){return set(descriptors,r,n)}override(r,n){return set(overrides,r,n)}route(r,n,l,w){const d=getScope$1(this,r),f=getScope$1(this,l),a="_"+n;Object.defineProperties(d,{[a]:{value:d[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[a],g=f[w];return isObject(u)?Object.assign({},g,u):valueOrDefault(u,g)},set(u){this[a]=u}}})}apply(r){r.forEach(n=>n(this))}}var defaults=new Defaults({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[applyAnimationsDefaults,applyLayoutsDefaults,applyScaleDefaults]);function toFontString(i){return!i||isNullOrUndef(i.size)||isNullOrUndef(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function _measureText(i,r,n,l,w){let d=r[w];return d||(d=r[w]=i.measureText(w).width,n.push(w)),d>l&&(l=d),l}function _alignPixel(i,r,n){const l=i.currentDevicePixelRatio,w=n!==0?Math.max(n/2,.5):0;return Math.round((r-w)*l)/l+w}function clearCanvas(i,r){!r&&!i||(r=r||i.getContext("2d"),r.save(),r.resetTransform(),r.clearRect(0,0,i.width,i.height),r.restore())}function drawPoint(i,r,n,l){drawPointLegend(i,r,n,l,null)}function drawPointLegend(i,r,n,l,w){let d,f,a,u,g,$,v,S;const E=r.pointStyle,h=r.rotation,b=r.radius;let m=(h||0)*RAD_PER_DEG;if(E&&typeof E=="object"&&(d=E.toString(),d==="[object HTMLImageElement]"||d==="[object HTMLCanvasElement]")){i.save(),i.translate(n,l),i.rotate(m),i.drawImage(E,-E.width/2,-E.height/2,E.width,E.height),i.restore();return}if(!(isNaN(b)||b<=0)){switch(i.beginPath(),E){default:w?i.ellipse(n,l,w/2,b,0,0,TAU):i.arc(n,l,b,0,TAU),i.closePath();break;case"triangle":$=w?w/2:b,i.moveTo(n+Math.sin(m)*$,l-Math.cos(m)*b),m+=TWO_THIRDS_PI,i.lineTo(n+Math.sin(m)*$,l-Math.cos(m)*b),m+=TWO_THIRDS_PI,i.lineTo(n+Math.sin(m)*$,l-Math.cos(m)*b),i.closePath();break;case"rectRounded":g=b*.516,u=b-g,f=Math.cos(m+QUARTER_PI)*u,v=Math.cos(m+QUARTER_PI)*(w?w/2-g:u),a=Math.sin(m+QUARTER_PI)*u,S=Math.sin(m+QUARTER_PI)*(w?w/2-g:u),i.arc(n-v,l-a,g,m-PI,m-HALF_PI),i.arc(n+S,l-f,g,m-HALF_PI,m),i.arc(n+v,l+a,g,m,m+HALF_PI),i.arc(n-S,l+f,g,m+HALF_PI,m+PI),i.closePath();break;case"rect":if(!h){u=Math.SQRT1_2*b,$=w?w/2:u,i.rect(n-$,l-u,2*$,2*u);break}m+=QUARTER_PI;case"rectRot":v=Math.cos(m)*(w?w/2:b),f=Math.cos(m)*b,a=Math.sin(m)*b,S=Math.sin(m)*(w?w/2:b),i.moveTo(n-v,l-a),i.lineTo(n+S,l-f),i.lineTo(n+v,l+a),i.lineTo(n-S,l+f),i.closePath();break;case"crossRot":m+=QUARTER_PI;case"cross":v=Math.cos(m)*(w?w/2:b),f=Math.cos(m)*b,a=Math.sin(m)*b,S=Math.sin(m)*(w?w/2:b),i.moveTo(n-v,l-a),i.lineTo(n+v,l+a),i.moveTo(n+S,l-f),i.lineTo(n-S,l+f);break;case"star":v=Math.cos(m)*(w?w/2:b),f=Math.cos(m)*b,a=Math.sin(m)*b,S=Math.sin(m)*(w?w/2:b),i.moveTo(n-v,l-a),i.lineTo(n+v,l+a),i.moveTo(n+S,l-f),i.lineTo(n-S,l+f),m+=QUARTER_PI,v=Math.cos(m)*(w?w/2:b),f=Math.cos(m)*b,a=Math.sin(m)*b,S=Math.sin(m)*(w?w/2:b),i.moveTo(n-v,l-a),i.lineTo(n+v,l+a),i.moveTo(n+S,l-f),i.lineTo(n-S,l+f);break;case"line":f=w?w/2:Math.cos(m)*b,a=Math.sin(m)*b,i.moveTo(n-f,l-a),i.lineTo(n+f,l+a);break;case"dash":i.moveTo(n,l),i.lineTo(n+Math.cos(m)*(w?w/2:b),l+Math.sin(m)*b);break;case!1:i.closePath();break}i.fill(),r.borderWidth>0&&i.stroke()}}function _isPointInArea(i,r,n){return n=n||.5,!r||i&&i.x>r.left-n&&i.x<r.right+n&&i.y>r.top-n&&i.y<r.bottom+n}function clipArea(i,r){i.save(),i.beginPath(),i.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),i.clip()}function unclipArea(i){i.restore()}function _steppedLineTo(i,r,n,l,w){if(!r)return i.lineTo(n.x,n.y);if(w==="middle"){const d=(r.x+n.x)/2;i.lineTo(d,r.y),i.lineTo(d,n.y)}else w==="after"!=!!l?i.lineTo(r.x,n.y):i.lineTo(n.x,r.y);i.lineTo(n.x,n.y)}function _bezierCurveTo(i,r,n,l){if(!r)return i.lineTo(n.x,n.y);i.bezierCurveTo(l?r.cp1x:r.cp2x,l?r.cp1y:r.cp2y,l?n.cp2x:n.cp1x,l?n.cp2y:n.cp1y,n.x,n.y)}function setRenderOpts(i,r){r.translation&&i.translate(r.translation[0],r.translation[1]),isNullOrUndef(r.rotation)||i.rotate(r.rotation),r.color&&(i.fillStyle=r.color),r.textAlign&&(i.textAlign=r.textAlign),r.textBaseline&&(i.textBaseline=r.textBaseline)}function decorateText(i,r,n,l,w){if(w.strikethrough||w.underline){const d=i.measureText(l),f=r-d.actualBoundingBoxLeft,a=r+d.actualBoundingBoxRight,u=n-d.actualBoundingBoxAscent,g=n+d.actualBoundingBoxDescent,$=w.strikethrough?(u+g)/2:g;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=w.decorationWidth||2,i.moveTo(f,$),i.lineTo(a,$),i.stroke()}}function drawBackdrop(i,r){const n=i.fillStyle;i.fillStyle=r.color,i.fillRect(r.left,r.top,r.width,r.height),i.fillStyle=n}function renderText(i,r,n,l,w,d={}){const f=isArray(r)?r:[r],a=d.strokeWidth>0&&d.strokeColor!=="";let u,g;for(i.save(),i.font=w.string,setRenderOpts(i,d),u=0;u<f.length;++u)g=f[u],d.backdrop&&drawBackdrop(i,d.backdrop),a&&(d.strokeColor&&(i.strokeStyle=d.strokeColor),isNullOrUndef(d.strokeWidth)||(i.lineWidth=d.strokeWidth),i.strokeText(g,n,l,d.maxWidth)),i.fillText(g,n,l,d.maxWidth),decorateText(i,n,l,g,d),l+=Number(w.lineHeight);i.restore()}function addRoundedRectPath(i,r){const{x:n,y:l,w,h:d,radius:f}=r;i.arc(n+f.topLeft,l+f.topLeft,f.topLeft,1.5*PI,PI,!0),i.lineTo(n,l+d-f.bottomLeft),i.arc(n+f.bottomLeft,l+d-f.bottomLeft,f.bottomLeft,PI,HALF_PI,!0),i.lineTo(n+w-f.bottomRight,l+d),i.arc(n+w-f.bottomRight,l+d-f.bottomRight,f.bottomRight,HALF_PI,0,!0),i.lineTo(n+w,l+f.topRight),i.arc(n+w-f.topRight,l+f.topRight,f.topRight,0,-HALF_PI,!0),i.lineTo(n+f.topLeft,l)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(i,r){const n=(""+i).match(LINE_HEIGHT);if(!n||n[1]==="normal")return r*1.2;switch(i=+n[2],n[3]){case"px":return i;case"%":i/=100;break}return r*i}const numberOrZero=i=>+i||0;function _readValueToProps(i,r){const n={},l=isObject(r),w=l?Object.keys(r):r,d=isObject(i)?l?f=>valueOrDefault(i[f],i[r[f]]):f=>i[f]:()=>i;for(const f of w)n[f]=numberOrZero(d(f));return n}function toTRBL(i){return _readValueToProps(i,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(i){return _readValueToProps(i,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(i){const r=toTRBL(i);return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function toFont(i,r){i=i||{},r=r||defaults.font;let n=valueOrDefault(i.size,r.size);typeof n=="string"&&(n=parseInt(n,10));let l=valueOrDefault(i.style,r.style);l&&!(""+l).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+l+'"'),l=void 0);const w={family:valueOrDefault(i.family,r.family),lineHeight:toLineHeight(valueOrDefault(i.lineHeight,r.lineHeight),n),size:n,style:l,weight:valueOrDefault(i.weight,r.weight),string:""};return w.string=toFontString(w),w}function resolve(i,r,n,l){let w,d,f;for(w=0,d=i.length;w<d;++w)if(f=i[w],f!==void 0&&f!==void 0)return f}function _addGrace(i,r,n){const{min:l,max:w}=i,d=toDimension(r,(w-l)/2),f=(a,u)=>n&&a===0?0:a+u;return{min:f(l,-Math.abs(d)),max:f(w,d)}}function createContext(i,r){return Object.assign(Object.create(i),r)}function _createResolver(i,r=[""],n,l,w=()=>i[0]){const d=n||i;typeof l>"u"&&(l=_resolve("_fallback",i));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:d,_fallback:l,_getTarget:w,override:a=>_createResolver([a,...i],r,d,l)};return new Proxy(f,{deleteProperty(a,u){return delete a[u],delete a._keys,delete i[0][u],!0},get(a,u){return _cached(a,u,()=>_resolveWithPrefixes(u,r,i,a))},getOwnPropertyDescriptor(a,u){return Reflect.getOwnPropertyDescriptor(a._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,u){return getKeysFromAllScopes(a).includes(u)},ownKeys(a){return getKeysFromAllScopes(a)},set(a,u,g){const $=a._storage||(a._storage=w());return a[u]=$[u]=g,delete a._keys,!0}})}function _attachContext(i,r,n,l){const w={_cacheable:!1,_proxy:i,_context:r,_subProxy:n,_stack:new Set,_descriptors:_descriptors(i,l),setContext:d=>_attachContext(i,d,n,l),override:d=>_attachContext(i.override(d),r,n,l)};return new Proxy(w,{deleteProperty(d,f){return delete d[f],delete i[f],!0},get(d,f,a){return _cached(d,f,()=>_resolveWithContext(d,f,a))},getOwnPropertyDescriptor(d,f){return d._descriptors.allKeys?Reflect.has(i,f)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,f)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(d,f){return Reflect.has(i,f)},ownKeys(){return Reflect.ownKeys(i)},set(d,f,a){return i[f]=a,delete d[f],!0}})}function _descriptors(i,r={scriptable:!0,indexable:!0}){const{_scriptable:n=r.scriptable,_indexable:l=r.indexable,_allKeys:w=r.allKeys}=i;return{allKeys:w,scriptable:n,indexable:l,isScriptable:isFunction(n)?n:()=>n,isIndexable:isFunction(l)?l:()=>l}}const readKey=(i,r)=>i?i+_capitalize(r):r,needsSubResolver=(i,r)=>isObject(r)&&i!=="adapters"&&(Object.getPrototypeOf(r)===null||r.constructor===Object);function _cached(i,r,n){if(Object.prototype.hasOwnProperty.call(i,r)||r==="constructor")return i[r];const l=n();return i[r]=l,l}function _resolveWithContext(i,r,n){const{_proxy:l,_context:w,_subProxy:d,_descriptors:f}=i;let a=l[r];return isFunction(a)&&f.isScriptable(r)&&(a=_resolveScriptable(r,a,i,n)),isArray(a)&&a.length&&(a=_resolveArray(r,a,i,f.isIndexable)),needsSubResolver(r,a)&&(a=_attachContext(a,w,d&&d[r],f)),a}function _resolveScriptable(i,r,n,l){const{_proxy:w,_context:d,_subProxy:f,_stack:a}=n;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let u=r(d,f||l);return a.delete(i),needsSubResolver(i,u)&&(u=createSubResolver(w._scopes,w,i,u)),u}function _resolveArray(i,r,n,l){const{_proxy:w,_context:d,_subProxy:f,_descriptors:a}=n;if(typeof d.index<"u"&&l(i))return r[d.index%r.length];if(isObject(r[0])){const u=r,g=w._scopes.filter($=>$!==u);r=[];for(const $ of u){const v=createSubResolver(g,w,i,$);r.push(_attachContext(v,d,f&&f[i],a))}}return r}function resolveFallback(i,r,n){return isFunction(i)?i(r,n):i}const getScope=(i,r)=>i===!0?r:typeof i=="string"?resolveObjectKey(r,i):void 0;function addScopes(i,r,n,l,w){for(const d of r){const f=getScope(n,d);if(f){i.add(f);const a=resolveFallback(f._fallback,n,w);if(typeof a<"u"&&a!==n&&a!==l)return a}else if(f===!1&&typeof l<"u"&&n!==l)return null}return!1}function createSubResolver(i,r,n,l){const w=r._rootScopes,d=resolveFallback(r._fallback,n,l),f=[...i,...w],a=new Set;a.add(l);let u=addScopesFromKey(a,f,n,d||n,l);return u===null||typeof d<"u"&&d!==n&&(u=addScopesFromKey(a,f,d,u,l),u===null)?!1:_createResolver(Array.from(a),[""],w,d,()=>subGetTarget(r,n,l))}function addScopesFromKey(i,r,n,l,w){for(;n;)n=addScopes(i,r,n,l,w);return n}function subGetTarget(i,r,n){const l=i._getTarget();r in l||(l[r]={});const w=l[r];return isArray(w)&&isObject(n)?n:w||{}}function _resolveWithPrefixes(i,r,n,l){let w;for(const d of r)if(w=_resolve(readKey(d,i),n),typeof w<"u")return needsSubResolver(i,w)?createSubResolver(n,l,i,w):w}function _resolve(i,r){for(const n of r){if(!n)continue;const l=n[i];if(typeof l<"u")return l}}function getKeysFromAllScopes(i){let r=i._keys;return r||(r=i._keys=resolveKeysFromAllScopes(i._scopes)),r}function resolveKeysFromAllScopes(i){const r=new Set;for(const n of i)for(const l of Object.keys(n).filter(w=>!w.startsWith("_")))r.add(l);return Array.from(r)}const EPSILON=Number.EPSILON||1e-14,getPoint=(i,r)=>r<i.length&&!i[r].skip&&i[r],getValueAxis=i=>i==="x"?"y":"x";function splineCurve(i,r,n,l){const w=i.skip?r:i,d=r,f=n.skip?r:n,a=distanceBetweenPoints(d,w),u=distanceBetweenPoints(f,d);let g=a/(a+u),$=u/(a+u);g=isNaN(g)?0:g,$=isNaN($)?0:$;const v=l*g,S=l*$;return{previous:{x:d.x-v*(f.x-w.x),y:d.y-v*(f.y-w.y)},next:{x:d.x+S*(f.x-w.x),y:d.y+S*(f.y-w.y)}}}function monotoneAdjust(i,r,n){const l=i.length;let w,d,f,a,u,g=getPoint(i,0);for(let $=0;$<l-1;++$)if(u=g,g=getPoint(i,$+1),!(!u||!g)){if(almostEquals(r[$],0,EPSILON)){n[$]=n[$+1]=0;continue}w=n[$]/r[$],d=n[$+1]/r[$],a=Math.pow(w,2)+Math.pow(d,2),!(a<=9)&&(f=3/Math.sqrt(a),n[$]=w*f*r[$],n[$+1]=d*f*r[$])}}function monotoneCompute(i,r,n="x"){const l=getValueAxis(n),w=i.length;let d,f,a,u=getPoint(i,0);for(let g=0;g<w;++g){if(f=a,a=u,u=getPoint(i,g+1),!a)continue;const $=a[n],v=a[l];f&&(d=($-f[n])/3,a[`cp1${n}`]=$-d,a[`cp1${l}`]=v-d*r[g]),u&&(d=(u[n]-$)/3,a[`cp2${n}`]=$+d,a[`cp2${l}`]=v+d*r[g])}}function splineCurveMonotone(i,r="x"){const n=getValueAxis(r),l=i.length,w=Array(l).fill(0),d=Array(l);let f,a,u,g=getPoint(i,0);for(f=0;f<l;++f)if(a=u,u=g,g=getPoint(i,f+1),!!u){if(g){const $=g[r]-u[r];w[f]=$!==0?(g[n]-u[n])/$:0}d[f]=a?g?sign(w[f-1])!==sign(w[f])?0:(w[f-1]+w[f])/2:w[f-1]:w[f]}monotoneAdjust(i,w,d),monotoneCompute(i,d,r)}function capControlPoint(i,r,n){return Math.max(Math.min(i,n),r)}function capBezierPoints(i,r){let n,l,w,d,f,a=_isPointInArea(i[0],r);for(n=0,l=i.length;n<l;++n)f=d,d=a,a=n<l-1&&_isPointInArea(i[n+1],r),d&&(w=i[n],f&&(w.cp1x=capControlPoint(w.cp1x,r.left,r.right),w.cp1y=capControlPoint(w.cp1y,r.top,r.bottom)),a&&(w.cp2x=capControlPoint(w.cp2x,r.left,r.right),w.cp2y=capControlPoint(w.cp2y,r.top,r.bottom)))}function _updateBezierControlPoints(i,r,n,l,w){let d,f,a,u;if(r.spanGaps&&(i=i.filter(g=>!g.skip)),r.cubicInterpolationMode==="monotone")splineCurveMonotone(i,w);else{let g=l?i[i.length-1]:i[0];for(d=0,f=i.length;d<f;++d)a=i[d],u=splineCurve(g,a,i[Math.min(d+1,f-(l?0:1))%f],r.tension),a.cp1x=u.previous.x,a.cp1y=u.previous.y,a.cp2x=u.next.x,a.cp2y=u.next.y,g=a}r.capBezierPoints&&capBezierPoints(i,n)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(i){let r=i.parentNode;return r&&r.toString()==="[object ShadowRoot]"&&(r=r.host),r}function parseMaxStyle(i,r,n){let l;return typeof i=="string"?(l=parseInt(i,10),i.indexOf("%")!==-1&&(l=l/100*r.parentNode[n])):l=i,l}const getComputedStyle=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function getStyle(i,r){return getComputedStyle(i).getPropertyValue(r)}const positions=["top","right","bottom","left"];function getPositionedStyle(i,r,n){const l={};n=n?"-"+n:"";for(let w=0;w<4;w++){const d=positions[w];l[d]=parseFloat(i[r+"-"+d+n])||0}return l.width=l.left+l.right,l.height=l.top+l.bottom,l}const useOffsetPos=(i,r,n)=>(i>0||r>0)&&(!n||!n.shadowRoot);function getCanvasPosition(i,r){const n=i.touches,l=n&&n.length?n[0]:i,{offsetX:w,offsetY:d}=l;let f=!1,a,u;if(useOffsetPos(w,d,i.target))a=w,u=d;else{const g=r.getBoundingClientRect();a=l.clientX-g.left,u=l.clientY-g.top,f=!0}return{x:a,y:u,box:f}}function getRelativePosition(i,r){if("native"in i)return i;const{canvas:n,currentDevicePixelRatio:l}=r,w=getComputedStyle(n),d=w.boxSizing==="border-box",f=getPositionedStyle(w,"padding"),a=getPositionedStyle(w,"border","width"),{x:u,y:g,box:$}=getCanvasPosition(i,n),v=f.left+($&&a.left),S=f.top+($&&a.top);let{width:E,height:h}=r;return d&&(E-=f.width+a.width,h-=f.height+a.height),{x:Math.round((u-v)/E*n.width/l),y:Math.round((g-S)/h*n.height/l)}}function getContainerSize(i,r,n){let l,w;if(r===void 0||n===void 0){const d=i&&_getParentNode(i);if(!d)r=i.clientWidth,n=i.clientHeight;else{const f=d.getBoundingClientRect(),a=getComputedStyle(d),u=getPositionedStyle(a,"border","width"),g=getPositionedStyle(a,"padding");r=f.width-g.width-u.width,n=f.height-g.height-u.height,l=parseMaxStyle(a.maxWidth,d,"clientWidth"),w=parseMaxStyle(a.maxHeight,d,"clientHeight")}}return{width:r,height:n,maxWidth:l||INFINITY,maxHeight:w||INFINITY}}const round1=i=>Math.round(i*10)/10;function getMaximumSize(i,r,n,l){const w=getComputedStyle(i),d=getPositionedStyle(w,"margin"),f=parseMaxStyle(w.maxWidth,i,"clientWidth")||INFINITY,a=parseMaxStyle(w.maxHeight,i,"clientHeight")||INFINITY,u=getContainerSize(i,r,n);let{width:g,height:$}=u;if(w.boxSizing==="content-box"){const S=getPositionedStyle(w,"border","width"),E=getPositionedStyle(w,"padding");g-=E.width+S.width,$-=E.height+S.height}return g=Math.max(0,g-d.width),$=Math.max(0,l?g/l:$-d.height),g=round1(Math.min(g,f,u.maxWidth)),$=round1(Math.min($,a,u.maxHeight)),g&&!$&&($=round1(g/2)),(r!==void 0||n!==void 0)&&l&&u.height&&$>u.height&&($=u.height,g=round1(Math.floor($*l))),{width:g,height:$}}function retinaScale(i,r,n){const l=r||1,w=Math.floor(i.height*l),d=Math.floor(i.width*l);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const f=i.canvas;return f.style&&(n||!f.style.height&&!f.style.width)&&(f.style.height=`${i.height}px`,f.style.width=`${i.width}px`),i.currentDevicePixelRatio!==l||f.height!==w||f.width!==d?(i.currentDevicePixelRatio=l,f.height=w,f.width=d,i.ctx.setTransform(l,0,0,l,0,0),!0):!1}const supportsEventListenerOptions=function(){let i=!1;try{const r={get passive(){return i=!0,!1}};_isDomSupported()&&(window.addEventListener("test",null,r),window.removeEventListener("test",null,r))}catch{}return i}();function readUsedSize(i,r){const n=getStyle(i,r),l=n&&n.match(/^(\d+)(\.\d+)?px$/);return l?+l[1]:void 0}function _pointInLine(i,r,n,l){return{x:i.x+n*(r.x-i.x),y:i.y+n*(r.y-i.y)}}function _steppedInterpolation(i,r,n,l){return{x:i.x+n*(r.x-i.x),y:l==="middle"?n<.5?i.y:r.y:l==="after"?n<1?i.y:r.y:n>0?r.y:i.y}}function _bezierInterpolation(i,r,n,l){const w={x:i.cp2x,y:i.cp2y},d={x:r.cp1x,y:r.cp1y},f=_pointInLine(i,w,n),a=_pointInLine(w,d,n),u=_pointInLine(d,r,n),g=_pointInLine(f,a,n),$=_pointInLine(a,u,n);return _pointInLine(g,$,n)}const getRightToLeftAdapter=function(i,r){return{x(n){return i+i+r-n},setWidth(n){r=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,l){return n-l},leftForLtr(n,l){return n-l}}},getLeftToRightAdapter=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,r){return i+r},leftForLtr(i,r){return i}}};function getRtlAdapter(i,r,n){return i?getRightToLeftAdapter(r,n):getLeftToRightAdapter()}function overrideTextDirection(i,r){let n,l;(r==="ltr"||r==="rtl")&&(n=i.canvas.style,l=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",r,"important"),i.prevTextDirection=l)}function restoreTextDirection(i,r){r!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",r[0],r[1]))}function propertyFn(i){return i==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(r,n)=>r-n,normalize:r=>r}}function normalizeSegment({start:i,end:r,count:n,loop:l,style:w}){return{start:i%n,end:r%n,loop:l&&(r-i+1)%n===0,style:w}}function getSegment(i,r,n){const{property:l,start:w,end:d}=n,{between:f,normalize:a}=propertyFn(l),u=r.length;let{start:g,end:$,loop:v}=i,S,E;if(v){for(g+=u,$+=u,S=0,E=u;S<E&&f(a(r[g%u][l]),w,d);++S)g--,$--;g%=u,$%=u}return $<g&&($+=u),{start:g,end:$,loop:v,style:i.style}}function _boundSegment(i,r,n){if(!n)return[i];const{property:l,start:w,end:d}=n,f=r.length,{compare:a,between:u,normalize:g}=propertyFn(l),{start:$,end:v,loop:S,style:E}=getSegment(i,r,n),h=[];let b=!1,m=null,p,_,y;const x=()=>u(w,y,p)&&a(w,y)!==0,A=()=>a(d,p)===0||u(d,y,p),R=()=>b||x(),C=()=>!b||A();for(let k=$,D=$;k<=v;++k)_=r[k%f],!_.skip&&(p=g(_[l]),p!==y&&(b=u(p,w,d),m===null&&R()&&(m=a(p,w)===0?k:D),m!==null&&C()&&(h.push(normalizeSegment({start:m,end:k,loop:S,count:f,style:E})),m=null),D=k,y=p));return m!==null&&h.push(normalizeSegment({start:m,end:v,loop:S,count:f,style:E})),h}function _boundSegments(i,r){const n=[],l=i.segments;for(let w=0;w<l.length;w++){const d=_boundSegment(l[w],i.points,r);d.length&&n.push(...d)}return n}function findStartAndEnd(i,r,n,l){let w=0,d=r-1;if(n&&!l)for(;w<r&&!i[w].skip;)w++;for(;w<r&&i[w].skip;)w++;for(w%=r,n&&(d+=w);d>w&&i[d%r].skip;)d--;return d%=r,{start:w,end:d}}function solidSegments(i,r,n,l){const w=i.length,d=[];let f=r,a=i[r],u;for(u=r+1;u<=n;++u){const g=i[u%w];g.skip||g.stop?a.skip||(l=!1,d.push({start:r%w,end:(u-1)%w,loop:l}),r=f=g.stop?u:null):(f=u,a.skip&&(r=u)),a=g}return f!==null&&d.push({start:r%w,end:f%w,loop:l}),d}function _computeSegments(i,r){const n=i.points,l=i.options.spanGaps,w=n.length;if(!w)return[];const d=!!i._loop,{start:f,end:a}=findStartAndEnd(n,w,d,l);if(l===!0)return splitByStyles(i,[{start:f,end:a,loop:d}],n,r);const u=a<f?a+w:a,g=!!i._fullLoop&&f===0&&a===w-1;return splitByStyles(i,solidSegments(n,f,u,g),n,r)}function splitByStyles(i,r,n,l){return!l||!l.setContext||!n?r:doSplitByStyles(i,r,n,l)}function doSplitByStyles(i,r,n,l){const w=i._chart.getContext(),d=readStyle(i.options),{_datasetIndex:f,options:{spanGaps:a}}=i,u=n.length,g=[];let $=d,v=r[0].start,S=v;function E(h,b,m,p){const _=a?-1:1;if(h!==b){for(h+=u;n[h%u].skip;)h-=_;for(;n[b%u].skip;)b+=_;h%u!==b%u&&(g.push({start:h%u,end:b%u,loop:m,style:p}),$=p,v=b%u)}}for(const h of r){v=a?v:h.start;let b=n[v%u],m;for(S=v+1;S<=h.end;S++){const p=n[S%u];m=readStyle(l.setContext(createContext(w,{type:"segment",p0:b,p1:p,p0DataIndex:(S-1)%u,p1DataIndex:S%u,datasetIndex:f}))),styleChanged(m,$)&&E(v,S-1,h.loop,$),b=p,$=m}v<S-1&&E(v,S-1,h.loop,$)}return g}function readStyle(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function styleChanged(i,r){if(!r)return!1;const n=[],l=function(w,d){return isPatternOrGradient(d)?(n.includes(d)||n.push(d),n.indexOf(d)):d};return JSON.stringify(i,l)!==JSON.stringify(r,l)}function getSizeForArea(i,r,n){return i.options.clip?i[n]:r[n]}function getDatasetArea(i,r){const{xScale:n,yScale:l}=i;return n&&l?{left:getSizeForArea(n,r,"left"),right:getSizeForArea(n,r,"right"),top:getSizeForArea(l,r,"top"),bottom:getSizeForArea(l,r,"bottom")}:r}function getDatasetClipArea(i,r){const n=r._clip;if(n.disabled)return!1;const l=getDatasetArea(r,i.chartArea);return{left:n.left===!1?0:l.left-(n.left===!0?0:n.left),right:n.right===!1?i.width:l.right+(n.right===!0?0:n.right),top:n.top===!1?0:l.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?i.height:l.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(r,n,l,w){const d=n.listeners[w],f=n.duration;d.forEach(a=>a({chart:r,initial:n.initial,numSteps:f,currentStep:Math.min(l-n.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(r=Date.now()){let n=0;this._charts.forEach((l,w)=>{if(!l.running||!l.items.length)return;const d=l.items;let f=d.length-1,a=!1,u;for(;f>=0;--f)u=d[f],u._active?(u._total>l.duration&&(l.duration=u._total),u.tick(r),a=!0):(d[f]=d[d.length-1],d.pop());a&&(w.draw(),this._notify(w,l,r,"progress")),d.length||(l.running=!1,this._notify(w,l,r,"complete"),l.initial=!1),n+=d.length}),this._lastDate=r,n===0&&(this._running=!1)}_getAnims(r){const n=this._charts;let l=n.get(r);return l||(l={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(r,l)),l}listen(r,n,l){this._getAnims(r).listeners[n].push(l)}add(r,n){!n||!n.length||this._getAnims(r).items.push(...n)}has(r){return this._getAnims(r).items.length>0}start(r){const n=this._charts.get(r);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((l,w)=>Math.max(l,w._duration),0),this._refresh())}running(r){if(!this._running)return!1;const n=this._charts.get(r);return!(!n||!n.running||!n.items.length)}stop(r){const n=this._charts.get(r);if(!n||!n.items.length)return;const l=n.items;let w=l.length-1;for(;w>=0;--w)l[w].cancel();n.items=[],this._notify(r,n,Date.now(),"complete")}remove(r){return this._charts.delete(r)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(i,r,n){return n>.5?r:i},color(i,r,n){const l=color(i||transparent),w=l.valid&&color(r||transparent);return w&&w.valid?w.mix(l,n).hexString():r},number(i,r,n){return i+(r-i)*n}};class Animation{constructor(r,n,l,w){const d=n[l];w=resolve([r.to,w,d,r.from]);const f=resolve([r.from,d,w]);this._active=!0,this._fn=r.fn||interpolators[r.type||typeof f],this._easing=effects[r.easing]||effects.linear,this._start=Math.floor(Date.now()+(r.delay||0)),this._duration=this._total=Math.floor(r.duration),this._loop=!!r.loop,this._target=n,this._prop=l,this._from=f,this._to=w,this._promises=void 0}active(){return this._active}update(r,n,l){if(this._active){this._notify(!1);const w=this._target[this._prop],d=l-this._start,f=this._duration-d;this._start=l,this._duration=Math.floor(Math.max(f,r.duration)),this._total+=d,this._loop=!!r.loop,this._to=resolve([r.to,n,w,r.from]),this._from=resolve([r.from,w,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(r){const n=r-this._start,l=this._duration,w=this._prop,d=this._from,f=this._loop,a=this._to;let u;if(this._active=d!==a&&(f||n<l),!this._active){this._target[w]=a,this._notify(!0);return}if(n<0){this._target[w]=d;return}u=n/l%2,u=f&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[w]=this._fn(d,a,u)}wait(){const r=this._promises||(this._promises=[]);return new Promise((n,l)=>{r.push({res:n,rej:l})})}_notify(r){const n=r?"res":"rej",l=this._promises||[];for(let w=0;w<l.length;w++)l[w][n]()}}class Animations{constructor(r,n){this._chart=r,this._properties=new Map,this.configure(n)}configure(r){if(!isObject(r))return;const n=Object.keys(defaults.animation),l=this._properties;Object.getOwnPropertyNames(r).forEach(w=>{const d=r[w];if(!isObject(d))return;const f={};for(const a of n)f[a]=d[a];(isArray(d.properties)&&d.properties||[w]).forEach(a=>{(a===w||!l.has(a))&&l.set(a,f)})})}_animateOptions(r,n){const l=n.options,w=resolveTargetOptions(r,l);if(!w)return[];const d=this._createAnimations(w,l);return l.$shared&&awaitAll(r.options.$animations,l).then(()=>{r.options=l},()=>{}),d}_createAnimations(r,n){const l=this._properties,w=[],d=r.$animations||(r.$animations={}),f=Object.keys(n),a=Date.now();let u;for(u=f.length-1;u>=0;--u){const g=f[u];if(g.charAt(0)==="$")continue;if(g==="options"){w.push(...this._animateOptions(r,n));continue}const $=n[g];let v=d[g];const S=l.get(g);if(v)if(S&&v.active()){v.update(S,$,a);continue}else v.cancel();if(!S||!S.duration){r[g]=$;continue}d[g]=v=new Animation(S,r,g,$),w.push(v)}return w}update(r,n){if(this._properties.size===0){Object.assign(r,n);return}const l=this._createAnimations(r,n);if(l.length)return animator.add(this._chart,l),!0}}function awaitAll(i,r){const n=[],l=Object.keys(r);for(let w=0;w<l.length;w++){const d=i[l[w]];d&&d.active()&&n.push(d.wait())}return Promise.all(n)}function resolveTargetOptions(i,r){if(!r)return;let n=i.options;if(!n){i.options=r;return}return n.$shared&&(i.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function scaleClip(i,r){const n=i&&i.options||{},l=n.reverse,w=n.min===void 0?r:0,d=n.max===void 0?r:0;return{start:l?d:w,end:l?w:d}}function defaultClip(i,r,n){if(n===!1)return!1;const l=scaleClip(i,n),w=scaleClip(r,n);return{top:w.end,right:l.end,bottom:w.start,left:l.start}}function toClip(i){let r,n,l,w;return isObject(i)?(r=i.top,n=i.right,l=i.bottom,w=i.left):r=n=l=w=i,{top:r,right:n,bottom:l,left:w,disabled:i===!1}}function getSortedDatasetIndices(i,r){const n=[],l=i._getSortedDatasetMetas(r);let w,d;for(w=0,d=l.length;w<d;++w)n.push(l[w].index);return n}function applyStack(i,r,n,l={}){const w=i.keys,d=l.mode==="single";let f,a,u,g;if(r===null)return;let $=!1;for(f=0,a=w.length;f<a;++f){if(u=+w[f],u===n){if($=!0,l.all)continue;break}g=i.values[u],isNumberFinite(g)&&(d||r===0||sign(r)===sign(g))&&(r+=g)}return!$&&!l.all?0:r}function convertObjectDataToArray(i,r){const{iScale:n,vScale:l}=r,w=n.axis==="x"?"x":"y",d=l.axis==="x"?"x":"y",f=Object.keys(i),a=new Array(f.length);let u,g,$;for(u=0,g=f.length;u<g;++u)$=f[u],a[u]={[w]:$,[d]:i[$]};return a}function isStacked(i,r){const n=i&&i.options.stacked;return n||n===void 0&&r.stack!==void 0}function getStackKey(i,r,n){return`${i.id}.${r.id}.${n.stack||n.type}`}function getUserBounds(i){const{min:r,max:n,minDefined:l,maxDefined:w}=i.getUserBounds();return{min:l?r:Number.NEGATIVE_INFINITY,max:w?n:Number.POSITIVE_INFINITY}}function getOrCreateStack(i,r,n){const l=i[r]||(i[r]={});return l[n]||(l[n]={})}function getLastIndexInStack(i,r,n,l){for(const w of r.getMatchingVisibleMetas(l).reverse()){const d=i[w.index];if(n&&d>0||!n&&d<0)return w.index}return null}function updateStacks(i,r){const{chart:n,_cachedMeta:l}=i,w=n._stacks||(n._stacks={}),{iScale:d,vScale:f,index:a}=l,u=d.axis,g=f.axis,$=getStackKey(d,f,l),v=r.length;let S;for(let E=0;E<v;++E){const h=r[E],{[u]:b,[g]:m}=h,p=h._stacks||(h._stacks={});S=p[g]=getOrCreateStack(w,$,b),S[a]=m,S._top=getLastIndexInStack(S,f,!0,l.type),S._bottom=getLastIndexInStack(S,f,!1,l.type);const _=S._visualValues||(S._visualValues={});_[a]=m}}function getFirstScaleId(i,r){const n=i.scales;return Object.keys(n).filter(l=>n[l].axis===r).shift()}function createDatasetContext(i,r){return createContext(i,{active:!1,dataset:void 0,datasetIndex:r,index:r,mode:"default",type:"dataset"})}function createDataContext(i,r,n){return createContext(i,{active:!1,dataIndex:r,parsed:void 0,raw:void 0,element:n,index:r,mode:"default",type:"data"})}function clearStacks(i,r){const n=i.controller.index,l=i.vScale&&i.vScale.axis;if(l){r=r||i._parsed;for(const w of r){const d=w._stacks;if(!d||d[l]===void 0||d[l][n]===void 0)return;delete d[l][n],d[l]._visualValues!==void 0&&d[l]._visualValues[n]!==void 0&&delete d[l]._visualValues[n]}}}const isDirectUpdateMode=i=>i==="reset"||i==="none",cloneIfNotShared=(i,r)=>r?i:Object.assign({},i),createStack=(i,r,n)=>i&&!r.hidden&&r._stacked&&{keys:getSortedDatasetIndices(n,!0),values:null};class DatasetController{constructor(r,n){this.chart=r,this._ctx=r.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const r=this._cachedMeta;this.configure(),this.linkScales(),r._stacked=isStacked(r.vScale,r),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(r){this.index!==r&&clearStacks(this._cachedMeta),this.index=r}linkScales(){const r=this.chart,n=this._cachedMeta,l=this.getDataset(),w=(v,S,E,h)=>v==="x"?S:v==="r"?h:E,d=n.xAxisID=valueOrDefault(l.xAxisID,getFirstScaleId(r,"x")),f=n.yAxisID=valueOrDefault(l.yAxisID,getFirstScaleId(r,"y")),a=n.rAxisID=valueOrDefault(l.rAxisID,getFirstScaleId(r,"r")),u=n.indexAxis,g=n.iAxisID=w(u,d,f,a),$=n.vAxisID=w(u,f,d,a);n.xScale=this.getScaleForId(d),n.yScale=this.getScaleForId(f),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(g),n.vScale=this.getScaleForId($)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(r){return this.chart.scales[r]}_getOtherScale(r){const n=this._cachedMeta;return r===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const r=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),r._stacked&&clearStacks(r)}_dataCheck(){const r=this.getDataset(),n=r.data||(r.data=[]),l=this._data;if(isObject(n)){const w=this._cachedMeta;this._data=convertObjectDataToArray(n,w)}else if(l!==n){if(l){unlistenArrayEvents(l,this);const w=this._cachedMeta;clearStacks(w),w._parsed=[]}n&&Object.isExtensible(n)&&listenArrayEvents(n,this),this._syncList=[],this._data=n}}addElements(){const r=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(r.dataset=new this.datasetElementType)}buildOrUpdateElements(r){const n=this._cachedMeta,l=this.getDataset();let w=!1;this._dataCheck();const d=n._stacked;n._stacked=isStacked(n.vScale,n),n.stack!==l.stack&&(w=!0,clearStacks(n),n.stack=l.stack),this._resyncElements(r),(w||d!==n._stacked)&&(updateStacks(this,n._parsed),n._stacked=isStacked(n.vScale,n))}configure(){const r=this.chart.config,n=r.datasetScopeKeys(this._type),l=r.getOptionScopes(this.getDataset(),n,!0);this.options=r.createResolver(l,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(r,n){const{_cachedMeta:l,_data:w}=this,{iScale:d,_stacked:f}=l,a=d.axis;let u=r===0&&n===w.length?!0:l._sorted,g=r>0&&l._parsed[r-1],$,v,S;if(this._parsing===!1)l._parsed=w,l._sorted=!0,S=w;else{isArray(w[r])?S=this.parseArrayData(l,w,r,n):isObject(w[r])?S=this.parseObjectData(l,w,r,n):S=this.parsePrimitiveData(l,w,r,n);const E=()=>v[a]===null||g&&v[a]<g[a];for($=0;$<n;++$)l._parsed[$+r]=v=S[$],u&&(E()&&(u=!1),g=v);l._sorted=u}f&&updateStacks(this,S)}parsePrimitiveData(r,n,l,w){const{iScale:d,vScale:f}=r,a=d.axis,u=f.axis,g=d.getLabels(),$=d===f,v=new Array(w);let S,E,h;for(S=0,E=w;S<E;++S)h=S+l,v[S]={[a]:$||d.parse(g[h],h),[u]:f.parse(n[h],h)};return v}parseArrayData(r,n,l,w){const{xScale:d,yScale:f}=r,a=new Array(w);let u,g,$,v;for(u=0,g=w;u<g;++u)$=u+l,v=n[$],a[u]={x:d.parse(v[0],$),y:f.parse(v[1],$)};return a}parseObjectData(r,n,l,w){const{xScale:d,yScale:f}=r,{xAxisKey:a="x",yAxisKey:u="y"}=this._parsing,g=new Array(w);let $,v,S,E;for($=0,v=w;$<v;++$)S=$+l,E=n[S],g[$]={x:d.parse(resolveObjectKey(E,a),S),y:f.parse(resolveObjectKey(E,u),S)};return g}getParsed(r){return this._cachedMeta._parsed[r]}getDataElement(r){return this._cachedMeta.data[r]}applyStack(r,n,l){const w=this.chart,d=this._cachedMeta,f=n[r.axis],a={keys:getSortedDatasetIndices(w,!0),values:n._stacks[r.axis]._visualValues};return applyStack(a,f,d.index,{mode:l})}updateRangeFromParsed(r,n,l,w){const d=l[n.axis];let f=d===null?NaN:d;const a=w&&l._stacks[n.axis];w&&a&&(w.values=a,f=applyStack(w,d,this._cachedMeta.index)),r.min=Math.min(r.min,f),r.max=Math.max(r.max,f)}getMinMax(r,n){const l=this._cachedMeta,w=l._parsed,d=l._sorted&&r===l.iScale,f=w.length,a=this._getOtherScale(r),u=createStack(n,l,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:$,max:v}=getUserBounds(a);let S,E;function h(){E=w[S];const b=E[a.axis];return!isNumberFinite(E[r.axis])||$>b||v<b}for(S=0;S<f&&!(!h()&&(this.updateRangeFromParsed(g,r,E,u),d));++S);if(d){for(S=f-1;S>=0;--S)if(!h()){this.updateRangeFromParsed(g,r,E,u);break}}return g}getAllParsedValues(r){const n=this._cachedMeta._parsed,l=[];let w,d,f;for(w=0,d=n.length;w<d;++w)f=n[w][r.axis],isNumberFinite(f)&&l.push(f);return l}getMaxOverflow(){return!1}getLabelAndValue(r){const n=this._cachedMeta,l=n.iScale,w=n.vScale,d=this.getParsed(r);return{label:l?""+l.getLabelForValue(d[l.axis]):"",value:w?""+w.getLabelForValue(d[w.axis]):""}}_update(r){const n=this._cachedMeta;this.update(r||"default"),n._clip=toClip(valueOrDefault(this.options.clip,defaultClip(n.xScale,n.yScale,this.getMaxOverflow())))}update(r){}draw(){const r=this._ctx,n=this.chart,l=this._cachedMeta,w=l.data||[],d=n.chartArea,f=[],a=this._drawStart||0,u=this._drawCount||w.length-a,g=this.options.drawActiveElementsOnTop;let $;for(l.dataset&&l.dataset.draw(r,d,a,u),$=a;$<a+u;++$){const v=w[$];v.hidden||(v.active&&g?f.push(v):v.draw(r,d))}for($=0;$<f.length;++$)f[$].draw(r,d)}getStyle(r,n){const l=n?"active":"default";return r===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(l):this.resolveDataElementOptions(r||0,l)}getContext(r,n,l){const w=this.getDataset();let d;if(r>=0&&r<this._cachedMeta.data.length){const f=this._cachedMeta.data[r];d=f.$context||(f.$context=createDataContext(this.getContext(),r,f)),d.parsed=this.getParsed(r),d.raw=w.data[r],d.index=d.dataIndex=r}else d=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),d.dataset=w,d.index=d.datasetIndex=this.index;return d.active=!!n,d.mode=l,d}resolveDatasetElementOptions(r){return this._resolveElementOptions(this.datasetElementType.id,r)}resolveDataElementOptions(r,n){return this._resolveElementOptions(this.dataElementType.id,n,r)}_resolveElementOptions(r,n="default",l){const w=n==="active",d=this._cachedDataOpts,f=r+"-"+n,a=d[f],u=this.enableOptionSharing&&defined(l);if(a)return cloneIfNotShared(a,u);const g=this.chart.config,$=g.datasetElementScopeKeys(this._type,r),v=w?[`${r}Hover`,"hover",r,""]:[r,""],S=g.getOptionScopes(this.getDataset(),$),E=Object.keys(defaults.elements[r]),h=()=>this.getContext(l,w,n),b=g.resolveNamedOptions(S,E,h,v);return b.$shared&&(b.$shared=u,d[f]=Object.freeze(cloneIfNotShared(b,u))),b}_resolveAnimations(r,n,l){const w=this.chart,d=this._cachedDataOpts,f=`animation-${n}`,a=d[f];if(a)return a;let u;if(w.options.animation!==!1){const $=this.chart.config,v=$.datasetAnimationScopeKeys(this._type,n),S=$.getOptionScopes(this.getDataset(),v);u=$.createResolver(S,this.getContext(r,l,n))}const g=new Animations(w,u&&u.animations);return u&&u._cacheable&&(d[f]=Object.freeze(g)),g}getSharedOptions(r){if(r.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},r))}includeOptions(r,n){return!n||isDirectUpdateMode(r)||this.chart._animationsDisabled}_getSharedOptions(r,n){const l=this.resolveDataElementOptions(r,n),w=this._sharedOptions,d=this.getSharedOptions(l),f=this.includeOptions(n,d)||d!==w;return this.updateSharedOptions(d,n,l),{sharedOptions:d,includeOptions:f}}updateElement(r,n,l,w){isDirectUpdateMode(w)?Object.assign(r,l):this._resolveAnimations(n,w).update(r,l)}updateSharedOptions(r,n,l){r&&!isDirectUpdateMode(n)&&this._resolveAnimations(void 0,n).update(r,l)}_setStyle(r,n,l,w){r.active=w;const d=this.getStyle(n,w);this._resolveAnimations(n,l,w).update(r,{options:!w&&this.getSharedOptions(d)||d})}removeHoverStyle(r,n,l){this._setStyle(r,l,"active",!1)}setHoverStyle(r,n,l){this._setStyle(r,l,"active",!0)}_removeDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!1)}_setDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!0)}_resyncElements(r){const n=this._data,l=this._cachedMeta.data;for(const[a,u,g]of this._syncList)this[a](u,g);this._syncList=[];const w=l.length,d=n.length,f=Math.min(d,w);f&&this.parse(0,f),d>w?this._insertElements(w,d-w,r):d<w&&this._removeElements(d,w-d)}_insertElements(r,n,l=!0){const w=this._cachedMeta,d=w.data,f=r+n;let a;const u=g=>{for(g.length+=n,a=g.length-1;a>=f;a--)g[a]=g[a-n]};for(u(d),a=r;a<f;++a)d[a]=new this.dataElementType;this._parsing&&u(w._parsed),this.parse(r,n),l&&this.updateElements(d,r,n,"reset")}updateElements(r,n,l,w){}_removeElements(r,n){const l=this._cachedMeta;if(this._parsing){const w=l._parsed.splice(r,n);l._stacked&&clearStacks(l,w)}l.data.splice(r,n)}_sync(r){if(this._parsing)this._syncList.push(r);else{const[n,l,w]=r;this[n](l,w)}this.chart._dataChanges.push([this.index,...r])}_onDataPush(){const r=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-r,r])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(r,n){n&&this._sync(["_removeElements",r,n]);const l=arguments.length-2;l&&this._sync(["_insertElements",r,l])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Vn(DatasetController,"defaults",{}),Vn(DatasetController,"datasetElementType",null),Vn(DatasetController,"dataElementType",null);function getAllScaleValues(i,r){if(!i._cache.$bar){const n=i.getMatchingVisibleMetas(r);let l=[];for(let w=0,d=n.length;w<d;w++)l=l.concat(n[w].controller.getAllParsedValues(i));i._cache.$bar=_arrayUnique(l.sort((w,d)=>w-d))}return i._cache.$bar}function computeMinSampleSize(i){const r=i.iScale,n=getAllScaleValues(r,i.type);let l=r._length,w,d,f,a;const u=()=>{f===32767||f===-32768||(defined(a)&&(l=Math.min(l,Math.abs(f-a)||l)),a=f)};for(w=0,d=n.length;w<d;++w)f=r.getPixelForValue(n[w]),u();for(a=void 0,w=0,d=r.ticks.length;w<d;++w)f=r.getPixelForTick(w),u();return l}function computeFitCategoryTraits(i,r,n,l){const w=n.barThickness;let d,f;return isNullOrUndef(w)?(d=r.min*n.categoryPercentage,f=n.barPercentage):(d=w*l,f=1),{chunk:d/l,ratio:f,start:r.pixels[i]-d/2}}function computeFlexCategoryTraits(i,r,n,l){const w=r.pixels,d=w[i];let f=i>0?w[i-1]:null,a=i<w.length-1?w[i+1]:null;const u=n.categoryPercentage;f===null&&(f=d-(a===null?r.end-r.start:a-d)),a===null&&(a=d+d-f);const g=d-(d-Math.min(f,a))/2*u;return{chunk:Math.abs(a-f)/2*u/l,ratio:n.barPercentage,start:g}}function parseFloatBar(i,r,n,l){const w=n.parse(i[0],l),d=n.parse(i[1],l),f=Math.min(w,d),a=Math.max(w,d);let u=f,g=a;Math.abs(f)>Math.abs(a)&&(u=a,g=f),r[n.axis]=g,r._custom={barStart:u,barEnd:g,start:w,end:d,min:f,max:a}}function parseValue(i,r,n,l){return isArray(i)?parseFloatBar(i,r,n,l):r[n.axis]=n.parse(i,l),r}function parseArrayOrPrimitive(i,r,n,l){const w=i.iScale,d=i.vScale,f=w.getLabels(),a=w===d,u=[];let g,$,v,S;for(g=n,$=n+l;g<$;++g)S=r[g],v={},v[w.axis]=a||w.parse(f[g],g),u.push(parseValue(S,v,d,g));return u}function isFloatBar(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function barSign(i,r,n){return i!==0?sign(i):(r.isHorizontal()?1:-1)*(r.min>=n?1:-1)}function borderProps(i){let r,n,l,w,d;return i.horizontal?(r=i.base>i.x,n="left",l="right"):(r=i.base<i.y,n="bottom",l="top"),r?(w="end",d="start"):(w="start",d="end"),{start:n,end:l,reverse:r,top:w,bottom:d}}function setBorderSkipped(i,r,n,l){let w=r.borderSkipped;const d={};if(!w){i.borderSkipped=d;return}if(w===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:f,end:a,reverse:u,top:g,bottom:$}=borderProps(i);w==="middle"&&n&&(i.enableBorderRadius=!0,(n._top||0)===l?w=g:(n._bottom||0)===l?w=$:(d[parseEdge($,f,a,u)]=!0,w=g)),d[parseEdge(w,f,a,u)]=!0,i.borderSkipped=d}function parseEdge(i,r,n,l){return l?(i=swap(i,r,n),i=startEnd(i,n,r)):i=startEnd(i,r,n),i}function swap(i,r,n){return i===r?n:i===n?r:i}function startEnd(i,r,n){return i==="start"?r:i==="end"?n:i}function setInflateAmount(i,{inflateAmount:r},n){i.inflateAmount=r==="auto"?n===1?.33:0:r}class BarController extends DatasetController{parsePrimitiveData(r,n,l,w){return parseArrayOrPrimitive(r,n,l,w)}parseArrayData(r,n,l,w){return parseArrayOrPrimitive(r,n,l,w)}parseObjectData(r,n,l,w){const{iScale:d,vScale:f}=r,{xAxisKey:a="x",yAxisKey:u="y"}=this._parsing,g=d.axis==="x"?a:u,$=f.axis==="x"?a:u,v=[];let S,E,h,b;for(S=l,E=l+w;S<E;++S)b=n[S],h={},h[d.axis]=d.parse(resolveObjectKey(b,g),S),v.push(parseValue(resolveObjectKey(b,$),h,f,S));return v}updateRangeFromParsed(r,n,l,w){super.updateRangeFromParsed(r,n,l,w);const d=l._custom;d&&n===this._cachedMeta.vScale&&(r.min=Math.min(r.min,d.min),r.max=Math.max(r.max,d.max))}getMaxOverflow(){return 0}getLabelAndValue(r){const n=this._cachedMeta,{iScale:l,vScale:w}=n,d=this.getParsed(r),f=d._custom,a=isFloatBar(f)?"["+f.start+", "+f.end+"]":""+w.getLabelForValue(d[w.axis]);return{label:""+l.getLabelForValue(d[l.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const r=this._cachedMeta;r.stack=this.getDataset().stack}update(r){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,r)}updateElements(r,n,l,w){const d=w==="reset",{index:f,_cachedMeta:{vScale:a}}=this,u=a.getBasePixel(),g=a.isHorizontal(),$=this._getRuler(),{sharedOptions:v,includeOptions:S}=this._getSharedOptions(n,w);for(let E=n;E<n+l;E++){const h=this.getParsed(E),b=d||isNullOrUndef(h[a.axis])?{base:u,head:u}:this._calculateBarValuePixels(E),m=this._calculateBarIndexPixels(E,$),p=(h._stacks||{})[a.axis],_={horizontal:g,base:b.base,enableBorderRadius:!p||isFloatBar(h._custom)||f===p._top||f===p._bottom,x:g?b.head:m.center,y:g?m.center:b.head,height:g?m.size:Math.abs(b.size),width:g?Math.abs(b.size):m.size};S&&(_.options=v||this.resolveDataElementOptions(E,r[E].active?"active":w));const y=_.options||r[E].options;setBorderSkipped(_,y,p,f),setInflateAmount(_,y,$.ratio),this.updateElement(r[E],E,_,w)}}_getStacks(r,n){const{iScale:l}=this._cachedMeta,w=l.getMatchingVisibleMetas(this._type).filter($=>$.controller.options.grouped),d=l.options.stacked,f=[],a=this._cachedMeta.controller.getParsed(n),u=a&&a[l.axis],g=$=>{const v=$._parsed.find(E=>E[l.axis]===u),S=v&&v[$.vScale.axis];if(isNullOrUndef(S)||isNaN(S))return!0};for(const $ of w)if(!(n!==void 0&&g($))&&((d===!1||f.indexOf($.stack)===-1||d===void 0&&$.stack===void 0)&&f.push($.stack),$.index===r))break;return f.length||f.push(void 0),f}_getStackCount(r){return this._getStacks(void 0,r).length}_getStackIndex(r,n,l){const w=this._getStacks(r,l),d=n!==void 0?w.indexOf(n):-1;return d===-1?w.length-1:d}_getRuler(){const r=this.options,n=this._cachedMeta,l=n.iScale,w=[];let d,f;for(d=0,f=n.data.length;d<f;++d)w.push(l.getPixelForValue(this.getParsed(d)[l.axis],d));const a=r.barThickness;return{min:a||computeMinSampleSize(n),pixels:w,start:l._startPixel,end:l._endPixel,stackCount:this._getStackCount(),scale:l,grouped:r.grouped,ratio:a?1:r.categoryPercentage*r.barPercentage}}_calculateBarValuePixels(r){const{_cachedMeta:{vScale:n,_stacked:l,index:w},options:{base:d,minBarLength:f}}=this,a=d||0,u=this.getParsed(r),g=u._custom,$=isFloatBar(g);let v=u[n.axis],S=0,E=l?this.applyStack(n,u,l):v,h,b;E!==v&&(S=E-v,E=v),$&&(v=g.barStart,E=g.barEnd-g.barStart,v!==0&&sign(v)!==sign(g.barEnd)&&(S=0),S+=v);const m=!isNullOrUndef(d)&&!$?d:S;let p=n.getPixelForValue(m);if(this.chart.getDataVisibility(r)?h=n.getPixelForValue(S+E):h=p,b=h-p,Math.abs(b)<f){b=barSign(b,n,a)*f,v===a&&(p-=b/2);const _=n.getPixelForDecimal(0),y=n.getPixelForDecimal(1),x=Math.min(_,y),A=Math.max(_,y);p=Math.max(Math.min(p,A),x),h=p+b,l&&!$&&(u._stacks[n.axis]._visualValues[w]=n.getValueForPixel(h)-n.getValueForPixel(p))}if(p===n.getPixelForValue(a)){const _=sign(b)*n.getLineWidthForValue(a)/2;p+=_,b-=_}return{size:b,base:p,head:h,center:h+b/2}}_calculateBarIndexPixels(r,n){const l=n.scale,w=this.options,d=w.skipNull,f=valueOrDefault(w.maxBarThickness,1/0);let a,u;if(n.grouped){const g=d?this._getStackCount(r):n.stackCount,$=w.barThickness==="flex"?computeFlexCategoryTraits(r,n,w,g):computeFitCategoryTraits(r,n,w,g),v=this._getStackIndex(this.index,this._cachedMeta.stack,d?r:void 0);a=$.start+$.chunk*v+$.chunk/2,u=Math.min(f,$.chunk*$.ratio)}else a=l.getPixelForValue(this.getParsed(r)[l.axis],r),u=Math.min(f,n.min*n.ratio);return{base:a-u/2,head:a+u/2,center:a,size:u}}draw(){const r=this._cachedMeta,n=r.vScale,l=r.data,w=l.length;let d=0;for(;d<w;++d)this.getParsed(d)[n.axis]!==null&&!l[d].hidden&&l[d].draw(this._ctx)}}Vn(BarController,"id","bar"),Vn(BarController,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Vn(BarController,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{constructor(r){Vn(this,"options");this.options=r||{}}static override(r){Object.assign(DateAdapterBase.prototype,r)}init(){}formats(){return abstract()}parse(){return abstract()}format(){return abstract()}add(){return abstract()}diff(){return abstract()}startOf(){return abstract()}endOf(){return abstract()}}var adapters={_date:DateAdapterBase};function binarySearch(i,r,n,l){const{controller:w,data:d,_sorted:f}=i,a=w._cachedMeta.iScale,u=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&r===a.axis&&r!=="r"&&f&&d.length){const g=a._reversePixels?_rlookupByKey:_lookupByKey;if(l){if(w._sharedOptions){const $=d[0],v=typeof $.getRange=="function"&&$.getRange(r);if(v){const S=g(d,r,n-v),E=g(d,r,n+v);return{lo:S.lo,hi:E.hi}}}}else{const $=g(d,r,n);if(u){const{vScale:v}=w._cachedMeta,{_parsed:S}=i,E=S.slice(0,$.lo+1).reverse().findIndex(b=>!isNullOrUndef(b[v.axis]));$.lo-=Math.max(0,E);const h=S.slice($.hi).findIndex(b=>!isNullOrUndef(b[v.axis]));$.hi+=Math.max(0,h)}return $}}return{lo:0,hi:d.length-1}}function evaluateInteractionItems(i,r,n,l,w){const d=i.getSortedVisibleDatasetMetas(),f=n[r];for(let a=0,u=d.length;a<u;++a){const{index:g,data:$}=d[a],{lo:v,hi:S}=binarySearch(d[a],r,f,w);for(let E=v;E<=S;++E){const h=$[E];h.skip||l(h,g,E)}}}function getDistanceMetricForAxis(i){const r=i.indexOf("x")!==-1,n=i.indexOf("y")!==-1;return function(l,w){const d=r?Math.abs(l.x-w.x):0,f=n?Math.abs(l.y-w.y):0;return Math.sqrt(Math.pow(d,2)+Math.pow(f,2))}}function getIntersectItems(i,r,n,l,w){const d=[];return!w&&!i.isPointInArea(r)||evaluateInteractionItems(i,n,r,function(a,u,g){!w&&!_isPointInArea(a,i.chartArea,0)||a.inRange(r.x,r.y,l)&&d.push({element:a,datasetIndex:u,index:g})},!0),d}function getNearestRadialItems(i,r,n,l){let w=[];function d(f,a,u){const{startAngle:g,endAngle:$}=f.getProps(["startAngle","endAngle"],l),{angle:v}=getAngleFromPoint(f,{x:r.x,y:r.y});_angleBetween(v,g,$)&&w.push({element:f,datasetIndex:a,index:u})}return evaluateInteractionItems(i,n,r,d),w}function getNearestCartesianItems(i,r,n,l,w,d){let f=[];const a=getDistanceMetricForAxis(n);let u=Number.POSITIVE_INFINITY;function g($,v,S){const E=$.inRange(r.x,r.y,w);if(l&&!E)return;const h=$.getCenterPoint(w);if(!(!!d||i.isPointInArea(h))&&!E)return;const m=a(r,h);m<u?(f=[{element:$,datasetIndex:v,index:S}],u=m):m===u&&f.push({element:$,datasetIndex:v,index:S})}return evaluateInteractionItems(i,n,r,g),f}function getNearestItems(i,r,n,l,w,d){return!d&&!i.isPointInArea(r)?[]:n==="r"&&!l?getNearestRadialItems(i,r,n,w):getNearestCartesianItems(i,r,n,l,w,d)}function getAxisItems(i,r,n,l,w){const d=[],f=n==="x"?"inXRange":"inYRange";let a=!1;return evaluateInteractionItems(i,n,r,(u,g,$)=>{u[f]&&u[f](r[n],w)&&(d.push({element:u,datasetIndex:g,index:$}),a=a||u.inRange(r.x,r.y,w))}),l&&!a?[]:d}var Interaction={modes:{index(i,r,n,l){const w=getRelativePosition(r,i),d=n.axis||"x",f=n.includeInvisible||!1,a=n.intersect?getIntersectItems(i,w,d,l,f):getNearestItems(i,w,d,!1,l,f),u=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(g=>{const $=a[0].index,v=g.data[$];v&&!v.skip&&u.push({element:v,datasetIndex:g.index,index:$})}),u):[]},dataset(i,r,n,l){const w=getRelativePosition(r,i),d=n.axis||"xy",f=n.includeInvisible||!1;let a=n.intersect?getIntersectItems(i,w,d,l,f):getNearestItems(i,w,d,!1,l,f);if(a.length>0){const u=a[0].datasetIndex,g=i.getDatasetMeta(u).data;a=[];for(let $=0;$<g.length;++$)a.push({element:g[$],datasetIndex:u,index:$})}return a},point(i,r,n,l){const w=getRelativePosition(r,i),d=n.axis||"xy",f=n.includeInvisible||!1;return getIntersectItems(i,w,d,l,f)},nearest(i,r,n,l){const w=getRelativePosition(r,i),d=n.axis||"xy",f=n.includeInvisible||!1;return getNearestItems(i,w,d,n.intersect,l,f)},x(i,r,n,l){const w=getRelativePosition(r,i);return getAxisItems(i,w,"x",n.intersect,l)},y(i,r,n,l){const w=getRelativePosition(r,i);return getAxisItems(i,w,"y",n.intersect,l)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(i,r){return i.filter(n=>n.pos===r)}function filterDynamicPositionByAxis(i,r){return i.filter(n=>STATIC_POSITIONS.indexOf(n.pos)===-1&&n.box.axis===r)}function sortByWeight(i,r){return i.sort((n,l)=>{const w=r?l:n,d=r?n:l;return w.weight===d.weight?w.index-d.index:w.weight-d.weight})}function wrapBoxes(i){const r=[];let n,l,w,d,f,a;for(n=0,l=(i||[]).length;n<l;++n)w=i[n],{position:d,options:{stack:f,stackWeight:a=1}}=w,r.push({index:n,box:w,pos:d,horizontal:w.isHorizontal(),weight:w.weight,stack:f&&d+f,stackWeight:a});return r}function buildStacks(i){const r={};for(const n of i){const{stack:l,pos:w,stackWeight:d}=n;if(!l||!STATIC_POSITIONS.includes(w))continue;const f=r[l]||(r[l]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=d}return r}function setLayoutDims(i,r){const n=buildStacks(i),{vBoxMaxWidth:l,hBoxMaxHeight:w}=r;let d,f,a;for(d=0,f=i.length;d<f;++d){a=i[d];const{fullSize:u}=a.box,g=n[a.stack],$=g&&a.stackWeight/g.weight;a.horizontal?(a.width=$?$*l:u&&r.availableWidth,a.height=w):(a.width=l,a.height=$?$*w:u&&r.availableHeight)}return n}function buildLayoutBoxes(i){const r=wrapBoxes(i),n=sortByWeight(r.filter(g=>g.box.fullSize),!0),l=sortByWeight(filterByPosition(r,"left"),!0),w=sortByWeight(filterByPosition(r,"right")),d=sortByWeight(filterByPosition(r,"top"),!0),f=sortByWeight(filterByPosition(r,"bottom")),a=filterDynamicPositionByAxis(r,"x"),u=filterDynamicPositionByAxis(r,"y");return{fullSize:n,leftAndTop:l.concat(d),rightAndBottom:w.concat(u).concat(f).concat(a),chartArea:filterByPosition(r,"chartArea"),vertical:l.concat(w).concat(u),horizontal:d.concat(f).concat(a)}}function getCombinedMax(i,r,n,l){return Math.max(i[n],r[n])+Math.max(i[l],r[l])}function updateMaxPadding(i,r){i.top=Math.max(i.top,r.top),i.left=Math.max(i.left,r.left),i.bottom=Math.max(i.bottom,r.bottom),i.right=Math.max(i.right,r.right)}function updateDims(i,r,n,l){const{pos:w,box:d}=n,f=i.maxPadding;if(!isObject(w)){n.size&&(i[w]-=n.size);const v=l[n.stack]||{size:0,count:1};v.size=Math.max(v.size,n.horizontal?d.height:d.width),n.size=v.size/v.count,i[w]+=n.size}d.getPadding&&updateMaxPadding(f,d.getPadding());const a=Math.max(0,r.outerWidth-getCombinedMax(f,i,"left","right")),u=Math.max(0,r.outerHeight-getCombinedMax(f,i,"top","bottom")),g=a!==i.w,$=u!==i.h;return i.w=a,i.h=u,n.horizontal?{same:g,other:$}:{same:$,other:g}}function handleMaxPadding(i){const r=i.maxPadding;function n(l){const w=Math.max(r[l]-i[l],0);return i[l]+=w,w}i.y+=n("top"),i.x+=n("left"),n("right"),n("bottom")}function getMargins(i,r){const n=r.maxPadding;function l(w){const d={left:0,top:0,right:0,bottom:0};return w.forEach(f=>{d[f]=Math.max(r[f],n[f])}),d}return l(i?["left","right"]:["top","bottom"])}function fitBoxes(i,r,n,l){const w=[];let d,f,a,u,g,$;for(d=0,f=i.length,g=0;d<f;++d){a=i[d],u=a.box,u.update(a.width||r.w,a.height||r.h,getMargins(a.horizontal,r));const{same:v,other:S}=updateDims(r,n,a,l);g|=v&&w.length,$=$||S,u.fullSize||w.push(a)}return g&&fitBoxes(w,r,n,l)||$}function setBoxDims(i,r,n,l,w){i.top=n,i.left=r,i.right=r+l,i.bottom=n+w,i.width=l,i.height=w}function placeBoxes(i,r,n,l){const w=n.padding;let{x:d,y:f}=r;for(const a of i){const u=a.box,g=l[a.stack]||{placed:0,weight:1},$=a.stackWeight/g.weight||1;if(a.horizontal){const v=r.w*$,S=g.size||u.height;defined(g.start)&&(f=g.start),u.fullSize?setBoxDims(u,w.left,f,n.outerWidth-w.right-w.left,S):setBoxDims(u,r.left+g.placed,f,v,S),g.start=f,g.placed+=v,f=u.bottom}else{const v=r.h*$,S=g.size||u.width;defined(g.start)&&(d=g.start),u.fullSize?setBoxDims(u,d,w.top,S,n.outerHeight-w.bottom-w.top):setBoxDims(u,d,r.top+g.placed,S,v),g.start=d,g.placed+=v,d=u.right}}r.x=d,r.y=f}var layouts={addBox(i,r){i.boxes||(i.boxes=[]),r.fullSize=r.fullSize||!1,r.position=r.position||"top",r.weight=r.weight||0,r._layers=r._layers||function(){return[{z:0,draw(n){r.draw(n)}}]},i.boxes.push(r)},removeBox(i,r){const n=i.boxes?i.boxes.indexOf(r):-1;n!==-1&&i.boxes.splice(n,1)},configure(i,r,n){r.fullSize=n.fullSize,r.position=n.position,r.weight=n.weight},update(i,r,n,l){if(!i)return;const w=toPadding(i.options.layout.padding),d=Math.max(r-w.width,0),f=Math.max(n-w.height,0),a=buildLayoutBoxes(i.boxes),u=a.vertical,g=a.horizontal;each(i.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const $=u.reduce((b,m)=>m.box.options&&m.box.options.display===!1?b:b+1,0)||1,v=Object.freeze({outerWidth:r,outerHeight:n,padding:w,availableWidth:d,availableHeight:f,vBoxMaxWidth:d/2/$,hBoxMaxHeight:f/2}),S=Object.assign({},w);updateMaxPadding(S,toPadding(l));const E=Object.assign({maxPadding:S,w:d,h:f,x:w.left,y:w.top},w),h=setLayoutDims(u.concat(g),v);fitBoxes(a.fullSize,E,v,h),fitBoxes(u,E,v,h),fitBoxes(g,E,v,h)&&fitBoxes(u,E,v,h),handleMaxPadding(E),placeBoxes(a.leftAndTop,E,v,h),E.x+=E.w,E.y+=E.h,placeBoxes(a.rightAndBottom,E,v,h),i.chartArea={left:E.left,top:E.top,right:E.left+E.w,bottom:E.top+E.h,height:E.h,width:E.w},each(a.chartArea,b=>{const m=b.box;Object.assign(m,i.chartArea),m.update(E.w,E.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(r,n){}releaseContext(r){return!1}addEventListener(r,n,l){}removeEventListener(r,n,l){}getDevicePixelRatio(){return 1}getMaximumSize(r,n,l,w){return n=Math.max(0,n||r.width),l=l||r.height,{width:n,height:Math.max(0,w?Math.floor(n/w):l)}}isAttached(r){return!0}updateConfig(r){}}class BasicPlatform extends BasePlatform{acquireContext(r){return r&&r.getContext&&r.getContext("2d")||null}updateConfig(r){r.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=i=>i===null||i==="";function initCanvas(i,r){const n=i.style,l=i.getAttribute("height"),w=i.getAttribute("width");if(i[EXPANDO_KEY]={initial:{height:l,width:w,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",isNullOrEmpty(w)){const d=readUsedSize(i,"width");d!==void 0&&(i.width=d)}if(isNullOrEmpty(l))if(i.style.height==="")i.height=i.width/(r||2);else{const d=readUsedSize(i,"height");d!==void 0&&(i.height=d)}return i}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(i,r,n){i&&i.addEventListener(r,n,eventListenerOptions)}function removeListener(i,r,n){i&&i.canvas&&i.canvas.removeEventListener(r,n,eventListenerOptions)}function fromNativeEvent(i,r){const n=EVENT_TYPES[i.type]||i.type,{x:l,y:w}=getRelativePosition(i,r);return{type:n,chart:r,native:i,x:l!==void 0?l:null,y:w!==void 0?w:null}}function nodeListContains(i,r){for(const n of i)if(n===r||n.contains(r))return!0}function createAttachObserver(i,r,n){const l=i.canvas,w=new MutationObserver(d=>{let f=!1;for(const a of d)f=f||nodeListContains(a.addedNodes,l),f=f&&!nodeListContains(a.removedNodes,l);f&&n()});return w.observe(document,{childList:!0,subtree:!0}),w}function createDetachObserver(i,r,n){const l=i.canvas,w=new MutationObserver(d=>{let f=!1;for(const a of d)f=f||nodeListContains(a.removedNodes,l),f=f&&!nodeListContains(a.addedNodes,l);f&&n()});return w.observe(document,{childList:!0,subtree:!0}),w}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const i=window.devicePixelRatio;i!==oldDevicePixelRatio&&(oldDevicePixelRatio=i,drpListeningCharts.forEach((r,n)=>{n.currentDevicePixelRatio!==i&&r()}))}function listenDevicePixelRatioChanges(i,r){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(i,r)}function unlistenDevicePixelRatioChanges(i){drpListeningCharts.delete(i),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(i,r,n){const l=i.canvas,w=l&&_getParentNode(l);if(!w)return;const d=throttled((a,u)=>{const g=w.clientWidth;n(a,u),g<w.clientWidth&&n()},window),f=new ResizeObserver(a=>{const u=a[0],g=u.contentRect.width,$=u.contentRect.height;g===0&&$===0||d(g,$)});return f.observe(w),listenDevicePixelRatioChanges(i,d),f}function releaseObserver(i,r,n){n&&n.disconnect(),r==="resize"&&unlistenDevicePixelRatioChanges(i)}function createProxyAndListen(i,r,n){const l=i.canvas,w=throttled(d=>{i.ctx!==null&&n(fromNativeEvent(d,i))},i);return addListener(l,r,w),w}class DomPlatform extends BasePlatform{acquireContext(r,n){const l=r&&r.getContext&&r.getContext("2d");return l&&l.canvas===r?(initCanvas(r,n),l):null}releaseContext(r){const n=r.canvas;if(!n[EXPANDO_KEY])return!1;const l=n[EXPANDO_KEY].initial;["height","width"].forEach(d=>{const f=l[d];isNullOrUndef(f)?n.removeAttribute(d):n.setAttribute(d,f)});const w=l.style||{};return Object.keys(w).forEach(d=>{n.style[d]=w[d]}),n.width=n.width,delete n[EXPANDO_KEY],!0}addEventListener(r,n,l){this.removeEventListener(r,n);const w=r.$proxies||(r.$proxies={}),f={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[n]||createProxyAndListen;w[n]=f(r,n,l)}removeEventListener(r,n){const l=r.$proxies||(r.$proxies={}),w=l[n];if(!w)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[n]||removeListener)(r,n,w),l[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(r,n,l,w){return getMaximumSize(r,n,l,w)}isAttached(r){const n=r&&_getParentNode(r);return!!(n&&n.isConnected)}}function _detectPlatform(i){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?BasicPlatform:DomPlatform}var Dp;let Element$1=(Dp=class{constructor(){Vn(this,"x");Vn(this,"y");Vn(this,"active",!1);Vn(this,"options");Vn(this,"$animations")}tooltipPosition(r){const{x:n,y:l}=this.getProps(["x","y"],r);return{x:n,y:l}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(r,n){const l=this.$animations;if(!n||!l)return this;const w={};return r.forEach(d=>{w[d]=l[d]&&l[d].active()?l[d]._to:this[d]}),w}},Vn(Dp,"defaults",{}),Vn(Dp,"defaultRoutes"),Dp);function autoSkip(i,r){const n=i.options.ticks,l=determineMaxTicks(i),w=Math.min(n.maxTicksLimit||l,l),d=n.major.enabled?getMajorIndices(r):[],f=d.length,a=d[0],u=d[f-1],g=[];if(f>w)return skipMajors(r,g,d,f/w),g;const $=calculateSpacing(d,r,w);if(f>0){let v,S;const E=f>1?Math.round((u-a)/(f-1)):null;for(skip(r,g,$,isNullOrUndef(E)?0:a-E,a),v=0,S=f-1;v<S;v++)skip(r,g,$,d[v],d[v+1]);return skip(r,g,$,u,isNullOrUndef(E)?r.length:u+E),g}return skip(r,g,$),g}function determineMaxTicks(i){const r=i.options.offset,n=i._tickSize(),l=i._length/n+(r?0:1),w=i._maxLength/n;return Math.floor(Math.min(l,w))}function calculateSpacing(i,r,n){const l=getEvenSpacing(i),w=r.length/n;if(!l)return Math.max(w,1);const d=_factorize(l);for(let f=0,a=d.length-1;f<a;f++){const u=d[f];if(u>w)return u}return Math.max(w,1)}function getMajorIndices(i){const r=[];let n,l;for(n=0,l=i.length;n<l;n++)i[n].major&&r.push(n);return r}function skipMajors(i,r,n,l){let w=0,d=n[0],f;for(l=Math.ceil(l),f=0;f<i.length;f++)f===d&&(r.push(i[f]),w++,d=n[w*l])}function skip(i,r,n,l,w){const d=valueOrDefault(l,0),f=Math.min(valueOrDefault(w,i.length),i.length);let a=0,u,g,$;for(n=Math.ceil(n),w&&(u=w-l,n=u/Math.floor(u/n)),$=d;$<0;)a++,$=Math.round(d+a*n);for(g=Math.max(d,0);g<f;g++)g===$&&(r.push(i[g]),a++,$=Math.round(d+a*n))}function getEvenSpacing(i){const r=i.length;let n,l;if(r<2)return!1;for(l=i[0],n=1;n<r;++n)if(i[n]-i[n-1]!==l)return!1;return l}const reverseAlign=i=>i==="left"?"right":i==="right"?"left":i,offsetFromEdge=(i,r,n)=>r==="top"||r==="left"?i[r]+n:i[r]-n,getTicksLimit=(i,r)=>Math.min(r||i,i);function sample(i,r){const n=[],l=i.length/r,w=i.length;let d=0;for(;d<w;d+=l)n.push(i[Math.floor(d)]);return n}function getPixelForGridLine(i,r,n){const l=i.ticks.length,w=Math.min(r,l-1),d=i._startPixel,f=i._endPixel,a=1e-6;let u=i.getPixelForTick(w),g;if(!(n&&(l===1?g=Math.max(u-d,f-u):r===0?g=(i.getPixelForTick(1)-u)/2:g=(u-i.getPixelForTick(w-1))/2,u+=w<r?g:-g,u<d-a||u>f+a)))return u}function garbageCollect(i,r){each(i,n=>{const l=n.gc,w=l.length/2;let d;if(w>r){for(d=0;d<w;++d)delete n.data[l[d]];l.splice(0,w)}})}function getTickMarkLength(i){return i.drawTicks?i.tickLength:0}function getTitleHeight(i,r){if(!i.display)return 0;const n=toFont(i.font,r),l=toPadding(i.padding);return(isArray(i.text)?i.text.length:1)*n.lineHeight+l.height}function createScaleContext(i,r){return createContext(i,{scale:r,type:"scale"})}function createTickContext(i,r,n){return createContext(i,{tick:n,index:r,type:"tick"})}function titleAlign(i,r,n){let l=_toLeftRightCenter(i);return(n&&r!=="right"||!n&&r==="right")&&(l=reverseAlign(l)),l}function titleArgs(i,r,n,l){const{top:w,left:d,bottom:f,right:a,chart:u}=i,{chartArea:g,scales:$}=u;let v=0,S,E,h;const b=f-w,m=a-d;if(i.isHorizontal()){if(E=_alignStartEnd(l,d,a),isObject(n)){const p=Object.keys(n)[0],_=n[p];h=$[p].getPixelForValue(_)+b-r}else n==="center"?h=(g.bottom+g.top)/2+b-r:h=offsetFromEdge(i,n,r);S=a-d}else{if(isObject(n)){const p=Object.keys(n)[0],_=n[p];E=$[p].getPixelForValue(_)-m+r}else n==="center"?E=(g.left+g.right)/2-m+r:E=offsetFromEdge(i,n,r);h=_alignStartEnd(l,f,w),v=n==="left"?-HALF_PI:HALF_PI}return{titleX:E,titleY:h,maxWidth:S,rotation:v}}class Scale extends Element$1{constructor(r){super(),this.id=r.id,this.type=r.type,this.options=void 0,this.ctx=r.ctx,this.chart=r.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(r){this.options=r.setContext(this.getContext()),this.axis=r.axis,this._userMin=this.parse(r.min),this._userMax=this.parse(r.max),this._suggestedMin=this.parse(r.suggestedMin),this._suggestedMax=this.parse(r.suggestedMax)}parse(r,n){return r}getUserBounds(){let{_userMin:r,_userMax:n,_suggestedMin:l,_suggestedMax:w}=this;return r=finiteOrDefault(r,Number.POSITIVE_INFINITY),n=finiteOrDefault(n,Number.NEGATIVE_INFINITY),l=finiteOrDefault(l,Number.POSITIVE_INFINITY),w=finiteOrDefault(w,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(r,l),max:finiteOrDefault(n,w),minDefined:isNumberFinite(r),maxDefined:isNumberFinite(n)}}getMinMax(r){let{min:n,max:l,minDefined:w,maxDefined:d}=this.getUserBounds(),f;if(w&&d)return{min:n,max:l};const a=this.getMatchingVisibleMetas();for(let u=0,g=a.length;u<g;++u)f=a[u].controller.getMinMax(this,r),w||(n=Math.min(n,f.min)),d||(l=Math.max(l,f.max));return n=d&&n>l?l:n,l=w&&n>l?n:l,{min:finiteOrDefault(n,finiteOrDefault(l,n)),max:finiteOrDefault(l,finiteOrDefault(n,l))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const r=this.chart.data;return this.options.labels||(this.isHorizontal()?r.xLabels:r.yLabels)||r.labels||[]}getLabelItems(r=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(r))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(r,n,l){const{beginAtZero:w,grace:d,ticks:f}=this.options,a=f.sampleSize;this.beforeUpdate(),this.maxWidth=r,this.maxHeight=n,this._margins=l=Object.assign({left:0,right:0,top:0,bottom:0},l),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+l.left+l.right:this.height+l.top+l.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,d,w),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=a<this.ticks.length;this._convertTicksToLabels(u?sample(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||f.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let r=this.options.reverse,n,l;this.isHorizontal()?(n=this.left,l=this.right):(n=this.top,l=this.bottom,r=!r),this._startPixel=n,this._endPixel=l,this._reversePixels=r,this._length=l-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(r){this.chart.notifyPlugins(r,this.getContext()),callback(this.options[r],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(r){const n=this.options.ticks;let l,w,d;for(l=0,w=r.length;l<w;l++)d=r[l],d.label=callback(n.callback,[d.value,l,r],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const r=this.options,n=r.ticks,l=getTicksLimit(this.ticks.length,r.ticks.maxTicksLimit),w=n.minRotation||0,d=n.maxRotation;let f=w,a,u,g;if(!this._isVisible()||!n.display||w>=d||l<=1||!this.isHorizontal()){this.labelRotation=w;return}const $=this._getLabelSizes(),v=$.widest.width,S=$.highest.height,E=_limitValue(this.chart.width-v,0,this.maxWidth);a=r.offset?this.maxWidth/l:E/(l-1),v+6>a&&(a=E/(l-(r.offset?.5:1)),u=this.maxHeight-getTickMarkLength(r.grid)-n.padding-getTitleHeight(r.title,this.chart.options.font),g=Math.sqrt(v*v+S*S),f=toDegrees(Math.min(Math.asin(_limitValue(($.highest.height+6)/a,-1,1)),Math.asin(_limitValue(u/g,-1,1))-Math.asin(_limitValue(S/g,-1,1)))),f=Math.max(w,Math.min(d,f))),this.labelRotation=f}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const r={width:0,height:0},{chart:n,options:{ticks:l,title:w,grid:d}}=this,f=this._isVisible(),a=this.isHorizontal();if(f){const u=getTitleHeight(w,n.options.font);if(a?(r.width=this.maxWidth,r.height=getTickMarkLength(d)+u):(r.height=this.maxHeight,r.width=getTickMarkLength(d)+u),l.display&&this.ticks.length){const{first:g,last:$,widest:v,highest:S}=this._getLabelSizes(),E=l.padding*2,h=toRadians(this.labelRotation),b=Math.cos(h),m=Math.sin(h);if(a){const p=l.mirror?0:m*v.width+b*S.height;r.height=Math.min(this.maxHeight,r.height+p+E)}else{const p=l.mirror?0:b*v.width+m*S.height;r.width=Math.min(this.maxWidth,r.width+p+E)}this._calculatePadding(g,$,m,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=r.height):(this.width=r.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(r,n,l,w){const{ticks:{align:d,padding:f},position:a}=this.options,u=this.labelRotation!==0,g=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const $=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,E=0;u?g?(S=w*r.width,E=l*n.height):(S=l*r.height,E=w*n.width):d==="start"?E=n.width:d==="end"?S=r.width:d!=="inner"&&(S=r.width/2,E=n.width/2),this.paddingLeft=Math.max((S-$+f)*this.width/(this.width-$),0),this.paddingRight=Math.max((E-v+f)*this.width/(this.width-v),0)}else{let $=n.height/2,v=r.height/2;d==="start"?($=0,v=r.height):d==="end"&&($=n.height,v=0),this.paddingTop=$+f,this.paddingBottom=v+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:r,position:n}=this.options;return n==="top"||n==="bottom"||r==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(r){this.beforeTickToLabelConversion(),this.generateTickLabels(r);let n,l;for(n=0,l=r.length;n<l;n++)isNullOrUndef(r[n].label)&&(r.splice(n,1),l--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let r=this._labelSizes;if(!r){const n=this.options.ticks.sampleSize;let l=this.ticks;n<l.length&&(l=sample(l,n)),this._labelSizes=r=this._computeLabelSizes(l,l.length,this.options.ticks.maxTicksLimit)}return r}_computeLabelSizes(r,n,l){const{ctx:w,_longestTextCache:d}=this,f=[],a=[],u=Math.floor(n/getTicksLimit(n,l));let g=0,$=0,v,S,E,h,b,m,p,_,y,x,A;for(v=0;v<n;v+=u){if(h=r[v].label,b=this._resolveTickFontOptions(v),w.font=m=b.string,p=d[m]=d[m]||{data:{},gc:[]},_=b.lineHeight,y=x=0,!isNullOrUndef(h)&&!isArray(h))y=_measureText(w,p.data,p.gc,y,h),x=_;else if(isArray(h))for(S=0,E=h.length;S<E;++S)A=h[S],!isNullOrUndef(A)&&!isArray(A)&&(y=_measureText(w,p.data,p.gc,y,A),x+=_);f.push(y),a.push(x),g=Math.max(y,g),$=Math.max(x,$)}garbageCollect(d,n);const R=f.indexOf(g),C=a.indexOf($),k=D=>({width:f[D]||0,height:a[D]||0});return{first:k(0),last:k(n-1),widest:k(R),highest:k(C),widths:f,heights:a}}getLabelForValue(r){return r}getPixelForValue(r,n){return NaN}getValueForPixel(r){}getPixelForTick(r){const n=this.ticks;return r<0||r>n.length-1?null:this.getPixelForValue(n[r].value)}getPixelForDecimal(r){this._reversePixels&&(r=1-r);const n=this._startPixel+r*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,n,0):n)}getDecimalForPixel(r){const n=(r-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:r,max:n}=this;return r<0&&n<0?n:r>0&&n>0?r:0}getContext(r){const n=this.ticks||[];if(r>=0&&r<n.length){const l=n[r];return l.$context||(l.$context=createTickContext(this.getContext(),r,l))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const r=this.options.ticks,n=toRadians(this.labelRotation),l=Math.abs(Math.cos(n)),w=Math.abs(Math.sin(n)),d=this._getLabelSizes(),f=r.autoSkipPadding||0,a=d?d.widest.width+f:0,u=d?d.highest.height+f:0;return this.isHorizontal()?u*l>a*w?a/l:u/w:u*w<a*l?u/l:a/w}_isVisible(){const r=this.options.display;return r!=="auto"?!!r:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(r){const n=this.axis,l=this.chart,w=this.options,{grid:d,position:f,border:a}=w,u=d.offset,g=this.isHorizontal(),v=this.ticks.length+(u?1:0),S=getTickMarkLength(d),E=[],h=a.setContext(this.getContext()),b=h.display?h.width:0,m=b/2,p=function(Q){return _alignPixel(l,Q,b)};let _,y,x,A,R,C,k,D,j,V,z,W;if(f==="top")_=p(this.bottom),C=this.bottom-S,D=_-m,V=p(r.top)+m,W=r.bottom;else if(f==="bottom")_=p(this.top),V=r.top,W=p(r.bottom)-m,C=_+m,D=this.top+S;else if(f==="left")_=p(this.right),R=this.right-S,k=_-m,j=p(r.left)+m,z=r.right;else if(f==="right")_=p(this.left),j=r.left,z=p(r.right)-m,R=_+m,k=this.left+S;else if(n==="x"){if(f==="center")_=p((r.top+r.bottom)/2+.5);else if(isObject(f)){const Q=Object.keys(f)[0],se=f[Q];_=p(this.chart.scales[Q].getPixelForValue(se))}V=r.top,W=r.bottom,C=_+m,D=C+S}else if(n==="y"){if(f==="center")_=p((r.left+r.right)/2);else if(isObject(f)){const Q=Object.keys(f)[0],se=f[Q];_=p(this.chart.scales[Q].getPixelForValue(se))}R=_-m,k=R-S,j=r.left,z=r.right}const ee=valueOrDefault(w.ticks.maxTicksLimit,v),ne=Math.max(1,Math.ceil(v/ee));for(y=0;y<v;y+=ne){const Q=this.getContext(y),se=d.setContext(Q),be=a.setContext(Q),H=se.lineWidth,P=se.color,L=be.dash||[],F=be.dashOffset,M=se.tickWidth,U=se.tickColor,Z=se.tickBorderDash||[],K=se.tickBorderDashOffset;x=getPixelForGridLine(this,y,u),x!==void 0&&(A=_alignPixel(l,x,H),g?R=k=j=z=A:C=D=V=W=A,E.push({tx1:R,ty1:C,tx2:k,ty2:D,x1:j,y1:V,x2:z,y2:W,width:H,color:P,borderDash:L,borderDashOffset:F,tickWidth:M,tickColor:U,tickBorderDash:Z,tickBorderDashOffset:K}))}return this._ticksLength=v,this._borderValue=_,E}_computeLabelItems(r){const n=this.axis,l=this.options,{position:w,ticks:d}=l,f=this.isHorizontal(),a=this.ticks,{align:u,crossAlign:g,padding:$,mirror:v}=d,S=getTickMarkLength(l.grid),E=S+$,h=v?-$:E,b=-toRadians(this.labelRotation),m=[];let p,_,y,x,A,R,C,k,D,j,V,z,W="middle";if(w==="top")R=this.bottom-h,C=this._getXAxisLabelAlignment();else if(w==="bottom")R=this.top+h,C=this._getXAxisLabelAlignment();else if(w==="left"){const ne=this._getYAxisLabelAlignment(S);C=ne.textAlign,A=ne.x}else if(w==="right"){const ne=this._getYAxisLabelAlignment(S);C=ne.textAlign,A=ne.x}else if(n==="x"){if(w==="center")R=(r.top+r.bottom)/2+E;else if(isObject(w)){const ne=Object.keys(w)[0],Q=w[ne];R=this.chart.scales[ne].getPixelForValue(Q)+E}C=this._getXAxisLabelAlignment()}else if(n==="y"){if(w==="center")A=(r.left+r.right)/2-E;else if(isObject(w)){const ne=Object.keys(w)[0],Q=w[ne];A=this.chart.scales[ne].getPixelForValue(Q)}C=this._getYAxisLabelAlignment(S).textAlign}n==="y"&&(u==="start"?W="top":u==="end"&&(W="bottom"));const ee=this._getLabelSizes();for(p=0,_=a.length;p<_;++p){y=a[p],x=y.label;const ne=d.setContext(this.getContext(p));k=this.getPixelForTick(p)+d.labelOffset,D=this._resolveTickFontOptions(p),j=D.lineHeight,V=isArray(x)?x.length:1;const Q=V/2,se=ne.color,be=ne.textStrokeColor,H=ne.textStrokeWidth;let P=C;f?(A=k,C==="inner"&&(p===_-1?P=this.options.reverse?"left":"right":p===0?P=this.options.reverse?"right":"left":P="center"),w==="top"?g==="near"||b!==0?z=-V*j+j/2:g==="center"?z=-ee.highest.height/2-Q*j+j:z=-ee.highest.height+j/2:g==="near"||b!==0?z=j/2:g==="center"?z=ee.highest.height/2-Q*j:z=ee.highest.height-V*j,v&&(z*=-1),b!==0&&!ne.showLabelBackdrop&&(A+=j/2*Math.sin(b))):(R=k,z=(1-V)*j/2);let L;if(ne.showLabelBackdrop){const F=toPadding(ne.backdropPadding),M=ee.heights[p],U=ee.widths[p];let Z=z-F.top,K=0-F.left;switch(W){case"middle":Z-=M/2;break;case"bottom":Z-=M;break}switch(C){case"center":K-=U/2;break;case"right":K-=U;break;case"inner":p===_-1?K-=U:p>0&&(K-=U/2);break}L={left:K,top:Z,width:U+F.width,height:M+F.height,color:ne.backdropColor}}m.push({label:x,font:D,textOffset:z,options:{rotation:b,color:se,strokeColor:be,strokeWidth:H,textAlign:P,textBaseline:W,translation:[A,R],backdrop:L}})}return m}_getXAxisLabelAlignment(){const{position:r,ticks:n}=this.options;if(-toRadians(this.labelRotation))return r==="top"?"left":"right";let w="center";return n.align==="start"?w="left":n.align==="end"?w="right":n.align==="inner"&&(w="inner"),w}_getYAxisLabelAlignment(r){const{position:n,ticks:{crossAlign:l,mirror:w,padding:d}}=this.options,f=this._getLabelSizes(),a=r+d,u=f.widest.width;let g,$;return n==="left"?w?($=this.right+d,l==="near"?g="left":l==="center"?(g="center",$+=u/2):(g="right",$+=u)):($=this.right-a,l==="near"?g="right":l==="center"?(g="center",$-=u/2):(g="left",$=this.left)):n==="right"?w?($=this.left+d,l==="near"?g="right":l==="center"?(g="center",$-=u/2):(g="left",$-=u)):($=this.left+a,l==="near"?g="left":l==="center"?(g="center",$+=u/2):(g="right",$=this.right)):g="right",{textAlign:g,x:$}}_computeLabelArea(){if(this.options.ticks.mirror)return;const r=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:r.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:r.width}}drawBackground(){const{ctx:r,options:{backgroundColor:n},left:l,top:w,width:d,height:f}=this;n&&(r.save(),r.fillStyle=n,r.fillRect(l,w,d,f),r.restore())}getLineWidthForValue(r){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const w=this.ticks.findIndex(d=>d.value===r);return w>=0?n.setContext(this.getContext(w)).lineWidth:0}drawGrid(r){const n=this.options.grid,l=this.ctx,w=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(r));let d,f;const a=(u,g,$)=>{!$.width||!$.color||(l.save(),l.lineWidth=$.width,l.strokeStyle=$.color,l.setLineDash($.borderDash||[]),l.lineDashOffset=$.borderDashOffset,l.beginPath(),l.moveTo(u.x,u.y),l.lineTo(g.x,g.y),l.stroke(),l.restore())};if(n.display)for(d=0,f=w.length;d<f;++d){const u=w[d];n.drawOnChartArea&&a({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&a({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:r,ctx:n,options:{border:l,grid:w}}=this,d=l.setContext(this.getContext()),f=l.display?d.width:0;if(!f)return;const a=w.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let g,$,v,S;this.isHorizontal()?(g=_alignPixel(r,this.left,f)-f/2,$=_alignPixel(r,this.right,a)+a/2,v=S=u):(v=_alignPixel(r,this.top,f)-f/2,S=_alignPixel(r,this.bottom,a)+a/2,g=$=u),n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.beginPath(),n.moveTo(g,v),n.lineTo($,S),n.stroke(),n.restore()}drawLabels(r){if(!this.options.ticks.display)return;const l=this.ctx,w=this._computeLabelArea();w&&clipArea(l,w);const d=this.getLabelItems(r);for(const f of d){const a=f.options,u=f.font,g=f.label,$=f.textOffset;renderText(l,g,0,$,u,a)}w&&unclipArea(l)}drawTitle(){const{ctx:r,options:{position:n,title:l,reverse:w}}=this;if(!l.display)return;const d=toFont(l.font),f=toPadding(l.padding),a=l.align;let u=d.lineHeight/2;n==="bottom"||n==="center"||isObject(n)?(u+=f.bottom,isArray(l.text)&&(u+=d.lineHeight*(l.text.length-1))):u+=f.top;const{titleX:g,titleY:$,maxWidth:v,rotation:S}=titleArgs(this,u,n,a);renderText(r,l.text,0,0,d,{color:l.color,maxWidth:v,rotation:S,textAlign:titleAlign(a,n,w),textBaseline:"middle",translation:[g,$]})}draw(r){this._isVisible()&&(this.drawBackground(),this.drawGrid(r),this.drawBorder(),this.drawTitle(),this.drawLabels(r))}_layers(){const r=this.options,n=r.ticks&&r.ticks.z||0,l=valueOrDefault(r.grid&&r.grid.z,-1),w=valueOrDefault(r.border&&r.border.z,0);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:n,draw:d=>{this.draw(d)}}]:[{z:l,draw:d=>{this.drawBackground(),this.drawGrid(d),this.drawTitle()}},{z:w,draw:()=>{this.drawBorder()}},{z:n,draw:d=>{this.drawLabels(d)}}]}getMatchingVisibleMetas(r){const n=this.chart.getSortedVisibleDatasetMetas(),l=this.axis+"AxisID",w=[];let d,f;for(d=0,f=n.length;d<f;++d){const a=n[d];a[l]===this.id&&(!r||a.type===r)&&w.push(a)}return w}_resolveTickFontOptions(r){const n=this.options.ticks.setContext(this.getContext(r));return toFont(n.font)}_maxDigits(){const r=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/r}}class TypedRegistry{constructor(r,n,l){this.type=r,this.scope=n,this.override=l,this.items=Object.create(null)}isForType(r){return Object.prototype.isPrototypeOf.call(this.type.prototype,r.prototype)}register(r){const n=Object.getPrototypeOf(r);let l;isIChartComponent(n)&&(l=this.register(n));const w=this.items,d=r.id,f=this.scope+"."+d;if(!d)throw new Error("class does not have id: "+r);return d in w||(w[d]=r,registerDefaults(r,f,l),this.override&&defaults.override(r.id,r.overrides)),f}get(r){return this.items[r]}unregister(r){const n=this.items,l=r.id,w=this.scope;l in n&&delete n[l],w&&l in defaults[w]&&(delete defaults[w][l],this.override&&delete overrides[l])}}function registerDefaults(i,r,n){const l=merge(Object.create(null),[n?defaults.get(n):{},defaults.get(r),i.defaults]);defaults.set(r,l),i.defaultRoutes&&routeDefaults(r,i.defaultRoutes),i.descriptors&&defaults.describe(r,i.descriptors)}function routeDefaults(i,r){Object.keys(r).forEach(n=>{const l=n.split("."),w=l.pop(),d=[i].concat(l).join("."),f=r[n].split("."),a=f.pop(),u=f.join(".");defaults.route(d,w,u,a)})}function isIChartComponent(i){return"id"in i&&"defaults"in i}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element$1,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...r){this._each("register",r)}remove(...r){this._each("unregister",r)}addControllers(...r){this._each("register",r,this.controllers)}addElements(...r){this._each("register",r,this.elements)}addPlugins(...r){this._each("register",r,this.plugins)}addScales(...r){this._each("register",r,this.scales)}getController(r){return this._get(r,this.controllers,"controller")}getElement(r){return this._get(r,this.elements,"element")}getPlugin(r){return this._get(r,this.plugins,"plugin")}getScale(r){return this._get(r,this.scales,"scale")}removeControllers(...r){this._each("unregister",r,this.controllers)}removeElements(...r){this._each("unregister",r,this.elements)}removePlugins(...r){this._each("unregister",r,this.plugins)}removeScales(...r){this._each("unregister",r,this.scales)}_each(r,n,l){[...n].forEach(w=>{const d=l||this._getRegistryForType(w);l||d.isForType(w)||d===this.plugins&&w.id?this._exec(r,d,w):each(w,f=>{const a=l||this._getRegistryForType(f);this._exec(r,a,f)})})}_exec(r,n,l){const w=_capitalize(r);callback(l["before"+w],[],l),n[r](l),callback(l["after"+w],[],l)}_getRegistryForType(r){for(let n=0;n<this._typedRegistries.length;n++){const l=this._typedRegistries[n];if(l.isForType(r))return l}return this.plugins}_get(r,n,l){const w=n.get(r);if(w===void 0)throw new Error('"'+r+'" is not a registered '+l+".");return w}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(r,n,l,w){n==="beforeInit"&&(this._init=this._createDescriptors(r,!0),this._notify(this._init,r,"install"));const d=w?this._descriptors(r).filter(w):this._descriptors(r),f=this._notify(d,r,n,l);return n==="afterDestroy"&&(this._notify(d,r,"stop"),this._notify(this._init,r,"uninstall")),f}_notify(r,n,l,w){w=w||{};for(const d of r){const f=d.plugin,a=f[l],u=[n,w,d.options];if(callback(a,u,f)===!1&&w.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(r){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(r);return this._notifyStateChanges(r),n}_createDescriptors(r,n){const l=r&&r.config,w=valueOrDefault(l.options&&l.options.plugins,{}),d=allPlugins(l);return w===!1&&!n?[]:createDescriptors(r,d,w,n)}_notifyStateChanges(r){const n=this._oldCache||[],l=this._cache,w=(d,f)=>d.filter(a=>!f.some(u=>a.plugin.id===u.plugin.id));this._notify(w(n,l),r,"stop"),this._notify(w(l,n),r,"start")}}function allPlugins(i){const r={},n=[],l=Object.keys(registry.plugins.items);for(let d=0;d<l.length;d++)n.push(registry.getPlugin(l[d]));const w=i.plugins||[];for(let d=0;d<w.length;d++){const f=w[d];n.indexOf(f)===-1&&(n.push(f),r[f.id]=!0)}return{plugins:n,localIds:r}}function getOpts(i,r){return!r&&i===!1?null:i===!0?{}:i}function createDescriptors(i,{plugins:r,localIds:n},l,w){const d=[],f=i.getContext();for(const a of r){const u=a.id,g=getOpts(l[u],w);g!==null&&d.push({plugin:a,options:pluginOpts(i.config,{plugin:a,local:n[u]},g,f)})}return d}function pluginOpts(i,{plugin:r,local:n},l,w){const d=i.pluginScopeKeys(r),f=i.getOptionScopes(l,d);return n&&r.defaults&&f.push(r.defaults),i.createResolver(f,w,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(i,r){const n=defaults.datasets[i]||{};return((r.datasets||{})[i]||{}).indexAxis||r.indexAxis||n.indexAxis||"x"}function getAxisFromDefaultScaleID(i,r){let n=i;return i==="_index_"?n=r:i==="_value_"&&(n=r==="x"?"y":"x"),n}function getDefaultScaleIDFromAxis(i,r){return i===r?"_index_":"_value_"}function idMatchesAxis(i){if(i==="x"||i==="y"||i==="r")return i}function axisFromPosition(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function determineAxis(i,...r){if(idMatchesAxis(i))return i;for(const n of r){const l=n.axis||axisFromPosition(n.position)||i.length>1&&idMatchesAxis(i[0].toLowerCase());if(l)return l}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function getAxisFromDataset(i,r,n){if(n[r+"AxisID"]===i)return{axis:r}}function retrieveAxisFromDatasets(i,r){if(r.data&&r.data.datasets){const n=r.data.datasets.filter(l=>l.xAxisID===i||l.yAxisID===i);if(n.length)return getAxisFromDataset(i,"x",n[0])||getAxisFromDataset(i,"y",n[0])}return{}}function mergeScaleConfig(i,r){const n=overrides[i.type]||{scales:{}},l=r.scales||{},w=getIndexAxis(i.type,r),d=Object.create(null);return Object.keys(l).forEach(f=>{const a=l[f];if(!isObject(a))return console.error(`Invalid scale configuration for scale: ${f}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${f}`);const u=determineAxis(f,a,retrieveAxisFromDatasets(f,i),defaults.scales[a.type]),g=getDefaultScaleIDFromAxis(u,w),$=n.scales||{};d[f]=mergeIf(Object.create(null),[{axis:u},a,$[u],$[g]])}),i.data.datasets.forEach(f=>{const a=f.type||i.type,u=f.indexAxis||getIndexAxis(a,r),$=(overrides[a]||{}).scales||{};Object.keys($).forEach(v=>{const S=getAxisFromDefaultScaleID(v,u),E=f[S+"AxisID"]||S;d[E]=d[E]||Object.create(null),mergeIf(d[E],[{axis:S},l[E],$[v]])})}),Object.keys(d).forEach(f=>{const a=d[f];mergeIf(a,[defaults.scales[a.type],defaults.scale])}),d}function initOptions(i){const r=i.options||(i.options={});r.plugins=valueOrDefault(r.plugins,{}),r.scales=mergeScaleConfig(i,r)}function initData(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function initConfig(i){return i=i||{},i.data=initData(i.data),initOptions(i),i}const keyCache=new Map,keysCached=new Set;function cachedKeys(i,r){let n=keyCache.get(i);return n||(n=r(),keyCache.set(i,n),keysCached.add(n)),n}const addIfFound=(i,r,n)=>{const l=resolveObjectKey(r,n);l!==void 0&&i.add(l)};class Config{constructor(r){this._config=initConfig(r),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(r){this._config.type=r}get data(){return this._config.data}set data(r){this._config.data=initData(r)}get options(){return this._config.options}set options(r){this._config.options=r}get plugins(){return this._config.plugins}update(){const r=this._config;this.clearCache(),initOptions(r)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(r){return cachedKeys(r,()=>[[`datasets.${r}`,""]])}datasetAnimationScopeKeys(r,n){return cachedKeys(`${r}.transition.${n}`,()=>[[`datasets.${r}.transitions.${n}`,`transitions.${n}`],[`datasets.${r}`,""]])}datasetElementScopeKeys(r,n){return cachedKeys(`${r}-${n}`,()=>[[`datasets.${r}.elements.${n}`,`datasets.${r}`,`elements.${n}`,""]])}pluginScopeKeys(r){const n=r.id,l=this.type;return cachedKeys(`${l}-plugin-${n}`,()=>[[`plugins.${n}`,...r.additionalOptionScopes||[]]])}_cachedScopes(r,n){const l=this._scopeCache;let w=l.get(r);return(!w||n)&&(w=new Map,l.set(r,w)),w}getOptionScopes(r,n,l){const{options:w,type:d}=this,f=this._cachedScopes(r,l),a=f.get(n);if(a)return a;const u=new Set;n.forEach($=>{r&&(u.add(r),$.forEach(v=>addIfFound(u,r,v))),$.forEach(v=>addIfFound(u,w,v)),$.forEach(v=>addIfFound(u,overrides[d]||{},v)),$.forEach(v=>addIfFound(u,defaults,v)),$.forEach(v=>addIfFound(u,descriptors,v))});const g=Array.from(u);return g.length===0&&g.push(Object.create(null)),keysCached.has(n)&&f.set(n,g),g}chartOptionScopes(){const{options:r,type:n}=this;return[r,overrides[n]||{},defaults.datasets[n]||{},{type:n},defaults,descriptors]}resolveNamedOptions(r,n,l,w=[""]){const d={$shared:!0},{resolver:f,subPrefixes:a}=getResolver(this._resolverCache,r,w);let u=f;if(needContext(f,n)){d.$shared=!1,l=isFunction(l)?l():l;const g=this.createResolver(r,l,a);u=_attachContext(f,l,g)}for(const g of n)d[g]=u[g];return d}createResolver(r,n,l=[""],w){const{resolver:d}=getResolver(this._resolverCache,r,l);return isObject(n)?_attachContext(d,n,void 0,w):d}}function getResolver(i,r,n){let l=i.get(r);l||(l=new Map,i.set(r,l));const w=n.join();let d=l.get(w);return d||(d={resolver:_createResolver(r,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},l.set(w,d)),d}const hasFunction=i=>isObject(i)&&Object.getOwnPropertyNames(i).some(r=>isFunction(i[r]));function needContext(i,r){const{isScriptable:n,isIndexable:l}=_descriptors(i);for(const w of r){const d=n(w),f=l(w),a=(f||d)&&i[w];if(d&&(isFunction(a)||hasFunction(a))||f&&isArray(a))return!0}return!1}var version="4.4.9";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(i,r){return i==="top"||i==="bottom"||KNOWN_POSITIONS.indexOf(i)===-1&&r==="x"}function compare2Level(i,r){return function(n,l){return n[i]===l[i]?n[r]-l[r]:n[i]-l[i]}}function onAnimationsComplete(i){const r=i.chart,n=r.options.animation;r.notifyPlugins("afterRender"),callback(n&&n.onComplete,[i],r)}function onAnimationProgress(i){const r=i.chart,n=r.options.animation;callback(n&&n.onProgress,[i],r)}function getCanvas(i){return _isDomSupported()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const instances={},getChart=i=>{const r=getCanvas(i);return Object.values(instances).filter(n=>n.canvas===r).pop()};function moveNumericKeys(i,r,n){const l=Object.keys(i);for(const w of l){const d=+w;if(d>=r){const f=i[w];delete i[w],(n>0||d>r)&&(i[d+n]=f)}}}function determineLastEvent(i,r,n,l){return!n||i.type==="mouseout"?null:l?r:i}var lc;let Chart$1=(lc=class{static register(...r){registry.add(...r),invalidatePlugins()}static unregister(...r){registry.remove(...r),invalidatePlugins()}constructor(r,n){const l=this.config=new Config(n),w=getCanvas(r),d=getChart(w);if(d)throw new Error("Canvas is already in use. Chart with ID '"+d.id+"' must be destroyed before the canvas with ID '"+d.canvas.id+"' can be reused.");const f=l.createResolver(l.chartOptionScopes(),this.getContext());this.platform=new(l.platform||_detectPlatform(w)),this.platform.updateConfig(l);const a=this.platform.acquireContext(w,f.aspectRatio),u=a&&a.canvas,g=u&&u.height,$=u&&u.width;if(this.id=uid(),this.ctx=a,this.canvas=u,this.width=$,this.height=g,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(v=>this.update(v),f.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!a||!u){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:r,maintainAspectRatio:n},width:l,height:w,_aspectRatio:d}=this;return isNullOrUndef(r)?n&&d?d:w?l/w:null:r}get data(){return this.config.data}set data(r){this.config.data=r}get options(){return this._options}set options(r){this.config.options=r}get registry(){return registry}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(r,n){animator.running(this)?this._resizeBeforeDraw={width:r,height:n}:this._resize(r,n)}_resize(r,n){const l=this.options,w=this.canvas,d=l.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(w,r,n,d),a=l.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,retinaScale(this,a,!0)&&(this.notifyPlugins("resize",{size:f}),callback(l.onResize,[this,f],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};each(n,(l,w)=>{l.id=w})}buildOrUpdateScales(){const r=this.options,n=r.scales,l=this.scales,w=Object.keys(l).reduce((f,a)=>(f[a]=!1,f),{});let d=[];n&&(d=d.concat(Object.keys(n).map(f=>{const a=n[f],u=determineAxis(f,a),g=u==="r",$=u==="x";return{options:a,dposition:g?"chartArea":$?"bottom":"left",dtype:g?"radialLinear":$?"category":"linear"}}))),each(d,f=>{const a=f.options,u=a.id,g=determineAxis(u,a),$=valueOrDefault(a.type,f.dtype);(a.position===void 0||positionIsHorizontal(a.position,g)!==positionIsHorizontal(f.dposition))&&(a.position=f.dposition),w[u]=!0;let v=null;if(u in l&&l[u].type===$)v=l[u];else{const S=registry.getScale($);v=new S({id:u,type:$,ctx:this.ctx,chart:this}),l[v.id]=v}v.init(a,r)}),each(w,(f,a)=>{f||delete l[a]}),each(l,f=>{layouts.configure(this,f,f.options),layouts.addBox(this,f)})}_updateMetasets(){const r=this._metasets,n=this.data.datasets.length,l=r.length;if(r.sort((w,d)=>w.index-d.index),l>n){for(let w=n;w<l;++w)this._destroyDatasetMeta(w);r.splice(n,l-n)}this._sortedMetasets=r.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:r,data:{datasets:n}}=this;r.length>n.length&&delete this._stacks,r.forEach((l,w)=>{n.filter(d=>d===l._dataset).length===0&&this._destroyDatasetMeta(w)})}buildOrUpdateControllers(){const r=[],n=this.data.datasets;let l,w;for(this._removeUnreferencedMetasets(),l=0,w=n.length;l<w;l++){const d=n[l];let f=this.getDatasetMeta(l);const a=d.type||this.config.type;if(f.type&&f.type!==a&&(this._destroyDatasetMeta(l),f=this.getDatasetMeta(l)),f.type=a,f.indexAxis=d.indexAxis||getIndexAxis(a,this.options),f.order=d.order||0,f.index=l,f.label=""+d.label,f.visible=this.isDatasetVisible(l),f.controller)f.controller.updateIndex(l),f.controller.linkScales();else{const u=registry.getController(a),{datasetElementType:g,dataElementType:$}=defaults.datasets[a];Object.assign(u,{dataElementType:registry.getElement($),datasetElementType:g&&registry.getElement(g)}),f.controller=new u(this,l),r.push(f.controller)}}return this._updateMetasets(),r}_resetElements(){each(this.data.datasets,(r,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(r){const n=this.config;n.update();const l=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),w=this._animationsDisabled=!l.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:r,cancelable:!0})===!1)return;const d=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let g=0,$=this.data.datasets.length;g<$;g++){const{controller:v}=this.getDatasetMeta(g),S=!w&&d.indexOf(v)===-1;v.buildOrUpdateElements(S),f=Math.max(+v.getMaxOverflow(),f)}f=this._minPadding=l.layout.autoPadding?f:0,this._updateLayout(f),w||each(d,g=>{g.reset()}),this._updateDatasets(r),this.notifyPlugins("afterUpdate",{mode:r}),this._layers.sort(compare2Level("z","_idx"));const{_active:a,_lastEvent:u}=this;u?this._eventHandler(u,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){each(this.scales,r=>{layouts.removeBox(this,r)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const r=this.options,n=new Set(Object.keys(this._listeners)),l=new Set(r.events);(!setsEqual(n,l)||!!this._responsiveListeners!==r.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:r}=this,n=this._getUniformDataChanges()||[];for(const{method:l,start:w,count:d}of n){const f=l==="_removeElements"?-d:d;moveNumericKeys(r,w,f)}}_getUniformDataChanges(){const r=this._dataChanges;if(!r||!r.length)return;this._dataChanges=[];const n=this.data.datasets.length,l=d=>new Set(r.filter(f=>f[0]===d).map((f,a)=>a+","+f.splice(1).join(","))),w=l(0);for(let d=1;d<n;d++)if(!setsEqual(w,l(d)))return;return Array.from(w).map(d=>d.split(",")).map(d=>({method:d[1],start:+d[2],count:+d[3]}))}_updateLayout(r){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,r);const n=this.chartArea,l=n.width<=0||n.height<=0;this._layers=[],each(this.boxes,w=>{l&&w.position==="chartArea"||(w.configure&&w.configure(),this._layers.push(...w._layers()))},this),this._layers.forEach((w,d)=>{w._idx=d}),this.notifyPlugins("afterLayout")}_updateDatasets(r){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:r,cancelable:!0})!==!1){for(let n=0,l=this.data.datasets.length;n<l;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,l=this.data.datasets.length;n<l;++n)this._updateDataset(n,isFunction(r)?r({datasetIndex:n}):r);this.notifyPlugins("afterDatasetsUpdate",{mode:r})}}_updateDataset(r,n){const l=this.getDatasetMeta(r),w={meta:l,index:r,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",w)!==!1&&(l.controller._update(n),w.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",w))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let r;if(this._resizeBeforeDraw){const{width:l,height:w}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(l,w)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(r=0;r<n.length&&n[r].z<=0;++r)n[r].draw(this.chartArea);for(this._drawDatasets();r<n.length;++r)n[r].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(r){const n=this._sortedMetasets,l=[];let w,d;for(w=0,d=n.length;w<d;++w){const f=n[w];(!r||f.visible)&&l.push(f)}return l}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const r=this.getSortedVisibleDatasetMetas();for(let n=r.length-1;n>=0;--n)this._drawDataset(r[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(r){const n=this.ctx,l={meta:r,index:r.index,cancelable:!0},w=getDatasetClipArea(this,r);this.notifyPlugins("beforeDatasetDraw",l)!==!1&&(w&&clipArea(n,w),r.controller.draw(),w&&unclipArea(n),l.cancelable=!1,this.notifyPlugins("afterDatasetDraw",l))}isPointInArea(r){return _isPointInArea(r,this.chartArea,this._minPadding)}getElementsAtEventForMode(r,n,l,w){const d=Interaction.modes[n];return typeof d=="function"?d(this,r,l,w):[]}getDatasetMeta(r){const n=this.data.datasets[r],l=this._metasets;let w=l.filter(d=>d&&d._dataset===n).pop();return w||(w={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:r,_dataset:n,_parsed:[],_sorted:!1},l.push(w)),w}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(r){const n=this.data.datasets[r];if(!n)return!1;const l=this.getDatasetMeta(r);return typeof l.hidden=="boolean"?!l.hidden:!n.hidden}setDatasetVisibility(r,n){const l=this.getDatasetMeta(r);l.hidden=!n}toggleDataVisibility(r){this._hiddenIndices[r]=!this._hiddenIndices[r]}getDataVisibility(r){return!this._hiddenIndices[r]}_updateVisibility(r,n,l){const w=l?"show":"hide",d=this.getDatasetMeta(r),f=d.controller._resolveAnimations(void 0,w);defined(n)?(d.data[n].hidden=!l,this.update()):(this.setDatasetVisibility(r,l),f.update(d,{visible:l}),this.update(a=>a.datasetIndex===r?w:void 0))}hide(r,n){this._updateVisibility(r,n,!1)}show(r,n){this._updateVisibility(r,n,!0)}_destroyDatasetMeta(r){const n=this._metasets[r];n&&n.controller&&n.controller._destroy(),delete this._metasets[r]}_stop(){let r,n;for(this.stop(),animator.remove(this),r=0,n=this.data.datasets.length;r<n;++r)this._destroyDatasetMeta(r)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:r,ctx:n}=this;this._stop(),this.config.clearCache(),r&&(this.unbindEvents(),clearCanvas(r,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...r){return this.canvas.toDataURL(...r)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const r=this._listeners,n=this.platform,l=(d,f)=>{n.addEventListener(this,d,f),r[d]=f},w=(d,f,a)=>{d.offsetX=f,d.offsetY=a,this._eventHandler(d)};each(this.options.events,d=>l(d,w))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const r=this._responsiveListeners,n=this.platform,l=(u,g)=>{n.addEventListener(this,u,g),r[u]=g},w=(u,g)=>{r[u]&&(n.removeEventListener(this,u,g),delete r[u])},d=(u,g)=>{this.canvas&&this.resize(u,g)};let f;const a=()=>{w("attach",a),this.attached=!0,this.resize(),l("resize",d),l("detach",f)};f=()=>{this.attached=!1,w("resize",d),this._stop(),this._resize(0,0),l("attach",a)},n.isAttached(this.canvas)?a():f()}unbindEvents(){each(this._listeners,(r,n)=>{this.platform.removeEventListener(this,n,r)}),this._listeners={},each(this._responsiveListeners,(r,n)=>{this.platform.removeEventListener(this,n,r)}),this._responsiveListeners=void 0}updateHoverStyle(r,n,l){const w=l?"set":"remove";let d,f,a,u;for(n==="dataset"&&(d=this.getDatasetMeta(r[0].datasetIndex),d.controller["_"+w+"DatasetHoverStyle"]()),a=0,u=r.length;a<u;++a){f=r[a];const g=f&&this.getDatasetMeta(f.datasetIndex).controller;g&&g[w+"HoverStyle"](f.element,f.datasetIndex,f.index)}}getActiveElements(){return this._active||[]}setActiveElements(r){const n=this._active||[],l=r.map(({datasetIndex:d,index:f})=>{const a=this.getDatasetMeta(d);if(!a)throw new Error("No dataset found at index "+d);return{datasetIndex:d,element:a.data[f],index:f}});!_elementsEqual(l,n)&&(this._active=l,this._lastEvent=null,this._updateHoverStyles(l,n))}notifyPlugins(r,n,l){return this._plugins.notify(this,r,n,l)}isPluginEnabled(r){return this._plugins._cache.filter(n=>n.plugin.id===r).length===1}_updateHoverStyles(r,n,l){const w=this.options.hover,d=(u,g)=>u.filter($=>!g.some(v=>$.datasetIndex===v.datasetIndex&&$.index===v.index)),f=d(n,r),a=l?r:d(r,n);f.length&&this.updateHoverStyle(f,w.mode,!1),a.length&&w.mode&&this.updateHoverStyle(a,w.mode,!0)}_eventHandler(r,n){const l={event:r,replay:n,cancelable:!0,inChartArea:this.isPointInArea(r)},w=f=>(f.options.events||this.options.events).includes(r.native.type);if(this.notifyPlugins("beforeEvent",l,w)===!1)return;const d=this._handleEvent(r,n,l.inChartArea);return l.cancelable=!1,this.notifyPlugins("afterEvent",l,w),(d||l.changed)&&this.render(),this}_handleEvent(r,n,l){const{_active:w=[],options:d}=this,f=n,a=this._getActiveElements(r,w,l,f),u=_isClickEvent(r),g=determineLastEvent(r,this._lastEvent,l,u);l&&(this._lastEvent=null,callback(d.onHover,[r,a,this],this),u&&callback(d.onClick,[r,a,this],this));const $=!_elementsEqual(a,w);return($||n)&&(this._active=a,this._updateHoverStyles(a,w,n)),this._lastEvent=g,$}_getActiveElements(r,n,l,w){if(r.type==="mouseout")return[];if(!l)return n;const d=this.options.hover;return this.getElementsAtEventForMode(r,d.mode,d,w)}},Vn(lc,"defaults",defaults),Vn(lc,"instances",instances),Vn(lc,"overrides",overrides),Vn(lc,"registry",registry),Vn(lc,"version",version),Vn(lc,"getChart",getChart),lc);function invalidatePlugins(){return each(Chart$1.instances,i=>i._plugins.invalidate())}function setStyle(i,r,n=r){i.lineCap=valueOrDefault(n.borderCapStyle,r.borderCapStyle),i.setLineDash(valueOrDefault(n.borderDash,r.borderDash)),i.lineDashOffset=valueOrDefault(n.borderDashOffset,r.borderDashOffset),i.lineJoin=valueOrDefault(n.borderJoinStyle,r.borderJoinStyle),i.lineWidth=valueOrDefault(n.borderWidth,r.borderWidth),i.strokeStyle=valueOrDefault(n.borderColor,r.borderColor)}function lineTo(i,r,n){i.lineTo(n.x,n.y)}function getLineMethod(i){return i.stepped?_steppedLineTo:i.tension||i.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(i,r,n={}){const l=i.length,{start:w=0,end:d=l-1}=n,{start:f,end:a}=r,u=Math.max(w,f),g=Math.min(d,a),$=w<f&&d<f||w>a&&d>a;return{count:l,start:u,loop:r.loop,ilen:g<u&&!$?l+g-u:g-u}}function pathSegment(i,r,n,l){const{points:w,options:d}=r,{count:f,start:a,loop:u,ilen:g}=pathVars(w,n,l),$=getLineMethod(d);let{move:v=!0,reverse:S}=l||{},E,h,b;for(E=0;E<=g;++E)h=w[(a+(S?g-E:E))%f],!h.skip&&(v?(i.moveTo(h.x,h.y),v=!1):$(i,b,h,S,d.stepped),b=h);return u&&(h=w[(a+(S?g:0))%f],$(i,b,h,S,d.stepped)),!!u}function fastPathSegment(i,r,n,l){const w=r.points,{count:d,start:f,ilen:a}=pathVars(w,n,l),{move:u=!0,reverse:g}=l||{};let $=0,v=0,S,E,h,b,m,p;const _=x=>(f+(g?a-x:x))%d,y=()=>{b!==m&&(i.lineTo($,m),i.lineTo($,b),i.lineTo($,p))};for(u&&(E=w[_(0)],i.moveTo(E.x,E.y)),S=0;S<=a;++S){if(E=w[_(S)],E.skip)continue;const x=E.x,A=E.y,R=x|0;R===h?(A<b?b=A:A>m&&(m=A),$=(v*$+x)/++v):(y(),i.lineTo(x,A),h=R,v=0,b=m=A),p=A}y()}function _getSegmentMethod(i){const r=i.options,n=r.borderDash&&r.borderDash.length;return!i._decimated&&!i._loop&&!r.tension&&r.cubicInterpolationMode!=="monotone"&&!r.stepped&&!n?fastPathSegment:pathSegment}function _getInterpolationMethod(i){return i.stepped?_steppedInterpolation:i.tension||i.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(i,r,n,l){let w=r._path;w||(w=r._path=new Path2D,r.path(w,n,l)&&w.closePath()),setStyle(i,r.options),i.stroke(w)}function strokePathDirect(i,r,n,l){const{segments:w,options:d}=r,f=_getSegmentMethod(r);for(const a of w)setStyle(i,d,a.style),i.beginPath(),f(i,r,a,{start:n,end:n+l-1})&&i.closePath(),i.stroke()}const usePath2D=typeof Path2D=="function";function draw(i,r,n,l){usePath2D&&!r.options.segment?strokePathWithCache(i,r,n,l):strokePathDirect(i,r,n,l)}class LineElement extends Element$1{constructor(r){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,r&&Object.assign(this,r)}updateControlPoints(r,n){const l=this.options;if((l.tension||l.cubicInterpolationMode==="monotone")&&!l.stepped&&!this._pointsUpdated){const w=l.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,l,r,w,n),this._pointsUpdated=!0}}set points(r){this._points=r,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const r=this.segments,n=this.points;return r.length&&n[r[0].start]}last(){const r=this.segments,n=this.points,l=r.length;return l&&n[r[l-1].end]}interpolate(r,n){const l=this.options,w=r[n],d=this.points,f=_boundSegments(this,{property:n,start:w,end:w});if(!f.length)return;const a=[],u=_getInterpolationMethod(l);let g,$;for(g=0,$=f.length;g<$;++g){const{start:v,end:S}=f[g],E=d[v],h=d[S];if(E===h){a.push(E);continue}const b=Math.abs((w-E[n])/(h[n]-E[n])),m=u(E,h,b,l.stepped);m[n]=r[n],a.push(m)}return a.length===1?a[0]:a}pathSegment(r,n,l){return _getSegmentMethod(this)(r,this,n,l)}path(r,n,l){const w=this.segments,d=_getSegmentMethod(this);let f=this._loop;n=n||0,l=l||this.points.length-n;for(const a of w)f&=d(r,this,a,{start:n,end:n+l-1});return!!f}draw(r,n,l,w){const d=this.options||{};(this.points||[]).length&&d.borderWidth&&(r.save(),draw(r,this,l,w),r.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Vn(LineElement,"id","line"),Vn(LineElement,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Vn(LineElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Vn(LineElement,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"&&r!=="fill"});function inRange$1(i,r,n,l){const w=i.options,{[n]:d}=i.getProps([n],l);return Math.abs(r-d)<w.radius+w.hitRadius}class PointElement extends Element$1{constructor(n){super();Vn(this,"parsed");Vn(this,"skip");Vn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,l,w){const d=this.options,{x:f,y:a}=this.getProps(["x","y"],w);return Math.pow(n-f,2)+Math.pow(l-a,2)<Math.pow(d.hitRadius+d.radius,2)}inXRange(n,l){return inRange$1(this,n,"x",l)}inYRange(n,l){return inRange$1(this,n,"y",l)}getCenterPoint(n){const{x:l,y:w}=this.getProps(["x","y"],n);return{x:l,y:w}}size(n){n=n||this.options||{};let l=n.radius||0;l=Math.max(l,l&&n.hoverRadius||0);const w=l&&n.borderWidth||0;return(l+w)*2}draw(n,l){const w=this.options;this.skip||w.radius<.1||!_isPointInArea(this,l,this.size(w)/2)||(n.strokeStyle=w.borderColor,n.lineWidth=w.borderWidth,n.fillStyle=w.backgroundColor,drawPoint(n,w,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Vn(PointElement,"id","point"),Vn(PointElement,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Vn(PointElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function getBarBounds(i,r){const{x:n,y:l,base:w,width:d,height:f}=i.getProps(["x","y","base","width","height"],r);let a,u,g,$,v;return i.horizontal?(v=f/2,a=Math.min(n,w),u=Math.max(n,w),g=l-v,$=l+v):(v=d/2,a=n-v,u=n+v,g=Math.min(l,w),$=Math.max(l,w)),{left:a,top:g,right:u,bottom:$}}function skipOrLimit(i,r,n,l){return i?0:_limitValue(r,n,l)}function parseBorderWidth(i,r,n){const l=i.options.borderWidth,w=i.borderSkipped,d=toTRBL(l);return{t:skipOrLimit(w.top,d.top,0,n),r:skipOrLimit(w.right,d.right,0,r),b:skipOrLimit(w.bottom,d.bottom,0,n),l:skipOrLimit(w.left,d.left,0,r)}}function parseBorderRadius(i,r,n){const{enableBorderRadius:l}=i.getProps(["enableBorderRadius"]),w=i.options.borderRadius,d=toTRBLCorners(w),f=Math.min(r,n),a=i.borderSkipped,u=l||isObject(w);return{topLeft:skipOrLimit(!u||a.top||a.left,d.topLeft,0,f),topRight:skipOrLimit(!u||a.top||a.right,d.topRight,0,f),bottomLeft:skipOrLimit(!u||a.bottom||a.left,d.bottomLeft,0,f),bottomRight:skipOrLimit(!u||a.bottom||a.right,d.bottomRight,0,f)}}function boundingRects(i){const r=getBarBounds(i),n=r.right-r.left,l=r.bottom-r.top,w=parseBorderWidth(i,n/2,l/2),d=parseBorderRadius(i,n/2,l/2);return{outer:{x:r.left,y:r.top,w:n,h:l,radius:d},inner:{x:r.left+w.l,y:r.top+w.t,w:n-w.l-w.r,h:l-w.t-w.b,radius:{topLeft:Math.max(0,d.topLeft-Math.max(w.t,w.l)),topRight:Math.max(0,d.topRight-Math.max(w.t,w.r)),bottomLeft:Math.max(0,d.bottomLeft-Math.max(w.b,w.l)),bottomRight:Math.max(0,d.bottomRight-Math.max(w.b,w.r))}}}}function inRange(i,r,n,l){const w=r===null,d=n===null,a=i&&!(w&&d)&&getBarBounds(i,l);return a&&(w||_isBetween(r,a.left,a.right))&&(d||_isBetween(n,a.top,a.bottom))}function hasRadius(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function addNormalRectPath(i,r){i.rect(r.x,r.y,r.w,r.h)}function inflateRect(i,r,n={}){const l=i.x!==n.x?-r:0,w=i.y!==n.y?-r:0,d=(i.x+i.w!==n.x+n.w?r:0)-l,f=(i.y+i.h!==n.y+n.h?r:0)-w;return{x:i.x+l,y:i.y+w,w:i.w+d,h:i.h+f,radius:i.radius}}class BarElement extends Element$1{constructor(r){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,r&&Object.assign(this,r)}draw(r){const{inflateAmount:n,options:{borderColor:l,backgroundColor:w}}=this,{inner:d,outer:f}=boundingRects(this),a=hasRadius(f.radius)?addRoundedRectPath:addNormalRectPath;r.save(),(f.w!==d.w||f.h!==d.h)&&(r.beginPath(),a(r,inflateRect(f,n,d)),r.clip(),a(r,inflateRect(d,-n,f)),r.fillStyle=l,r.fill("evenodd")),r.beginPath(),a(r,inflateRect(d,n)),r.fillStyle=w,r.fill(),r.restore()}inRange(r,n,l){return inRange(this,r,n,l)}inXRange(r,n){return inRange(this,r,null,n)}inYRange(r,n){return inRange(this,null,r,n)}getCenterPoint(r){const{x:n,y:l,base:w,horizontal:d}=this.getProps(["x","y","base","horizontal"],r);return{x:d?(n+w)/2:n,y:d?l:(l+w)/2}}getRange(r){return r==="x"?this.width/2:this.height/2}}Vn(BarElement,"id","bar"),Vn(BarElement,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Vn(BarElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const getBoxSize=(i,r)=>{let{boxHeight:n=r,boxWidth:l=r}=i;return i.usePointStyle&&(n=Math.min(n,r),l=i.pointStyleWidth||Math.min(l,r)),{boxWidth:l,boxHeight:n,itemHeight:Math.max(r,n)}},itemsEqual=(i,r)=>i!==null&&r!==null&&i.datasetIndex===r.datasetIndex&&i.index===r.index;class Legend extends Element$1{constructor(r){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=r.chart,this.options=r.options,this.ctx=r.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(r,n,l){this.maxWidth=r,this.maxHeight=n,this._margins=l,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const r=this.options.labels||{};let n=callback(r.generateLabels,[this.chart],this)||[];r.filter&&(n=n.filter(l=>r.filter(l,this.chart.data))),r.sort&&(n=n.sort((l,w)=>r.sort(l,w,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:r,ctx:n}=this;if(!r.display){this.width=this.height=0;return}const l=r.labels,w=toFont(l.font),d=w.size,f=this._computeTitleHeight(),{boxWidth:a,itemHeight:u}=getBoxSize(l,d);let g,$;n.font=w.string,this.isHorizontal()?(g=this.maxWidth,$=this._fitRows(f,d,a,u)+10):($=this.maxHeight,g=this._fitCols(f,w,a,u)+10),this.width=Math.min(g,r.maxWidth||this.maxWidth),this.height=Math.min($,r.maxHeight||this.maxHeight)}_fitRows(r,n,l,w){const{ctx:d,maxWidth:f,options:{labels:{padding:a}}}=this,u=this.legendHitBoxes=[],g=this.lineWidths=[0],$=w+a;let v=r;d.textAlign="left",d.textBaseline="middle";let S=-1,E=-$;return this.legendItems.forEach((h,b)=>{const m=l+n/2+d.measureText(h.text).width;(b===0||g[g.length-1]+m+2*a>f)&&(v+=$,g[g.length-(b>0?0:1)]=0,E+=$,S++),u[b]={left:0,top:E,row:S,width:m,height:w},g[g.length-1]+=m+a}),v}_fitCols(r,n,l,w){const{ctx:d,maxHeight:f,options:{labels:{padding:a}}}=this,u=this.legendHitBoxes=[],g=this.columnSizes=[],$=f-r;let v=a,S=0,E=0,h=0,b=0;return this.legendItems.forEach((m,p)=>{const{itemWidth:_,itemHeight:y}=calculateItemSize(l,n,d,m,w);p>0&&E+y+2*a>$&&(v+=S+a,g.push({width:S,height:E}),h+=S+a,b++,S=E=0),u[p]={left:h,top:E,col:b,width:_,height:y},S=Math.max(S,_),E+=y+a}),v+=S,g.push({width:S,height:E}),v}adjustHitBoxes(){if(!this.options.display)return;const r=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:l,labels:{padding:w},rtl:d}}=this,f=getRtlAdapter(d,this.left,this.width);if(this.isHorizontal()){let a=0,u=_alignStartEnd(l,this.left+w,this.right-this.lineWidths[a]);for(const g of n)a!==g.row&&(a=g.row,u=_alignStartEnd(l,this.left+w,this.right-this.lineWidths[a])),g.top+=this.top+r+w,g.left=f.leftForLtr(f.x(u),g.width),u+=g.width+w}else{let a=0,u=_alignStartEnd(l,this.top+r+w,this.bottom-this.columnSizes[a].height);for(const g of n)g.col!==a&&(a=g.col,u=_alignStartEnd(l,this.top+r+w,this.bottom-this.columnSizes[a].height)),g.top=u,g.left+=this.left+w,g.left=f.leftForLtr(f.x(g.left),g.width),u+=g.height+w}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const r=this.ctx;clipArea(r,this),this._draw(),unclipArea(r)}}_draw(){const{options:r,columnSizes:n,lineWidths:l,ctx:w}=this,{align:d,labels:f}=r,a=defaults.color,u=getRtlAdapter(r.rtl,this.left,this.width),g=toFont(f.font),{padding:$}=f,v=g.size,S=v/2;let E;this.drawTitle(),w.textAlign=u.textAlign("left"),w.textBaseline="middle",w.lineWidth=.5,w.font=g.string;const{boxWidth:h,boxHeight:b,itemHeight:m}=getBoxSize(f,v),p=function(R,C,k){if(isNaN(h)||h<=0||isNaN(b)||b<0)return;w.save();const D=valueOrDefault(k.lineWidth,1);if(w.fillStyle=valueOrDefault(k.fillStyle,a),w.lineCap=valueOrDefault(k.lineCap,"butt"),w.lineDashOffset=valueOrDefault(k.lineDashOffset,0),w.lineJoin=valueOrDefault(k.lineJoin,"miter"),w.lineWidth=D,w.strokeStyle=valueOrDefault(k.strokeStyle,a),w.setLineDash(valueOrDefault(k.lineDash,[])),f.usePointStyle){const j={radius:b*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:D},V=u.xPlus(R,h/2),z=C+S;drawPointLegend(w,j,V,z,f.pointStyleWidth&&h)}else{const j=C+Math.max((v-b)/2,0),V=u.leftForLtr(R,h),z=toTRBLCorners(k.borderRadius);w.beginPath(),Object.values(z).some(W=>W!==0)?addRoundedRectPath(w,{x:V,y:j,w:h,h:b,radius:z}):w.rect(V,j,h,b),w.fill(),D!==0&&w.stroke()}w.restore()},_=function(R,C,k){renderText(w,k.text,R,C+m/2,g,{strikethrough:k.hidden,textAlign:u.textAlign(k.textAlign)})},y=this.isHorizontal(),x=this._computeTitleHeight();y?E={x:_alignStartEnd(d,this.left+$,this.right-l[0]),y:this.top+$+x,line:0}:E={x:this.left+$,y:_alignStartEnd(d,this.top+x+$,this.bottom-n[0].height),line:0},overrideTextDirection(this.ctx,r.textDirection);const A=m+$;this.legendItems.forEach((R,C)=>{w.strokeStyle=R.fontColor,w.fillStyle=R.fontColor;const k=w.measureText(R.text).width,D=u.textAlign(R.textAlign||(R.textAlign=f.textAlign)),j=h+S+k;let V=E.x,z=E.y;u.setWidth(this.width),y?C>0&&V+j+$>this.right&&(z=E.y+=A,E.line++,V=E.x=_alignStartEnd(d,this.left+$,this.right-l[E.line])):C>0&&z+A>this.bottom&&(V=E.x=V+n[E.line].width+$,E.line++,z=E.y=_alignStartEnd(d,this.top+x+$,this.bottom-n[E.line].height));const W=u.x(V);if(p(W,z,R),V=_textX(D,V+h+S,y?V+j:this.right,r.rtl),_(u.x(V),z,R),y)E.x+=j+$;else if(typeof R.text!="string"){const ee=g.lineHeight;E.y+=calculateLegendItemHeight(R,ee)+$}else E.y+=A}),restoreTextDirection(this.ctx,r.textDirection)}drawTitle(){const r=this.options,n=r.title,l=toFont(n.font),w=toPadding(n.padding);if(!n.display)return;const d=getRtlAdapter(r.rtl,this.left,this.width),f=this.ctx,a=n.position,u=l.size/2,g=w.top+u;let $,v=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),$=this.top+g,v=_alignStartEnd(r.align,v,this.right-S);else{const h=this.columnSizes.reduce((b,m)=>Math.max(b,m.height),0);$=g+_alignStartEnd(r.align,this.top,this.bottom-h-r.labels.padding-this._computeTitleHeight())}const E=_alignStartEnd(a,v,v+S);f.textAlign=d.textAlign(_toLeftRightCenter(a)),f.textBaseline="middle",f.strokeStyle=n.color,f.fillStyle=n.color,f.font=l.string,renderText(f,n.text,E,$,l)}_computeTitleHeight(){const r=this.options.title,n=toFont(r.font),l=toPadding(r.padding);return r.display?n.lineHeight+l.height:0}_getLegendItemAt(r,n){let l,w,d;if(_isBetween(r,this.left,this.right)&&_isBetween(n,this.top,this.bottom)){for(d=this.legendHitBoxes,l=0;l<d.length;++l)if(w=d[l],_isBetween(r,w.left,w.left+w.width)&&_isBetween(n,w.top,w.top+w.height))return this.legendItems[l]}return null}handleEvent(r){const n=this.options;if(!isListened(r.type,n))return;const l=this._getLegendItemAt(r.x,r.y);if(r.type==="mousemove"||r.type==="mouseout"){const w=this._hoveredItem,d=itemsEqual(w,l);w&&!d&&callback(n.onLeave,[r,w,this],this),this._hoveredItem=l,l&&!d&&callback(n.onHover,[r,l,this],this)}else l&&callback(n.onClick,[r,l,this],this)}}function calculateItemSize(i,r,n,l,w){const d=calculateItemWidth(l,i,r,n),f=calculateItemHeight(w,l,r.lineHeight);return{itemWidth:d,itemHeight:f}}function calculateItemWidth(i,r,n,l){let w=i.text;return w&&typeof w!="string"&&(w=w.reduce((d,f)=>d.length>f.length?d:f)),r+n.size/2+l.measureText(w).width}function calculateItemHeight(i,r,n){let l=i;return typeof r.text!="string"&&(l=calculateLegendItemHeight(r,n)),l}function calculateLegendItemHeight(i,r){const n=i.text?i.text.length:0;return r*n}function isListened(i,r){return!!((i==="mousemove"||i==="mouseout")&&(r.onHover||r.onLeave)||r.onClick&&(i==="click"||i==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(i,r,n){const l=i.legend=new Legend({ctx:i.ctx,options:n,chart:i});layouts.configure(i,l,n),layouts.addBox(i,l)},stop(i){layouts.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,r,n){const l=i.legend;layouts.configure(i,l,n),l.options=n},afterUpdate(i){const r=i.legend;r.buildLabels(),r.adjustHitBoxes()},afterEvent(i,r){r.replay||i.legend.handleEvent(r.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,r,n){const l=r.datasetIndex,w=n.chart;w.isDatasetVisible(l)?(w.hide(l),r.hidden=!0):(w.show(l),r.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const r=i.data.datasets,{labels:{usePointStyle:n,pointStyle:l,textAlign:w,color:d,useBorderRadius:f,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(u=>{const g=u.controller.getStyle(n?0:void 0),$=toPadding(g.borderWidth);return{text:r[u.index].label,fillStyle:g.backgroundColor,fontColor:d,hidden:!u.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:($.width+$.height)/4,strokeStyle:g.borderColor,pointStyle:l||g.pointStyle,rotation:g.rotation,textAlign:w||g.textAlign,borderRadius:f&&(a||g.borderRadius),datasetIndex:u.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Title extends Element$1{constructor(r){super(),this.chart=r.chart,this.options=r.options,this.ctx=r.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(r,n){const l=this.options;if(this.left=0,this.top=0,!l.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=r,this.height=this.bottom=n;const w=isArray(l.text)?l.text.length:1;this._padding=toPadding(l.padding);const d=w*toFont(l.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=d:this.width=d}isHorizontal(){const r=this.options.position;return r==="top"||r==="bottom"}_drawArgs(r){const{top:n,left:l,bottom:w,right:d,options:f}=this,a=f.align;let u=0,g,$,v;return this.isHorizontal()?($=_alignStartEnd(a,l,d),v=n+r,g=d-l):(f.position==="left"?($=l+r,v=_alignStartEnd(a,w,n),u=PI*-.5):($=d-r,v=_alignStartEnd(a,n,w),u=PI*.5),g=w-n),{titleX:$,titleY:v,maxWidth:g,rotation:u}}draw(){const r=this.ctx,n=this.options;if(!n.display)return;const l=toFont(n.font),d=l.lineHeight/2+this._padding.top,{titleX:f,titleY:a,maxWidth:u,rotation:g}=this._drawArgs(d);renderText(r,n.text,0,0,l,{color:n.color,maxWidth:u,rotation:g,textAlign:_toLeftRightCenter(n.align),textBaseline:"middle",translation:[f,a]})}}function createTitle(i,r){const n=new Title({ctx:i.ctx,options:r,chart:i});layouts.configure(i,n,r),layouts.addBox(i,n),i.titleBlock=n}var plugin_title={id:"title",_element:Title,start(i,r,n){createTitle(i,n)},stop(i){const r=i.titleBlock;layouts.removeBox(i,r),delete i.titleBlock},beforeUpdate(i,r,n){const l=i.titleBlock;layouts.configure(i,l,n),l.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(i){if(!i.length)return!1;let r,n,l=new Set,w=0,d=0;for(r=0,n=i.length;r<n;++r){const a=i[r].element;if(a&&a.hasValue()){const u=a.tooltipPosition();l.add(u.x),w+=u.y,++d}}return d===0||l.size===0?!1:{x:[...l].reduce((a,u)=>a+u)/l.size,y:w/d}},nearest(i,r){if(!i.length)return!1;let n=r.x,l=r.y,w=Number.POSITIVE_INFINITY,d,f,a;for(d=0,f=i.length;d<f;++d){const u=i[d].element;if(u&&u.hasValue()){const g=u.getCenterPoint(),$=distanceBetweenPoints(r,g);$<w&&(w=$,a=u)}}if(a){const u=a.tooltipPosition();n=u.x,l=u.y}return{x:n,y:l}}};function pushOrConcat(i,r){return r&&(isArray(r)?Array.prototype.push.apply(i,r):i.push(r)),i}function splitNewlines(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function createTooltipItem(i,r){const{element:n,datasetIndex:l,index:w}=r,d=i.getDatasetMeta(l).controller,{label:f,value:a}=d.getLabelAndValue(w);return{chart:i,label:f,parsed:d.getParsed(w),raw:i.data.datasets[l].data[w],formattedValue:a,dataset:d.getDataset(),dataIndex:w,datasetIndex:l,element:n}}function getTooltipSize(i,r){const n=i.chart.ctx,{body:l,footer:w,title:d}=i,{boxWidth:f,boxHeight:a}=r,u=toFont(r.bodyFont),g=toFont(r.titleFont),$=toFont(r.footerFont),v=d.length,S=w.length,E=l.length,h=toPadding(r.padding);let b=h.height,m=0,p=l.reduce((x,A)=>x+A.before.length+A.lines.length+A.after.length,0);if(p+=i.beforeBody.length+i.afterBody.length,v&&(b+=v*g.lineHeight+(v-1)*r.titleSpacing+r.titleMarginBottom),p){const x=r.displayColors?Math.max(a,u.lineHeight):u.lineHeight;b+=E*x+(p-E)*u.lineHeight+(p-1)*r.bodySpacing}S&&(b+=r.footerMarginTop+S*$.lineHeight+(S-1)*r.footerSpacing);let _=0;const y=function(x){m=Math.max(m,n.measureText(x).width+_)};return n.save(),n.font=g.string,each(i.title,y),n.font=u.string,each(i.beforeBody.concat(i.afterBody),y),_=r.displayColors?f+2+r.boxPadding:0,each(l,x=>{each(x.before,y),each(x.lines,y),each(x.after,y)}),_=0,n.font=$.string,each(i.footer,y),n.restore(),m+=h.width,{width:m,height:b}}function determineYAlign(i,r){const{y:n,height:l}=r;return n<l/2?"top":n>i.height-l/2?"bottom":"center"}function doesNotFitWithAlign(i,r,n,l){const{x:w,width:d}=l,f=n.caretSize+n.caretPadding;if(i==="left"&&w+d+f>r.width||i==="right"&&w-d-f<0)return!0}function determineXAlign(i,r,n,l){const{x:w,width:d}=n,{width:f,chartArea:{left:a,right:u}}=i;let g="center";return l==="center"?g=w<=(a+u)/2?"left":"right":w<=d/2?g="left":w>=f-d/2&&(g="right"),doesNotFitWithAlign(g,i,r,n)&&(g="center"),g}function determineAlignment(i,r,n){const l=n.yAlign||r.yAlign||determineYAlign(i,n);return{xAlign:n.xAlign||r.xAlign||determineXAlign(i,r,n,l),yAlign:l}}function alignX(i,r){let{x:n,width:l}=i;return r==="right"?n-=l:r==="center"&&(n-=l/2),n}function alignY(i,r,n){let{y:l,height:w}=i;return r==="top"?l+=n:r==="bottom"?l-=w+n:l-=w/2,l}function getBackgroundPoint(i,r,n,l){const{caretSize:w,caretPadding:d,cornerRadius:f}=i,{xAlign:a,yAlign:u}=n,g=w+d,{topLeft:$,topRight:v,bottomLeft:S,bottomRight:E}=toTRBLCorners(f);let h=alignX(r,a);const b=alignY(r,u,g);return u==="center"?a==="left"?h+=g:a==="right"&&(h-=g):a==="left"?h-=Math.max($,S)+w:a==="right"&&(h+=Math.max(v,E)+w),{x:_limitValue(h,0,l.width-r.width),y:_limitValue(b,0,l.height-r.height)}}function getAlignedX(i,r,n){const l=toPadding(n.padding);return r==="center"?i.x+i.width/2:r==="right"?i.x+i.width-l.right:i.x+l.left}function getBeforeAfterBodyLines(i){return pushOrConcat([],splitNewlines(i))}function createTooltipContext(i,r,n){return createContext(i,{tooltip:r,tooltipItems:n,type:"tooltip"})}function overrideCallbacks(i,r){const n=r&&r.dataset&&r.dataset.tooltip&&r.dataset.tooltip.callbacks;return n?i.override(n):i}const defaultCallbacks={beforeTitle:noop,title(i){if(i.length>0){const r=i[0],n=r.chart.data.labels,l=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return r.dataset.label||"";if(r.label)return r.label;if(l>0&&r.dataIndex<l)return n[r.dataIndex]}return""},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let r=i.dataset.label||"";r&&(r+=": ");const n=i.formattedValue;return isNullOrUndef(n)||(r+=n),r},labelColor(i){const n=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const n=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop};function invokeCallbackWithFallback(i,r,n,l){const w=i[r].call(n,l);return typeof w>"u"?defaultCallbacks[r].call(n,l):w}class Tooltip extends Element$1{constructor(r){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=r.chart,this.options=r.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(r){this.options=r,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const r=this._cachedAnimations;if(r)return r;const n=this.chart,l=this.options.setContext(this.getContext()),w=l.enabled&&n.options.animation&&l.animations,d=new Animations(this.chart,w);return w._cacheable&&(this._cachedAnimations=Object.freeze(d)),d}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(r,n){const{callbacks:l}=n,w=invokeCallbackWithFallback(l,"beforeTitle",this,r),d=invokeCallbackWithFallback(l,"title",this,r),f=invokeCallbackWithFallback(l,"afterTitle",this,r);let a=[];return a=pushOrConcat(a,splitNewlines(w)),a=pushOrConcat(a,splitNewlines(d)),a=pushOrConcat(a,splitNewlines(f)),a}getBeforeBody(r,n){return getBeforeAfterBodyLines(invokeCallbackWithFallback(n.callbacks,"beforeBody",this,r))}getBody(r,n){const{callbacks:l}=n,w=[];return each(r,d=>{const f={before:[],lines:[],after:[]},a=overrideCallbacks(l,d);pushOrConcat(f.before,splitNewlines(invokeCallbackWithFallback(a,"beforeLabel",this,d))),pushOrConcat(f.lines,invokeCallbackWithFallback(a,"label",this,d)),pushOrConcat(f.after,splitNewlines(invokeCallbackWithFallback(a,"afterLabel",this,d))),w.push(f)}),w}getAfterBody(r,n){return getBeforeAfterBodyLines(invokeCallbackWithFallback(n.callbacks,"afterBody",this,r))}getFooter(r,n){const{callbacks:l}=n,w=invokeCallbackWithFallback(l,"beforeFooter",this,r),d=invokeCallbackWithFallback(l,"footer",this,r),f=invokeCallbackWithFallback(l,"afterFooter",this,r);let a=[];return a=pushOrConcat(a,splitNewlines(w)),a=pushOrConcat(a,splitNewlines(d)),a=pushOrConcat(a,splitNewlines(f)),a}_createItems(r){const n=this._active,l=this.chart.data,w=[],d=[],f=[];let a=[],u,g;for(u=0,g=n.length;u<g;++u)a.push(createTooltipItem(this.chart,n[u]));return r.filter&&(a=a.filter(($,v,S)=>r.filter($,v,S,l))),r.itemSort&&(a=a.sort(($,v)=>r.itemSort($,v,l))),each(a,$=>{const v=overrideCallbacks(r.callbacks,$);w.push(invokeCallbackWithFallback(v,"labelColor",this,$)),d.push(invokeCallbackWithFallback(v,"labelPointStyle",this,$)),f.push(invokeCallbackWithFallback(v,"labelTextColor",this,$))}),this.labelColors=w,this.labelPointStyles=d,this.labelTextColors=f,this.dataPoints=a,a}update(r,n){const l=this.options.setContext(this.getContext()),w=this._active;let d,f=[];if(!w.length)this.opacity!==0&&(d={opacity:0});else{const a=positioners[l.position].call(this,w,this._eventPosition);f=this._createItems(l),this.title=this.getTitle(f,l),this.beforeBody=this.getBeforeBody(f,l),this.body=this.getBody(f,l),this.afterBody=this.getAfterBody(f,l),this.footer=this.getFooter(f,l);const u=this._size=getTooltipSize(this,l),g=Object.assign({},a,u),$=determineAlignment(this.chart,l,g),v=getBackgroundPoint(l,g,$,this.chart);this.xAlign=$.xAlign,this.yAlign=$.yAlign,d={opacity:1,x:v.x,y:v.y,width:u.width,height:u.height,caretX:a.x,caretY:a.y}}this._tooltipItems=f,this.$context=void 0,d&&this._resolveAnimations().update(this,d),r&&l.external&&l.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(r,n,l,w){const d=this.getCaretPosition(r,l,w);n.lineTo(d.x1,d.y1),n.lineTo(d.x2,d.y2),n.lineTo(d.x3,d.y3)}getCaretPosition(r,n,l){const{xAlign:w,yAlign:d}=this,{caretSize:f,cornerRadius:a}=l,{topLeft:u,topRight:g,bottomLeft:$,bottomRight:v}=toTRBLCorners(a),{x:S,y:E}=r,{width:h,height:b}=n;let m,p,_,y,x,A;return d==="center"?(x=E+b/2,w==="left"?(m=S,p=m-f,y=x+f,A=x-f):(m=S+h,p=m+f,y=x-f,A=x+f),_=m):(w==="left"?p=S+Math.max(u,$)+f:w==="right"?p=S+h-Math.max(g,v)-f:p=this.caretX,d==="top"?(y=E,x=y-f,m=p-f,_=p+f):(y=E+b,x=y+f,m=p+f,_=p-f),A=y),{x1:m,x2:p,x3:_,y1:y,y2:x,y3:A}}drawTitle(r,n,l){const w=this.title,d=w.length;let f,a,u;if(d){const g=getRtlAdapter(l.rtl,this.x,this.width);for(r.x=getAlignedX(this,l.titleAlign,l),n.textAlign=g.textAlign(l.titleAlign),n.textBaseline="middle",f=toFont(l.titleFont),a=l.titleSpacing,n.fillStyle=l.titleColor,n.font=f.string,u=0;u<d;++u)n.fillText(w[u],g.x(r.x),r.y+f.lineHeight/2),r.y+=f.lineHeight+a,u+1===d&&(r.y+=l.titleMarginBottom-a)}}_drawColorBox(r,n,l,w,d){const f=this.labelColors[l],a=this.labelPointStyles[l],{boxHeight:u,boxWidth:g}=d,$=toFont(d.bodyFont),v=getAlignedX(this,"left",d),S=w.x(v),E=u<$.lineHeight?($.lineHeight-u)/2:0,h=n.y+E;if(d.usePointStyle){const b={radius:Math.min(g,u)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=w.leftForLtr(S,g)+g/2,p=h+u/2;r.strokeStyle=d.multiKeyBackground,r.fillStyle=d.multiKeyBackground,drawPoint(r,b,m,p),r.strokeStyle=f.borderColor,r.fillStyle=f.backgroundColor,drawPoint(r,b,m,p)}else{r.lineWidth=isObject(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,r.strokeStyle=f.borderColor,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset||0;const b=w.leftForLtr(S,g),m=w.leftForLtr(w.xPlus(S,1),g-2),p=toTRBLCorners(f.borderRadius);Object.values(p).some(_=>_!==0)?(r.beginPath(),r.fillStyle=d.multiKeyBackground,addRoundedRectPath(r,{x:b,y:h,w:g,h:u,radius:p}),r.fill(),r.stroke(),r.fillStyle=f.backgroundColor,r.beginPath(),addRoundedRectPath(r,{x:m,y:h+1,w:g-2,h:u-2,radius:p}),r.fill()):(r.fillStyle=d.multiKeyBackground,r.fillRect(b,h,g,u),r.strokeRect(b,h,g,u),r.fillStyle=f.backgroundColor,r.fillRect(m,h+1,g-2,u-2))}r.fillStyle=this.labelTextColors[l]}drawBody(r,n,l){const{body:w}=this,{bodySpacing:d,bodyAlign:f,displayColors:a,boxHeight:u,boxWidth:g,boxPadding:$}=l,v=toFont(l.bodyFont);let S=v.lineHeight,E=0;const h=getRtlAdapter(l.rtl,this.x,this.width),b=function(k){n.fillText(k,h.x(r.x+E),r.y+S/2),r.y+=S+d},m=h.textAlign(f);let p,_,y,x,A,R,C;for(n.textAlign=f,n.textBaseline="middle",n.font=v.string,r.x=getAlignedX(this,m,l),n.fillStyle=l.bodyColor,each(this.beforeBody,b),E=a&&m!=="right"?f==="center"?g/2+$:g+2+$:0,x=0,R=w.length;x<R;++x){for(p=w[x],_=this.labelTextColors[x],n.fillStyle=_,each(p.before,b),y=p.lines,a&&y.length&&(this._drawColorBox(n,r,x,h,l),S=Math.max(v.lineHeight,u)),A=0,C=y.length;A<C;++A)b(y[A]),S=v.lineHeight;each(p.after,b)}E=0,S=v.lineHeight,each(this.afterBody,b),r.y-=d}drawFooter(r,n,l){const w=this.footer,d=w.length;let f,a;if(d){const u=getRtlAdapter(l.rtl,this.x,this.width);for(r.x=getAlignedX(this,l.footerAlign,l),r.y+=l.footerMarginTop,n.textAlign=u.textAlign(l.footerAlign),n.textBaseline="middle",f=toFont(l.footerFont),n.fillStyle=l.footerColor,n.font=f.string,a=0;a<d;++a)n.fillText(w[a],u.x(r.x),r.y+f.lineHeight/2),r.y+=f.lineHeight+l.footerSpacing}}drawBackground(r,n,l,w){const{xAlign:d,yAlign:f}=this,{x:a,y:u}=r,{width:g,height:$}=l,{topLeft:v,topRight:S,bottomLeft:E,bottomRight:h}=toTRBLCorners(w.cornerRadius);n.fillStyle=w.backgroundColor,n.strokeStyle=w.borderColor,n.lineWidth=w.borderWidth,n.beginPath(),n.moveTo(a+v,u),f==="top"&&this.drawCaret(r,n,l,w),n.lineTo(a+g-S,u),n.quadraticCurveTo(a+g,u,a+g,u+S),f==="center"&&d==="right"&&this.drawCaret(r,n,l,w),n.lineTo(a+g,u+$-h),n.quadraticCurveTo(a+g,u+$,a+g-h,u+$),f==="bottom"&&this.drawCaret(r,n,l,w),n.lineTo(a+E,u+$),n.quadraticCurveTo(a,u+$,a,u+$-E),f==="center"&&d==="left"&&this.drawCaret(r,n,l,w),n.lineTo(a,u+v),n.quadraticCurveTo(a,u,a+v,u),n.closePath(),n.fill(),w.borderWidth>0&&n.stroke()}_updateAnimationTarget(r){const n=this.chart,l=this.$animations,w=l&&l.x,d=l&&l.y;if(w||d){const f=positioners[r.position].call(this,this._active,this._eventPosition);if(!f)return;const a=this._size=getTooltipSize(this,r),u=Object.assign({},f,this._size),g=determineAlignment(n,r,u),$=getBackgroundPoint(r,u,g,n);(w._to!==$.x||d._to!==$.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=a.width,this.height=a.height,this.caretX=f.x,this.caretY=f.y,this._resolveAnimations().update(this,$))}}_willRender(){return!!this.opacity}draw(r){const n=this.options.setContext(this.getContext());let l=this.opacity;if(!l)return;this._updateAnimationTarget(n);const w={width:this.width,height:this.height},d={x:this.x,y:this.y};l=Math.abs(l)<.001?0:l;const f=toPadding(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(r.save(),r.globalAlpha=l,this.drawBackground(d,r,w,n),overrideTextDirection(r,n.textDirection),d.y+=f.top,this.drawTitle(d,r,n),this.drawBody(d,r,n),this.drawFooter(d,r,n),restoreTextDirection(r,n.textDirection),r.restore())}getActiveElements(){return this._active||[]}setActiveElements(r,n){const l=this._active,w=r.map(({datasetIndex:a,index:u})=>{const g=this.chart.getDatasetMeta(a);if(!g)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:g.data[u],index:u}}),d=!_elementsEqual(l,w),f=this._positionChanged(w,n);(d||f)&&(this._active=w,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(r,n,l=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const w=this.options,d=this._active||[],f=this._getActiveElements(r,d,n,l),a=this._positionChanged(f,r),u=n||!_elementsEqual(f,d)||a;return u&&(this._active=f,(w.enabled||w.external)&&(this._eventPosition={x:r.x,y:r.y},this.update(!0,n))),u}_getActiveElements(r,n,l,w){const d=this.options;if(r.type==="mouseout")return[];if(!w)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const f=this.chart.getElementsAtEventForMode(r,d.mode,d,l);return d.reverse&&f.reverse(),f}_positionChanged(r,n){const{caretX:l,caretY:w,options:d}=this,f=positioners[d.position].call(this,r,n);return f!==!1&&(l!==f.x||w!==f.y)}}Vn(Tooltip,"positioners",positioners);var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(i,r,n){n&&(i.tooltip=new Tooltip({chart:i,options:n}))},beforeUpdate(i,r,n){i.tooltip&&i.tooltip.initialize(n)},reset(i,r,n){i.tooltip&&i.tooltip.initialize(n)},afterDraw(i){const r=i.tooltip;if(r&&r._willRender()){const n={tooltip:r};if(i.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;r.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",n)}},afterEvent(i,r){if(i.tooltip){const n=r.replay;i.tooltip.handleEvent(r.event,n,r.inChartArea)&&(r.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,r)=>r.bodyFont.size,boxWidth:(i,r)=>r.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:defaultCallbacks},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const addIfString=(i,r,n,l)=>(typeof r=="string"?(n=i.push(r)-1,l.unshift({index:n,label:r})):isNaN(r)&&(n=null),n);function findOrAddLabel(i,r,n,l){const w=i.indexOf(r);if(w===-1)return addIfString(i,r,n,l);const d=i.lastIndexOf(r);return w!==d?n:w}const validIndex=(i,r)=>i===null?null:_limitValue(Math.round(i),0,r);function _getLabelForValue(i){const r=this.getLabels();return i>=0&&i<r.length?r[i]:i}class CategoryScale extends Scale{constructor(r){super(r),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(r){const n=this._addedLabels;if(n.length){const l=this.getLabels();for(const{index:w,label:d}of n)l[w]===d&&l.splice(w,1);this._addedLabels=[]}super.init(r)}parse(r,n){if(isNullOrUndef(r))return null;const l=this.getLabels();return n=isFinite(n)&&l[n]===r?n:findOrAddLabel(l,r,valueOrDefault(n,r),this._addedLabels),validIndex(n,l.length-1)}determineDataLimits(){const{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:l,max:w}=this.getMinMax(!0);this.options.bounds==="ticks"&&(r||(l=0),n||(w=this.getLabels().length-1)),this.min=l,this.max=w}buildTicks(){const r=this.min,n=this.max,l=this.options.offset,w=[];let d=this.getLabels();d=r===0&&n===d.length-1?d:d.slice(r,n+1),this._valueRange=Math.max(d.length-(l?0:1),1),this._startValue=this.min-(l?.5:0);for(let f=r;f<=n;f++)w.push({value:f});return w}getLabelForValue(r){return _getLabelForValue.call(this,r)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(r){return typeof r!="number"&&(r=this.parse(r)),r===null?NaN:this.getPixelForDecimal((r-this._startValue)/this._valueRange)}getPixelForTick(r){const n=this.ticks;return r<0||r>n.length-1?null:this.getPixelForValue(n[r].value)}getValueForPixel(r){return Math.round(this._startValue+this.getDecimalForPixel(r)*this._valueRange)}getBasePixel(){return this.bottom}}Vn(CategoryScale,"id","category"),Vn(CategoryScale,"defaults",{ticks:{callback:_getLabelForValue}});function generateTicks$1(i,r){const n=[],{bounds:w,step:d,min:f,max:a,precision:u,count:g,maxTicks:$,maxDigits:v,includeBounds:S}=i,E=d||1,h=$-1,{min:b,max:m}=r,p=!isNullOrUndef(f),_=!isNullOrUndef(a),y=!isNullOrUndef(g),x=(m-b)/(v+1);let A=niceNum((m-b)/h/E)*E,R,C,k,D;if(A<1e-14&&!p&&!_)return[{value:b},{value:m}];D=Math.ceil(m/A)-Math.floor(b/A),D>h&&(A=niceNum(D*A/h/E)*E),isNullOrUndef(u)||(R=Math.pow(10,u),A=Math.ceil(A*R)/R),w==="ticks"?(C=Math.floor(b/A)*A,k=Math.ceil(m/A)*A):(C=b,k=m),p&&_&&d&&almostWhole((a-f)/d,A/1e3)?(D=Math.round(Math.min((a-f)/A,$)),A=(a-f)/D,C=f,k=a):y?(C=p?f:C,k=_?a:k,D=g-1,A=(k-C)/D):(D=(k-C)/A,almostEquals(D,Math.round(D),A/1e3)?D=Math.round(D):D=Math.ceil(D));const j=Math.max(_decimalPlaces(A),_decimalPlaces(C));R=Math.pow(10,isNullOrUndef(u)?j:u),C=Math.round(C*R)/R,k=Math.round(k*R)/R;let V=0;for(p&&(S&&C!==f?(n.push({value:f}),C<f&&V++,almostEquals(Math.round((C+V*A)*R)/R,f,relativeLabelSize(f,x,i))&&V++):C<f&&V++);V<D;++V){const z=Math.round((C+V*A)*R)/R;if(_&&z>a)break;n.push({value:z})}return _&&S&&k!==a?n.length&&almostEquals(n[n.length-1].value,a,relativeLabelSize(a,x,i))?n[n.length-1].value=a:n.push({value:a}):(!_||k===a)&&n.push({value:k}),n}function relativeLabelSize(i,r,{horizontal:n,minRotation:l}){const w=toRadians(l),d=(n?Math.sin(w):Math.cos(w))||.001,f=.75*r*(""+i).length;return Math.min(r/d,f)}class LinearScaleBase extends Scale{constructor(r){super(r),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(r,n){return isNullOrUndef(r)||(typeof r=="number"||r instanceof Number)&&!isFinite(+r)?null:+r}handleTickRangeOptions(){const{beginAtZero:r}=this.options,{minDefined:n,maxDefined:l}=this.getUserBounds();let{min:w,max:d}=this;const f=u=>w=n?w:u,a=u=>d=l?d:u;if(r){const u=sign(w),g=sign(d);u<0&&g<0?a(0):u>0&&g>0&&f(0)}if(w===d){let u=d===0?1:Math.abs(d*.05);a(d+u),r||f(w-u)}this.min=w,this.max=d}getTickLimit(){const r=this.options.ticks;let{maxTicksLimit:n,stepSize:l}=r,w;return l?(w=Math.ceil(this.max/l)-Math.floor(this.min/l)+1,w>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${l} would result generating up to ${w} ticks. Limiting to 1000.`),w=1e3)):(w=this.computeTickLimit(),n=n||11),n&&(w=Math.min(n,w)),w}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const r=this.options,n=r.ticks;let l=this.getTickLimit();l=Math.max(2,l);const w={maxTicks:l,bounds:r.bounds,min:r.min,max:r.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},d=this._range||this,f=generateTicks$1(w,d);return r.bounds==="ticks"&&_setMinAndMaxByKey(f,this,"value"),r.reverse?(f.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),f}configure(){const r=this.ticks;let n=this.min,l=this.max;if(super.configure(),this.options.offset&&r.length){const w=(l-n)/Math.max(r.length-1,1)/2;n-=w,l+=w}this._startValue=n,this._endValue=l,this._valueRange=l-n}getLabelForValue(r){return formatNumber(r,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:r,max:n}=this.getMinMax(!0);this.min=isNumberFinite(r)?r:0,this.max=isNumberFinite(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const r=this.isHorizontal(),n=r?this.width:this.height,l=toRadians(this.options.ticks.minRotation),w=(r?Math.sin(l):Math.cos(l))||.001,d=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,d.lineHeight/w))}getPixelForValue(r){return r===null?NaN:this.getPixelForDecimal((r-this._startValue)/this._valueRange)}getValueForPixel(r){return this._startValue+this.getDecimalForPixel(r)*this._valueRange}}Vn(LinearScale,"id","linear"),Vn(LinearScale,"defaults",{ticks:{callback:Ticks.formatters.numeric}});const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(i,r){return i-r}function parse(i,r){if(isNullOrUndef(r))return null;const n=i._adapter,{parser:l,round:w,isoWeekday:d}=i._parseOpts;let f=r;return typeof l=="function"&&(f=l(f)),isNumberFinite(f)||(f=typeof l=="string"?n.parse(f,l):n.parse(f)),f===null?null:(w&&(f=w==="week"&&(isNumber(d)||d===!0)?n.startOf(f,"isoWeek",d):n.startOf(f,w)),+f)}function determineUnitForAutoTicks(i,r,n,l){const w=UNITS.length;for(let d=UNITS.indexOf(i);d<w-1;++d){const f=INTERVALS[UNITS[d]],a=f.steps?f.steps:Number.MAX_SAFE_INTEGER;if(f.common&&Math.ceil((n-r)/(a*f.size))<=l)return UNITS[d]}return UNITS[w-1]}function determineUnitForFormatting(i,r,n,l,w){for(let d=UNITS.length-1;d>=UNITS.indexOf(n);d--){const f=UNITS[d];if(INTERVALS[f].common&&i._adapter.diff(w,l,f)>=r-1)return f}return UNITS[n?UNITS.indexOf(n):0]}function determineMajorUnit(i){for(let r=UNITS.indexOf(i)+1,n=UNITS.length;r<n;++r)if(INTERVALS[UNITS[r]].common)return UNITS[r]}function addTick(i,r,n){if(!n)i[r]=!0;else if(n.length){const{lo:l,hi:w}=_lookup(n,r),d=n[l]>=r?n[l]:n[w];i[d]=!0}}function setMajorTicks(i,r,n,l){const w=i._adapter,d=+w.startOf(r[0].value,l),f=r[r.length-1].value;let a,u;for(a=d;a<=f;a=+w.add(a,1,l))u=n[a],u>=0&&(r[u].major=!0);return r}function ticksFromTimestamps(i,r,n){const l=[],w={},d=r.length;let f,a;for(f=0;f<d;++f)a=r[f],w[a]=f,l.push({value:a,major:!1});return d===0||!n?l:setMajorTicks(i,l,w,n)}class TimeScale extends Scale{constructor(r){super(r),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(r,n={}){const l=r.time||(r.time={}),w=this._adapter=new adapters._date(r.adapters.date);w.init(n),mergeIf(l.displayFormats,w.formats()),this._parseOpts={parser:l.parser,round:l.round,isoWeekday:l.isoWeekday},super.init(r),this._normalized=n.normalized}parse(r,n){return r===void 0?null:parse(this,r)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const r=this.options,n=this._adapter,l=r.time.unit||"day";let{min:w,max:d,minDefined:f,maxDefined:a}=this.getUserBounds();function u(g){!f&&!isNaN(g.min)&&(w=Math.min(w,g.min)),!a&&!isNaN(g.max)&&(d=Math.max(d,g.max))}(!f||!a)&&(u(this._getLabelBounds()),(r.bounds!=="ticks"||r.ticks.source!=="labels")&&u(this.getMinMax(!1))),w=isNumberFinite(w)&&!isNaN(w)?w:+n.startOf(Date.now(),l),d=isNumberFinite(d)&&!isNaN(d)?d:+n.endOf(Date.now(),l)+1,this.min=Math.min(w,d-1),this.max=Math.max(w+1,d)}_getLabelBounds(){const r=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;return r.length&&(n=r[0],l=r[r.length-1]),{min:n,max:l}}buildTicks(){const r=this.options,n=r.time,l=r.ticks,w=l.source==="labels"?this.getLabelTimestamps():this._generate();r.bounds==="ticks"&&w.length&&(this.min=this._userMin||w[0],this.max=this._userMax||w[w.length-1]);const d=this.min,f=this.max,a=_filterBetween(w,d,f);return this._unit=n.unit||(l.autoSkip?determineUnitForAutoTicks(n.minUnit,this.min,this.max,this._getLabelCapacity(d)):determineUnitForFormatting(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!l.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(w),r.reverse&&a.reverse(),ticksFromTimestamps(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(r=>+r.value))}initOffsets(r=[]){let n=0,l=0,w,d;this.options.offset&&r.length&&(w=this.getDecimalForValue(r[0]),r.length===1?n=1-w:n=(this.getDecimalForValue(r[1])-w)/2,d=this.getDecimalForValue(r[r.length-1]),r.length===1?l=d:l=(d-this.getDecimalForValue(r[r.length-2]))/2);const f=r.length<3?.5:.25;n=_limitValue(n,0,f),l=_limitValue(l,0,f),this._offsets={start:n,end:l,factor:1/(n+1+l)}}_generate(){const r=this._adapter,n=this.min,l=this.max,w=this.options,d=w.time,f=d.unit||determineUnitForAutoTicks(d.minUnit,n,l,this._getLabelCapacity(n)),a=valueOrDefault(w.ticks.stepSize,1),u=f==="week"?d.isoWeekday:!1,g=isNumber(u)||u===!0,$={};let v=n,S,E;if(g&&(v=+r.startOf(v,"isoWeek",u)),v=+r.startOf(v,g?"day":f),r.diff(l,n,f)>1e5*a)throw new Error(n+" and "+l+" are too far apart with stepSize of "+a+" "+f);const h=w.ticks.source==="data"&&this.getDataTimestamps();for(S=v,E=0;S<l;S=+r.add(S,a,f),E++)addTick($,S,h);return(S===l||w.bounds==="ticks"||E===1)&&addTick($,S,h),Object.keys($).sort(sorter).map(b=>+b)}getLabelForValue(r){const n=this._adapter,l=this.options.time;return l.tooltipFormat?n.format(r,l.tooltipFormat):n.format(r,l.displayFormats.datetime)}format(r,n){const w=this.options.time.displayFormats,d=this._unit,f=n||w[d];return this._adapter.format(r,f)}_tickFormatFunction(r,n,l,w){const d=this.options,f=d.ticks.callback;if(f)return callback(f,[r,n,l],this);const a=d.time.displayFormats,u=this._unit,g=this._majorUnit,$=u&&a[u],v=g&&a[g],S=l[n],E=g&&v&&S&&S.major;return this._adapter.format(r,w||(E?v:$))}generateTickLabels(r){let n,l,w;for(n=0,l=r.length;n<l;++n)w=r[n],w.label=this._tickFormatFunction(w.value,n,r)}getDecimalForValue(r){return r===null?NaN:(r-this.min)/(this.max-this.min)}getPixelForValue(r){const n=this._offsets,l=this.getDecimalForValue(r);return this.getPixelForDecimal((n.start+l)*n.factor)}getValueForPixel(r){const n=this._offsets,l=this.getDecimalForPixel(r)/n.factor-n.end;return this.min+l*(this.max-this.min)}_getLabelSize(r){const n=this.options.ticks,l=this.ctx.measureText(r).width,w=toRadians(this.isHorizontal()?n.maxRotation:n.minRotation),d=Math.cos(w),f=Math.sin(w),a=this._resolveTickFontOptions(0).size;return{w:l*d+a*f,h:l*f+a*d}}_getLabelCapacity(r){const n=this.options.time,l=n.displayFormats,w=l[n.unit]||l.millisecond,d=this._tickFormatFunction(r,0,ticksFromTimestamps(this,[r],this._majorUnit),w),f=this._getLabelSize(d),a=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return a>0?a:1}getDataTimestamps(){let r=this._cache.data||[],n,l;if(r.length)return r;const w=this.getMatchingVisibleMetas();if(this._normalized&&w.length)return this._cache.data=w[0].controller.getAllParsedValues(this);for(n=0,l=w.length;n<l;++n)r=r.concat(w[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const r=this._cache.labels||[];let n,l;if(r.length)return r;const w=this.getLabels();for(n=0,l=w.length;n<l;++n)r.push(parse(this,w[n]));return this._cache.labels=this._normalized?r:this.normalize(r)}normalize(r){return _arrayUnique(r.sort(sorter))}}Vn(TimeScale,"id","time"),Vn(TimeScale,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function interpolate(i,r,n){let l=0,w=i.length-1,d,f,a,u;n?(r>=i[l].pos&&r<=i[w].pos&&({lo:l,hi:w}=_lookupByKey(i,"pos",r)),{pos:d,time:a}=i[l],{pos:f,time:u}=i[w]):(r>=i[l].time&&r<=i[w].time&&({lo:l,hi:w}=_lookupByKey(i,"time",r)),{time:d,pos:a}=i[l],{time:f,pos:u}=i[w]);const g=f-d;return g?a+(u-a)*(r-d)/g:a}class TimeSeriesScale extends TimeScale{constructor(r){super(r),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const r=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(r);this._minPos=interpolate(n,this.min),this._tableRange=interpolate(n,this.max)-this._minPos,super.initOffsets(r)}buildLookupTable(r){const{min:n,max:l}=this,w=[],d=[];let f,a,u,g,$;for(f=0,a=r.length;f<a;++f)g=r[f],g>=n&&g<=l&&w.push(g);if(w.length<2)return[{time:n,pos:0},{time:l,pos:1}];for(f=0,a=w.length;f<a;++f)$=w[f+1],u=w[f-1],g=w[f],Math.round(($+u)/2)!==g&&d.push({time:g,pos:f/(a-1)});return d}_generate(){const r=this.min,n=this.max;let l=super.getDataTimestamps();return(!l.includes(r)||!l.length)&&l.splice(0,0,r),(!l.includes(n)||l.length===1)&&l.push(n),l.sort((w,d)=>w-d)}_getTimestampsForTable(){let r=this._cache.all||[];if(r.length)return r;const n=this.getDataTimestamps(),l=this.getLabelTimestamps();return n.length&&l.length?r=this.normalize(n.concat(l)):r=n.length?n:l,r=this._cache.all=r,r}getDecimalForValue(r){return(interpolate(this._table,r)-this._minPos)/this._tableRange}getValueForPixel(r){const n=this._offsets,l=this.getDecimalForPixel(r)/n.factor-n.end;return interpolate(this._table,l*this._tableRange+this._minPos,!0)}}Vn(TimeSeriesScale,"id","timeseries"),Vn(TimeSeriesScale,"defaults",TimeScale.defaults);const defaultDatasetIdKey="label";function reforwardRef(i,r){typeof i=="function"?i(r):i&&(i.current=r)}function setOptions(i,r){const n=i.options;n&&r&&Object.assign(n,r)}function setLabels(i,r){i.labels=r}function setDatasets(i,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:defaultDatasetIdKey;const l=[];i.datasets=r.map(w=>{const d=i.datasets.find(f=>f[n]===w[n]);return!d||!w.data||l.includes(d)?{...w}:(l.push(d),Object.assign(d,w),d)})}function cloneData(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:defaultDatasetIdKey;const n={labels:[],datasets:[]};return setLabels(n,i.labels),setDatasets(n,i.datasets,r),n}function ChartComponent(i,r){const{height:n=150,width:l=300,redraw:w=!1,datasetIdKey:d,type:f,data:a,options:u,plugins:g=[],fallbackContent:$,updateMode:v,...S}=i,E=reactExports.useRef(null),h=reactExports.useRef(null),b=()=>{E.current&&(h.current=new Chart$1(E.current,{type:f,data:cloneData(a,d),options:u&&{...u},plugins:g}),reforwardRef(r,h.current))},m=()=>{reforwardRef(r,null),h.current&&(h.current.destroy(),h.current=null)};return reactExports.useEffect(()=>{!w&&h.current&&u&&setOptions(h.current,u)},[w,u]),reactExports.useEffect(()=>{!w&&h.current&&setLabels(h.current.config.data,a.labels)},[w,a.labels]),reactExports.useEffect(()=>{!w&&h.current&&a.datasets&&setDatasets(h.current.config.data,a.datasets,d)},[w,a.datasets]),reactExports.useEffect(()=>{h.current&&(w?(m(),setTimeout(b)):h.current.update(v))},[w,u,a.labels,a.datasets,v]),reactExports.useEffect(()=>{h.current&&(m(),setTimeout(b))},[f]),reactExports.useEffect(()=>(b(),()=>m()),[]),React.createElement("canvas",{ref:E,role:"img",height:n,width:l,...S},$)}const Chart=reactExports.forwardRef(ChartComponent);function createTypedChart(i,r){return Chart$1.register(r),reactExports.forwardRef((n,l)=>React.createElement(Chart,{...n,ref:l,type:i}))}const Bar=createTypedChart("bar",BarController);Chart$1.register(CategoryScale,LinearScale,BarElement,LineElement,PointElement,plugin_title,plugin_tooltip,plugin_legend);const DashboardGraficas=()=>{const[i,r]=reactExports.useState(null),[n,l]=reactExports.useState(0);return reactExports.useEffect(()=>{(async()=>{try{const f=(await axios$1.get("http://localhost:3000/api/foro")).data,a={};f.forEach(b=>{const p=new Date(b.fecha).toLocaleString("default",{month:"short",year:"numeric"});a[p]=(a[p]||0)+1});const u=Object.keys(a),g=Object.values(a);r({labels:u,datasets:[{label:"Preguntas por mes",data:g,backgroundColor:"#42a5f5",borderRadius:8}]});const S=(await axios$1.get("http://localhost:3000/api/usuarios")).data.filter(b=>b.rol==="estudiante"),E=S.reduce((b,m)=>{var _;const p=((_=m.progreso)==null?void 0:_.porcentaje)||0;return b+p},0),h=S.length?+(E/S.length).toFixed(1):0;l(h)}catch(d){console.error("Error al cargar estadsticas:",d)}})()},[]),jsxRuntimeExports.jsxs("div",{className:"dashboard-layout",children:[jsxRuntimeExports.jsx(SidebarMenu,{}),jsxRuntimeExports.jsxs("div",{className:"dashboard-content",children:[jsxRuntimeExports.jsx("h2",{children:"Estadsticas del Sistema"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-around",flexWrap:"wrap"},children:[jsxRuntimeExports.jsxs("div",{className:"grafica-card",children:[jsxRuntimeExports.jsx("h3",{children:"Preguntas en el foro"}),i?jsxRuntimeExports.jsx(Bar,{data:i}):jsxRuntimeExports.jsx("p",{children:"Cargando..."})]}),jsxRuntimeExports.jsxs("div",{className:"grafica-card",children:[jsxRuntimeExports.jsx("h3",{children:"Promedio de progreso"}),n!==null?jsxRuntimeExports.jsx(Bar,{data:{labels:["Estudiantes"],datasets:[{label:"Progreso promedio (%)",data:[n],backgroundColor:"#66bb6a",borderRadius:8}]},options:{indexAxis:"y",scales:{x:{min:0,max:100,title:{display:!0,text:"Porcentaje"}}},plugins:{legend:{display:!1}}}}):jsxRuntimeExports.jsx("p",{children:"Cargando..."})]})]})]})]})},App=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(CodeZooInfo,{})}),jsxRuntimeExports.jsx(Route,{path:"/terminos",element:jsxRuntimeExports.jsx(CodeZooTerms,{})}),jsxRuntimeExports.jsx(Route,{path:"/home",element:jsxRuntimeExports.jsxs(ProtectedRoute,{children:[jsxRuntimeExports.jsx(Home,{})," "]})}),jsxRuntimeExports.jsx(Route,{path:"/info",element:jsxRuntimeExports.jsx(Info,{})}),jsxRuntimeExports.jsx(Route,{path:"/sopa-de-letras",element:jsxRuntimeExports.jsx(SopaDeLetras,{})}),jsxRuntimeExports.jsx(Route,{path:"/memorama",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Memorama,{})})}),jsxRuntimeExports.jsx(Route,{path:"/safari-racing",element:jsxRuntimeExports.jsx(CarreraDeAutos,{})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(Settings,{})}),jsxRuntimeExports.jsx(Route,{path:"/avatar",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Avatar,{})})}),jsxRuntimeExports.jsx(Route,{path:"/libre",element:jsxRuntimeExports.jsxs(ProtectedRoute,{children:[" ",jsxRuntimeExports.jsx(Libre,{})]})}),jsxRuntimeExports.jsx(Route,{path:"/libro/:libroId",element:jsxRuntimeExports.jsx(Libro,{})}),jsxRuntimeExports.jsx(Route,{path:"/perfil",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(PerfilUsuario,{})})}),jsxRuntimeExports.jsx(Route,{path:"/foro",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Foro,{})})}),jsxRuntimeExports.jsx(Route,{path:"/ForumAdmin",element:jsxRuntimeExports.jsx(ForumAdmin,{})}),jsxRuntimeExports.jsx(Route,{path:"/UserManagement",element:jsxRuntimeExports.jsx(UserManagement,{})}),jsxRuntimeExports.jsx(Route,{path:"/Dashboard",element:jsxRuntimeExports.jsx(DashboardGraficas,{})})]})});ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})}));
